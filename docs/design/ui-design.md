# UI 設計 - 財務会計システム

## 概要

本ドキュメントは、財務会計システムの UI 設計を定義します。
オブジェクト指向 UI 設計（OOUX）の原則に従い、ユーザーが直感的に操作できるインターフェースを設計します。

---

## オブジェクトの特定

### 主要オブジェクト

| オブジェクト | 説明 | 主なアクション |
|-------------|------|---------------|
| ユーザー | システム利用者 | 登録、編集、削除、一覧表示 |
| 勘定科目 | 取引を分類する科目 | 登録、編集、削除、一覧表示 |
| 仕訳 | 取引の記録 | 入力、編集、削除、検索、承認、確定 |
| 元帳 | 科目別の取引履歴 | 照会 |
| 残高 | 科目の残高情報 | 照会 |
| 財務諸表 | 財務報告書 | 表示、ダウンロード |
| 監査ログ | 操作履歴 | 照会、ダウンロード |

### オブジェクト間の関係

```plantuml
@startuml
title オブジェクト関係図

object ユーザー {
  ユーザーID
  氏名
  ロール
}

object 勘定科目 {
  科目コード
  科目名
  種別
}

object 仕訳 {
  仕訳番号
  仕訳日付
  摘要
  ステータス
}

object 仕訳明細 {
  借方/貸方
  金額
}

object 元帳 {
  科目
  期間
  残高
}

object 残高 {
  日次残高
  月次残高
}

object 財務諸表 {
  貸借対照表
  損益計算書
}

ユーザー "1" -- "*" 仕訳 : 作成/承認
勘定科目 "1" -- "*" 仕訳明細 : 使用
仕訳 "1" -- "*" 仕訳明細 : 含む
勘定科目 "1" -- "1" 元帳 : 対応
元帳 "1" -- "*" 残高 : 集計
残高 "*" -- "1" 財務諸表 : 構成

@enduml
```

---

## 画面構成

### 全体レイアウト

```plantuml
@startsalt
{
  {/ <b>財務会計システム | ユーザー名 ▼ | [ログアウト] }
  {#
    {
      {T
        + ダッシュボード
        + 仕訳管理
        ++ 仕訳一覧
        ++ 仕訳入力
        ++ 承認待ち
        + 元帳・残高
        ++ 総勘定元帳
        ++ 補助元帳
        ++ 残高試算表
        + 財務諸表
        ++ 貸借対照表
        ++ 損益計算書
        ++ 財務分析
        + マスタ管理
        ++ 勘定科目
        + システム管理
        ++ ユーザー
        ++ 監査ログ
      }
    } | {
      <b>パンくずリスト > ページ名
      --
      .
      <b>メインコンテンツエリア
      .
      .
      .
    }
  }
}
@endsalt
```

### 画面一覧

| 画面 ID | 画面名 | 関連ユースケース | アクター |
|---------|--------|-----------------|---------|
| SCR-AUTH-001 | ログイン | UC-AUTH-001 | 全ユーザー |
| SCR-DASH-001 | ダッシュボード | - | 全ユーザー |
| SCR-MST-001 | 勘定科目一覧 | UC-MST-004 | 経理担当者以上 |
| SCR-MST-002 | 勘定科目登録/編集 | UC-MST-001, UC-MST-002 | 経理責任者 |
| SCR-JNL-001 | 仕訳一覧 | UC-JNL-004, UC-JNL-005 | 経理担当者以上 |
| SCR-JNL-002 | 仕訳入力/編集 | UC-JNL-001, UC-JNL-002 | 経理担当者以上 |
| SCR-JNL-003 | 仕訳詳細 | UC-JNL-004 | 経理担当者以上 |
| SCR-JNL-004 | 承認待ち一覧 | UC-JNL-008, UC-JNL-009 | 経理責任者 |
| SCR-LDG-001 | 総勘定元帳 | UC-LDG-001 | 経理担当者以上 |
| SCR-LDG-002 | 補助元帳 | UC-LDG-002 | 経理担当者以上 |
| SCR-LDG-003 | 残高試算表 | UC-LDG-005 | 経理責任者以上 |
| SCR-FS-001 | 貸借対照表 | UC-FS-001 | 経理責任者以上 |
| SCR-FS-002 | 損益計算書 | UC-FS-002 | 経理責任者以上 |
| SCR-FS-003 | 財務分析 | UC-FS-003 | 経営者 |
| SCR-USR-001 | ユーザー一覧 | UC-AUTH-003 | システム管理者 |
| SCR-USR-002 | ユーザー登録/編集 | UC-AUTH-003 | システム管理者 |
| SCR-SYS-001 | 監査ログ | UC-SYS-001 | システム管理者 |

---

## 画面設計

### SCR-AUTH-001: ログイン画面

**目的**: ユーザーがシステムにログインする

**レイアウト**:

```plantuml
@startsalt
{+
  .
  .
  {^<b>財務会計システム}
  .
  {
    ユーザーID
    "                    "
    パスワード
    "                    "
    .
    [    ログイン    ]
  }
  .
  {<color:red>エラーメッセージ表示エリア}
  .
}
@endsalt
```

**項目定義**:

| 項目 | 種別 | 必須 | バリデーション |
|------|------|------|---------------|
| ユーザーID | テキスト | ○ | 空白不可 |
| パスワード | パスワード | ○ | 空白不可 |

**アクション**:

| アクション | 条件 | 処理 |
|-----------|------|------|
| ログイン | 入力完了 | 認証処理→ダッシュボードへ遷移 |

**エラーメッセージ**:

| エラー | メッセージ |
|-------|----------|
| 認証失敗 | ユーザーIDまたはパスワードが正しくありません |
| アカウントロック | アカウントがロックされています。管理者にお問い合わせください |

---

### SCR-DASH-001: ダッシュボード

**目的**: システムの概要と重要な情報を表示する

**レイアウト**:

```plantuml
@startsalt
{
  {/ <b>財務会計システム | 田中太郎 ▼ | [ログアウト] }
  {#
    {
      {T
        + <b>ダッシュボード
        + 仕訳管理
        + 元帳・残高
        + 財務諸表
        + マスタ管理
        + システム管理
      }
    } | {
      <b>ダッシュボード
      --
      {+
        <b>お知らせ
        {
          {<color:red>[重要] 2024/03/01}
          決算期末のお知らせ
          3月31日は決算期末です。すべての仕訳を確定してください。
        }
        --
        {
          {<color:orange>[注意] 2024/03/05}
          システムメンテナンス
          3月15日 22:00〜24:00 にシステムメンテナンスを実施します。
        }
        --
        {
          {<color:blue>[お知らせ] 2024/03/10}
          新機能リリース
          仕訳一括インポート機能が追加されました。
        }
      }
      .
      {
        {^本日の仕訳件数
          <b>25 件
        } | {^承認待ち件数
          <b><color:orange>5 件
        }
      }
      .
      {+
        <b>最近の仕訳
        {#
          日付 | 摘要 | 金額 | ステータス
          2024/01/15 | 売上計上 | ¥100,000 | 承認待ち
          2024/01/15 | 仕入計上 | ¥50,000 | 下書き
          2024/01/14 | 給与支払 | ¥300,000 | 確定
        }
      }
    }
  }
}
@endsalt
```

**コンポーネント**:

| コンポーネント | 表示内容 | 更新頻度 |
|--------------|---------|---------|
| お知らせ | システム通知・重要なお知らせ | 画面表示時 |
| 本日の仕訳件数 | 当日入力された仕訳の件数 | 画面表示時 |
| 承認待ち件数 | 承認待ちステータスの仕訳件数 | 画面表示時 |
| 最近の仕訳 | 直近の仕訳（日付、摘要、金額、ステータス） | 画面表示時 |

**お知らせの種別**:

| 種別 | 表示色 | 用途 |
|------|--------|------|
| important（重要） | 赤 | 決算期末、緊急のお知らせ |
| warning（注意） | オレンジ | メンテナンス予告、期限通知 |
| info（お知らせ） | 青 | 新機能、一般的なお知らせ |

---

### SCR-MST-001: 勘定科目一覧

**目的**: 登録済みの勘定科目を一覧表示する

**レイアウト**:

```plantuml
@startsalt
{
  {/ <b>財務会計システム | 田中太郎 ▼ | [ログアウト] }
  {#
    {
      {T
        + ダッシュボード
        + 仕訳管理
        + 元帳・残高
        + 財務諸表
        + <b>マスタ管理
        ++ 勘定科目
        + システム管理
      }
    } | {
      マスタ管理 > <b>勘定科目一覧
      --
      {
        検索: "          " | ^種別^ | [新規登録]
      }
      .
      {+
        {#
          <&check> | 科目コード | 科目名 | 種別 | 操作
          [] | 1001 | 現金 | 資産 | [編集] [削除]
          [] | 1002 | 普通預金 | 資産 | [編集] [削除]
          [] | 2001 | 買掛金 | 負債 | [編集] [削除]
          [] | 4001 | 売上高 | 収益 | [編集] [削除]
          [] | 5001 | 仕入高 | 費用 | [編集] [削除]
        }
      }
      .
      { [< 前へ] | 1 | 2 | 3 | ... | 10 | [次へ >] | 全 100 件 }
    }
  }
}
@endsalt
```

**項目定義**:

| 項目 | 説明 |
|------|------|
| 検索 | 科目コード・科目名で部分一致検索 |
| 種別 | 資産/負債/純資産/収益/費用でフィルタ |
| チェックボックス | 一括操作用の選択 |

**アクション**:

| アクション | 処理 |
|-----------|------|
| 新規登録 | 勘定科目登録画面へ遷移 |
| 編集 | 勘定科目編集画面へ遷移 |
| 削除 | 削除確認ダイアログ表示 |
| 行クリック | 勘定科目詳細表示 |

---

### SCR-MST-002: 勘定科目登録/編集

**目的**: 勘定科目を新規登録または編集する

**レイアウト**:

```plantuml
@startsalt
{
  {/ <b>財務会計システム | 田中太郎 ▼ | [ログアウト] }
  {#
    {
      {T
        + ダッシュボード
        + 仕訳管理
        + 元帳・残高
        + 財務諸表
        + <b>マスタ管理
        ++ 勘定科目
        + システム管理
      }
    } | {
      マスタ管理 > 勘定科目一覧 > <b>勘定科目登録
      --
      {
        科目コード <color:red>*
        "    "
        .
        科目名 <color:red>*
        "                              "
        .
        勘定科目種別 <color:red>*
        ^選択してください^
        .
        親科目
        ^選択してください^
        .
        .
        { [キャンセル] | [  保存  ] }
      }
    }
  }
}
@endsalt
```

**項目定義**:

| 項目 | 種別 | 必須 | バリデーション |
|------|------|------|---------------|
| 科目コード | テキスト（4桁） | ○ | 数字のみ、重複不可（新規時） |
| 科目名 | テキスト | ○ | 最大50文字 |
| 勘定科目種別 | セレクト | ○ | 資産/負債/純資産/収益/費用 |
| 親科目 | セレクト | - | 既存科目から選択 |

**アクション**:

| アクション | 処理 |
|-----------|------|
| キャンセル | 一覧画面へ戻る |
| 保存 | バリデーション→保存→一覧画面へ遷移 |

---

### SCR-JNL-001: 仕訳一覧

**目的**: 登録済みの仕訳を一覧表示し、検索する

**レイアウト**:

```plantuml
@startsalt
{
  {/ <b>財務会計システム | 田中太郎 ▼ | [ログアウト] }
  {#
    {
      {T
        + ダッシュボード
        + <b>仕訳管理
        ++ 仕訳一覧
        ++ 仕訳入力
        ++ 承認待ち
        + 元帳・残高
        + 財務諸表
        + マスタ管理
        + システム管理
      }
    } | {
      仕訳管理 > <b>仕訳一覧
      --
      {+
        {
          期間: "____/__/__" ~ "____/__/__"
          ステータス: ^全て^ | 科目: ^選択^
          摘要: "                    "
          { [検索] | [クリア] }
        }
      }
      .
      { . | . | . | [新規入力] }
      .
      {+
        {#
          番号 | 日付 | 摘要 | 金額 | ステータス
          J-0001 | 2024/01/15 | 売上計上 | 100,000 | 承認待ち
          J-0002 | 2024/01/15 | 仕入計上 | 50,000 | 下書き
          J-0003 | 2024/01/14 | 給与支払 | 300,000 | 確定
        }
      }
      .
      { [< 前へ] | 1 | 2 | 3 | ... | 10 | [次へ >] | 全 150 件 }
      .
      { . | . | [CSV] | [Excel] }
    }
  }
}
@endsalt
```

**検索条件**:

| 項目 | 種別 | 説明 |
|------|------|------|
| 期間 | 日付範囲 | 仕訳日付の範囲 |
| ステータス | セレクト | 全て/下書き/承認待ち/承認済み/確定 |
| 科目 | セレクト | 勘定科目で絞り込み |
| 摘要 | テキスト | 部分一致検索 |

**アクション**:

| アクション | 処理 |
|-----------|------|
| 検索 | 条件に合致する仕訳を表示 |
| クリア | 検索条件をリセット |
| 新規入力 | 仕訳入力画面へ遷移 |
| 行クリック | 仕訳詳細画面へ遷移 |
| CSV/Excel | 一覧をダウンロード |

---

### SCR-JNL-002: 仕訳入力/編集

**目的**: 仕訳を新規入力または編集する

**レイアウト**:

```plantuml
@startsalt
{
  {/ <b>財務会計システム | 田中太郎 ▼ | [ログアウト] }
  {#
    {
      {T
        + ダッシュボード
        + <b>仕訳管理
        ++ 仕訳一覧
        ++ 仕訳入力
        ++ 承認待ち
        + 元帳・残高
        + 財務諸表
        + マスタ管理
        + システム管理
      }
    } | {
      仕訳管理 > 仕訳一覧 > <b>仕訳入力
      --
      {
        { 仕訳日付 <color:red>* | 摘要 <color:red>* }
        { "____/__/__" | "                              " }
      }
      .
      {+
        { <b>明細 | . | . | . | [+ 行追加] }
        {#
          借方科目 | 借方金額 | 貸方科目 | 貸方金額 | .
          ^現金^ | "100,000" | ^売上高^ | "100,000" | [x]
          ^選択^ | "" | ^選択^ | "" | [x]
        }
      }
      .
      {
        借方合計: <b>¥100,000 | 貸方合計: <b>¥100,000
        差額: <b>¥0
      }
      .
      {<color:red>エラーメッセージ表示エリア}
      .
      { [キャンセル] | [下書き保存] | [承認申請] }
    }
  }
}
@endsalt
```

**項目定義**:

| 項目 | 種別 | 必須 | バリデーション |
|------|------|------|---------------|
| 仕訳日付 | 日付 | ○ | 有効な日付 |
| 摘要 | テキスト | ○ | 最大200文字 |
| 借方科目 | セレクト | ○ | 既存科目から選択 |
| 借方金額 | 数値 | ○ | 正の整数 |
| 貸方科目 | セレクト | ○ | 既存科目から選択 |
| 貸方金額 | 数値 | ○ | 正の整数 |

**バリデーション**:

- 借方合計 = 貸方合計であること（貸借一致）
- 最低1行の明細が必要

**アクション**:

| アクション | 処理 |
|-----------|------|
| 行追加 | 明細行を追加 |
| キャンセル | 一覧画面へ戻る |
| 下書き保存 | ステータス「下書き」で保存 |
| 承認申請 | ステータス「承認待ち」で保存 |

---

### SCR-JNL-003: 仕訳詳細

**目的**: 仕訳の詳細情報を表示する

**レイアウト**:

```plantuml
@startsalt
{
  {/ <b>財務会計システム | 田中太郎 ▼ | [ログアウト] }
  {#
    {
      {T
        + ダッシュボード
        + <b>仕訳管理
        ++ 仕訳一覧
        ++ 仕訳入力
        ++ 承認待ち
        + 元帳・残高
        + 財務諸表
        + マスタ管理
        + システム管理
      }
    } | {
      仕訳管理 > 仕訳一覧 > <b>仕訳詳細
      --
      { 仕訳番号: <b>J-0001 | . | ステータス: {^<b>承認待ち} }
      .
      {+
        <b>基本情報
        {#
          仕訳日付 | 2024/01/15
          摘要 | 売上計上
          作成者 | 田中太郎
          作成日時 | 2024/01/15 10:30:00
        }
      }
      .
      {+
        <b>明細
        {#
          借方科目 | 借方金額 | 貸方科目 | 貸方金額
          現金 | ¥100,000 | 売上高 | ¥100,000
        }
        --
        { 借方合計: <b>¥100,000 | 貸方合計: <b>¥100,000 }
      }
      .
      { [戻る] | [編集] | [削除] | [承認] | [差し戻し] }
    }
  }
}
@endsalt
```

**表示条件によるアクションの制御**:

| ステータス | 編集 | 削除 | 承認申請 | 承認 | 差し戻し | 確定 |
|-----------|------|------|---------|------|---------|------|
| 下書き | ○ | ○ | ○ | - | - | - |
| 承認待ち | - | - | - | ○ | ○ | - |
| 承認済み | - | - | - | - | - | ○ |
| 確定 | - | - | - | - | - | - |

---

### SCR-JNL-004: 承認待ち一覧

**目的**: 承認待ちの仕訳を一覧表示し、承認/差し戻しを行う

**レイアウト**:

```plantuml
@startsalt
{
  {/ <b>財務会計システム | 田中太郎 ▼ | [ログアウト] }
  {#
    {
      {T
        + ダッシュボード
        + <b>仕訳管理
        ++ 仕訳一覧
        ++ 仕訳入力
        ++ 承認待ち
        + 元帳・残高
        + 財務諸表
        + マスタ管理
        + システム管理
      }
    } | {
      仕訳管理 > <b>承認待ち一覧
      --
      承認待ち: <b>5 件
      .
      {+
        {#
          <&check> | 番号 | 日付 | 摘要 | 金額 | 作成者
          [] | J-0001 | 2024/01/15 | 売上計上 | 100,000 | 田中
          [] | J-0002 | 2024/01/15 | 仕入計上 | 50,000 | 鈴木
          [] | J-0003 | 2024/01/14 | 経費精算 | 30,000 | 佐藤
        }
      }
      .
      { [一括承認] | [一括差し戻し] }
    }
  }
}
@endsalt
```

**アクション**:

| アクション | 処理 |
|-----------|------|
| 行クリック | 仕訳詳細画面へ遷移 |
| 一括承認 | 選択した仕訳を一括承認 |
| 一括差し戻し | 差し戻し理由入力ダイアログ→一括差し戻し |

---

### SCR-LDG-001: 総勘定元帳

**目的**: 勘定科目ごとの取引履歴と残高を表示する

**レイアウト**:

```plantuml
@startsalt
{
  {/ <b>財務会計システム | 田中太郎 ▼ | [ログアウト] }
  {#
    {
      {T
        + ダッシュボード
        + 仕訳管理
        + <b>元帳・残高
        ++ 総勘定元帳
        ++ 補助元帳
        ++ 残高試算表
        + 財務諸表
        + マスタ管理
        + システム管理
      }
    } | {
      元帳・残高 > <b>総勘定元帳
      --
      {+
        {
          勘定科目: ^現金^
          期間: "____/__/__" ~ "____/__/__" | [照会]
        }
      }
      .
      { 科目: <b>1001 現金 | . | 前期繰越: <b>¥500,000 }
      .
      {+
        {#
          日付 | 仕訳番号 | 摘要 | 借方 | 貸方 | 残高
          2024/01/01 | - | 前期繰越 | - | - | 500,000
          2024/01/15 | J-0001 | 売上入金 | 100,000 | - | 600,000
          2024/01/16 | J-0005 | 仕入支払 | - | 50,000 | 550,000
        }
      }
      .
      { 借方合計: <b>¥100,000 | 貸方合計: <b>¥50,000 | 期末残高: <b>¥550,000 }
      .
      { . | . | [PDF] | [Excel] | [CSV] }
    }
  }
}
@endsalt
```

**アクション**:

| アクション | 処理 |
|-----------|------|
| 照会 | 指定条件で元帳を表示 |
| 仕訳番号クリック | 仕訳詳細画面へ遷移 |
| PDF/Excel/CSV | 元帳をダウンロード |

---

### SCR-LDG-002: 補助元帳

**目的**: 取引先別や部門別の明細を表示する

**レイアウト**:

```plantuml
@startsalt
{
  {/ <b>財務会計システム | 田中太郎 ▼ | [ログアウト] }
  {#
    {
      {T
        + ダッシュボード
        + 仕訳管理
        + <b>元帳・残高
        ++ 総勘定元帳
        ++ 補助元帳
        ++ 残高試算表
        + 財務諸表
        + マスタ管理
        + システム管理
      }
    } | {
      元帳・残高 > <b>補助元帳
      --
      {+
        {
          勘定科目: ^売掛金^
          補助科目: ^A社^
          期間: "____/__/__" ~ "____/__/__" | [照会]
        }
      }
      .
      { 科目: <b>売掛金 - A社 | . | 前期繰越: <b>¥200,000 }
      .
      {+
        {#
          日付 | 仕訳番号 | 摘要 | 借方 | 貸方 | 残高
          2024/01/01 | - | 前期繰越 | - | - | 200,000
          2024/01/10 | J-0010 | 売上 | 150,000 | - | 350,000
          2024/01/20 | J-0015 | 入金 | - | 100,000 | 250,000
        }
      }
      .
      { 借方合計: <b>¥150,000 | 貸方合計: <b>¥100,000 | 期末残高: <b>¥250,000 }
      .
      { . | . | [PDF] | [Excel] | [CSV] }
    }
  }
}
@endsalt
```

---

### SCR-LDG-003: 残高試算表

**目的**: 全勘定科目の残高と貸借一致を確認する

**レイアウト**:

```plantuml
@startsalt
{
  {/ <b>財務会計システム | 田中太郎 ▼ | [ログアウト] }
  {#
    {
      {T
        + ダッシュボード
        + 仕訳管理
        + <b>元帳・残高
        ++ 総勘定元帳
        ++ 補助元帳
        ++ 残高試算表
        + 財務諸表
        + マスタ管理
        + システム管理
      }
    } | {
      元帳・残高 > <b>残高試算表
      --
      {+
        { 基準日: "____/__/__" | [表示] }
      }
      .
      { 基準日: <b>2024/01/31 | . | 貸借一致: <color:green><b>✓ }
      .
      {+
        {#
          科目コード | 科目名 | 借方残高 | 貸方残高
          . | <b>[資産] | . | .
          1001 | 現金 | 550,000 | -
          1002 | 普通預金 | 1,200,000 | -
          . | <b>資産計 | <b>1,750,000 | .
          . | <b>[負債] | . | .
          2001 | 買掛金 | - | 500,000
          . | <b>負債計 | . | <b>500,000
          . | <b>[純資産] | . | .
          3001 | 資本金 | - | 1,000,000
          3002 | 利益剰余金 | - | 250,000
          . | <b>純資産計 | . | <b>1,250,000
          . | <b>合計 | <b>1,750,000 | <b>1,750,000
        }
      }
      .
      { . | . | [PDF] | [Excel] | [CSV] }
    }
  }
}
@endsalt
```

---

### SCR-FS-001: 貸借対照表

**目的**: 企業の財政状態を表示する

**レイアウト**:

```plantuml
@startsalt
{
  {/ <b>財務会計システム | 田中太郎 ▼ | [ログアウト] }
  {#
    {
      {T
        + ダッシュボード
        + 仕訳管理
        + 元帳・残高
        + <b>財務諸表
        ++ 貸借対照表
        ++ 損益計算書
        ++ 財務分析
        + マスタ管理
        + システム管理
      }
    } | {
      財務諸表 > <b>貸借対照表
      --
      {+
        { 基準日: "____/__/__" | [] 前期比較 | [表示] }
      }
      .
      {^<b>貸借対照表
        <b>2024年1月31日現在
      }
      .
      {+
        {#
          <b>資産の部 | 金額 | <b>負債の部 | 金額
          <b>流動資産 | . | <b>流動負債 | .
          　現金 | 550,000 | 　買掛金 | 500,000
          　普通預金 | 1,200,000 | <b>流動負債計 | <b>500,000
          <b>流動資産計 | <b>1,750,000 | . | .
          . | . | <b>純資産の部 | .
          . | . | 　資本金 | 1,000,000
          . | . | 　利益剰余金 | 250,000
          . | . | <b>純資産計 | <b>1,250,000
          <b>資産合計 | <b>1,750,000 | <b>負債純資産計 | <b>1,750,000
        }
      }
      .
      { . | . | [PDF] | [Excel] }
    }
  }
}
@endsalt
```

---

### SCR-FS-002: 損益計算書

**目的**: 企業の経営成績を表示する

**レイアウト**:

```plantuml
@startsalt
{
  {/ <b>財務会計システム | 田中太郎 ▼ | [ログアウト] }
  {#
    {
      {T
        + ダッシュボード
        + 仕訳管理
        + 元帳・残高
        + <b>財務諸表
        ++ 貸借対照表
        ++ 損益計算書
        ++ 財務分析
        + マスタ管理
        + システム管理
      }
    } | {
      財務諸表 > <b>損益計算書
      --
      {+
        { 期間: "____/__/__" ~ "____/__/__" | [] 前期比較 | [表示] }
      }
      .
      {^<b>損益計算書
        <b>2024年1月1日〜2024年1月31日
      }
      .
      {+
        {#
          勘定科目 | 金額
          売上高 | 1,000,000
          売上原価 | 600,000
          <b>売上総利益 | <b>400,000
          . | .
          販売費及び一般管理費 | 150,000
          <b>営業利益 | <b>250,000
          . | .
          営業外収益 | 5,000
          営業外費用 | 3,000
          <b>経常利益 | <b>252,000
          . | .
          <b>当期純利益 | <b>252,000
        }
      }
      .
      { . | . | [PDF] | [Excel] }
    }
  }
}
@endsalt
```

---

### SCR-FS-003: 財務分析

**目的**: 財務指標を表示し、経営判断を支援する

**レイアウト**:

```plantuml
@startsalt
{
  {/ <b>財務会計システム | 田中太郎 ▼ | [ログアウト] }
  {#
    {
      {T
        + ダッシュボード
        + 仕訳管理
        + 元帳・残高
        + <b>財務諸表
        ++ 貸借対照表
        ++ 損益計算書
        ++ 財務分析
        + マスタ管理
        + システム管理
      }
    } | {
      財務諸表 > <b>財務分析
      --
      {+
        { 期間: "____/__/__" ~ "____/__/__" | [表示] }
      }
      .
      {
        {^収益性指標
          {#
            指標 | 値 | 前期
            ROE | 20.2% | 18.5%
            ROA | 14.4% | 13.2%
            売上高利益率 | 25.2% | 23.0%
          }
        } | {^安全性指標
          {#
            指標 | 値 | 前期
            流動比率 | 350.0% | 320.0%
            自己資本比率 | 71.4% | 68.5%
            固定比率 | 0.0% | 0.0%
          }
        }
      }
      .
      {+
        <b>指標推移グラフ
        {SI
          グラフ表示エリア
        }
      }
    }
  }
}
@endsalt
```

---

### SCR-USR-001: ユーザー一覧

**目的**: 登録済みユーザーを一覧表示する

**レイアウト**:

```plantuml
@startsalt
{
  {/ <b>財務会計システム | admin ▼ | [ログアウト] }
  {#
    {
      {T
        + ダッシュボード
        + 仕訳管理
        + 元帳・残高
        + 財務諸表
        + マスタ管理
        + <b>システム管理
        ++ ユーザー
        ++ 監査ログ
      }
    } | {
      システム管理 > <b>ユーザー一覧
      --
      {
        検索: "          " | ^ロール^ | [新規登録]
      }
      .
      {+
        {#
          ユーザーID | 氏名 | ロール | 最終ログイン | 操作
          admin | 管理者 | 管理者 | 2024/01/15 | [編集]
          tanaka | 田中太郎 | 経理責任者 | 2024/01/15 | [編集]
          suzuki | 鈴木花子 | 経理担当者 | 2024/01/14 | [編集]
          yamada | 山田次郎 | 閲覧者 | 2024/01/10 | [編集]
        }
      }
      .
      { [< 前へ] | 1 | 2 | ... | [次へ >] | 全 15 件 }
    }
  }
}
@endsalt
```

---

### SCR-USR-002: ユーザー登録/編集

**目的**: ユーザーを新規登録または編集する

**レイアウト**:

```plantuml
@startsalt
{
  {/ <b>財務会計システム | admin ▼ | [ログアウト] }
  {#
    {
      {T
        + ダッシュボード
        + 仕訳管理
        + 元帳・残高
        + 財務諸表
        + マスタ管理
        + <b>システム管理
        ++ ユーザー
        ++ 監査ログ
      }
    } | {
      システム管理 > ユーザー一覧 > <b>ユーザー登録
      --
      {
        ユーザーID <color:red>*
        "          "
        .
        氏名 <color:red>*
        "                    "
        .
        パスワード <color:red>*
        "                    "
        .
        ロール <color:red>*
        ^選択してください^
        .
        .
        { [キャンセル] | [  保存  ] }
      }
    }
  }
}
@endsalt
```

---

### SCR-SYS-001: 監査ログ

**目的**: システムの操作履歴を照会する

**レイアウト**:

```plantuml
@startsalt
{
  {/ <b>財務会計システム | admin ▼ | [ログアウト] }
  {#
    {
      {T
        + ダッシュボード
        + 仕訳管理
        + 元帳・残高
        + 財務諸表
        + マスタ管理
        + <b>システム管理
        ++ ユーザー
        ++ 監査ログ
      }
    } | {
      システム管理 > <b>監査ログ
      --
      {+
        {
          期間: "____/__/__" ~ "____/__/__"
          ユーザー: ^選択^ | 操作種別: ^選択^ | [検索]
        }
      }
      .
      {+
        {#
          日時 | ユーザー | 操作 | 対象
          2024/01/15 10:30:00 | tanaka | 作成 | 仕訳 J-0001
          2024/01/15 10:25:00 | admin | ログイン | -
          2024/01/15 09:00:00 | suzuki | 更新 | 仕訳 J-0002
          2024/01/14 18:00:00 | tanaka | ログアウト | -
        }
      }
      .
      { [< 前へ] | 1 | 2 | 3 | ... | 50 | [次へ >] | 全 500 件 }
      .
      { . | . | . | [CSV] }
    }
  }
}
@endsalt
```

---

## 共通コンポーネント

### ヘッダー

```plantuml
@startsalt
{
  {/ <b>財務会計システム | . | . | . | ユーザー名 ▼ | [ログアウト] }
}
@endsalt
```

### サイドナビゲーション

```plantuml
@startsalt
{
  {T
    + ダッシュボード
    + 仕訳管理
    ++ 仕訳一覧
    ++ 仕訳入力
    ++ 承認待ち
    + 元帳・残高
    ++ 総勘定元帳
    ++ 補助元帳
    ++ 残高試算表
    + 財務諸表
    ++ 貸借対照表
    ++ 損益計算書
    ++ 財務分析
    + マスタ管理
    ++ 勘定科目
    + システム管理
    ++ ユーザー
    ++ 監査ログ
  }
}
@endsalt
```

### 確認ダイアログ

```plantuml
@startsalt
{+
  <b>確認
  --
  .
  本当に削除しますか？
  .
  { [キャンセル] | [  OK  ] }
}
@endsalt
```

### エラー表示

```plantuml
@startsalt
{
  {<color:red>⚠ エラーメッセージ}
}
@endsalt
```

### 成功通知

```plantuml
@startsalt
{
  {<color:green>✓ 処理が完了しました}
}
@endsalt
```

### ページネーション

```plantuml
@startsalt
{
  { [< 前へ] | [1] | [2] | [3] | ... | [10] | [次へ >] | 表示件数: ^10^ | 全 100 件 }
}
@endsalt
```

### 日付入力

```plantuml
@startsalt
{
  "____/__/__"
}
@endsalt
```

---

## 画面遷移図

```plantuml
@startuml
title 画面遷移図

[*] --> ログイン

ログイン --> ダッシュボード : ログイン成功

ダッシュボード --> 仕訳一覧
ダッシュボード --> 総勘定元帳
ダッシュボード --> 貸借対照表

仕訳一覧 --> 仕訳入力 : 新規入力
仕訳一覧 --> 仕訳詳細 : 行クリック
仕訳詳細 --> 仕訳編集 : 編集
仕訳詳細 --> 仕訳一覧 : 戻る
仕訳入力 --> 仕訳一覧 : 保存/キャンセル
仕訳編集 --> 仕訳詳細 : 保存/キャンセル

承認待ち一覧 --> 仕訳詳細 : 行クリック

勘定科目一覧 --> 勘定科目登録 : 新規登録
勘定科目一覧 --> 勘定科目編集 : 編集
勘定科目登録 --> 勘定科目一覧 : 保存/キャンセル
勘定科目編集 --> 勘定科目一覧 : 保存/キャンセル

総勘定元帳 --> 仕訳詳細 : 仕訳番号クリック

ユーザー一覧 --> ユーザー登録 : 新規登録
ユーザー一覧 --> ユーザー編集 : 編集
ユーザー登録 --> ユーザー一覧 : 保存/キャンセル
ユーザー編集 --> ユーザー一覧 : 保存/キャンセル

ダッシュボード --> [*] : ログアウト

@enduml
```

---

## ロール別アクセス権限

| 画面 | 管理者 | 経理責任者 | 経理担当者 | 閲覧者 |
|------|--------|-----------|-----------|--------|
| ダッシュボード | ○ | ○ | ○ | ○ |
| 勘定科目一覧 | ○ | ○ | ○ | ○ |
| 勘定科目登録/編集 | ○ | ○ | - | - |
| 仕訳一覧 | ○ | ○ | ○ | ○ |
| 仕訳入力/編集 | ○ | ○ | ○ | - |
| 仕訳承認 | ○ | ○ | - | - |
| 仕訳確定 | ○ | ○ | - | - |
| 総勘定元帳 | ○ | ○ | ○ | ○ |
| 補助元帳 | ○ | ○ | ○ | ○ |
| 残高試算表 | ○ | ○ | ○ | ○ |
| 貸借対照表 | ○ | ○ | ○ | ○ |
| 損益計算書 | ○ | ○ | ○ | ○ |
| 財務分析 | ○ | ○ | - | - |
| ユーザー管理 | ○ | - | - | - |
| 監査ログ | ○ | - | - | - |

---

## レスポンシブ対応

### ブレークポイント

| 名称 | 幅 | 説明 |
|------|-----|------|
| Desktop | 1200px 以上 | フルレイアウト |
| Tablet | 768px - 1199px | サイドナビ折りたたみ |
| Mobile | 767px 以下 | ハンバーガーメニュー |

### モバイル対応方針

- サイドナビゲーションはハンバーガーメニューに変換
- テーブルは横スクロール対応
- フォーム項目は縦並びに変更
- 数値入力時は数字キーボードを表示

---

## トレーサビリティマトリクス

| 画面 ID | 画面名 | ユースケース | ユーザーストーリー |
|---------|--------|-------------|------------------|
| SCR-AUTH-001 | ログイン | UC-AUTH-001 | US-AUTH-001 |
| SCR-DASH-001 | ダッシュボード | - | - |
| SCR-MST-001 | 勘定科目一覧 | UC-MST-004 | US-MST-004 |
| SCR-MST-002 | 勘定科目登録/編集 | UC-MST-001, UC-MST-002 | US-MST-001, US-MST-002 |
| SCR-JNL-001 | 仕訳一覧 | UC-JNL-004, UC-JNL-005 | US-JNL-004, US-JNL-005 |
| SCR-JNL-002 | 仕訳入力/編集 | UC-JNL-001, UC-JNL-002 | US-JNL-001, US-JNL-002 |
| SCR-JNL-003 | 仕訳詳細 | UC-JNL-004 | US-JNL-004 |
| SCR-JNL-004 | 承認待ち一覧 | UC-JNL-008, UC-JNL-009 | US-JNL-008, US-JNL-009 |
| SCR-LDG-001 | 総勘定元帳 | UC-LDG-001 | US-LDG-001 |
| SCR-LDG-002 | 補助元帳 | UC-LDG-002 | US-LDG-002 |
| SCR-LDG-003 | 残高試算表 | UC-LDG-005 | US-LDG-005 |
| SCR-FS-001 | 貸借対照表 | UC-FS-001 | US-FS-001 |
| SCR-FS-002 | 損益計算書 | UC-FS-002 | US-FS-002 |
| SCR-FS-003 | 財務分析 | UC-FS-003 | US-FS-003 |
| SCR-USR-001 | ユーザー一覧 | UC-AUTH-003 | US-AUTH-006 |
| SCR-USR-002 | ユーザー登録/編集 | UC-AUTH-003 | US-AUTH-003, US-AUTH-004 |
| SCR-SYS-001 | 監査ログ | UC-SYS-001 | US-SYS-001 |
