# システムユースケース - 財務会計システム

## 概要

本ドキュメントは、財務会計システムのシステムユースケースを定義します。
システムユースケースは、ソフトウェアシステムの境界内での機能を表現します。

---

## 認証・ユーザー管理

### UC-AUTH-001: 🖥️システムにログインする🌊

**使用時のコンテキスト**: ユーザーがシステムを利用開始する際に認証を行う

**スコープ**: 財務会計システム

**レベル**: ユーザー目的

**主アクター**: システム利用者

**利害関係者と利益**:
- システム利用者: 自分の権限に応じた機能を利用したい
- システム管理者: 不正アクセスを防止したい

**事前条件**:
- ユーザーアカウントが登録されている
- ユーザーがログイン画面を表示している

**最低保証**: ログイン試行が監査ログに記録される

**成功時保証**: ユーザーが認証され、JWT トークンが発行される

**トリガー**: ユーザーがログインボタンをクリックした

**主成功シナリオ**:
1. ユーザーがユーザーIDを入力する
2. ユーザーがパスワードを入力する
3. ユーザーがログインボタンをクリックする
4. システムが認証情報を検証する
5. システムが JWT トークンを発行する
6. システムがダッシュボード画面を表示する

**拡張**:
- 4a. 認証情報が不正な場合:
    - 4a1. システムがエラーメッセージを表示する
    - 4a2. システムがログイン失敗回数を記録する
- 4b. アカウントがロックされている場合:
    - 4b1. システムがアカウントロック中のメッセージを表示する
- 4c. 3回連続でログイン失敗した場合:
    - 4c1. システムがアカウントをロックする
    - 4c2. システムがロック通知を表示する

**技術およびデータのバリエーションリスト**:
- 5: JWT トークンの有効期限は24時間

---

### UC-AUTH-002: 🖥️システムからログアウトする🌊

**使用時のコンテキスト**: ユーザーがシステムの利用を終了する

**スコープ**: 財務会計システム

**レベル**: ユーザー目的

**主アクター**: ログイン済みユーザー

**利害関係者と利益**:
- ユーザー: セキュリティを確保したい

**事前条件**:
- ユーザーがログイン済みである

**最低保証**: ログアウト操作が監査ログに記録される

**成功時保証**: ユーザーがログアウトし、トークンが無効化される

**トリガー**: ユーザーがログアウトボタンをクリックした

**主成功シナリオ**:
1. ユーザーがログアウトボタンをクリックする
2. システムが JWT トークンを無効化する
3. システムがログイン画面を表示する

---

### UC-AUTH-003: 🖥️ユーザーを登録する🌊

**使用時のコンテキスト**: システム管理者が新しいユーザーをシステムに登録する

**スコープ**: 財務会計システム

**レベル**: ユーザー目的

**主アクター**: システム管理者

**利害関係者と利益**:
- システム管理者: 新しいユーザーにシステム利用権限を付与したい
- 新規ユーザー: システムを利用できるようになりたい

**事前条件**:
- 管理者権限でログインしている
- ユーザー管理画面を表示している

**最低保証**: 登録操作が監査ログに記録される

**成功時保証**: 新しいユーザーが登録され、ログイン可能になる

**トリガー**: 管理者が新規登録ボタンをクリックした

**主成功シナリオ**:
1. 管理者がユーザーIDを入力する
2. 管理者が氏名を入力する
3. 管理者がパスワードを入力する
4. 管理者がロールを選択する
5. 管理者が登録ボタンをクリックする
6. システムが入力値を検証する
7. システムがユーザーを登録する
8. システムが登録完了メッセージを表示する

**拡張**:
- 6a. ユーザーIDが既に存在する場合:
    - 6a1. システムがエラーメッセージを表示する
- 6b. パスワードが要件を満たさない場合:
    - 6b1. システムがエラーメッセージを表示する

**技術およびデータのバリエーションリスト**:
- 3: パスワードは8文字以上、英数字を含む必要がある
- 4: ロールは ADMIN, MANAGER, ACCOUNTANT, VIEWER から選択

---

## マスタ管理

### UC-MST-001: 🖥️勘定科目を登録する🌊

**使用時のコンテキスト**: 経理責任者が新しい勘定科目をマスタに登録する

**スコープ**: 財務会計システム

**レベル**: ユーザー目的

**主アクター**: 経理責任者

**利害関係者と利益**:
- 経理責任者: 新しい取引に対応する科目を追加したい
- 経理担当者: 適切な科目で仕訳を入力したい

**事前条件**:
- マスタ管理権限でログインしている
- 勘定科目管理画面を表示している

**最低保証**: 登録操作が監査ログに記録される

**成功時保証**: 新しい勘定科目が登録され、仕訳入力で使用可能になる

**トリガー**: 経理責任者が新規登録ボタンをクリックした

**主成功シナリオ**:
1. 経理責任者が科目コードを入力する
2. 経理責任者が科目名を入力する
3. 経理責任者が勘定科目種別を選択する
4. 経理責任者が登録ボタンをクリックする
5. システムが入力値を検証する
6. システムが勘定科目を登録する
7. システムが登録完了メッセージを表示する

**拡張**:
- 5a. 科目コードが既に存在する場合:
    - 5a1. システムがエラーメッセージを表示する
- 5b. 必須項目が未入力の場合:
    - 5b1. システムがエラーメッセージを表示する

**技術およびデータのバリエーションリスト**:
- 3: 勘定科目種別は ASSET, LIABILITY, EQUITY, REVENUE, EXPENSE から選択

---

### UC-MST-002: 🖥️勘定科目を編集する🌊

**使用時のコンテキスト**: 経理責任者が既存の勘定科目情報を変更する

**スコープ**: 財務会計システム

**レベル**: ユーザー目的

**主アクター**: 経理責任者

**事前条件**:
- マスタ管理権限でログインしている
- 編集対象の勘定科目が存在する

**最低保証**: 編集操作が監査ログに記録される

**成功時保証**: 勘定科目情報が更新される

**トリガー**: 経理責任者が編集ボタンをクリックした

**主成功シナリオ**:
1. 経理責任者が編集対象の勘定科目を選択する
2. システムが勘定科目の詳細を表示する
3. 経理責任者が科目名を編集する
4. 経理責任者が保存ボタンをクリックする
5. システムが入力値を検証する
6. システムが勘定科目を更新する
7. システムが更新完了メッセージを表示する

**拡張**:
- 5a. 仕訳で使用中の科目の種別を変更しようとした場合:
    - 5a1. システムがエラーメッセージを表示する

---

### UC-MST-003: 🖥️勘定科目を削除する🌊

**使用時のコンテキスト**: 経理責任者が不要な勘定科目を削除する

**スコープ**: 財務会計システム

**レベル**: ユーザー目的

**主アクター**: 経理責任者

**事前条件**:
- マスタ管理権限でログインしている
- 削除対象の勘定科目が存在する

**最低保証**: 削除操作が監査ログに記録される

**成功時保証**: 勘定科目が削除される

**トリガー**: 経理責任者が削除ボタンをクリックした

**主成功シナリオ**:
1. 経理責任者が削除対象の勘定科目を選択する
2. 経理責任者が削除ボタンをクリックする
3. システムが確認ダイアログを表示する
4. 経理責任者が確認ボタンをクリックする
5. システムが使用状況を検証する
6. システムが勘定科目を削除する
7. システムが削除完了メッセージを表示する

**拡張**:
- 5a. 仕訳で使用中の場合:
    - 5a1. システムがエラーメッセージを表示する
    - 5a2. 削除処理を中止する

---

### UC-MST-004: 🖥️勘定科目一覧を表示する🌊

**使用時のコンテキスト**: ユーザーが勘定科目の一覧を確認する

**スコープ**: 財務会計システム

**レベル**: ユーザー目的

**主アクター**: 経理担当者

**事前条件**:
- システムにログインしている

**最低保証**: なし

**成功時保証**: 勘定科目一覧が表示される

**トリガー**: ユーザーが勘定科目メニューをクリックした

**主成功シナリオ**:
1. ユーザーが勘定科目メニューをクリックする
2. システムが勘定科目一覧を取得する
3. システムが勘定科目一覧を表示する

**拡張**:
- 3a. フィルタリングする場合:
    - 3a1. ユーザーが勘定科目種別を選択する
    - 3a2. システムが絞り込んだ一覧を表示する
- 3b. 検索する場合:
    - 3b1. ユーザーが検索キーワードを入力する
    - 3b2. システムが検索結果を表示する

---

## 仕訳管理

### UC-JNL-001: 🖥️仕訳を入力する🌊

**使用時のコンテキスト**: 経理担当者が取引を仕訳として記録する

**スコープ**: 財務会計システム

**レベル**: ユーザー目的

**主アクター**: 経理担当者

**利害関係者と利益**:
- 経理担当者: 取引を正確に記録したい
- 経理責任者: 正確な仕訳データを確認したい
- 監査法人: 取引の証跡を確認したい

**事前条件**:
- 仕訳入力権限でログインしている
- 必要な勘定科目がマスタに登録されている

**最低保証**: 入力操作が監査ログに記録される

**成功時保証**: 仕訳が「下書き」ステータスで保存される

**トリガー**: 経理担当者が仕訳入力画面を開いた

**主成功シナリオ**:
1. 経理担当者が仕訳日付を入力する
2. 経理担当者が摘要を入力する
3. 経理担当者が借方科目を選択する
4. 経理担当者が借方金額を入力する
5. 経理担当者が貸方科目を選択する
6. 経理担当者が貸方金額を入力する
7. 経理担当者が保存ボタンをクリックする
8. システムが貸借一致を検証する
9. システムが仕訳を保存する
10. システムが保存完了メッセージを表示する

**拡張**:
- 6a. 明細行を追加する場合:
    - 6a1. 経理担当者が行追加ボタンをクリックする
    - 6a2. 経理担当者が追加行の科目と金額を入力する
- 8a. 貸借が一致しない場合:
    - 8a1. システムがエラーメッセージを表示する
    - 8a2. 経理担当者が金額を修正する（ステップ4または6へ）
- 8b. 存在しない勘定科目の場合:
    - 8b1. システムがエラーメッセージを表示する

**技術およびデータのバリエーションリスト**:
- 4, 6: 金額は整数、3桁カンマ区切りで表示

---

### UC-JNL-002: 🖥️仕訳を編集する🌊

**使用時のコンテキスト**: 経理担当者が入力済みの仕訳を修正する

**スコープ**: 財務会計システム

**レベル**: ユーザー目的

**主アクター**: 経理担当者

**事前条件**:
- 仕訳入力権限でログインしている
- 編集対象の仕訳が「下書き」ステータスである

**最低保証**: 編集操作が監査ログに記録される

**成功時保証**: 仕訳が更新される

**トリガー**: 経理担当者が仕訳詳細画面で編集ボタンをクリックした

**主成功シナリオ**:
1. 経理担当者が編集対象の仕訳を選択する
2. システムが仕訳詳細を表示する
3. 経理担当者が内容を編集する
4. 経理担当者が保存ボタンをクリックする
5. システムが貸借一致を検証する
6. システムが仕訳を更新する
7. システムが更新完了メッセージを表示する

**拡張**:
- 1a. ステータスが「下書き」以外の場合:
    - 1a1. システムが編集不可のメッセージを表示する

---

### UC-JNL-003: 🖥️仕訳を削除する🌊

**使用時のコンテキスト**: 経理担当者が誤って入力した仕訳を削除する

**スコープ**: 財務会計システム

**レベル**: ユーザー目的

**主アクター**: 経理担当者

**事前条件**:
- 仕訳入力権限でログインしている
- 削除対象の仕訳が「下書き」ステータスである

**最低保証**: 削除操作が監査ログに記録される

**成功時保証**: 仕訳が削除される

**トリガー**: 経理担当者が削除ボタンをクリックした

**主成功シナリオ**:
1. 経理担当者が削除対象の仕訳を選択する
2. 経理担当者が削除ボタンをクリックする
3. システムが確認ダイアログを表示する
4. 経理担当者が確認ボタンをクリックする
5. システムがステータスを検証する
6. システムが仕訳を削除する
7. システムが削除完了メッセージを表示する

**拡張**:
- 5a. ステータスが「下書き」以外の場合:
    - 5a1. システムがエラーメッセージを表示する
    - 5a2. 削除処理を中止する

---

### UC-JNL-004: 🖥️仕訳一覧を表示する🌊

**使用時のコンテキスト**: ユーザーが仕訳の一覧を確認する

**スコープ**: 財務会計システム

**レベル**: ユーザー目的

**主アクター**: 経理担当者

**事前条件**:
- システムにログインしている

**最低保証**: なし

**成功時保証**: 仕訳一覧が表示される

**トリガー**: ユーザーが仕訳一覧メニューをクリックした

**主成功シナリオ**:
1. ユーザーが仕訳一覧メニューをクリックする
2. システムが仕訳一覧を取得する
3. システムが仕訳一覧を表示する

**拡張**:
- 3a. ステータスでフィルタリングする場合:
    - 3a1. ユーザーがステータスを選択する
    - 3a2. システムが絞り込んだ一覧を表示する
- 3b. 日付範囲で絞り込む場合:
    - 3b1. ユーザーが開始日と終了日を入力する
    - 3b2. システムが絞り込んだ一覧を表示する

---

### UC-JNL-005: 🖥️仕訳を検索する🌊

**使用時のコンテキスト**: ユーザーが条件を指定して仕訳を検索する

**スコープ**: 財務会計システム

**レベル**: ユーザー目的

**主アクター**: 経理担当者

**事前条件**:
- システムにログインしている

**最低保証**: なし

**成功時保証**: 検索条件に合致する仕訳が表示される

**トリガー**: ユーザーが検索ボタンをクリックした

**主成功シナリオ**:
1. ユーザーが検索条件を入力する
2. ユーザーが検索ボタンをクリックする
3. システムが検索を実行する
4. システムが検索結果を表示する

**技術およびデータのバリエーションリスト**:
- 1: 検索条件は仕訳日付、勘定科目、金額範囲、摘要、ステータス

---

### UC-JNL-006: 🖥️自動仕訳を生成する🌊

**使用時のコンテキスト**: 経理担当者が定型取引の仕訳を自動生成する

**スコープ**: 財務会計システム

**レベル**: ユーザー目的

**主アクター**: 経理担当者

**事前条件**:
- 仕訳入力権限でログインしている
- 自動仕訳設定が登録されている

**最低保証**: 生成操作が監査ログに記録される

**成功時保証**: 自動仕訳設定に基づいて仕訳が生成される

**トリガー**: 経理担当者が自動仕訳生成ボタンをクリックした

**主成功シナリオ**:
1. 経理担当者が自動仕訳設定を選択する
2. システムが設定内容を表示する
3. 経理担当者が仕訳日付を入力する
4. 経理担当者が金額を入力（または確認）する
5. 経理担当者が生成ボタンをクリックする
6. システムが仕訳を生成する
7. システムが生成完了メッセージを表示する

**拡張**:
- 4a. デフォルト金額を変更する場合:
    - 4a1. 経理担当者が金額を修正する

---

### UC-JNL-007: 🖥️仕訳の承認を申請する🌊

**使用時のコンテキスト**: 経理担当者が入力した仕訳の承認を申請する

**スコープ**: 財務会計システム

**レベル**: ユーザー目的

**主アクター**: 経理担当者

**事前条件**:
- 仕訳入力権限でログインしている
- 対象の仕訳が「下書き」ステータスである

**最低保証**: 申請操作が監査ログに記録される

**成功時保証**: 仕訳のステータスが「承認待ち」に変更される

**トリガー**: 経理担当者が承認申請ボタンをクリックした

**主成功シナリオ**:
1. 経理担当者が対象の仕訳を選択する
2. 経理担当者が承認申請ボタンをクリックする
3. システムがステータスを検証する
4. システムがステータスを「承認待ち」に更新する
5. システムが申請完了メッセージを表示する

**拡張**:
- 3a. ステータスが「下書き」以外の場合:
    - 3a1. システムがエラーメッセージを表示する

---

### UC-JNL-008: 🖥️仕訳を承認する🌊

**使用時のコンテキスト**: 経理責任者が承認待ちの仕訳を承認する

**スコープ**: 財務会計システム

**レベル**: ユーザー目的

**主アクター**: 経理責任者

**事前条件**:
- 承認権限でログインしている
- 対象の仕訳が「承認待ち」ステータスである

**最低保証**: 承認操作が監査ログに記録される

**成功時保証**: 仕訳のステータスが「承認済み」に変更される

**トリガー**: 経理責任者が承認ボタンをクリックした

**主成功シナリオ**:
1. 経理責任者が承認待ち一覧を表示する
2. 経理責任者が対象の仕訳内容を確認する
3. 経理責任者が承認ボタンをクリックする
4. システムがステータスを「承認済み」に更新する
5. システムが承認者と承認日時を記録する
6. システムが承認完了メッセージを表示する

---

### UC-JNL-009: 🖥️仕訳を差し戻す🌊

**使用時のコンテキスト**: 経理責任者が問題のある仕訳を差し戻す

**スコープ**: 財務会計システム

**レベル**: ユーザー目的

**主アクター**: 経理責任者

**事前条件**:
- 承認権限でログインしている
- 対象の仕訳が「承認待ち」ステータスである

**最低保証**: 差し戻し操作が監査ログに記録される

**成功時保証**: 仕訳のステータスが「下書き」に戻る

**トリガー**: 経理責任者が差し戻しボタンをクリックした

**主成功シナリオ**:
1. 経理責任者が承認待ち一覧を表示する
2. 経理責任者が対象の仕訳内容を確認する
3. 経理責任者が差し戻し理由を入力する
4. 経理責任者が差し戻しボタンをクリックする
5. システムがステータスを「下書き」に更新する
6. システムが差し戻し理由を記録する
7. システムが差し戻し完了メッセージを表示する

---

### UC-JNL-010: 🖥️仕訳を確定する🌊

**使用時のコンテキスト**: 経理責任者が承認済みの仕訳を確定し、元帳に転記する

**スコープ**: 財務会計システム

**レベル**: ユーザー目的

**主アクター**: 経理責任者

**事前条件**:
- 確定権限でログインしている
- 対象の仕訳が「承認済み」ステータスである

**最低保証**: 確定操作が監査ログに記録される

**成功時保証**: 仕訳が確定され、元帳に転記される

**トリガー**: 経理責任者が確定ボタンをクリックした

**主成功シナリオ**:
1. 経理責任者が承認済み一覧を表示する
2. 経理責任者が対象の仕訳を選択する
3. 経理責任者が確定ボタンをクリックする
4. システムがステータスを「確定」に更新する
5. システムが元帳に転記する
6. システムが残高を更新する
7. システムが確定完了メッセージを表示する

---

## 元帳・残高管理

### UC-LDG-001: 🖥️総勘定元帳を照会する🌊

**使用時のコンテキスト**: ユーザーが勘定科目ごとの取引履歴と残高を確認する

**スコープ**: 財務会計システム

**レベル**: ユーザー目的

**主アクター**: 経理担当者

**事前条件**:
- システムにログインしている

**最低保証**: なし

**成功時保証**: 指定した勘定科目の元帳が表示される

**トリガー**: ユーザーが総勘定元帳メニューをクリックした

**主成功シナリオ**:
1. ユーザーが勘定科目を選択する
2. ユーザーが表示期間を指定する
3. ユーザーが照会ボタンをクリックする
4. システムが元帳データを取得する
5. システムが元帳を表示する

**拡張**:
- 5a. 仕訳詳細を確認する場合:
    - 5a1. ユーザーが明細行をクリックする
    - 5a2. システムが仕訳詳細画面を表示する

---

### UC-LDG-002: 🖥️補助元帳を照会する🌊

**使用時のコンテキスト**: ユーザーが取引先別や部門別の明細を確認する

**スコープ**: 財務会計システム

**レベル**: ユーザー目的

**主アクター**: 経理担当者

**事前条件**:
- システムにログインしている
- 補助科目が設定されている

**最低保証**: なし

**成功時保証**: 指定した補助科目の元帳が表示される

**トリガー**: ユーザーが補助元帳メニューをクリックした

**主成功シナリオ**:
1. ユーザーが勘定科目を選択する
2. ユーザーが補助科目を選択する
3. ユーザーが表示期間を指定する
4. ユーザーが照会ボタンをクリックする
5. システムが補助元帳データを取得する
6. システムが補助元帳を表示する

---

### UC-LDG-003: 🖥️日次残高を照会する🌊

**使用時のコンテキスト**: ユーザーが日次の残高推移を確認する

**スコープ**: 財務会計システム

**レベル**: ユーザー目的

**主アクター**: 経理担当者

**事前条件**:
- システムにログインしている

**最低保証**: なし

**成功時保証**: 指定した勘定科目の日次残高が表示される

**トリガー**: ユーザーが日次残高メニューをクリックした

**主成功シナリオ**:
1. ユーザーが勘定科目を選択する
2. ユーザーが表示期間を指定する
3. ユーザーが照会ボタンをクリックする
4. システムが日次残高データを取得する
5. システムが日次残高一覧を表示する

**拡張**:
- 5a. グラフ表示する場合:
    - 5a1. ユーザーがグラフ表示ボタンをクリックする
    - 5a2. システムが残高推移グラフを表示する

---

### UC-LDG-004: 🖥️月次残高を照会する🌊

**使用時のコンテキスト**: ユーザーが月次の残高推移を確認する

**スコープ**: 財務会計システム

**レベル**: ユーザー目的

**主アクター**: 経理責任者

**事前条件**:
- システムにログインしている

**最低保証**: なし

**成功時保証**: 指定した勘定科目の月次残高が表示される

**トリガー**: ユーザーが月次残高メニューをクリックした

**主成功シナリオ**:
1. ユーザーが勘定科目を選択する
2. ユーザーが会計年度を指定する
3. ユーザーが照会ボタンをクリックする
4. システムが月次残高データを取得する
5. システムが月次残高一覧を表示する

---

### UC-LDG-005: 🖥️残高試算表を表示する🌊

**使用時のコンテキスト**: 経理責任者が全勘定科目の残高と貸借一致を確認する

**スコープ**: 財務会計システム

**レベル**: ユーザー目的

**主アクター**: 経理責任者

**事前条件**:
- システムにログインしている

**最低保証**: なし

**成功時保証**: 残高試算表が表示される

**トリガー**: 経理責任者が試算表メニューをクリックした

**主成功シナリオ**:
1. 経理責任者が基準日を指定する
2. 経理責任者が表示ボタンをクリックする
3. システムが残高を集計する
4. システムが試算表を表示する
5. システムが貸借一致を検証する
6. システムが検証結果を表示する

**拡張**:
- 5a. 貸借が一致しない場合:
    - 5a1. システムが警告メッセージを表示する
    - 5a2. システムが差額を表示する

---

## 財務諸表

### UC-FS-001: 🖥️貸借対照表を表示する🌊

**使用時のコンテキスト**: ユーザーが財政状態を確認する

**スコープ**: 財務会計システム

**レベル**: ユーザー目的

**主アクター**: 経理責任者

**事前条件**:
- 財務諸表閲覧権限でログインしている

**最低保証**: なし

**成功時保証**: 貸借対照表が表示される

**トリガー**: ユーザーが貸借対照表メニューをクリックした

**主成功シナリオ**:
1. ユーザーが基準日を指定する
2. ユーザーが表示ボタンをクリックする
3. システムが残高を集計する
4. システムが貸借対照表を生成する
5. システムが貸借対照表を表示する

**拡張**:
- 5a. 前期比較する場合:
    - 5a1. ユーザーが比較表示を選択する
    - 5a2. システムが前期データを取得する
    - 5a3. システムが比較貸借対照表を表示する
- 5b. ダウンロードする場合:
    - 5b1. ユーザーが出力形式を選択する
    - 5b2. システムがファイルを生成する
    - 5b3. システムがファイルをダウンロードする

**技術およびデータのバリエーションリスト**:
- 5b1: 出力形式は PDF, Excel, CSV

---

### UC-FS-002: 🖥️損益計算書を表示する🌊

**使用時のコンテキスト**: ユーザーが経営成績を確認する

**スコープ**: 財務会計システム

**レベル**: ユーザー目的

**主アクター**: 経理責任者

**事前条件**:
- 財務諸表閲覧権限でログインしている

**最低保証**: なし

**成功時保証**: 損益計算書が表示される

**トリガー**: ユーザーが損益計算書メニューをクリックした

**主成功シナリオ**:
1. ユーザーが対象期間を指定する
2. ユーザーが表示ボタンをクリックする
3. システムが収益・費用を集計する
4. システムが損益計算書を生成する
5. システムが損益計算書を表示する

**拡張**:
- 5a. 前期比較する場合:
    - 5a1. ユーザーが比較表示を選択する
    - 5a2. システムが前期データを取得する
    - 5a3. システムが比較損益計算書を表示する
- 5b. ダウンロードする場合:
    - 5b1. ユーザーが出力形式を選択する
    - 5b2. システムがファイルを生成する
    - 5b3. システムがファイルをダウンロードする

---

### UC-FS-003: 🖥️財務分析を表示する🌊

**使用時のコンテキスト**: 経営者が財務指標を確認する

**スコープ**: 財務会計システム

**レベル**: ユーザー目的

**主アクター**: 経営者

**事前条件**:
- 財務諸表閲覧権限でログインしている

**最低保証**: なし

**成功時保証**: 財務分析レポートが表示される

**トリガー**: 経営者が財務分析メニューをクリックした

**主成功シナリオ**:
1. 経営者が分析対象期間を指定する
2. 経営者が表示ボタンをクリックする
3. システムが財務データを取得する
4. システムが各種財務指標を算出する
5. システムが財務分析レポートを表示する

**拡張**:
- 5a. 推移グラフを表示する場合:
    - 5a1. 経営者がグラフ表示を選択する
    - 5a2. システムが指標の推移グラフを表示する

**技術およびデータのバリエーションリスト**:
- 4: 算出する指標は ROE, ROA, 流動比率, 自己資本比率, 売上高利益率 等

---

## システム管理

### UC-SYS-001: 🖥️監査ログを照会する🌊

**使用時のコンテキスト**: システム管理者がシステムの利用状況を監査する

**スコープ**: 財務会計システム

**レベル**: ユーザー目的

**主アクター**: システム管理者

**事前条件**:
- システム管理者権限でログインしている

**最低保証**: なし

**成功時保証**: 監査ログが表示される

**トリガー**: システム管理者が監査ログメニューをクリックした

**主成功シナリオ**:
1. システム管理者が検索条件を入力する
2. システム管理者が検索ボタンをクリックする
3. システムが監査ログを取得する
4. システムが監査ログ一覧を表示する

**拡張**:
- 4a. ダウンロードする場合:
    - 4a1. システム管理者がダウンロードボタンをクリックする
    - 4a2. システムが CSV ファイルを生成する
    - 4a3. システムがファイルをダウンロードする

**技術およびデータのバリエーションリスト**:
- 1: 検索条件はユーザーID、操作日時、操作種別

---

### UC-SYS-002: 🖥️データをダウンロードする🌊

**使用時のコンテキスト**: ユーザーが各種データをファイルとしてダウンロードする

**スコープ**: 財務会計システム

**レベル**: ユーザー目的

**主アクター**: 経理担当者

**事前条件**:
- システムにログインしている

**最低保証**: なし

**成功時保証**: 指定したデータがファイルとしてダウンロードされる

**トリガー**: ユーザーがダウンロードボタンをクリックした

**主成功シナリオ**:
1. ユーザーがダウンロード対象を選択する
2. ユーザーが出力条件を指定する
3. ユーザーが出力形式を選択する
4. ユーザーがダウンロードボタンをクリックする
5. システムがファイルを生成する
6. システムがファイルをダウンロードする

**技術およびデータのバリエーションリスト**:
- 1: ダウンロード対象は仕訳一覧、元帳、試算表、財務諸表
- 3: 出力形式は CSV, Excel, PDF

---

## トレーサビリティマトリクス

| UC ID | システムユースケース | BUC | ユーザーストーリー |
|-------|---------------------|-----|-------------------|
| UC-AUTH-001 | システムにログインする | BUC-006 | US-AUTH-001 |
| UC-AUTH-002 | システムからログアウトする | BUC-006 | US-AUTH-002 |
| UC-AUTH-003 | ユーザーを登録する | BUC-006 | US-AUTH-003 |
| UC-MST-001 | 勘定科目を登録する | BUC-005 | US-MST-001 |
| UC-MST-002 | 勘定科目を編集する | BUC-005 | US-MST-002 |
| UC-MST-003 | 勘定科目を削除する | BUC-005 | US-MST-003 |
| UC-MST-004 | 勘定科目一覧を表示する | BUC-005 | US-MST-004 |
| UC-JNL-001 | 仕訳を入力する | BUC-001 | US-JNL-001 |
| UC-JNL-002 | 仕訳を編集する | BUC-001 | US-JNL-002 |
| UC-JNL-003 | 仕訳を削除する | BUC-001 | US-JNL-003 |
| UC-JNL-004 | 仕訳一覧を表示する | BUC-001 | US-JNL-004 |
| UC-JNL-005 | 仕訳を検索する | BUC-001 | US-JNL-005 |
| UC-JNL-006 | 自動仕訳を生成する | BUC-001 | US-JNL-006 |
| UC-JNL-007 | 仕訳の承認を申請する | BUC-001 | US-JNL-007 |
| UC-JNL-008 | 仕訳を承認する | BUC-001 | US-JNL-008 |
| UC-JNL-009 | 仕訳を差し戻す | BUC-001 | US-JNL-009 |
| UC-JNL-010 | 仕訳を確定する | BUC-001 | US-JNL-010 |
| UC-LDG-001 | 総勘定元帳を照会する | BUC-001 | US-LDG-001 |
| UC-LDG-002 | 補助元帳を照会する | BUC-001 | US-LDG-002 |
| UC-LDG-003 | 日次残高を照会する | BUC-001 | US-LDG-003 |
| UC-LDG-004 | 月次残高を照会する | BUC-002 | US-LDG-004 |
| UC-LDG-005 | 残高試算表を表示する | BUC-002 | US-LDG-005 |
| UC-FS-001 | 貸借対照表を表示する | BUC-002, BUC-003 | US-FS-001 |
| UC-FS-002 | 損益計算書を表示する | BUC-002, BUC-003 | US-FS-002 |
| UC-FS-003 | 財務分析を表示する | BUC-004 | US-FS-003 |
| UC-SYS-001 | 監査ログを照会する | BUC-006 | US-SYS-001 |
| UC-SYS-002 | データをダウンロードする | BUC-006 | US-SYS-002 |
