
<!doctype html>
<html lang="en" class="no-js">
  <head>
    
      <meta charset="utf-8">
      <meta name="viewport" content="width=device-width,initial-scale=1">
      
        <meta name="description" content="財務会計システムの設計・開発ドキュメント">
      
      
        <meta name="author" content="Project Team">
      
      
      
        <link rel="prev" href="../part-5/">
      
      
      
        
      
      
      <link rel="icon" href="../../../assets/images/favicon.png">
      <meta name="generator" content="mkdocs-1.6.1, mkdocs-material-9.7.1">
    
    
      
        <title>Part VI 実践 - 財務会計システム ケーススタディ</title>
      
    
    
      <link rel="stylesheet" href="../../../assets/stylesheets/main.484c7ddc.min.css">
      
        
        <link rel="stylesheet" href="../../../assets/stylesheets/palette.ab4e12ef.min.css">
      
      


    
    
      
    
    
      
        
        
        <link rel="preconnect" href="https://fonts.gstatic.com" crossorigin>
        <link rel="stylesheet" href="https://fonts.googleapis.com/css?family=Roboto:300,300i,400,400i,700,700i%7CRoboto+Mono:400,400i,700,700i&display=fallback">
        <style>:root{--md-text-font:"Roboto";--md-code-font:"Roboto Mono"}</style>
      
    
    
      <link rel="stylesheet" href="../../../assets/css/extra.css">
    
    <script>__md_scope=new URL("../../..",location),__md_hash=e=>[...e].reduce(((e,_)=>(e<<5)-e+_.charCodeAt(0)),0),__md_get=(e,_=localStorage,t=__md_scope)=>JSON.parse(_.getItem(t.pathname+"."+e)),__md_set=(e,_,t=localStorage,a=__md_scope)=>{try{t.setItem(a.pathname+"."+e,JSON.stringify(_))}catch(e){}}</script>
    
      

    
    
  </head>
  
  
    
    
    
    
    
    <body dir="ltr" data-md-color-scheme="default" data-md-color-primary="indigo" data-md-color-accent="indigo">
  
    
    <input class="md-toggle" data-md-toggle="drawer" type="checkbox" id="__drawer" autocomplete="off">
    <input class="md-toggle" data-md-toggle="search" type="checkbox" id="__search" autocomplete="off">
    <label class="md-overlay" for="__drawer"></label>
    <div data-md-component="skip">
      
        
        <a href="#part-vi" class="md-skip">
          Skip to content
        </a>
      
    </div>
    <div data-md-component="announce">
      
    </div>
    
    
      

<header class="md-header" data-md-component="header">
  <nav class="md-header__inner md-grid" aria-label="Header">
    <a href="../../.." title="財務会計システム ケーススタディ" class="md-header__button md-logo" aria-label="財務会計システム ケーススタディ" data-md-component="logo">
      
  
  <svg xmlns="http://www.w3.org/2000/svg" viewBox="0 0 24 24"><path d="M12 8a3 3 0 0 0 3-3 3 3 0 0 0-3-3 3 3 0 0 0-3 3 3 3 0 0 0 3 3m0 3.54C9.64 9.35 6.5 8 3 8v11c3.5 0 6.64 1.35 9 3.54 2.36-2.19 5.5-3.54 9-3.54V8c-3.5 0-6.64 1.35-9 3.54"/></svg>

    </a>
    <label class="md-header__button md-icon" for="__drawer">
      
      <svg xmlns="http://www.w3.org/2000/svg" viewBox="0 0 24 24"><path d="M3 6h18v2H3zm0 5h18v2H3zm0 5h18v2H3z"/></svg>
    </label>
    <div class="md-header__title" data-md-component="header-title">
      <div class="md-header__ellipsis">
        <div class="md-header__topic">
          <span class="md-ellipsis">
            財務会計システム ケーススタディ
          </span>
        </div>
        <div class="md-header__topic" data-md-component="header-topic">
          <span class="md-ellipsis">
            
              Part VI 実践
            
          </span>
        </div>
      </div>
    </div>
    
      
    
    
    
    
      
      
        <label class="md-header__button md-icon" for="__search">
          
          <svg xmlns="http://www.w3.org/2000/svg" viewBox="0 0 24 24"><path d="M9.5 3A6.5 6.5 0 0 1 16 9.5c0 1.61-.59 3.09-1.56 4.23l.27.27h.79l5 5-1.5 1.5-5-5v-.79l-.27-.27A6.52 6.52 0 0 1 9.5 16 6.5 6.5 0 0 1 3 9.5 6.5 6.5 0 0 1 9.5 3m0 2C7 5 5 7 5 9.5S7 14 9.5 14 14 12 14 9.5 12 5 9.5 5"/></svg>
        </label>
        <div class="md-search" data-md-component="search" role="dialog">
  <label class="md-search__overlay" for="__search"></label>
  <div class="md-search__inner" role="search">
    <form class="md-search__form" name="search">
      <input type="text" class="md-search__input" name="query" aria-label="Search" placeholder="Search" autocapitalize="off" autocorrect="off" autocomplete="off" spellcheck="false" data-md-component="search-query" required>
      <label class="md-search__icon md-icon" for="__search">
        
        <svg xmlns="http://www.w3.org/2000/svg" viewBox="0 0 24 24"><path d="M9.5 3A6.5 6.5 0 0 1 16 9.5c0 1.61-.59 3.09-1.56 4.23l.27.27h.79l5 5-1.5 1.5-5-5v-.79l-.27-.27A6.52 6.52 0 0 1 9.5 16 6.5 6.5 0 0 1 3 9.5 6.5 6.5 0 0 1 9.5 3m0 2C7 5 5 7 5 9.5S7 14 9.5 14 14 12 14 9.5 12 5 9.5 5"/></svg>
        
        <svg xmlns="http://www.w3.org/2000/svg" viewBox="0 0 24 24"><path d="M20 11v2H8l5.5 5.5-1.42 1.42L4.16 12l7.92-7.92L13.5 5.5 8 11z"/></svg>
      </label>
      <nav class="md-search__options" aria-label="Search">
        
        <button type="reset" class="md-search__icon md-icon" title="Clear" aria-label="Clear" tabindex="-1">
          
          <svg xmlns="http://www.w3.org/2000/svg" viewBox="0 0 24 24"><path d="M19 6.41 17.59 5 12 10.59 6.41 5 5 6.41 10.59 12 5 17.59 6.41 19 12 13.41 17.59 19 19 17.59 13.41 12z"/></svg>
        </button>
      </nav>
      
        <div class="md-search__suggest" data-md-component="search-suggest"></div>
      
    </form>
    <div class="md-search__output">
      <div class="md-search__scrollwrap" tabindex="0" data-md-scrollfix>
        <div class="md-search-result" data-md-component="search-result">
          <div class="md-search-result__meta">
            Initializing search
          </div>
          <ol class="md-search-result__list" role="presentation"></ol>
        </div>
      </div>
    </div>
  </div>
</div>
      
    
    
      <div class="md-header__source">
        <a href="https://github.com/k2works/case-study-accounting" title="Go to repository" class="md-source" data-md-component="source">
  <div class="md-source__icon md-icon">
    
    <svg xmlns="http://www.w3.org/2000/svg" viewBox="0 0 448 512"><!--! Font Awesome Free 7.1.0 by @fontawesome - https://fontawesome.com License - https://fontawesome.com/license/free (Icons: CC BY 4.0, Fonts: SIL OFL 1.1, Code: MIT License) Copyright 2025 Fonticons, Inc.--><path d="M439.6 236.1 244 40.5c-5.4-5.5-12.8-8.5-20.4-8.5s-15 3-20.4 8.4L162.5 81l51.5 51.5c27.1-9.1 52.7 16.8 43.4 43.7l49.7 49.7c34.2-11.8 61.2 31 35.5 56.7-26.5 26.5-70.2-2.9-56-37.3L240.3 199v121.9c25.3 12.5 22.3 41.8 9.1 55-6.4 6.4-15.2 10.1-24.3 10.1s-17.8-3.6-24.3-10.1c-17.6-17.6-11.1-46.9 11.2-56v-123c-20.8-8.5-24.6-30.7-18.6-45L142.6 101 8.5 235.1C3 240.6 0 247.9 0 255.5s3 15 8.5 20.4l195.6 195.7c5.4 5.4 12.7 8.4 20.4 8.4s15-3 20.4-8.4l194.7-194.7c5.4-5.4 8.4-12.8 8.4-20.4s-3-15-8.4-20.4"/></svg>
  </div>
  <div class="md-source__repository">
    case-study-accounting
  </div>
</a>
      </div>
    
  </nav>
  
</header>
    
    <div class="md-container" data-md-component="container">
      
      
        
          
            
<nav class="md-tabs" aria-label="Tabs" data-md-component="tabs">
  <div class="md-grid">
    <ul class="md-tabs__list">
      
        
  
  
  
  
    <li class="md-tabs__item">
      <a href="../../.." class="md-tabs__link">
        
  
  
    
  
  Home

      </a>
    </li>
  

      
        
  
  
  
  
    
    
      <li class="md-tabs__item">
        <a href="../../../requirements/requirements_definition/" class="md-tabs__link">
          
  
  
  要件定義

        </a>
      </li>
    
  

      
        
  
  
  
  
    
    
      
  
  
  
  
    
    
      <li class="md-tabs__item">
        <a href="../../../design/architecture_backend/" class="md-tabs__link">
          
  
  
  設計

        </a>
      </li>
    
  

    
  

      
        
  
  
  
  
    
    
      <li class="md-tabs__item">
        <a href="../../../development/release_plan/" class="md-tabs__link">
          
  
  
  開発

        </a>
      </li>
    
  

      
        
  
  
  
  
    
    
      <li class="md-tabs__item">
        <a href="../../../operation/dev_env/" class="md-tabs__link">
          
  
  
  運用

        </a>
      </li>
    
  

      
        
  
  
  
  
    
    
      
  
  
  
  
    
    
      <li class="md-tabs__item">
        <a href="../../../reference/%E9%96%8B%E7%99%BA%E3%82%AC%E3%82%A4%E3%83%89/" class="md-tabs__link">
          
  
  
  リファレンス

        </a>
      </li>
    
  

    
  

      
        
  
  
  
  
    
    
      <li class="md-tabs__item">
        <a href="../../../template/ADR/" class="md-tabs__link">
          
  
  
  テンプレート

        </a>
      </li>
    
  

      
        
  
  
  
  
    
    
      <li class="md-tabs__item">
        <a href="../../" class="md-tabs__link">
          
  
  
  実践ガイド

        </a>
      </li>
    
  

      
        
  
  
  
    
  
  
    
    
      
  
  
  
    
  
  
    
    
      <li class="md-tabs__item md-tabs__item--active">
        <a href="../" class="md-tabs__link">
          
  
  
  関数型プログラミング実践ガイド

        </a>
      </li>
    
  

    
  

      
    </ul>
  </div>
</nav>
          
        
      
      <main class="md-main" data-md-component="main">
        <div class="md-main__inner md-grid">
          
            
              
              <div class="md-sidebar md-sidebar--primary" data-md-component="sidebar" data-md-type="navigation" >
                <div class="md-sidebar__scrollwrap">
                  <div class="md-sidebar__inner">
                    


  


  

<nav class="md-nav md-nav--primary md-nav--lifted md-nav--integrated" aria-label="Navigation" data-md-level="0">
  <label class="md-nav__title" for="__drawer">
    <a href="../../.." title="財務会計システム ケーススタディ" class="md-nav__button md-logo" aria-label="財務会計システム ケーススタディ" data-md-component="logo">
      
  
  <svg xmlns="http://www.w3.org/2000/svg" viewBox="0 0 24 24"><path d="M12 8a3 3 0 0 0 3-3 3 3 0 0 0-3-3 3 3 0 0 0-3 3 3 3 0 0 0 3 3m0 3.54C9.64 9.35 6.5 8 3 8v11c3.5 0 6.64 1.35 9 3.54 2.36-2.19 5.5-3.54 9-3.54V8c-3.5 0-6.64 1.35-9 3.54"/></svg>

    </a>
    財務会計システム ケーススタディ
  </label>
  
    <div class="md-nav__source">
      <a href="https://github.com/k2works/case-study-accounting" title="Go to repository" class="md-source" data-md-component="source">
  <div class="md-source__icon md-icon">
    
    <svg xmlns="http://www.w3.org/2000/svg" viewBox="0 0 448 512"><!--! Font Awesome Free 7.1.0 by @fontawesome - https://fontawesome.com License - https://fontawesome.com/license/free (Icons: CC BY 4.0, Fonts: SIL OFL 1.1, Code: MIT License) Copyright 2025 Fonticons, Inc.--><path d="M439.6 236.1 244 40.5c-5.4-5.5-12.8-8.5-20.4-8.5s-15 3-20.4 8.4L162.5 81l51.5 51.5c27.1-9.1 52.7 16.8 43.4 43.7l49.7 49.7c34.2-11.8 61.2 31 35.5 56.7-26.5 26.5-70.2-2.9-56-37.3L240.3 199v121.9c25.3 12.5 22.3 41.8 9.1 55-6.4 6.4-15.2 10.1-24.3 10.1s-17.8-3.6-24.3-10.1c-17.6-17.6-11.1-46.9 11.2-56v-123c-20.8-8.5-24.6-30.7-18.6-45L142.6 101 8.5 235.1C3 240.6 0 247.9 0 255.5s3 15 8.5 20.4l195.6 195.7c5.4 5.4 12.7 8.4 20.4 8.4s15-3 20.4-8.4l194.7-194.7c5.4-5.4 8.4-12.8 8.4-20.4s-3-15-8.4-20.4"/></svg>
  </div>
  <div class="md-source__repository">
    case-study-accounting
  </div>
</a>
    </div>
  
  <ul class="md-nav__list" data-md-scrollfix>
    
      
      
  
  
  
  
    <li class="md-nav__item">
      <a href="../../.." class="md-nav__link">
        
  
  
  <span class="md-ellipsis">
    
  
    Home
  

    
  </span>
  
  

      </a>
    </li>
  

    
      
      
  
  
  
  
    
    
    
    
      
      
        
      
    
    
    <li class="md-nav__item md-nav__item--nested">
      
        
        
        <input class="md-nav__toggle md-toggle " type="checkbox" id="__nav_2" >
        
          
          <label class="md-nav__link" for="__nav_2" id="__nav_2_label" tabindex="0">
            
  
  
  <span class="md-ellipsis">
    
  
    要件定義
  

    
  </span>
  
  

            <span class="md-nav__icon md-icon"></span>
          </label>
        
        <nav class="md-nav" data-md-level="1" aria-labelledby="__nav_2_label" aria-expanded="false">
          <label class="md-nav__title" for="__nav_2">
            <span class="md-nav__icon md-icon"></span>
            
  
    要件定義
  

          </label>
          <ul class="md-nav__list" data-md-scrollfix>
            
              
                
  
  
  
  
    <li class="md-nav__item">
      <a href="../../../requirements/requirements_definition/" class="md-nav__link">
        
  
  
  <span class="md-ellipsis">
    
  
    要件定義書
  

    
  </span>
  
  

      </a>
    </li>
  

              
            
              
                
  
  
  
  
    <li class="md-nav__item">
      <a href="../../../requirements/business_usecase/" class="md-nav__link">
        
  
  
  <span class="md-ellipsis">
    
  
    ビジネスユースケース
  

    
  </span>
  
  

      </a>
    </li>
  

              
            
              
                
  
  
  
  
    <li class="md-nav__item">
      <a href="../../../requirements/system_usecase/" class="md-nav__link">
        
  
  
  <span class="md-ellipsis">
    
  
    システムユースケース
  

    
  </span>
  
  

      </a>
    </li>
  

              
            
              
                
  
  
  
  
    <li class="md-nav__item">
      <a href="../../../requirements/user_story/" class="md-nav__link">
        
  
  
  <span class="md-ellipsis">
    
  
    ユーザーストーリー
  

    
  </span>
  
  

      </a>
    </li>
  

              
            
          </ul>
        </nav>
      
    </li>
  

    
      
      
  
  
  
  
    
    
    
    
      
      
        
      
    
    
    <li class="md-nav__item md-nav__item--nested">
      
        
        
        <input class="md-nav__toggle md-toggle " type="checkbox" id="__nav_3" >
        
          
          <label class="md-nav__link" for="__nav_3" id="__nav_3_label" tabindex="0">
            
  
  
  <span class="md-ellipsis">
    
  
    設計
  

    
  </span>
  
  

            <span class="md-nav__icon md-icon"></span>
          </label>
        
        <nav class="md-nav" data-md-level="1" aria-labelledby="__nav_3_label" aria-expanded="false">
          <label class="md-nav__title" for="__nav_3">
            <span class="md-nav__icon md-icon"></span>
            
  
    設計
  

          </label>
          <ul class="md-nav__list" data-md-scrollfix>
            
              
                
  
  
  
  
    
    
    
    
      
      
        
      
    
    
    <li class="md-nav__item md-nav__item--nested">
      
        
        
        <input class="md-nav__toggle md-toggle " type="checkbox" id="__nav_3_1" >
        
          
          <label class="md-nav__link" for="__nav_3_1" id="__nav_3_1_label" tabindex="0">
            
  
  
  <span class="md-ellipsis">
    
  
    アーキテクチャ
  

    
  </span>
  
  

            <span class="md-nav__icon md-icon"></span>
          </label>
        
        <nav class="md-nav" data-md-level="2" aria-labelledby="__nav_3_1_label" aria-expanded="false">
          <label class="md-nav__title" for="__nav_3_1">
            <span class="md-nav__icon md-icon"></span>
            
  
    アーキテクチャ
  

          </label>
          <ul class="md-nav__list" data-md-scrollfix>
            
              
                
  
  
  
  
    <li class="md-nav__item">
      <a href="../../../design/architecture_backend/" class="md-nav__link">
        
  
  
  <span class="md-ellipsis">
    
  
    バックエンド
  

    
  </span>
  
  

      </a>
    </li>
  

              
            
              
                
  
  
  
  
    <li class="md-nav__item">
      <a href="../../../design/architecture_frontend/" class="md-nav__link">
        
  
  
  <span class="md-ellipsis">
    
  
    フロントエンド
  

    
  </span>
  
  

      </a>
    </li>
  

              
            
              
                
  
  
  
  
    <li class="md-nav__item">
      <a href="../../../design/architecture_infrastructure/" class="md-nav__link">
        
  
  
  <span class="md-ellipsis">
    
  
    インフラストラクチャ
  

    
  </span>
  
  

      </a>
    </li>
  

              
            
          </ul>
        </nav>
      
    </li>
  

              
            
              
                
  
  
  
  
    
    
    
    
      
      
        
      
    
    
    <li class="md-nav__item md-nav__item--nested">
      
        
        
        <input class="md-nav__toggle md-toggle " type="checkbox" id="__nav_3_2" >
        
          
          <label class="md-nav__link" for="__nav_3_2" id="__nav_3_2_label" tabindex="0">
            
  
  
  <span class="md-ellipsis">
    
  
    モデル設計
  

    
  </span>
  
  

            <span class="md-nav__icon md-icon"></span>
          </label>
        
        <nav class="md-nav" data-md-level="2" aria-labelledby="__nav_3_2_label" aria-expanded="false">
          <label class="md-nav__title" for="__nav_3_2">
            <span class="md-nav__icon md-icon"></span>
            
  
    モデル設計
  

          </label>
          <ul class="md-nav__list" data-md-scrollfix>
            
              
                
  
  
  
  
    <li class="md-nav__item">
      <a href="../../../design/data-model/" class="md-nav__link">
        
  
  
  <span class="md-ellipsis">
    
  
    データモデル
  

    
  </span>
  
  

      </a>
    </li>
  

              
            
              
                
  
  
  
  
    <li class="md-nav__item">
      <a href="../../../design/domain-model/" class="md-nav__link">
        
  
  
  <span class="md-ellipsis">
    
  
    ドメインモデル
  

    
  </span>
  
  

      </a>
    </li>
  

              
            
          </ul>
        </nav>
      
    </li>
  

              
            
              
                
  
  
  
  
    <li class="md-nav__item">
      <a href="../../../design/ui-design/" class="md-nav__link">
        
  
  
  <span class="md-ellipsis">
    
  
    UI 設計
  

    
  </span>
  
  

      </a>
    </li>
  

              
            
              
                
  
  
  
  
    <li class="md-nav__item">
      <a href="../../../design/test_strategy/" class="md-nav__link">
        
  
  
  <span class="md-ellipsis">
    
  
    テスト戦略
  

    
  </span>
  
  

      </a>
    </li>
  

              
            
              
                
  
  
  
  
    <li class="md-nav__item">
      <a href="../../../design/non_functional/" class="md-nav__link">
        
  
  
  <span class="md-ellipsis">
    
  
    非機能要件
  

    
  </span>
  
  

      </a>
    </li>
  

              
            
              
                
  
  
  
  
    <li class="md-nav__item">
      <a href="../../../design/operation/" class="md-nav__link">
        
  
  
  <span class="md-ellipsis">
    
  
    運用要件
  

    
  </span>
  
  

      </a>
    </li>
  

              
            
              
                
  
  
  
  
    <li class="md-nav__item">
      <a href="../../../design/tech_stack/" class="md-nav__link">
        
  
  
  <span class="md-ellipsis">
    
  
    技術スタック選定
  

    
  </span>
  
  

      </a>
    </li>
  

              
            
          </ul>
        </nav>
      
    </li>
  

    
      
      
  
  
  
  
    
    
    
    
      
      
        
      
    
    
    <li class="md-nav__item md-nav__item--nested">
      
        
        
        <input class="md-nav__toggle md-toggle " type="checkbox" id="__nav_4" >
        
          
          <label class="md-nav__link" for="__nav_4" id="__nav_4_label" tabindex="0">
            
  
  
  <span class="md-ellipsis">
    
  
    開発
  

    
  </span>
  
  

            <span class="md-nav__icon md-icon"></span>
          </label>
        
        <nav class="md-nav" data-md-level="1" aria-labelledby="__nav_4_label" aria-expanded="false">
          <label class="md-nav__title" for="__nav_4">
            <span class="md-nav__icon md-icon"></span>
            
  
    開発
  

          </label>
          <ul class="md-nav__list" data-md-scrollfix>
            
              
                
  
  
  
  
    <li class="md-nav__item">
      <a href="../../../development/release_plan/" class="md-nav__link">
        
  
  
  <span class="md-ellipsis">
    
  
    リリース計画
  

    
  </span>
  
  

      </a>
    </li>
  

              
            
              
                
  
  
  
  
    
    
    
    
      
      
        
      
    
    
    <li class="md-nav__item md-nav__item--nested">
      
        
        
        <input class="md-nav__toggle md-toggle " type="checkbox" id="__nav_4_2" >
        
          
          <label class="md-nav__link" for="__nav_4_2" id="__nav_4_2_label" tabindex="0">
            
  
  
  <span class="md-ellipsis">
    
  
    イテレーション計画
  

    
  </span>
  
  

            <span class="md-nav__icon md-icon"></span>
          </label>
        
        <nav class="md-nav" data-md-level="2" aria-labelledby="__nav_4_2_label" aria-expanded="false">
          <label class="md-nav__title" for="__nav_4_2">
            <span class="md-nav__icon md-icon"></span>
            
  
    イテレーション計画
  

          </label>
          <ul class="md-nav__list" data-md-scrollfix>
            
              
                
  
  
  
  
    <li class="md-nav__item">
      <a href="../../../development/iteration_plan-1/" class="md-nav__link">
        
  
  
  <span class="md-ellipsis">
    
  
    イテレーション1
  

    
  </span>
  
  

      </a>
    </li>
  

              
            
              
                
  
  
  
  
    <li class="md-nav__item">
      <a href="../../../development/iteration_plan-2/" class="md-nav__link">
        
  
  
  <span class="md-ellipsis">
    
  
    イテレーション2
  

    
  </span>
  
  

      </a>
    </li>
  

              
            
              
                
  
  
  
  
    <li class="md-nav__item">
      <a href="../../../development/iteration_plan-3/" class="md-nav__link">
        
  
  
  <span class="md-ellipsis">
    
  
    イテレーション3
  

    
  </span>
  
  

      </a>
    </li>
  

              
            
              
                
  
  
  
  
    <li class="md-nav__item">
      <a href="../../../development/iteration_plan-4/" class="md-nav__link">
        
  
  
  <span class="md-ellipsis">
    
  
    イテレーション4
  

    
  </span>
  
  

      </a>
    </li>
  

              
            
          </ul>
        </nav>
      
    </li>
  

              
            
              
                
  
  
  
  
    
    
    
    
      
      
        
      
    
    
    <li class="md-nav__item md-nav__item--nested">
      
        
        
        <input class="md-nav__toggle md-toggle " type="checkbox" id="__nav_4_3" >
        
          
          <label class="md-nav__link" for="__nav_4_3" id="__nav_4_3_label" tabindex="0">
            
  
  
  <span class="md-ellipsis">
    
  
    ふりかえり
  

    
  </span>
  
  

            <span class="md-nav__icon md-icon"></span>
          </label>
        
        <nav class="md-nav" data-md-level="2" aria-labelledby="__nav_4_3_label" aria-expanded="false">
          <label class="md-nav__title" for="__nav_4_3">
            <span class="md-nav__icon md-icon"></span>
            
  
    ふりかえり
  

          </label>
          <ul class="md-nav__list" data-md-scrollfix>
            
              
                
  
  
  
  
    <li class="md-nav__item">
      <a href="../../../development/retrospective-1/" class="md-nav__link">
        
  
  
  <span class="md-ellipsis">
    
  
    イテレーション1
  

    
  </span>
  
  

      </a>
    </li>
  

              
            
              
                
  
  
  
  
    <li class="md-nav__item">
      <a href="../../../development/retrospective-2/" class="md-nav__link">
        
  
  
  <span class="md-ellipsis">
    
  
    イテレーション2
  

    
  </span>
  
  

      </a>
    </li>
  

              
            
              
                
  
  
  
  
    <li class="md-nav__item">
      <a href="../../../development/retrospective-3/" class="md-nav__link">
        
  
  
  <span class="md-ellipsis">
    
  
    イテレーション3
  

    
  </span>
  
  

      </a>
    </li>
  

              
            
          </ul>
        </nav>
      
    </li>
  

              
            
          </ul>
        </nav>
      
    </li>
  

    
      
      
  
  
  
  
    
    
    
    
      
      
        
      
    
    
    <li class="md-nav__item md-nav__item--nested">
      
        
        
        <input class="md-nav__toggle md-toggle " type="checkbox" id="__nav_5" >
        
          
          <label class="md-nav__link" for="__nav_5" id="__nav_5_label" tabindex="0">
            
  
  
  <span class="md-ellipsis">
    
  
    運用
  

    
  </span>
  
  

            <span class="md-nav__icon md-icon"></span>
          </label>
        
        <nav class="md-nav" data-md-level="1" aria-labelledby="__nav_5_label" aria-expanded="false">
          <label class="md-nav__title" for="__nav_5">
            <span class="md-nav__icon md-icon"></span>
            
  
    運用
  

          </label>
          <ul class="md-nav__list" data-md-scrollfix>
            
              
                
  
  
  
  
    <li class="md-nav__item">
      <a href="../../../operation/dev_env/" class="md-nav__link">
        
  
  
  <span class="md-ellipsis">
    
  
    開発環境解説
  

    
  </span>
  
  

      </a>
    </li>
  

              
            
              
                
  
  
  
  
    <li class="md-nav__item">
      <a href="../../../operation/dev_container/" class="md-nav__link">
        
  
  
  <span class="md-ellipsis">
    
  
    開発コンテナ構築手順書
  

    
  </span>
  
  

      </a>
    </li>
  

              
            
              
                
  
  
  
  
    <li class="md-nav__item">
      <a href="../../../operation/backend_setup/" class="md-nav__link">
        
  
  
  <span class="md-ellipsis">
    
  
    バックエンド構築手順書
  

    
  </span>
  
  

      </a>
    </li>
  

              
            
              
                
  
  
  
  
    <li class="md-nav__item">
      <a href="../../../operation/backend_demo_env/" class="md-nav__link">
        
  
  
  <span class="md-ellipsis">
    
  
    バックエンドデモ環境
  

    
  </span>
  
  

      </a>
    </li>
  

              
            
              
                
  
  
  
  
    <li class="md-nav__item">
      <a href="../../../operation/frontend_setup/" class="md-nav__link">
        
  
  
  <span class="md-ellipsis">
    
  
    フロントエンド構築手順書
  

    
  </span>
  
  

      </a>
    </li>
  

              
            
              
                
  
  
  
  
    <li class="md-nav__item">
      <a href="../../../operation/frontend_dev/" class="md-nav__link">
        
  
  
  <span class="md-ellipsis">
    
  
    フロントエンド開発手順
  

    
  </span>
  
  

      </a>
    </li>
  

              
            
              
                
  
  
  
  
    <li class="md-nav__item">
      <a href="../../../operation/frontend_common_ui/" class="md-nav__link">
        
  
  
  <span class="md-ellipsis">
    
  
    フロントエンド共通 UI
  

    
  </span>
  
  

      </a>
    </li>
  

              
            
              
                
  
  
  
  
    <li class="md-nav__item">
      <a href="../../../operation/frontend_demo_env/" class="md-nav__link">
        
  
  
  <span class="md-ellipsis">
    
  
    フロントエンドデモ環境
  

    
  </span>
  
  

      </a>
    </li>
  

              
            
              
                
  
  
  
  
    <li class="md-nav__item">
      <a href="../../../operation/deploy_demo/" class="md-nav__link">
        
  
  
  <span class="md-ellipsis">
    
  
    デモ環境デプロイ
  

    
  </span>
  
  

      </a>
    </li>
  

              
            
              
                
  
  
  
  
    <li class="md-nav__item">
      <a href="../../../operation/third_party_service/" class="md-nav__link">
        
  
  
  <span class="md-ellipsis">
    
  
    外部サービス連携
  

    
  </span>
  
  

      </a>
    </li>
  

              
            
              
                
  
  
  
  
    <li class="md-nav__item">
      <a href="../../../operation/sonarqube_setup/" class="md-nav__link">
        
  
  
  <span class="md-ellipsis">
    
  
    SonarQube セットアップガイド
  

    
  </span>
  
  

      </a>
    </li>
  

              
            
              
                
  
  
  
  
    <li class="md-nav__item">
      <a href="../../../operation/e2e_test/" class="md-nav__link">
        
  
  
  <span class="md-ellipsis">
    
  
    E2E テスト実行手順書
  

    
  </span>
  
  

      </a>
    </li>
  

              
            
              
                
  
  
  
  
    <li class="md-nav__item">
      <a href="../../../operation/github_project/" class="md-nav__link">
        
  
  
  <span class="md-ellipsis">
    
  
    GitHub Project 運用ガイド
  

    
  </span>
  
  

      </a>
    </li>
  

              
            
          </ul>
        </nav>
      
    </li>
  

    
      
      
  
  
  
  
    
    
    
    
      
      
        
      
    
    
    <li class="md-nav__item md-nav__item--nested">
      
        
        
        <input class="md-nav__toggle md-toggle " type="checkbox" id="__nav_6" >
        
          
          <label class="md-nav__link" for="__nav_6" id="__nav_6_label" tabindex="0">
            
  
  
  <span class="md-ellipsis">
    
  
    リファレンス
  

    
  </span>
  
  

            <span class="md-nav__icon md-icon"></span>
          </label>
        
        <nav class="md-nav" data-md-level="1" aria-labelledby="__nav_6_label" aria-expanded="false">
          <label class="md-nav__title" for="__nav_6">
            <span class="md-nav__icon md-icon"></span>
            
  
    リファレンス
  

          </label>
          <ul class="md-nav__list" data-md-scrollfix>
            
              
                
  
  
  
  
    
    
    
    
      
      
        
      
    
    
    <li class="md-nav__item md-nav__item--nested">
      
        
        
        <input class="md-nav__toggle md-toggle " type="checkbox" id="__nav_6_1" >
        
          
          <label class="md-nav__link" for="__nav_6_1" id="__nav_6_1_label" tabindex="0">
            
  
  
  <span class="md-ellipsis">
    
  
    開発ガイドライン
  

    
  </span>
  
  

            <span class="md-nav__icon md-icon"></span>
          </label>
        
        <nav class="md-nav" data-md-level="2" aria-labelledby="__nav_6_1_label" aria-expanded="false">
          <label class="md-nav__title" for="__nav_6_1">
            <span class="md-nav__icon md-icon"></span>
            
  
    開発ガイドライン
  

          </label>
          <ul class="md-nav__list" data-md-scrollfix>
            
              
                
  
  
  
  
    <li class="md-nav__item">
      <a href="../../../reference/%E9%96%8B%E7%99%BA%E3%82%AC%E3%82%A4%E3%83%89/" class="md-nav__link">
        
  
  
  <span class="md-ellipsis">
    
  
    開発ガイド
  

    
  </span>
  
  

      </a>
    </li>
  

              
            
              
                
  
  
  
  
    <li class="md-nav__item">
      <a href="../../../reference/%E3%82%88%E3%81%84%E3%82%BD%E3%83%95%E3%83%88%E3%82%A6%E3%82%A7%E3%82%A2%E3%81%A8%E3%81%AF/" class="md-nav__link">
        
  
  
  <span class="md-ellipsis">
    
  
    よいソフトウェアとは
  

    
  </span>
  
  

      </a>
    </li>
  

              
            
              
                
  
  
  
  
    <li class="md-nav__item">
      <a href="../../../reference/%E3%82%B3%E3%83%BC%E3%83%87%E3%82%A3%E3%83%B3%E3%82%B0%E3%81%A8%E3%83%86%E3%82%B9%E3%83%88%E3%82%AC%E3%82%A4%E3%83%89/" class="md-nav__link">
        
  
  
  <span class="md-ellipsis">
    
  
    コーディングとテストガイド
  

    
  </span>
  
  

      </a>
    </li>
  

              
            
              
                
  
  
  
  
    <li class="md-nav__item">
      <a href="../../../reference/%E3%82%A8%E3%82%AF%E3%82%B9%E3%83%88%E3%83%AA%E3%83%BC%E3%83%A0%E3%83%97%E3%83%AD%E3%82%B0%E3%83%A9%E3%83%9F%E3%83%B3%E3%82%B0/" class="md-nav__link">
        
  
  
  <span class="md-ellipsis">
    
  
    エクストリームプログラミング
  

    
  </span>
  
  

      </a>
    </li>
  

              
            
          </ul>
        </nav>
      
    </li>
  

              
            
              
                
  
  
  
  
    
    
    
    
      
      
        
      
    
    
    <li class="md-nav__item md-nav__item--nested">
      
        
        
        <input class="md-nav__toggle md-toggle " type="checkbox" id="__nav_6_2" >
        
          
          <label class="md-nav__link" for="__nav_6_2" id="__nav_6_2_label" tabindex="0">
            
  
  
  <span class="md-ellipsis">
    
  
    分析・設計ガイド
  

    
  </span>
  
  

            <span class="md-nav__icon md-icon"></span>
          </label>
        
        <nav class="md-nav" data-md-level="2" aria-labelledby="__nav_6_2_label" aria-expanded="false">
          <label class="md-nav__title" for="__nav_6_2">
            <span class="md-nav__icon md-icon"></span>
            
  
    分析・設計ガイド
  

          </label>
          <ul class="md-nav__list" data-md-scrollfix>
            
              
                
  
  
  
  
    <li class="md-nav__item">
      <a href="../../../reference/%E8%A6%81%E4%BB%B6%E5%AE%9A%E7%BE%A9%E3%82%AC%E3%82%A4%E3%83%89/" class="md-nav__link">
        
  
  
  <span class="md-ellipsis">
    
  
    要件定義ガイド
  

    
  </span>
  
  

      </a>
    </li>
  

              
            
              
                
  
  
  
  
    <li class="md-nav__item">
      <a href="../../../reference/%E3%83%A6%E3%83%BC%E3%82%B9%E3%82%B1%E3%83%BC%E3%82%B9%E4%BD%9C%E6%88%90%E3%82%AC%E3%82%A4%E3%83%89/" class="md-nav__link">
        
  
  
  <span class="md-ellipsis">
    
  
    ユースケース作成ガイド
  

    
  </span>
  
  

      </a>
    </li>
  

              
            
              
                
  
  
  
  
    <li class="md-nav__item">
      <a href="../../../reference/%E3%82%A2%E3%83%BC%E3%82%AD%E3%83%86%E3%82%AF%E3%83%81%E3%83%A3%E8%A8%AD%E8%A8%88%E3%82%AC%E3%82%A4%E3%83%89/" class="md-nav__link">
        
  
  
  <span class="md-ellipsis">
    
  
    アーキテクチャ設計ガイド
  

    
  </span>
  
  

      </a>
    </li>
  

              
            
              
                
  
  
  
  
    <li class="md-nav__item">
      <a href="../../../reference/%E3%83%87%E3%83%BC%E3%82%BF%E3%83%A2%E3%83%87%E3%83%AB%E8%A8%AD%E8%A8%88%E3%82%AC%E3%82%A4%E3%83%89/" class="md-nav__link">
        
  
  
  <span class="md-ellipsis">
    
  
    データモデル設計ガイド
  

    
  </span>
  
  

      </a>
    </li>
  

              
            
              
                
  
  
  
  
    <li class="md-nav__item">
      <a href="../../../reference/%E3%83%89%E3%83%A1%E3%82%A4%E3%83%B3%E3%83%A2%E3%83%87%E3%83%AB%E8%A8%AD%E8%A8%88%E3%82%AC%E3%82%A4%E3%83%89/" class="md-nav__link">
        
  
  
  <span class="md-ellipsis">
    
  
    ドメインモデル設計ガイド
  

    
  </span>
  
  

      </a>
    </li>
  

              
            
              
                
  
  
  
  
    <li class="md-nav__item">
      <a href="../../../reference/UI%E8%A8%AD%E8%A8%88%E3%82%AC%E3%82%A4%E3%83%89/" class="md-nav__link">
        
  
  
  <span class="md-ellipsis">
    
  
    UI設計ガイド
  

    
  </span>
  
  

      </a>
    </li>
  

              
            
              
                
  
  
  
  
    <li class="md-nav__item">
      <a href="../../../reference/%E3%82%A4%E3%83%B3%E3%83%95%E3%83%A9%E8%A8%AD%E8%A8%88%E3%82%AC%E3%82%A4%E3%83%89/" class="md-nav__link">
        
  
  
  <span class="md-ellipsis">
    
  
    インフラ設計ガイド
  

    
  </span>
  
  

      </a>
    </li>
  

              
            
          </ul>
        </nav>
      
    </li>
  

              
            
              
                
  
  
  
  
    
    
    
    
      
      
        
      
    
    
    <li class="md-nav__item md-nav__item--nested">
      
        
        
        <input class="md-nav__toggle md-toggle " type="checkbox" id="__nav_6_3" >
        
          
          <label class="md-nav__link" for="__nav_6_3" id="__nav_6_3_label" tabindex="0">
            
  
  
  <span class="md-ellipsis">
    
  
    非機能・運用ガイド
  

    
  </span>
  
  

            <span class="md-nav__icon md-icon"></span>
          </label>
        
        <nav class="md-nav" data-md-level="2" aria-labelledby="__nav_6_3_label" aria-expanded="false">
          <label class="md-nav__title" for="__nav_6_3">
            <span class="md-nav__icon md-icon"></span>
            
  
    非機能・運用ガイド
  

          </label>
          <ul class="md-nav__list" data-md-scrollfix>
            
              
                
  
  
  
  
    <li class="md-nav__item">
      <a href="../../../reference/%E3%83%86%E3%82%B9%E3%83%88%E6%88%A6%E7%95%A5%E3%82%AC%E3%82%A4%E3%83%89/" class="md-nav__link">
        
  
  
  <span class="md-ellipsis">
    
  
    テスト戦略ガイド
  

    
  </span>
  
  

      </a>
    </li>
  

              
            
              
                
  
  
  
  
    <li class="md-nav__item">
      <a href="../../../reference/%E9%9D%9E%E6%A9%9F%E8%83%BD%E8%A6%81%E4%BB%B6%E5%AE%9A%E7%BE%A9%E3%82%AC%E3%82%A4%E3%83%89/" class="md-nav__link">
        
  
  
  <span class="md-ellipsis">
    
  
    非機能要件定義ガイド
  

    
  </span>
  
  

      </a>
    </li>
  

              
            
              
                
  
  
  
  
    <li class="md-nav__item">
      <a href="../../../reference/%E9%81%8B%E7%94%A8%E8%A6%81%E4%BB%B6%E5%AE%9A%E7%BE%A9%E3%82%AC%E3%82%A4%E3%83%89/" class="md-nav__link">
        
  
  
  <span class="md-ellipsis">
    
  
    運用要件定義ガイド
  

    
  </span>
  
  

      </a>
    </li>
  

              
            
              
                
  
  
  
  
    <li class="md-nav__item">
      <a href="../../../reference/%E3%83%AA%E3%83%AA%E3%83%BC%E3%82%B9%E3%83%BB%E3%82%A4%E3%83%86%E3%83%AC%E3%83%BC%E3%82%B7%E3%83%A7%E3%83%B3%E8%A8%88%E7%94%BB%E3%82%AC%E3%82%A4%E3%83%89/" class="md-nav__link">
        
  
  
  <span class="md-ellipsis">
    
  
    リリース・イテレーション計画ガイド
  

    
  </span>
  
  

      </a>
    </li>
  

              
            
          </ul>
        </nav>
      
    </li>
  

              
            
              
                
  
  
  
  
    
    
    
    
      
      
        
      
    
    
    <li class="md-nav__item md-nav__item--nested">
      
        
        
        <input class="md-nav__toggle md-toggle " type="checkbox" id="__nav_6_4" >
        
          
          <label class="md-nav__link" for="__nav_6_4" id="__nav_6_4_label" tabindex="0">
            
  
  
  <span class="md-ellipsis">
    
  
    環境構築ガイド
  

    
  </span>
  
  

            <span class="md-nav__icon md-icon"></span>
          </label>
        
        <nav class="md-nav" data-md-level="2" aria-labelledby="__nav_6_4_label" aria-expanded="false">
          <label class="md-nav__title" for="__nav_6_4">
            <span class="md-nav__icon md-icon"></span>
            
  
    環境構築ガイド
  

          </label>
          <ul class="md-nav__list" data-md-scrollfix>
            
              
                
  
  
  
  
    <li class="md-nav__item">
      <a href="../../../reference/Java%E3%82%A2%E3%83%97%E3%83%AA%E3%82%B1%E3%83%BC%E3%82%B7%E3%83%A7%E3%83%B3%E7%92%B0%E5%A2%83%E6%A7%8B%E7%AF%89%E3%82%AC%E3%82%A4%E3%83%89/" class="md-nav__link">
        
  
  
  <span class="md-ellipsis">
    
  
    Javaアプリケーション環境構築ガイド
  

    
  </span>
  
  

      </a>
    </li>
  

              
            
              
                
  
  
  
  
    <li class="md-nav__item">
      <a href="../../../reference/TypeScript%E3%82%A2%E3%83%97%E3%83%AA%E3%82%B1%E3%83%BC%E3%82%B7%E3%83%A7%E3%83%B3%E7%92%B0%E5%A2%83%E6%A7%8B%E7%AF%89%E3%82%AC%E3%82%A4%E3%83%89/" class="md-nav__link">
        
  
  
  <span class="md-ellipsis">
    
  
    TypeScriptアプリケーション環境構築ガイド
  

    
  </span>
  
  

      </a>
    </li>
  

              
            
              
                
  
  
  
  
    <li class="md-nav__item">
      <a href="../../../reference/CodexCLIMCP%E3%82%B5%E3%83%BC%E3%83%90%E3%83%BC%E8%A8%AD%E5%AE%9A%E6%89%8B%E9%A0%86/" class="md-nav__link">
        
  
  
  <span class="md-ellipsis">
    
  
    Codex CLI MCP サーバー設定手順
  

    
  </span>
  
  

      </a>
    </li>
  

              
            
              
                
  
  
  
  
    <li class="md-nav__item">
      <a href="../../../reference/CodexCLIMCP%E3%82%A2%E3%83%97%E3%83%AA%E3%82%B1%E3%83%BC%E3%82%B7%E3%83%A7%E3%83%B3%E9%96%8B%E7%99%BA%E3%83%95%E3%83%AD%E3%83%BC/" class="md-nav__link">
        
  
  
  <span class="md-ellipsis">
    
  
    Codex CLI MCP アプリケーション開発フロー
  

    
  </span>
  
  

      </a>
    </li>
  

              
            
          </ul>
        </nav>
      
    </li>
  

              
            
          </ul>
        </nav>
      
    </li>
  

    
      
      
  
  
  
  
    
    
    
    
      
      
        
      
    
    
    <li class="md-nav__item md-nav__item--nested">
      
        
        
        <input class="md-nav__toggle md-toggle " type="checkbox" id="__nav_7" >
        
          
          <label class="md-nav__link" for="__nav_7" id="__nav_7_label" tabindex="0">
            
  
  
  <span class="md-ellipsis">
    
  
    テンプレート
  

    
  </span>
  
  

            <span class="md-nav__icon md-icon"></span>
          </label>
        
        <nav class="md-nav" data-md-level="1" aria-labelledby="__nav_7_label" aria-expanded="false">
          <label class="md-nav__title" for="__nav_7">
            <span class="md-nav__icon md-icon"></span>
            
  
    テンプレート
  

          </label>
          <ul class="md-nav__list" data-md-scrollfix>
            
              
                
  
  
  
  
    <li class="md-nav__item">
      <a href="../../../template/ADR/" class="md-nav__link">
        
  
  
  <span class="md-ellipsis">
    
  
    ADR
  

    
  </span>
  
  

      </a>
    </li>
  

              
            
              
                
  
  
  
  
    <li class="md-nav__item">
      <a href="../../../template/%E3%82%A4%E3%83%86%E3%83%AC%E3%83%BC%E3%82%B7%E3%83%A7%E3%83%B3%E5%AE%8C%E4%BA%86%E5%A0%B1%E5%91%8A%E6%9B%B8/" class="md-nav__link">
        
  
  
  <span class="md-ellipsis">
    
  
    イテレーション完了報告書
  

    
  </span>
  
  

      </a>
    </li>
  

              
            
              
                
  
  
  
  
    <li class="md-nav__item">
      <a href="../../../template/%E3%82%A4%E3%83%B3%E3%82%BB%E3%83%97%E3%82%B7%E3%83%A7%E3%83%B3%E3%83%87%E3%83%83%E3%82%AD/" class="md-nav__link">
        
  
  
  <span class="md-ellipsis">
    
  
    インセプションデッキ
  

    
  </span>
  
  

      </a>
    </li>
  

              
            
              
                
  
  
  
  
    <li class="md-nav__item">
      <a href="../../../template/%E3%81%BE%E3%81%9A%E3%81%93%E3%82%8C%E3%82%92%E8%AA%AD%E3%82%82%E3%81%86%E3%83%AA%E3%82%B9%E3%83%88/" class="md-nav__link">
        
  
  
  <span class="md-ellipsis">
    
  
    まずこれを読もうリスト
  

    
  </span>
  
  

      </a>
    </li>
  

              
            
              
                
  
  
  
  
    <li class="md-nav__item">
      <a href="../../../template/%E5%AE%8C%E5%85%A8%E5%BD%A2%E5%BC%8F%E3%81%AE%E3%83%A6%E3%83%BC%E3%82%B9%E3%82%B1%E3%83%BC%E3%82%B9/" class="md-nav__link">
        
  
  
  <span class="md-ellipsis">
    
  
    完全形式のユースケース
  

    
  </span>
  
  

      </a>
    </li>
  

              
            
              
                
  
  
  
  
    <li class="md-nav__item">
      <a href="../../../template/%E8%A6%81%E4%BB%B6%E5%AE%9A%E7%BE%A9/" class="md-nav__link">
        
  
  
  <span class="md-ellipsis">
    
  
    要件定義
  

    
  </span>
  
  

      </a>
    </li>
  

              
            
              
                
  
  
  
  
    <li class="md-nav__item">
      <a href="../../../template/%E8%A8%AD%E8%A8%88/" class="md-nav__link">
        
  
  
  <span class="md-ellipsis">
    
  
    設計
  

    
  </span>
  
  

      </a>
    </li>
  

              
            
          </ul>
        </nav>
      
    </li>
  

    
      
      
  
  
  
  
    
    
    
    
      
      
        
      
    
    
    <li class="md-nav__item md-nav__item--nested">
      
        
        
        <input class="md-nav__toggle md-toggle " type="checkbox" id="__nav_8" >
        
          
          <label class="md-nav__link" for="__nav_8" id="__nav_8_label" tabindex="0">
            
  
  
  <span class="md-ellipsis">
    
  
    実践ガイド
  

    
  </span>
  
  

            <span class="md-nav__icon md-icon"></span>
          </label>
        
        <nav class="md-nav" data-md-level="1" aria-labelledby="__nav_8_label" aria-expanded="false">
          <label class="md-nav__title" for="__nav_8">
            <span class="md-nav__icon md-icon"></span>
            
  
    実践ガイド
  

          </label>
          <ul class="md-nav__list" data-md-scrollfix>
            
              
                
  
  
  
  
    <li class="md-nav__item">
      <a href="../../" class="md-nav__link">
        
  
  
  <span class="md-ellipsis">
    
  
    概要
  

    
  </span>
  
  

      </a>
    </li>
  

              
            
              
                
  
  
  
  
    
    
    
    
      
      
        
      
    
    
    <li class="md-nav__item md-nav__item--nested">
      
        
        
        <input class="md-nav__toggle md-toggle " type="checkbox" id="__nav_8_2" >
        
          
          <label class="md-nav__link" for="__nav_8_2" id="__nav_8_2_label" tabindex="0">
            
  
  
  <span class="md-ellipsis">
    
  
    バックエンド編（Java版）
  

    
  </span>
  
  

            <span class="md-nav__icon md-icon"></span>
          </label>
        
        <nav class="md-nav" data-md-level="2" aria-labelledby="__nav_8_2_label" aria-expanded="false">
          <label class="md-nav__title" for="__nav_8_2">
            <span class="md-nav__icon md-icon"></span>
            
  
    バックエンド編（Java版）
  

          </label>
          <ul class="md-nav__list" data-md-scrollfix>
            
              
                
  
  
  
  
    <li class="md-nav__item">
      <a href="../../backend/chapter00/" class="md-nav__link">
        
  
  
  <span class="md-ellipsis">
    
  
    はじめに
  

    
  </span>
  
  

      </a>
    </li>
  

              
            
              
                
  
  
  
  
    <li class="md-nav__item">
      <a href="../../backend/chapter01/" class="md-nav__link">
        
  
  
  <span class="md-ellipsis">
    
  
    第1章
  

    
  </span>
  
  

      </a>
    </li>
  

              
            
              
                
  
  
  
  
    <li class="md-nav__item">
      <a href="../../backend/chapter02/" class="md-nav__link">
        
  
  
  <span class="md-ellipsis">
    
  
    第2章
  

    
  </span>
  
  

      </a>
    </li>
  

              
            
              
                
  
  
  
  
    <li class="md-nav__item">
      <a href="../../backend/chapter03/" class="md-nav__link">
        
  
  
  <span class="md-ellipsis">
    
  
    第3章
  

    
  </span>
  
  

      </a>
    </li>
  

              
            
              
                
  
  
  
  
    <li class="md-nav__item">
      <a href="../../backend/chapter04/" class="md-nav__link">
        
  
  
  <span class="md-ellipsis">
    
  
    第4章
  

    
  </span>
  
  

      </a>
    </li>
  

              
            
              
                
  
  
  
  
    <li class="md-nav__item">
      <a href="../../backend/chapter05/" class="md-nav__link">
        
  
  
  <span class="md-ellipsis">
    
  
    第5章
  

    
  </span>
  
  

      </a>
    </li>
  

              
            
              
                
  
  
  
  
    <li class="md-nav__item">
      <a href="../../backend/chapter06/" class="md-nav__link">
        
  
  
  <span class="md-ellipsis">
    
  
    第6章
  

    
  </span>
  
  

      </a>
    </li>
  

              
            
              
                
  
  
  
  
    <li class="md-nav__item">
      <a href="../../backend/chapter07/" class="md-nav__link">
        
  
  
  <span class="md-ellipsis">
    
  
    第7章
  

    
  </span>
  
  

      </a>
    </li>
  

              
            
              
                
  
  
  
  
    <li class="md-nav__item">
      <a href="../../backend/chapter08/" class="md-nav__link">
        
  
  
  <span class="md-ellipsis">
    
  
    第8章
  

    
  </span>
  
  

      </a>
    </li>
  

              
            
              
                
  
  
  
  
    <li class="md-nav__item">
      <a href="../../backend/chapter09/" class="md-nav__link">
        
  
  
  <span class="md-ellipsis">
    
  
    第9章
  

    
  </span>
  
  

      </a>
    </li>
  

              
            
              
                
  
  
  
  
    <li class="md-nav__item">
      <a href="../../backend/chapter10/" class="md-nav__link">
        
  
  
  <span class="md-ellipsis">
    
  
    第10章
  

    
  </span>
  
  

      </a>
    </li>
  

              
            
              
                
  
  
  
  
    <li class="md-nav__item">
      <a href="../../backend/chapter11/" class="md-nav__link">
        
  
  
  <span class="md-ellipsis">
    
  
    第11章
  

    
  </span>
  
  

      </a>
    </li>
  

              
            
              
                
  
  
  
  
    <li class="md-nav__item">
      <a href="../../backend/chapter12/" class="md-nav__link">
        
  
  
  <span class="md-ellipsis">
    
  
    第12章
  

    
  </span>
  
  

      </a>
    </li>
  

              
            
              
                
  
  
  
  
    <li class="md-nav__item">
      <a href="../../backend/chapter13/" class="md-nav__link">
        
  
  
  <span class="md-ellipsis">
    
  
    第13章
  

    
  </span>
  
  

      </a>
    </li>
  

              
            
              
                
  
  
  
  
    <li class="md-nav__item">
      <a href="../../backend/chapter14/" class="md-nav__link">
        
  
  
  <span class="md-ellipsis">
    
  
    第14章
  

    
  </span>
  
  

      </a>
    </li>
  

              
            
              
                
  
  
  
  
    <li class="md-nav__item">
      <a href="../../backend/chapter15/" class="md-nav__link">
        
  
  
  <span class="md-ellipsis">
    
  
    第15章
  

    
  </span>
  
  

      </a>
    </li>
  

              
            
              
                
  
  
  
  
    <li class="md-nav__item">
      <a href="../../backend/chapter16/" class="md-nav__link">
        
  
  
  <span class="md-ellipsis">
    
  
    第16章
  

    
  </span>
  
  

      </a>
    </li>
  

              
            
              
                
  
  
  
  
    <li class="md-nav__item">
      <a href="../../backend/chapter17/" class="md-nav__link">
        
  
  
  <span class="md-ellipsis">
    
  
    第17章
  

    
  </span>
  
  

      </a>
    </li>
  

              
            
              
                
  
  
  
  
    <li class="md-nav__item">
      <a href="../../backend/chapter18/" class="md-nav__link">
        
  
  
  <span class="md-ellipsis">
    
  
    第18章
  

    
  </span>
  
  

      </a>
    </li>
  

              
            
              
                
  
  
  
  
    <li class="md-nav__item">
      <a href="../../backend/chapter19/" class="md-nav__link">
        
  
  
  <span class="md-ellipsis">
    
  
    第19章
  

    
  </span>
  
  

      </a>
    </li>
  

              
            
              
                
  
  
  
  
    <li class="md-nav__item">
      <a href="../../backend/chapter20/" class="md-nav__link">
        
  
  
  <span class="md-ellipsis">
    
  
    第20章
  

    
  </span>
  
  

      </a>
    </li>
  

              
            
              
                
  
  
  
  
    <li class="md-nav__item">
      <a href="../../backend/chapter21/" class="md-nav__link">
        
  
  
  <span class="md-ellipsis">
    
  
    第21章
  

    
  </span>
  
  

      </a>
    </li>
  

              
            
              
                
  
  
  
  
    <li class="md-nav__item">
      <a href="../../backend/chapter22/" class="md-nav__link">
        
  
  
  <span class="md-ellipsis">
    
  
    第22章
  

    
  </span>
  
  

      </a>
    </li>
  

              
            
              
                
  
  
  
  
    <li class="md-nav__item">
      <a href="../../backend/chapter23/" class="md-nav__link">
        
  
  
  <span class="md-ellipsis">
    
  
    第23章
  

    
  </span>
  
  

      </a>
    </li>
  

              
            
              
                
  
  
  
  
    <li class="md-nav__item">
      <a href="../../backend/chapter24/" class="md-nav__link">
        
  
  
  <span class="md-ellipsis">
    
  
    第24章
  

    
  </span>
  
  

      </a>
    </li>
  

              
            
              
                
  
  
  
  
    <li class="md-nav__item">
      <a href="../../backend/chapter25/" class="md-nav__link">
        
  
  
  <span class="md-ellipsis">
    
  
    第25章
  

    
  </span>
  
  

      </a>
    </li>
  

              
            
              
                
  
  
  
  
    <li class="md-nav__item">
      <a href="../../backend/chapter26/" class="md-nav__link">
        
  
  
  <span class="md-ellipsis">
    
  
    第26章
  

    
  </span>
  
  

      </a>
    </li>
  

              
            
              
                
  
  
  
  
    <li class="md-nav__item">
      <a href="../../backend/chapter27/" class="md-nav__link">
        
  
  
  <span class="md-ellipsis">
    
  
    第27章
  

    
  </span>
  
  

      </a>
    </li>
  

              
            
              
                
  
  
  
  
    <li class="md-nav__item">
      <a href="../../backend/chapter28/" class="md-nav__link">
        
  
  
  <span class="md-ellipsis">
    
  
    第28章
  

    
  </span>
  
  

      </a>
    </li>
  

              
            
              
                
  
  
  
  
    <li class="md-nav__item">
      <a href="../../backend/chapter29/" class="md-nav__link">
        
  
  
  <span class="md-ellipsis">
    
  
    第29章
  

    
  </span>
  
  

      </a>
    </li>
  

              
            
              
                
  
  
  
  
    <li class="md-nav__item">
      <a href="../../backend/chapter30/" class="md-nav__link">
        
  
  
  <span class="md-ellipsis">
    
  
    第30章
  

    
  </span>
  
  

      </a>
    </li>
  

              
            
              
                
  
  
  
  
    <li class="md-nav__item">
      <a href="../../backend/chapter31/" class="md-nav__link">
        
  
  
  <span class="md-ellipsis">
    
  
    第31章
  

    
  </span>
  
  

      </a>
    </li>
  

              
            
              
                
  
  
  
  
    <li class="md-nav__item">
      <a href="../../backend/chapter32/" class="md-nav__link">
        
  
  
  <span class="md-ellipsis">
    
  
    第32章
  

    
  </span>
  
  

      </a>
    </li>
  

              
            
          </ul>
        </nav>
      
    </li>
  

              
            
              
                
  
  
  
  
    
    
    
    
      
      
        
      
    
    
    <li class="md-nav__item md-nav__item--nested">
      
        
        
        <input class="md-nav__toggle md-toggle " type="checkbox" id="__nav_8_3" >
        
          
          <label class="md-nav__link" for="__nav_8_3" id="__nav_8_3_label" tabindex="0">
            
  
  
  <span class="md-ellipsis">
    
  
    フロントエンド編（React版）
  

    
  </span>
  
  

            <span class="md-nav__icon md-icon"></span>
          </label>
        
        <nav class="md-nav" data-md-level="2" aria-labelledby="__nav_8_3_label" aria-expanded="false">
          <label class="md-nav__title" for="__nav_8_3">
            <span class="md-nav__icon md-icon"></span>
            
  
    フロントエンド編（React版）
  

          </label>
          <ul class="md-nav__list" data-md-scrollfix>
            
              
                
  
  
  
  
    <li class="md-nav__item">
      <a href="../../frontend/chapter00/" class="md-nav__link">
        
  
  
  <span class="md-ellipsis">
    
  
    はじめに
  

    
  </span>
  
  

      </a>
    </li>
  

              
            
              
                
  
  
  
  
    <li class="md-nav__item">
      <a href="../../frontend/chapter01/" class="md-nav__link">
        
  
  
  <span class="md-ellipsis">
    
  
    第1章
  

    
  </span>
  
  

      </a>
    </li>
  

              
            
              
                
  
  
  
  
    <li class="md-nav__item">
      <a href="../../frontend/chapter02/" class="md-nav__link">
        
  
  
  <span class="md-ellipsis">
    
  
    第2章
  

    
  </span>
  
  

      </a>
    </li>
  

              
            
              
                
  
  
  
  
    <li class="md-nav__item">
      <a href="../../frontend/chapter03/" class="md-nav__link">
        
  
  
  <span class="md-ellipsis">
    
  
    第3章
  

    
  </span>
  
  

      </a>
    </li>
  

              
            
              
                
  
  
  
  
    <li class="md-nav__item">
      <a href="../../frontend/chapter04/" class="md-nav__link">
        
  
  
  <span class="md-ellipsis">
    
  
    第4章
  

    
  </span>
  
  

      </a>
    </li>
  

              
            
              
                
  
  
  
  
    <li class="md-nav__item">
      <a href="../../frontend/chapter05/" class="md-nav__link">
        
  
  
  <span class="md-ellipsis">
    
  
    第5章
  

    
  </span>
  
  

      </a>
    </li>
  

              
            
              
                
  
  
  
  
    <li class="md-nav__item">
      <a href="../../frontend/chapter06/" class="md-nav__link">
        
  
  
  <span class="md-ellipsis">
    
  
    第6章
  

    
  </span>
  
  

      </a>
    </li>
  

              
            
              
                
  
  
  
  
    <li class="md-nav__item">
      <a href="../../frontend/chapter07/" class="md-nav__link">
        
  
  
  <span class="md-ellipsis">
    
  
    第7章
  

    
  </span>
  
  

      </a>
    </li>
  

              
            
              
                
  
  
  
  
    <li class="md-nav__item">
      <a href="../../frontend/chapter08/" class="md-nav__link">
        
  
  
  <span class="md-ellipsis">
    
  
    第8章
  

    
  </span>
  
  

      </a>
    </li>
  

              
            
              
                
  
  
  
  
    <li class="md-nav__item">
      <a href="../../frontend/chapter09/" class="md-nav__link">
        
  
  
  <span class="md-ellipsis">
    
  
    第9章
  

    
  </span>
  
  

      </a>
    </li>
  

              
            
              
                
  
  
  
  
    <li class="md-nav__item">
      <a href="../../frontend/chapter10/" class="md-nav__link">
        
  
  
  <span class="md-ellipsis">
    
  
    第10章
  

    
  </span>
  
  

      </a>
    </li>
  

              
            
              
                
  
  
  
  
    <li class="md-nav__item">
      <a href="../../frontend/chapter11/" class="md-nav__link">
        
  
  
  <span class="md-ellipsis">
    
  
    第11章
  

    
  </span>
  
  

      </a>
    </li>
  

              
            
              
                
  
  
  
  
    <li class="md-nav__item">
      <a href="../../frontend/chapter12/" class="md-nav__link">
        
  
  
  <span class="md-ellipsis">
    
  
    第12章
  

    
  </span>
  
  

      </a>
    </li>
  

              
            
              
                
  
  
  
  
    <li class="md-nav__item">
      <a href="../../frontend/chapter13/" class="md-nav__link">
        
  
  
  <span class="md-ellipsis">
    
  
    第13章
  

    
  </span>
  
  

      </a>
    </li>
  

              
            
              
                
  
  
  
  
    <li class="md-nav__item">
      <a href="../../frontend/chapter14/" class="md-nav__link">
        
  
  
  <span class="md-ellipsis">
    
  
    第14章
  

    
  </span>
  
  

      </a>
    </li>
  

              
            
              
                
  
  
  
  
    <li class="md-nav__item">
      <a href="../../frontend/chapter15/" class="md-nav__link">
        
  
  
  <span class="md-ellipsis">
    
  
    第15章
  

    
  </span>
  
  

      </a>
    </li>
  

              
            
              
                
  
  
  
  
    <li class="md-nav__item">
      <a href="../../frontend/chapter16/" class="md-nav__link">
        
  
  
  <span class="md-ellipsis">
    
  
    第16章
  

    
  </span>
  
  

      </a>
    </li>
  

              
            
              
                
  
  
  
  
    <li class="md-nav__item">
      <a href="../../frontend/chapter17/" class="md-nav__link">
        
  
  
  <span class="md-ellipsis">
    
  
    第17章
  

    
  </span>
  
  

      </a>
    </li>
  

              
            
              
                
  
  
  
  
    <li class="md-nav__item">
      <a href="../../frontend/chapter18/" class="md-nav__link">
        
  
  
  <span class="md-ellipsis">
    
  
    第18章
  

    
  </span>
  
  

      </a>
    </li>
  

              
            
              
                
  
  
  
  
    <li class="md-nav__item">
      <a href="../../frontend/chapter19/" class="md-nav__link">
        
  
  
  <span class="md-ellipsis">
    
  
    第19章
  

    
  </span>
  
  

      </a>
    </li>
  

              
            
              
                
  
  
  
  
    <li class="md-nav__item">
      <a href="../../frontend/chapter20/" class="md-nav__link">
        
  
  
  <span class="md-ellipsis">
    
  
    第20章
  

    
  </span>
  
  

      </a>
    </li>
  

              
            
              
                
  
  
  
  
    <li class="md-nav__item">
      <a href="../../frontend/chapter21/" class="md-nav__link">
        
  
  
  <span class="md-ellipsis">
    
  
    第21章
  

    
  </span>
  
  

      </a>
    </li>
  

              
            
              
                
  
  
  
  
    <li class="md-nav__item">
      <a href="../../frontend/chapter22/" class="md-nav__link">
        
  
  
  <span class="md-ellipsis">
    
  
    第22章
  

    
  </span>
  
  

      </a>
    </li>
  

              
            
              
                
  
  
  
  
    <li class="md-nav__item">
      <a href="../../frontend/chapter23/" class="md-nav__link">
        
  
  
  <span class="md-ellipsis">
    
  
    第23章
  

    
  </span>
  
  

      </a>
    </li>
  

              
            
              
                
  
  
  
  
    <li class="md-nav__item">
      <a href="../../frontend/chapter24/" class="md-nav__link">
        
  
  
  <span class="md-ellipsis">
    
  
    第24章
  

    
  </span>
  
  

      </a>
    </li>
  

              
            
          </ul>
        </nav>
      
    </li>
  

              
            
          </ul>
        </nav>
      
    </li>
  

    
      
      
  
  
    
  
  
  
    
    
    
    
      
        
        
      
      
        
      
    
    
    <li class="md-nav__item md-nav__item--active md-nav__item--section md-nav__item--nested">
      
        
        
        <input class="md-nav__toggle md-toggle " type="checkbox" id="__nav_9" checked>
        
          
          <label class="md-nav__link" for="__nav_9" id="__nav_9_label" tabindex="">
            
  
  
  <span class="md-ellipsis">
    
  
    関数型プログラミング実践ガイド
  

    
  </span>
  
  

            <span class="md-nav__icon md-icon"></span>
          </label>
        
        <nav class="md-nav" data-md-level="1" aria-labelledby="__nav_9_label" aria-expanded="true">
          <label class="md-nav__title" for="__nav_9">
            <span class="md-nav__icon md-icon"></span>
            
  
    関数型プログラミング実践ガイド
  

          </label>
          <ul class="md-nav__list" data-md-scrollfix>
            
              
                
  
  
    
  
  
  
    
    
    
    
      
      
        
          
          
        
      
    
    
    <li class="md-nav__item md-nav__item--active md-nav__item--section md-nav__item--nested">
      
        
        
        <input class="md-nav__toggle md-toggle " type="checkbox" id="__nav_9_1" checked>
        
          
          <label class="md-nav__link" for="__nav_9_1" id="__nav_9_1_label" tabindex="">
            
  
  
  <span class="md-ellipsis">
    
  
    関数型プログラミング（Java版）
  

    
  </span>
  
  

            <span class="md-nav__icon md-icon"></span>
          </label>
        
        <nav class="md-nav" data-md-level="2" aria-labelledby="__nav_9_1_label" aria-expanded="true">
          <label class="md-nav__title" for="__nav_9_1">
            <span class="md-nav__icon md-icon"></span>
            
  
    関数型プログラミング（Java版）
  

          </label>
          <ul class="md-nav__list" data-md-scrollfix>
            
              
                
  
  
  
  
    <li class="md-nav__item">
      <a href="../" class="md-nav__link">
        
  
  
  <span class="md-ellipsis">
    
  
    はじめに
  

    
  </span>
  
  

      </a>
    </li>
  

              
            
              
                
  
  
  
  
    <li class="md-nav__item">
      <a href="../part-1/" class="md-nav__link">
        
  
  
  <span class="md-ellipsis">
    
  
    Part I 基礎
  

    
  </span>
  
  

      </a>
    </li>
  

              
            
              
                
  
  
  
  
    <li class="md-nav__item">
      <a href="../part-2/" class="md-nav__link">
        
  
  
  <span class="md-ellipsis">
    
  
    Part II 関数型スタイル
  

    
  </span>
  
  

      </a>
    </li>
  

              
            
              
                
  
  
  
  
    <li class="md-nav__item">
      <a href="../part-3/" class="md-nav__link">
        
  
  
  <span class="md-ellipsis">
    
  
    Part III エラーハンドリング
  

    
  </span>
  
  

      </a>
    </li>
  

              
            
              
                
  
  
  
  
    <li class="md-nav__item">
      <a href="../part-4/" class="md-nav__link">
        
  
  
  <span class="md-ellipsis">
    
  
    Part IV IO と副作用
  

    
  </span>
  
  

      </a>
    </li>
  

              
            
              
                
  
  
  
  
    <li class="md-nav__item">
      <a href="../part-5/" class="md-nav__link">
        
  
  
  <span class="md-ellipsis">
    
  
    Part V 並行処理
  

    
  </span>
  
  

      </a>
    </li>
  

              
            
              
                
  
  
    
  
  
  
    <li class="md-nav__item md-nav__item--active">
      
      <input class="md-nav__toggle md-toggle" type="checkbox" id="__toc">
      
      
        
      
      
        <label class="md-nav__link md-nav__link--active" for="__toc">
          
  
  
  <span class="md-ellipsis">
    
  
    Part VI 実践
  

    
  </span>
  
  

          <span class="md-nav__icon md-icon"></span>
        </label>
      
      <a href="./" class="md-nav__link md-nav__link--active">
        
  
  
  <span class="md-ellipsis">
    
  
    Part VI 実践
  

    
  </span>
  
  

      </a>
      
        

<nav class="md-nav md-nav--secondary" aria-label="Table of contents">
  
  
  
    
  
  
    <label class="md-nav__title" for="__toc">
      <span class="md-nav__icon md-icon"></span>
      Table of contents
    </label>
    <ul class="md-nav__list" data-md-component="toc" data-md-scrollfix>
      
        <li class="md-nav__item">
  <a href="#11" class="md-nav__link">
    <span class="md-ellipsis">
      
        第11章: 実践的なアプリケーション構築
      
    </span>
  </a>
  
    <nav class="md-nav" aria-label="第11章: 実践的なアプリケーション構築">
      <ul class="md-nav__list">
        
          <li class="md-nav__item">
  <a href="#111-travelguide" class="md-nav__link">
    <span class="md-ellipsis">
      
        11.1 TravelGuide アプリケーション
      
    </span>
  </a>
  
</li>
        
          <li class="md-nav__item">
  <a href="#112" class="md-nav__link">
    <span class="md-ellipsis">
      
        11.2 ドメインモデルの定義
      
    </span>
  </a>
  
</li>
        
          <li class="md-nav__item">
  <a href="#113" class="md-nav__link">
    <span class="md-ellipsis">
      
        11.3 データアクセス層の抽象化
      
    </span>
  </a>
  
</li>
        
          <li class="md-nav__item">
  <a href="#114-resource" class="md-nav__link">
    <span class="md-ellipsis">
      
        11.4 Resource によるリソース管理
      
    </span>
  </a>
  
    <nav class="md-nav" aria-label="11.4 Resource によるリソース管理">
      <ul class="md-nav__list">
        
          <li class="md-nav__item">
  <a href="#resource" class="md-nav__link">
    <span class="md-ellipsis">
      
        Resource の使用例
      
    </span>
  </a>
  
</li>
        
          <li class="md-nav__item">
  <a href="#guarantee" class="md-nav__link">
    <span class="md-ellipsis">
      
        guarantee メソッド
      
    </span>
  </a>
  
</li>
        
      </ul>
    </nav>
  
</li>
        
          <li class="md-nav__item">
  <a href="#115" class="md-nav__link">
    <span class="md-ellipsis">
      
        11.5 キャッシュの実装
      
    </span>
  </a>
  
</li>
        
          <li class="md-nav__item">
  <a href="#116" class="md-nav__link">
    <span class="md-ellipsis">
      
        11.6 ガイドスコアの計算
      
    </span>
  </a>
  
</li>
        
          <li class="md-nav__item">
  <a href="#117" class="md-nav__link">
    <span class="md-ellipsis">
      
        11.7 アプリケーションの組み立て
      
    </span>
  </a>
  
    <nav class="md-nav" aria-label="11.7 アプリケーションの組み立て">
      <ul class="md-nav__list">
        
          <li class="md-nav__item">
  <a href="#1" class="md-nav__link">
    <span class="md-ellipsis">
      
        バージョン 1: 基本的な実装
      
    </span>
  </a>
  
</li>
        
          <li class="md-nav__item">
  <a href="#2" class="md-nav__link">
    <span class="md-ellipsis">
      
        バージョン 2: 複数候補からベストを選択
      
    </span>
  </a>
  
</li>
        
          <li class="md-nav__item">
  <a href="#3" class="md-nav__link">
    <span class="md-ellipsis">
      
        バージョン 3: エラーハンドリング付き
      
    </span>
  </a>
  
</li>
        
      </ul>
    </nav>
  
</li>
        
          <li class="md-nav__item">
  <a href="#118-attempt" class="md-nav__link">
    <span class="md-ellipsis">
      
        11.8 attempt メソッドによるエラーハンドリング
      
    </span>
  </a>
  
</li>
        
      </ul>
    </nav>
  
</li>
      
        <li class="md-nav__item">
  <a href="#12" class="md-nav__link">
    <span class="md-ellipsis">
      
        第12章: テスト戦略
      
    </span>
  </a>
  
    <nav class="md-nav" aria-label="第12章: テスト戦略">
      <ul class="md-nav__list">
        
          <li class="md-nav__item">
  <a href="#121" class="md-nav__link">
    <span class="md-ellipsis">
      
        12.1 関数型プログラミングのテスト
      
    </span>
  </a>
  
</li>
        
          <li class="md-nav__item">
  <a href="#122-searchreport" class="md-nav__link">
    <span class="md-ellipsis">
      
        12.2 SearchReport の導入
      
    </span>
  </a>
  
</li>
        
          <li class="md-nav__item">
  <a href="#123-testdataaccess-" class="md-nav__link">
    <span class="md-ellipsis">
      
        12.3 TestDataAccess - テスト用スタブ
      
    </span>
  </a>
  
    <nav class="md-nav" aria-label="12.3 TestDataAccess - テスト用スタブ">
      <ul class="md-nav__list">
        
          <li class="md-nav__item">
  <a href="#testdataaccess" class="md-nav__link">
    <span class="md-ellipsis">
      
        TestDataAccess の使用例
      
    </span>
  </a>
  
</li>
        
      </ul>
    </nav>
  
</li>
        
          <li class="md-nav__item">
  <a href="#124" class="md-nav__link">
    <span class="md-ellipsis">
      
        12.4 プロパティベーステスト
      
    </span>
  </a>
  
</li>
        
          <li class="md-nav__item">
  <a href="#125" class="md-nav__link">
    <span class="md-ellipsis">
      
        12.5 不変条件のテスト
      
    </span>
  </a>
  
</li>
        
          <li class="md-nav__item">
  <a href="#126" class="md-nav__link">
    <span class="md-ellipsis">
      
        12.6 純粋関数のプロパティテスト
      
    </span>
  </a>
  
</li>
        
          <li class="md-nav__item">
  <a href="#127" class="md-nav__link">
    <span class="md-ellipsis">
      
        12.7 キャッシュのテスト
      
    </span>
  </a>
  
</li>
        
          <li class="md-nav__item">
  <a href="#128-resource" class="md-nav__link">
    <span class="md-ellipsis">
      
        12.8 Resource のテスト
      
    </span>
  </a>
  
</li>
        
          <li class="md-nav__item">
  <a href="#129" class="md-nav__link">
    <span class="md-ellipsis">
      
        12.9 テストピラミッド
      
    </span>
  </a>
  
</li>
        
      </ul>
    </nav>
  
</li>
      
        <li class="md-nav__item">
  <a href="#_1" class="md-nav__link">
    <span class="md-ellipsis">
      
        まとめ
      
    </span>
  </a>
  
    <nav class="md-nav" aria-label="まとめ">
      <ul class="md-nav__list">
        
          <li class="md-nav__item">
  <a href="#part-vi_1" class="md-nav__link">
    <span class="md-ellipsis">
      
        Part VI で学んだこと
      
    </span>
  </a>
  
</li>
        
          <li class="md-nav__item">
  <a href="#_2" class="md-nav__link">
    <span class="md-ellipsis">
      
        キーポイント
      
    </span>
  </a>
  
</li>
        
          <li class="md-nav__item">
  <a href="#_3" class="md-nav__link">
    <span class="md-ellipsis">
      
        学習の総括
      
    </span>
  </a>
  
</li>
        
          <li class="md-nav__item">
  <a href="#scala" class="md-nav__link">
    <span class="md-ellipsis">
      
        Scala との比較
      
    </span>
  </a>
  
</li>
        
      </ul>
    </nav>
  
</li>
      
        <li class="md-nav__item">
  <a href="#_4" class="md-nav__link">
    <span class="md-ellipsis">
      
        演習問題
      
    </span>
  </a>
  
    <nav class="md-nav" aria-label="演習問題">
      <ul class="md-nav__list">
        
          <li class="md-nav__item">
  <a href="#1-dataaccess" class="md-nav__link">
    <span class="md-ellipsis">
      
        問題 1: DataAccess の拡張
      
    </span>
  </a>
  
</li>
        
          <li class="md-nav__item">
  <a href="#2_1" class="md-nav__link">
    <span class="md-ellipsis">
      
        問題 2: プロパティベーステスト
      
    </span>
  </a>
  
</li>
        
          <li class="md-nav__item">
  <a href="#3-resource" class="md-nav__link">
    <span class="md-ellipsis">
      
        問題 3: Resource の実装
      
    </span>
  </a>
  
</li>
        
      </ul>
    </nav>
  
</li>
      
        <li class="md-nav__item">
  <a href="#_5" class="md-nav__link">
    <span class="md-ellipsis">
      
        シリーズ全体の総括
      
    </span>
  </a>
  
    <nav class="md-nav" aria-label="シリーズ全体の総括">
      <ul class="md-nav__list">
        
          <li class="md-nav__item">
  <a href="#_6" class="md-nav__link">
    <span class="md-ellipsis">
      
        学んだ主な概念
      
    </span>
  </a>
  
</li>
        
          <li class="md-nav__item">
  <a href="#_7" class="md-nav__link">
    <span class="md-ellipsis">
      
        関数型プログラミングの利点
      
    </span>
  </a>
  
</li>
        
          <li class="md-nav__item">
  <a href="#_8" class="md-nav__link">
    <span class="md-ellipsis">
      
        次のステップ
      
    </span>
  </a>
  
</li>
        
      </ul>
    </nav>
  
</li>
      
    </ul>
  
</nav>
      
    </li>
  

              
            
          </ul>
        </nav>
      
    </li>
  

              
            
          </ul>
        </nav>
      
    </li>
  

    
  </ul>
</nav>
                  </div>
                </div>
              </div>
            
            
          
          
            <div class="md-content" data-md-component="content">
              
              <article class="md-content__inner md-typeset">
                
                  


  
  


<h1 id="part-vi">Part VI: 実践的なアプリケーション構築とテスト<a class="headerlink" href="#part-vi" title="Permanent link">&para;</a></h1>
<p>本章では、これまで学んだ関数型プログラミングの概念を統合し、実践的なアプリケーションを構築します。また、関数型プログラミングにおけるテスト戦略についても学びます。</p>
<hr />
<h2 id="11">第11章: 実践的なアプリケーション構築<a class="headerlink" href="#11" title="Permanent link">&para;</a></h2>
<h3 id="111-travelguide">11.1 TravelGuide アプリケーション<a class="headerlink" href="#111-travelguide" title="Permanent link">&para;</a></h3>
<p>旅行ガイドアプリケーションを例に、実践的な FP アプリケーションの構築方法を学びます。</p>
<p><img src="data:image/svg+xml;base64,PD9wbGFudHVtbCAxLjIwMjYuMT8+PHN2ZyB4bWxucz0iaHR0cDovL3d3dy53My5vcmcvMjAwMC9zdmciIHhtbG5zOnhsaW5rPSJodHRwOi8vd3d3LnczLm9yZy8xOTk5L3hsaW5rIiBjb250ZW50U3R5bGVUeXBlPSJ0ZXh0L2NzcyIgZGF0YS1kaWFncmFtLXR5cGU9IkNMQVNTIiBoZWlnaHQ9IjM2NXB4IiBwcmVzZXJ2ZUFzcGVjdFJhdGlvPSJub25lIiBzdHlsZT0id2lkdGg6ODgwcHg7aGVpZ2h0OjM2NXB4O2JhY2tncm91bmQ6I0ZGRkZGRjsiIHZlcnNpb249IjEuMSIgdmlld0JveD0iMCAwIDg4MCAzNjUiIHdpZHRoPSI4ODBweCIgem9vbUFuZFBhbj0ibWFnbmlmeSI+PGRlZnMvPjxnPjwhLS1jbHVzdGVyIFRyYXZlbEd1aWRlIEFwcGxpY2F0aW9uLS0+PGcgY2xhc3M9ImNsdXN0ZXIiIGRhdGEtcXVhbGlmaWVkLW5hbWU9IlRyYXZlbEd1aWRlIEFwcGxpY2F0aW9uIiBkYXRhLXNvdXJjZS1saW5lPSIzIiBpZD0iZW50MDAwMiI+PHBhdGggZD0iTTEzLjUsMTEgTDIwMy43NjY2LDExIEEzLjc1LDMuNzUgMCAwIDEgMjA2LjI2NjYsMTMuNSBMMjEzLjI2NjYsMzMuMjk2OSBMODcwLjUsMzMuMjk2OSBBMi41LDIuNSAwIDAgMSA4NzMsMzUuNzk2OSBMODczLDM1NS45OCBBMi41LDIuNSAwIDAgMSA4NzAuNSwzNTguNDggTDEzLjUsMzU4LjQ4IEEyLjUsMi41IDAgMCAxIDExLDM1NS45OCBMMTEsMTMuNSBBMi41LDIuNSAwIDAgMSAxMy41LDExIiBmaWxsPSIjRkZGRkZGIiBzdHlsZT0ic3Ryb2tlOiMwMDAwMDA7c3Ryb2tlLXdpZHRoOjE7Ii8+PGxpbmUgc3R5bGU9InN0cm9rZTojMDAwMDAwO3N0cm9rZS13aWR0aDoxOyIgeDE9IjExIiB4Mj0iMjEzLjI2NjYiIHkxPSIzMy4yOTY5IiB5Mj0iMzMuMjk2OSIvPjx0ZXh0IGZpbGw9IiMwMDAwMDAiIGZvbnQtZmFtaWx5PSJWZXJkYW5hIiBmb250LXNpemU9IjE0IiBmb250LXdlaWdodD0iYm9sZCIgbGVuZ3RoQWRqdXN0PSJzcGFjaW5nIiB0ZXh0TGVuZ3RoPSIxODkuMjY2NiIgeD0iMTUiIHk9IjI1Ljk5NTEiPlRyYXZlbEd1aWRlIEFwcGxpY2F0aW9uPC90ZXh0PjwvZz48IS0tY2x1c3RlciBNb2RlbC0tPjxnIGNsYXNzPSJjbHVzdGVyIiBkYXRhLXF1YWxpZmllZC1uYW1lPSJUcmF2ZWxHdWlkZSBBcHBsaWNhdGlvbi5Nb2RlbCIgZGF0YS1zb3VyY2UtbGluZT0iNCIgaWQ9ImVudDAwMDMiPjxyZWN0IGZpbGw9IiNGRkZGRkYiIGhlaWdodD0iMjgwLjQ4IiByeD0iMi41IiByeT0iMi41IiBzdHlsZT0ic3Ryb2tlOiMwMDAwMDA7c3Ryb2tlLXdpZHRoOjE7IiB3aWR0aD0iMzkxIiB4PSIzNSIgeT0iNTQiLz48dGV4dCBmaWxsPSIjMDAwMDAwIiBmb250LWZhbWlseT0iVmVyZGFuYSIgZm9udC1zaXplPSIxNCIgZm9udC13ZWlnaHQ9ImJvbGQiIGxlbmd0aEFkanVzdD0ic3BhY2luZyIgdGV4dExlbmd0aD0iNDcuODY1MiIgeD0iMjA2LjU2NzQiIHk9IjY4Ljk5NTEiPk1vZGVsPC90ZXh0PjwvZz48IS0tY2x1c3RlciBEYXRhIEFjY2Vzcy0tPjxnIGNsYXNzPSJjbHVzdGVyIiBkYXRhLXF1YWxpZmllZC1uYW1lPSJUcmF2ZWxHdWlkZSBBcHBsaWNhdGlvbi5EYXRhIEFjY2VzcyIgZGF0YS1zb3VyY2UtbGluZT0iMjMiIGlkPSJlbnQwMDA3Ij48cmVjdCBmaWxsPSIjRkZGRkZGIiBoZWlnaHQ9IjI2NC4xOCIgcng9IjIuNSIgcnk9IjIuNSIgc3R5bGU9InN0cm9rZTojMDAwMDAwO3N0cm9rZS13aWR0aDoxOyIgd2lkdGg9IjM5OSIgeD0iNDUwIiB5PSI1NCIvPjx0ZXh0IGZpbGw9IiMwMDAwMDAiIGZvbnQtZmFtaWx5PSJWZXJkYW5hIiBmb250LXNpemU9IjE0IiBmb250LXdlaWdodD0iYm9sZCIgbGVuZ3RoQWRqdXN0PSJzcGFjaW5nIiB0ZXh0TGVuZ3RoPSI5NS42NzU4IiB4PSI2MDEuNjYyMSIgeT0iNjguOTk1MSI+RGF0YSBBY2Nlc3M8L3RleHQ+PC9nPjwhLS1jbGFzcyBMb2NhdGlvbi0tPjxnIGNsYXNzPSJlbnRpdHkiIGRhdGEtcXVhbGlmaWVkLW5hbWU9IlRyYXZlbEd1aWRlIEFwcGxpY2F0aW9uLk1vZGVsLkxvY2F0aW9uIiBkYXRhLXNvdXJjZS1saW5lPSI1IiBpZD0iZW50MDAwNCI+PHJlY3QgZmlsbD0iI0ZGRkZGRiIgaGVpZ2h0PSI5Mi44OTA2IiByeD0iMi41IiByeT0iMi41IiBzdHlsZT0ic3Ryb2tlOiMwMDAwMDA7c3Ryb2tlLXdpZHRoOjE7IiB3aWR0aD0iMTEzLjkxNyIgeD0iNTEuMDQiIHk9Ijg5Ii8+PGVsbGlwc2UgY3g9Ijc1Ljk0NjEiIGN5PSIxMDMiIGZpbGw9IiNGRkZGRkYiIHJ4PSI5IiByeT0iOSIgc3R5bGU9InN0cm9rZTojMDAwMDAwO3N0cm9rZS13aWR0aDoxOyIvPjxwYXRoIGQ9Ik03OC45MTQ5LDEwOC42NDA2IFE3OC4zMzY3LDEwOC45Mzc1IDc3LjY5NjEsMTA5LjA3ODEgUTc3LjA1NTUsMTA5LjIzNDQgNzYuMzUyNCwxMDkuMjM0NCBRNzMuODUyNCwxMDkuMjM0NCA3Mi41MjQyLDEwNy41OTM4IFE3MS4yMTE3LDEwNS45Mzc1IDcxLjIxMTcsMTAyLjgxMjUgUTcxLjIxMTcsOTkuNjg3NSA3Mi41MjQyLDk4LjAzMTMgUTczLjg1MjQsOTYuMzc1IDc2LjM1MjQsOTYuMzc1IFE3Ny4wNTU1LDk2LjM3NSA3Ny42OTYxLDk2LjUzMTMgUTc4LjM1MjQsOTYuNjg3NSA3OC45MTQ5LDk2Ljk4NDQgTDc4LjkxNDksOTkuNzAzMSBRNzguMjg5OSw5OS4xMjUgNzcuNjk2MSw5OC44NTk0IFE3Ny4xMDI0LDk4LjU3ODEgNzYuNDc3NCw5OC41NzgxIFE3NS4xMzM2LDk4LjU3ODEgNzQuNDQ2MSw5OS42NTYzIFE3My43NTg2LDEwMC43MTg4IDczLjc1ODYsMTAyLjgxMjUgUTczLjc1ODYsMTA0LjkwNjMgNzQuNDQ2MSwxMDUuOTg0NCBRNzUuMTMzNiwxMDcuMDQ2OSA3Ni40Nzc0LDEwNy4wNDY5IFE3Ny4xMDI0LDEwNy4wNDY5IDc3LjY5NjEsMTA2Ljc4MTMgUTc4LjI4OTksMTA2LjUgNzguOTE0OSwxMDUuOTIxOSBMNzguOTE0OSwxMDguNjQwNiBaICIgZmlsbD0iIzAwMDAwMCIvPjx0ZXh0IGZpbGw9IiMwMDAwMDAiIGZvbnQtZmFtaWx5PSJWZXJkYW5hIiBmb250LXNpemU9IjE0IiBsZW5ndGhBZGp1c3Q9InNwYWNpbmciIHRleHRMZW5ndGg9IjU5LjQ1OSIgeD0iOTAuNTkxOSIgeT0iMTA3Ljg0NjciPkxvY2F0aW9uPC90ZXh0PjxsaW5lIHN0eWxlPSJzdHJva2U6IzAwMDAwMDtzdHJva2Utd2lkdGg6MTsiIHgxPSI1Mi4wNCIgeDI9IjE2My45NTciIHkxPSIxMTciIHkyPSIxMTciLz48dGV4dCBmaWxsPSIjMDAwMDAwIiBmb250LWZhbWlseT0iVmVyZGFuYSIgZm9udC1zaXplPSIxNCIgbGVuZ3RoQWRqdXN0PSJzcGFjaW5nIiB0ZXh0TGVuZ3RoPSI5NC40MTgiIHg9IjU3LjA0IiB5PSIxMzMuOTk1MSI+aWQ6IExvY2F0aW9uSWQ8L3RleHQ+PHRleHQgZmlsbD0iIzAwMDAwMCIgZm9udC1mYW1pbHk9IlZlcmRhbmEiIGZvbnQtc2l6ZT0iMTQiIGxlbmd0aEFkanVzdD0ic3BhY2luZyIgdGV4dExlbmd0aD0iOTAuNjUxNCIgeD0iNTcuMDQiIHk9IjE1MC4yOTIiPm5hbWU6IFN0cmluZzwvdGV4dD48dGV4dCBmaWxsPSIjMDAwMDAwIiBmb250LWZhbWlseT0iVmVyZGFuYSIgZm9udC1zaXplPSIxNCIgbGVuZ3RoQWRqdXN0PSJzcGFjaW5nIiB0ZXh0TGVuZ3RoPSIxMDEuOTE3IiB4PSI1Ny4wNCIgeT0iMTY2LjU4ODkiPnBvcHVsYXRpb246IGludDwvdGV4dD48bGluZSBzdHlsZT0ic3Ryb2tlOiMwMDAwMDA7c3Ryb2tlLXdpZHRoOjE7IiB4MT0iNTIuMDQiIHgyPSIxNjMuOTU3IiB5MT0iMTczLjg5MDYiIHkyPSIxNzMuODkwNiIvPjwvZz48IS0tY2xhc3MgQXR0cmFjdGlvbi0tPjxnIGNsYXNzPSJlbnRpdHkiIGRhdGEtcXVhbGlmaWVkLW5hbWU9IlRyYXZlbEd1aWRlIEFwcGxpY2F0aW9uLk1vZGVsLkF0dHJhY3Rpb24iIGRhdGEtc291cmNlLWxpbmU9IjExIiBpZD0iZW50MDAwNSI+PHJlY3QgZmlsbD0iI0ZGRkZGRiIgaGVpZ2h0PSI5Mi44OTA2IiByeD0iMi41IiByeT0iMi41IiBzdHlsZT0ic3Ryb2tlOiMwMDAwMDA7c3Ryb2tlLXdpZHRoOjE7IiB3aWR0aD0iMjEwLjk3MzYiIHg9IjE5OS41MSIgeT0iODkiLz48ZWxsaXBzZSBjeD0iMjY2LjU0NDIiIGN5PSIxMDMiIGZpbGw9IiNGRkZGRkYiIHJ4PSI5IiByeT0iOSIgc3R5bGU9InN0cm9rZTojMDAwMDAwO3N0cm9rZS13aWR0aDoxOyIvPjxwYXRoIGQ9Ik0yNjkuNTEyOSwxMDguNjQwNiBRMjY4LjkzNDgsMTA4LjkzNzUgMjY4LjI5NDIsMTA5LjA3ODEgUTI2Ny42NTM2LDEwOS4yMzQ0IDI2Ni45NTA0LDEwOS4yMzQ0IFEyNjQuNDUwNCwxMDkuMjM0NCAyNjMuMTIyMywxMDcuNTkzOCBRMjYxLjgwOTgsMTA1LjkzNzUgMjYxLjgwOTgsMTAyLjgxMjUgUTI2MS44MDk4LDk5LjY4NzUgMjYzLjEyMjMsOTguMDMxMyBRMjY0LjQ1MDQsOTYuMzc1IDI2Ni45NTA0LDk2LjM3NSBRMjY3LjY1MzYsOTYuMzc1IDI2OC4yOTQyLDk2LjUzMTMgUTI2OC45NTA0LDk2LjY4NzUgMjY5LjUxMjksOTYuOTg0NCBMMjY5LjUxMjksOTkuNzAzMSBRMjY4Ljg4NzksOTkuMTI1IDI2OC4yOTQyLDk4Ljg1OTQgUTI2Ny43MDA0LDk4LjU3ODEgMjY3LjA3NTQsOTguNTc4MSBRMjY1LjczMTcsOTguNTc4MSAyNjUuMDQ0Miw5OS42NTYzIFEyNjQuMzU2NywxMDAuNzE4OCAyNjQuMzU2NywxMDIuODEyNSBRMjY0LjM1NjcsMTA0LjkwNjMgMjY1LjA0NDIsMTA1Ljk4NDQgUTI2NS43MzE3LDEwNy4wNDY5IDI2Ny4wNzU0LDEwNy4wNDY5IFEyNjcuNzAwNCwxMDcuMDQ2OSAyNjguMjk0MiwxMDYuNzgxMyBRMjY4Ljg4NzksMTA2LjUgMjY5LjUxMjksMTA1LjkyMTkgTDI2OS41MTI5LDEwOC42NDA2IFogIiBmaWxsPSIjMDAwMDAwIi8+PHRleHQgZmlsbD0iIzAwMDAwMCIgZm9udC1mYW1pbHk9IlZlcmRhbmEiIGZvbnQtc2l6ZT0iMTQiIGxlbmd0aEFkanVzdD0ic3BhY2luZyIgdGV4dExlbmd0aD0iNjkuNDA1MyIgeD0iMjg0LjA0NDIiIHk9IjEwNy44NDY3Ij5BdHRyYWN0aW9uPC90ZXh0PjxsaW5lIHN0eWxlPSJzdHJva2U6IzAwMDAwMDtzdHJva2Utd2lkdGg6MTsiIHgxPSIyMDAuNTEiIHgyPSI0MDkuNDgzNiIgeTE9IjExNyIgeTI9IjExNyIvPjx0ZXh0IGZpbGw9IiMwMDAwMDAiIGZvbnQtZmFtaWx5PSJWZXJkYW5hIiBmb250LXNpemU9IjE0IiBsZW5ndGhBZGp1c3Q9InNwYWNpbmciIHRleHRMZW5ndGg9IjkwLjY1MTQiIHg9IjIwNS41MSIgeT0iMTMzLjk5NTEiPm5hbWU6IFN0cmluZzwvdGV4dD48dGV4dCBmaWxsPSIjMDAwMDAwIiBmb250LWZhbWlseT0iVmVyZGFuYSIgZm9udC1zaXplPSIxNCIgbGVuZ3RoQWRqdXN0PSJzcGFjaW5nIiB0ZXh0TGVuZ3RoPSIxOTguOTczNiIgeD0iMjA1LjUxIiB5PSIxNTAuMjkyIj5kZXNjcmlwdGlvbjogT3B0aW9uJmx0O1N0cmluZyZndDs8L3RleHQ+PHRleHQgZmlsbD0iIzAwMDAwMCIgZm9udC1mYW1pbHk9IlZlcmRhbmEiIGZvbnQtc2l6ZT0iMTQiIGxlbmd0aEFkanVzdD0ic3BhY2luZyIgdGV4dExlbmd0aD0iMTI0LjE3NDgiIHg9IjIwNS41MSIgeT0iMTY2LjU4ODkiPmxvY2F0aW9uOiBMb2NhdGlvbjwvdGV4dD48bGluZSBzdHlsZT0ic3Ryb2tlOiMwMDAwMDA7c3Ryb2tlLXdpZHRoOjE7IiB4MT0iMjAwLjUxIiB4Mj0iNDA5LjQ4MzYiIHkxPSIxNzMuODkwNiIgeTI9IjE3My44OTA2Ii8+PC9nPjwhLS1jbGFzcyBHdWlkZS0tPjxnIGNsYXNzPSJlbnRpdHkiIGRhdGEtcXVhbGlmaWVkLW5hbWU9IlRyYXZlbEd1aWRlIEFwcGxpY2F0aW9uLk1vZGVsLkd1aWRlIiBkYXRhLXNvdXJjZS1saW5lPSIxNyIgaWQ9ImVudDAwMDYiPjxyZWN0IGZpbGw9IiNGRkZGRkYiIGhlaWdodD0iNzYuNTkzOCIgcng9IjIuNSIgcnk9IjIuNSIgc3R5bGU9InN0cm9rZTojMDAwMDAwO3N0cm9rZS13aWR0aDoxOyIgd2lkdGg9IjI1Ni42Mzc3IiB4PSI1MC42OCIgeT0iMjQxLjg5Ii8+PGVsbGlwc2UgY3g9IjE1NC42OTMyIiBjeT0iMjU1Ljg5IiBmaWxsPSIjRkZGRkZGIiByeD0iOSIgcnk9IjkiIHN0eWxlPSJzdHJva2U6IzAwMDAwMDtzdHJva2Utd2lkdGg6MTsiLz48cGF0aCBkPSJNMTU3LjY2MTksMjYxLjUzMDYgUTE1Ny4wODM4LDI2MS44Mjc1IDE1Ni40NDMyLDI2MS45NjgxIFExNTUuODAyNiwyNjIuMTI0NCAxNTUuMDk5NCwyNjIuMTI0NCBRMTUyLjU5OTQsMjYyLjEyNDQgMTUxLjI3MTMsMjYwLjQ4MzggUTE0OS45NTg4LDI1OC44Mjc1IDE0OS45NTg4LDI1NS43MDI1IFExNDkuOTU4OCwyNTIuNTc3NSAxNTEuMjcxMywyNTAuOTIxMyBRMTUyLjU5OTQsMjQ5LjI2NSAxNTUuMDk5NCwyNDkuMjY1IFExNTUuODAyNiwyNDkuMjY1IDE1Ni40NDMyLDI0OS40MjEzIFExNTcuMDk5NCwyNDkuNTc3NSAxNTcuNjYxOSwyNDkuODc0NCBMMTU3LjY2MTksMjUyLjU5MzEgUTE1Ny4wMzY5LDI1Mi4wMTUgMTU2LjQ0MzIsMjUxLjc0OTQgUTE1NS44NDk0LDI1MS40NjgxIDE1NS4yMjQ0LDI1MS40NjgxIFExNTMuODgwNywyNTEuNDY4MSAxNTMuMTkzMiwyNTIuNTQ2MyBRMTUyLjUwNTcsMjUzLjYwODggMTUyLjUwNTcsMjU1LjcwMjUgUTE1Mi41MDU3LDI1Ny43OTYzIDE1My4xOTMyLDI1OC44NzQ0IFExNTMuODgwNywyNTkuOTM2OSAxNTUuMjI0NCwyNTkuOTM2OSBRMTU1Ljg0OTQsMjU5LjkzNjkgMTU2LjQ0MzIsMjU5LjY3MTMgUTE1Ny4wMzY5LDI1OS4zOSAxNTcuNjYxOSwyNTguODExOSBMMTU3LjY2MTksMjYxLjUzMDYgWiAiIGZpbGw9IiMwMDAwMDAiLz48dGV4dCBmaWxsPSIjMDAwMDAwIiBmb250LWZhbWlseT0iVmVyZGFuYSIgZm9udC1zaXplPSIxNCIgbGVuZ3RoQWRqdXN0PSJzcGFjaW5nIiB0ZXh0TGVuZ3RoPSI0MS4xMTEzIiB4PSIxNzIuMTkzMiIgeT0iMjYwLjczNjciPkd1aWRlPC90ZXh0PjxsaW5lIHN0eWxlPSJzdHJva2U6IzAwMDAwMDtzdHJva2Utd2lkdGg6MTsiIHgxPSI1MS42OCIgeDI9IjMwNi4zMTc3IiB5MT0iMjY5Ljg5IiB5Mj0iMjY5Ljg5Ii8+PHRleHQgZmlsbD0iIzAwMDAwMCIgZm9udC1mYW1pbHk9IlZlcmRhbmEiIGZvbnQtc2l6ZT0iMTQiIGxlbmd0aEFkanVzdD0ic3BhY2luZyIgdGV4dExlbmd0aD0iMTQ2Ljk3OTUiIHg9IjU2LjY4IiB5PSIyODYuODg1MSI+YXR0cmFjdGlvbjogQXR0cmFjdGlvbjwvdGV4dD48dGV4dCBmaWxsPSIjMDAwMDAwIiBmb250LWZhbWlseT0iVmVyZGFuYSIgZm9udC1zaXplPSIxNCIgbGVuZ3RoQWRqdXN0PSJzcGFjaW5nIiB0ZXh0TGVuZ3RoPSIyNDQuNjM3NyIgeD0iNTYuNjgiIHk9IjMwMy4xODIiPnN1YmplY3RzOiBMaXN0Jmx0O1BvcEN1bHR1cmVTdWJqZWN0Jmd0OzwvdGV4dD48bGluZSBzdHlsZT0ic3Ryb2tlOiMwMDAwMDA7c3Ryb2tlLXdpZHRoOjE7IiB4MT0iNTEuNjgiIHgyPSIzMDYuMzE3NyIgeTE9IjMxMC40ODM4IiB5Mj0iMzEwLjQ4MzgiLz48L2c+PCEtLWNsYXNzIERhdGFBY2Nlc3MtLT48ZyBjbGFzcz0iZW50aXR5IiBkYXRhLXF1YWxpZmllZC1uYW1lPSJUcmF2ZWxHdWlkZSBBcHBsaWNhdGlvbi5EYXRhIEFjY2Vzcy5EYXRhQWNjZXNzIiBkYXRhLXNvdXJjZS1saW5lPSIyNCIgaWQ9ImVudDAwMDgiPjxyZWN0IGZpbGw9IiNGRkZGRkYiIGhlaWdodD0iOTIuODkwNiIgcng9IjIuNSIgcnk9IjIuNSIgc3R5bGU9InN0cm9rZTojMDAwMDAwO3N0cm9rZS13aWR0aDoxOyIgd2lkdGg9IjM0OC4yMjE3IiB4PSI0NzQuODkiIHk9Ijg5Ii8+PGVsbGlwc2UgY3g9IjYwNC40NTA1IiBjeT0iMTAzIiBmaWxsPSIjRkZGRkZGIiByeD0iOSIgcnk9IjkiIHN0eWxlPSJzdHJva2U6IzAwMDAwMDtzdHJva2Utd2lkdGg6MTsiLz48cGF0aCBkPSJNNjAwLjM3MjQsOTguNzY1NiBMNjAwLjM3MjQsOTYuNjA5NCBMNjA3Ljc2Myw5Ni42MDk0IEw2MDcuNzYzLDk4Ljc2NTYgTDYwNS4yOTQzLDk4Ljc2NTYgTDYwNS4yOTQzLDEwNi44NDM4IEw2MDcuNzYzLDEwNi44NDM4IEw2MDcuNzYzLDEwOSBMNjAwLjM3MjQsMTA5IEw2MDAuMzcyNCwxMDYuODQzOCBMNjAyLjg0MTIsMTA2Ljg0MzggTDYwMi44NDEyLDk4Ljc2NTYgTDYwMC4zNzI0LDk4Ljc2NTYgWiAiIGZpbGw9IiMwMDAwMDAiLz48dGV4dCBmaWxsPSIjMDAwMDAwIiBmb250LWZhbWlseT0iVmVyZGFuYSIgZm9udC1zaXplPSIxNCIgZm9udC1zdHlsZT0iaXRhbGljIiBsZW5ndGhBZGp1c3Q9InNwYWNpbmciIHRleHRMZW5ndGg9IjgxLjYwMDYiIHg9IjYyMS45NTA1IiB5PSIxMDcuODQ2NyI+RGF0YUFjY2VzczwvdGV4dD48bGluZSBzdHlsZT0ic3Ryb2tlOiMwMDAwMDA7c3Ryb2tlLXdpZHRoOjE7IiB4MT0iNDc1Ljg5IiB4Mj0iODIyLjExMTciIHkxPSIxMTciIHkyPSIxMTciLz48bGluZSBzdHlsZT0ic3Ryb2tlOiMwMDAwMDA7c3Ryb2tlLXdpZHRoOjE7IiB4MT0iNDc1Ljg5IiB4Mj0iODIyLjExMTciIHkxPSIxMjUiIHkyPSIxMjUiLz48ZyBkYXRhLXZpc2liaWxpdHktbW9kaWZpZXI9IlBVQkxJQ19NRVRIT0QiPjxlbGxpcHNlIGN4PSI0ODUuODkiIGN5PSIxMzguNjQ4NCIgZmlsbD0iI0ZGRkZGRiIgcng9IjMiIHJ5PSIzIiBzdHlsZT0ic3Ryb2tlOiMwMDAwMDA7c3Ryb2tlLXdpZHRoOjE7Ii8+PC9nPjx0ZXh0IGZpbGw9IiMwMDAwMDAiIGZvbnQtZmFtaWx5PSJWZXJkYW5hIiBmb250LXNpemU9IjE0IiBsZW5ndGhBZGp1c3Q9InNwYWNpbmciIHRleHRMZW5ndGg9IjI3OS4zMTY0IiB4PSI0OTIuODkiIHk9IjE0MS45OTUxIj5maW5kQXR0cmFjdGlvbnMoKTogSU8mbHQ7TGlzdCZsdDtBdHRyYWN0aW9uJmd0OyZndDs8L3RleHQ+PGcgZGF0YS12aXNpYmlsaXR5LW1vZGlmaWVyPSJQVUJMSUNfTUVUSE9EIj48ZWxsaXBzZSBjeD0iNDg1Ljg5IiBjeT0iMTU0Ljk0NTMiIGZpbGw9IiNGRkZGRkYiIHJ4PSIzIiByeT0iMyIgc3R5bGU9InN0cm9rZTojMDAwMDAwO3N0cm9rZS13aWR0aDoxOyIvPjwvZz48dGV4dCBmaWxsPSIjMDAwMDAwIiBmb250LWZhbWlseT0iVmVyZGFuYSIgZm9udC1zaXplPSIxNCIgbGVuZ3RoQWRqdXN0PSJzcGFjaW5nIiB0ZXh0TGVuZ3RoPSIzMTAuOTY2OCIgeD0iNDkyLjg5IiB5PSIxNTguMjkyIj5maW5kQXJ0aXN0c0Zyb21Mb2NhdGlvbigpOiBJTyZsdDtMaXN0Jmx0O0FydGlzdCZndDsmZ3Q7PC90ZXh0PjxnIGRhdGEtdmlzaWJpbGl0eS1tb2RpZmllcj0iUFVCTElDX01FVEhPRCI+PGVsbGlwc2UgY3g9IjQ4NS44OSIgY3k9IjE3MS4yNDIyIiBmaWxsPSIjRkZGRkZGIiByeD0iMyIgcnk9IjMiIHN0eWxlPSJzdHJva2U6IzAwMDAwMDtzdHJva2Utd2lkdGg6MTsiLz48L2c+PHRleHQgZmlsbD0iIzAwMDAwMCIgZm9udC1mYW1pbHk9IlZlcmRhbmEiIGZvbnQtc2l6ZT0iMTQiIGxlbmd0aEFkanVzdD0ic3BhY2luZyIgdGV4dExlbmd0aD0iMzI0LjIyMTciIHg9IjQ5Mi44OSIgeT0iMTc0LjU4ODkiPmZpbmRNb3ZpZXNBYm91dExvY2F0aW9uKCk6IElPJmx0O0xpc3QmbHQ7TW92aWUmZ3Q7Jmd0OzwvdGV4dD48L2c+PCEtLWNsYXNzIFdpa2lkYXRhRGF0YUFjY2Vzcy0tPjxnIGNsYXNzPSJlbnRpdHkiIGRhdGEtcXVhbGlmaWVkLW5hbWU9IlRyYXZlbEd1aWRlIEFwcGxpY2F0aW9uLkRhdGEgQWNjZXNzLldpa2lkYXRhRGF0YUFjY2VzcyIgZGF0YS1zb3VyY2UtbGluZT0iMzAiIGlkPSJlbnQwMDA5Ij48cmVjdCBmaWxsPSIjRkZGRkZGIiBoZWlnaHQ9IjQ0IiByeD0iMi41IiByeT0iMi41IiBzdHlsZT0ic3Ryb2tlOiMwMDAwMDA7c3Ryb2tlLXdpZHRoOjE7IiB3aWR0aD0iMTcwLjg2NDMiIHg9IjQ2NS41NyIgeT0iMjU4LjE4Ii8+PGVsbGlwc2UgY3g9IjQ3OC41NyIgY3k9IjI3Mi4xOCIgZmlsbD0iI0ZGRkZGRiIgcng9IjkiIHJ5PSI5IiBzdHlsZT0ic3Ryb2tlOiMwMDAwMDA7c3Ryb2tlLXdpZHRoOjE7Ii8+PHBhdGggZD0iTTQ4MS41Mzg4LDI3Ny44MjA2IFE0ODAuOTYwNiwyNzguMTE3NSA0ODAuMzIsMjc4LjI1ODEgUTQ3OS42Nzk0LDI3OC40MTQ0IDQ3OC45NzYzLDI3OC40MTQ0IFE0NzYuNDc2MywyNzguNDE0NCA0NzUuMTQ4MSwyNzYuNzczOCBRNDczLjgzNTYsMjc1LjExNzUgNDczLjgzNTYsMjcxLjk5MjUgUTQ3My44MzU2LDI2OC44Njc1IDQ3NS4xNDgxLDI2Ny4yMTEzIFE0NzYuNDc2MywyNjUuNTU1IDQ3OC45NzYzLDI2NS41NTUgUTQ3OS42Nzk0LDI2NS41NTUgNDgwLjMyLDI2NS43MTEzIFE0ODAuOTc2MywyNjUuODY3NSA0ODEuNTM4OCwyNjYuMTY0NCBMNDgxLjUzODgsMjY4Ljg4MzEgUTQ4MC45MTM4LDI2OC4zMDUgNDgwLjMyLDI2OC4wMzk0IFE0NzkuNzI2MywyNjcuNzU4MSA0NzkuMTAxMywyNjcuNzU4MSBRNDc3Ljc1NzUsMjY3Ljc1ODEgNDc3LjA3LDI2OC44MzYzIFE0NzYuMzgyNSwyNjkuODk4OCA0NzYuMzgyNSwyNzEuOTkyNSBRNDc2LjM4MjUsMjc0LjA4NjMgNDc3LjA3LDI3NS4xNjQ0IFE0NzcuNzU3NSwyNzYuMjI2OSA0NzkuMTAxMywyNzYuMjI2OSBRNDc5LjcyNjMsMjc2LjIyNjkgNDgwLjMyLDI3NS45NjEzIFE0ODAuOTEzOCwyNzUuNjggNDgxLjUzODgsMjc1LjEwMTkgTDQ4MS41Mzg4LDI3Ny44MjA2IFogIiBmaWxsPSIjMDAwMDAwIi8+PHRleHQgZmlsbD0iIzAwMDAwMCIgZm9udC1mYW1pbHk9IlZlcmRhbmEiIGZvbnQtc2l6ZT0iMTQiIGxlbmd0aEFkanVzdD0ic3BhY2luZyIgdGV4dExlbmd0aD0iMTQyLjg2NDMiIHg9IjQ5MC41NyIgeT0iMjc3LjAyNjciPldpa2lkYXRhRGF0YUFjY2VzczwvdGV4dD48bGluZSBzdHlsZT0ic3Ryb2tlOiMwMDAwMDA7c3Ryb2tlLXdpZHRoOjE7IiB4MT0iNDY2LjU3IiB4Mj0iNjM1LjQzNDMiIHkxPSIyODYuMTgiIHkyPSIyODYuMTgiLz48bGluZSBzdHlsZT0ic3Ryb2tlOiMwMDAwMDA7c3Ryb2tlLXdpZHRoOjE7IiB4MT0iNDY2LjU3IiB4Mj0iNjM1LjQzNDMiIHkxPSIyOTQuMTgiIHkyPSIyOTQuMTgiLz48L2c+PCEtLWNsYXNzIENhY2hlZERhdGFBY2Nlc3MtLT48ZyBjbGFzcz0iZW50aXR5IiBkYXRhLXF1YWxpZmllZC1uYW1lPSJUcmF2ZWxHdWlkZSBBcHBsaWNhdGlvbi5EYXRhIEFjY2Vzcy5DYWNoZWREYXRhQWNjZXNzIiBkYXRhLXNvdXJjZS1saW5lPSIzMSIgaWQ9ImVudDAwMTAiPjxyZWN0IGZpbGw9IiNGRkZGRkYiIGhlaWdodD0iNDQiIHJ4PSIyLjUiIHJ5PSIyLjUiIHN0eWxlPSJzdHJva2U6IzAwMDAwMDtzdHJva2Utd2lkdGg6MTsiIHdpZHRoPSIxNjIuMDI1NCIgeD0iNjcwLjk5IiB5PSIyNTguMTgiLz48ZWxsaXBzZSBjeD0iNjgzLjk5IiBjeT0iMjcyLjE4IiBmaWxsPSIjRkZGRkZGIiByeD0iOSIgcnk9IjkiIHN0eWxlPSJzdHJva2U6IzAwMDAwMDtzdHJva2Utd2lkdGg6MTsiLz48cGF0aCBkPSJNNjg2Ljk1ODgsMjc3LjgyMDYgUTY4Ni4zODA2LDI3OC4xMTc1IDY4NS43NCwyNzguMjU4MSBRNjg1LjA5OTQsMjc4LjQxNDQgNjg0LjM5NjMsMjc4LjQxNDQgUTY4MS44OTYzLDI3OC40MTQ0IDY4MC41NjgxLDI3Ni43NzM4IFE2NzkuMjU1NiwyNzUuMTE3NSA2NzkuMjU1NiwyNzEuOTkyNSBRNjc5LjI1NTYsMjY4Ljg2NzUgNjgwLjU2ODEsMjY3LjIxMTMgUTY4MS44OTYzLDI2NS41NTUgNjg0LjM5NjMsMjY1LjU1NSBRNjg1LjA5OTQsMjY1LjU1NSA2ODUuNzQsMjY1LjcxMTMgUTY4Ni4zOTYzLDI2NS44Njc1IDY4Ni45NTg4LDI2Ni4xNjQ0IEw2ODYuOTU4OCwyNjguODgzMSBRNjg2LjMzMzgsMjY4LjMwNSA2ODUuNzQsMjY4LjAzOTQgUTY4NS4xNDYzLDI2Ny43NTgxIDY4NC41MjEzLDI2Ny43NTgxIFE2ODMuMTc3NSwyNjcuNzU4MSA2ODIuNDksMjY4LjgzNjMgUTY4MS44MDI1LDI2OS44OTg4IDY4MS44MDI1LDI3MS45OTI1IFE2ODEuODAyNSwyNzQuMDg2MyA2ODIuNDksMjc1LjE2NDQgUTY4My4xNzc1LDI3Ni4yMjY5IDY4NC41MjEzLDI3Ni4yMjY5IFE2ODUuMTQ2MywyNzYuMjI2OSA2ODUuNzQsMjc1Ljk2MTMgUTY4Ni4zMzM4LDI3NS42OCA2ODYuOTU4OCwyNzUuMTAxOSBMNjg2Ljk1ODgsMjc3LjgyMDYgWiAiIGZpbGw9IiMwMDAwMDAiLz48dGV4dCBmaWxsPSIjMDAwMDAwIiBmb250LWZhbWlseT0iVmVyZGFuYSIgZm9udC1zaXplPSIxNCIgbGVuZ3RoQWRqdXN0PSJzcGFjaW5nIiB0ZXh0TGVuZ3RoPSIxMzQuMDI1NCIgeD0iNjk1Ljk5IiB5PSIyNzcuMDI2NyI+Q2FjaGVkRGF0YUFjY2VzczwvdGV4dD48bGluZSBzdHlsZT0ic3Ryb2tlOiMwMDAwMDA7c3Ryb2tlLXdpZHRoOjE7IiB4MT0iNjcxLjk5IiB4Mj0iODMyLjAxNTQiIHkxPSIyODYuMTgiIHkyPSIyODYuMTgiLz48bGluZSBzdHlsZT0ic3Ryb2tlOiMwMDAwMDA7c3Ryb2tlLXdpZHRoOjE7IiB4MT0iNjcxLjk5IiB4Mj0iODMyLjAxNTQiIHkxPSIyOTQuMTgiIHkyPSIyOTQuMTgiLz48L2c+PCEtLXJldmVyc2UgbGluayBEYXRhQWNjZXNzIHRvIFdpa2lkYXRhRGF0YUFjY2Vzcy0tPjxnIGNsYXNzPSJsaW5rIiBkYXRhLWVudGl0eS0xPSJlbnQwMDA4IiBkYXRhLWVudGl0eS0yPSJlbnQwMDA5IiBkYXRhLWxpbmstdHlwZT0iZXh0ZW5zaW9uIiBkYXRhLXNvdXJjZS1saW5lPSIzNCIgaWQ9ImxuazExIj48cGF0aCBjb2RlTGluZT0iMzQiIGQ9Ik02MDcuNTMzMSwxOTYuODQwMSBDNTkwLjA2MzEsMjIyLjI5MDEgNTc5LjI5LDIzNy45NyA1NjUuNTksMjU3LjkzIiBmaWxsPSJub25lIiBpZD0iRGF0YUFjY2Vzcy1iYWNrdG8tV2lraWRhdGFEYXRhQWNjZXNzIiBzdHlsZT0ic3Ryb2tlOiMwMDAwMDA7c3Ryb2tlLXdpZHRoOjE7c3Ryb2tlLWRhc2hhcnJheTo3LDc7Ii8+PHBvbHlnb24gZmlsbD0ibm9uZSIgcG9pbnRzPSI2MTcuNzIsMTgyLDYwMi41ODY0LDE5My40NDQ0LDYxMi40Nzk4LDIwMC4yMzU3LDYxNy43MiwxODIiIHN0eWxlPSJzdHJva2U6IzAwMDAwMDtzdHJva2Utd2lkdGg6MTsiLz48L2c+PCEtLXJldmVyc2UgbGluayBEYXRhQWNjZXNzIHRvIENhY2hlZERhdGFBY2Nlc3MtLT48ZyBjbGFzcz0ibGluayIgZGF0YS1lbnRpdHktMT0iZW50MDAwOCIgZGF0YS1lbnRpdHktMj0iZW50MDAxMCIgZGF0YS1saW5rLXR5cGU9ImV4dGVuc2lvbiIgZGF0YS1zb3VyY2UtbGluZT0iMzUiIGlkPSJsbmsxMiI+PHBhdGggY29kZUxpbmU9IjM1IiBkPSJNNjkyLjQwNDksMTk2LjU5NTEgQzcxMC43NzQ5LDIyMi4wNDUxIDcyMi4yNiwyMzcuOTcgNzM2LjY3LDI1Ny45MyIgZmlsbD0ibm9uZSIgaWQ9IkRhdGFBY2Nlc3MtYmFja3RvLUNhY2hlZERhdGFBY2Nlc3MiIHN0eWxlPSJzdHJva2U6IzAwMDAwMDtzdHJva2Utd2lkdGg6MTtzdHJva2UtZGFzaGFycmF5OjcsNzsiLz48cG9seWdvbiBmaWxsPSJub25lIiBwb2ludHM9IjY4MS44NywxODIsNjg3LjUzOTgsMjAwLjEwNjcsNjk3LjI2OTksMTkzLjA4MzUsNjgxLjg3LDE4MiIgc3R5bGU9InN0cm9rZTojMDAwMDAwO3N0cm9rZS13aWR0aDoxOyIvPjwvZz48P3BsYW50dW1sLXNyYyBSTDNUUWk4bTVCeEZLc0hVUkdueVc1ODJuSjRIOVd1U3hGZ083RWtQUUhBSXIxa3RUcl93ZXdjUkx3TlZ4X2RvNDBfTzg3U1FvMzNjRzF3WEhaeHh5NzEybE1uOThRLVNxb0dYYVpLcFZjT1VQR0hKd3dIUU11TXdtd0k2NEZZUjdMRzk4NUxTVnJVQTZNWW11RGxlb1RKQ01UVmdkWWF1Y1NYLXNFWWxPbEdXbnVHUll5OFdGUmQxaS1jX3ZLMDlmaVVRTjlXSlhtNWQxalZhT2pCMkdobHhJY2oyaWJBOHZSanJZclI3cmtEczg0SEFJYmNKbkl5R1dMVElPV1pUeGRHLS1acjh2MXFudTBiLXRmREhrSVN5RlhMeWpJZHhhV21CQ0dmeko0SHV6UlF2QkJXbnpGSDVsQk9kbWIzalIxbGxZTmpRWUZtMmR0R2FiTXhCenV0NDBrRzFyR0hFYmljOHlkaS1sc1YtQV9hVnltaTA/PjwvZz48L3N2Zz4=" class="uml" alt="uml diagram" title="" /></p>
<h3 id="112">11.2 ドメインモデルの定義<a class="headerlink" href="#112" title="Permanent link">&para;</a></h3>
<p><strong>ソースファイル</strong>: <code>app/java/src/main/java/ch11/TravelGuide.java</code></p>
<div class="highlight"><pre><span></span><code><span class="c1">// 位置情報を表す値オブジェクト</span>
<span class="kd">public</span><span class="w"> </span><span class="kd">record</span> <span class="nc">LocationId</span><span class="p">(</span><span class="n">String</span><span class="w"> </span><span class="n">value</span><span class="p">)</span><span class="w"> </span><span class="p">{</span>
<span class="w">    </span><span class="kd">public</span><span class="w"> </span><span class="n">LocationId</span><span class="w"> </span><span class="p">{</span>
<span class="w">        </span><span class="n">Objects</span><span class="p">.</span><span class="na">requireNonNull</span><span class="p">(</span><span class="n">value</span><span class="p">,</span><span class="w"> </span><span class="s">&quot;LocationId value cannot be null&quot;</span><span class="p">);</span>
<span class="w">    </span><span class="p">}</span>
<span class="p">}</span>

<span class="c1">// ロケーション</span>
<span class="kd">public</span><span class="w"> </span><span class="kd">record</span> <span class="nc">Location</span><span class="p">(</span><span class="n">LocationId</span><span class="w"> </span><span class="n">id</span><span class="p">,</span><span class="w"> </span><span class="n">String</span><span class="w"> </span><span class="n">name</span><span class="p">,</span><span class="w"> </span><span class="kt">int</span><span class="w"> </span><span class="n">population</span><span class="p">)</span><span class="w"> </span><span class="p">{</span>
<span class="w">    </span><span class="kd">public</span><span class="w"> </span><span class="n">Location</span><span class="w"> </span><span class="p">{</span>
<span class="w">        </span><span class="n">Objects</span><span class="p">.</span><span class="na">requireNonNull</span><span class="p">(</span><span class="n">id</span><span class="p">,</span><span class="w"> </span><span class="s">&quot;Location id cannot be null&quot;</span><span class="p">);</span>
<span class="w">        </span><span class="n">Objects</span><span class="p">.</span><span class="na">requireNonNull</span><span class="p">(</span><span class="n">name</span><span class="p">,</span><span class="w"> </span><span class="s">&quot;Location name cannot be null&quot;</span><span class="p">);</span>
<span class="w">    </span><span class="p">}</span>
<span class="p">}</span>

<span class="c1">// アトラクション（観光地）</span>
<span class="kd">public</span><span class="w"> </span><span class="kd">record</span> <span class="nc">Attraction</span><span class="p">(</span>
<span class="w">        </span><span class="n">String</span><span class="w"> </span><span class="n">name</span><span class="p">,</span>
<span class="w">        </span><span class="n">Option</span><span class="o">&lt;</span><span class="n">String</span><span class="o">&gt;</span><span class="w"> </span><span class="n">description</span><span class="p">,</span>
<span class="w">        </span><span class="n">Location</span><span class="w"> </span><span class="n">location</span>
<span class="p">)</span><span class="w"> </span><span class="p">{</span>
<span class="w">    </span><span class="kd">public</span><span class="w"> </span><span class="n">Attraction</span><span class="w"> </span><span class="p">{</span>
<span class="w">        </span><span class="n">Objects</span><span class="p">.</span><span class="na">requireNonNull</span><span class="p">(</span><span class="n">name</span><span class="p">,</span><span class="w"> </span><span class="s">&quot;Attraction name cannot be null&quot;</span><span class="p">);</span>
<span class="w">        </span><span class="n">Objects</span><span class="p">.</span><span class="na">requireNonNull</span><span class="p">(</span><span class="n">description</span><span class="p">,</span><span class="w"> </span><span class="s">&quot;Attraction description cannot be null&quot;</span><span class="p">);</span>
<span class="w">        </span><span class="n">Objects</span><span class="p">.</span><span class="na">requireNonNull</span><span class="p">(</span><span class="n">location</span><span class="p">,</span><span class="w"> </span><span class="s">&quot;Attraction location cannot be null&quot;</span><span class="p">);</span>
<span class="w">    </span><span class="p">}</span>
<span class="p">}</span>

<span class="c1">// ポップカルチャーの題材（sealed interface）</span>
<span class="kd">public</span><span class="w"> </span><span class="kd">sealed</span><span class="w"> </span><span class="kd">interface</span> <span class="nc">PopCultureSubject</span><span class="w"> </span><span class="n">permits</span><span class="w"> </span><span class="n">Artist</span><span class="p">,</span><span class="w"> </span><span class="n">Movie</span><span class="w"> </span><span class="p">{</span>
<span class="w">    </span><span class="n">String</span><span class="w"> </span><span class="nf">name</span><span class="p">();</span>
<span class="p">}</span>

<span class="c1">// アーティスト</span>
<span class="kd">public</span><span class="w"> </span><span class="kd">record</span> <span class="nc">Artist</span><span class="p">(</span><span class="n">String</span><span class="w"> </span><span class="n">name</span><span class="p">,</span><span class="w"> </span><span class="kt">int</span><span class="w"> </span><span class="n">followers</span><span class="p">)</span><span class="w"> </span><span class="kd">implements</span><span class="w"> </span><span class="n">PopCultureSubject</span><span class="w"> </span><span class="p">{</span>
<span class="w">    </span><span class="kd">public</span><span class="w"> </span><span class="n">Artist</span><span class="w"> </span><span class="p">{</span>
<span class="w">        </span><span class="n">Objects</span><span class="p">.</span><span class="na">requireNonNull</span><span class="p">(</span><span class="n">name</span><span class="p">,</span><span class="w"> </span><span class="s">&quot;Artist name cannot be null&quot;</span><span class="p">);</span>
<span class="w">    </span><span class="p">}</span>
<span class="p">}</span>

<span class="c1">// 映画</span>
<span class="kd">public</span><span class="w"> </span><span class="kd">record</span> <span class="nc">Movie</span><span class="p">(</span><span class="n">String</span><span class="w"> </span><span class="n">name</span><span class="p">,</span><span class="w"> </span><span class="kt">int</span><span class="w"> </span><span class="n">boxOffice</span><span class="p">)</span><span class="w"> </span><span class="kd">implements</span><span class="w"> </span><span class="n">PopCultureSubject</span><span class="w"> </span><span class="p">{</span>
<span class="w">    </span><span class="kd">public</span><span class="w"> </span><span class="n">Movie</span><span class="w"> </span><span class="p">{</span>
<span class="w">        </span><span class="n">Objects</span><span class="p">.</span><span class="na">requireNonNull</span><span class="p">(</span><span class="n">name</span><span class="p">,</span><span class="w"> </span><span class="s">&quot;Movie name cannot be null&quot;</span><span class="p">);</span>
<span class="w">    </span><span class="p">}</span>
<span class="p">}</span>

<span class="c1">// 旅行ガイド</span>
<span class="kd">public</span><span class="w"> </span><span class="kd">record</span> <span class="nc">Guide</span><span class="p">(</span>
<span class="w">        </span><span class="n">Attraction</span><span class="w"> </span><span class="n">attraction</span><span class="p">,</span>
<span class="w">        </span><span class="n">List</span><span class="o">&lt;</span><span class="n">PopCultureSubject</span><span class="o">&gt;</span><span class="w"> </span><span class="n">subjects</span>
<span class="p">)</span><span class="w"> </span><span class="p">{</span>
<span class="w">    </span><span class="kd">public</span><span class="w"> </span><span class="n">Guide</span><span class="w"> </span><span class="p">{</span>
<span class="w">        </span><span class="n">Objects</span><span class="p">.</span><span class="na">requireNonNull</span><span class="p">(</span><span class="n">attraction</span><span class="p">,</span><span class="w"> </span><span class="s">&quot;Guide attraction cannot be null&quot;</span><span class="p">);</span>
<span class="w">        </span><span class="n">Objects</span><span class="p">.</span><span class="na">requireNonNull</span><span class="p">(</span><span class="n">subjects</span><span class="p">,</span><span class="w"> </span><span class="s">&quot;Guide subjects cannot be null&quot;</span><span class="p">);</span>
<span class="w">    </span><span class="p">}</span>
<span class="p">}</span>
</code></pre></div>
<p>Java 17 の <code>record</code> と <code>sealed interface</code> を活用して、Scala の case class と ADT を表現しています。</p>
<h3 id="113">11.3 データアクセス層の抽象化<a class="headerlink" href="#113" title="Permanent link">&para;</a></h3>
<p>外部データソースへのアクセスをインターフェースで抽象化します。</p>
<p><strong>ソースファイル</strong>: <code>app/java/src/main/java/ch11/DataAccess.java</code></p>
<div class="highlight"><pre><span></span><code><span class="kd">public</span><span class="w"> </span><span class="kd">interface</span> <span class="nc">DataAccess</span><span class="w"> </span><span class="p">{</span>
<span class="w">    </span><span class="n">IO</span><span class="o">&lt;</span><span class="n">List</span><span class="o">&lt;</span><span class="n">Attraction</span><span class="o">&gt;&gt;</span><span class="w"> </span><span class="nf">findAttractions</span><span class="p">(</span>
<span class="w">            </span><span class="n">String</span><span class="w"> </span><span class="n">name</span><span class="p">,</span>
<span class="w">            </span><span class="n">AttractionOrdering</span><span class="w"> </span><span class="n">ordering</span><span class="p">,</span>
<span class="w">            </span><span class="kt">int</span><span class="w"> </span><span class="n">limit</span>
<span class="w">    </span><span class="p">);</span>

<span class="w">    </span><span class="n">IO</span><span class="o">&lt;</span><span class="n">List</span><span class="o">&lt;</span><span class="n">Artist</span><span class="o">&gt;&gt;</span><span class="w"> </span><span class="nf">findArtistsFromLocation</span><span class="p">(</span>
<span class="w">            </span><span class="n">LocationId</span><span class="w"> </span><span class="n">locationId</span><span class="p">,</span>
<span class="w">            </span><span class="kt">int</span><span class="w"> </span><span class="n">limit</span>
<span class="w">    </span><span class="p">);</span>

<span class="w">    </span><span class="n">IO</span><span class="o">&lt;</span><span class="n">List</span><span class="o">&lt;</span><span class="n">Movie</span><span class="o">&gt;&gt;</span><span class="w"> </span><span class="nf">findMoviesAboutLocation</span><span class="p">(</span>
<span class="w">            </span><span class="n">LocationId</span><span class="w"> </span><span class="n">locationId</span><span class="p">,</span>
<span class="w">            </span><span class="kt">int</span><span class="w"> </span><span class="n">limit</span>
<span class="w">    </span><span class="p">);</span>
<span class="p">}</span>
</code></pre></div>
<p><img src="data:image/svg+xml;base64,PD9wbGFudHVtbCAxLjIwMjYuMT8+PHN2ZyB4bWxucz0iaHR0cDovL3d3dy53My5vcmcvMjAwMC9zdmciIHhtbG5zOnhsaW5rPSJodHRwOi8vd3d3LnczLm9yZy8xOTk5L3hsaW5rIiBjb250ZW50U3R5bGVUeXBlPSJ0ZXh0L2NzcyIgZGF0YS1kaWFncmFtLXR5cGU9IkNMQVNTIiBoZWlnaHQ9IjI4MXB4IiBwcmVzZXJ2ZUFzcGVjdFJhdGlvPSJub25lIiBzdHlsZT0id2lkdGg6Nzk2cHg7aGVpZ2h0OjI4MXB4O2JhY2tncm91bmQ6I0ZGRkZGRjsiIHZlcnNpb249IjEuMSIgdmlld0JveD0iMCAwIDc5NiAyODEiIHdpZHRoPSI3OTZweCIgem9vbUFuZFBhbj0ibWFnbmlmeSI+PGRlZnMvPjxnPjwhLS1jbGFzcyBEYXRhQWNjZXNzLS0+PGcgY2xhc3M9ImVudGl0eSIgZGF0YS1xdWFsaWZpZWQtbmFtZT0iRGF0YUFjY2VzcyIgZGF0YS1zb3VyY2UtbGluZT0iMyIgaWQ9ImVudDAwMDIiPjxyZWN0IGZpbGw9IiNGRkZGRkYiIGhlaWdodD0iOTIuODkwNiIgcng9IjIuNSIgcnk9IjIuNSIgc3R5bGU9InN0cm9rZTojMDAwMDAwO3N0cm9rZS13aWR0aDoxOyIgd2lkdGg9IjM0OC4yMjE3IiB4PSIyMDMiIHk9IjEyIi8+PGVsbGlwc2UgY3g9IjMzMi41NjA1IiBjeT0iMjYiIGZpbGw9IiNGRkZGRkYiIHJ4PSI5IiByeT0iOSIgc3R5bGU9InN0cm9rZTojMDAwMDAwO3N0cm9rZS13aWR0aDoxOyIvPjxwYXRoIGQ9Ik0zMjguNDgyNCwyMS43NjU2IEwzMjguNDgyNCwxOS42MDk0IEwzMzUuODczLDE5LjYwOTQgTDMzNS44NzMsMjEuNzY1NiBMMzMzLjQwNDMsMjEuNzY1NiBMMzMzLjQwNDMsMjkuODQzOCBMMzM1Ljg3MywyOS44NDM4IEwzMzUuODczLDMyIEwzMjguNDgyNCwzMiBMMzI4LjQ4MjQsMjkuODQzOCBMMzMwLjk1MTIsMjkuODQzOCBMMzMwLjk1MTIsMjEuNzY1NiBMMzI4LjQ4MjQsMjEuNzY1NiBaICIgZmlsbD0iIzAwMDAwMCIvPjx0ZXh0IGZpbGw9IiMwMDAwMDAiIGZvbnQtZmFtaWx5PSJWZXJkYW5hIiBmb250LXNpemU9IjE0IiBmb250LXN0eWxlPSJpdGFsaWMiIGxlbmd0aEFkanVzdD0ic3BhY2luZyIgdGV4dExlbmd0aD0iODEuNjAwNiIgeD0iMzUwLjA2MDUiIHk9IjMwLjg0NjciPkRhdGFBY2Nlc3M8L3RleHQ+PGxpbmUgc3R5bGU9InN0cm9rZTojMDAwMDAwO3N0cm9rZS13aWR0aDoxOyIgeDE9IjIwNCIgeDI9IjU1MC4yMjE3IiB5MT0iNDAiIHkyPSI0MCIvPjxsaW5lIHN0eWxlPSJzdHJva2U6IzAwMDAwMDtzdHJva2Utd2lkdGg6MTsiIHgxPSIyMDQiIHgyPSI1NTAuMjIxNyIgeTE9IjQ4IiB5Mj0iNDgiLz48ZyBkYXRhLXZpc2liaWxpdHktbW9kaWZpZXI9IlBVQkxJQ19NRVRIT0QiPjxlbGxpcHNlIGN4PSIyMTQiIGN5PSI2MS42NDg0IiBmaWxsPSIjRkZGRkZGIiByeD0iMyIgcnk9IjMiIHN0eWxlPSJzdHJva2U6IzAwMDAwMDtzdHJva2Utd2lkdGg6MTsiLz48L2c+PHRleHQgZmlsbD0iIzAwMDAwMCIgZm9udC1mYW1pbHk9IlZlcmRhbmEiIGZvbnQtc2l6ZT0iMTQiIGxlbmd0aEFkanVzdD0ic3BhY2luZyIgdGV4dExlbmd0aD0iMjc5LjMxNjQiIHg9IjIyMSIgeT0iNjQuOTk1MSI+ZmluZEF0dHJhY3Rpb25zKCk6IElPJmx0O0xpc3QmbHQ7QXR0cmFjdGlvbiZndDsmZ3Q7PC90ZXh0PjxnIGRhdGEtdmlzaWJpbGl0eS1tb2RpZmllcj0iUFVCTElDX01FVEhPRCI+PGVsbGlwc2UgY3g9IjIxNCIgY3k9Ijc3Ljk0NTMiIGZpbGw9IiNGRkZGRkYiIHJ4PSIzIiByeT0iMyIgc3R5bGU9InN0cm9rZTojMDAwMDAwO3N0cm9rZS13aWR0aDoxOyIvPjwvZz48dGV4dCBmaWxsPSIjMDAwMDAwIiBmb250LWZhbWlseT0iVmVyZGFuYSIgZm9udC1zaXplPSIxNCIgbGVuZ3RoQWRqdXN0PSJzcGFjaW5nIiB0ZXh0TGVuZ3RoPSIzMTAuOTY2OCIgeD0iMjIxIiB5PSI4MS4yOTIiPmZpbmRBcnRpc3RzRnJvbUxvY2F0aW9uKCk6IElPJmx0O0xpc3QmbHQ7QXJ0aXN0Jmd0OyZndDs8L3RleHQ+PGcgZGF0YS12aXNpYmlsaXR5LW1vZGlmaWVyPSJQVUJMSUNfTUVUSE9EIj48ZWxsaXBzZSBjeD0iMjE0IiBjeT0iOTQuMjQyMiIgZmlsbD0iI0ZGRkZGRiIgcng9IjMiIHJ5PSIzIiBzdHlsZT0ic3Ryb2tlOiMwMDAwMDA7c3Ryb2tlLXdpZHRoOjE7Ii8+PC9nPjx0ZXh0IGZpbGw9IiMwMDAwMDAiIGZvbnQtZmFtaWx5PSJWZXJkYW5hIiBmb250LXNpemU9IjE0IiBsZW5ndGhBZGp1c3Q9InNwYWNpbmciIHRleHRMZW5ndGg9IjMyNC4yMjE3IiB4PSIyMjEiIHk9Ijk3LjU4ODkiPmZpbmRNb3ZpZXNBYm91dExvY2F0aW9uKCk6IElPJmx0O0xpc3QmbHQ7TW92aWUmZ3Q7Jmd0OzwvdGV4dD48L2c+PGcgY2xhc3M9ImVudGl0eSIgZGF0YS1xdWFsaWZpZWQtbmFtZT0iR01OMyIgZGF0YS1zb3VyY2UtbGluZT0iMTAiIGlkPSJlbnQwMDA0Ij48cGF0aCBkPSJNNTg2LjYxLDM4LjMxIEw1ODYuNjEsNTQuNDUgTDU1MS40NCw1OC40NSBMNTg2LjYxLDYyLjQ1IEw1ODYuNjEsNzguNTc1NiBBMCwwIDAgMCAwIDU4Ni42MSw3OC41NzU2IEw3ODkuNjEwMiw3OC41NzU2IEEwLDAgMCAwIDAgNzg5LjYxMDIsNzguNTc1NiBMNzg5LjYxMDIsNDguMzEgTDc3OS42MTAyLDM4LjMxIEw1ODYuNjEsMzguMzEgQTAsMCAwIDAgMCA1ODYuNjEsMzguMzEiIGZpbGw9IiNGRkZGRkYiIHN0eWxlPSJzdHJva2U6IzAwMDAwMDtzdHJva2Utd2lkdGg6MTsiLz48cGF0aCBkPSJNNzc5LjYxMDIsMzguMzEgTDc3OS42MTAyLDQ4LjMxIEw3ODkuNjEwMiw0OC4zMSBMNzc5LjYxMDIsMzguMzEiIGZpbGw9IiNGRkZGRkYiIHN0eWxlPSJzdHJva2U6IzAwMDAwMDtzdHJva2Utd2lkdGg6MTsiLz48dGV4dCBmaWxsPSIjMDAwMDAwIiBmb250LWZhbWlseT0iVmVyZGFuYSIgZm9udC1zaXplPSIxMyIgbGVuZ3RoQWRqdXN0PSJzcGFjaW5nIiB0ZXh0TGVuZ3RoPSIxODIuMDAwMiIgeD0iNTkyLjYxIiB5PSI1NS4zNzY5Ij4mIzMyMDIwOyYjMzE4ODM7JiMxMjM5NDsmIzM4MzA2OyYjMjU5Njg7JiMyMjQxMTsmIzEyNDUyOyYjMTI1MzE7JiMxMjQ3OTsmIzEyNTQwOyYjMTI1MDE7JiMxMjQ1NTsmIzEyNTQwOyYjMTI0NzM7PC90ZXh0Pjx0ZXh0IGZpbGw9IiMwMDAwMDAiIGZvbnQtZmFtaWx5PSJWZXJkYW5hIiBmb250LXNpemU9IjEzIiBsZW5ndGhBZGp1c3Q9InNwYWNpbmciIHRleHRMZW5ndGg9IjE2NS4zMzEyIiB4PSI1OTIuNjEiIHk9IjcwLjUwOTciPiYjMTIzNzc7JiMxMjQwOTsmIzEyMzkwOyYjMTIzOTg7JiMyNTgwNTsmIzIwMzE2OyYjMTIzOTk7IElPICYjMTIzOTE7JiMxMjUyMTsmIzEyNDgzOyYjMTI1MDM7PC90ZXh0PjwvZz48IS0tY2xhc3MgV2lraWRhdGFEYXRhQWNjZXNzLS0+PGcgY2xhc3M9ImVudGl0eSIgZGF0YS1xdWFsaWZpZWQtbmFtZT0iV2lraWRhdGFEYXRhQWNjZXNzIiBkYXRhLXNvdXJjZS1saW5lPSIxNCIgaWQ9ImVudDAwMDYiPjxyZWN0IGZpbGw9IiNGRkZGRkYiIGhlaWdodD0iMTA5LjE4NzUiIHJ4PSIyLjUiIHJ5PSIyLjUiIHN0eWxlPSJzdHJva2U6IzAwMDAwMDtzdHJva2Utd2lkdGg6MTsiIHdpZHRoPSIzNDguMjIxNyIgeD0iMTIiIHk9IjE2NC44OSIvPjxlbGxpcHNlIGN4PSIxMTAuOTI4NyIgY3k9IjE3OC44OSIgZmlsbD0iI0ZGRkZGRiIgcng9IjkiIHJ5PSI5IiBzdHlsZT0ic3Ryb2tlOiMwMDAwMDA7c3Ryb2tlLXdpZHRoOjE7Ii8+PHBhdGggZD0iTTExMy44OTc1LDE4NC41MzA2IFExMTMuMzE5MywxODQuODI3NSAxMTIuNjc4NywxODQuOTY4MSBRMTEyLjAzODEsMTg1LjEyNDQgMTExLjMzNSwxODUuMTI0NCBRMTA4LjgzNSwxODUuMTI0NCAxMDcuNTA2OCwxODMuNDgzOCBRMTA2LjE5NDMsMTgxLjgyNzUgMTA2LjE5NDMsMTc4LjcwMjUgUTEwNi4xOTQzLDE3NS41Nzc1IDEwNy41MDY4LDE3My45MjEzIFExMDguODM1LDE3Mi4yNjUgMTExLjMzNSwxNzIuMjY1IFExMTIuMDM4MSwxNzIuMjY1IDExMi42Nzg3LDE3Mi40MjEzIFExMTMuMzM1LDE3Mi41Nzc1IDExMy44OTc1LDE3Mi44NzQ0IEwxMTMuODk3NSwxNzUuNTkzMSBRMTEzLjI3MjUsMTc1LjAxNSAxMTIuNjc4NywxNzQuNzQ5NCBRMTEyLjA4NSwxNzQuNDY4MSAxMTEuNDYsMTc0LjQ2ODEgUTExMC4xMTYyLDE3NC40NjgxIDEwOS40Mjg3LDE3NS41NDYzIFExMDguNzQxMiwxNzYuNjA4OCAxMDguNzQxMiwxNzguNzAyNSBRMTA4Ljc0MTIsMTgwLjc5NjMgMTA5LjQyODcsMTgxLjg3NDQgUTExMC4xMTYyLDE4Mi45MzY5IDExMS40NiwxODIuOTM2OSBRMTEyLjA4NSwxODIuOTM2OSAxMTIuNjc4NywxODIuNjcxMyBRMTEzLjI3MjUsMTgyLjM5IDExMy44OTc1LDE4MS44MTE5IEwxMTMuODk3NSwxODQuNTMwNiBaICIgZmlsbD0iIzAwMDAwMCIvPjx0ZXh0IGZpbGw9IiMwMDAwMDAiIGZvbnQtZmFtaWx5PSJWZXJkYW5hIiBmb250LXNpemU9IjE0IiBsZW5ndGhBZGp1c3Q9InNwYWNpbmciIHRleHRMZW5ndGg9IjE0Mi44NjQzIiB4PSIxMjguNDI4NyIgeT0iMTgzLjczNjciPldpa2lkYXRhRGF0YUFjY2VzczwvdGV4dD48bGluZSBzdHlsZT0ic3Ryb2tlOiMwMDAwMDA7c3Ryb2tlLXdpZHRoOjE7IiB4MT0iMTMiIHgyPSIzNTkuMjIxNyIgeTE9IjE5Mi44OSIgeTI9IjE5Mi44OSIvPjxnIGRhdGEtdmlzaWJpbGl0eS1tb2RpZmllcj0iUFJJVkFURV9GSUVMRCI+PHJlY3QgZmlsbD0ibm9uZSIgaGVpZ2h0PSI2IiBzdHlsZT0ic3Ryb2tlOiMwMDAwMDA7c3Ryb2tlLXdpZHRoOjE7IiB3aWR0aD0iNiIgeD0iMjAiIHk9IjIwMy41Mzg0Ii8+PC9nPjx0ZXh0IGZpbGw9IiMwMDAwMDAiIGZvbnQtZmFtaWx5PSJWZXJkYW5hIiBmb250LXNpemU9IjE0IiBsZW5ndGhBZGp1c3Q9InNwYWNpbmciIHRleHRMZW5ndGg9IjE1Ni41NDk4IiB4PSIzMCIgeT0iMjA5Ljg4NTEiPnNwYXJxbEVuZHBvaW50OiBTdHJpbmc8L3RleHQ+PGxpbmUgc3R5bGU9InN0cm9rZTojMDAwMDAwO3N0cm9rZS13aWR0aDoxOyIgeDE9IjEzIiB4Mj0iMzU5LjIyMTciIHkxPSIyMTcuMTg2OSIgeTI9IjIxNy4xODY5Ii8+PGcgZGF0YS12aXNpYmlsaXR5LW1vZGlmaWVyPSJQVUJMSUNfTUVUSE9EIj48ZWxsaXBzZSBjeD0iMjMiIGN5PSIyMzAuODM1MyIgZmlsbD0iI0ZGRkZGRiIgcng9IjMiIHJ5PSIzIiBzdHlsZT0ic3Ryb2tlOiMwMDAwMDA7c3Ryb2tlLXdpZHRoOjE7Ii8+PC9nPjx0ZXh0IGZpbGw9IiMwMDAwMDAiIGZvbnQtZmFtaWx5PSJWZXJkYW5hIiBmb250LXNpemU9IjE0IiBsZW5ndGhBZGp1c3Q9InNwYWNpbmciIHRleHRMZW5ndGg9IjI3OS4zMTY0IiB4PSIzMCIgeT0iMjM0LjE4MiI+ZmluZEF0dHJhY3Rpb25zKCk6IElPJmx0O0xpc3QmbHQ7QXR0cmFjdGlvbiZndDsmZ3Q7PC90ZXh0PjxnIGRhdGEtdmlzaWJpbGl0eS1tb2RpZmllcj0iUFVCTElDX01FVEhPRCI+PGVsbGlwc2UgY3g9IjIzIiBjeT0iMjQ3LjEzMjIiIGZpbGw9IiNGRkZGRkYiIHJ4PSIzIiByeT0iMyIgc3R5bGU9InN0cm9rZTojMDAwMDAwO3N0cm9rZS13aWR0aDoxOyIvPjwvZz48dGV4dCBmaWxsPSIjMDAwMDAwIiBmb250LWZhbWlseT0iVmVyZGFuYSIgZm9udC1zaXplPSIxNCIgbGVuZ3RoQWRqdXN0PSJzcGFjaW5nIiB0ZXh0TGVuZ3RoPSIzMTAuOTY2OCIgeD0iMzAiIHk9IjI1MC40Nzg5Ij5maW5kQXJ0aXN0c0Zyb21Mb2NhdGlvbigpOiBJTyZsdDtMaXN0Jmx0O0FydGlzdCZndDsmZ3Q7PC90ZXh0PjxnIGRhdGEtdmlzaWJpbGl0eS1tb2RpZmllcj0iUFVCTElDX01FVEhPRCI+PGVsbGlwc2UgY3g9IjIzIiBjeT0iMjYzLjQyOTEiIGZpbGw9IiNGRkZGRkYiIHJ4PSIzIiByeT0iMyIgc3R5bGU9InN0cm9rZTojMDAwMDAwO3N0cm9rZS13aWR0aDoxOyIvPjwvZz48dGV4dCBmaWxsPSIjMDAwMDAwIiBmb250LWZhbWlseT0iVmVyZGFuYSIgZm9udC1zaXplPSIxNCIgbGVuZ3RoQWRqdXN0PSJzcGFjaW5nIiB0ZXh0TGVuZ3RoPSIzMjQuMjIxNyIgeD0iMzAiIHk9IjI2Ni43NzU3Ij5maW5kTW92aWVzQWJvdXRMb2NhdGlvbigpOiBJTyZsdDtMaXN0Jmx0O01vdmllJmd0OyZndDs8L3RleHQ+PC9nPjwhLS1jbGFzcyBUZXN0RGF0YUFjY2Vzcy0tPjxnIGNsYXNzPSJlbnRpdHkiIGRhdGEtcXVhbGlmaWVkLW5hbWU9IlRlc3REYXRhQWNjZXNzIiBkYXRhLXNvdXJjZS1saW5lPSIyMSIgaWQ9ImVudDAwMDciPjxyZWN0IGZpbGw9IiNGRkZGRkYiIGhlaWdodD0iMTA5LjE4NzUiIHJ4PSIyLjUiIHJ5PSIyLjUiIHN0eWxlPSJzdHJva2U6IzAwMDAwMDtzdHJva2Utd2lkdGg6MTsiIHdpZHRoPSIzNDguMjIxNyIgeD0iMzk1IiB5PSIxNjQuODkiLz48ZWxsaXBzZSBjeD0iNTA5LjU4NjQiIGN5PSIxNzguODkiIGZpbGw9IiNGRkZGRkYiIHJ4PSI5IiByeT0iOSIgc3R5bGU9InN0cm9rZTojMDAwMDAwO3N0cm9rZS13aWR0aDoxOyIvPjxwYXRoIGQ9Ik01MTIuNTU1MiwxODQuNTMwNiBRNTExLjk3NzEsMTg0LjgyNzUgNTExLjMzNjQsMTg0Ljk2ODEgUTUxMC42OTU4LDE4NS4xMjQ0IDUwOS45OTI3LDE4NS4xMjQ0IFE1MDcuNDkyNywxODUuMTI0NCA1MDYuMTY0NiwxODMuNDgzOCBRNTA0Ljg1MjEsMTgxLjgyNzUgNTA0Ljg1MjEsMTc4LjcwMjUgUTUwNC44NTIxLDE3NS41Nzc1IDUwNi4xNjQ2LDE3My45MjEzIFE1MDcuNDkyNywxNzIuMjY1IDUwOS45OTI3LDE3Mi4yNjUgUTUxMC42OTU4LDE3Mi4yNjUgNTExLjMzNjQsMTcyLjQyMTMgUTUxMS45OTI3LDE3Mi41Nzc1IDUxMi41NTUyLDE3Mi44NzQ0IEw1MTIuNTU1MiwxNzUuNTkzMSBRNTExLjkzMDIsMTc1LjAxNSA1MTEuMzM2NCwxNzQuNzQ5NCBRNTEwLjc0MjcsMTc0LjQ2ODEgNTEwLjExNzcsMTc0LjQ2ODEgUTUwOC43NzM5LDE3NC40NjgxIDUwOC4wODY0LDE3NS41NDYzIFE1MDcuMzk4OSwxNzYuNjA4OCA1MDcuMzk4OSwxNzguNzAyNSBRNTA3LjM5ODksMTgwLjc5NjMgNTA4LjA4NjQsMTgxLjg3NDQgUTUwOC43NzM5LDE4Mi45MzY5IDUxMC4xMTc3LDE4Mi45MzY5IFE1MTAuNzQyNywxODIuOTM2OSA1MTEuMzM2NCwxODIuNjcxMyBRNTExLjkzMDIsMTgyLjM5IDUxMi41NTUyLDE4MS44MTE5IEw1MTIuNTU1MiwxODQuNTMwNiBaICIgZmlsbD0iIzAwMDAwMCIvPjx0ZXh0IGZpbGw9IiMwMDAwMDAiIGZvbnQtZmFtaWx5PSJWZXJkYW5hIiBmb250LXNpemU9IjE0IiBsZW5ndGhBZGp1c3Q9InNwYWNpbmciIHRleHRMZW5ndGg9IjExMS41NDg4IiB4PSI1MjcuMDg2NCIgeT0iMTgzLjczNjciPlRlc3REYXRhQWNjZXNzPC90ZXh0PjxsaW5lIHN0eWxlPSJzdHJva2U6IzAwMDAwMDtzdHJva2Utd2lkdGg6MTsiIHgxPSIzOTYiIHgyPSI3NDIuMjIxNyIgeTE9IjE5Mi44OSIgeTI9IjE5Mi44OSIvPjxnIGRhdGEtdmlzaWJpbGl0eS1tb2RpZmllcj0iUFJJVkFURV9GSUVMRCI+PHJlY3QgZmlsbD0ibm9uZSIgaGVpZ2h0PSI2IiBzdHlsZT0ic3Ryb2tlOiMwMDAwMDA7c3Ryb2tlLXdpZHRoOjE7IiB3aWR0aD0iNiIgeD0iNDAzIiB5PSIyMDMuNTM4NCIvPjwvZz48dGV4dCBmaWxsPSIjMDAwMDAwIiBmb250LWZhbWlseT0iVmVyZGFuYSIgZm9udC1zaXplPSIxNCIgbGVuZ3RoQWRqdXN0PSJzcGFjaW5nIiB0ZXh0TGVuZ3RoPSIyOTAuNTA2OCIgeD0iNDEzIiB5PSIyMDkuODg1MSI+dGVzdERhdGE6IE1hcCZsdDtTdHJpbmcsIExpc3QmbHQ7QXR0cmFjdGlvbiZndDsmZ3Q7PC90ZXh0PjxsaW5lIHN0eWxlPSJzdHJva2U6IzAwMDAwMDtzdHJva2Utd2lkdGg6MTsiIHgxPSIzOTYiIHgyPSI3NDIuMjIxNyIgeTE9IjIxNy4xODY5IiB5Mj0iMjE3LjE4NjkiLz48ZyBkYXRhLXZpc2liaWxpdHktbW9kaWZpZXI9IlBVQkxJQ19NRVRIT0QiPjxlbGxpcHNlIGN4PSI0MDYiIGN5PSIyMzAuODM1MyIgZmlsbD0iI0ZGRkZGRiIgcng9IjMiIHJ5PSIzIiBzdHlsZT0ic3Ryb2tlOiMwMDAwMDA7c3Ryb2tlLXdpZHRoOjE7Ii8+PC9nPjx0ZXh0IGZpbGw9IiMwMDAwMDAiIGZvbnQtZmFtaWx5PSJWZXJkYW5hIiBmb250LXNpemU9IjE0IiBsZW5ndGhBZGp1c3Q9InNwYWNpbmciIHRleHRMZW5ndGg9IjI3OS4zMTY0IiB4PSI0MTMiIHk9IjIzNC4xODIiPmZpbmRBdHRyYWN0aW9ucygpOiBJTyZsdDtMaXN0Jmx0O0F0dHJhY3Rpb24mZ3Q7Jmd0OzwvdGV4dD48ZyBkYXRhLXZpc2liaWxpdHktbW9kaWZpZXI9IlBVQkxJQ19NRVRIT0QiPjxlbGxpcHNlIGN4PSI0MDYiIGN5PSIyNDcuMTMyMiIgZmlsbD0iI0ZGRkZGRiIgcng9IjMiIHJ5PSIzIiBzdHlsZT0ic3Ryb2tlOiMwMDAwMDA7c3Ryb2tlLXdpZHRoOjE7Ii8+PC9nPjx0ZXh0IGZpbGw9IiMwMDAwMDAiIGZvbnQtZmFtaWx5PSJWZXJkYW5hIiBmb250LXNpemU9IjE0IiBsZW5ndGhBZGp1c3Q9InNwYWNpbmciIHRleHRMZW5ndGg9IjMxMC45NjY4IiB4PSI0MTMiIHk9IjI1MC40Nzg5Ij5maW5kQXJ0aXN0c0Zyb21Mb2NhdGlvbigpOiBJTyZsdDtMaXN0Jmx0O0FydGlzdCZndDsmZ3Q7PC90ZXh0PjxnIGRhdGEtdmlzaWJpbGl0eS1tb2RpZmllcj0iUFVCTElDX01FVEhPRCI+PGVsbGlwc2UgY3g9IjQwNiIgY3k9IjI2My40MjkxIiBmaWxsPSIjRkZGRkZGIiByeD0iMyIgcnk9IjMiIHN0eWxlPSJzdHJva2U6IzAwMDAwMDtzdHJva2Utd2lkdGg6MTsiLz48L2c+PHRleHQgZmlsbD0iIzAwMDAwMCIgZm9udC1mYW1pbHk9IlZlcmRhbmEiIGZvbnQtc2l6ZT0iMTQiIGxlbmd0aEFkanVzdD0ic3BhY2luZyIgdGV4dExlbmd0aD0iMzI0LjIyMTciIHg9IjQxMyIgeT0iMjY2Ljc3NTciPmZpbmRNb3ZpZXNBYm91dExvY2F0aW9uKCk6IElPJmx0O0xpc3QmbHQ7TW92aWUmZ3Q7Jmd0OzwvdGV4dD48L2c+PCEtLXJldmVyc2UgbGluayBEYXRhQWNjZXNzIHRvIFdpa2lkYXRhRGF0YUFjY2Vzcy0tPjxnIGNsYXNzPSJsaW5rIiBkYXRhLWVudGl0eS0xPSJlbnQwMDAyIiBkYXRhLWVudGl0eS0yPSJlbnQwMDA2IiBkYXRhLWxpbmstdHlwZT0iZXh0ZW5zaW9uIiBkYXRhLXNvdXJjZS1saW5lPSIyOCIgaWQ9ImxuazgiPjxwYXRoIGNvZGVMaW5lPSIyOCIgZD0iTTMwOC4yODksMTE2Ljc0OTcgQzI4Ni4wMjksMTM1LjI4OTcgMjczLjk5LDE0NS4zMSAyNTAuODMsMTY0LjYiIGZpbGw9Im5vbmUiIGlkPSJEYXRhQWNjZXNzLWJhY2t0by1XaWtpZGF0YURhdGFBY2Nlc3MiIHN0eWxlPSJzdHJva2U6IzAwMDAwMDtzdHJva2Utd2lkdGg6MTtzdHJva2UtZGFzaGFycmF5OjcsNzsiLz48cG9seWdvbiBmaWxsPSJub25lIiBwb2ludHM9IjMyMi4xMiwxMDUuMjMsMzA0LjQ0OTEsMTEyLjEzOTMsMzEyLjEyODgsMTIxLjM2LDMyMi4xMiwxMDUuMjMiIHN0eWxlPSJzdHJva2U6IzAwMDAwMDtzdHJva2Utd2lkdGg6MTsiLz48L2c+PCEtLXJldmVyc2UgbGluayBEYXRhQWNjZXNzIHRvIFRlc3REYXRhQWNjZXNzLS0+PGcgY2xhc3M9ImxpbmsiIGRhdGEtZW50aXR5LTE9ImVudDAwMDIiIGRhdGEtZW50aXR5LTI9ImVudDAwMDciIGRhdGEtbGluay10eXBlPSJleHRlbnNpb24iIGRhdGEtc291cmNlLWxpbmU9IjI5IiBpZD0ibG5rOSI+PHBhdGggY29kZUxpbmU9IjI5IiBkPSJNNDQ2LjI1MTQsMTE2LjcxMzEgQzQ2OC42MzE0LDEzNS4yNTMxIDQ4MC43NywxNDUuMzEgNTA0LjA1LDE2NC42IiBmaWxsPSJub25lIiBpZD0iRGF0YUFjY2Vzcy1iYWNrdG8tVGVzdERhdGFBY2Nlc3MiIHN0eWxlPSJzdHJva2U6IzAwMDAwMDtzdHJva2Utd2lkdGg6MTtzdHJva2UtZGFzaGFycmF5OjcsNzsiLz48cG9seWdvbiBmaWxsPSJub25lIiBwb2ludHM9IjQzMi4zOSwxMDUuMjMsNDQyLjQyMzcsMTIxLjMzMzUsNDUwLjA3OTEsMTEyLjA5MjYsNDMyLjM5LDEwNS4yMyIgc3R5bGU9InN0cm9rZTojMDAwMDAwO3N0cm9rZS13aWR0aDoxOyIvPjwvZz48P3BsYW50dW1sLXNyYyBwUDZuSVdEMTU0TngtT2duS3pIeUc1VzIyb2U4MkhPQXJrRmtSM0F1Y0xiZGRaUGdDUmpiaUQ4ZVdiWTg2QkhHS1BrMHVpU3lKVjBsZDRxWVBaN01zV3RsdGs2VVR6eUtEN1lKcW9IY0dYOFk5NzBUaU8zSjFHUkMzbTlrM0RxYml2NkdlRy1XTUcxMklKQ3pLd1JCQXJ2TDZGMi1udk5Bb0FaMTJNUDlnc1BMMUlvTjJYeTZ5ZlV2ZmRPNERfdzZzZVA5dmU3aWxGazRJME1TUWI1bDA1Tkg2MV9mRm50cjdyZmVScHdFQnRoai1fVnA1Z1FOYzNyWS1laFBDc1BqSjNsdjgtcUlqQVRla3NZbHFEeHMzV19VTml4R3RoYW1ZalBQaFo3QkMzaVhOOE9xSm9DYVk5YWhPNXJpWWozYjVKZ1BEbWRKTV82WTMxRmJRWWxKTFQxMnJsejdMcUZrRE13V28wb1pJUGRNTUU4RFlVVmVSc25fbENHT2toVE5BYXF1bW16QlNVREY/PjwvZz48L3N2Zz4=" class="uml" alt="uml diagram" title="" /></p>
<h3 id="114-resource">11.4 Resource によるリソース管理<a class="headerlink" href="#114-resource" title="Permanent link">&para;</a></h3>
<p><strong>ソースファイル</strong>: <code>app/java/src/main/java/ch11/Resource.java</code></p>
<p><code>Resource</code> は、リソースの取得（acquire）と解放（release）を安全に管理するための型です。cats-effect の <code>Resource</code> に相当する機能を提供します。</p>
<div class="highlight"><pre><span></span><code><span class="kd">public</span><span class="w"> </span><span class="kd">final</span><span class="w"> </span><span class="kd">class</span> <span class="nc">Resource</span><span class="o">&lt;</span><span class="n">A</span><span class="o">&gt;</span><span class="w"> </span><span class="p">{</span>

<span class="w">    </span><span class="kd">private</span><span class="w"> </span><span class="kd">final</span><span class="w"> </span><span class="n">IO</span><span class="o">&lt;</span><span class="n">A</span><span class="o">&gt;</span><span class="w"> </span><span class="n">acquire</span><span class="p">;</span>
<span class="w">    </span><span class="kd">private</span><span class="w"> </span><span class="kd">final</span><span class="w"> </span><span class="n">Consumer</span><span class="o">&lt;</span><span class="n">A</span><span class="o">&gt;</span><span class="w"> </span><span class="n">release</span><span class="p">;</span>

<span class="w">    </span><span class="kd">private</span><span class="w"> </span><span class="nf">Resource</span><span class="p">(</span><span class="n">IO</span><span class="o">&lt;</span><span class="n">A</span><span class="o">&gt;</span><span class="w"> </span><span class="n">acquire</span><span class="p">,</span><span class="w"> </span><span class="n">Consumer</span><span class="o">&lt;</span><span class="n">A</span><span class="o">&gt;</span><span class="w"> </span><span class="n">release</span><span class="p">)</span><span class="w"> </span><span class="p">{</span>
<span class="w">        </span><span class="k">this</span><span class="p">.</span><span class="na">acquire</span><span class="w"> </span><span class="o">=</span><span class="w"> </span><span class="n">acquire</span><span class="p">;</span>
<span class="w">        </span><span class="k">this</span><span class="p">.</span><span class="na">release</span><span class="w"> </span><span class="o">=</span><span class="w"> </span><span class="n">release</span><span class="p">;</span>
<span class="w">    </span><span class="p">}</span>

<span class="w">    </span><span class="c1">// リソースを作成</span>
<span class="w">    </span><span class="kd">public</span><span class="w"> </span><span class="kd">static</span><span class="w"> </span><span class="o">&lt;</span><span class="n">A</span><span class="o">&gt;</span><span class="w"> </span><span class="n">Resource</span><span class="o">&lt;</span><span class="n">A</span><span class="o">&gt;</span><span class="w"> </span><span class="nf">make</span><span class="p">(</span><span class="n">IO</span><span class="o">&lt;</span><span class="n">A</span><span class="o">&gt;</span><span class="w"> </span><span class="n">acquire</span><span class="p">,</span><span class="w"> </span><span class="n">Consumer</span><span class="o">&lt;</span><span class="n">A</span><span class="o">&gt;</span><span class="w"> </span><span class="n">release</span><span class="p">)</span><span class="w"> </span><span class="p">{</span>
<span class="w">        </span><span class="k">return</span><span class="w"> </span><span class="k">new</span><span class="w"> </span><span class="n">Resource</span><span class="o">&lt;&gt;</span><span class="p">(</span><span class="n">acquire</span><span class="p">,</span><span class="w"> </span><span class="n">release</span><span class="p">);</span>
<span class="w">    </span><span class="p">}</span>

<span class="w">    </span><span class="c1">// AutoCloseable からリソースを作成</span>
<span class="w">    </span><span class="kd">public</span><span class="w"> </span><span class="kd">static</span><span class="w"> </span><span class="o">&lt;</span><span class="n">A</span><span class="w"> </span><span class="kd">extends</span><span class="w"> </span><span class="n">AutoCloseable</span><span class="o">&gt;</span><span class="w"> </span><span class="n">Resource</span><span class="o">&lt;</span><span class="n">A</span><span class="o">&gt;</span><span class="w"> </span><span class="nf">fromAutoCloseable</span><span class="p">(</span><span class="n">IO</span><span class="o">&lt;</span><span class="n">A</span><span class="o">&gt;</span><span class="w"> </span><span class="n">acquire</span><span class="p">)</span><span class="w"> </span><span class="p">{</span>
<span class="w">        </span><span class="k">return</span><span class="w"> </span><span class="k">new</span><span class="w"> </span><span class="n">Resource</span><span class="o">&lt;&gt;</span><span class="p">(</span><span class="n">acquire</span><span class="p">,</span><span class="w"> </span><span class="n">a</span><span class="w"> </span><span class="o">-&gt;</span><span class="w"> </span><span class="p">{</span>
<span class="w">            </span><span class="k">try</span><span class="w"> </span><span class="p">{</span>
<span class="w">                </span><span class="n">a</span><span class="p">.</span><span class="na">close</span><span class="p">();</span>
<span class="w">            </span><span class="p">}</span><span class="w"> </span><span class="k">catch</span><span class="w"> </span><span class="p">(</span><span class="n">Exception</span><span class="w"> </span><span class="n">e</span><span class="p">)</span><span class="w"> </span><span class="p">{</span>
<span class="w">                </span><span class="k">throw</span><span class="w"> </span><span class="k">new</span><span class="w"> </span><span class="n">RuntimeException</span><span class="p">(</span><span class="s">&quot;Failed to close resource&quot;</span><span class="p">,</span><span class="w"> </span><span class="n">e</span><span class="p">);</span>
<span class="w">            </span><span class="p">}</span>
<span class="w">        </span><span class="p">});</span>
<span class="w">    </span><span class="p">}</span>

<span class="w">    </span><span class="c1">// リソースを使用して処理を実行</span>
<span class="w">    </span><span class="c1">// リソースは処理完了後（成功・失敗問わず）に必ず解放される</span>
<span class="w">    </span><span class="kd">public</span><span class="w"> </span><span class="o">&lt;</span><span class="n">B</span><span class="o">&gt;</span><span class="w"> </span><span class="n">IO</span><span class="o">&lt;</span><span class="n">B</span><span class="o">&gt;</span><span class="w"> </span><span class="nf">use</span><span class="p">(</span><span class="n">Function</span><span class="o">&lt;</span><span class="n">A</span><span class="p">,</span><span class="w"> </span><span class="n">IO</span><span class="o">&lt;</span><span class="n">B</span><span class="o">&gt;&gt;</span><span class="w"> </span><span class="n">f</span><span class="p">)</span><span class="w"> </span><span class="p">{</span>
<span class="w">        </span><span class="k">return</span><span class="w"> </span><span class="n">acquire</span><span class="p">.</span><span class="na">flatMap</span><span class="p">(</span><span class="n">resource</span><span class="w"> </span><span class="o">-&gt;</span>
<span class="w">                </span><span class="n">f</span><span class="p">.</span><span class="na">apply</span><span class="p">(</span><span class="n">resource</span><span class="p">)</span>
<span class="w">                        </span><span class="p">.</span><span class="na">guarantee</span><span class="p">(</span><span class="n">IO</span><span class="p">.</span><span class="na">effect</span><span class="p">(()</span><span class="w"> </span><span class="o">-&gt;</span><span class="w"> </span><span class="n">release</span><span class="p">.</span><span class="na">accept</span><span class="p">(</span><span class="n">resource</span><span class="p">)))</span>
<span class="w">        </span><span class="p">);</span>
<span class="w">    </span><span class="p">}</span>
<span class="p">}</span>
</code></pre></div>
<h4 id="resource">Resource の使用例<a class="headerlink" href="#resource" title="Permanent link">&para;</a></h4>
<div class="highlight"><pre><span></span><code><span class="c1">// ファイルリソースの例</span>
<span class="n">Resource</span><span class="o">&lt;</span><span class="n">BufferedReader</span><span class="o">&gt;</span><span class="w"> </span><span class="n">fileResource</span><span class="w"> </span><span class="o">=</span><span class="w"> </span><span class="n">Resource</span><span class="p">.</span><span class="na">fromAutoCloseable</span><span class="p">(</span>
<span class="w">        </span><span class="n">IO</span><span class="p">.</span><span class="na">delay</span><span class="p">(()</span><span class="w"> </span><span class="o">-&gt;</span><span class="w"> </span><span class="k">new</span><span class="w"> </span><span class="n">BufferedReader</span><span class="p">(</span><span class="k">new</span><span class="w"> </span><span class="n">FileReader</span><span class="p">(</span><span class="s">&quot;data.txt&quot;</span><span class="p">)))</span>
<span class="p">);</span>

<span class="c1">// リソースを使用して処理を実行</span>
<span class="n">IO</span><span class="o">&lt;</span><span class="n">String</span><span class="o">&gt;</span><span class="w"> </span><span class="n">readFirstLine</span><span class="w"> </span><span class="o">=</span><span class="w"> </span><span class="n">fileResource</span><span class="p">.</span><span class="na">use</span><span class="p">(</span><span class="n">reader</span><span class="w"> </span><span class="o">-&gt;</span>
<span class="w">        </span><span class="n">IO</span><span class="p">.</span><span class="na">delay</span><span class="p">(</span><span class="n">reader</span><span class="p">::</span><span class="n">readLine</span><span class="p">)</span>
<span class="p">);</span>

<span class="c1">// ファイルは自動的にクローズされる</span>
<span class="n">String</span><span class="w"> </span><span class="n">firstLine</span><span class="w"> </span><span class="o">=</span><span class="w"> </span><span class="n">readFirstLine</span><span class="p">.</span><span class="na">unsafeRun</span><span class="p">();</span>
</code></pre></div>
<p><img src="data:image/svg+xml;base64,PD9wbGFudHVtbCAxLjIwMjYuMT8+PHN2ZyB4bWxucz0iaHR0cDovL3d3dy53My5vcmcvMjAwMC9zdmciIHhtbG5zOnhsaW5rPSJodHRwOi8vd3d3LnczLm9yZy8xOTk5L3hsaW5rIiBjb250ZW50U3R5bGVUeXBlPSJ0ZXh0L2NzcyIgZGF0YS1kaWFncmFtLXR5cGU9IlNFUVVFTkNFIiBoZWlnaHQ9IjU2NHB4IiBwcmVzZXJ2ZUFzcGVjdFJhdGlvPSJub25lIiBzdHlsZT0id2lkdGg6NzQ1cHg7aGVpZ2h0OjU2NHB4O2JhY2tncm91bmQ6I0ZGRkZGRjsiIHZlcnNpb249IjEuMSIgdmlld0JveD0iMCAwIDc0NSA1NjQiIHdpZHRoPSI3NDVweCIgem9vbUFuZFBhbj0ibWFnbmlmeSI+PGRlZnMvPjxnPjxnIGNsYXNzPSJwYXJ0aWNpcGFudC1saWZlbGluZSIgZGF0YS1lbnRpdHktdWlkPSJwYXJ0MSIgZGF0YS1xdWFsaWZpZWQtbmFtZT0iYXBwIiBpZD0icGFydDEtbGlmZWxpbmUiPjxnPjx0aXRsZT5BcHBsaWNhdGlvbjwvdGl0bGU+PHJlY3QgZmlsbD0iIzAwMDAwMCIgZmlsbC1vcGFjaXR5PSIwLjAwMDAwIiBoZWlnaHQ9IjQ5My4yNTc4IiB3aWR0aD0iOCIgeD0iNjIuMTExOCIgeT0iMzYuMjk2OSIvPjxsaW5lIHN0eWxlPSJzdHJva2U6IzAwMDAwMDtzdHJva2Utd2lkdGg6MTtzdHJva2UtZGFzaGFycmF5OjUsNTsiIHgxPSI2NiIgeDI9IjY2IiB5MT0iMzYuMjk2OSIgeTI9IjUyOS41NTQ3Ii8+PC9nPjwvZz48ZyBjbGFzcz0icGFydGljaXBhbnQtbGlmZWxpbmUiIGRhdGEtZW50aXR5LXVpZD0icGFydDIiIGRhdGEtcXVhbGlmaWVkLW5hbWU9InJlcyIgaWQ9InBhcnQyLWxpZmVsaW5lIj48Zz48dGl0bGU+UmVzb3VyY2U8L3RpdGxlPjxyZWN0IGZpbGw9IiMwMDAwMDAiIGZpbGwtb3BhY2l0eT0iMC4wMDAwMCIgaGVpZ2h0PSI0OTMuMjU3OCIgd2lkdGg9IjgiIHg9IjMwMy40MjM4IiB5PSIzNi4yOTY5Ii8+PGxpbmUgc3R5bGU9InN0cm9rZTojMDAwMDAwO3N0cm9rZS13aWR0aDoxO3N0cm9rZS1kYXNoYXJyYXk6NSw1OyIgeDE9IjMwNi44NTQiIHgyPSIzMDYuODU0IiB5MT0iMzYuMjk2OSIgeTI9IjUyOS41NTQ3Ii8+PC9nPjwvZz48ZyBjbGFzcz0icGFydGljaXBhbnQtbGlmZWxpbmUiIGRhdGEtZW50aXR5LXVpZD0icGFydDMiIGRhdGEtcXVhbGlmaWVkLW5hbWU9InJlYWRlciIgaWQ9InBhcnQzLWxpZmVsaW5lIj48Zz48dGl0bGU+QnVmZmVyZWRSZWFkZXI8L3RpdGxlPjxyZWN0IGZpbGw9IiMwMDAwMDAiIGZpbGwtb3BhY2l0eT0iMC4wMDAwMCIgaGVpZ2h0PSI0OTMuMjU3OCIgd2lkdGg9IjgiIHg9IjYwNC4zOTc1IiB5PSIzNi4yOTY5Ii8+PGxpbmUgc3R5bGU9InN0cm9rZTojMDAwMDAwO3N0cm9rZS13aWR0aDoxO3N0cm9rZS1kYXNoYXJyYXk6NSw1OyIgeDE9IjYwOC4yMDc1IiB4Mj0iNjA4LjIwNzUiIHkxPSIzNi4yOTY5IiB5Mj0iNTI5LjU1NDciLz48L2c+PC9nPjxnIGNsYXNzPSJwYXJ0aWNpcGFudC1saWZlbGluZSIgZGF0YS1lbnRpdHktdWlkPSJwYXJ0NCIgZGF0YS1xdWFsaWZpZWQtbmFtZT0iZmlsZSIgaWQ9InBhcnQ0LWxpZmVsaW5lIj48Zz48dGl0bGU+RmlsZTwvdGl0bGU+PHJlY3QgZmlsbD0iIzAwMDAwMCIgZmlsbC1vcGFjaXR5PSIwLjAwMDAwIiBoZWlnaHQ9IjQ5My4yNTc4IiB3aWR0aD0iOCIgeD0iNzE1LjgxMDEiIHk9IjM2LjI5NjkiLz48bGluZSBzdHlsZT0ic3Ryb2tlOiMwMDAwMDA7c3Ryb2tlLXdpZHRoOjE7c3Ryb2tlLWRhc2hhcnJheTo1LDU7IiB4MT0iNzE5LjU4NzQiIHgyPSI3MTkuNTg3NCIgeTE9IjM2LjI5NjkiIHkyPSI1MjkuNTU0NyIvPjwvZz48L2c+PGcgY2xhc3M9InBhcnRpY2lwYW50IHBhcnRpY2lwYW50LWhlYWQiIGRhdGEtZW50aXR5LXVpZD0icGFydDEiIGRhdGEtcXVhbGlmaWVkLW5hbWU9ImFwcCIgaWQ9InBhcnQxLWhlYWQiPjxyZWN0IGZpbGw9IiNGRkZGRkYiIGhlaWdodD0iMzAuMjk2OSIgcng9IjIuNSIgcnk9IjIuNSIgc3R5bGU9InN0cm9rZTojMDAwMDAwO3N0cm9rZS13aWR0aDoxOyIgd2lkdGg9IjkyLjIyMzYiIHg9IjIwIiB5PSI1Ii8+PHRleHQgZmlsbD0iIzAwMDAwMCIgZm9udC1mYW1pbHk9IlZlcmRhbmEiIGZvbnQtc2l6ZT0iMTQiIGxlbmd0aEFkanVzdD0ic3BhY2luZyIgdGV4dExlbmd0aD0iNzguMjIzNiIgeD0iMjciIHk9IjI0Ljk5NTEiPkFwcGxpY2F0aW9uPC90ZXh0PjwvZz48ZyBjbGFzcz0icGFydGljaXBhbnQgcGFydGljaXBhbnQtdGFpbCIgZGF0YS1lbnRpdHktdWlkPSJwYXJ0MSIgZGF0YS1xdWFsaWZpZWQtbmFtZT0iYXBwIiBpZD0icGFydDEtdGFpbCI+PHJlY3QgZmlsbD0iI0ZGRkZGRiIgaGVpZ2h0PSIzMC4yOTY5IiByeD0iMi41IiByeT0iMi41IiBzdHlsZT0ic3Ryb2tlOiMwMDAwMDA7c3Ryb2tlLXdpZHRoOjE7IiB3aWR0aD0iOTIuMjIzNiIgeD0iMjAiIHk9IjUyOC41NTQ3Ii8+PHRleHQgZmlsbD0iIzAwMDAwMCIgZm9udC1mYW1pbHk9IlZlcmRhbmEiIGZvbnQtc2l6ZT0iMTQiIGxlbmd0aEFkanVzdD0ic3BhY2luZyIgdGV4dExlbmd0aD0iNzguMjIzNiIgeD0iMjciIHk9IjU0OC41NDk4Ij5BcHBsaWNhdGlvbjwvdGV4dD48L2c+PGcgY2xhc3M9InBhcnRpY2lwYW50IHBhcnRpY2lwYW50LWhlYWQiIGRhdGEtZW50aXR5LXVpZD0icGFydDIiIGRhdGEtcXVhbGlmaWVkLW5hbWU9InJlcyIgaWQ9InBhcnQyLWhlYWQiPjxyZWN0IGZpbGw9IiNGRkZGRkYiIGhlaWdodD0iMzAuMjk2OSIgcng9IjIuNSIgcnk9IjIuNSIgc3R5bGU9InN0cm9rZTojMDAwMDAwO3N0cm9rZS13aWR0aDoxOyIgd2lkdGg9Ijc5LjEzOTYiIHg9IjI2Ny44NTQiIHk9IjUiLz48dGV4dCBmaWxsPSIjMDAwMDAwIiBmb250LWZhbWlseT0iVmVyZGFuYSIgZm9udC1zaXplPSIxNCIgbGVuZ3RoQWRqdXN0PSJzcGFjaW5nIiB0ZXh0TGVuZ3RoPSI2NS4xMzk2IiB4PSIyNzQuODU0IiB5PSIyNC45OTUxIj5SZXNvdXJjZTwvdGV4dD48L2c+PGcgY2xhc3M9InBhcnRpY2lwYW50IHBhcnRpY2lwYW50LXRhaWwiIGRhdGEtZW50aXR5LXVpZD0icGFydDIiIGRhdGEtcXVhbGlmaWVkLW5hbWU9InJlcyIgaWQ9InBhcnQyLXRhaWwiPjxyZWN0IGZpbGw9IiNGRkZGRkYiIGhlaWdodD0iMzAuMjk2OSIgcng9IjIuNSIgcnk9IjIuNSIgc3R5bGU9InN0cm9rZTojMDAwMDAwO3N0cm9rZS13aWR0aDoxOyIgd2lkdGg9Ijc5LjEzOTYiIHg9IjI2Ny44NTQiIHk9IjUyOC41NTQ3Ii8+PHRleHQgZmlsbD0iIzAwMDAwMCIgZm9udC1mYW1pbHk9IlZlcmRhbmEiIGZvbnQtc2l6ZT0iMTQiIGxlbmd0aEFkanVzdD0ic3BhY2luZyIgdGV4dExlbmd0aD0iNjUuMTM5NiIgeD0iMjc0Ljg1NCIgeT0iNTQ4LjU0OTgiPlJlc291cmNlPC90ZXh0PjwvZz48ZyBjbGFzcz0icGFydGljaXBhbnQgcGFydGljaXBhbnQtaGVhZCIgZGF0YS1lbnRpdHktdWlkPSJwYXJ0MyIgZGF0YS1xdWFsaWZpZWQtbmFtZT0icmVhZGVyIiBpZD0icGFydDMtaGVhZCI+PHJlY3QgZmlsbD0iI0ZGRkZGRiIgaGVpZ2h0PSIzMC4yOTY5IiByeD0iMi41IiByeT0iMi41IiBzdHlsZT0ic3Ryb2tlOiMwMDAwMDA7c3Ryb2tlLXdpZHRoOjE7IiB3aWR0aD0iMTI0LjM3OTkiIHg9IjU0Ni4yMDc1IiB5PSI1Ii8+PHRleHQgZmlsbD0iIzAwMDAwMCIgZm9udC1mYW1pbHk9IlZlcmRhbmEiIGZvbnQtc2l6ZT0iMTQiIGxlbmd0aEFkanVzdD0ic3BhY2luZyIgdGV4dExlbmd0aD0iMTEwLjM3OTkiIHg9IjU1My4yMDc1IiB5PSIyNC45OTUxIj5CdWZmZXJlZFJlYWRlcjwvdGV4dD48L2c+PGcgY2xhc3M9InBhcnRpY2lwYW50IHBhcnRpY2lwYW50LXRhaWwiIGRhdGEtZW50aXR5LXVpZD0icGFydDMiIGRhdGEtcXVhbGlmaWVkLW5hbWU9InJlYWRlciIgaWQ9InBhcnQzLXRhaWwiPjxyZWN0IGZpbGw9IiNGRkZGRkYiIGhlaWdodD0iMzAuMjk2OSIgcng9IjIuNSIgcnk9IjIuNSIgc3R5bGU9InN0cm9rZTojMDAwMDAwO3N0cm9rZS13aWR0aDoxOyIgd2lkdGg9IjEyNC4zNzk5IiB4PSI1NDYuMjA3NSIgeT0iNTI4LjU1NDciLz48dGV4dCBmaWxsPSIjMDAwMDAwIiBmb250LWZhbWlseT0iVmVyZGFuYSIgZm9udC1zaXplPSIxNCIgbGVuZ3RoQWRqdXN0PSJzcGFjaW5nIiB0ZXh0TGVuZ3RoPSIxMTAuMzc5OSIgeD0iNTUzLjIwNzUiIHk9IjU0OC41NDk4Ij5CdWZmZXJlZFJlYWRlcjwvdGV4dD48L2c+PGcgY2xhc3M9InBhcnRpY2lwYW50IHBhcnRpY2lwYW50LWhlYWQiIGRhdGEtZW50aXR5LXVpZD0icGFydDQiIGRhdGEtcXVhbGlmaWVkLW5hbWU9ImZpbGUiIGlkPSJwYXJ0NC1oZWFkIj48cmVjdCBmaWxsPSIjRkZGRkZGIiBoZWlnaHQ9IjMwLjI5NjkiIHJ4PSIyLjUiIHJ5PSIyLjUiIHN0eWxlPSJzdHJva2U6IzAwMDAwMDtzdHJva2Utd2lkdGg6MTsiIHdpZHRoPSIzOC40NDUzIiB4PSI3MDAuNTg3NCIgeT0iNSIvPjx0ZXh0IGZpbGw9IiMwMDAwMDAiIGZvbnQtZmFtaWx5PSJWZXJkYW5hIiBmb250LXNpemU9IjE0IiBsZW5ndGhBZGp1c3Q9InNwYWNpbmciIHRleHRMZW5ndGg9IjI0LjQ0NTMiIHg9IjcwNy41ODc0IiB5PSIyNC45OTUxIj5GaWxlPC90ZXh0PjwvZz48ZyBjbGFzcz0icGFydGljaXBhbnQgcGFydGljaXBhbnQtdGFpbCIgZGF0YS1lbnRpdHktdWlkPSJwYXJ0NCIgZGF0YS1xdWFsaWZpZWQtbmFtZT0iZmlsZSIgaWQ9InBhcnQ0LXRhaWwiPjxyZWN0IGZpbGw9IiNGRkZGRkYiIGhlaWdodD0iMzAuMjk2OSIgcng9IjIuNSIgcnk9IjIuNSIgc3R5bGU9InN0cm9rZTojMDAwMDAwO3N0cm9rZS13aWR0aDoxOyIgd2lkdGg9IjM4LjQ0NTMiIHg9IjcwMC41ODc0IiB5PSI1MjguNTU0NyIvPjx0ZXh0IGZpbGw9IiMwMDAwMDAiIGZvbnQtZmFtaWx5PSJWZXJkYW5hIiBmb250LXNpemU9IjE0IiBsZW5ndGhBZGp1c3Q9InNwYWNpbmciIHRleHRMZW5ndGg9IjI0LjQ0NTMiIHg9IjcwNy41ODc0IiB5PSI1NDguNTQ5OCI+RmlsZTwvdGV4dD48L2c+PGcgY2xhc3M9Im1lc3NhZ2UiIGRhdGEtZW50aXR5LTE9InBhcnQxIiBkYXRhLWVudGl0eS0yPSJwYXJ0MiIgaWQ9Im1zZzEiPjxwb2x5Z29uIGZpbGw9IiMwMDAwMDAiIHBvaW50cz0iMjk1LjQyMzgsNjMuNDI5NywzMDUuNDIzOCw2Ny40Mjk3LDI5NS40MjM4LDcxLjQyOTcsMjk5LjQyMzgsNjcuNDI5NyIgc3R5bGU9InN0cm9rZTojMDAwMDAwO3N0cm9rZS13aWR0aDoxOyIvPjxsaW5lIHN0eWxlPSJzdHJva2U6IzAwMDAwMDtzdHJva2Utd2lkdGg6MTsiIHgxPSI2Ni4xMTE4IiB4Mj0iMzAxLjQyMzgiIHkxPSI2Ny40Mjk3IiB5Mj0iNjcuNDI5NyIvPjx0ZXh0IGZpbGw9IiMwMDAwMDAiIGZvbnQtZmFtaWx5PSJWZXJkYW5hIiBmb250LXNpemU9IjEzIiBsZW5ndGhBZGp1c3Q9InNwYWNpbmciIHRleHRMZW5ndGg9IjIxNy4zMTIiIHg9IjczLjExMTgiIHk9IjYyLjM2MzgiPlJlc291cmNlLm1ha2UoYWNxdWlyZSkocmVsZWFzZSk8L3RleHQ+PC9nPjxnIGNsYXNzPSJtZXNzYWdlIiBkYXRhLWVudGl0eS0xPSJwYXJ0MiIgZGF0YS1lbnRpdHktMj0icGFydDMiIGlkPSJtc2cyIj48cG9seWdvbiBmaWxsPSIjMDAwMDAwIiBwb2ludHM9IjU5Ni4zOTc1LDkyLjU2MjUsNjA2LjM5NzUsOTYuNTYyNSw1OTYuMzk3NSwxMDAuNTYyNSw2MDAuMzk3NSw5Ni41NjI1IiBzdHlsZT0ic3Ryb2tlOiMwMDAwMDA7c3Ryb2tlLXdpZHRoOjE7Ii8+PGxpbmUgc3R5bGU9InN0cm9rZTojMDAwMDAwO3N0cm9rZS13aWR0aDoxOyIgeDE9IjMwNy40MjM4IiB4Mj0iNjAyLjM5NzUiIHkxPSI5Ni41NjI1IiB5Mj0iOTYuNTYyNSIvPjx0ZXh0IGZpbGw9IiMwMDAwMDAiIGZvbnQtZmFtaWx5PSJWZXJkYW5hIiBmb250LXNpemU9IjEzIiBsZW5ndGhBZGp1c3Q9InNwYWNpbmciIHRleHRMZW5ndGg9IjI3Ni45NzM2IiB4PSIzMTQuNDIzOCIgeT0iOTEuNDk2NiI+YWNxdWlyZTogSU8uZGVsYXkobmV3IEJ1ZmZlcmVkUmVhZGVyKC4uLikpPC90ZXh0PjwvZz48ZyBjbGFzcz0ibWVzc2FnZSIgZGF0YS1lbnRpdHktMT0icGFydDMiIGRhdGEtZW50aXR5LTI9InBhcnQ0IiBpZD0ibXNnMyI+PHBvbHlnb24gZmlsbD0iIzAwMDAwMCIgcG9pbnRzPSI3MDcuODEwMSwxMjEuNjk1Myw3MTcuODEwMSwxMjUuNjk1Myw3MDcuODEwMSwxMjkuNjk1Myw3MTEuODEwMSwxMjUuNjk1MyIgc3R5bGU9InN0cm9rZTojMDAwMDAwO3N0cm9rZS13aWR0aDoxOyIvPjxsaW5lIHN0eWxlPSJzdHJva2U6IzAwMDAwMDtzdHJva2Utd2lkdGg6MTsiIHgxPSI2MDguMzk3NSIgeDI9IjcxMy44MTAxIiB5MT0iMTI1LjY5NTMiIHkyPSIxMjUuNjk1MyIvPjx0ZXh0IGZpbGw9IiMwMDAwMDAiIGZvbnQtZmFtaWx5PSJWZXJkYW5hIiBmb250LXNpemU9IjEzIiBsZW5ndGhBZGp1c3Q9InNwYWNpbmciIHRleHRMZW5ndGg9IjMyLjQ0MjkiIHg9IjYxNS4zOTc1IiB5PSIxMjAuNjI5NCI+b3BlbjwvdGV4dD48L2c+PGcgY2xhc3M9Im1lc3NhZ2UiIGRhdGEtZW50aXR5LTE9InBhcnQ0IiBkYXRhLWVudGl0eS0yPSJwYXJ0MyIgaWQ9Im1zZzQiPjxwb2x5Z29uIGZpbGw9IiMwMDAwMDAiIHBvaW50cz0iNjE5LjM5NzUsMTUwLjgyODEsNjA5LjM5NzUsMTU0LjgyODEsNjE5LjM5NzUsMTU4LjgyODEsNjE1LjM5NzUsMTU0LjgyODEiIHN0eWxlPSJzdHJva2U6IzAwMDAwMDtzdHJva2Utd2lkdGg6MTsiLz48bGluZSBzdHlsZT0ic3Ryb2tlOiMwMDAwMDA7c3Ryb2tlLXdpZHRoOjE7c3Ryb2tlLWRhc2hhcnJheToyLDI7IiB4MT0iNjEzLjM5NzUiIHgyPSI3MTguODEwMSIgeTE9IjE1NC44MjgxIiB5Mj0iMTU0LjgyODEiLz48dGV4dCBmaWxsPSIjMDAwMDAwIiBmb250LWZhbWlseT0iVmVyZGFuYSIgZm9udC1zaXplPSIxMyIgbGVuZ3RoQWRqdXN0PSJzcGFjaW5nIiB0ZXh0TGVuZ3RoPSI2OC4yMzczIiB4PSI2MjUuMzk3NSIgeT0iMTQ5Ljc2MjIiPmZpbGUgaGFuZGxlPC90ZXh0PjwvZz48ZyBjbGFzcz0ibWVzc2FnZSIgZGF0YS1lbnRpdHktMT0icGFydDEiIGRhdGEtZW50aXR5LTI9InBhcnQyIiBpZD0ibXNnNSI+PHBvbHlnb24gZmlsbD0iIzAwMDAwMCIgcG9pbnRzPSIyOTUuNDIzOCwxNzkuOTYwOSwzMDUuNDIzOCwxODMuOTYwOSwyOTUuNDIzOCwxODcuOTYwOSwyOTkuNDIzOCwxODMuOTYwOSIgc3R5bGU9InN0cm9rZTojMDAwMDAwO3N0cm9rZS13aWR0aDoxOyIvPjxsaW5lIHN0eWxlPSJzdHJva2U6IzAwMDAwMDtzdHJva2Utd2lkdGg6MTsiIHgxPSI2Ni4xMTE4IiB4Mj0iMzAxLjQyMzgiIHkxPSIxODMuOTYwOSIgeTI9IjE4My45NjA5Ii8+PHRleHQgZmlsbD0iIzAwMDAwMCIgZm9udC1mYW1pbHk9IlZlcmRhbmEiIGZvbnQtc2l6ZT0iMTMiIGxlbmd0aEFkanVzdD0ic3BhY2luZyIgdGV4dExlbmd0aD0iMTMzLjM5NiIgeD0iNzMuMTExOCIgeT0iMTc4Ljg5NSI+dXNlIChyZWFkIG9wZXJhdGlvbik8L3RleHQ+PC9nPjxnIGNsYXNzPSJtZXNzYWdlIiBkYXRhLWVudGl0eS0xPSJwYXJ0MiIgZGF0YS1lbnRpdHktMj0icGFydDMiIGlkPSJtc2c2Ij48cG9seWdvbiBmaWxsPSIjMDAwMDAwIiBwb2ludHM9IjU5Ni4zOTc1LDIwOS4wOTM4LDYwNi4zOTc1LDIxMy4wOTM4LDU5Ni4zOTc1LDIxNy4wOTM4LDYwMC4zOTc1LDIxMy4wOTM4IiBzdHlsZT0ic3Ryb2tlOiMwMDAwMDA7c3Ryb2tlLXdpZHRoOjE7Ii8+PGxpbmUgc3R5bGU9InN0cm9rZTojMDAwMDAwO3N0cm9rZS13aWR0aDoxOyIgeDE9IjMwNy40MjM4IiB4Mj0iNjAyLjM5NzUiIHkxPSIyMTMuMDkzOCIgeTI9IjIxMy4wOTM4Ii8+PHRleHQgZmlsbD0iIzAwMDAwMCIgZm9udC1mYW1pbHk9IlZlcmRhbmEiIGZvbnQtc2l6ZT0iMTMiIGxlbmd0aEFkanVzdD0ic3BhY2luZyIgdGV4dExlbmd0aD0iNjYuNzk2NCIgeD0iMzE0LjQyMzgiIHk9IjIwOC4wMjc4Ij5yZWFkTGluZSgpPC90ZXh0PjwvZz48ZyBjbGFzcz0ibWVzc2FnZSIgZGF0YS1lbnRpdHktMT0icGFydDMiIGRhdGEtZW50aXR5LTI9InBhcnQ0IiBpZD0ibXNnNyI+PHBvbHlnb24gZmlsbD0iIzAwMDAwMCIgcG9pbnRzPSI3MDcuODEwMSwyMzguMjI2Niw3MTcuODEwMSwyNDIuMjI2Niw3MDcuODEwMSwyNDYuMjI2Niw3MTEuODEwMSwyNDIuMjI2NiIgc3R5bGU9InN0cm9rZTojMDAwMDAwO3N0cm9rZS13aWR0aDoxOyIvPjxsaW5lIHN0eWxlPSJzdHJva2U6IzAwMDAwMDtzdHJva2Utd2lkdGg6MTsiIHgxPSI2MDguMzk3NSIgeDI9IjcxMy44MTAxIiB5MT0iMjQyLjIyNjYiIHkyPSIyNDIuMjI2NiIvPjx0ZXh0IGZpbGw9IiMwMDAwMDAiIGZvbnQtZmFtaWx5PSJWZXJkYW5hIiBmb250LXNpemU9IjEzIiBsZW5ndGhBZGp1c3Q9InNwYWNpbmciIHRleHRMZW5ndGg9IjI5LjU2MSIgeD0iNjE1LjM5NzUiIHk9IjIzNy4xNjA2Ij5yZWFkPC90ZXh0PjwvZz48ZyBjbGFzcz0ibWVzc2FnZSIgZGF0YS1lbnRpdHktMT0icGFydDQiIGRhdGEtZW50aXR5LTI9InBhcnQzIiBpZD0ibXNnOCI+PHBvbHlnb24gZmlsbD0iIzAwMDAwMCIgcG9pbnRzPSI2MTkuMzk3NSwyNjcuMzU5NCw2MDkuMzk3NSwyNzEuMzU5NCw2MTkuMzk3NSwyNzUuMzU5NCw2MTUuMzk3NSwyNzEuMzU5NCIgc3R5bGU9InN0cm9rZTojMDAwMDAwO3N0cm9rZS13aWR0aDoxOyIvPjxsaW5lIHN0eWxlPSJzdHJva2U6IzAwMDAwMDtzdHJva2Utd2lkdGg6MTtzdHJva2UtZGFzaGFycmF5OjIsMjsiIHgxPSI2MTMuMzk3NSIgeDI9IjcxOC44MTAxIiB5MT0iMjcxLjM1OTQiIHkyPSIyNzEuMzU5NCIvPjx0ZXh0IGZpbGw9IiMwMDAwMDAiIGZvbnQtZmFtaWx5PSJWZXJkYW5hIiBmb250LXNpemU9IjEzIiBsZW5ndGhBZGp1c3Q9InNwYWNpbmciIHRleHRMZW5ndGg9IjQ5Ljc3MiIgeD0iNjI1LjM5NzUiIHk9IjI2Ni4yOTM1Ij5jb250ZW50PC90ZXh0PjwvZz48ZyBjbGFzcz0ibWVzc2FnZSIgZGF0YS1lbnRpdHktMT0icGFydDMiIGRhdGEtZW50aXR5LTI9InBhcnQyIiBpZD0ibXNnOSI+PHBvbHlnb24gZmlsbD0iIzAwMDAwMCIgcG9pbnRzPSIzMTguNDIzOCwyOTYuNDkyMiwzMDguNDIzOCwzMDAuNDkyMiwzMTguNDIzOCwzMDQuNDkyMiwzMTQuNDIzOCwzMDAuNDkyMiIgc3R5bGU9InN0cm9rZTojMDAwMDAwO3N0cm9rZS13aWR0aDoxOyIvPjxsaW5lIHN0eWxlPSJzdHJva2U6IzAwMDAwMDtzdHJva2Utd2lkdGg6MTtzdHJva2UtZGFzaGFycmF5OjIsMjsiIHgxPSIzMTIuNDIzOCIgeDI9IjYwNy4zOTc1IiB5MT0iMzAwLjQ5MjIiIHkyPSIzMDAuNDkyMiIvPjx0ZXh0IGZpbGw9IiMwMDAwMDAiIGZvbnQtZmFtaWx5PSJWZXJkYW5hIiBmb250LXNpemU9IjEzIiBsZW5ndGhBZGp1c3Q9InNwYWNpbmciIHRleHRMZW5ndGg9IjM4Ljc5NjkiIHg9IjMyNC40MjM4IiB5PSIyOTUuNDI2MyI+U3RyaW5nPC90ZXh0PjwvZz48ZyBjbGFzcz0ibWVzc2FnZSIgZGF0YS1lbnRpdHktMT0icGFydDIiIGRhdGEtZW50aXR5LTI9InBhcnQxIiBpZD0ibXNnMTAiPjxwb2x5Z29uIGZpbGw9IiMwMDAwMDAiIHBvaW50cz0iNzcuMTExOCwzMjUuNjI1LDY3LjExMTgsMzI5LjYyNSw3Ny4xMTE4LDMzMy42MjUsNzMuMTExOCwzMjkuNjI1IiBzdHlsZT0ic3Ryb2tlOiMwMDAwMDA7c3Ryb2tlLXdpZHRoOjE7Ii8+PGxpbmUgc3R5bGU9InN0cm9rZTojMDAwMDAwO3N0cm9rZS13aWR0aDoxO3N0cm9rZS1kYXNoYXJyYXk6MiwyOyIgeDE9IjcxLjExMTgiIHgyPSIzMDYuNDIzOCIgeTE9IjMyOS42MjUiIHkyPSIzMjkuNjI1Ii8+PHRleHQgZmlsbD0iIzAwMDAwMCIgZm9udC1mYW1pbHk9IlZlcmRhbmEiIGZvbnQtc2l6ZT0iMTMiIGxlbmd0aEFkanVzdD0ic3BhY2luZyIgdGV4dExlbmd0aD0iMzcuMDY0IiB4PSI4My4xMTE4IiB5PSIzMjQuNTU5MSI+cmVzdWx0PC90ZXh0PjwvZz48ZyBjbGFzcz0ibWVzc2FnZSIgZGF0YS1lbnRpdHktMT0icGFydDEiIGRhdGEtZW50aXR5LTI9InBhcnQyIiBpZD0ibXNnMTEiPjxwb2x5Z29uIGZpbGw9IiMwMDAwMDAiIHBvaW50cz0iMjk1LjQyMzgsMzU0Ljc1NzgsMzA1LjQyMzgsMzU4Ljc1NzgsMjk1LjQyMzgsMzYyLjc1NzgsMjk5LjQyMzgsMzU4Ljc1NzgiIHN0eWxlPSJzdHJva2U6IzAwMDAwMDtzdHJva2Utd2lkdGg6MTsiLz48bGluZSBzdHlsZT0ic3Ryb2tlOiMwMDAwMDA7c3Ryb2tlLXdpZHRoOjE7IiB4MT0iNjYuMTExOCIgeDI9IjMwMS40MjM4IiB5MT0iMzU4Ljc1NzgiIHkyPSIzNTguNzU3OCIvPjx0ZXh0IGZpbGw9IiMwMDAwMDAiIGZvbnQtZmFtaWx5PSJWZXJkYW5hIiBmb250LXNpemU9IjEzIiBsZW5ndGhBZGp1c3Q9InNwYWNpbmciIHRleHRMZW5ndGg9IjEyNy43MDg1IiB4PSI3My4xMTE4IiB5PSIzNTMuNjkxOSI+cmVsZWFzZSAoYXV0b21hdGljKTwvdGV4dD48L2c+PGcgY2xhc3M9Im1lc3NhZ2UiIGRhdGEtZW50aXR5LTE9InBhcnQyIiBkYXRhLWVudGl0eS0yPSJwYXJ0MyIgaWQ9Im1zZzEyIj48cG9seWdvbiBmaWxsPSIjMDAwMDAwIiBwb2ludHM9IjU5Ni4zOTc1LDM4My44OTA2LDYwNi4zOTc1LDM4Ny44OTA2LDU5Ni4zOTc1LDM5MS44OTA2LDYwMC4zOTc1LDM4Ny44OTA2IiBzdHlsZT0ic3Ryb2tlOiMwMDAwMDA7c3Ryb2tlLXdpZHRoOjE7Ii8+PGxpbmUgc3R5bGU9InN0cm9rZTojMDAwMDAwO3N0cm9rZS13aWR0aDoxOyIgeDE9IjMwNy40MjM4IiB4Mj0iNjAyLjM5NzUiIHkxPSIzODcuODkwNiIgeTI9IjM4Ny44OTA2Ii8+PHRleHQgZmlsbD0iIzAwMDAwMCIgZm9udC1mYW1pbHk9IlZlcmRhbmEiIGZvbnQtc2l6ZT0iMTMiIGxlbmd0aEFkanVzdD0ic3BhY2luZyIgdGV4dExlbmd0aD0iNDMuNjI3NCIgeD0iMzE0LjQyMzgiIHk9IjM4Mi44MjQ3Ij5jbG9zZSgpPC90ZXh0PjwvZz48ZyBjbGFzcz0ibWVzc2FnZSIgZGF0YS1lbnRpdHktMT0icGFydDMiIGRhdGEtZW50aXR5LTI9InBhcnQ0IiBpZD0ibXNnMTMiPjxwb2x5Z29uIGZpbGw9IiMwMDAwMDAiIHBvaW50cz0iNzA3LjgxMDEsNDEzLjAyMzQsNzE3LjgxMDEsNDE3LjAyMzQsNzA3LjgxMDEsNDIxLjAyMzQsNzExLjgxMDEsNDE3LjAyMzQiIHN0eWxlPSJzdHJva2U6IzAwMDAwMDtzdHJva2Utd2lkdGg6MTsiLz48bGluZSBzdHlsZT0ic3Ryb2tlOiMwMDAwMDA7c3Ryb2tlLXdpZHRoOjE7IiB4MT0iNjA4LjM5NzUiIHgyPSI3MTMuODEwMSIgeTE9IjQxNy4wMjM0IiB5Mj0iNDE3LjAyMzQiLz48dGV4dCBmaWxsPSIjMDAwMDAwIiBmb250LWZhbWlseT0iVmVyZGFuYSIgZm9udC1zaXplPSIxMyIgbGVuZ3RoQWRqdXN0PSJzcGFjaW5nIiB0ZXh0TGVuZ3RoPSIzMy40ODM5IiB4PSI2MTUuMzk3NSIgeT0iNDExLjk1NzUiPmNsb3NlPC90ZXh0PjwvZz48ZyBjbGFzcz0ibWVzc2FnZSIgZGF0YS1lbnRpdHktMT0icGFydDQiIGRhdGEtZW50aXR5LTI9InBhcnQzIiBpZD0ibXNnMTQiPjxwb2x5Z29uIGZpbGw9IiMwMDAwMDAiIHBvaW50cz0iNjE5LjM5NzUsNDQyLjE1NjMsNjA5LjM5NzUsNDQ2LjE1NjMsNjE5LjM5NzUsNDUwLjE1NjMsNjE1LjM5NzUsNDQ2LjE1NjMiIHN0eWxlPSJzdHJva2U6IzAwMDAwMDtzdHJva2Utd2lkdGg6MTsiLz48bGluZSBzdHlsZT0ic3Ryb2tlOiMwMDAwMDA7c3Ryb2tlLXdpZHRoOjE7c3Ryb2tlLWRhc2hhcnJheToyLDI7IiB4MT0iNjEzLjM5NzUiIHgyPSI3MTguODEwMSIgeTE9IjQ0Ni4xNTYzIiB5Mj0iNDQ2LjE1NjMiLz48dGV4dCBmaWxsPSIjMDAwMDAwIiBmb250LWZhbWlseT0iVmVyZGFuYSIgZm9udC1zaXplPSIxMyIgbGVuZ3RoQWRqdXN0PSJzcGFjaW5nIiB0ZXh0TGVuZ3RoPSIzMi40NDI5IiB4PSI2MjUuMzk3NSIgeT0iNDQxLjA5MDMiPmRvbmU8L3RleHQ+PC9nPjxwYXRoIGQ9Ik0yMDYsNDU5LjE1NjMgTDIwNiw1MTQuMTU2MyBMNDA4LDUxNC4xNTYzIEw0MDgsNDY5LjE1NjMgTDM5OCw0NTkuMTU2MyBMMjA2LDQ1OS4xNTYzIiBmaWxsPSIjRkZGRkZGIiBzdHlsZT0ic3Ryb2tlOiMwMDAwMDA7c3Ryb2tlLXdpZHRoOjE7Ii8+PHBhdGggZD0iTTM5OCw0NTkuMTU2MyBMMzk4LDQ2OS4xNTYzIEw0MDgsNDY5LjE1NjMgTDM5OCw0NTkuMTU2MyIgZmlsbD0iI0ZGRkZGRiIgc3R5bGU9InN0cm9rZTojMDAwMDAwO3N0cm9rZS13aWR0aDoxOyIvPjx0ZXh0IGZpbGw9IiMwMDAwMDAiIGZvbnQtZmFtaWx5PSJWZXJkYW5hIiBmb250LXNpemU9IjEzIiBsZW5ndGhBZGp1c3Q9InNwYWNpbmciIHRleHRMZW5ndGg9IjE4MS42MTkzIiB4PSIyMTIiIHk9IjQ3Ni4yMjMxIj5SZXNvdXJjZSAmIzEyMzk5OyYjMjAzNjM7JiMyMjgwNjsmIzEyMzY0OyYjMzAzMzA7JiMyOTk4MzsmIzEyMzc1OyYjMTIzOTA7JiMxMjQxODs8L3RleHQ+PHRleHQgZmlsbD0iIzAwMDAwMCIgZm9udC1mYW1pbHk9IlZlcmRhbmEiIGZvbnQtc2l6ZT0iMTMiIGxlbmd0aEFkanVzdD0ic3BhY2luZyIgdGV4dExlbmd0aD0iMTQ2Ljk1NDciIHg9IjIxMiIgeT0iNDkxLjM1NiI+JiMyNDUxNzsmIzEyMzc4OyByZWxlYXNlICYjMTI0MzQ7JiMyMzQ1NTsmIzM0ODkyOyYjMTIzNzc7JiMxMjQyNzs8L3RleHQ+PHRleHQgZmlsbD0iIzAwMDAwMCIgZm9udC1mYW1pbHk9IlZlcmRhbmEiIGZvbnQtc2l6ZT0iMTMiIGxlbmd0aEFkanVzdD0ic3BhY2luZyIgdGV4dExlbmd0aD0iMTIwLjM3NyIgeD0iMjEyIiB5PSI1MDYuNDg4OCI+KGd1YXJhbnRlZSAmIzEyNDM0OyYjMjAzNTE7JiMyOTk5MjspPC90ZXh0Pjw/cGxhbnR1bWwtc3JjIFJQN0ZJV0NuNENSbFVPZ25mLW9YLW0xeDRGR1cyODlHZG8zaUpqbFdEZWI5TGw2dTJ2eFFhbkliTmVlV3VhZGxXbGVtUVFjRk9SQnpXLWp3c2lkYWMtX3hSTVJGM2Q2NGU3QjYxSTZBUVNqSmhmWW1xM2JHQWtTZmlyb0EzWjAzSkFjY2U4VDY1Wmg1LWJRWlFUdVU1bHEtUWlud28zQks2cXFlY3g4WmRneUQtaHVXbjhUMFRwLXU5UjNyWnFWaTcyYkJCbWdrQ1E4UVNzRzY4LTk1UXNybUpNMFpJRTN1REN1bVB6VEt1MUtxQ01XU25yNk8zOFNtNzU4SmEwZTUySUxxVm5kTVpJNEpzTC1tbVkzR2UwZzNrZHdYNWF0dWRkMjFqOXFNcGtzcUwwZ0Jta3hLc3gwcGd4YU9oRXJ6cHRDNDFyRmFqV2NyVUhRV2hCMW92QTdJNWJFUUlfQ1ZLRHJsNHNMSS0xeU5xWUI4SXd5RkF6eGsxNXB2amxXU0J2X2tOM2JQcFR2TnF4YWh4cnR2eEFnQUJCemtORmNtOHRCTHhWOXJfbHF1U1VOQ0xNRDIxbU5KVmxiT05vcS1sYlJKYnVZV28yMWFfRzAwPz48L2c+PC9zdmc+" class="uml" alt="uml diagram" title="" /></p>
<h4 id="guarantee">guarantee メソッド<a class="headerlink" href="#guarantee" title="Permanent link">&para;</a></h4>
<p><code>IO</code> クラスに追加した <code>guarantee</code> メソッドは、成功・失敗にかかわらず必ず実行される処理を指定します。</p>
<div class="highlight"><pre><span></span><code><span class="c1">// IO クラスの guarantee メソッド</span>
<span class="kd">public</span><span class="w"> </span><span class="n">IO</span><span class="o">&lt;</span><span class="n">A</span><span class="o">&gt;</span><span class="w"> </span><span class="nf">guarantee</span><span class="p">(</span><span class="n">IO</span><span class="o">&lt;</span><span class="n">Void</span><span class="o">&gt;</span><span class="w"> </span><span class="n">finalizer</span><span class="p">)</span><span class="w"> </span><span class="p">{</span>
<span class="w">    </span><span class="k">return</span><span class="w"> </span><span class="k">new</span><span class="w"> </span><span class="n">IO</span><span class="o">&lt;&gt;</span><span class="p">(()</span><span class="w"> </span><span class="o">-&gt;</span><span class="w"> </span><span class="p">{</span>
<span class="w">        </span><span class="k">try</span><span class="w"> </span><span class="p">{</span>
<span class="w">            </span><span class="k">return</span><span class="w"> </span><span class="n">thunk</span><span class="p">.</span><span class="na">get</span><span class="p">();</span>
<span class="w">        </span><span class="p">}</span><span class="w"> </span><span class="k">finally</span><span class="w"> </span><span class="p">{</span>
<span class="w">            </span><span class="k">try</span><span class="w"> </span><span class="p">{</span>
<span class="w">                </span><span class="n">finalizer</span><span class="p">.</span><span class="na">unsafeRun</span><span class="p">();</span>
<span class="w">            </span><span class="p">}</span><span class="w"> </span><span class="k">catch</span><span class="w"> </span><span class="p">(</span><span class="n">Exception</span><span class="w"> </span><span class="n">ignored</span><span class="p">)</span><span class="w"> </span><span class="p">{</span>
<span class="w">                </span><span class="c1">// finalizer のエラーは無視</span>
<span class="w">            </span><span class="p">}</span>
<span class="w">        </span><span class="p">}</span>
<span class="w">    </span><span class="p">});</span>
<span class="p">}</span>
</code></pre></div>
<h3 id="115">11.5 キャッシュの実装<a class="headerlink" href="#115" title="Permanent link">&para;</a></h3>
<p><strong>ソースファイル</strong>: <code>app/java/src/main/java/ch11/CachedDataAccess.java</code></p>
<p><code>Ref</code> を使用したスレッドセーフなキャッシュの実装:</p>
<div class="highlight"><pre><span></span><code><span class="kd">public</span><span class="w"> </span><span class="kd">final</span><span class="w"> </span><span class="kd">class</span> <span class="nc">CachedDataAccess</span><span class="w"> </span><span class="kd">implements</span><span class="w"> </span><span class="n">DataAccess</span><span class="w"> </span><span class="p">{</span>

<span class="w">    </span><span class="kd">private</span><span class="w"> </span><span class="kd">final</span><span class="w"> </span><span class="n">DataAccess</span><span class="w"> </span><span class="n">underlying</span><span class="p">;</span>
<span class="w">    </span><span class="kd">private</span><span class="w"> </span><span class="kd">final</span><span class="w"> </span><span class="n">Ref</span><span class="o">&lt;</span><span class="n">Map</span><span class="o">&lt;</span><span class="n">String</span><span class="p">,</span><span class="w"> </span><span class="n">Object</span><span class="o">&gt;&gt;</span><span class="w"> </span><span class="n">cache</span><span class="p">;</span>

<span class="w">    </span><span class="kd">private</span><span class="w"> </span><span class="nf">CachedDataAccess</span><span class="p">(</span><span class="n">DataAccess</span><span class="w"> </span><span class="n">underlying</span><span class="p">,</span><span class="w"> </span><span class="n">Ref</span><span class="o">&lt;</span><span class="n">Map</span><span class="o">&lt;</span><span class="n">String</span><span class="p">,</span><span class="w"> </span><span class="n">Object</span><span class="o">&gt;&gt;</span><span class="w"> </span><span class="n">cache</span><span class="p">)</span><span class="w"> </span><span class="p">{</span>
<span class="w">        </span><span class="k">this</span><span class="p">.</span><span class="na">underlying</span><span class="w"> </span><span class="o">=</span><span class="w"> </span><span class="n">underlying</span><span class="p">;</span>
<span class="w">        </span><span class="k">this</span><span class="p">.</span><span class="na">cache</span><span class="w"> </span><span class="o">=</span><span class="w"> </span><span class="n">cache</span><span class="p">;</span>
<span class="w">    </span><span class="p">}</span>

<span class="w">    </span><span class="c1">// IO 経由でキャッシュ付き DataAccess を作成</span>
<span class="w">    </span><span class="kd">public</span><span class="w"> </span><span class="kd">static</span><span class="w"> </span><span class="n">IO</span><span class="o">&lt;</span><span class="n">DataAccess</span><span class="o">&gt;</span><span class="w"> </span><span class="nf">create</span><span class="p">(</span><span class="n">DataAccess</span><span class="w"> </span><span class="n">underlying</span><span class="p">)</span><span class="w"> </span><span class="p">{</span>
<span class="w">        </span><span class="k">return</span><span class="w"> </span><span class="n">Ref</span><span class="p">.</span><span class="o">&lt;</span><span class="n">Map</span><span class="o">&lt;</span><span class="n">String</span><span class="p">,</span><span class="w"> </span><span class="n">Object</span><span class="o">&gt;&gt;</span><span class="n">of</span><span class="p">(</span><span class="n">HashMap</span><span class="p">.</span><span class="na">empty</span><span class="p">())</span>
<span class="w">                </span><span class="p">.</span><span class="na">map</span><span class="p">(</span><span class="n">cache</span><span class="w"> </span><span class="o">-&gt;</span><span class="w"> </span><span class="k">new</span><span class="w"> </span><span class="n">CachedDataAccess</span><span class="p">(</span><span class="n">underlying</span><span class="p">,</span><span class="w"> </span><span class="n">cache</span><span class="p">));</span>
<span class="w">    </span><span class="p">}</span>

<span class="w">    </span><span class="nd">@Override</span>
<span class="w">    </span><span class="kd">public</span><span class="w"> </span><span class="n">IO</span><span class="o">&lt;</span><span class="n">List</span><span class="o">&lt;</span><span class="n">Attraction</span><span class="o">&gt;&gt;</span><span class="w"> </span><span class="nf">findAttractions</span><span class="p">(</span>
<span class="w">            </span><span class="n">String</span><span class="w"> </span><span class="n">name</span><span class="p">,</span>
<span class="w">            </span><span class="n">AttractionOrdering</span><span class="w"> </span><span class="n">ordering</span><span class="p">,</span>
<span class="w">            </span><span class="kt">int</span><span class="w"> </span><span class="n">limit</span><span class="p">)</span><span class="w"> </span><span class="p">{</span>
<span class="w">        </span><span class="n">String</span><span class="w"> </span><span class="n">key</span><span class="w"> </span><span class="o">=</span><span class="w"> </span><span class="s">&quot;attractions:&quot;</span><span class="w"> </span><span class="o">+</span><span class="w"> </span><span class="n">name</span><span class="w"> </span><span class="o">+</span><span class="w"> </span><span class="s">&quot;:&quot;</span><span class="w"> </span><span class="o">+</span><span class="w"> </span><span class="n">ordering</span><span class="w"> </span><span class="o">+</span><span class="w"> </span><span class="s">&quot;:&quot;</span><span class="w"> </span><span class="o">+</span><span class="w"> </span><span class="n">limit</span><span class="p">;</span>
<span class="w">        </span><span class="k">return</span><span class="w"> </span><span class="n">getOrCompute</span><span class="p">(</span><span class="n">key</span><span class="p">,</span><span class="w"> </span><span class="p">()</span><span class="w"> </span><span class="o">-&gt;</span><span class="w"> </span><span class="n">underlying</span><span class="p">.</span><span class="na">findAttractions</span><span class="p">(</span><span class="n">name</span><span class="p">,</span><span class="w"> </span><span class="n">ordering</span><span class="p">,</span><span class="w"> </span><span class="n">limit</span><span class="p">));</span>
<span class="w">    </span><span class="p">}</span>

<span class="w">    </span><span class="nd">@SuppressWarnings</span><span class="p">(</span><span class="s">&quot;unchecked&quot;</span><span class="p">)</span>
<span class="w">    </span><span class="kd">private</span><span class="w"> </span><span class="o">&lt;</span><span class="n">T</span><span class="o">&gt;</span><span class="w"> </span><span class="n">IO</span><span class="o">&lt;</span><span class="n">T</span><span class="o">&gt;</span><span class="w"> </span><span class="nf">getOrCompute</span><span class="p">(</span><span class="n">String</span><span class="w"> </span><span class="n">key</span><span class="p">,</span><span class="w"> </span><span class="n">Supplier</span><span class="o">&lt;</span><span class="n">IO</span><span class="o">&lt;</span><span class="n">T</span><span class="o">&gt;&gt;</span><span class="w"> </span><span class="n">compute</span><span class="p">)</span><span class="w"> </span><span class="p">{</span>
<span class="w">        </span><span class="k">return</span><span class="w"> </span><span class="n">cache</span><span class="p">.</span><span class="na">get</span><span class="p">()</span>
<span class="w">                </span><span class="p">.</span><span class="na">flatMap</span><span class="p">(</span><span class="n">currentCache</span><span class="w"> </span><span class="o">-&gt;</span>
<span class="w">                        </span><span class="n">currentCache</span><span class="p">.</span><span class="na">get</span><span class="p">(</span><span class="n">key</span><span class="p">)</span>
<span class="w">                                </span><span class="p">.</span><span class="na">map</span><span class="p">(</span><span class="n">cached</span><span class="w"> </span><span class="o">-&gt;</span><span class="w"> </span><span class="n">IO</span><span class="p">.</span><span class="na">pure</span><span class="p">((</span><span class="n">T</span><span class="p">)</span><span class="w"> </span><span class="n">cached</span><span class="p">))</span>
<span class="w">                                </span><span class="p">.</span><span class="na">getOrElse</span><span class="p">(()</span><span class="w"> </span><span class="o">-&gt;</span>
<span class="w">                                        </span><span class="n">compute</span><span class="p">.</span><span class="na">get</span><span class="p">().</span><span class="na">flatMap</span><span class="p">(</span><span class="n">result</span><span class="w"> </span><span class="o">-&gt;</span>
<span class="w">                                                </span><span class="n">cache</span><span class="p">.</span><span class="na">update</span><span class="p">(</span><span class="n">c</span><span class="w"> </span><span class="o">-&gt;</span><span class="w"> </span><span class="n">c</span><span class="p">.</span><span class="na">put</span><span class="p">(</span><span class="n">key</span><span class="p">,</span><span class="w"> </span><span class="n">result</span><span class="p">))</span>
<span class="w">                                                        </span><span class="p">.</span><span class="na">andThen</span><span class="p">(</span><span class="n">IO</span><span class="p">.</span><span class="na">pure</span><span class="p">(</span><span class="n">result</span><span class="p">))</span>
<span class="w">                                        </span><span class="p">)</span>
<span class="w">                                </span><span class="p">)</span>
<span class="w">                </span><span class="p">);</span>
<span class="w">    </span><span class="p">}</span>

<span class="w">    </span><span class="c1">// ... 他のメソッドも同様</span>
<span class="p">}</span>
</code></pre></div>
<p><img src="data:image/svg+xml;base64,PD9wbGFudHVtbCAxLjIwMjYuMT8+PHN2ZyB4bWxucz0iaHR0cDovL3d3dy53My5vcmcvMjAwMC9zdmciIHhtbG5zOnhsaW5rPSJodHRwOi8vd3d3LnczLm9yZy8xOTk5L3hsaW5rIiBjb250ZW50U3R5bGVUeXBlPSJ0ZXh0L2NzcyIgZGF0YS1kaWFncmFtLXR5cGU9IkFDVElWSVRZIiBoZWlnaHQ9IjQxNnB4IiBwcmVzZXJ2ZUFzcGVjdFJhdGlvPSJub25lIiBzdHlsZT0id2lkdGg6NDA1cHg7aGVpZ2h0OjQxNnB4O2JhY2tncm91bmQ6I0ZGRkZGRjsiIHZlcnNpb249IjEuMSIgdmlld0JveD0iMCAwIDQwNSA0MTYiIHdpZHRoPSI0MDVweCIgem9vbUFuZFBhbj0ibWFnbmlmeSI+PGRlZnMvPjxnPjxlbGxpcHNlIGN4PSIxNzcuMDAxMSIgY3k9IjE1IiBmaWxsPSIjRkZGRkZGIiByeD0iMTAiIHJ5PSIxMCIgc3R5bGU9InN0cm9rZTojMDAwMDAwO3N0cm9rZS13aWR0aDoxOyIvPjxyZWN0IGZpbGw9IiNGRkZGRkYiIGhlaWdodD0iMzMuOTY4OCIgcng9IjEyLjUiIHJ5PSIxMi41IiBzdHlsZT0ic3Ryb2tlOiMwMDAwMDA7c3Ryb2tlLXdpZHRoOjE7IiB3aWR0aD0iMTI4LjAwMDgiIHg9IjExMy4wMDA3IiB5PSI0NSIvPjx0ZXh0IGZpbGw9IiMwMDAwMDAiIGZvbnQtZmFtaWx5PSJWZXJkYW5hIiBmb250LXNpemU9IjEyIiBsZW5ndGhBZGp1c3Q9InNwYWNpbmciIHRleHRMZW5ndGg9IjEwOC4wMDA4IiB4PSIxMjMuMDAwNyIgeT0iNjYuMTM4NyI+JiMxMjQ2MTsmIzEyNTE1OyYjMTI0ODM7JiMxMjQ3MTsmIzEyNTE3OyYjMTI0NjE7JiMxMjU0MDsmIzI5OTgzOyYjMjUxMDQ7PC90ZXh0PjxyZWN0IGZpbGw9IiNGRkZGRkYiIGhlaWdodD0iMzMuOTY4OCIgcng9IjEyLjUiIHJ5PSIxMi41IiBzdHlsZT0ic3Ryb2tlOiMwMDAwMDA7c3Ryb2tlLXdpZHRoOjE7IiB3aWR0aD0iMTc4Ljg3MTgiIHg9Ijg3LjU2NTIiIHk9Ijk4Ljk2ODgiLz48dGV4dCBmaWxsPSIjMDAwMDAwIiBmb250LWZhbWlseT0iVmVyZGFuYSIgZm9udC1zaXplPSIxMiIgbGVuZ3RoQWRqdXN0PSJzcGFjaW5nIiB0ZXh0TGVuZ3RoPSIxNTguODcxOCIgeD0iOTcuNTY1MiIgeT0iMTIwLjEwNzQiPmNhY2hlLmdldCAmIzEyMzkxOyYjMTI0NjE7JiMxMjUxNTsmIzEyNDgzOyYjMTI0NzE7JiMxMjUxNzsmIzMwOTA2OyYjMzU0Njk7PC90ZXh0Pjxwb2x5Z29uIGZpbGw9IiNGRkZGRkYiIHBvaW50cz0iMTEzLjU4MjMsMTUyLjkzNzUsMjQwLjQxOTgsMTUyLjkzNzUsMjUyLjQxOTgsMTY0LjkzNzUsMjQwLjQxOTgsMTc2LjkzNzUsMTEzLjU4MjMsMTc2LjkzNzUsMTAxLjU4MjMsMTY0LjkzNzUsMTEzLjU4MjMsMTUyLjkzNzUiIHN0eWxlPSJzdHJva2U6IzAwMDAwMDtzdHJva2Utd2lkdGg6MTsiLz48dGV4dCBmaWxsPSIjMDAwMDAwIiBmb250LWZhbWlseT0iVmVyZGFuYSIgZm9udC1zaXplPSIxMSIgbGVuZ3RoQWRqdXN0PSJzcGFjaW5nIiB0ZXh0TGVuZ3RoPSIxMjYuODM3NSIgeD0iMTEzLjU4MjMiIHk9IjE2OC43NDU2Ij4mIzEyNDYxOyYjMTI1MTU7JiMxMjQ4MzsmIzEyNDcxOyYjMTI1MTc7JiMxMjM5NTsmIzEyNDg3OyYjMTI1NDA7JiMxMjQ3OTsmIzEyMzU0OyYjMTI0MjY7PzwvdGV4dD48dGV4dCBmaWxsPSIjMDAwMDAwIiBmb250LWZhbWlseT0iVmVyZGFuYSIgZm9udC1zaXplPSIxMSIgbGVuZ3RoQWRqdXN0PSJzcGFjaW5nIiB0ZXh0TGVuZ3RoPSIxOS4wMDgzIiB4PSI4Mi41NzQiIHk9IjE2Mi4zNDMzIj55ZXM8L3RleHQ+PHRleHQgZmlsbD0iIzAwMDAwMCIgZm9udC1mYW1pbHk9IlZlcmRhbmEiIGZvbnQtc2l6ZT0iMTEiIGxlbmd0aEFkanVzdD0ic3BhY2luZyIgdGV4dExlbmd0aD0iMTMuNzAxNyIgeD0iMjUyLjQxOTgiIHk9IjE2Mi4zNDMzIj5ubzwvdGV4dD48cmVjdCBmaWxsPSIjRkZGRkZGIiBoZWlnaHQ9IjMzLjk2ODgiIHJ4PSIxMi41IiByeT0iMTIuNSIgc3R5bGU9InN0cm9rZTojMDAwMDAwO3N0cm9rZS13aWR0aDoxOyIgd2lkdGg9IjE2NC4wMDExIiB4PSI2IiB5PSIxODYuOTM3NSIvPjx0ZXh0IGZpbGw9IiMwMDAwMDAiIGZvbnQtZmFtaWx5PSJWZXJkYW5hIiBmb250LXNpemU9IjEyIiBsZW5ndGhBZGp1c3Q9InNwYWNpbmciIHRleHRMZW5ndGg9IjE0NC4wMDExIiB4PSIxNiIgeT0iMjA4LjA3NjIiPiYjMTI0NjE7JiMxMjUxNTsmIzEyNDgzOyYjMTI0NzE7JiMxMjUxNzsmIzEyMzYzOyYjMTI0MjU7JiMxMjQ4NzsmIzEyNTQwOyYjMTI0Nzk7JiMzNjgyMDsmIzIxMzY0OzwvdGV4dD48cmVjdCBmaWxsPSIjRkZGRkZGIiBoZWlnaHQ9IjMzLjk2ODgiIHJ4PSIxMi41IiByeT0iMTIuNSIgc3R5bGU9InN0cm9rZTojMDAwMDAwO3N0cm9rZS13aWR0aDoxOyIgd2lkdGg9IjEzMC42MTM5IiB4PSIyMDAuNjk0NiIgeT0iMTg2LjkzNzUiLz48dGV4dCBmaWxsPSIjMDAwMDAwIiBmb250LWZhbWlseT0iVmVyZGFuYSIgZm9udC1zaXplPSIxMiIgbGVuZ3RoQWRqdXN0PSJzcGFjaW5nIiB0ZXh0TGVuZ3RoPSIxMTAuNjEzOSIgeD0iMjEwLjY5NDYiIHk9IjIwOC4wNzYyIj4mIzIyODA2OyYjMzcwOTY7IEFQSSAmIzEyNDM0OyYjMjE2Mjg7JiMxMjQwMzsmIzIwOTg2OyYjMTIzNzU7PC90ZXh0PjxyZWN0IGZpbGw9IiNGRkZGRkYiIGhlaWdodD0iMzMuOTY4OCIgcng9IjEyLjUiIHJ5PSIxMi41IiBzdHlsZT0ic3Ryb2tlOiMwMDAwMDA7c3Ryb2tlLXdpZHRoOjE7IiB3aWR0aD0iMTUyLjAwMSIgeD0iMTkwLjAwMTEiIHk9IjI0MC45MDYzIi8+PHRleHQgZmlsbD0iIzAwMDAwMCIgZm9udC1mYW1pbHk9IlZlcmRhbmEiIGZvbnQtc2l6ZT0iMTIiIGxlbmd0aEFkanVzdD0ic3BhY2luZyIgdGV4dExlbmd0aD0iMTMyLjAwMSIgeD0iMjAwLjAwMTEiIHk9IjI2Mi4wNDQ5Ij4mIzMyMDgwOyYjMjY1MjQ7JiMxMjQzNDsmIzEyNDYxOyYjMTI1MTU7JiMxMjQ4MzsmIzEyNDcxOyYjMTI1MTc7JiMxMjM5NTsmIzIwNDQ1OyYjMjMzODQ7PC90ZXh0PjxyZWN0IGZpbGw9IiNGRkZGRkYiIGhlaWdodD0iMzMuOTY4OCIgcng9IjEyLjUiIHJ5PSIxMi41IiBzdHlsZT0ic3Ryb2tlOiMwMDAwMDA7c3Ryb2tlLXdpZHRoOjE7IiB3aWR0aD0iODAuMDAwNSIgeD0iMjI2LjAwMTQiIHk9IjI5NC44NzUiLz48dGV4dCBmaWxsPSIjMDAwMDAwIiBmb250LWZhbWlseT0iVmVyZGFuYSIgZm9udC1zaXplPSIxMiIgbGVuZ3RoQWRqdXN0PSJzcGFjaW5nIiB0ZXh0TGVuZ3RoPSI2MC4wMDA1IiB4PSIyMzYuMDAxNCIgeT0iMzE2LjAxMzciPiYjMzIwODA7JiMyNjUyNDsmIzEyNDM0OyYjMzY4MjA7JiMyMTM2NDs8L3RleHQ+PHBvbHlnb24gZmlsbD0iI0ZGRkZGRiIgcG9pbnRzPSIxNzcuMDAxMSwzMzQuODQzOCwxODkuMDAxMSwzNDYuODQzOCwxNzcuMDAxMSwzNTguODQzOCwxNjUuMDAxMSwzNDYuODQzOCwxNzcuMDAxMSwzMzQuODQzOCIgc3R5bGU9InN0cm9rZTojMDAwMDAwO3N0cm9rZS13aWR0aDoxOyIvPjxwYXRoIGQ9Ik0yMDguMDAxMSwzNjkuNzEwOSBMMjA4LjAwMTEsMzg1Ljg0MzggTDE4OC4wMDExLDM4OS44NDM4IEwyMDguMDAxMSwzOTMuODQzOCBMMjA4LjAwMTEsNDA5Ljk3NjYgQTAsMCAwIDAgMCAyMDguMDAxMSw0MDkuOTc2NiBMMzk4LjAwMTMsNDA5Ljk3NjYgQTAsMCAwIDAgMCAzOTguMDAxMyw0MDkuOTc2NiBMMzk4LjAwMTMsMzc5LjcxMDkgTDM4OC4wMDEzLDM2OS43MTA5IEwyMDguMDAxMSwzNjkuNzEwOSBBMCwwIDAgMCAwIDIwOC4wMDExLDM2OS43MTA5IiBmaWxsPSIjRkZGRkZGIiBzdHlsZT0ic3Ryb2tlOiMwMDAwMDA7c3Ryb2tlLXdpZHRoOjE7Ii8+PHBhdGggZD0iTTM4OC4wMDEzLDM2OS43MTA5IEwzODguMDAxMywzNzkuNzEwOSBMMzk4LjAwMTMsMzc5LjcxMDkgTDM4OC4wMDEzLDM2OS43MTA5IiBmaWxsPSIjRkZGRkZGIiBzdHlsZT0ic3Ryb2tlOiMwMDAwMDA7c3Ryb2tlLXdpZHRoOjE7Ii8+PHRleHQgZmlsbD0iIzAwMDAwMCIgZm9udC1mYW1pbHk9IlZlcmRhbmEiIGZvbnQtc2l6ZT0iMTMiIGxlbmd0aEFkanVzdD0ic3BhY2luZyIgdGV4dExlbmd0aD0iOTAuNzM5OCIgeD0iMjE0LjAwMTEiIHk9IjM4Ni43Nzc4Ij5SZWYgJiMxMjQzNDsmIzIwMzUxOyYjMjk5OTI7JiMxMjM3NTsmIzEyMzgzOzwvdGV4dD48dGV4dCBmaWxsPSIjMDAwMDAwIiBmb250LWZhbWlseT0iVmVyZGFuYSIgZm9udC1zaXplPSIxMyIgbGVuZ3RoQWRqdXN0PSJzcGFjaW5nIiB0ZXh0TGVuZ3RoPSIxNjkuMDAwMiIgeD0iMjE0LjAwMTEiIHk9IjQwMS45MTA2Ij4mIzEyNDczOyYjMTI1MjQ7JiMxMjQ4MzsmIzEyNDg5OyYjMTI0NzU7JiMxMjU0MDsmIzEyNTAxOyYjMTIzOTQ7JiMxMjQ2MTsmIzEyNTE1OyYjMTI0ODM7JiMxMjQ3MTsmIzEyNTE3OzwvdGV4dD48ZWxsaXBzZSBjeD0iMTc3LjAwMTEiIGN5PSIzODkuODQzOCIgZmlsbD0ibm9uZSIgcng9IjExIiByeT0iMTEiIHN0eWxlPSJzdHJva2U6IzAwMDAwMDtzdHJva2Utd2lkdGg6MTsiLz48ZWxsaXBzZSBjeD0iMTc3LjAwMTEiIGN5PSIzODkuODQzOCIgZmlsbD0iI0ZGRkZGRiIgcng9IjYiIHJ5PSI2IiBzdHlsZT0ic3Ryb2tlOiMwMDAwMDA7c3Ryb2tlLXdpZHRoOjE7Ii8+PGxpbmUgc3R5bGU9InN0cm9rZTojMDAwMDAwO3N0cm9rZS13aWR0aDoxOyIgeDE9IjE3Ny4wMDExIiB4Mj0iMTc3LjAwMTEiIHkxPSIyNSIgeTI9IjQ1Ii8+PHBvbHlnb24gZmlsbD0iIzAwMDAwMCIgcG9pbnRzPSIxNzMuMDAxMSwzNSwxNzcuMDAxMSw0NSwxODEuMDAxMSwzNSwxNzcuMDAxMSwzOSIgc3R5bGU9InN0cm9rZTojMDAwMDAwO3N0cm9rZS13aWR0aDoxOyIvPjxsaW5lIHN0eWxlPSJzdHJva2U6IzAwMDAwMDtzdHJva2Utd2lkdGg6MTsiIHgxPSIxNzcuMDAxMSIgeDI9IjE3Ny4wMDExIiB5MT0iNzguOTY4OCIgeTI9Ijk4Ljk2ODgiLz48cG9seWdvbiBmaWxsPSIjMDAwMDAwIiBwb2ludHM9IjE3My4wMDExLDg4Ljk2ODgsMTc3LjAwMTEsOTguOTY4OCwxODEuMDAxMSw4OC45Njg4LDE3Ny4wMDExLDkyLjk2ODgiIHN0eWxlPSJzdHJva2U6IzAwMDAwMDtzdHJva2Utd2lkdGg6MTsiLz48bGluZSBzdHlsZT0ic3Ryb2tlOiMwMDAwMDA7c3Ryb2tlLXdpZHRoOjE7IiB4MT0iMjY2LjAwMTYiIHgyPSIyNjYuMDAxNiIgeTE9IjIyMC45MDYzIiB5Mj0iMjQwLjkwNjMiLz48cG9seWdvbiBmaWxsPSIjMDAwMDAwIiBwb2ludHM9IjI2Mi4wMDE2LDIzMC45MDYzLDI2Ni4wMDE2LDI0MC45MDYzLDI3MC4wMDE2LDIzMC45MDYzLDI2Ni4wMDE2LDIzNC45MDYzIiBzdHlsZT0ic3Ryb2tlOiMwMDAwMDA7c3Ryb2tlLXdpZHRoOjE7Ii8+PGxpbmUgc3R5bGU9InN0cm9rZTojMDAwMDAwO3N0cm9rZS13aWR0aDoxOyIgeDE9IjI2Ni4wMDE2IiB4Mj0iMjY2LjAwMTYiIHkxPSIyNzQuODc1IiB5Mj0iMjk0Ljg3NSIvPjxwb2x5Z29uIGZpbGw9IiMwMDAwMDAiIHBvaW50cz0iMjYyLjAwMTYsMjg0Ljg3NSwyNjYuMDAxNiwyOTQuODc1LDI3MC4wMDE2LDI4NC44NzUsMjY2LjAwMTYsMjg4Ljg3NSIgc3R5bGU9InN0cm9rZTojMDAwMDAwO3N0cm9rZS13aWR0aDoxOyIvPjxsaW5lIHN0eWxlPSJzdHJva2U6IzAwMDAwMDtzdHJva2Utd2lkdGg6MTsiIHgxPSIxMDEuNTgyMyIgeDI9Ijg4LjAwMDUiIHkxPSIxNjQuOTM3NSIgeTI9IjE2NC45Mzc1Ii8+PGxpbmUgc3R5bGU9InN0cm9rZTojMDAwMDAwO3N0cm9rZS13aWR0aDoxOyIgeDE9Ijg4LjAwMDUiIHgyPSI4OC4wMDA1IiB5MT0iMTY0LjkzNzUiIHkyPSIxODYuOTM3NSIvPjxwb2x5Z29uIGZpbGw9IiMwMDAwMDAiIHBvaW50cz0iODQuMDAwNSwxNzYuOTM3NSw4OC4wMDA1LDE4Ni45Mzc1LDkyLjAwMDUsMTc2LjkzNzUsODguMDAwNSwxODAuOTM3NSIgc3R5bGU9InN0cm9rZTojMDAwMDAwO3N0cm9rZS13aWR0aDoxOyIvPjxsaW5lIHN0eWxlPSJzdHJva2U6IzAwMDAwMDtzdHJva2Utd2lkdGg6MTsiIHgxPSIyNTIuNDE5OCIgeDI9IjI2Ni4wMDE2IiB5MT0iMTY0LjkzNzUiIHkyPSIxNjQuOTM3NSIvPjxsaW5lIHN0eWxlPSJzdHJva2U6IzAwMDAwMDtzdHJva2Utd2lkdGg6MTsiIHgxPSIyNjYuMDAxNiIgeDI9IjI2Ni4wMDE2IiB5MT0iMTY0LjkzNzUiIHkyPSIxODYuOTM3NSIvPjxwb2x5Z29uIGZpbGw9IiMwMDAwMDAiIHBvaW50cz0iMjYyLjAwMTYsMTc2LjkzNzUsMjY2LjAwMTYsMTg2LjkzNzUsMjcwLjAwMTYsMTc2LjkzNzUsMjY2LjAwMTYsMTgwLjkzNzUiIHN0eWxlPSJzdHJva2U6IzAwMDAwMDtzdHJva2Utd2lkdGg6MTsiLz48bGluZSBzdHlsZT0ic3Ryb2tlOiMwMDAwMDA7c3Ryb2tlLXdpZHRoOjE7IiB4MT0iODguMDAwNSIgeDI9Ijg4LjAwMDUiIHkxPSIyMjAuOTA2MyIgeTI9IjM0Ni44NDM4Ii8+PGxpbmUgc3R5bGU9InN0cm9rZTojMDAwMDAwO3N0cm9rZS13aWR0aDoxOyIgeDE9Ijg4LjAwMDUiIHgyPSIxNjUuMDAxMSIgeTE9IjM0Ni44NDM4IiB5Mj0iMzQ2Ljg0MzgiLz48cG9seWdvbiBmaWxsPSIjMDAwMDAwIiBwb2ludHM9IjE1NS4wMDExLDM0Mi44NDM4LDE2NS4wMDExLDM0Ni44NDM4LDE1NS4wMDExLDM1MC44NDM4LDE1OS4wMDExLDM0Ni44NDM4IiBzdHlsZT0ic3Ryb2tlOiMwMDAwMDA7c3Ryb2tlLXdpZHRoOjE7Ii8+PGxpbmUgc3R5bGU9InN0cm9rZTojMDAwMDAwO3N0cm9rZS13aWR0aDoxOyIgeDE9IjI2Ni4wMDE2IiB4Mj0iMjY2LjAwMTYiIHkxPSIzMjguODQzOCIgeTI9IjM0Ni44NDM4Ii8+PGxpbmUgc3R5bGU9InN0cm9rZTojMDAwMDAwO3N0cm9rZS13aWR0aDoxOyIgeDE9IjI2Ni4wMDE2IiB4Mj0iMTg5LjAwMTEiIHkxPSIzNDYuODQzOCIgeTI9IjM0Ni44NDM4Ii8+PHBvbHlnb24gZmlsbD0iIzAwMDAwMCIgcG9pbnRzPSIxOTkuMDAxMSwzNDIuODQzOCwxODkuMDAxMSwzNDYuODQzOCwxOTkuMDAxMSwzNTAuODQzOCwxOTUuMDAxMSwzNDYuODQzOCIgc3R5bGU9InN0cm9rZTojMDAwMDAwO3N0cm9rZS13aWR0aDoxOyIvPjxsaW5lIHN0eWxlPSJzdHJva2U6IzAwMDAwMDtzdHJva2Utd2lkdGg6MTsiIHgxPSIxNzcuMDAxMSIgeDI9IjE3Ny4wMDExIiB5MT0iMTMyLjkzNzUiIHkyPSIxNTIuOTM3NSIvPjxwb2x5Z29uIGZpbGw9IiMwMDAwMDAiIHBvaW50cz0iMTczLjAwMTEsMTQyLjkzNzUsMTc3LjAwMTEsMTUyLjkzNzUsMTgxLjAwMTEsMTQyLjkzNzUsMTc3LjAwMTEsMTQ2LjkzNzUiIHN0eWxlPSJzdHJva2U6IzAwMDAwMDtzdHJva2Utd2lkdGg6MTsiLz48bGluZSBzdHlsZT0ic3Ryb2tlOiMwMDAwMDA7c3Ryb2tlLXdpZHRoOjE7IiB4MT0iMTc3LjAwMTEiIHgyPSIxNzcuMDAxMSIgeTE9IjM1OC44NDM4IiB5Mj0iMzc4Ljg0MzgiLz48cG9seWdvbiBmaWxsPSIjMDAwMDAwIiBwb2ludHM9IjE3My4wMDExLDM2OC44NDM4LDE3Ny4wMDExLDM3OC44NDM4LDE4MS4wMDExLDM2OC44NDM4LDE3Ny4wMDExLDM3Mi44NDM4IiBzdHlsZT0ic3Ryb2tlOiMwMDAwMDA7c3Ryb2tlLXdpZHRoOjE7Ii8+PD9wbGFudHVtbC1zcmMgUFAzREpXOG41OE50Vk9nd1d1cUZtMm9Dazc5ZHRCWGtYaThxMzJ0ZkwxRFlOQkhUODFlSURGWXBLNGR5WUdIYmZTUThjN2NPb3AzdTVkT3E4R1FNenpucGx0RG9MckgwUW5KTkd5OHVZZ2dDcnVhYURLbnluVlFPUWsxekwySC1qSUI1Qll6alk1MThsMUNtSEw1SG8xQUxWcWVuVDFQcVc1MmFZNUc4NVMwQ21UdzFqTTNVbUp4eVprRXFzdmlVVFpvdHplYVZxREtBTEhacXV1OHRsSHREMWN0ZE9jTVNNLUplOXgxRFhtOEpXcFBXWmpSb3NGTmRFRFVXS051dkxuLTNRU3JGUGQ0dFFSendZOE9Ibkpha3Q0NW9WX3ZqLXRYelFuRTNFS3JFbmcxVmFrTzh6OE03MmtiUlB0ZnB2VkpiNmZGdUVYYlVfbFZDdVJwNG9qYWRIMXFYQlhKNWFiSzJYUlBmRU9rT1ZDTGZqLV91ZTdpOHAwVk92dW5oTXMwLWl2UnMzRkhXOEl6WnVXcHIwbTAwPz48L2c+PC9zdmc+" class="uml" alt="uml diagram" title="" /></p>
<h3 id="116">11.6 ガイドスコアの計算<a class="headerlink" href="#116" title="Permanent link">&para;</a></h3>
<p>純粋関数でガイドのスコアを計算します:</p>
<div class="highlight"><pre><span></span><code><span class="cm">/**</span>
<span class="cm"> * ガイドのスコアを計算</span>
<span class="cm"> *</span>
<span class="cm"> * 要件:</span>
<span class="cm"> * - 30 点: 説明がある場合</span>
<span class="cm"> * - 10 点/件: アーティストまたは映画（最大 40 点）</span>
<span class="cm"> * - 1 点/100,000 フォロワー: 全アーティスト合計（最大 15 点）</span>
<span class="cm"> * - 1 点/10,000,000 ドル: 全映画の興行収入合計（最大 15 点）</span>
<span class="cm"> */</span>
<span class="kd">public</span><span class="w"> </span><span class="kd">static</span><span class="w"> </span><span class="kt">int</span><span class="w"> </span><span class="nf">guideScore</span><span class="p">(</span><span class="n">Guide</span><span class="w"> </span><span class="n">guide</span><span class="p">)</span><span class="w"> </span><span class="p">{</span>
<span class="w">    </span><span class="kt">int</span><span class="w"> </span><span class="n">descriptionScore</span><span class="w"> </span><span class="o">=</span><span class="w"> </span><span class="n">guide</span><span class="p">.</span><span class="na">attraction</span><span class="p">().</span><span class="na">description</span><span class="p">().</span><span class="na">isDefined</span><span class="p">()</span><span class="w"> </span><span class="o">?</span><span class="w"> </span><span class="mi">30</span><span class="w"> </span><span class="p">:</span><span class="w"> </span><span class="mi">0</span><span class="p">;</span>
<span class="w">    </span><span class="kt">int</span><span class="w"> </span><span class="n">quantityScore</span><span class="w"> </span><span class="o">=</span><span class="w"> </span><span class="n">Math</span><span class="p">.</span><span class="na">min</span><span class="p">(</span><span class="mi">40</span><span class="p">,</span><span class="w"> </span><span class="n">guide</span><span class="p">.</span><span class="na">subjects</span><span class="p">().</span><span class="na">size</span><span class="p">()</span><span class="w"> </span><span class="o">*</span><span class="w"> </span><span class="mi">10</span><span class="p">);</span>

<span class="w">    </span><span class="c1">// Long を使用してオーバーフローを防ぐ</span>
<span class="w">    </span><span class="kt">long</span><span class="w"> </span><span class="n">totalFollowers</span><span class="w"> </span><span class="o">=</span><span class="w"> </span><span class="n">guide</span><span class="p">.</span><span class="na">subjects</span><span class="p">()</span>
<span class="w">            </span><span class="p">.</span><span class="na">filter</span><span class="p">(</span><span class="n">s</span><span class="w"> </span><span class="o">-&gt;</span><span class="w"> </span><span class="n">s</span><span class="w"> </span><span class="k">instanceof</span><span class="w"> </span><span class="n">Artist</span><span class="p">)</span>
<span class="w">            </span><span class="p">.</span><span class="na">map</span><span class="p">(</span><span class="n">s</span><span class="w"> </span><span class="o">-&gt;</span><span class="w"> </span><span class="p">(</span><span class="kt">long</span><span class="p">)</span><span class="w"> </span><span class="p">((</span><span class="n">Artist</span><span class="p">)</span><span class="w"> </span><span class="n">s</span><span class="p">).</span><span class="na">followers</span><span class="p">())</span>
<span class="w">            </span><span class="p">.</span><span class="na">sum</span><span class="p">().</span><span class="na">longValue</span><span class="p">();</span>

<span class="w">    </span><span class="kt">long</span><span class="w"> </span><span class="n">totalBoxOffice</span><span class="w"> </span><span class="o">=</span><span class="w"> </span><span class="n">guide</span><span class="p">.</span><span class="na">subjects</span><span class="p">()</span>
<span class="w">            </span><span class="p">.</span><span class="na">filter</span><span class="p">(</span><span class="n">s</span><span class="w"> </span><span class="o">-&gt;</span><span class="w"> </span><span class="n">s</span><span class="w"> </span><span class="k">instanceof</span><span class="w"> </span><span class="n">Movie</span><span class="p">)</span>
<span class="w">            </span><span class="p">.</span><span class="na">map</span><span class="p">(</span><span class="n">s</span><span class="w"> </span><span class="o">-&gt;</span><span class="w"> </span><span class="p">(</span><span class="kt">long</span><span class="p">)</span><span class="w"> </span><span class="p">((</span><span class="n">Movie</span><span class="p">)</span><span class="w"> </span><span class="n">s</span><span class="p">).</span><span class="na">boxOffice</span><span class="p">())</span>
<span class="w">            </span><span class="p">.</span><span class="na">sum</span><span class="p">().</span><span class="na">longValue</span><span class="p">();</span>

<span class="w">    </span><span class="kt">int</span><span class="w"> </span><span class="n">followersScore</span><span class="w"> </span><span class="o">=</span><span class="w"> </span><span class="p">(</span><span class="kt">int</span><span class="p">)</span><span class="w"> </span><span class="n">Math</span><span class="p">.</span><span class="na">min</span><span class="p">(</span><span class="mi">15</span><span class="p">,</span><span class="w"> </span><span class="n">totalFollowers</span><span class="w"> </span><span class="o">/</span><span class="w"> </span><span class="mi">100_000</span><span class="p">);</span>
<span class="w">    </span><span class="kt">int</span><span class="w"> </span><span class="n">boxOfficeScore</span><span class="w"> </span><span class="o">=</span><span class="w"> </span><span class="p">(</span><span class="kt">int</span><span class="p">)</span><span class="w"> </span><span class="n">Math</span><span class="p">.</span><span class="na">min</span><span class="p">(</span><span class="mi">15</span><span class="p">,</span><span class="w"> </span><span class="n">totalBoxOffice</span><span class="w"> </span><span class="o">/</span><span class="w"> </span><span class="mi">10_000_000</span><span class="p">);</span>

<span class="w">    </span><span class="k">return</span><span class="w"> </span><span class="n">descriptionScore</span><span class="w"> </span><span class="o">+</span><span class="w"> </span><span class="n">quantityScore</span><span class="w"> </span><span class="o">+</span><span class="w"> </span><span class="n">followersScore</span><span class="w"> </span><span class="o">+</span><span class="w"> </span><span class="n">boxOfficeScore</span><span class="p">;</span>
<span class="p">}</span>
</code></pre></div>
<p>重要なポイント:
- <strong>オーバーフロー防止</strong>: <code>long</code> を使用して大きな数値の合計を安全に計算
- <strong>上限値の設定</strong>: 各スコア成分に最大値を設定してスコアを 0-100 の範囲に</p>
<h3 id="117">11.7 アプリケーションの組み立て<a class="headerlink" href="#117" title="Permanent link">&para;</a></h3>
<p>すべてのコンポーネントを組み合わせてアプリケーションを構築します。</p>
<h4 id="1">バージョン 1: 基本的な実装<a class="headerlink" href="#1" title="Permanent link">&para;</a></h4>
<div class="highlight"><pre><span></span><code><span class="kd">public</span><span class="w"> </span><span class="kd">static</span><span class="w"> </span><span class="n">IO</span><span class="o">&lt;</span><span class="n">Option</span><span class="o">&lt;</span><span class="n">Guide</span><span class="o">&gt;&gt;</span><span class="w"> </span><span class="nf">travelGuideV1</span><span class="p">(</span>
<span class="w">        </span><span class="n">DataAccess</span><span class="w"> </span><span class="n">dataAccess</span><span class="p">,</span>
<span class="w">        </span><span class="n">String</span><span class="w"> </span><span class="n">attractionName</span><span class="p">)</span><span class="w"> </span><span class="p">{</span>

<span class="w">    </span><span class="k">return</span><span class="w"> </span><span class="n">dataAccess</span><span class="p">.</span><span class="na">findAttractions</span><span class="p">(</span><span class="n">attractionName</span><span class="p">,</span><span class="w"> </span><span class="n">AttractionOrdering</span><span class="p">.</span><span class="na">BY_LOCATION_POPULATION</span><span class="p">,</span><span class="w"> </span><span class="mi">1</span><span class="p">)</span>
<span class="w">            </span><span class="p">.</span><span class="na">flatMap</span><span class="p">(</span><span class="n">attractions</span><span class="w"> </span><span class="o">-&gt;</span><span class="w"> </span><span class="n">attractions</span><span class="p">.</span><span class="na">headOption</span><span class="p">()</span>
<span class="w">                    </span><span class="p">.</span><span class="na">map</span><span class="p">(</span><span class="n">attraction</span><span class="w"> </span><span class="o">-&gt;</span>
<span class="w">                            </span><span class="n">dataAccess</span><span class="p">.</span><span class="na">findArtistsFromLocation</span><span class="p">(</span><span class="n">attraction</span><span class="p">.</span><span class="na">location</span><span class="p">().</span><span class="na">id</span><span class="p">(),</span><span class="w"> </span><span class="mi">2</span><span class="p">)</span>
<span class="w">                                    </span><span class="p">.</span><span class="na">flatMap</span><span class="p">(</span><span class="n">artists</span><span class="w"> </span><span class="o">-&gt;</span>
<span class="w">                                            </span><span class="n">dataAccess</span><span class="p">.</span><span class="na">findMoviesAboutLocation</span><span class="p">(</span><span class="n">attraction</span><span class="p">.</span><span class="na">location</span><span class="p">().</span><span class="na">id</span><span class="p">(),</span><span class="w"> </span><span class="mi">2</span><span class="p">)</span>
<span class="w">                                                    </span><span class="p">.</span><span class="na">map</span><span class="p">(</span><span class="n">movies</span><span class="w"> </span><span class="o">-&gt;</span><span class="w"> </span><span class="p">{</span>
<span class="w">                                                        </span><span class="n">List</span><span class="o">&lt;</span><span class="n">PopCultureSubject</span><span class="o">&gt;</span><span class="w"> </span><span class="n">subjects</span><span class="w"> </span><span class="o">=</span><span class="w"> </span><span class="n">List</span><span class="p">.</span><span class="o">&lt;</span><span class="n">PopCultureSubject</span><span class="o">&gt;</span><span class="n">empty</span><span class="p">()</span>
<span class="w">                                                                </span><span class="p">.</span><span class="na">appendAll</span><span class="p">(</span><span class="n">artists</span><span class="p">)</span>
<span class="w">                                                                </span><span class="p">.</span><span class="na">appendAll</span><span class="p">(</span><span class="n">movies</span><span class="p">);</span>
<span class="w">                                                        </span><span class="k">return</span><span class="w"> </span><span class="n">Option</span><span class="p">.</span><span class="na">some</span><span class="p">(</span><span class="k">new</span><span class="w"> </span><span class="n">Guide</span><span class="p">(</span><span class="n">attraction</span><span class="p">,</span><span class="w"> </span><span class="n">subjects</span><span class="p">));</span>
<span class="w">                                                    </span><span class="p">})</span>
<span class="w">                                    </span><span class="p">)</span>
<span class="w">                    </span><span class="p">)</span>
<span class="w">                    </span><span class="p">.</span><span class="na">getOrElse</span><span class="p">(</span><span class="n">IO</span><span class="p">.</span><span class="na">pure</span><span class="p">(</span><span class="n">Option</span><span class="p">.</span><span class="na">none</span><span class="p">()))</span>
<span class="w">            </span><span class="p">);</span>
<span class="p">}</span>
</code></pre></div>
<h4 id="2">バージョン 2: 複数候補からベストを選択<a class="headerlink" href="#2" title="Permanent link">&para;</a></h4>
<div class="highlight"><pre><span></span><code><span class="kd">public</span><span class="w"> </span><span class="kd">static</span><span class="w"> </span><span class="n">IO</span><span class="o">&lt;</span><span class="n">Option</span><span class="o">&lt;</span><span class="n">Guide</span><span class="o">&gt;&gt;</span><span class="w"> </span><span class="nf">travelGuideV2</span><span class="p">(</span>
<span class="w">        </span><span class="n">DataAccess</span><span class="w"> </span><span class="n">dataAccess</span><span class="p">,</span>
<span class="w">        </span><span class="n">String</span><span class="w"> </span><span class="n">attractionName</span><span class="p">)</span><span class="w"> </span><span class="p">{</span>

<span class="w">    </span><span class="k">return</span><span class="w"> </span><span class="n">dataAccess</span><span class="p">.</span><span class="na">findAttractions</span><span class="p">(</span><span class="n">attractionName</span><span class="p">,</span><span class="w"> </span><span class="n">AttractionOrdering</span><span class="p">.</span><span class="na">BY_LOCATION_POPULATION</span><span class="p">,</span><span class="w"> </span><span class="mi">3</span><span class="p">)</span>
<span class="w">            </span><span class="p">.</span><span class="na">flatMap</span><span class="p">(</span><span class="n">attractions</span><span class="w"> </span><span class="o">-&gt;</span>
<span class="w">                    </span><span class="n">IO</span><span class="p">.</span><span class="na">traverse</span><span class="p">(</span><span class="n">attractions</span><span class="p">,</span><span class="w"> </span><span class="n">attraction</span><span class="w"> </span><span class="o">-&gt;</span>
<span class="w">                            </span><span class="n">dataAccess</span><span class="p">.</span><span class="na">findArtistsFromLocation</span><span class="p">(</span><span class="n">attraction</span><span class="p">.</span><span class="na">location</span><span class="p">().</span><span class="na">id</span><span class="p">(),</span><span class="w"> </span><span class="mi">2</span><span class="p">)</span>
<span class="w">                                    </span><span class="p">.</span><span class="na">flatMap</span><span class="p">(</span><span class="n">artists</span><span class="w"> </span><span class="o">-&gt;</span>
<span class="w">                                            </span><span class="n">dataAccess</span><span class="p">.</span><span class="na">findMoviesAboutLocation</span><span class="p">(</span><span class="n">attraction</span><span class="p">.</span><span class="na">location</span><span class="p">().</span><span class="na">id</span><span class="p">(),</span><span class="w"> </span><span class="mi">2</span><span class="p">)</span>
<span class="w">                                                    </span><span class="p">.</span><span class="na">map</span><span class="p">(</span><span class="n">movies</span><span class="w"> </span><span class="o">-&gt;</span><span class="w"> </span><span class="p">{</span>
<span class="w">                                                        </span><span class="n">List</span><span class="o">&lt;</span><span class="n">PopCultureSubject</span><span class="o">&gt;</span><span class="w"> </span><span class="n">subjects</span><span class="w"> </span><span class="o">=</span><span class="w"> </span><span class="n">List</span><span class="p">.</span><span class="o">&lt;</span><span class="n">PopCultureSubject</span><span class="o">&gt;</span><span class="n">empty</span><span class="p">()</span>
<span class="w">                                                                </span><span class="p">.</span><span class="na">appendAll</span><span class="p">(</span><span class="n">artists</span><span class="p">)</span>
<span class="w">                                                                </span><span class="p">.</span><span class="na">appendAll</span><span class="p">(</span><span class="n">movies</span><span class="p">);</span>
<span class="w">                                                        </span><span class="k">return</span><span class="w"> </span><span class="k">new</span><span class="w"> </span><span class="n">Guide</span><span class="p">(</span><span class="n">attraction</span><span class="p">,</span><span class="w"> </span><span class="n">subjects</span><span class="p">);</span>
<span class="w">                                                    </span><span class="p">})</span>
<span class="w">                                    </span><span class="p">)</span>
<span class="w">                    </span><span class="p">).</span><span class="na">map</span><span class="p">(</span><span class="n">TravelGuide</span><span class="p">::</span><span class="n">findBestGuide</span><span class="p">)</span>
<span class="w">            </span><span class="p">);</span>
<span class="p">}</span>
</code></pre></div>
<h4 id="3">バージョン 3: エラーハンドリング付き<a class="headerlink" href="#3" title="Permanent link">&para;</a></h4>
<div class="highlight"><pre><span></span><code><span class="kd">public</span><span class="w"> </span><span class="kd">static</span><span class="w"> </span><span class="n">IO</span><span class="o">&lt;</span><span class="n">Either</span><span class="o">&lt;</span><span class="n">SearchReport</span><span class="p">,</span><span class="w"> </span><span class="n">Guide</span><span class="o">&gt;&gt;</span><span class="w"> </span><span class="nf">travelGuideV3</span><span class="p">(</span>
<span class="w">        </span><span class="n">DataAccess</span><span class="w"> </span><span class="n">dataAccess</span><span class="p">,</span>
<span class="w">        </span><span class="n">String</span><span class="w"> </span><span class="n">attractionName</span><span class="p">)</span><span class="w"> </span><span class="p">{</span>

<span class="w">    </span><span class="k">return</span><span class="w"> </span><span class="n">dataAccess</span><span class="p">.</span><span class="na">findAttractions</span><span class="p">(</span><span class="n">attractionName</span><span class="p">,</span><span class="w"> </span><span class="n">AttractionOrdering</span><span class="p">.</span><span class="na">BY_LOCATION_POPULATION</span><span class="p">,</span><span class="w"> </span><span class="mi">3</span><span class="p">)</span>
<span class="w">            </span><span class="p">.</span><span class="na">attempt</span><span class="p">()</span>
<span class="w">            </span><span class="p">.</span><span class="na">flatMap</span><span class="p">(</span><span class="n">attractionsResult</span><span class="w"> </span><span class="o">-&gt;</span>
<span class="w">                    </span><span class="n">attractionsResult</span><span class="p">.</span><span class="na">fold</span><span class="p">(</span>
<span class="w">                            </span><span class="n">error</span><span class="w"> </span><span class="o">-&gt;</span><span class="w"> </span><span class="n">IO</span><span class="p">.</span><span class="na">pure</span><span class="p">(</span><span class="n">Either</span><span class="p">.</span><span class="na">left</span><span class="p">(</span>
<span class="w">                                    </span><span class="n">SearchReport</span><span class="p">.</span><span class="na">withProblems</span><span class="p">(</span><span class="n">List</span><span class="p">.</span><span class="na">of</span><span class="p">(</span><span class="n">error</span><span class="p">.</span><span class="na">getMessage</span><span class="p">())))),</span>
<span class="w">                            </span><span class="n">attractions</span><span class="w"> </span><span class="o">-&gt;</span>
<span class="w">                                    </span><span class="n">IO</span><span class="p">.</span><span class="na">traverse</span><span class="p">(</span><span class="n">attractions</span><span class="p">,</span><span class="w"> </span><span class="n">attraction</span><span class="w"> </span><span class="o">-&gt;</span>
<span class="w">                                                    </span><span class="n">guideForAttraction</span><span class="p">(</span><span class="n">dataAccess</span><span class="p">,</span><span class="w"> </span><span class="n">attraction</span><span class="p">).</span><span class="na">attempt</span><span class="p">()</span>
<span class="w">                                            </span><span class="p">)</span>
<span class="w">                                            </span><span class="p">.</span><span class="na">map</span><span class="p">(</span><span class="n">TravelGuide</span><span class="p">::</span><span class="n">processGuideResults</span><span class="p">)</span>
<span class="w">                    </span><span class="p">)</span>
<span class="w">            </span><span class="p">);</span>
<span class="p">}</span>
</code></pre></div>
<p><img src="data:image/svg+xml;base64,PD9wbGFudHVtbCAxLjIwMjYuMT8+PHN2ZyB4bWxucz0iaHR0cDovL3d3dy53My5vcmcvMjAwMC9zdmciIHhtbG5zOnhsaW5rPSJodHRwOi8vd3d3LnczLm9yZy8xOTk5L3hsaW5rIiBjb250ZW50U3R5bGVUeXBlPSJ0ZXh0L2NzcyIgZGF0YS1kaWFncmFtLXR5cGU9IkRFU0NSSVBUSU9OIiBoZWlnaHQ9IjQ3N3B4IiBwcmVzZXJ2ZUFzcGVjdFJhdGlvPSJub25lIiBzdHlsZT0id2lkdGg6MzI5cHg7aGVpZ2h0OjQ3N3B4O2JhY2tncm91bmQ6I0ZGRkZGRjsiIHZlcnNpb249IjEuMSIgdmlld0JveD0iMCAwIDMyOSA0NzciIHdpZHRoPSIzMjlweCIgem9vbUFuZFBhbj0ibWFnbmlmeSI+PGRlZnMvPjxnPjwhLS1jbHVzdGVyIHRyYXZlbEd1aWRlID8/LS0+PGcgY2xhc3M9ImNsdXN0ZXIiIGRhdGEtcXVhbGlmaWVkLW5hbWU9InRyYXZlbEd1aWRlIC4uIiBkYXRhLXNvdXJjZS1saW5lPSIzIiBpZD0iZW50MDAwMiI+PHJlY3QgZmlsbD0iI0ZGRkZGRiIgaGVpZ2h0PSIzNzEuMTgiIHJ4PSIyLjUiIHJ5PSIyLjUiIHN0eWxlPSJzdHJva2U6IzAwMDAwMDtzdHJva2Utd2lkdGg6MTsiIHdpZHRoPSIzMTEiIHg9IjEyIiB5PSIxMiIvPjx0ZXh0IGZpbGw9IiMwMDAwMDAiIGZvbnQtZmFtaWx5PSJWZXJkYW5hIiBmb250LXNpemU9IjE0IiBmb250LXdlaWdodD0iYm9sZCIgbGVuZ3RoQWRqdXN0PSJzcGFjaW5nIiB0ZXh0TGVuZ3RoPSIxMjUuMTExMiIgeD0iMTA0Ljk0NDQiIHk9IjI2Ljk5NTEiPnRyYXZlbEd1aWRlICYjMzgzMDY7JiMyNTk2ODs8L3RleHQ+PC9nPjwhLS1lbnRpdHkgc3RlcDEtLT48ZyBjbGFzcz0iZW50aXR5IiBkYXRhLXF1YWxpZmllZC1uYW1lPSJ0cmF2ZWxHdWlkZSAuLi5zdGVwMSIgZGF0YS1zb3VyY2UtbGluZT0iNCIgaWQ9ImVudDAwMDMiPjxyZWN0IGZpbGw9IiNGRkZGRkYiIGhlaWdodD0iMjIuMjk2OSIgcng9IjIuNSIgcnk9IjIuNSIgc3R5bGU9InN0cm9rZTojMDAwMDAwO3N0cm9rZS13aWR0aDoxOyIgd2lkdGg9IjE2My44MDcxIiB4PSI3Ny4xIiB5PSI0NyIvPjx0ZXh0IGZpbGw9IiMwMDAwMDAiIGZvbnQtZmFtaWx5PSJWZXJkYW5hIiBmb250LXNpemU9IjE0IiBsZW5ndGhBZGp1c3Q9InNwYWNpbmciIHRleHRMZW5ndGg9IjE0My44MDcxIiB4PSI4Ny4xIiB5PSI2Mi45OTUxIj4xLiAmIzEyNDUwOyYjMTI0ODg7JiMxMjUyMTsmIzEyNDYzOyYjMTI0NzE7JiMxMjUxOTsmIzEyNTMxOyYjMjY5MDg7JiMzMjAzNDs8L3RleHQ+PC9nPjwhLS1lbnRpdHkgc3RlcDItLT48ZyBjbGFzcz0iZW50aXR5IiBkYXRhLXF1YWxpZmllZC1uYW1lPSJ0cmF2ZWxHdWlkZSAuLi5zdGVwMiIgZGF0YS1zb3VyY2UtbGluZT0iNSIgaWQ9ImVudDAwMDQiPjxyZWN0IGZpbGw9IiNGRkZGRkYiIGhlaWdodD0iMjIuMjk2OSIgcng9IjIuNSIgcnk9IjIuNSIgc3R5bGU9InN0cm9rZTojMDAwMDAwO3N0cm9rZS13aWR0aDoxOyIgd2lkdGg9IjE0OS44MDcxIiB4PSIyOC4xIiB5PSIxNDYuMjkiLz48dGV4dCBmaWxsPSIjMDAwMDAwIiBmb250LWZhbWlseT0iVmVyZGFuYSIgZm9udC1zaXplPSIxNCIgbGVuZ3RoQWRqdXN0PSJzcGFjaW5nIiB0ZXh0TGVuZ3RoPSIxMjkuODA3MSIgeD0iMzguMSIgeT0iMTYyLjI4NTEiPjIuICYjMTI0NTA7JiMxMjU0MDsmIzEyNDg2OyYjMTI0NTE7JiMxMjQ3MzsmIzEyNDg4OyYjMjY5MDg7JiMzMjAzNDs8L3RleHQ+PC9nPjwhLS1lbnRpdHkgc3RlcDMtLT48ZyBjbGFzcz0iZW50aXR5IiBkYXRhLXF1YWxpZmllZC1uYW1lPSJ0cmF2ZWxHdWlkZSAuLi5zdGVwMyIgZGF0YS1zb3VyY2UtbGluZT0iNiIgaWQ9ImVudDAwMDUiPjxyZWN0IGZpbGw9IiNGRkZGRkYiIGhlaWdodD0iMjIuMjk2OSIgcng9IjIuNSIgcnk9IjIuNSIgc3R5bGU9InN0cm9rZTojMDAwMDAwO3N0cm9rZS13aWR0aDoxOyIgd2lkdGg9IjkzLjgwNzQiIHg9IjIxMy4xIiB5PSIxNDYuMjkiLz48dGV4dCBmaWxsPSIjMDAwMDAwIiBmb250LWZhbWlseT0iVmVyZGFuYSIgZm9udC1zaXplPSIxNCIgbGVuZ3RoQWRqdXN0PSJzcGFjaW5nIiB0ZXh0TGVuZ3RoPSI3My44MDc0IiB4PSIyMjMuMSIgeT0iMTYyLjI4NTEiPjMuICYjMjYxNDQ7JiMzMDAxMTsmIzI2OTA4OyYjMzIwMzQ7PC90ZXh0PjwvZz48IS0tZW50aXR5IHN0ZXA0LS0+PGcgY2xhc3M9ImVudGl0eSIgZGF0YS1xdWFsaWZpZWQtbmFtZT0idHJhdmVsR3VpZGUgLi4uc3RlcDQiIGRhdGEtc291cmNlLWxpbmU9IjciIGlkPSJlbnQwMDA2Ij48cmVjdCBmaWxsPSIjRkZGRkZGIiBoZWlnaHQ9IjIyLjI5NjkiIHJ4PSIyLjUiIHJ5PSIyLjUiIHN0eWxlPSJzdHJva2U6IzAwMDAwMDtzdHJva2Utd2lkdGg6MTsiIHdpZHRoPSIxMzkuMzY4OSIgeD0iOTIuMzIiIHk9IjI0NS41OSIvPjx0ZXh0IGZpbGw9IiMwMDAwMDAiIGZvbnQtZmFtaWx5PSJWZXJkYW5hIiBmb250LXNpemU9IjE0IiBsZW5ndGhBZGp1c3Q9InNwYWNpbmciIHRleHRMZW5ndGg9IjExOS4zNjg5IiB4PSIxMDIuMzIiIHk9IjI2MS41ODUxIj40LiBHdWlkZSAmIzMyMDY4OyYjMTI0MTU7JiMzMTQzNTsmIzEyMzkwOzwvdGV4dD48L2c+PCEtLWVudGl0eSBzdGVwNS0tPjxnIGNsYXNzPSJlbnRpdHkiIGRhdGEtcXVhbGlmaWVkLW5hbWU9InRyYXZlbEd1aWRlIC4uLnN0ZXA1IiBkYXRhLXNvdXJjZS1saW5lPSI4IiBpZD0iZW50MDAwNyI+PHJlY3QgZmlsbD0iI0ZGRkZGRiIgaGVpZ2h0PSIyMi4yOTY5IiByeD0iMi41IiByeT0iMi41IiBzdHlsZT0ic3Ryb2tlOiMwMDAwMDA7c3Ryb2tlLXdpZHRoOjE7IiB3aWR0aD0iMTIxLjgwNzMiIHg9IjEwMS4xIiB5PSIzNDQuODkiLz48dGV4dCBmaWxsPSIjMDAwMDAwIiBmb250LWZhbWlseT0iVmVyZGFuYSIgZm9udC1zaXplPSIxNCIgbGVuZ3RoQWRqdXN0PSJzcGFjaW5nIiB0ZXh0TGVuZ3RoPSIxMDEuODA3MyIgeD0iMTExLjEiIHk9IjM2MC44ODUxIj41LiAmIzEyNTA1OyYjMTI0NzM7JiMxMjQ4ODsmIzEyNDM0OyYjMzY5ODQ7JiMyNTI0Njs8L3RleHQ+PC9nPjxnIGNsYXNzPSJlbnRpdHkiIGRhdGEtcXVhbGlmaWVkLW5hbWU9IkdNTjEzIiBkYXRhLXNvdXJjZS1saW5lPSIxOCIgaWQ9ImVudDAwMTQiPjxwYXRoIGQ9Ik0xMDEuMzMsNDMwLjE4IEwxMDEuMzMsNDcwLjQ0NTYgQTAsMCAwIDAgMCAxMDEuMzMsNDcwLjQ0NTYgTDIyMi42NjExLDQ3MC40NDU2IEEwLDAgMCAwIDAgMjIyLjY2MTEsNDcwLjQ0NTYgTDIyMi42NjExLDQ0MC4xOCBMMjEyLjY2MTEsNDMwLjE4IEwxNjYsNDMwLjE4IEwxNjIsMzY3LjYyIEwxNTgsNDMwLjE4IEwxMDEuMzMsNDMwLjE4IEEwLDAgMCAwIDAgMTAxLjMzLDQzMC4xOCIgZmlsbD0iI0ZGRkZGRiIgc3R5bGU9InN0cm9rZTojMDAwMDAwO3N0cm9rZS13aWR0aDoxOyIvPjxwYXRoIGQ9Ik0yMTIuNjYxMSw0MzAuMTggTDIxMi42NjExLDQ0MC4xOCBMMjIyLjY2MTEsNDQwLjE4IEwyMTIuNjYxMSw0MzAuMTgiIGZpbGw9IiNGRkZGRkYiIHN0eWxlPSJzdHJva2U6IzAwMDAwMDtzdHJva2Utd2lkdGg6MTsiLz48dGV4dCBmaWxsPSIjMDAwMDAwIiBmb250LWZhbWlseT0iVmVyZGFuYSIgZm9udC1zaXplPSIxMyIgbGVuZ3RoQWRqdXN0PSJzcGFjaW5nIiB0ZXh0TGVuZ3RoPSI4OS41NDY0IiB4PSIxMDcuMzMiIHk9IjQ0Ny4yNDY5Ij5JTy50cmF2ZXJzZSAmIzEyMzkxOzwvdGV4dD48dGV4dCBmaWxsPSIjMDAwMDAwIiBmb250LWZhbWlseT0iVmVyZGFuYSIgZm9udC1zaXplPSIxMyIgbGVuZ3RoQWRqdXN0PSJzcGFjaW5nIiB0ZXh0TGVuZ3RoPSIxMDAuMzMxMSIgeD0iMTA3LjMzIiB5PSI0NjIuMzc5NyI+JiMzNTA3OTsmIzI1OTY4OyYjMTIzOTg7IElPICYjMTI0MzQ7JiMyMTUxMjsmIzI1MTA0OzwvdGV4dD48L2c+PCEtLWxpbmsgc3RlcDEgdG8gc3RlcDItLT48ZyBjbGFzcz0ibGluayIgZGF0YS1lbnRpdHktMT0iZW50MDAwMyIgZGF0YS1lbnRpdHktMj0iZW50MDAwNCIgZGF0YS1saW5rLXR5cGU9ImRlcGVuZGVuY3kiIGRhdGEtc291cmNlLWxpbmU9IjEwIiBpZD0ibG5rOCI+PHBhdGggZD0iTTE0Ni45LDY5LjY5IEMxMzguODgsNzcuMjQgMTI4LjY0LDg4LjAzIDEyMiw5OS4yOSBDMTEzLjA4LDExNC40MiAxMDguOTg2MywxMjguNDUzOSAxMDYuMzM2MywxNDAuMzMzOSIgZmlsbD0ibm9uZSIgaWQ9InN0ZXAxLXRvLXN0ZXAyIiBzdHlsZT0ic3Ryb2tlOiMwMDAwMDA7c3Ryb2tlLXdpZHRoOjE7Ii8+PHBvbHlnb24gZmlsbD0iIzAwMDAwMCIgcG9pbnRzPSIxMDUuMDMsMTQ2LjE5LDExMC44OTM1LDEzOC4yNzY3LDEwNi4xMTg2LDE0MS4zMDk5LDEwMy4wODU0LDEzNi41MzUsMTA1LjAzLDE0Ni4xOSIgc3R5bGU9InN0cm9rZTojMDAwMDAwO3N0cm9rZS13aWR0aDoxOyIvPjx0ZXh0IGZpbGw9IiMwMDAwMDAiIGZvbnQtZmFtaWx5PSJWZXJkYW5hIiBmb250LXNpemU9IjEzIiBsZW5ndGhBZGp1c3Q9InNwYWNpbmciIHRleHRMZW5ndGg9IjYzLjUyMSIgeD0iMTIzIiB5PSIxMTIuMzU2OSI+YXR0cmFjdGlvbjwvdGV4dD48L2c+PCEtLWxpbmsgc3RlcDEgdG8gc3RlcDMtLT48ZyBjbGFzcz0ibGluayIgZGF0YS1lbnRpdHktMT0iZW50MDAwMyIgZGF0YS1lbnRpdHktMj0iZW50MDAwNSIgZGF0YS1saW5rLXR5cGU9ImRlcGVuZGVuY3kiIGRhdGEtc291cmNlLWxpbmU9IjExIiBpZD0ibG5rOSI+PHBhdGggZD0iTTE2OS44MSw2OS41NiBDMTg5LjE1LDg4LjE5IDIyNS4xMzk0LDEyMi44NTY3IDI0NC42Mzk0LDE0MS42NDY3IiBmaWxsPSJub25lIiBpZD0ic3RlcDEtdG8tc3RlcDMiIHN0eWxlPSJzdHJva2U6IzAwMDAwMDtzdHJva2Utd2lkdGg6MTsiLz48cG9seWdvbiBmaWxsPSIjMDAwMDAwIiBwb2ludHM9IjI0OC45NiwxNDUuODEsMjQ1LjI1NDcsMTM2LjY4NDcsMjQ1LjM1OTUsMTQyLjM0MDYsMjM5LjcwMzYsMTQyLjQ0NTUsMjQ4Ljk2LDE0NS44MSIgc3R5bGU9InN0cm9rZTojMDAwMDAwO3N0cm9rZS13aWR0aDoxOyIvPjx0ZXh0IGZpbGw9IiMwMDAwMDAiIGZvbnQtZmFtaWx5PSJWZXJkYW5hIiBmb250LXNpemU9IjEzIiBsZW5ndGhBZGp1c3Q9InNwYWNpbmciIHRleHRMZW5ndGg9IjY3LjU3NzEiIHg9IjIxNi41NSIgeT0iMTEyLjM1NjkiPmxvY2F0aW9uLmlkPC90ZXh0PjwvZz48IS0tbGluayBzdGVwMiB0byBzdGVwNC0tPjxnIGNsYXNzPSJsaW5rIiBkYXRhLWVudGl0eS0xPSJlbnQwMDA0IiBkYXRhLWVudGl0eS0yPSJlbnQwMDA2IiBkYXRhLWxpbmstdHlwZT0iZGVwZW5kZW5jeSIgZGF0YS1zb3VyY2UtbGluZT0iMTIiIGlkPSJsbmsxMCI+PHBhdGggZD0iTTEwOS4zMSwxNjguODUgQzEyMC42MSwxODcuNDggMTQxLjA0OTgsMjIxLjE4OTEgMTUyLjQzOTgsMjM5Ljk3OTEiIGZpbGw9Im5vbmUiIGlkPSJzdGVwMi10by1zdGVwNCIgc3R5bGU9InN0cm9rZTojMDAwMDAwO3N0cm9rZS13aWR0aDoxOyIvPjxwb2x5Z29uIGZpbGw9IiMwMDAwMDAiIHBvaW50cz0iMTU1LjU1LDI0NS4xMSwxNTQuMzA1MywyMzUuMzQwMSwxNTIuOTU4MSwyNDAuODM0MiwxNDcuNDY0LDIzOS40ODcxLDE1NS41NSwyNDUuMTEiIHN0eWxlPSJzdHJva2U6IzAwMDAwMDtzdHJva2Utd2lkdGg6MTsiLz48dGV4dCBmaWxsPSIjMDAwMDAwIiBmb250LWZhbWlseT0iVmVyZGFuYSIgZm9udC1zaXplPSIxMyIgbGVuZ3RoQWRqdXN0PSJzcGFjaW5nIiB0ZXh0TGVuZ3RoPSI0MC42NjMxIiB4PSIxMzcuMDMiIHk9IjIxMS42NTY5Ij5hcnRpc3RzPC90ZXh0PjwvZz48IS0tbGluayBzdGVwMyB0byBzdGVwNC0tPjxnIGNsYXNzPSJsaW5rIiBkYXRhLWVudGl0eS0xPSJlbnQwMDA1IiBkYXRhLWVudGl0eS0yPSJlbnQwMDA2IiBkYXRhLWxpbmstdHlwZT0iZGVwZW5kZW5jeSIgZGF0YS1zb3VyY2UtbGluZT0iMTMiIGlkPSJsbmsxMSI+PHBhdGggZD0iTTI0OS41MSwxNjguODUgQzIzMC43NSwxODcuNDggMTk1Ljg4NzIsMjIyLjA5MiAxNzYuOTY3MiwyNDAuODgyIiBmaWxsPSJub25lIiBpZD0ic3RlcDMtdG8tc3RlcDQiIHN0eWxlPSJzdHJva2U6IzAwMDAwMDtzdHJva2Utd2lkdGg6MTsiLz48cG9seWdvbiBmaWxsPSIjMDAwMDAwIiBwb2ludHM9IjE3Mi43MSwyNDUuMTEsMTgxLjkxNDUsMjQxLjYwNjIsMTc2LjI1NzcsMjQxLjU4NjcsMTc2LjI3NzIsMjM1LjkyOTksMTcyLjcxLDI0NS4xMSIgc3R5bGU9InN0cm9rZTojMDAwMDAwO3N0cm9rZS13aWR0aDoxOyIvPjx0ZXh0IGZpbGw9IiMwMDAwMDAiIGZvbnQtZmFtaWx5PSJWZXJkYW5hIiBmb250LXNpemU9IjEzIiBsZW5ndGhBZGp1c3Q9InNwYWNpbmciIHRleHRMZW5ndGg9IjQ2LjY5MzQiIHg9IjIxNy44NyIgeT0iMjExLjY1NjkiPm1vdmllczwvdGV4dD48L2c+PCEtLWxpbmsgc3RlcDQgdG8gc3RlcDUtLT48ZyBjbGFzcz0ibGluayIgZGF0YS1lbnRpdHktMT0iZW50MDAwNiIgZGF0YS1lbnRpdHktMj0iZW50MDAwNyIgZGF0YS1saW5rLXR5cGU9ImRlcGVuZGVuY3kiIGRhdGEtc291cmNlLWxpbmU9IjE0IiBpZD0ibG5rMTIiPjxwYXRoIGQ9Ik0xNjIsMjY4LjE1IEMxNjIsMjg2Ljc4IDE2MiwzMTkuNjIgMTYyLDMzOC40IiBmaWxsPSJub25lIiBpZD0ic3RlcDQtdG8tc3RlcDUiIHN0eWxlPSJzdHJva2U6IzAwMDAwMDtzdHJva2Utd2lkdGg6MTsiLz48cG9seWdvbiBmaWxsPSIjMDAwMDAwIiBwb2ludHM9IjE2MiwzNDQuNCwxNjYsMzM1LjQsMTYyLDMzOS40LDE1OCwzMzUuNCwxNjIsMzQ0LjQiIHN0eWxlPSJzdHJva2U6IzAwMDAwMDtzdHJva2Utd2lkdGg6MTsiLz48dGV4dCBmaWxsPSIjMDAwMDAwIiBmb250LWZhbWlseT0iVmVyZGFuYSIgZm9udC1zaXplPSIxMyIgbGVuZ3RoQWRqdXN0PSJzcGFjaW5nIiB0ZXh0TGVuZ3RoPSI0My4xMjYiIHg9IjE2MyIgeT0iMzEwLjk1NjkiPmd1aWRlczwvdGV4dD48L2c+PD9wbGFudHVtbC1zcmMgTlAzRElpREc0OE50eW5IWnpXc3FJSk9rdDRmTlZPUGhTZ2MxXzlKYXNlc3VJMjhRVDVFQVllQThuNjhIbUdlZ0FXZS1wNjFZdHlBUjlXUjktbGlFUC1RaVlNdGtTWG12cEZPMDBjdUF2V3FUWmVlOHM5V3hjcGtzbk41dmJrTWRabWhrV2lhMjJ2TWtZWEhkYkFJS3Q1NnllRllMYVphYkpfZGlpZFpFNTZHWFhlQUZraE5VZ19MRklXdWVsZzd1TktQUlJnenNESE5weS1sWXZBRjVqUGhoQWJPdDVJX3g1N3FMenlTS3RKUU1OYms2UjRta2dZQUFmeWxlQkotd1FZbTNPN0tVVFplUkxKY2s4bkZvT3JGT2xqVTJjZUlFUng4SWdSTzVMVTJGd2NLcTQ3T2VHZ1ppX3lKcm5wUWxXRHUwR3U5WC1LQzhVbTJVQnBYay1LQnVCbEc3d2NoczhFSDhxSG4tUGVUb1R1ZVVpMy1HNHF3XzlzY1VKZTF4NWZRbk5tMDA/PjwvZz48L3N2Zz4=" class="uml" alt="uml diagram" title="" /></p>
<h3 id="118-attempt">11.8 attempt メソッドによるエラーハンドリング<a class="headerlink" href="#118-attempt" title="Permanent link">&para;</a></h3>
<p><code>IO</code> クラスに追加した <code>attempt</code> メソッドは、例外を <code>Either</code> に変換します:</p>
<div class="highlight"><pre><span></span><code><span class="c1">// IO クラスの attempt メソッド</span>
<span class="kd">public</span><span class="w"> </span><span class="n">IO</span><span class="o">&lt;</span><span class="n">Either</span><span class="o">&lt;</span><span class="n">Throwable</span><span class="p">,</span><span class="w"> </span><span class="n">A</span><span class="o">&gt;&gt;</span><span class="w"> </span><span class="nf">attempt</span><span class="p">()</span><span class="w"> </span><span class="p">{</span>
<span class="w">    </span><span class="k">return</span><span class="w"> </span><span class="k">new</span><span class="w"> </span><span class="n">IO</span><span class="o">&lt;&gt;</span><span class="p">(()</span><span class="w"> </span><span class="o">-&gt;</span><span class="w"> </span><span class="p">{</span>
<span class="w">        </span><span class="k">try</span><span class="w"> </span><span class="p">{</span>
<span class="w">            </span><span class="k">return</span><span class="w"> </span><span class="n">Either</span><span class="p">.</span><span class="na">right</span><span class="p">(</span><span class="n">thunk</span><span class="p">.</span><span class="na">get</span><span class="p">());</span>
<span class="w">        </span><span class="p">}</span><span class="w"> </span><span class="k">catch</span><span class="w"> </span><span class="p">(</span><span class="n">Throwable</span><span class="w"> </span><span class="n">e</span><span class="p">)</span><span class="w"> </span><span class="p">{</span>
<span class="w">            </span><span class="k">return</span><span class="w"> </span><span class="n">Either</span><span class="p">.</span><span class="na">left</span><span class="p">(</span><span class="n">e</span><span class="p">);</span>
<span class="w">        </span><span class="p">}</span>
<span class="w">    </span><span class="p">});</span>
<span class="p">}</span>
</code></pre></div>
<p>これにより、例外を値として扱うことができ、関数型の方法でエラーハンドリングができます。</p>
<hr />
<h2 id="12">第12章: テスト戦略<a class="headerlink" href="#12" title="Permanent link">&para;</a></h2>
<h3 id="121">12.1 関数型プログラミングのテスト<a class="headerlink" href="#121" title="Permanent link">&para;</a></h3>
<p>関数型プログラミングでは、純粋関数のおかげでテストが非常に簡単になります。</p>
<p><img src="data:image/svg+xml;base64,PD9wbGFudHVtbCAxLjIwMjYuMT8+PHN2ZyB4bWxucz0iaHR0cDovL3d3dy53My5vcmcvMjAwMC9zdmciIHhtbG5zOnhsaW5rPSJodHRwOi8vd3d3LnczLm9yZy8xOTk5L3hsaW5rIiBjb250ZW50U3R5bGVUeXBlPSJ0ZXh0L2NzcyIgZGF0YS1kaWFncmFtLXR5cGU9IkRFU0NSSVBUSU9OIiBoZWlnaHQ9IjQ5OHB4IiBwcmVzZXJ2ZUFzcGVjdFJhdGlvPSJub25lIiBzdHlsZT0id2lkdGg6NDIwcHg7aGVpZ2h0OjQ5OHB4O2JhY2tncm91bmQ6I0ZGRkZGRjsiIHZlcnNpb249IjEuMSIgdmlld0JveD0iMCAwIDQyMCA0OTgiIHdpZHRoPSI0MjBweCIgem9vbUFuZFBhbj0ibWFnbmlmeSI+PGRlZnMvPjxnPjwhLS1jbHVzdGVyID8/Pz8/Py0tPjxnIGNsYXNzPSJjbHVzdGVyIiBkYXRhLXF1YWxpZmllZC1uYW1lPSIuLi4uLi4iIGRhdGEtc291cmNlLWxpbmU9IjMiIGlkPSJlbnQwMDAyIj48cmVjdCBmaWxsPSIjRkZGRkZGIiBoZWlnaHQ9IjQ4MC44OSIgcng9IjIuNSIgcnk9IjIuNSIgc3R5bGU9InN0cm9rZTojMDAwMDAwO3N0cm9rZS13aWR0aDoxOyIgd2lkdGg9IjQwMiIgeD0iMTIiIHk9IjEyIi8+PHRleHQgZmlsbD0iIzAwMDAwMCIgZm9udC1mYW1pbHk9IlZlcmRhbmEiIGZvbnQtc2l6ZT0iMTQiIGZvbnQtd2VpZ2h0PSJib2xkIiBsZW5ndGhBZGp1c3Q9InNwYWNpbmciIHRleHRMZW5ndGg9IjgzLjk5OTYiIHg9IjE3MS4wMDAyIiB5PSIyNi45OTUxIj4mIzEyNDg2OyYjMTI0NzM7JiMxMjQ4ODsmIzEyMzk4OyYjMzEyNzg7JiMzOTAwNjs8L3RleHQ+PC9nPjwhLS1jbHVzdGVyIHVuaXQtLT48ZyBjbGFzcz0iY2x1c3RlciIgZGF0YS1xdWFsaWZpZWQtbmFtZT0iLi4uLi4uLnVuaXQiIGRhdGEtc291cmNlLWxpbmU9IjQiIGlkPSJlbnQwMDAzIj48cmVjdCBmaWxsPSIjRkZGRkZGIiBoZWlnaHQ9Ijg5LjMiIHJ4PSIyLjUiIHJ5PSIyLjUiIHN0eWxlPSJzdHJva2U6IzAwMDAwMDtzdHJva2Utd2lkdGg6MTsiIHdpZHRoPSIzMjQiIHg9IjU0IiB5PSI2MyIvPjx0ZXh0IGZpbGw9IiMwMDAwMDAiIGZvbnQtZmFtaWx5PSJWZXJkYW5hIiBmb250LXNpemU9IjE0IiBmb250LXdlaWdodD0iYm9sZCIgbGVuZ3RoQWRqdXN0PSJzcGFjaW5nIiB0ZXh0TGVuZ3RoPSI2OS45OTk3IiB4PSIxODEuMDAwMiIgeT0iNzcuOTk1MSI+JiMyMTMzNjsmIzIwMzA3OyYjMTI0ODY7JiMxMjQ3MzsmIzEyNDg4OzwvdGV4dD48L2c+PCEtLWNsdXN0ZXIgcHJvcGVydHktLT48ZyBjbGFzcz0iY2x1c3RlciIgZGF0YS1xdWFsaWZpZWQtbmFtZT0iLi4uLi4uLnByb3BlcnR5IiBkYXRhLXNvdXJjZS1saW5lPSI5IiBpZD0iZW50MDAwNiI+PHJlY3QgZmlsbD0iI0ZGRkZGRiIgaGVpZ2h0PSI4OS4yOSIgcng9IjIuNSIgcnk9IjIuNSIgc3R5bGU9InN0cm9rZTojMDAwMDAwO3N0cm9rZS13aWR0aDoxOyIgd2lkdGg9IjMyNCIgeD0iNTQiIHk9IjIxNy4zIi8+PHRleHQgZmlsbD0iIzAwMDAwMCIgZm9udC1mYW1pbHk9IlZlcmRhbmEiIGZvbnQtc2l6ZT0iMTQiIGZvbnQtd2VpZ2h0PSJib2xkIiBsZW5ndGhBZGp1c3Q9InNwYWNpbmciIHRleHRMZW5ndGg9IjE1My45OTkzIiB4PSIxMzkuMDAwMyIgeT0iMjMyLjI5NTEiPiYjMTI1MDM7JiMxMjUyNTsmIzEyNDk3OyYjMTI0ODY7JiMxMjQ1MTsmIzEyNTA1OyYjMTI1NDA7JiMxMjQ3MzsmIzEyNDg2OyYjMTI0NzM7JiMxMjQ4ODs8L3RleHQ+PC9nPjwhLS1jbHVzdGVyIGludGVncmF0aW9uLS0+PGcgY2xhc3M9ImNsdXN0ZXIiIGRhdGEtcXVhbGlmaWVkLW5hbWU9Ii4uLi4uLi5pbnRlZ3JhdGlvbiIgZGF0YS1zb3VyY2UtbGluZT0iMTQiIGlkPSJlbnQwMDA5Ij48cmVjdCBmaWxsPSIjRkZGRkZGIiBoZWlnaHQ9Ijg5LjMiIHJ4PSIyLjUiIHJ5PSIyLjUiIHN0eWxlPSJzdHJva2U6IzAwMDAwMDtzdHJva2Utd2lkdGg6MTsiIHdpZHRoPSIzMzgiIHg9IjQ0IiB5PSIzNzEuNTkiLz48dGV4dCBmaWxsPSIjMDAwMDAwIiBmb250LWZhbWlseT0iVmVyZGFuYSIgZm9udC1zaXplPSIxNCIgZm9udC13ZWlnaHQ9ImJvbGQiIGxlbmd0aEFkanVzdD0ic3BhY2luZyIgdGV4dExlbmd0aD0iNjkuOTk5NyIgeD0iMTc4LjAwMDIiIHk9IjM4Ni41ODUxIj4mIzMyMTEzOyYjMjE1MTI7JiMxMjQ4NjsmIzEyNDczOyYjMTI0ODg7PC90ZXh0PjwvZz48IS0tZW50aXR5ID8/Pz8/Pz8/LS0+PGcgY2xhc3M9ImVudGl0eSIgZGF0YS1xdWFsaWZpZWQtbmFtZT0iLi4uLi4uLnVuaXQuLi4uLi4uLi4iIGRhdGEtc291cmNlLWxpbmU9IjUiIGlkPSJlbnQwMDA0Ij48cmVjdCBmaWxsPSIjRkZGRkZGIiBoZWlnaHQ9IjIyLjI5NjkiIHJ4PSIyLjUiIHJ5PSIyLjUiIHN0eWxlPSJzdHJva2U6IzAwMDAwMDtzdHJva2Utd2lkdGg6MTsiIHdpZHRoPSIxMzEuOTk5NSIgeD0iNzgiIHk9IjEwNiIvPjx0ZXh0IGZpbGw9IiMwMDAwMDAiIGZvbnQtZmFtaWx5PSJWZXJkYW5hIiBmb250LXNpemU9IjE0IiBsZW5ndGhBZGp1c3Q9InNwYWNpbmciIHRleHRMZW5ndGg9IjExMS45OTk1IiB4PSI4OCIgeT0iMTIxLjk5NTEiPiYjMzIwMjA7JiMzMTg4MzsmIzM4MzA2OyYjMjU5Njg7JiMxMjM5ODsmIzEyNDg2OyYjMTI0NzM7JiMxMjQ4ODs8L3RleHQ+PC9nPjwhLS1lbnRpdHkgPz8/Pz8tLT48ZyBjbGFzcz0iZW50aXR5IiBkYXRhLXF1YWxpZmllZC1uYW1lPSIuLi4uLi4udW5pdC4uLi4uLiIgZGF0YS1zb3VyY2UtbGluZT0iNiIgaWQ9ImVudDAwMDUiPjxyZWN0IGZpbGw9IiNGRkZGRkYiIGhlaWdodD0iMjIuMjk2OSIgcng9IjIuNSIgcnk9IjIuNSIgc3R5bGU9InN0cm9rZTojMDAwMDAwO3N0cm9rZS13aWR0aDoxOyIgd2lkdGg9Ijg5Ljk5OTciIHg9IjI0NSIgeT0iMTA2Ii8+PHRleHQgZmlsbD0iIzAwMDAwMCIgZm9udC1mYW1pbHk9IlZlcmRhbmEiIGZvbnQtc2l6ZT0iMTQiIGxlbmd0aEFkanVzdD0ic3BhY2luZyIgdGV4dExlbmd0aD0iNjkuOTk5NyIgeD0iMjU1IiB5PSIxMjEuOTk1MSI+JiMzOTY0MDsmIzM2ODk1OyYjMTI1Mzk7JiMyOTQyMDsmIzMxNDM1OzwvdGV4dD48L2c+PCEtLWVudGl0eSA/Pz8/Pz8tLT48ZyBjbGFzcz0iZW50aXR5IiBkYXRhLXF1YWxpZmllZC1uYW1lPSIuLi4uLi4ucHJvcGVydHkuLi4uLi4uIiBkYXRhLXNvdXJjZS1saW5lPSIxMCIgaWQ9ImVudDAwMDciPjxyZWN0IGZpbGw9IiNGRkZGRkYiIGhlaWdodD0iMjIuMjk2OSIgcng9IjIuNSIgcnk9IjIuNSIgc3R5bGU9InN0cm9rZTojMDAwMDAwO3N0cm9rZS13aWR0aDoxOyIgd2lkdGg9IjEwMy45OTk2IiB4PSI3OCIgeT0iMjYwLjMiLz48dGV4dCBmaWxsPSIjMDAwMDAwIiBmb250LWZhbWlseT0iVmVyZGFuYSIgZm9udC1zaXplPSIxNCIgbGVuZ3RoQWRqdXN0PSJzcGFjaW5nIiB0ZXh0TGVuZ3RoPSI4My45OTk2IiB4PSI4OCIgeT0iMjc2LjI5NTEiPiYjMTI1MjE7JiMxMjUzMTsmIzEyNDgwOyYjMTI1MTI7JiMyMDgzNzsmIzIxMTQ3OzwvdGV4dD48L2c+PCEtLWVudGl0eSA/Pz8/Pz8/LS0+PGcgY2xhc3M9ImVudGl0eSIgZGF0YS1xdWFsaWZpZWQtbmFtZT0iLi4uLi4uLnByb3BlcnR5Li4uLi4uLi4iIGRhdGEtc291cmNlLWxpbmU9IjExIiBpZD0iZW50MDAwOCI+PHJlY3QgZmlsbD0iI0ZGRkZGRiIgaGVpZ2h0PSIyMi4yOTY5IiByeD0iMi41IiByeT0iMi41IiBzdHlsZT0ic3Ryb2tlOiMwMDAwMDA7c3Ryb2tlLXdpZHRoOjE7IiB3aWR0aD0iMTE3Ljk5OTYiIHg9IjIxNyIgeT0iMjYwLjMiLz48dGV4dCBmaWxsPSIjMDAwMDAwIiBmb250LWZhbWlseT0iVmVyZGFuYSIgZm9udC1zaXplPSIxNCIgbGVuZ3RoQWRqdXN0PSJzcGFjaW5nIiB0ZXh0TGVuZ3RoPSI5Ny45OTk2IiB4PSIyMjciIHk9IjI3Ni4yOTUxIj4mIzE5OTgxOyYjMjI3OTM7JiMyNjQ2NTsmIzIwMjE0OyYjMTIzOTg7JiMyNjkwODsmIzM1Mzg4OzwvdGV4dD48L2c+PCEtLWVudGl0eSA/Pz8/Pz8/Pz8tLT48ZyBjbGFzcz0iZW50aXR5IiBkYXRhLXF1YWxpZmllZC1uYW1lPSIuLi4uLi4uaW50ZWdyYXRpb24uLi4uLi4uLi4uIiBkYXRhLXNvdXJjZS1saW5lPSIxNSIgaWQ9ImVudDAwMTAiPjxyZWN0IGZpbGw9IiNGRkZGRkYiIGhlaWdodD0iMjIuMjk2OSIgcng9IjIuNSIgcnk9IjIuNSIgc3R5bGU9InN0cm9rZTojMDAwMDAwO3N0cm9rZS13aWR0aDoxOyIgd2lkdGg9IjE0NS45OTk1IiB4PSI2OCIgeT0iNDE0LjU5Ii8+PHRleHQgZmlsbD0iIzAwMDAwMCIgZm9udC1mYW1pbHk9IlZlcmRhbmEiIGZvbnQtc2l6ZT0iMTQiIGxlbmd0aEFkanVzdD0ic3BhY2luZyIgdGV4dExlbmd0aD0iMTI1Ljk5OTUiIHg9Ijc4IiB5PSI0MzAuNTg1MSI+JiMxMjQ2NzsmIzEyNTMxOyYjMTI1MDk7JiMxMjU0MDsmIzEyNDkzOyYjMTI1MzE7JiMxMjQ4ODsmIzM2ODk5OyYjMjU2NTg7PC90ZXh0PjwvZz48IS0tZW50aXR5ID8/Pz8/LS0+PGcgY2xhc3M9ImVudGl0eSIgZGF0YS1xdWFsaWZpZWQtbmFtZT0iLi4uLi4uLmludGVncmF0aW9uLi4uLi4uIiBkYXRhLXNvdXJjZS1saW5lPSIxNiIgaWQ9ImVudDAwMTEiPjxyZWN0IGZpbGw9IiNGRkZGRkYiIGhlaWdodD0iMjIuMjk2OSIgcng9IjIuNSIgcnk9IjIuNSIgc3R5bGU9InN0cm9rZTojMDAwMDAwO3N0cm9rZS13aWR0aDoxOyIgd2lkdGg9Ijg5Ljk5OTciIHg9IjI0OSIgeT0iNDE0LjU5Ii8+PHRleHQgZmlsbD0iIzAwMDAwMCIgZm9udC1mYW1pbHk9IlZlcmRhbmEiIGZvbnQtc2l6ZT0iMTQiIGxlbmd0aEFkanVzdD0ic3BhY2luZyIgdGV4dExlbmd0aD0iNjkuOTk5NyIgeD0iMjU5IiB5PSI0MzAuNTg1MSI+JiMxMjQ3MzsmIzEyNDc5OyYjMTI1MDI7JiMyMDM1MTsmIzI5OTkyOzwvdGV4dD48L2c+PCEtLWxpbmsgdW5pdCB0byBwcm9wZXJ0eS0tPjxnIGNsYXNzPSJsaW5rIiBkYXRhLWVudGl0eS0xPSJlbnQwMDAzIiBkYXRhLWVudGl0eS0yPSJlbnQwMDA2IiBkYXRhLWxpbmstdHlwZT0iZGVwZW5kZW5jeSIgZGF0YS1zb3VyY2UtbGluZT0iMjAiIGlkPSJsbmsxMiI+PHBhdGggZD0iTTM3MCwxNTIuNDEzNyBDMzcwLDE1Mi42NTkgMzcwLDE1Mi45MDUyIDM3MCwxNTMuMTUyMiBDMzcwLDE1My42NDYxIDM3MCwxNTQuMTQzNCAzNzAsMTU0LjY0MzkgQzM3MCwxNTguNjQ3NSAzNzAsMTYyLjg1MzkgMzcwLDE2Ny4xOTU2IEMzNzAsMTc1Ljg3ODggMzcwLDE4NS4xMDI4IDM3MCwxOTQuMzI2MyBDMzcwLDE5OC45MzggMzcwLDIwMy41NDk2IDM3MCwyMDguMDkzMyBDMzcwLDIxMC4zNjUyIDM3MCwyMTIuNjIwMiAzNzAsMjE0Ljg0OTcgQzM3MCwyMTUuNDA3MSAzNzAsMjE1Ljk2MjkgMzcwLDIxNi41MTcgQzM3MCwyMTYuNjU1NSAzNzAsMjEwLjc5MzkgMzcwLDIxMC45MzIyIiBmaWxsPSJub25lIiBpZD0idW5pdC10by1wcm9wZXJ0eSIgc3R5bGU9InN0cm9rZTojMDAwMDAwO3N0cm9rZS13aWR0aDoxOyIvPjxwb2x5Z29uIGZpbGw9IiMwMDAwMDAiIHBvaW50cz0iMzcwLDIxNi45MzIyLDM3NCwyMDcuOTMyMiwzNzAsMjExLjkzMjIsMzY2LDIwNy45MzIyLDM3MCwyMTYuOTMyMiIgc3R5bGU9InN0cm9rZTojMDAwMDAwO3N0cm9rZS13aWR0aDoxOyIvPjx0ZXh0IGZpbGw9IiMwMDAwMDAiIGZvbnQtZmFtaWx5PSJWZXJkYW5hIiBmb250LXNpemU9IjEzIiBsZW5ndGhBZGp1c3Q9InNwYWNpbmciIHRleHRMZW5ndGg9IjI2IiB4PSIzNzEiIHk9IjE4OS4zNjY5Ij4mIzM1MDM2OyYjMjM0MzY7PC90ZXh0PjwvZz48IS0tbGluayBwcm9wZXJ0eSB0byBpbnRlZ3JhdGlvbi0tPjxnIGNsYXNzPSJsaW5rIiBkYXRhLWVudGl0eS0xPSJlbnQwMDA2IiBkYXRhLWVudGl0eS0yPSJlbnQwMDA5IiBkYXRhLWxpbmstdHlwZT0iZGVwZW5kZW5jeSIgZGF0YS1zb3VyY2UtbGluZT0iMjEiIGlkPSJsbmsxMyI+PHBhdGggZD0iTTM3MC44OTgxLDMwNi43MDcxIEMzNzAuOTA0NiwzMDYuOTUyNCAzNzAuOTExLDMwNy4xOTg2IDM3MC45MTc1LDMwNy40NDU1IEMzNzAuOTMwNSwzMDcuOTM5NSAzNzAuOTQzNiwzMDguNDM2NyAzNzAuOTU2NywzMDguOTM3MSBDMzcxLjA2MiwzMTIuOTQwNCAzNzEuMTcyNiwzMTcuMTQ2NiAzNzEuMjg2NywzMjEuNDg4IEMzNzEuNTE1LDMzMC4xNzA4IDM3MS43NTc1LDMzOS4zOTQ0IDM3MiwzNDguNjE3NSBDMzcyLjEyMTMsMzUzLjIyOTEgMzcyLjI0MjUsMzU3Ljg0MDUgMzcyLjM2MiwzNjIuMzg0MiBDMzcyLjQyMTcsMzY0LjY1NiAzNzIuNDgxLDM2Ni45MTA5IDM3Mi41Mzk2LDM2OS4xNDA0IEMzNzIuNTU0MywzNjkuNjk3OCAzNzIuNTY4OSwzNzAuMjUzNSAzNzIuNTgzNSwzNzAuODA3NiBDMzcyLjU4NzEsMzcwLjk0NjEgMzcyLjQzMywzNjUuMDg2NiAzNzIuNDM2NywzNjUuMjI0OSIgZmlsbD0ibm9uZSIgaWQ9InByb3BlcnR5LXRvLWludGVncmF0aW9uIiBzdHlsZT0ic3Ryb2tlOiMwMDAwMDA7c3Ryb2tlLXdpZHRoOjE7Ii8+PHBvbHlnb24gZmlsbD0iIzAwMDAwMCIgcG9pbnRzPSIzNzIuNTk0NCwzNzEuMjIyOCwzNzYuMzU2NCwzNjIuMTIwOCwzNzIuNDYzLDM2Ni4yMjQ2LDM2OC4zNTkyLDM2Mi4zMzExLDM3Mi41OTQ0LDM3MS4yMjI4IiBzdHlsZT0ic3Ryb2tlOiMwMDAwMDA7c3Ryb2tlLXdpZHRoOjE7Ii8+PHRleHQgZmlsbD0iIzAwMDAwMCIgZm9udC1mYW1pbHk9IlZlcmRhbmEiIGZvbnQtc2l6ZT0iMTMiIGxlbmd0aEFkanVzdD0ic3BhY2luZyIgdGV4dExlbmd0aD0iMjYiIHg9IjM3Mi44OCIgeT0iMzQzLjY1NjkiPiYjMzUwMzY7JiMyMzQzNjs8L3RleHQ+PC9nPjw/cGxhbnR1bWwtc3JjIE5QMzFJaUQwNDhSbFVPZnJ4dHExM3h2Qmc0aURyM0o0VTEwSE9XT2I2V0NMUXd0T2daS0w4ak1XTGlOUWJaeENQQkZETXZXNGN5SlVYZmJsdmxrUERNRUJSSkVZck1MNWJJSVRMR3JQaFRLUGVHWjdROHFIUjNtQ1gxXzRfTGpBemlpMFRwbFh4MkI3QTk1dG9Bd2c2MGJMYlZMREdpTDdJeG14U1ZpWGtkbkRaWEphdHBtVVRjQnAzYzRZZDZTblRBWHFpMUJXMms0NXVKblJ6MTJrNFFSUFhSOUhxbmlRcXVzenQ4aG1YMzEyQzE3ay1UNFpGeHJQLWk5bGJtekVlYnVfZDdtYlVROTFULTVGTHd0WXl1cXR4VnlFSEpMT0pQU0RmUTRNNmNrS1FOZmZBNzJwc2V2REJzaC1xMW1QZXBMN1E4VXBrTVp2Z0liblBJLWdMM1FBdkVqYXVOTHZTMlJiZE5IU2JZdzlObTAwPz48L2c+PC9zdmc+" class="uml" alt="uml diagram" title="" /></p>
<h3 id="122-searchreport">12.2 SearchReport の導入<a class="headerlink" href="#122-searchreport" title="Permanent link">&para;</a></h3>
<p><strong>ソースファイル</strong>: <code>app/java/src/main/java/ch11/TravelGuide.java</code></p>
<p>テスト可能性を高めるため、<code>SearchReport</code> を導入します。</p>
<div class="highlight"><pre><span></span><code><span class="cm">/**</span>
<span class="cm"> * 検索レポート（エラーや不十分な結果を報告）</span>
<span class="cm"> */</span>
<span class="kd">public</span><span class="w"> </span><span class="kd">record</span> <span class="nc">SearchReport</span><span class="p">(</span>
<span class="w">        </span><span class="n">List</span><span class="o">&lt;</span><span class="n">Guide</span><span class="o">&gt;</span><span class="w"> </span><span class="n">badGuides</span><span class="p">,</span>
<span class="w">        </span><span class="n">List</span><span class="o">&lt;</span><span class="n">String</span><span class="o">&gt;</span><span class="w"> </span><span class="n">problems</span>
<span class="p">)</span><span class="w"> </span><span class="p">{</span>
<span class="w">    </span><span class="kd">public</span><span class="w"> </span><span class="n">SearchReport</span><span class="w"> </span><span class="p">{</span>
<span class="w">        </span><span class="n">Objects</span><span class="p">.</span><span class="na">requireNonNull</span><span class="p">(</span><span class="n">badGuides</span><span class="p">,</span><span class="w"> </span><span class="s">&quot;SearchReport badGuides cannot be null&quot;</span><span class="p">);</span>
<span class="w">        </span><span class="n">Objects</span><span class="p">.</span><span class="na">requireNonNull</span><span class="p">(</span><span class="n">problems</span><span class="p">,</span><span class="w"> </span><span class="s">&quot;SearchReport problems cannot be null&quot;</span><span class="p">);</span>
<span class="w">    </span><span class="p">}</span>

<span class="w">    </span><span class="kd">public</span><span class="w"> </span><span class="kd">static</span><span class="w"> </span><span class="n">SearchReport</span><span class="w"> </span><span class="nf">empty</span><span class="p">()</span><span class="w"> </span><span class="p">{</span>
<span class="w">        </span><span class="k">return</span><span class="w"> </span><span class="k">new</span><span class="w"> </span><span class="n">SearchReport</span><span class="p">(</span><span class="n">List</span><span class="p">.</span><span class="na">empty</span><span class="p">(),</span><span class="w"> </span><span class="n">List</span><span class="p">.</span><span class="na">empty</span><span class="p">());</span>
<span class="w">    </span><span class="p">}</span>

<span class="w">    </span><span class="kd">public</span><span class="w"> </span><span class="kd">static</span><span class="w"> </span><span class="n">SearchReport</span><span class="w"> </span><span class="nf">withProblems</span><span class="p">(</span><span class="n">List</span><span class="o">&lt;</span><span class="n">String</span><span class="o">&gt;</span><span class="w"> </span><span class="n">problems</span><span class="p">)</span><span class="w"> </span><span class="p">{</span>
<span class="w">        </span><span class="k">return</span><span class="w"> </span><span class="k">new</span><span class="w"> </span><span class="n">SearchReport</span><span class="p">(</span><span class="n">List</span><span class="p">.</span><span class="na">empty</span><span class="p">(),</span><span class="w"> </span><span class="n">problems</span><span class="p">);</span>
<span class="w">    </span><span class="p">}</span>

<span class="w">    </span><span class="kd">public</span><span class="w"> </span><span class="kd">static</span><span class="w"> </span><span class="n">SearchReport</span><span class="w"> </span><span class="nf">withBadGuides</span><span class="p">(</span><span class="n">List</span><span class="o">&lt;</span><span class="n">Guide</span><span class="o">&gt;</span><span class="w"> </span><span class="n">badGuides</span><span class="p">)</span><span class="w"> </span><span class="p">{</span>
<span class="w">        </span><span class="k">return</span><span class="w"> </span><span class="k">new</span><span class="w"> </span><span class="n">SearchReport</span><span class="p">(</span><span class="n">badGuides</span><span class="p">,</span><span class="w"> </span><span class="n">List</span><span class="p">.</span><span class="na">empty</span><span class="p">());</span>
<span class="w">    </span><span class="p">}</span>
<span class="p">}</span>
</code></pre></div>
<p><img src="data:image/svg+xml;base64,PD9wbGFudHVtbCAxLjIwMjYuMT8+PHN2ZyB4bWxucz0iaHR0cDovL3d3dy53My5vcmcvMjAwMC9zdmciIHhtbG5zOnhsaW5rPSJodHRwOi8vd3d3LnczLm9yZy8xOTk5L3hsaW5rIiBjb250ZW50U3R5bGVUeXBlPSJ0ZXh0L2NzcyIgZGF0YS1kaWFncmFtLXR5cGU9IkNMQVNTIiBoZWlnaHQ9IjI0OXB4IiBwcmVzZXJ2ZUFzcGVjdFJhdGlvPSJub25lIiBzdHlsZT0id2lkdGg6Mzk5cHg7aGVpZ2h0OjI0OXB4O2JhY2tncm91bmQ6I0ZGRkZGRjsiIHZlcnNpb249IjEuMSIgdmlld0JveD0iMCAwIDM5OSAyNDkiIHdpZHRoPSIzOTlweCIgem9vbUFuZFBhbj0ibWFnbmlmeSI+PGRlZnMvPjxnPjwhLS1jbGFzcyBHdWlkZS0tPjxnIGNsYXNzPSJlbnRpdHkiIGRhdGEtcXVhbGlmaWVkLW5hbWU9Ikd1aWRlIiBkYXRhLXNvdXJjZS1saW5lPSIzIiBpZD0iZW50MDAwMiI+PHJlY3QgZmlsbD0iI0ZGRkZGRiIgaGVpZ2h0PSI3Ni41OTM4IiByeD0iMi41IiByeT0iMi41IiBzdHlsZT0ic3Ryb2tlOiMwMDAwMDA7c3Ryb2tlLXdpZHRoOjE7IiB3aWR0aD0iMjU2LjYzNzciIHg9IjEyIiB5PSIxMiIvPjxlbGxpcHNlIGN4PSIxMTYuMDEzMiIgY3k9IjI2IiBmaWxsPSIjRkZGRkZGIiByeD0iOSIgcnk9IjkiIHN0eWxlPSJzdHJva2U6IzAwMDAwMDtzdHJva2Utd2lkdGg6MTsiLz48cGF0aCBkPSJNMTE4Ljk4MTksMzEuNjQwNiBRMTE4LjQwMzgsMzEuOTM3NSAxMTcuNzYzMiwzMi4wNzgxIFExMTcuMTIyNiwzMi4yMzQ0IDExNi40MTk0LDMyLjIzNDQgUTExMy45MTk0LDMyLjIzNDQgMTEyLjU5MTMsMzAuNTkzOCBRMTExLjI3ODgsMjguOTM3NSAxMTEuMjc4OCwyNS44MTI1IFExMTEuMjc4OCwyMi42ODc1IDExMi41OTEzLDIxLjAzMTMgUTExMy45MTk0LDE5LjM3NSAxMTYuNDE5NCwxOS4zNzUgUTExNy4xMjI2LDE5LjM3NSAxMTcuNzYzMiwxOS41MzEzIFExMTguNDE5NCwxOS42ODc1IDExOC45ODE5LDE5Ljk4NDQgTDExOC45ODE5LDIyLjcwMzEgUTExOC4zNTY5LDIyLjEyNSAxMTcuNzYzMiwyMS44NTk0IFExMTcuMTY5NCwyMS41NzgxIDExNi41NDQ0LDIxLjU3ODEgUTExNS4yMDA3LDIxLjU3ODEgMTE0LjUxMzIsMjIuNjU2MyBRMTEzLjgyNTcsMjMuNzE4OCAxMTMuODI1NywyNS44MTI1IFExMTMuODI1NywyNy45MDYzIDExNC41MTMyLDI4Ljk4NDQgUTExNS4yMDA3LDMwLjA0NjkgMTE2LjU0NDQsMzAuMDQ2OSBRMTE3LjE2OTQsMzAuMDQ2OSAxMTcuNzYzMiwyOS43ODEzIFExMTguMzU2OSwyOS41IDExOC45ODE5LDI4LjkyMTkgTDExOC45ODE5LDMxLjY0MDYgWiAiIGZpbGw9IiMwMDAwMDAiLz48dGV4dCBmaWxsPSIjMDAwMDAwIiBmb250LWZhbWlseT0iVmVyZGFuYSIgZm9udC1zaXplPSIxNCIgbGVuZ3RoQWRqdXN0PSJzcGFjaW5nIiB0ZXh0TGVuZ3RoPSI0MS4xMTEzIiB4PSIxMzMuNTEzMiIgeT0iMzAuODQ2NyI+R3VpZGU8L3RleHQ+PGxpbmUgc3R5bGU9InN0cm9rZTojMDAwMDAwO3N0cm9rZS13aWR0aDoxOyIgeDE9IjEzIiB4Mj0iMjY3LjYzNzciIHkxPSI0MCIgeTI9IjQwIi8+PHRleHQgZmlsbD0iIzAwMDAwMCIgZm9udC1mYW1pbHk9IlZlcmRhbmEiIGZvbnQtc2l6ZT0iMTQiIGxlbmd0aEFkanVzdD0ic3BhY2luZyIgdGV4dExlbmd0aD0iMTQ2Ljk3OTUiIHg9IjE4IiB5PSI1Ni45OTUxIj5hdHRyYWN0aW9uOiBBdHRyYWN0aW9uPC90ZXh0Pjx0ZXh0IGZpbGw9IiMwMDAwMDAiIGZvbnQtZmFtaWx5PSJWZXJkYW5hIiBmb250LXNpemU9IjE0IiBsZW5ndGhBZGp1c3Q9InNwYWNpbmciIHRleHRMZW5ndGg9IjI0NC42Mzc3IiB4PSIxOCIgeT0iNzMuMjkyIj5zdWJqZWN0czogTGlzdCZsdDtQb3BDdWx0dXJlU3ViamVjdCZndDs8L3RleHQ+PGxpbmUgc3R5bGU9InN0cm9rZTojMDAwMDAwO3N0cm9rZS13aWR0aDoxOyIgeDE9IjEzIiB4Mj0iMjY3LjYzNzciIHkxPSI4MC41OTM4IiB5Mj0iODAuNTkzOCIvPjwvZz48IS0tY2xhc3MgU2VhcmNoUmVwb3J0LS0+PGcgY2xhc3M9ImVudGl0eSIgZGF0YS1xdWFsaWZpZWQtbmFtZT0iU2VhcmNoUmVwb3J0IiBkYXRhLXNvdXJjZS1saW5lPSI4IiBpZD0iZW50MDAwMyI+PHJlY3QgZmlsbD0iI0ZGRkZGRiIgaGVpZ2h0PSI3Ni41OTM4IiByeD0iMi41IiByeT0iMi41IiBzdHlsZT0ic3Ryb2tlOiMwMDAwMDA7c3Ryb2tlLXdpZHRoOjE7IiB3aWR0aD0iMTg0Ljk2OTciIHg9IjQ3LjgzIiB5PSIxNjUuNiIvPjxlbGxpcHNlIGN4PSI4OC44NDMyIiBjeT0iMTc5LjYiIGZpbGw9IiNGRkZGRkYiIHJ4PSI5IiByeT0iOSIgc3R5bGU9InN0cm9rZTojMDAwMDAwO3N0cm9rZS13aWR0aDoxOyIvPjxwYXRoIGQ9Ik05MS44MTE5LDE4NS4yNDA2IFE5MS4yMzM4LDE4NS41Mzc1IDkwLjU5MzIsMTg1LjY3ODEgUTg5Ljk1MjYsMTg1LjgzNDQgODkuMjQ5NCwxODUuODM0NCBRODYuNzQ5NCwxODUuODM0NCA4NS40MjEzLDE4NC4xOTM4IFE4NC4xMDg4LDE4Mi41Mzc1IDg0LjEwODgsMTc5LjQxMjUgUTg0LjEwODgsMTc2LjI4NzUgODUuNDIxMywxNzQuNjMxMyBRODYuNzQ5NCwxNzIuOTc1IDg5LjI0OTQsMTcyLjk3NSBRODkuOTUyNiwxNzIuOTc1IDkwLjU5MzIsMTczLjEzMTMgUTkxLjI0OTQsMTczLjI4NzUgOTEuODExOSwxNzMuNTg0NCBMOTEuODExOSwxNzYuMzAzMSBROTEuMTg2OSwxNzUuNzI1IDkwLjU5MzIsMTc1LjQ1OTQgUTg5Ljk5OTQsMTc1LjE3ODEgODkuMzc0NCwxNzUuMTc4MSBRODguMDMwNywxNzUuMTc4MSA4Ny4zNDMyLDE3Ni4yNTYzIFE4Ni42NTU3LDE3Ny4zMTg4IDg2LjY1NTcsMTc5LjQxMjUgUTg2LjY1NTcsMTgxLjUwNjMgODcuMzQzMiwxODIuNTg0NCBRODguMDMwNywxODMuNjQ2OSA4OS4zNzQ0LDE4My42NDY5IFE4OS45OTk0LDE4My42NDY5IDkwLjU5MzIsMTgzLjM4MTMgUTkxLjE4NjksMTgzLjEgOTEuODExOSwxODIuNTIxOSBMOTEuODExOSwxODUuMjQwNiBaICIgZmlsbD0iIzAwMDAwMCIvPjx0ZXh0IGZpbGw9IiMwMDAwMDAiIGZvbnQtZmFtaWx5PSJWZXJkYW5hIiBmb250LXNpemU9IjE0IiBsZW5ndGhBZGp1c3Q9InNwYWNpbmciIHRleHRMZW5ndGg9Ijk1LjQ0MzQiIHg9IjEwNi4zNDMyIiB5PSIxODQuNDQ2NyI+U2VhcmNoUmVwb3J0PC90ZXh0PjxsaW5lIHN0eWxlPSJzdHJva2U6IzAwMDAwMDtzdHJva2Utd2lkdGg6MTsiIHgxPSI0OC44MyIgeDI9IjIzMS43OTk3IiB5MT0iMTkzLjYiIHkyPSIxOTMuNiIvPjx0ZXh0IGZpbGw9IiMwMDAwMDAiIGZvbnQtZmFtaWx5PSJWZXJkYW5hIiBmb250LXNpemU9IjE0IiBsZW5ndGhBZGp1c3Q9InNwYWNpbmciIHRleHRMZW5ndGg9IjE3Mi45Njk3IiB4PSI1My44MyIgeT0iMjEwLjU5NTEiPmJhZEd1aWRlczogTGlzdCZsdDtHdWlkZSZndDs8L3RleHQ+PHRleHQgZmlsbD0iIzAwMDAwMCIgZm9udC1mYW1pbHk9IlZlcmRhbmEiIGZvbnQtc2l6ZT0iMTQiIGxlbmd0aEFkanVzdD0ic3BhY2luZyIgdGV4dExlbmd0aD0iMTY0LjQxMTEiIHg9IjUzLjgzIiB5PSIyMjYuODkyIj5wcm9ibGVtczogTGlzdCZsdDtTdHJpbmcmZ3Q7PC90ZXh0PjxsaW5lIHN0eWxlPSJzdHJva2U6IzAwMDAwMDtzdHJva2Utd2lkdGg6MTsiIHgxPSI0OC44MyIgeDI9IjIzMS43OTk3IiB5MT0iMjM0LjE5MzgiIHkyPSIyMzQuMTkzOCIvPjwvZz48ZyBjbGFzcz0iZW50aXR5IiBkYXRhLXF1YWxpZmllZC1uYW1lPSJHTU41IiBkYXRhLXNvdXJjZS1saW5lPSIxNiIgaWQ9ImVudDAwMDYiPjxwYXRoIGQ9Ik0yNjcuODIsMTgzLjc2IEwyNjcuODIsMTk5Ljg5IEwyMzMuMDksMjAzLjg5IEwyNjcuODIsMjA3Ljg5IEwyNjcuODIsMjI0LjAyNTYgQTAsMCAwIDAgMCAyNjcuODIsMjI0LjAyNTYgTDM5Mi44MjAxLDIyNC4wMjU2IEEwLDAgMCAwIDAgMzkyLjgyMDEsMjI0LjAyNTYgTDM5Mi44MjAxLDE5My43NiBMMzgyLjgyMDEsMTgzLjc2IEwyNjcuODIsMTgzLjc2IEEwLDAgMCAwIDAgMjY3LjgyLDE4My43NiIgZmlsbD0iI0ZGRkZGRiIgc3R5bGU9InN0cm9rZTojMDAwMDAwO3N0cm9rZS13aWR0aDoxOyIvPjxwYXRoIGQ9Ik0zODIuODIwMSwxODMuNzYgTDM4Mi44MjAxLDE5My43NiBMMzkyLjgyMDEsMTkzLjc2IEwzODIuODIwMSwxODMuNzYiIGZpbGw9IiNGRkZGRkYiIHN0eWxlPSJzdHJva2U6IzAwMDAwMDtzdHJva2Utd2lkdGg6MTsiLz48dGV4dCBmaWxsPSIjMDAwMDAwIiBmb250LWZhbWlseT0iVmVyZGFuYSIgZm9udC1zaXplPSIxMyIgbGVuZ3RoQWRqdXN0PSJzcGFjaW5nIiB0ZXh0TGVuZ3RoPSIxMDQuMDAwMSIgeD0iMjczLjgyIiB5PSIyMDAuODI2OSI+JiMyNjkwODsmIzMyMDM0OyYjMTIzOTg7JiMzMjA4MDsmIzI2NTI0OyYjMjQ3NzM7JiMyMjU3NzsmIzEyMzkyOzwvdGV4dD48dGV4dCBmaWxsPSIjMDAwMDAwIiBmb250LWZhbWlseT0iVmVyZGFuYSIgZm9udC1zaXplPSIxMyIgbGVuZ3RoQWRqdXN0PSJzcGFjaW5nIiB0ZXh0TGVuZ3RoPSIxMDQuMDAwMSIgeD0iMjczLjgyIiB5PSIyMTUuOTU5NyI+JiMxMjQ1NjsmIzEyNTIxOyYjMTI1NDA7JiMyNDc3MzsmIzIyNTc3OyYjMTI0MzQ7JiMyMDQ0NTsmIzI1MzQ1OzwvdGV4dD48L2c+PCEtLWxpbmsgR3VpZGUgdG8gU2VhcmNoUmVwb3J0LS0+PGcgY2xhc3M9ImxpbmsiIGRhdGEtZW50aXR5LTE9ImVudDAwMDIiIGRhdGEtZW50aXR5LTI9ImVudDAwMDMiIGRhdGEtbGluay10eXBlPSJkZXBlbmRlbmN5IiBkYXRhLXNvdXJjZS1saW5lPSIxMyIgaWQ9ImxuazQiPjxwYXRoIGNvZGVMaW5lPSIxMyIgZD0iTTE0MC4zMiw4OC43NyBDMTQwLjMyLDExMi4wOSAxNDAuMzIsMTM1Ljk5IDE0MC4zMiwxNTkuMzMiIGZpbGw9Im5vbmUiIGlkPSJHdWlkZS10by1TZWFyY2hSZXBvcnQiIHN0eWxlPSJzdHJva2U6IzAwMDAwMDtzdHJva2Utd2lkdGg6MTsiLz48cG9seWdvbiBmaWxsPSIjMDAwMDAwIiBwb2ludHM9IjE0MC4zMiwxNjUuMzMsMTQ0LjMyLDE1Ni4zMywxNDAuMzIsMTYwLjMzLDEzNi4zMiwxNTYuMzMsMTQwLjMyLDE2NS4zMyIgc3R5bGU9InN0cm9rZTojMDAwMDAwO3N0cm9rZS13aWR0aDoxOyIvPjx0ZXh0IGZpbGw9IiMwMDAwMDAiIGZvbnQtZmFtaWx5PSJWZXJkYW5hIiBmb250LXNpemU9IjEzIiBsZW5ndGhBZGp1c3Q9InNwYWNpbmciIHRleHRMZW5ndGg9IjY1LjAwMDEiIHg9IjE0MS4zMiIgeT0iMTMxLjY2NjkiPiYjMjE0NDI7JiMyOTAzMTsmIzEyMzczOyYjMTI0Mjg7JiMxMjQyNzs8L3RleHQ+PC9nPjw/cGxhbnR1bWwtc3JjIEtvcDlJQ3JETElaOElTcEN1LTlBcGFhaUJiUG1CeXJDSUxNZXZhZWlBSWJBSjJ4OXBDLXBLZDI0aXhjQUl2RW9LZkRCWWdxS1YzQUJJc20yeVdrU0l0REFJZWpJV280SVRib3JDOUUyS25FQmFaRTJLV2xvWXFnMDFZT2JmZTNEWGNhNVMtb3UyZWhvYXQ5SVNzNlltSUw1Y05kZk81Q1dCajdMaktDcm9LaFhRTl9KeXpSYlpua2RGY3hnVVRwS3BTTUxici1JZ2IyS2NQdkhlZjJWWGdBUXd6Y0lFUy10QjdoU2tFeHZyV2RGdmlydnJqcHdUQzc2bnVxaGsxdXRoTlpTbEY5bnlud2VLREVhOV9sZEZramZ2NGhESXI0MDZHVzA/PjwvZz48L3N2Zz4=" class="uml" alt="uml diagram" title="" /></p>
<h3 id="123-testdataaccess-">12.3 TestDataAccess - テスト用スタブ<a class="headerlink" href="#123-testdataaccess-" title="Permanent link">&para;</a></h3>
<p><strong>ソースファイル</strong>: <code>app/java/src/test/java/ch12/TestDataAccess.java</code></p>
<p>Builder パターンを使用したテスト用スタブ:</p>
<div class="highlight"><pre><span></span><code><span class="kd">public</span><span class="w"> </span><span class="kd">class</span> <span class="nc">TestDataAccess</span><span class="w"> </span><span class="kd">implements</span><span class="w"> </span><span class="n">DataAccess</span><span class="w"> </span><span class="p">{</span>

<span class="w">    </span><span class="c1">// ビルダーパターンで作成</span>
<span class="w">    </span><span class="kd">public</span><span class="w"> </span><span class="kd">static</span><span class="w"> </span><span class="n">Builder</span><span class="w"> </span><span class="nf">builder</span><span class="p">()</span><span class="w"> </span><span class="p">{</span>
<span class="w">        </span><span class="k">return</span><span class="w"> </span><span class="k">new</span><span class="w"> </span><span class="n">Builder</span><span class="p">();</span>
<span class="w">    </span><span class="p">}</span>

<span class="w">    </span><span class="c1">// 空の DataAccess を作成</span>
<span class="w">    </span><span class="kd">public</span><span class="w"> </span><span class="kd">static</span><span class="w"> </span><span class="n">DataAccess</span><span class="w"> </span><span class="nf">empty</span><span class="p">()</span><span class="w"> </span><span class="p">{</span>
<span class="w">        </span><span class="k">return</span><span class="w"> </span><span class="n">builder</span><span class="p">().</span><span class="na">build</span><span class="p">();</span>
<span class="w">    </span><span class="p">}</span>

<span class="w">    </span><span class="c1">// ファクトリメソッド</span>
<span class="w">    </span><span class="kd">public</span><span class="w"> </span><span class="kd">static</span><span class="w"> </span><span class="n">DataAccess</span><span class="w"> </span><span class="nf">withAttractions</span><span class="p">(</span><span class="n">Attraction</span><span class="p">...</span><span class="w"> </span><span class="n">attractions</span><span class="p">)</span><span class="w"> </span><span class="p">{</span>
<span class="w">        </span><span class="k">return</span><span class="w"> </span><span class="n">builder</span><span class="p">().</span><span class="na">withAttractions</span><span class="p">(</span><span class="n">attractions</span><span class="p">).</span><span class="na">build</span><span class="p">();</span>
<span class="w">    </span><span class="p">}</span>

<span class="w">    </span><span class="kd">public</span><span class="w"> </span><span class="kd">static</span><span class="w"> </span><span class="kd">class</span> <span class="nc">Builder</span><span class="w"> </span><span class="p">{</span>
<span class="w">        </span><span class="kd">private</span><span class="w"> </span><span class="n">List</span><span class="o">&lt;</span><span class="n">Attraction</span><span class="o">&gt;</span><span class="w"> </span><span class="n">attractions</span><span class="w"> </span><span class="o">=</span><span class="w"> </span><span class="n">List</span><span class="p">.</span><span class="na">empty</span><span class="p">();</span>
<span class="w">        </span><span class="kd">private</span><span class="w"> </span><span class="n">List</span><span class="o">&lt;</span><span class="n">Artist</span><span class="o">&gt;</span><span class="w"> </span><span class="n">artists</span><span class="w"> </span><span class="o">=</span><span class="w"> </span><span class="n">List</span><span class="p">.</span><span class="na">empty</span><span class="p">();</span>
<span class="w">        </span><span class="kd">private</span><span class="w"> </span><span class="n">List</span><span class="o">&lt;</span><span class="n">Movie</span><span class="o">&gt;</span><span class="w"> </span><span class="n">movies</span><span class="w"> </span><span class="o">=</span><span class="w"> </span><span class="n">List</span><span class="p">.</span><span class="na">empty</span><span class="p">();</span>
<span class="w">        </span><span class="kd">private</span><span class="w"> </span><span class="n">String</span><span class="w"> </span><span class="n">attractionsError</span><span class="w"> </span><span class="o">=</span><span class="w"> </span><span class="kc">null</span><span class="p">;</span>
<span class="w">        </span><span class="kd">private</span><span class="w"> </span><span class="n">String</span><span class="w"> </span><span class="n">artistsError</span><span class="w"> </span><span class="o">=</span><span class="w"> </span><span class="kc">null</span><span class="p">;</span>
<span class="w">        </span><span class="kd">private</span><span class="w"> </span><span class="n">String</span><span class="w"> </span><span class="n">moviesError</span><span class="w"> </span><span class="o">=</span><span class="w"> </span><span class="kc">null</span><span class="p">;</span>

<span class="w">        </span><span class="kd">public</span><span class="w"> </span><span class="n">Builder</span><span class="w"> </span><span class="nf">withAttractions</span><span class="p">(</span><span class="n">Attraction</span><span class="p">...</span><span class="w"> </span><span class="n">attractions</span><span class="p">)</span><span class="w"> </span><span class="p">{</span>
<span class="w">            </span><span class="k">this</span><span class="p">.</span><span class="na">attractions</span><span class="w"> </span><span class="o">=</span><span class="w"> </span><span class="n">List</span><span class="p">.</span><span class="na">of</span><span class="p">(</span><span class="n">attractions</span><span class="p">);</span>
<span class="w">            </span><span class="k">return</span><span class="w"> </span><span class="k">this</span><span class="p">;</span>
<span class="w">        </span><span class="p">}</span>

<span class="w">        </span><span class="kd">public</span><span class="w"> </span><span class="n">Builder</span><span class="w"> </span><span class="nf">withArtists</span><span class="p">(</span><span class="n">Artist</span><span class="p">...</span><span class="w"> </span><span class="n">artists</span><span class="p">)</span><span class="w"> </span><span class="p">{</span>
<span class="w">            </span><span class="k">this</span><span class="p">.</span><span class="na">artists</span><span class="w"> </span><span class="o">=</span><span class="w"> </span><span class="n">List</span><span class="p">.</span><span class="na">of</span><span class="p">(</span><span class="n">artists</span><span class="p">);</span>
<span class="w">            </span><span class="k">return</span><span class="w"> </span><span class="k">this</span><span class="p">;</span>
<span class="w">        </span><span class="p">}</span>

<span class="w">        </span><span class="kd">public</span><span class="w"> </span><span class="n">Builder</span><span class="w"> </span><span class="nf">withMovies</span><span class="p">(</span><span class="n">Movie</span><span class="p">...</span><span class="w"> </span><span class="n">movies</span><span class="p">)</span><span class="w"> </span><span class="p">{</span>
<span class="w">            </span><span class="k">this</span><span class="p">.</span><span class="na">movies</span><span class="w"> </span><span class="o">=</span><span class="w"> </span><span class="n">List</span><span class="p">.</span><span class="na">of</span><span class="p">(</span><span class="n">movies</span><span class="p">);</span>
<span class="w">            </span><span class="k">return</span><span class="w"> </span><span class="k">this</span><span class="p">;</span>
<span class="w">        </span><span class="p">}</span>

<span class="w">        </span><span class="kd">public</span><span class="w"> </span><span class="n">Builder</span><span class="w"> </span><span class="nf">failOnAttractions</span><span class="p">(</span><span class="n">String</span><span class="w"> </span><span class="n">errorMessage</span><span class="p">)</span><span class="w"> </span><span class="p">{</span>
<span class="w">            </span><span class="k">this</span><span class="p">.</span><span class="na">attractionsError</span><span class="w"> </span><span class="o">=</span><span class="w"> </span><span class="n">errorMessage</span><span class="p">;</span>
<span class="w">            </span><span class="k">return</span><span class="w"> </span><span class="k">this</span><span class="p">;</span>
<span class="w">        </span><span class="p">}</span>

<span class="w">        </span><span class="kd">public</span><span class="w"> </span><span class="n">Builder</span><span class="w"> </span><span class="nf">failOnArtists</span><span class="p">(</span><span class="n">String</span><span class="w"> </span><span class="n">errorMessage</span><span class="p">)</span><span class="w"> </span><span class="p">{</span>
<span class="w">            </span><span class="k">this</span><span class="p">.</span><span class="na">artistsError</span><span class="w"> </span><span class="o">=</span><span class="w"> </span><span class="n">errorMessage</span><span class="p">;</span>
<span class="w">            </span><span class="k">return</span><span class="w"> </span><span class="k">this</span><span class="p">;</span>
<span class="w">        </span><span class="p">}</span>

<span class="w">        </span><span class="kd">public</span><span class="w"> </span><span class="n">Builder</span><span class="w"> </span><span class="nf">failOnMovies</span><span class="p">(</span><span class="n">String</span><span class="w"> </span><span class="n">errorMessage</span><span class="p">)</span><span class="w"> </span><span class="p">{</span>
<span class="w">            </span><span class="k">this</span><span class="p">.</span><span class="na">moviesError</span><span class="w"> </span><span class="o">=</span><span class="w"> </span><span class="n">errorMessage</span><span class="p">;</span>
<span class="w">            </span><span class="k">return</span><span class="w"> </span><span class="k">this</span><span class="p">;</span>
<span class="w">        </span><span class="p">}</span>

<span class="w">        </span><span class="kd">public</span><span class="w"> </span><span class="n">TestDataAccess</span><span class="w"> </span><span class="nf">build</span><span class="p">()</span><span class="w"> </span><span class="p">{</span>
<span class="w">            </span><span class="k">return</span><span class="w"> </span><span class="k">new</span><span class="w"> </span><span class="n">TestDataAccess</span><span class="p">(</span><span class="k">this</span><span class="p">);</span>
<span class="w">        </span><span class="p">}</span>
<span class="w">    </span><span class="p">}</span>
<span class="p">}</span>
</code></pre></div>
<p><img src="data:image/svg+xml;base64,PD9wbGFudHVtbCAxLjIwMjYuMT8+PHN2ZyB4bWxucz0iaHR0cDovL3d3dy53My5vcmcvMjAwMC9zdmciIHhtbG5zOnhsaW5rPSJodHRwOi8vd3d3LnczLm9yZy8xOTk5L3hsaW5rIiBjb250ZW50U3R5bGVUeXBlPSJ0ZXh0L2NzcyIgZGF0YS1kaWFncmFtLXR5cGU9IkNMQVNTIiBoZWlnaHQ9IjMyMXB4IiBwcmVzZXJ2ZUFzcGVjdFJhdGlvPSJub25lIiBzdHlsZT0id2lkdGg6OTYzcHg7aGVpZ2h0OjMyMXB4O2JhY2tncm91bmQ6I0ZGRkZGRjsiIHZlcnNpb249IjEuMSIgdmlld0JveD0iMCAwIDk2MyAzMjEiIHdpZHRoPSI5NjNweCIgem9vbUFuZFBhbj0ibWFnbmlmeSI+PGRlZnMvPjxnPjwhLS1jbHVzdGVyID8/Pz8/LS0+PGcgY2xhc3M9ImNsdXN0ZXIiIGRhdGEtcXVhbGlmaWVkLW5hbWU9Ii4uLi4uIiBkYXRhLXNvdXJjZS1saW5lPSIzIiBpZD0iZW50MDAwMiI+PHJlY3QgZmlsbD0iI0ZGRkZGRiIgaGVpZ2h0PSIzMDMuNyIgcng9IjIuNSIgcnk9IjIuNSIgc3R5bGU9InN0cm9rZTojMDAwMDAwO3N0cm9rZS13aWR0aDoxOyIgd2lkdGg9IjUyNiIgeD0iMTIiIHk9IjEyIi8+PHRleHQgZmlsbD0iIzAwMDAwMCIgZm9udC1mYW1pbHk9IlZlcmRhbmEiIGZvbnQtc2l6ZT0iMTQiIGZvbnQtd2VpZ2h0PSJib2xkIiBsZW5ndGhBZGp1c3Q9InNwYWNpbmciIHRleHRMZW5ndGg9IjY5Ljk5OTciIHg9IjI0MC4wMDAyIiB5PSIyNi45OTUxIj4mIzEyNDg2OyYjMTI0NzM7JiMxMjQ4ODsmIzI3MDgzOyYjMjUxMDQ7PC90ZXh0PjwvZz48IS0tY2x1c3RlciBwcm9kLS0+PGcgY2xhc3M9ImNsdXN0ZXIiIGRhdGEtcXVhbGlmaWVkLW5hbWU9Ii4uLi4uLnByb2QiIGRhdGEtc291cmNlLWxpbmU9IjQiIGlkPSJlbnQwMDAzIj48cmVjdCBmaWxsPSIjRkZGRkZGIiBoZWlnaHQ9IjIyMC43IiByeD0iMi41IiByeT0iMi41IiBzdHlsZT0ic3Ryb2tlOiMwMDAwMDA7c3Ryb2tlLXdpZHRoOjE7IiB3aWR0aD0iMjI2IiB4PSI0NCIgeT0iNjMiLz48dGV4dCBmaWxsPSIjMDAwMDAwIiBmb250LWZhbWlseT0iVmVyZGFuYSIgZm9udC1zaXplPSIxNCIgZm9udC13ZWlnaHQ9ImJvbGQiIGxlbmd0aEFkanVzdD0ic3BhY2luZyIgdGV4dExlbmd0aD0iMjcuOTk5OSIgeD0iMTQzLjAwMDEiIHk9Ijc3Ljk5NTEiPiYjMjY0MTI7JiMzMDA1ODs8L3RleHQ+PC9nPjwhLS1jbHVzdGVyIHRlc3QtLT48ZyBjbGFzcz0iY2x1c3RlciIgZGF0YS1xdWFsaWZpZWQtbmFtZT0iLi4uLi4udGVzdCIgZGF0YS1zb3VyY2UtbGluZT0iMTAiIGlkPSJlbnQwMDA3Ij48cmVjdCBmaWxsPSIjRkZGRkZGIiBoZWlnaHQ9IjIyMC43IiByeD0iMi41IiByeT0iMi41IiBzdHlsZT0ic3Ryb2tlOiMwMDAwMDA7c3Ryb2tlLXdpZHRoOjE7IiB3aWR0aD0iMTk2IiB4PSIzMTAiIHk9IjYzIi8+PHRleHQgZmlsbD0iIzAwMDAwMCIgZm9udC1mYW1pbHk9IlZlcmRhbmEiIGZvbnQtc2l6ZT0iMTQiIGZvbnQtd2VpZ2h0PSJib2xkIiBsZW5ndGhBZGp1c3Q9InNwYWNpbmciIHRleHRMZW5ndGg9IjQxLjk5OTgiIHg9IjM4Ny4wMDAxIiB5PSI3Ny45OTUxIj4mIzEyNDg2OyYjMTI0NzM7JiMxMjQ4ODs8L3RleHQ+PC9nPjwhLS1jbGFzcyBkYTEtLT48ZyBjbGFzcz0iZW50aXR5IiBkYXRhLXF1YWxpZmllZC1uYW1lPSIuLi4uLi5wcm9kLmRhMSIgZGF0YS1zb3VyY2UtbGluZT0iNSIgaWQ9ImVudDAwMDQiPjxyZWN0IGZpbGw9IiNGRkZGRkYiIGhlaWdodD0iNDQiIHJ4PSIyLjUiIHJ5PSIyLjUiIHN0eWxlPSJzdHJva2U6IzAwMDAwMDtzdHJva2Utd2lkdGg6MTsiIHdpZHRoPSIxMDkuNjAwNiIgeD0iOTguMiIgeT0iMTA2Ii8+PGVsbGlwc2UgY3g9IjExMS4yIiBjeT0iMTIwIiBmaWxsPSIjRkZGRkZGIiByeD0iOSIgcnk9IjkiIHN0eWxlPSJzdHJva2U6IzAwMDAwMDtzdHJva2Utd2lkdGg6MTsiLz48cGF0aCBkPSJNMTA3LjEyMTksMTE1Ljc2NTYgTDEwNy4xMjE5LDExMy42MDk0IEwxMTQuNTEyNSwxMTMuNjA5NCBMMTE0LjUxMjUsMTE1Ljc2NTYgTDExMi4wNDM4LDExNS43NjU2IEwxMTIuMDQzOCwxMjMuODQzOCBMMTE0LjUxMjUsMTIzLjg0MzggTDExNC41MTI1LDEyNiBMMTA3LjEyMTksMTI2IEwxMDcuMTIxOSwxMjMuODQzOCBMMTA5LjU5MDYsMTIzLjg0MzggTDEwOS41OTA2LDExNS43NjU2IEwxMDcuMTIxOSwxMTUuNzY1NiBaICIgZmlsbD0iIzAwMDAwMCIvPjx0ZXh0IGZpbGw9IiMwMDAwMDAiIGZvbnQtZmFtaWx5PSJWZXJkYW5hIiBmb250LXNpemU9IjE0IiBmb250LXN0eWxlPSJpdGFsaWMiIGxlbmd0aEFkanVzdD0ic3BhY2luZyIgdGV4dExlbmd0aD0iODEuNjAwNiIgeD0iMTIzLjIiIHk9IjEyNC44NDY3Ij5EYXRhQWNjZXNzPC90ZXh0PjxsaW5lIHN0eWxlPSJzdHJva2U6IzAwMDAwMDtzdHJva2Utd2lkdGg6MTsiIHgxPSI5OS4yIiB4Mj0iMjA2LjgwMDYiIHkxPSIxMzQiIHkyPSIxMzQiLz48bGluZSBzdHlsZT0ic3Ryb2tlOiMwMDAwMDA7c3Ryb2tlLXdpZHRoOjE7IiB4MT0iOTkuMiIgeDI9IjIwNi44MDA2IiB5MT0iMTQyIiB5Mj0iMTQyIi8+PC9nPjwhLS1jbGFzcyB3ZGEtLT48ZyBjbGFzcz0iZW50aXR5IiBkYXRhLXF1YWxpZmllZC1uYW1lPSIuLi4uLi5wcm9kLndkYSIgZGF0YS1zb3VyY2UtbGluZT0iNiIgaWQ9ImVudDAwMDUiPjxyZWN0IGZpbGw9IiNGRkZGRkYiIGhlaWdodD0iNDQiIHJ4PSIyLjUiIHJ5PSIyLjUiIHN0eWxlPSJzdHJva2U6IzAwMDAwMDtzdHJva2Utd2lkdGg6MTsiIHdpZHRoPSIxNzAuODY0MyIgeD0iNjcuNTciIHk9IjIxNS43Ii8+PGVsbGlwc2UgY3g9IjgwLjU3IiBjeT0iMjI5LjciIGZpbGw9IiNGRkZGRkYiIHJ4PSI5IiByeT0iOSIgc3R5bGU9InN0cm9rZTojMDAwMDAwO3N0cm9rZS13aWR0aDoxOyIvPjxwYXRoIGQ9Ik04My41Mzg4LDIzNS4zNDA2IFE4Mi45NjA2LDIzNS42Mzc1IDgyLjMyLDIzNS43NzgxIFE4MS42Nzk0LDIzNS45MzQ0IDgwLjk3NjMsMjM1LjkzNDQgUTc4LjQ3NjMsMjM1LjkzNDQgNzcuMTQ4MSwyMzQuMjkzOCBRNzUuODM1NiwyMzIuNjM3NSA3NS44MzU2LDIyOS41MTI1IFE3NS44MzU2LDIyNi4zODc1IDc3LjE0ODEsMjI0LjczMTMgUTc4LjQ3NjMsMjIzLjA3NSA4MC45NzYzLDIyMy4wNzUgUTgxLjY3OTQsMjIzLjA3NSA4Mi4zMiwyMjMuMjMxMyBRODIuOTc2MywyMjMuMzg3NSA4My41Mzg4LDIyMy42ODQ0IEw4My41Mzg4LDIyNi40MDMxIFE4Mi45MTM4LDIyNS44MjUgODIuMzIsMjI1LjU1OTQgUTgxLjcyNjMsMjI1LjI3ODEgODEuMTAxMywyMjUuMjc4MSBRNzkuNzU3NSwyMjUuMjc4MSA3OS4wNywyMjYuMzU2MyBRNzguMzgyNSwyMjcuNDE4OCA3OC4zODI1LDIyOS41MTI1IFE3OC4zODI1LDIzMS42MDYzIDc5LjA3LDIzMi42ODQ0IFE3OS43NTc1LDIzMy43NDY5IDgxLjEwMTMsMjMzLjc0NjkgUTgxLjcyNjMsMjMzLjc0NjkgODIuMzIsMjMzLjQ4MTMgUTgyLjkxMzgsMjMzLjIgODMuNTM4OCwyMzIuNjIxOSBMODMuNTM4OCwyMzUuMzQwNiBaICIgZmlsbD0iIzAwMDAwMCIvPjx0ZXh0IGZpbGw9IiMwMDAwMDAiIGZvbnQtZmFtaWx5PSJWZXJkYW5hIiBmb250LXNpemU9IjE0IiBsZW5ndGhBZGp1c3Q9InNwYWNpbmciIHRleHRMZW5ndGg9IjE0Mi44NjQzIiB4PSI5Mi41NyIgeT0iMjM0LjU0NjciPldpa2lkYXRhRGF0YUFjY2VzczwvdGV4dD48bGluZSBzdHlsZT0ic3Ryb2tlOiMwMDAwMDA7c3Ryb2tlLXdpZHRoOjE7IiB4MT0iNjguNTciIHgyPSIyMzcuNDM0MyIgeTE9IjI0My43IiB5Mj0iMjQzLjciLz48bGluZSBzdHlsZT0ic3Ryb2tlOiMwMDAwMDA7c3Ryb2tlLXdpZHRoOjE7IiB4MT0iNjguNTciIHgyPSIyMzcuNDM0MyIgeTE9IjI1MS43IiB5Mj0iMjUxLjciLz48L2c+PCEtLWNsYXNzIGRhMi0tPjxnIGNsYXNzPSJlbnRpdHkiIGRhdGEtcXVhbGlmaWVkLW5hbWU9Ii4uLi4uLnRlc3QuZGEyIiBkYXRhLXNvdXJjZS1saW5lPSIxMSIgaWQ9ImVudDAwMDgiPjxyZWN0IGZpbGw9IiNGRkZGRkYiIGhlaWdodD0iNDQiIHJ4PSIyLjUiIHJ5PSIyLjUiIHN0eWxlPSJzdHJva2U6IzAwMDAwMDtzdHJva2Utd2lkdGg6MTsiIHdpZHRoPSIxMDkuNjAwNiIgeD0iMzQ5LjIiIHk9IjEwNiIvPjxlbGxpcHNlIGN4PSIzNjIuMiIgY3k9IjEyMCIgZmlsbD0iI0ZGRkZGRiIgcng9IjkiIHJ5PSI5IiBzdHlsZT0ic3Ryb2tlOiMwMDAwMDA7c3Ryb2tlLXdpZHRoOjE7Ii8+PHBhdGggZD0iTTM1OC4xMjE5LDExNS43NjU2IEwzNTguMTIxOSwxMTMuNjA5NCBMMzY1LjUxMjUsMTEzLjYwOTQgTDM2NS41MTI1LDExNS43NjU2IEwzNjMuMDQzOCwxMTUuNzY1NiBMMzYzLjA0MzgsMTIzLjg0MzggTDM2NS41MTI1LDEyMy44NDM4IEwzNjUuNTEyNSwxMjYgTDM1OC4xMjE5LDEyNiBMMzU4LjEyMTksMTIzLjg0MzggTDM2MC41OTA2LDEyMy44NDM4IEwzNjAuNTkwNiwxMTUuNzY1NiBMMzU4LjEyMTksMTE1Ljc2NTYgWiAiIGZpbGw9IiMwMDAwMDAiLz48dGV4dCBmaWxsPSIjMDAwMDAwIiBmb250LWZhbWlseT0iVmVyZGFuYSIgZm9udC1zaXplPSIxNCIgZm9udC1zdHlsZT0iaXRhbGljIiBsZW5ndGhBZGp1c3Q9InNwYWNpbmciIHRleHRMZW5ndGg9IjgxLjYwMDYiIHg9IjM3NC4yIiB5PSIxMjQuODQ2NyI+RGF0YUFjY2VzczwvdGV4dD48bGluZSBzdHlsZT0ic3Ryb2tlOiMwMDAwMDA7c3Ryb2tlLXdpZHRoOjE7IiB4MT0iMzUwLjIiIHgyPSI0NTcuODAwNiIgeTE9IjEzNCIgeTI9IjEzNCIvPjxsaW5lIHN0eWxlPSJzdHJva2U6IzAwMDAwMDtzdHJva2Utd2lkdGg6MTsiIHgxPSIzNTAuMiIgeDI9IjQ1Ny44MDA2IiB5MT0iMTQyIiB5Mj0iMTQyIi8+PC9nPjwhLS1jbGFzcyB0ZGEtLT48ZyBjbGFzcz0iZW50aXR5IiBkYXRhLXF1YWxpZmllZC1uYW1lPSIuLi4uLi50ZXN0LnRkYSIgZGF0YS1zb3VyY2UtbGluZT0iMTIiIGlkPSJlbnQwMDA5Ij48cmVjdCBmaWxsPSIjRkZGRkZGIiBoZWlnaHQ9IjQ0IiByeD0iMi41IiByeT0iMi41IiBzdHlsZT0ic3Ryb2tlOiMwMDAwMDA7c3Ryb2tlLXdpZHRoOjE7IiB3aWR0aD0iMTM5LjU0ODgiIHg9IjMzNC4yMyIgeT0iMjE1LjciLz48ZWxsaXBzZSBjeD0iMzQ3LjIzIiBjeT0iMjI5LjciIGZpbGw9IiNGRkZGRkYiIHJ4PSI5IiByeT0iOSIgc3R5bGU9InN0cm9rZTojMDAwMDAwO3N0cm9rZS13aWR0aDoxOyIvPjxwYXRoIGQ9Ik0zNTAuMTk4OCwyMzUuMzQwNiBRMzQ5LjYyMDYsMjM1LjYzNzUgMzQ4Ljk4LDIzNS43NzgxIFEzNDguMzM5NCwyMzUuOTM0NCAzNDcuNjM2MywyMzUuOTM0NCBRMzQ1LjEzNjMsMjM1LjkzNDQgMzQzLjgwODEsMjM0LjI5MzggUTM0Mi40OTU2LDIzMi42Mzc1IDM0Mi40OTU2LDIyOS41MTI1IFEzNDIuNDk1NiwyMjYuMzg3NSAzNDMuODA4MSwyMjQuNzMxMyBRMzQ1LjEzNjMsMjIzLjA3NSAzNDcuNjM2MywyMjMuMDc1IFEzNDguMzM5NCwyMjMuMDc1IDM0OC45OCwyMjMuMjMxMyBRMzQ5LjYzNjMsMjIzLjM4NzUgMzUwLjE5ODgsMjIzLjY4NDQgTDM1MC4xOTg4LDIyNi40MDMxIFEzNDkuNTczOCwyMjUuODI1IDM0OC45OCwyMjUuNTU5NCBRMzQ4LjM4NjMsMjI1LjI3ODEgMzQ3Ljc2MTMsMjI1LjI3ODEgUTM0Ni40MTc1LDIyNS4yNzgxIDM0NS43MywyMjYuMzU2MyBRMzQ1LjA0MjUsMjI3LjQxODggMzQ1LjA0MjUsMjI5LjUxMjUgUTM0NS4wNDI1LDIzMS42MDYzIDM0NS43MywyMzIuNjg0NCBRMzQ2LjQxNzUsMjMzLjc0NjkgMzQ3Ljc2MTMsMjMzLjc0NjkgUTM0OC4zODYzLDIzMy43NDY5IDM0OC45OCwyMzMuNDgxMyBRMzQ5LjU3MzgsMjMzLjIgMzUwLjE5ODgsMjMyLjYyMTkgTDM1MC4xOTg4LDIzNS4zNDA2IFogIiBmaWxsPSIjMDAwMDAwIi8+PHRleHQgZmlsbD0iIzAwMDAwMCIgZm9udC1mYW1pbHk9IlZlcmRhbmEiIGZvbnQtc2l6ZT0iMTQiIGxlbmd0aEFkanVzdD0ic3BhY2luZyIgdGV4dExlbmd0aD0iMTExLjU0ODgiIHg9IjM1OS4yMyIgeT0iMjM0LjU0NjciPlRlc3REYXRhQWNjZXNzPC90ZXh0PjxsaW5lIHN0eWxlPSJzdHJva2U6IzAwMDAwMDtzdHJva2Utd2lkdGg6MTsiIHgxPSIzMzUuMjMiIHgyPSI0NzIuNzc4OCIgeTE9IjI0My43IiB5Mj0iMjQzLjciLz48bGluZSBzdHlsZT0ic3Ryb2tlOiMwMDAwMDA7c3Ryb2tlLXdpZHRoOjE7IiB4MT0iMzM1LjIzIiB4Mj0iNDcyLjc3ODgiIHkxPSIyNTEuNyIgeTI9IjI1MS43Ii8+PC9nPjxnIGNsYXNzPSJlbnRpdHkiIGRhdGEtcXVhbGlmaWVkLW5hbWU9IkdNTjExIiBkYXRhLXNvdXJjZS1saW5lPSIxOCIgaWQ9ImVudDAwMTIiPjxwYXRoIGQ9Ik01NTMuOTIsMjI1LjEzIEw1NTMuOTIsMjUwLjI2MjggTDcxOC4wNzI0LDI1MC4yNjI4IEw3MTguMDcyNCwyMzUuMTMgTDcwOC4wNzI0LDIyNS4xMyBMNTUzLjkyLDIyNS4xMyIgZmlsbD0iI0ZGRkZGRiIgc3R5bGU9InN0cm9rZTojMDAwMDAwO3N0cm9rZS13aWR0aDoxOyIvPjxwYXRoIGQ9Ik03MDguMDcyNCwyMjUuMTMgTDcwOC4wNzI0LDIzNS4xMyBMNzE4LjA3MjQsMjM1LjEzIEw3MDguMDcyNCwyMjUuMTMiIGZpbGw9IiNGRkZGRkYiIHN0eWxlPSJzdHJva2U6IzAwMDAwMDtzdHJva2Utd2lkdGg6MTsiLz48dGV4dCBmaWxsPSIjMDAwMDAwIiBmb250LWZhbWlseT0iVmVyZGFuYSIgZm9udC1zaXplPSIxMyIgbGVuZ3RoQWRqdXN0PSJzcGFjaW5nIiB0ZXh0TGVuZ3RoPSIxNDMuMTUyNCIgeD0iNTU5LjkyIiB5PSIyNDIuMTk2OSI+JiMyMzQ1NTsmIzM4NTU1OyYjMTIzOTg7IFdpa2lkYXRhICYjMTIzOTU7JiMyNTUwOTsmIzMyMTU0OzwvdGV4dD48L2c+PGcgY2xhc3M9ImVudGl0eSIgZGF0YS1xdWFsaWZpZWQtbmFtZT0iR01OMTQiIGRhdGEtc291cmNlLWxpbmU9IjIyIiBpZD0iZW50MDAxNSI+PHBhdGggZD0iTTc1My41LDIxMCBMNzUzLjUsMjY1LjM5ODQgTDk1Ni41MDAyLDI2NS4zOTg0IEw5NTYuNTAwMiwyMjAgTDk0Ni41MDAyLDIxMCBMNzUzLjUsMjEwIiBmaWxsPSIjRkZGRkZGIiBzdHlsZT0ic3Ryb2tlOiMwMDAwMDA7c3Ryb2tlLXdpZHRoOjE7Ii8+PHBhdGggZD0iTTk0Ni41MDAyLDIxMCBMOTQ2LjUwMDIsMjIwIEw5NTYuNTAwMiwyMjAgTDk0Ni41MDAyLDIxMCIgZmlsbD0iI0ZGRkZGRiIgc3R5bGU9InN0cm9rZTojMDAwMDAwO3N0cm9rZS13aWR0aDoxOyIvPjx0ZXh0IGZpbGw9IiMwMDAwMDAiIGZvbnQtZmFtaWx5PSJWZXJkYW5hIiBmb250LXNpemU9IjEzIiBsZW5ndGhBZGp1c3Q9InNwYWNpbmciIHRleHRMZW5ndGg9IjExNy4wMDAxIiB4PSI3NTkuNSIgeT0iMjI3LjA2NjkiPiYjMTI0ODY7JiMxMjQ3MzsmIzEyNDg4OyYjMTI0ODc7JiMxMjU0MDsmIzEyNDc5OyYjMTI0MzQ7JiMzNjgyMDsmIzEyMzc3OzwvdGV4dD48dGV4dCBmaWxsPSIjMDAwMDAwIiBmb250LWZhbWlseT0iVmVyZGFuYSIgZm9udC1zaXplPSIxMyIgbGVuZ3RoQWRqdXN0PSJzcGFjaW5nIiB0ZXh0TGVuZ3RoPSIxNjkuMTY1MiIgeD0iNzU5LjUiIHk9IjI0Mi4xOTk3Ij5JTy5wdXJlICYjMTIzOTE7JiMyMTM2MzsmIzI0MjMxOyYjMTIzOTU7JiMzMjA4MDsmIzI2NTI0OyYjMTI0MzQ7JiMzNjgyMDsmIzEyMzc3OzwvdGV4dD48dGV4dCBmaWxsPSIjMDAwMDAwIiBmb250LWZhbWlseT0iVmVyZGFuYSIgZm9udC1zaXplPSIxMyIgbGVuZ3RoQWRqdXN0PSJzcGFjaW5nIiB0ZXh0TGVuZ3RoPSIxODIuMDAwMiIgeD0iNzU5LjUiIHk9IjI1Ny4zMzI1Ij4mIzEyNDU2OyYjMTI1MjE7JiMxMjU0MDsmIzEyNDcxOyYjMTI1MTE7JiMxMjUxNzsmIzEyNTI0OyYjMTI1NDA7JiMxMjQ3MTsmIzEyNTE5OyYjMTI1MzE7JiMxMjQxODsmIzIxNDg3OyYjMzMwMjE7PC90ZXh0PjwvZz48IS0tcmV2ZXJzZSBsaW5rIGRhMSB0byB3ZGEtLT48ZyBjbGFzcz0ibGluayIgZGF0YS1lbnRpdHktMT0iZW50MDAwNCIgZGF0YS1lbnRpdHktMj0iZW50MDAwNSIgZGF0YS1saW5rLXR5cGU9ImV4dGVuc2lvbiIgZGF0YS1zb3VyY2UtbGluZT0iNyIgaWQ9ImxuazYiPjxwYXRoIGNvZGVMaW5lPSI3IiBkPSJNMTUzLDE2OC4yOCBDMTUzLDE4Ny4xNiAxNTMsMTk2LjYgMTUzLDIxNS40NyIgZmlsbD0ibm9uZSIgaWQ9ImRhMS1iYWNrdG8td2RhIiBzdHlsZT0ic3Ryb2tlOiMwMDAwMDA7c3Ryb2tlLXdpZHRoOjE7c3Ryb2tlLWRhc2hhcnJheTo3LDc7Ii8+PHBvbHlnb24gZmlsbD0ibm9uZSIgcG9pbnRzPSIxNTMsMTUwLjI4LDE0NywxNjguMjgsMTU5LDE2OC4yOCwxNTMsMTUwLjI4IiBzdHlsZT0ic3Ryb2tlOiMwMDAwMDA7c3Ryb2tlLXdpZHRoOjE7Ii8+PC9nPjwhLS1yZXZlcnNlIGxpbmsgZGEyIHRvIHRkYS0tPjxnIGNsYXNzPSJsaW5rIiBkYXRhLWVudGl0eS0xPSJlbnQwMDA4IiBkYXRhLWVudGl0eS0yPSJlbnQwMDA5IiBkYXRhLWxpbmstdHlwZT0iZXh0ZW5zaW9uIiBkYXRhLXNvdXJjZS1saW5lPSIxMyIgaWQ9ImxuazEwIj48cGF0aCBjb2RlTGluZT0iMTMiIGQ9Ik00MDQsMTY4LjI4IEM0MDQsMTg3LjE2IDQwNCwxOTYuNiA0MDQsMjE1LjQ3IiBmaWxsPSJub25lIiBpZD0iZGEyLWJhY2t0by10ZGEiIHN0eWxlPSJzdHJva2U6IzAwMDAwMDtzdHJva2Utd2lkdGg6MTtzdHJva2UtZGFzaGFycmF5OjcsNzsiLz48cG9seWdvbiBmaWxsPSJub25lIiBwb2ludHM9IjQwNCwxNTAuMjgsMzk4LDE2OC4yOCw0MTAsMTY4LjI4LDQwNCwxNTAuMjgiIHN0eWxlPSJzdHJva2U6IzAwMDAwMDtzdHJva2Utd2lkdGg6MTsiLz48L2c+PCEtLWxpbmsgcHJvZCB0byBHTU4xMS0tPjxnIGNsYXNzPSJsaW5rIiBkYXRhLWVudGl0eS0xPSJlbnQwMDAzIiBkYXRhLWVudGl0eS0yPSJlbnQwMDEyIiBkYXRhLWxpbmstdHlwZT0iYXNzb2NpYXRpb24iIGRhdGEtc291cmNlLWxpbmU9IjE4IiBpZD0ibG5rMTMiPjxwYXRoIGQ9Ik0yNzAuMDEzOSwxMzIuMjc1IEMyNzAuMDczNSwxMzIuMjk5IDI3MC4xMzM1LDEzMi4zMjMxIDI3MC4xOTM3LDEzMi4zNDczIEMyNzAuNDM0NSwxMzIuNDQ0MiAyNzAuNjc5NywxMzIuNTQyNyAyNzAuOTI5MiwxMzIuNjQyOSBDMjcxLjkyNzEsMTMzLjA0MzUgMjcyLjk5MzUsMTMzLjQ2OTYgMjc0LjEyMDEsMTMzLjkxNzYgQzI3Ni4zNzM0LDEzNC44MTM0IDI3OC44NjgxLDEzNS43OTYzIDI4MS41NCwxMzYuODM1IEMyOTIuMjI3NSwxNDAuOTkgMzA1Ljc1LDE0Ni4wNCAzMTgsMTUwIEM0MTEuNzksMTgwLjMgNTIzLjM0LDIwOS4wOCA1ODYuMjgsMjI0LjY2IiBmaWxsPSJub25lIiBpZD0icHJvZC1HTU4xMSIgc3R5bGU9InN0cm9rZTojMDAwMDAwO3N0cm9rZS13aWR0aDoxO3N0cm9rZS1kYXNoYXJyYXk6Nyw3OyIvPjwvZz48IS0tbGluayB0ZXN0IHRvIEdNTjE0LS0+PGcgY2xhc3M9ImxpbmsiIGRhdGEtZW50aXR5LTE9ImVudDAwMDciIGRhdGEtZW50aXR5LTI9ImVudDAwMTUiIGRhdGEtbGluay10eXBlPSJhc3NvY2lhdGlvbiIgZGF0YS1zb3VyY2UtbGluZT0iMjIiIGlkPSJsbmsxNiI+PHBhdGggZD0iTTUwNi4zMTUsMTMxLjUwODMgQzUxMS4yMTY0LDEzMi45ODczIDUxOC4xMzQ0LDEzNS4wNzQ1IDUyNi42NTk0LDEzNy42NDY2IEM1NDMuNzA5NCwxNDIuNzkwNiA1NjcuMTg3NSwxNDkuODczNyA1OTMuODE3NSwxNTcuOTA3NSBDNjQ3LjA3NzUsMTczLjk3NSA3MTIuOTQ1LDE5My44NDUgNzY1LjIxLDIwOS42MSIgZmlsbD0ibm9uZSIgaWQ9InRlc3QtR01OMTQiIHN0eWxlPSJzdHJva2U6IzAwMDAwMDtzdHJva2Utd2lkdGg6MTtzdHJva2UtZGFzaGFycmF5OjcsNzsiLz48L2c+PD9wbGFudHVtbC1zcmMgWE9fRklpRDA0OFZsLW5IWjdZMVdwcnU0QnZ3eTI5eE5wTFEzUUhBb0FueEtHdFAxMnc4TXFPRXJzNUU5VnFlejUxTDV3U0NDSVVmUms1cjliSWZ1Nzd4VnBGVVJFUmQ5Nm5wWVdGZVg4R2JkYWVPUjBHUzd6RzZnNXpKRDhaaWdjWXE3VGQtY0hRVFZOam12RzBONElVSVBxMHliSi1nS2NOMjlJaGg4NjFWMjBYd1Q5b29XR2UycHZjX3ZkYWJkWTFzRjRhRjFtZnhoc2M3X3hvZU1iYnA4VnRvcm9oVGdzOWJLTWJWam9vTWpveloySTc5T1p3SUM2WDNMeEt5YTd0R19zYlVPM2cyZzNQWlU1b1V6eWdiRFVFWjFQRWROd2dHVWNKUDZWT1p3M1RLOHJUYnVUOHhmOUxiVVNVRmpYOWpSTU51eXA1eXBTeEh5UjFOTmRNeTZyR3RnTXhsdlpCZ0JrZVV3TnVxUHdZNGdiUHktWkZOeGpDV2Q/PjwvZz48L3N2Zz4=" class="uml" alt="uml diagram" title="" /></p>
<h4 id="testdataaccess">TestDataAccess の使用例<a class="headerlink" href="#testdataaccess" title="Permanent link">&para;</a></h4>
<div class="highlight"><pre><span></span><code><span class="c1">// テストデータの準備</span>
<span class="kd">static</span><span class="w"> </span><span class="kd">final</span><span class="w"> </span><span class="n">Location</span><span class="w"> </span><span class="n">LONDON</span><span class="w"> </span><span class="o">=</span><span class="w"> </span><span class="k">new</span><span class="w"> </span><span class="n">Location</span><span class="p">(</span>
<span class="w">        </span><span class="k">new</span><span class="w"> </span><span class="n">LocationId</span><span class="p">(</span><span class="s">&quot;Q84&quot;</span><span class="p">),</span>
<span class="w">        </span><span class="s">&quot;London&quot;</span><span class="p">,</span>
<span class="w">        </span><span class="mi">8_908_081</span>
<span class="p">);</span>

<span class="kd">static</span><span class="w"> </span><span class="kd">final</span><span class="w"> </span><span class="n">Attraction</span><span class="w"> </span><span class="n">TOWER_BRIDGE</span><span class="w"> </span><span class="o">=</span><span class="w"> </span><span class="k">new</span><span class="w"> </span><span class="n">Attraction</span><span class="p">(</span>
<span class="w">        </span><span class="s">&quot;Tower Bridge&quot;</span><span class="p">,</span>
<span class="w">        </span><span class="n">Option</span><span class="p">.</span><span class="na">none</span><span class="p">(),</span>
<span class="w">        </span><span class="n">LONDON</span>
<span class="p">);</span>

<span class="kd">static</span><span class="w"> </span><span class="kd">final</span><span class="w"> </span><span class="n">Artist</span><span class="w"> </span><span class="n">QUEEN</span><span class="w"> </span><span class="o">=</span><span class="w"> </span><span class="k">new</span><span class="w"> </span><span class="n">Artist</span><span class="p">(</span><span class="s">&quot;Queen&quot;</span><span class="p">,</span><span class="w"> </span><span class="mi">2_050_559</span><span class="p">);</span>
<span class="kd">static</span><span class="w"> </span><span class="kd">final</span><span class="w"> </span><span class="n">Movie</span><span class="w"> </span><span class="n">INSIDE_OUT</span><span class="w"> </span><span class="o">=</span><span class="w"> </span><span class="k">new</span><span class="w"> </span><span class="n">Movie</span><span class="p">(</span><span class="s">&quot;Inside Out&quot;</span><span class="p">,</span><span class="w"> </span><span class="mi">857_611_174</span><span class="p">);</span>

<span class="c1">// 正常系のテスト</span>
<span class="nd">@Test</span>
<span class="kt">void</span><span class="w"> </span><span class="nf">withAllData</span><span class="p">()</span><span class="w"> </span><span class="p">{</span>
<span class="w">    </span><span class="n">DataAccess</span><span class="w"> </span><span class="n">dataAccess</span><span class="w"> </span><span class="o">=</span><span class="w"> </span><span class="n">TestDataAccess</span><span class="p">.</span><span class="na">of</span><span class="p">(</span>
<span class="w">            </span><span class="n">List</span><span class="p">.</span><span class="na">of</span><span class="p">(</span><span class="n">TOWER_BRIDGE</span><span class="p">),</span>
<span class="w">            </span><span class="n">List</span><span class="p">.</span><span class="na">of</span><span class="p">(</span><span class="n">QUEEN</span><span class="p">),</span>
<span class="w">            </span><span class="n">List</span><span class="p">.</span><span class="na">of</span><span class="p">(</span><span class="n">INSIDE_OUT</span><span class="p">)</span>
<span class="w">    </span><span class="p">);</span>

<span class="w">    </span><span class="n">assertThat</span><span class="p">(</span><span class="n">dataAccess</span><span class="p">.</span><span class="na">findAttractions</span><span class="p">(</span><span class="s">&quot;test&quot;</span><span class="p">,</span><span class="w"> </span><span class="n">AttractionOrdering</span><span class="p">.</span><span class="na">BY_NAME</span><span class="p">,</span><span class="w"> </span><span class="mi">10</span><span class="p">).</span><span class="na">unsafeRun</span><span class="p">())</span>
<span class="w">            </span><span class="p">.</span><span class="na">containsExactly</span><span class="p">(</span><span class="n">TOWER_BRIDGE</span><span class="p">);</span>
<span class="w">    </span><span class="n">assertThat</span><span class="p">(</span><span class="n">dataAccess</span><span class="p">.</span><span class="na">findArtistsFromLocation</span><span class="p">(</span><span class="n">LONDON</span><span class="p">.</span><span class="na">id</span><span class="p">(),</span><span class="w"> </span><span class="mi">10</span><span class="p">).</span><span class="na">unsafeRun</span><span class="p">())</span>
<span class="w">            </span><span class="p">.</span><span class="na">containsExactly</span><span class="p">(</span><span class="n">QUEEN</span><span class="p">);</span>
<span class="w">    </span><span class="n">assertThat</span><span class="p">(</span><span class="n">dataAccess</span><span class="p">.</span><span class="na">findMoviesAboutLocation</span><span class="p">(</span><span class="n">LONDON</span><span class="p">.</span><span class="na">id</span><span class="p">(),</span><span class="w"> </span><span class="mi">10</span><span class="p">).</span><span class="na">unsafeRun</span><span class="p">())</span>
<span class="w">            </span><span class="p">.</span><span class="na">containsExactly</span><span class="p">(</span><span class="n">INSIDE_OUT</span><span class="p">);</span>
<span class="p">}</span>

<span class="c1">// エラーシミュレーション</span>
<span class="nd">@Test</span>
<span class="kt">void</span><span class="w"> </span><span class="nf">failOnAttractions</span><span class="p">()</span><span class="w"> </span><span class="p">{</span>
<span class="w">    </span><span class="n">DataAccess</span><span class="w"> </span><span class="n">dataAccess</span><span class="w"> </span><span class="o">=</span><span class="w"> </span><span class="n">TestDataAccess</span><span class="p">.</span><span class="na">builder</span><span class="p">()</span>
<span class="w">            </span><span class="p">.</span><span class="na">failOnAttractions</span><span class="p">(</span><span class="s">&quot;Network error&quot;</span><span class="p">)</span>
<span class="w">            </span><span class="p">.</span><span class="na">build</span><span class="p">();</span>

<span class="w">    </span><span class="n">assertThatThrownBy</span><span class="p">(()</span><span class="w"> </span><span class="o">-&gt;</span>
<span class="w">            </span><span class="n">dataAccess</span><span class="p">.</span><span class="na">findAttractions</span><span class="p">(</span><span class="s">&quot;test&quot;</span><span class="p">,</span><span class="w"> </span><span class="n">AttractionOrdering</span><span class="p">.</span><span class="na">BY_NAME</span><span class="p">,</span><span class="w"> </span><span class="mi">10</span><span class="p">).</span><span class="na">unsafeRun</span><span class="p">()</span>
<span class="w">    </span><span class="p">).</span><span class="na">isInstanceOf</span><span class="p">(</span><span class="n">RuntimeException</span><span class="p">.</span><span class="na">class</span><span class="p">)</span>
<span class="w">            </span><span class="p">.</span><span class="na">hasMessage</span><span class="p">(</span><span class="s">&quot;Network error&quot;</span><span class="p">);</span>
<span class="p">}</span>
</code></pre></div>
<h3 id="124">12.4 プロパティベーステスト<a class="headerlink" href="#124" title="Permanent link">&para;</a></h3>
<p><strong>ソースファイル</strong>: <code>app/java/src/test/java/ch12/PropertyBasedTest.java</code></p>
<p>JUnit 5 の <code>@RepeatedTest</code> を使用したプロパティベーステスト:</p>
<div class="highlight"><pre><span></span><code><span class="c1">// ジェネレータの定義</span>
<span class="kd">static</span><span class="w"> </span><span class="kt">int</span><span class="w"> </span><span class="nf">nonNegativeInt</span><span class="p">()</span><span class="w"> </span><span class="p">{</span>
<span class="w">    </span><span class="k">return</span><span class="w"> </span><span class="n">random</span><span class="p">.</span><span class="na">nextInt</span><span class="p">(</span><span class="n">Integer</span><span class="p">.</span><span class="na">MAX_VALUE</span><span class="p">);</span>
<span class="p">}</span>

<span class="kd">static</span><span class="w"> </span><span class="n">String</span><span class="w"> </span><span class="nf">randomString</span><span class="p">()</span><span class="w"> </span><span class="p">{</span>
<span class="w">    </span><span class="kt">int</span><span class="w"> </span><span class="n">length</span><span class="w"> </span><span class="o">=</span><span class="w"> </span><span class="n">random</span><span class="p">.</span><span class="na">nextInt</span><span class="p">(</span><span class="mi">20</span><span class="p">)</span><span class="w"> </span><span class="o">+</span><span class="w"> </span><span class="mi">1</span><span class="p">;</span>
<span class="w">    </span><span class="n">StringBuilder</span><span class="w"> </span><span class="n">sb</span><span class="w"> </span><span class="o">=</span><span class="w"> </span><span class="k">new</span><span class="w"> </span><span class="n">StringBuilder</span><span class="p">();</span>
<span class="w">    </span><span class="k">for</span><span class="w"> </span><span class="p">(</span><span class="kt">int</span><span class="w"> </span><span class="n">i</span><span class="w"> </span><span class="o">=</span><span class="w"> </span><span class="mi">0</span><span class="p">;</span><span class="w"> </span><span class="n">i</span><span class="w"> </span><span class="o">&lt;</span><span class="w"> </span><span class="n">length</span><span class="p">;</span><span class="w"> </span><span class="n">i</span><span class="o">++</span><span class="p">)</span><span class="w"> </span><span class="p">{</span>
<span class="w">        </span><span class="n">sb</span><span class="p">.</span><span class="na">append</span><span class="p">((</span><span class="kt">char</span><span class="p">)</span><span class="w"> </span><span class="p">(</span><span class="sc">&#39;a&#39;</span><span class="w"> </span><span class="o">+</span><span class="w"> </span><span class="n">random</span><span class="p">.</span><span class="na">nextInt</span><span class="p">(</span><span class="mi">26</span><span class="p">)));</span>
<span class="w">    </span><span class="p">}</span>
<span class="w">    </span><span class="k">return</span><span class="w"> </span><span class="n">sb</span><span class="p">.</span><span class="na">toString</span><span class="p">();</span>
<span class="p">}</span>

<span class="kd">static</span><span class="w"> </span><span class="n">Location</span><span class="w"> </span><span class="nf">randomLocation</span><span class="p">()</span><span class="w"> </span><span class="p">{</span>
<span class="w">    </span><span class="k">return</span><span class="w"> </span><span class="k">new</span><span class="w"> </span><span class="n">Location</span><span class="p">(</span>
<span class="w">            </span><span class="k">new</span><span class="w"> </span><span class="n">LocationId</span><span class="p">(</span><span class="s">&quot;Q&quot;</span><span class="w"> </span><span class="o">+</span><span class="w"> </span><span class="n">nonNegativeInt</span><span class="p">(</span><span class="mi">1000000</span><span class="p">)),</span>
<span class="w">            </span><span class="n">randomString</span><span class="p">(),</span>
<span class="w">            </span><span class="n">nonNegativeInt</span><span class="p">(</span><span class="mi">10_000_000</span><span class="p">)</span>
<span class="w">    </span><span class="p">);</span>
<span class="p">}</span>

<span class="kd">static</span><span class="w"> </span><span class="n">Attraction</span><span class="w"> </span><span class="nf">randomAttraction</span><span class="p">(</span><span class="kt">boolean</span><span class="w"> </span><span class="n">withDescription</span><span class="p">)</span><span class="w"> </span><span class="p">{</span>
<span class="w">    </span><span class="k">return</span><span class="w"> </span><span class="k">new</span><span class="w"> </span><span class="n">Attraction</span><span class="p">(</span>
<span class="w">            </span><span class="n">randomString</span><span class="p">(),</span>
<span class="w">            </span><span class="n">withDescription</span><span class="w"> </span><span class="o">?</span><span class="w"> </span><span class="n">Option</span><span class="p">.</span><span class="na">some</span><span class="p">(</span><span class="n">randomString</span><span class="p">())</span><span class="w"> </span><span class="p">:</span><span class="w"> </span><span class="n">Option</span><span class="p">.</span><span class="na">none</span><span class="p">(),</span>
<span class="w">            </span><span class="n">randomLocation</span><span class="p">()</span>
<span class="w">    </span><span class="p">);</span>
<span class="p">}</span>

<span class="kd">static</span><span class="w"> </span><span class="n">Guide</span><span class="w"> </span><span class="nf">randomGuide</span><span class="p">(</span><span class="kt">boolean</span><span class="w"> </span><span class="n">withDescription</span><span class="p">,</span><span class="w"> </span><span class="kt">int</span><span class="w"> </span><span class="n">maxSubjects</span><span class="p">)</span><span class="w"> </span><span class="p">{</span>
<span class="w">    </span><span class="k">return</span><span class="w"> </span><span class="k">new</span><span class="w"> </span><span class="n">Guide</span><span class="p">(</span>
<span class="w">            </span><span class="n">randomAttraction</span><span class="p">(</span><span class="n">withDescription</span><span class="p">),</span>
<span class="w">            </span><span class="n">randomSubjects</span><span class="p">(</span><span class="n">maxSubjects</span><span class="p">)</span>
<span class="w">    </span><span class="p">);</span>
<span class="p">}</span>
</code></pre></div>
<p><img src="data:image/svg+xml;base64,PD9wbGFudHVtbCAxLjIwMjYuMT8+PHN2ZyB4bWxucz0iaHR0cDovL3d3dy53My5vcmcvMjAwMC9zdmciIHhtbG5zOnhsaW5rPSJodHRwOi8vd3d3LnczLm9yZy8xOTk5L3hsaW5rIiBjb250ZW50U3R5bGVUeXBlPSJ0ZXh0L2NzcyIgZGF0YS1kaWFncmFtLXR5cGU9IkRFU0NSSVBUSU9OIiBoZWlnaHQ9IjQyOXB4IiBwcmVzZXJ2ZUFzcGVjdFJhdGlvPSJub25lIiBzdHlsZT0id2lkdGg6MjkycHg7aGVpZ2h0OjQyOXB4O2JhY2tncm91bmQ6I0ZGRkZGRjsiIHZlcnNpb249IjEuMSIgdmlld0JveD0iMCAwIDI5MiA0MjkiIHdpZHRoPSIyOTJweCIgem9vbUFuZFBhbj0ibWFnbmlmeSI+PGRlZnMvPjxnPjwhLS1jbHVzdGVyID8/Pz8/Pz8/Pz8/LS0+PGcgY2xhc3M9ImNsdXN0ZXIiIGRhdGEtcXVhbGlmaWVkLW5hbWU9Ii4uLi4uLi4uLi4uIiBkYXRhLXNvdXJjZS1saW5lPSIzIiBpZD0iZW50MDAwMiI+PHJlY3QgZmlsbD0iI0ZGRkZGRiIgaGVpZ2h0PSIzMjMuMTgiIHJ4PSIyLjUiIHJ5PSIyLjUiIHN0eWxlPSJzdHJva2U6IzAwMDAwMDtzdHJva2Utd2lkdGg6MTsiIHdpZHRoPSIyNzQiIHg9IjEyIiB5PSIxMiIvPjx0ZXh0IGZpbGw9IiMwMDAwMDAiIGZvbnQtZmFtaWx5PSJWZXJkYW5hIiBmb250LXNpemU9IjE0IiBmb250LXdlaWdodD0iYm9sZCIgbGVuZ3RoQWRqdXN0PSJzcGFjaW5nIiB0ZXh0TGVuZ3RoPSIxNTMuOTk5MyIgeD0iNzIuMDAwMyIgeT0iMjYuOTk1MSI+JiMxMjUwMzsmIzEyNTI1OyYjMTI0OTc7JiMxMjQ4NjsmIzEyNDUxOyYjMTI1MDU7JiMxMjU0MDsmIzEyNDczOyYjMTI0ODY7JiMxMjQ3MzsmIzEyNDg4OzwvdGV4dD48L2c+PCEtLWVudGl0eSBnZW4tLT48ZyBjbGFzcz0iZW50aXR5IiBkYXRhLXF1YWxpZmllZC1uYW1lPSIuLi4uLi4uLi4uLi5nZW4iIGRhdGEtc291cmNlLWxpbmU9IjQiIGlkPSJlbnQwMDAzIj48cmVjdCBmaWxsPSIjRkZGRkZGIiBoZWlnaHQ9IjIyLjI5NjkiIHJ4PSIyLjUiIHJ5PSIyLjUiIHN0eWxlPSJzdHJva2U6IzAwMDAwMDtzdHJva2Utd2lkdGg6MTsiIHdpZHRoPSIxMTEuMzgyOCIgeD0iOTMuMzEiIHk9IjQ3Ii8+PHRleHQgZmlsbD0iIzAwMDAwMCIgZm9udC1mYW1pbHk9IlZlcmRhbmEiIGZvbnQtc2l6ZT0iMTQiIGxlbmd0aEFkanVzdD0ic3BhY2luZyIgdGV4dExlbmd0aD0iOTEuMzgyOCIgeD0iMTAzLjMxIiB5PSI2Mi45OTUxIj5yYW5kb21YeHgoKTwvdGV4dD48L2c+PCEtLWVudGl0eSByYW5kb20tLT48ZyBjbGFzcz0iZW50aXR5IiBkYXRhLXF1YWxpZmllZC1uYW1lPSIuLi4uLi4uLi4uLi5yYW5kb20iIGRhdGEtc291cmNlLWxpbmU9IjUiIGlkPSJlbnQwMDA0Ij48cmVjdCBmaWxsPSIjRkZGRkZGIiBoZWlnaHQ9IjIyLjI5NjkiIHJ4PSIyLjUiIHJ5PSIyLjUiIHN0eWxlPSJzdHJva2U6IzAwMDAwMDtzdHJva2Utd2lkdGg6MTsiIHdpZHRoPSIxNDUuOTk5NSIgeD0iNzYiIHk9IjEzMC4yOSIvPjx0ZXh0IGZpbGw9IiMwMDAwMDAiIGZvbnQtZmFtaWx5PSJWZXJkYW5hIiBmb250LXNpemU9IjE0IiBsZW5ndGhBZGp1c3Q9InNwYWNpbmciIHRleHRMZW5ndGg9IjEyNS45OTk1IiB4PSI4NiIgeT0iMTQ2LjI4NTEiPiYjMTI1MjE7JiMxMjUzMTsmIzEyNDgwOyYjMTI1MTI7JiMxMjQ4NzsmIzEyNTQwOyYjMTI0Nzk7JiMyOTk4MzsmIzI1MTA0OzwvdGV4dD48L2c+PCEtLWVudGl0eSB2ZXJpZnktLT48ZyBjbGFzcz0iZW50aXR5IiBkYXRhLXF1YWxpZmllZC1uYW1lPSIuLi4uLi4uLi4uLi52ZXJpZnkiIGRhdGEtc291cmNlLWxpbmU9IjYiIGlkPSJlbnQwMDA1Ij48cmVjdCBmaWxsPSIjRkZGRkZGIiBoZWlnaHQ9IjIyLjI5NjkiIHJ4PSIyLjUiIHJ5PSIyLjUiIHN0eWxlPSJzdHJva2U6IzAwMDAwMDtzdHJva2Utd2lkdGg6MTsiIHdpZHRoPSIxMTcuOTk5NiIgeD0iMjgiIHk9IjIxMy41OSIvPjx0ZXh0IGZpbGw9IiMwMDAwMDAiIGZvbnQtZmFtaWx5PSJWZXJkYW5hIiBmb250LXNpemU9IjE0IiBsZW5ndGhBZGp1c3Q9InNwYWNpbmciIHRleHRMZW5ndGg9Ijk3Ljk5OTYiIHg9IjM4IiB5PSIyMjkuNTg1MSI+JiMxMjUwMzsmIzEyNTI1OyYjMTI0OTc7JiMxMjQ4NjsmIzEyNDUxOyYjMjY5MDg7JiMzNTM4ODs8L3RleHQ+PC9nPjwhLS1lbnRpdHkgcmVwZWF0LS0+PGcgY2xhc3M9ImVudGl0eSIgZGF0YS1xdWFsaWZpZWQtbmFtZT0iLi4uLi4uLi4uLi4ucmVwZWF0IiBkYXRhLXNvdXJjZS1saW5lPSI3IiBpZD0iZW50MDAwNiI+PHJlY3QgZmlsbD0iI0ZGRkZGRiIgaGVpZ2h0PSIyMi4yOTY5IiByeD0iMi41IiByeT0iMi41IiBzdHlsZT0ic3Ryb2tlOiMwMDAwMDA7c3Ryb2tlLXdpZHRoOjE7IiB3aWR0aD0iMTY5LjAwMjkiIHg9IjY0LjUiIHk9IjI5Ni44OSIvPjx0ZXh0IGZpbGw9IiMwMDAwMDAiIGZvbnQtZmFtaWx5PSJWZXJkYW5hIiBmb250LXNpemU9IjE0IiBsZW5ndGhBZGp1c3Q9InNwYWNpbmciIHRleHRMZW5ndGg9IjE0OS4wMDI5IiB4PSI3NC41IiB5PSIzMTIuODg1MSI+QFJlcGVhdGVkVGVzdCgxMDApPC90ZXh0PjwvZz48ZyBjbGFzcz0iZW50aXR5IiBkYXRhLXF1YWxpZmllZC1uYW1lPSJHTU4xMSIgZGF0YS1zb3VyY2UtbGluZT0iMTYiIGlkPSJlbnQwMDEyIj48cGF0aCBkPSJNODYuNSwzODIuMTggTDg2LjUsNDIyLjQ0NTYgQTAsMCAwIDAgMCA4Ni41LDQyMi40NDU2IEwyMTEuNTAwMSw0MjIuNDQ1NiBBMCwwIDAgMCAwIDIxMS41MDAxLDQyMi40NDU2IEwyMTEuNTAwMSwzOTIuMTggTDIwMS41MDAxLDM4Mi4xOCBMMTUzLDM4Mi4xOCBMMTQ5LDMxOS42MiBMMTQ1LDM4Mi4xOCBMODYuNSwzODIuMTggQTAsMCAwIDAgMCA4Ni41LDM4Mi4xOCIgZmlsbD0iI0ZGRkZGRiIgc3R5bGU9InN0cm9rZTojMDAwMDAwO3N0cm9rZS13aWR0aDoxOyIvPjxwYXRoIGQ9Ik0yMDEuNTAwMSwzODIuMTggTDIwMS41MDAxLDM5Mi4xOCBMMjExLjUwMDEsMzkyLjE4IEwyMDEuNTAwMSwzODIuMTgiIGZpbGw9IiNGRkZGRkYiIHN0eWxlPSJzdHJva2U6IzAwMDAwMDtzdHJva2Utd2lkdGg6MTsiLz48dGV4dCBmaWxsPSIjMDAwMDAwIiBmb250LWZhbWlseT0iVmVyZGFuYSIgZm9udC1zaXplPSIxMyIgbGVuZ3RoQWRqdXN0PSJzcGFjaW5nIiB0ZXh0TGVuZ3RoPSIxMDQuMDAwMSIgeD0iOTIuNSIgeT0iMzk5LjI0NjkiPiYjMTI1MjE7JiMxMjUzMTsmIzEyNDgwOyYjMTI1MTI7JiMxMjM5NDsmIzIwODM3OyYjMjExNDc7JiMxMjM5MTs8L3RleHQ+PHRleHQgZmlsbD0iIzAwMDAwMCIgZm9udC1mYW1pbHk9IlZlcmRhbmEiIGZvbnQtc2l6ZT0iMTMiIGxlbmd0aEFkanVzdD0ic3BhY2luZyIgdGV4dExlbmd0aD0iOTEuMDAwMSIgeD0iOTIuNSIgeT0iNDE0LjM3OTciPiYjMTk5ODE7JiMyMjc5MzsmIzI2NDY1OyYjMjAyMTQ7JiMxMjQzNDsmIzI2OTA4OyYjMzUzODg7PC90ZXh0PjwvZz48IS0tbGluayBnZW4gdG8gcmFuZG9tLS0+PGcgY2xhc3M9ImxpbmsiIGRhdGEtZW50aXR5LTE9ImVudDAwMDMiIGRhdGEtZW50aXR5LTI9ImVudDAwMDQiIGRhdGEtbGluay10eXBlPSJkZXBlbmRlbmN5IiBkYXRhLXNvdXJjZS1saW5lPSI5IiBpZD0ibG5rNyI+PHBhdGggZD0iTTE0OSw2OS43NyBDMTQ5LDg1LjM1IDE0OSwxMDguMjMgMTQ5LDEyMy44MSIgZmlsbD0ibm9uZSIgaWQ9Imdlbi10by1yYW5kb20iIHN0eWxlPSJzdHJva2U6IzAwMDAwMDtzdHJva2Utd2lkdGg6MTsiLz48cG9seWdvbiBmaWxsPSIjMDAwMDAwIiBwb2ludHM9IjE0OSwxMjkuODEsMTUzLDEyMC44MSwxNDksMTI0LjgxLDE0NSwxMjAuODEsMTQ5LDEyOS44MSIgc3R5bGU9InN0cm9rZTojMDAwMDAwO3N0cm9rZS13aWR0aDoxOyIvPjwvZz48IS0tbGluayByYW5kb20gdG8gdmVyaWZ5LS0+PGcgY2xhc3M9ImxpbmsiIGRhdGEtZW50aXR5LTE9ImVudDAwMDQiIGRhdGEtZW50aXR5LTI9ImVudDAwMDUiIGRhdGEtbGluay10eXBlPSJkZXBlbmRlbmN5IiBkYXRhLXNvdXJjZS1saW5lPSIxMCIgaWQ9ImxuazgiPjxwYXRoIGQ9Ik0xNDAuODksMTUzLjA3IEMxMjkuMDEsMTY4LjY1IDExMC42MjgxLDE5Mi43NTg4IDk4Ljc0ODEsMjA4LjMzODgiIGZpbGw9Im5vbmUiIGlkPSJyYW5kb20tdG8tdmVyaWZ5IiBzdHlsZT0ic3Ryb2tlOiMwMDAwMDA7c3Ryb2tlLXdpZHRoOjE7Ii8+PHBvbHlnb24gZmlsbD0iIzAwMDAwMCIgcG9pbnRzPSI5NS4xMSwyMTMuMTEsMTAzLjc0NzksMjA4LjM3ODYsOTguMTQxOCwyMDkuMTM0LDk3LjM4NjQsMjAzLjUyNzgsOTUuMTEsMjEzLjExIiBzdHlsZT0ic3Ryb2tlOiMwMDAwMDA7c3Ryb2tlLXdpZHRoOjE7Ii8+PC9nPjwhLS1saW5rIHZlcmlmeSB0byByZXBlYXQtLT48ZyBjbGFzcz0ibGluayIgZGF0YS1lbnRpdHktMT0iZW50MDAwNSIgZGF0YS1lbnRpdHktMj0iZW50MDAwNiIgZGF0YS1saW5rLXR5cGU9ImRlcGVuZGVuY3kiIGRhdGEtc291cmNlLWxpbmU9IjExIiBpZD0ibG5rOSI+PHBhdGggZD0iTTk1LjExLDIzNi4zNyBDMTA2Ljk5LDI1MS45NSAxMjUuMzczNCwyNzYuMDQ3NyAxMzcuMjUzNCwyOTEuNjM3NyIgZmlsbD0ibm9uZSIgaWQ9InZlcmlmeS10by1yZXBlYXQiIHN0eWxlPSJzdHJva2U6IzAwMDAwMDtzdHJva2Utd2lkdGg6MTsiLz48cG9seWdvbiBmaWxsPSIjMDAwMDAwIiBwb2ludHM9IjE0MC44OSwyOTYuNDEsMTM4LjYxNjYsMjg2LjgyNzEsMTM3Ljg1OTUsMjkyLjQzMzEsMTMyLjI1MzUsMjkxLjY3NiwxNDAuODksMjk2LjQxIiBzdHlsZT0ic3Ryb2tlOiMwMDAwMDA7c3Ryb2tlLXdpZHRoOjE7Ii8+PC9nPjwhLS1saW5rIHJlcGVhdCB0byByYW5kb20tLT48ZyBjbGFzcz0ibGluayIgZGF0YS1lbnRpdHktMT0iZW50MDAwNiIgZGF0YS1lbnRpdHktMj0iZW50MDAwNCIgZGF0YS1saW5rLXR5cGU9ImRlcGVuZGVuY3kiIGRhdGEtc291cmNlLWxpbmU9IjEyIiBpZD0ibG5rMTAiPjxwYXRoIGQ9Ik0xNTIuMzEsMjk2LjQzIEMxNTcuMzIsMjc5LjE0IDE2NS45NCwyNDMuOCAxNjMsMjEzLjU5IEMxNjAuODgsMTkxLjc5IDE1Ni42MTYzLDE3Mi41ODMxIDE1My4xODYzLDE1OC43NzMxIiBmaWxsPSJub25lIiBpZD0icmVwZWF0LXRvLXJhbmRvbSIgc3R5bGU9InN0cm9rZTojMDAwMDAwO3N0cm9rZS13aWR0aDoxOyIvPjxwb2x5Z29uIGZpbGw9IiMwMDAwMDAiIHBvaW50cz0iMTUxLjc0LDE1Mi45NSwxNTAuMDI3NCwxNjIuNjQ4OCwxNTIuOTQ1MiwxNTcuODAyNiwxNTcuNzkxNSwxNjAuNzIwNCwxNTEuNzQsMTUyLjk1IiBzdHlsZT0ic3Ryb2tlOiMwMDAwMDA7c3Ryb2tlLXdpZHRoOjE7Ii8+PHRleHQgZmlsbD0iIzAwMDAwMCIgZm9udC1mYW1pbHk9IlZlcmRhbmEiIGZvbnQtc2l6ZT0iMTMiIGxlbmd0aEFkanVzdD0ic3BhY2luZyIgdGV4dExlbmd0aD0iNTIuMDAwMSIgeD0iMTY0LjYiIHk9IjIyOS4zMDY5Ij4mIzMyMzY4OyYjMTI0MjY7JiMzNjgyMDsmIzEyMzc1OzwvdGV4dD48L2c+PD9wbGFudHVtbC1zcmMgTE9fMUlpRDA0OFJseW5IWkpsTEdnNVNGdVpFODF3emhDelAya29kZjhYS0hKMFFyNVdJTEdYNEw1SWpMR0gwNGlMWmVtcW9Kelo2Q2tyN2lQTnpzdmxsX2RyYW1zckdkUkRIS0xHRTRMM1BBTHNnNGRkMUYtNU51TkZYOHVXVlhJLTZIbjRGeHBUd3NYdGpHTGc2Rk5nWXE3ekd0TWd0MmVlVWdZSE5JLUtSdU1WWFQtNDN1SmxaTzllb2R0VGtxVk1QOXZfbzN2bmhKX2xOaVFNSW43R2doTXhpdmpoZjYzTEE2XzdMZ2NpOUlnVUhBR3BpNW9DZ25NNXB2Wk5QWTl0Y0E0eVN1WnZEX0JicDZ3VjFEdWl2aXQ5TWUxX2kwRVoyNGN1NG5NVVJTTFQ1QlNsWU9UQXVhNmkzYXlwSmZkd0d0enZFbDN1YWx0MEwwc2lTVi1wUzA/PjwvZz48L3N2Zz4=" class="uml" alt="uml diagram" title="" /></p>
<h3 id="125">12.5 不変条件のテスト<a class="headerlink" href="#125" title="Permanent link">&para;</a></h3>
<div class="highlight"><pre><span></span><code><span class="nd">@Nested</span>
<span class="nd">@DisplayName</span><span class="p">(</span><span class="s">&quot;guideScore のプロパティ&quot;</span><span class="p">)</span>
<span class="kd">class</span> <span class="nc">GuideScorePropertyTest</span><span class="w"> </span><span class="p">{</span>

<span class="w">    </span><span class="nd">@RepeatedTest</span><span class="p">(</span><span class="mi">100</span><span class="p">)</span>
<span class="w">    </span><span class="nd">@DisplayName</span><span class="p">(</span><span class="s">&quot;スコアは常に 0 以上 100 以下&quot;</span><span class="p">)</span>
<span class="w">    </span><span class="kt">void</span><span class="w"> </span><span class="nf">scoreIsBetween0And100</span><span class="p">()</span><span class="w"> </span><span class="p">{</span>
<span class="w">        </span><span class="n">Guide</span><span class="w"> </span><span class="n">guide</span><span class="w"> </span><span class="o">=</span><span class="w"> </span><span class="n">randomGuide</span><span class="p">(</span><span class="n">random</span><span class="p">.</span><span class="na">nextBoolean</span><span class="p">(),</span><span class="w"> </span><span class="mi">10</span><span class="p">);</span>

<span class="w">        </span><span class="kt">int</span><span class="w"> </span><span class="n">score</span><span class="w"> </span><span class="o">=</span><span class="w"> </span><span class="n">guideScore</span><span class="p">(</span><span class="n">guide</span><span class="p">);</span>

<span class="w">        </span><span class="n">assertThat</span><span class="p">(</span><span class="n">score</span><span class="p">).</span><span class="na">isBetween</span><span class="p">(</span><span class="mi">0</span><span class="p">,</span><span class="w"> </span><span class="mi">100</span><span class="p">);</span>
<span class="w">    </span><span class="p">}</span>

<span class="w">    </span><span class="nd">@RepeatedTest</span><span class="p">(</span><span class="mi">100</span><span class="p">)</span>
<span class="w">    </span><span class="nd">@DisplayName</span><span class="p">(</span><span class="s">&quot;説明ありのスコアは説明なしより 30 点高い&quot;</span><span class="p">)</span>
<span class="w">    </span><span class="kt">void</span><span class="w"> </span><span class="nf">descriptionAdds30Points</span><span class="p">()</span><span class="w"> </span><span class="p">{</span>
<span class="w">        </span><span class="n">Location</span><span class="w"> </span><span class="n">location</span><span class="w"> </span><span class="o">=</span><span class="w"> </span><span class="n">randomLocation</span><span class="p">();</span>
<span class="w">        </span><span class="n">List</span><span class="o">&lt;</span><span class="n">PopCultureSubject</span><span class="o">&gt;</span><span class="w"> </span><span class="n">subjects</span><span class="w"> </span><span class="o">=</span><span class="w"> </span><span class="n">randomSubjects</span><span class="p">(</span><span class="mi">4</span><span class="p">);</span>

<span class="w">        </span><span class="n">Attraction</span><span class="w"> </span><span class="n">withDesc</span><span class="w"> </span><span class="o">=</span><span class="w"> </span><span class="k">new</span><span class="w"> </span><span class="n">Attraction</span><span class="p">(</span><span class="s">&quot;Test&quot;</span><span class="p">,</span><span class="w"> </span><span class="n">Option</span><span class="p">.</span><span class="na">some</span><span class="p">(</span><span class="s">&quot;Description&quot;</span><span class="p">),</span><span class="w"> </span><span class="n">location</span><span class="p">);</span>
<span class="w">        </span><span class="n">Attraction</span><span class="w"> </span><span class="n">withoutDesc</span><span class="w"> </span><span class="o">=</span><span class="w"> </span><span class="k">new</span><span class="w"> </span><span class="n">Attraction</span><span class="p">(</span><span class="s">&quot;Test&quot;</span><span class="p">,</span><span class="w"> </span><span class="n">Option</span><span class="p">.</span><span class="na">none</span><span class="p">(),</span><span class="w"> </span><span class="n">location</span><span class="p">);</span>

<span class="w">        </span><span class="n">Guide</span><span class="w"> </span><span class="n">guideWithDesc</span><span class="w"> </span><span class="o">=</span><span class="w"> </span><span class="k">new</span><span class="w"> </span><span class="n">Guide</span><span class="p">(</span><span class="n">withDesc</span><span class="p">,</span><span class="w"> </span><span class="n">subjects</span><span class="p">);</span>
<span class="w">        </span><span class="n">Guide</span><span class="w"> </span><span class="n">guideWithoutDesc</span><span class="w"> </span><span class="o">=</span><span class="w"> </span><span class="k">new</span><span class="w"> </span><span class="n">Guide</span><span class="p">(</span><span class="n">withoutDesc</span><span class="p">,</span><span class="w"> </span><span class="n">subjects</span><span class="p">);</span>

<span class="w">        </span><span class="kt">int</span><span class="w"> </span><span class="n">scoreDiff</span><span class="w"> </span><span class="o">=</span><span class="w"> </span><span class="n">guideScore</span><span class="p">(</span><span class="n">guideWithDesc</span><span class="p">)</span><span class="w"> </span><span class="o">-</span><span class="w"> </span><span class="n">guideScore</span><span class="p">(</span><span class="n">guideWithoutDesc</span><span class="p">);</span>

<span class="w">        </span><span class="n">assertThat</span><span class="p">(</span><span class="n">scoreDiff</span><span class="p">).</span><span class="na">isEqualTo</span><span class="p">(</span><span class="mi">30</span><span class="p">);</span>
<span class="w">    </span><span class="p">}</span>

<span class="w">    </span><span class="nd">@RepeatedTest</span><span class="p">(</span><span class="mi">100</span><span class="p">)</span>
<span class="w">    </span><span class="nd">@DisplayName</span><span class="p">(</span><span class="s">&quot;スコアはアトラクション名に依存しない&quot;</span><span class="p">)</span>
<span class="w">    </span><span class="kt">void</span><span class="w"> </span><span class="nf">scoreDoesNotDependOnName</span><span class="p">()</span><span class="w"> </span><span class="p">{</span>
<span class="w">        </span><span class="n">Location</span><span class="w"> </span><span class="n">location</span><span class="w"> </span><span class="o">=</span><span class="w"> </span><span class="n">randomLocation</span><span class="p">();</span>
<span class="w">        </span><span class="n">Option</span><span class="o">&lt;</span><span class="n">String</span><span class="o">&gt;</span><span class="w"> </span><span class="n">description</span><span class="w"> </span><span class="o">=</span><span class="w"> </span><span class="n">Option</span><span class="p">.</span><span class="na">some</span><span class="p">(</span><span class="n">randomString</span><span class="p">());</span>
<span class="w">        </span><span class="n">List</span><span class="o">&lt;</span><span class="n">PopCultureSubject</span><span class="o">&gt;</span><span class="w"> </span><span class="n">subjects</span><span class="w"> </span><span class="o">=</span><span class="w"> </span><span class="n">randomSubjects</span><span class="p">(</span><span class="mi">4</span><span class="p">);</span>

<span class="w">        </span><span class="n">Attraction</span><span class="w"> </span><span class="n">attr1</span><span class="w"> </span><span class="o">=</span><span class="w"> </span><span class="k">new</span><span class="w"> </span><span class="n">Attraction</span><span class="p">(</span><span class="s">&quot;Name1&quot;</span><span class="p">,</span><span class="w"> </span><span class="n">description</span><span class="p">,</span><span class="w"> </span><span class="n">location</span><span class="p">);</span>
<span class="w">        </span><span class="n">Attraction</span><span class="w"> </span><span class="n">attr2</span><span class="w"> </span><span class="o">=</span><span class="w"> </span><span class="k">new</span><span class="w"> </span><span class="n">Attraction</span><span class="p">(</span><span class="s">&quot;Name2&quot;</span><span class="p">,</span><span class="w"> </span><span class="n">description</span><span class="p">,</span><span class="w"> </span><span class="n">location</span><span class="p">);</span>

<span class="w">        </span><span class="n">Guide</span><span class="w"> </span><span class="n">guide1</span><span class="w"> </span><span class="o">=</span><span class="w"> </span><span class="k">new</span><span class="w"> </span><span class="n">Guide</span><span class="p">(</span><span class="n">attr1</span><span class="p">,</span><span class="w"> </span><span class="n">subjects</span><span class="p">);</span>
<span class="w">        </span><span class="n">Guide</span><span class="w"> </span><span class="n">guide2</span><span class="w"> </span><span class="o">=</span><span class="w"> </span><span class="k">new</span><span class="w"> </span><span class="n">Guide</span><span class="p">(</span><span class="n">attr2</span><span class="p">,</span><span class="w"> </span><span class="n">subjects</span><span class="p">);</span>

<span class="w">        </span><span class="n">assertThat</span><span class="p">(</span><span class="n">guideScore</span><span class="p">(</span><span class="n">guide1</span><span class="p">)).</span><span class="na">isEqualTo</span><span class="p">(</span><span class="n">guideScore</span><span class="p">(</span><span class="n">guide2</span><span class="p">));</span>
<span class="w">    </span><span class="p">}</span>

<span class="w">    </span><span class="nd">@Test</span>
<span class="w">    </span><span class="nd">@DisplayName</span><span class="p">(</span><span class="s">&quot;フォロワー数のオーバーフローを防ぐ&quot;</span><span class="p">)</span>
<span class="w">    </span><span class="kt">void</span><span class="w"> </span><span class="nf">preventsFollowerOverflow</span><span class="p">()</span><span class="w"> </span><span class="p">{</span>
<span class="w">        </span><span class="n">Attraction</span><span class="w"> </span><span class="n">attraction</span><span class="w"> </span><span class="o">=</span><span class="w"> </span><span class="n">randomAttraction</span><span class="p">(</span><span class="kc">false</span><span class="p">);</span>
<span class="w">        </span><span class="n">List</span><span class="o">&lt;</span><span class="n">Artist</span><span class="o">&gt;</span><span class="w"> </span><span class="n">artists</span><span class="w"> </span><span class="o">=</span><span class="w"> </span><span class="n">List</span><span class="p">.</span><span class="na">range</span><span class="p">(</span><span class="mi">0</span><span class="p">,</span><span class="w"> </span><span class="mi">100</span><span class="p">)</span>
<span class="w">                </span><span class="p">.</span><span class="na">map</span><span class="p">(</span><span class="n">i</span><span class="w"> </span><span class="o">-&gt;</span><span class="w"> </span><span class="k">new</span><span class="w"> </span><span class="n">Artist</span><span class="p">(</span><span class="s">&quot;Artist&quot;</span><span class="w"> </span><span class="o">+</span><span class="w"> </span><span class="n">i</span><span class="p">,</span><span class="w"> </span><span class="n">Integer</span><span class="p">.</span><span class="na">MAX_VALUE</span><span class="p">));</span>
<span class="w">        </span><span class="n">Guide</span><span class="w"> </span><span class="n">guide</span><span class="w"> </span><span class="o">=</span><span class="w"> </span><span class="k">new</span><span class="w"> </span><span class="n">Guide</span><span class="p">(</span><span class="n">attraction</span><span class="p">,</span><span class="w"> </span><span class="n">List</span><span class="p">.</span><span class="na">narrow</span><span class="p">(</span><span class="n">artists</span><span class="p">));</span>

<span class="w">        </span><span class="kt">int</span><span class="w"> </span><span class="n">score</span><span class="w"> </span><span class="o">=</span><span class="w"> </span><span class="n">guideScore</span><span class="p">(</span><span class="n">guide</span><span class="p">);</span>

<span class="w">        </span><span class="n">assertThat</span><span class="p">(</span><span class="n">score</span><span class="p">).</span><span class="na">isBetween</span><span class="p">(</span><span class="mi">0</span><span class="p">,</span><span class="w"> </span><span class="mi">100</span><span class="p">);</span>
<span class="w">    </span><span class="p">}</span>
<span class="p">}</span>
</code></pre></div>
<h3 id="126">12.6 純粋関数のプロパティテスト<a class="headerlink" href="#126" title="Permanent link">&para;</a></h3>
<div class="highlight"><pre><span></span><code><span class="nd">@Nested</span>
<span class="nd">@DisplayName</span><span class="p">(</span><span class="s">&quot;純粋関数のプロパティ&quot;</span><span class="p">)</span>
<span class="kd">class</span> <span class="nc">PureFunctionPropertyTest</span><span class="w"> </span><span class="p">{</span>

<span class="w">    </span><span class="nd">@RepeatedTest</span><span class="p">(</span><span class="mi">100</span><span class="p">)</span>
<span class="w">    </span><span class="nd">@DisplayName</span><span class="p">(</span><span class="s">&quot;guideScore は同じ入力に対して同じ出力を返す（参照透過性）&quot;</span><span class="p">)</span>
<span class="w">    </span><span class="kt">void</span><span class="w"> </span><span class="nf">guideScoreIsReferentiallyTransparent</span><span class="p">()</span><span class="w"> </span><span class="p">{</span>
<span class="w">        </span><span class="n">Guide</span><span class="w"> </span><span class="n">guide</span><span class="w"> </span><span class="o">=</span><span class="w"> </span><span class="n">randomGuide</span><span class="p">(</span><span class="n">random</span><span class="p">.</span><span class="na">nextBoolean</span><span class="p">(),</span><span class="w"> </span><span class="mi">5</span><span class="p">);</span>

<span class="w">        </span><span class="kt">int</span><span class="w"> </span><span class="n">score1</span><span class="w"> </span><span class="o">=</span><span class="w"> </span><span class="n">guideScore</span><span class="p">(</span><span class="n">guide</span><span class="p">);</span>
<span class="w">        </span><span class="kt">int</span><span class="w"> </span><span class="n">score2</span><span class="w"> </span><span class="o">=</span><span class="w"> </span><span class="n">guideScore</span><span class="p">(</span><span class="n">guide</span><span class="p">);</span>
<span class="w">        </span><span class="kt">int</span><span class="w"> </span><span class="n">score3</span><span class="w"> </span><span class="o">=</span><span class="w"> </span><span class="n">guideScore</span><span class="p">(</span><span class="n">guide</span><span class="p">);</span>

<span class="w">        </span><span class="n">assertThat</span><span class="p">(</span><span class="n">score1</span><span class="p">).</span><span class="na">isEqualTo</span><span class="p">(</span><span class="n">score2</span><span class="p">).</span><span class="na">isEqualTo</span><span class="p">(</span><span class="n">score3</span><span class="p">);</span>
<span class="w">    </span><span class="p">}</span>

<span class="w">    </span><span class="nd">@RepeatedTest</span><span class="p">(</span><span class="mi">100</span><span class="p">)</span>
<span class="w">    </span><span class="nd">@DisplayName</span><span class="p">(</span><span class="s">&quot;findBestGuide は同じ入力に対して同じ出力を返す&quot;</span><span class="p">)</span>
<span class="w">    </span><span class="kt">void</span><span class="w"> </span><span class="nf">findBestGuideIsReferentiallyTransparent</span><span class="p">()</span><span class="w"> </span><span class="p">{</span>
<span class="w">        </span><span class="n">List</span><span class="o">&lt;</span><span class="n">Guide</span><span class="o">&gt;</span><span class="w"> </span><span class="n">guides</span><span class="w"> </span><span class="o">=</span><span class="w"> </span><span class="n">List</span><span class="p">.</span><span class="na">range</span><span class="p">(</span><span class="mi">0</span><span class="p">,</span><span class="w"> </span><span class="n">random</span><span class="p">.</span><span class="na">nextInt</span><span class="p">(</span><span class="mi">5</span><span class="p">)</span><span class="w"> </span><span class="o">+</span><span class="w"> </span><span class="mi">1</span><span class="p">)</span>
<span class="w">                </span><span class="p">.</span><span class="na">map</span><span class="p">(</span><span class="n">i</span><span class="w"> </span><span class="o">-&gt;</span><span class="w"> </span><span class="n">randomGuide</span><span class="p">(</span><span class="n">random</span><span class="p">.</span><span class="na">nextBoolean</span><span class="p">(),</span><span class="w"> </span><span class="mi">3</span><span class="p">));</span>

<span class="w">        </span><span class="n">Option</span><span class="o">&lt;</span><span class="n">Guide</span><span class="o">&gt;</span><span class="w"> </span><span class="n">result1</span><span class="w"> </span><span class="o">=</span><span class="w"> </span><span class="n">TravelGuide</span><span class="p">.</span><span class="na">findBestGuide</span><span class="p">(</span><span class="n">guides</span><span class="p">);</span>
<span class="w">        </span><span class="n">Option</span><span class="o">&lt;</span><span class="n">Guide</span><span class="o">&gt;</span><span class="w"> </span><span class="n">result2</span><span class="w"> </span><span class="o">=</span><span class="w"> </span><span class="n">TravelGuide</span><span class="p">.</span><span class="na">findBestGuide</span><span class="p">(</span><span class="n">guides</span><span class="p">);</span>

<span class="w">        </span><span class="n">assertThat</span><span class="p">(</span><span class="n">result1</span><span class="p">).</span><span class="na">isEqualTo</span><span class="p">(</span><span class="n">result2</span><span class="p">);</span>
<span class="w">    </span><span class="p">}</span>
<span class="p">}</span>
</code></pre></div>
<h3 id="127">12.7 キャッシュのテスト<a class="headerlink" href="#127" title="Permanent link">&para;</a></h3>
<p><strong>ソースファイル</strong>: <code>app/java/src/test/java/ch11/CachedDataAccessTest.java</code></p>
<div class="highlight"><pre><span></span><code><span class="nd">@Test</span>
<span class="nd">@DisplayName</span><span class="p">(</span><span class="s">&quot;同じクエリは2回目以降キャッシュから返される&quot;</span><span class="p">)</span>
<span class="kt">void</span><span class="w"> </span><span class="nf">cachedResultsAreReused</span><span class="p">()</span><span class="w"> </span><span class="p">{</span>
<span class="w">    </span><span class="n">AtomicInteger</span><span class="w"> </span><span class="n">callCount</span><span class="w"> </span><span class="o">=</span><span class="w"> </span><span class="k">new</span><span class="w"> </span><span class="n">AtomicInteger</span><span class="p">(</span><span class="mi">0</span><span class="p">);</span>

<span class="w">    </span><span class="n">DataAccess</span><span class="w"> </span><span class="n">underlying</span><span class="w"> </span><span class="o">=</span><span class="w"> </span><span class="k">new</span><span class="w"> </span><span class="n">DataAccess</span><span class="p">()</span><span class="w"> </span><span class="p">{</span>
<span class="w">        </span><span class="nd">@Override</span>
<span class="w">        </span><span class="kd">public</span><span class="w"> </span><span class="n">IO</span><span class="o">&lt;</span><span class="n">List</span><span class="o">&lt;</span><span class="n">Attraction</span><span class="o">&gt;&gt;</span><span class="w"> </span><span class="nf">findAttractions</span><span class="p">(</span><span class="n">String</span><span class="w"> </span><span class="n">name</span><span class="p">,</span><span class="w"> </span><span class="n">AttractionOrdering</span><span class="w"> </span><span class="n">ordering</span><span class="p">,</span><span class="w"> </span><span class="kt">int</span><span class="w"> </span><span class="n">limit</span><span class="p">)</span><span class="w"> </span><span class="p">{</span>
<span class="w">            </span><span class="k">return</span><span class="w"> </span><span class="n">IO</span><span class="p">.</span><span class="na">delay</span><span class="p">(()</span><span class="w"> </span><span class="o">-&gt;</span><span class="w"> </span><span class="p">{</span>
<span class="w">                </span><span class="n">callCount</span><span class="p">.</span><span class="na">incrementAndGet</span><span class="p">();</span>
<span class="w">                </span><span class="k">return</span><span class="w"> </span><span class="n">List</span><span class="p">.</span><span class="na">of</span><span class="p">(</span><span class="n">TOWER_BRIDGE</span><span class="p">);</span>
<span class="w">            </span><span class="p">});</span>
<span class="w">        </span><span class="p">}</span>

<span class="w">        </span><span class="c1">// 他のメソッドも同様に実装...</span>
<span class="w">    </span><span class="p">};</span>

<span class="w">    </span><span class="n">DataAccess</span><span class="w"> </span><span class="n">cached</span><span class="w"> </span><span class="o">=</span><span class="w"> </span><span class="n">CachedDataAccess</span><span class="p">.</span><span class="na">createUnsafe</span><span class="p">(</span><span class="n">underlying</span><span class="p">);</span>

<span class="w">    </span><span class="c1">// 1回目のクエリ</span>
<span class="w">    </span><span class="n">cached</span><span class="p">.</span><span class="na">findAttractions</span><span class="p">(</span><span class="s">&quot;Bridge&quot;</span><span class="p">,</span><span class="w"> </span><span class="n">AttractionOrdering</span><span class="p">.</span><span class="na">BY_NAME</span><span class="p">,</span><span class="w"> </span><span class="mi">10</span><span class="p">).</span><span class="na">unsafeRun</span><span class="p">();</span>
<span class="w">    </span><span class="n">assertThat</span><span class="p">(</span><span class="n">callCount</span><span class="p">.</span><span class="na">get</span><span class="p">()).</span><span class="na">isEqualTo</span><span class="p">(</span><span class="mi">1</span><span class="p">);</span>

<span class="w">    </span><span class="c1">// 2回目のクエリ（同じパラメータ）</span>
<span class="w">    </span><span class="n">cached</span><span class="p">.</span><span class="na">findAttractions</span><span class="p">(</span><span class="s">&quot;Bridge&quot;</span><span class="p">,</span><span class="w"> </span><span class="n">AttractionOrdering</span><span class="p">.</span><span class="na">BY_NAME</span><span class="p">,</span><span class="w"> </span><span class="mi">10</span><span class="p">).</span><span class="na">unsafeRun</span><span class="p">();</span>
<span class="w">    </span><span class="n">assertThat</span><span class="p">(</span><span class="n">callCount</span><span class="p">.</span><span class="na">get</span><span class="p">()).</span><span class="na">isEqualTo</span><span class="p">(</span><span class="mi">1</span><span class="p">);</span><span class="w"> </span><span class="c1">// キャッシュから返されるので呼び出し回数は増えない</span>

<span class="w">    </span><span class="c1">// 3回目のクエリ（異なるパラメータ）</span>
<span class="w">    </span><span class="n">cached</span><span class="p">.</span><span class="na">findAttractions</span><span class="p">(</span><span class="s">&quot;Tower&quot;</span><span class="p">,</span><span class="w"> </span><span class="n">AttractionOrdering</span><span class="p">.</span><span class="na">BY_NAME</span><span class="p">,</span><span class="w"> </span><span class="mi">10</span><span class="p">).</span><span class="na">unsafeRun</span><span class="p">();</span>
<span class="w">    </span><span class="n">assertThat</span><span class="p">(</span><span class="n">callCount</span><span class="p">.</span><span class="na">get</span><span class="p">()).</span><span class="na">isEqualTo</span><span class="p">(</span><span class="mi">2</span><span class="p">);</span><span class="w"> </span><span class="c1">// 新しいクエリなので呼び出される</span>
<span class="p">}</span>
</code></pre></div>
<h3 id="128-resource">12.8 Resource のテスト<a class="headerlink" href="#128-resource" title="Permanent link">&para;</a></h3>
<p><strong>ソースファイル</strong>: <code>app/java/src/test/java/ch11/ResourceTest.java</code></p>
<div class="highlight"><pre><span></span><code><span class="nd">@Test</span>
<span class="nd">@DisplayName</span><span class="p">(</span><span class="s">&quot;use でリソースを取得して使用&quot;</span><span class="p">)</span>
<span class="kt">void</span><span class="w"> </span><span class="nf">useAcquiresAndReleasesResource</span><span class="p">()</span><span class="w"> </span><span class="p">{</span>
<span class="w">    </span><span class="n">AtomicBoolean</span><span class="w"> </span><span class="n">released</span><span class="w"> </span><span class="o">=</span><span class="w"> </span><span class="k">new</span><span class="w"> </span><span class="n">AtomicBoolean</span><span class="p">(</span><span class="kc">false</span><span class="p">);</span>

<span class="w">    </span><span class="n">Resource</span><span class="o">&lt;</span><span class="n">String</span><span class="o">&gt;</span><span class="w"> </span><span class="n">resource</span><span class="w"> </span><span class="o">=</span><span class="w"> </span><span class="n">Resource</span><span class="p">.</span><span class="na">make</span><span class="p">(</span>
<span class="w">            </span><span class="n">IO</span><span class="p">.</span><span class="na">pure</span><span class="p">(</span><span class="s">&quot;hello&quot;</span><span class="p">),</span>
<span class="w">            </span><span class="n">s</span><span class="w"> </span><span class="o">-&gt;</span><span class="w"> </span><span class="n">released</span><span class="p">.</span><span class="na">set</span><span class="p">(</span><span class="kc">true</span><span class="p">)</span>
<span class="w">    </span><span class="p">);</span>

<span class="w">    </span><span class="n">String</span><span class="w"> </span><span class="n">result</span><span class="w"> </span><span class="o">=</span><span class="w"> </span><span class="n">resource</span><span class="p">.</span><span class="na">use</span><span class="p">(</span><span class="n">s</span><span class="w"> </span><span class="o">-&gt;</span><span class="w"> </span><span class="n">IO</span><span class="p">.</span><span class="na">pure</span><span class="p">(</span><span class="n">s</span><span class="p">.</span><span class="na">toUpperCase</span><span class="p">())).</span><span class="na">unsafeRun</span><span class="p">();</span>

<span class="w">    </span><span class="n">assertThat</span><span class="p">(</span><span class="n">result</span><span class="p">).</span><span class="na">isEqualTo</span><span class="p">(</span><span class="s">&quot;HELLO&quot;</span><span class="p">);</span>
<span class="w">    </span><span class="n">assertThat</span><span class="p">(</span><span class="n">released</span><span class="p">.</span><span class="na">get</span><span class="p">()).</span><span class="na">isTrue</span><span class="p">();</span>
<span class="p">}</span>

<span class="nd">@Test</span>
<span class="nd">@DisplayName</span><span class="p">(</span><span class="s">&quot;処理が失敗してもリソースは解放される&quot;</span><span class="p">)</span>
<span class="kt">void</span><span class="w"> </span><span class="nf">resourceReleasedOnFailure</span><span class="p">()</span><span class="w"> </span><span class="p">{</span>
<span class="w">    </span><span class="n">AtomicBoolean</span><span class="w"> </span><span class="n">released</span><span class="w"> </span><span class="o">=</span><span class="w"> </span><span class="k">new</span><span class="w"> </span><span class="n">AtomicBoolean</span><span class="p">(</span><span class="kc">false</span><span class="p">);</span>

<span class="w">    </span><span class="n">Resource</span><span class="o">&lt;</span><span class="n">String</span><span class="o">&gt;</span><span class="w"> </span><span class="n">resource</span><span class="w"> </span><span class="o">=</span><span class="w"> </span><span class="n">Resource</span><span class="p">.</span><span class="na">make</span><span class="p">(</span>
<span class="w">            </span><span class="n">IO</span><span class="p">.</span><span class="na">pure</span><span class="p">(</span><span class="s">&quot;hello&quot;</span><span class="p">),</span>
<span class="w">            </span><span class="n">s</span><span class="w"> </span><span class="o">-&gt;</span><span class="w"> </span><span class="n">released</span><span class="p">.</span><span class="na">set</span><span class="p">(</span><span class="kc">true</span><span class="p">)</span>
<span class="w">    </span><span class="p">);</span>

<span class="w">    </span><span class="n">assertThatThrownBy</span><span class="p">(()</span><span class="w"> </span><span class="o">-&gt;</span>
<span class="w">            </span><span class="n">resource</span><span class="p">.</span><span class="na">use</span><span class="p">(</span><span class="n">s</span><span class="w"> </span><span class="o">-&gt;</span><span class="w"> </span><span class="n">IO</span><span class="p">.</span><span class="na">delay</span><span class="p">(()</span><span class="w"> </span><span class="o">-&gt;</span><span class="w"> </span><span class="p">{</span>
<span class="w">                </span><span class="k">throw</span><span class="w"> </span><span class="k">new</span><span class="w"> </span><span class="n">RuntimeException</span><span class="p">(</span><span class="s">&quot;error&quot;</span><span class="p">);</span>
<span class="w">            </span><span class="p">})).</span><span class="na">unsafeRun</span><span class="p">()</span>
<span class="w">    </span><span class="p">).</span><span class="na">isInstanceOf</span><span class="p">(</span><span class="n">RuntimeException</span><span class="p">.</span><span class="na">class</span><span class="p">);</span>

<span class="w">    </span><span class="n">assertThat</span><span class="p">(</span><span class="n">released</span><span class="p">.</span><span class="na">get</span><span class="p">()).</span><span class="na">isTrue</span><span class="p">();</span>
<span class="p">}</span>

<span class="nd">@Test</span>
<span class="nd">@DisplayName</span><span class="p">(</span><span class="s">&quot;both で2つのリソースを組み合わせる&quot;</span><span class="p">)</span>
<span class="kt">void</span><span class="w"> </span><span class="nf">bothCombinesTwoResources</span><span class="p">()</span><span class="w"> </span><span class="p">{</span>
<span class="w">    </span><span class="n">AtomicBoolean</span><span class="w"> </span><span class="n">firstReleased</span><span class="w"> </span><span class="o">=</span><span class="w"> </span><span class="k">new</span><span class="w"> </span><span class="n">AtomicBoolean</span><span class="p">(</span><span class="kc">false</span><span class="p">);</span>
<span class="w">    </span><span class="n">AtomicBoolean</span><span class="w"> </span><span class="n">secondReleased</span><span class="w"> </span><span class="o">=</span><span class="w"> </span><span class="k">new</span><span class="w"> </span><span class="n">AtomicBoolean</span><span class="p">(</span><span class="kc">false</span><span class="p">);</span>

<span class="w">    </span><span class="n">Resource</span><span class="o">&lt;</span><span class="n">Integer</span><span class="o">&gt;</span><span class="w"> </span><span class="n">first</span><span class="w"> </span><span class="o">=</span><span class="w"> </span><span class="n">Resource</span><span class="p">.</span><span class="na">make</span><span class="p">(</span>
<span class="w">            </span><span class="n">IO</span><span class="p">.</span><span class="na">pure</span><span class="p">(</span><span class="mi">1</span><span class="p">),</span>
<span class="w">            </span><span class="n">i</span><span class="w"> </span><span class="o">-&gt;</span><span class="w"> </span><span class="n">firstReleased</span><span class="p">.</span><span class="na">set</span><span class="p">(</span><span class="kc">true</span><span class="p">)</span>
<span class="w">    </span><span class="p">);</span>

<span class="w">    </span><span class="n">Resource</span><span class="o">&lt;</span><span class="n">String</span><span class="o">&gt;</span><span class="w"> </span><span class="n">second</span><span class="w"> </span><span class="o">=</span><span class="w"> </span><span class="n">Resource</span><span class="p">.</span><span class="na">make</span><span class="p">(</span>
<span class="w">            </span><span class="n">IO</span><span class="p">.</span><span class="na">pure</span><span class="p">(</span><span class="s">&quot;two&quot;</span><span class="p">),</span>
<span class="w">            </span><span class="n">s</span><span class="w"> </span><span class="o">-&gt;</span><span class="w"> </span><span class="n">secondReleased</span><span class="p">.</span><span class="na">set</span><span class="p">(</span><span class="kc">true</span><span class="p">)</span>
<span class="w">    </span><span class="p">);</span>

<span class="w">    </span><span class="kd">var</span><span class="w"> </span><span class="n">result</span><span class="w"> </span><span class="o">=</span><span class="w"> </span><span class="n">Resource</span><span class="p">.</span><span class="na">both</span><span class="p">(</span><span class="n">first</span><span class="p">,</span><span class="w"> </span><span class="n">second</span><span class="p">)</span>
<span class="w">            </span><span class="p">.</span><span class="na">use</span><span class="p">(</span><span class="n">tuple</span><span class="w"> </span><span class="o">-&gt;</span><span class="w"> </span><span class="n">IO</span><span class="p">.</span><span class="na">pure</span><span class="p">(</span><span class="n">tuple</span><span class="p">.</span><span class="na">_1</span><span class="p">()</span><span class="w"> </span><span class="o">+</span><span class="w"> </span><span class="n">tuple</span><span class="p">.</span><span class="na">_2</span><span class="p">()))</span>
<span class="w">            </span><span class="p">.</span><span class="na">unsafeRun</span><span class="p">();</span>

<span class="w">    </span><span class="n">assertThat</span><span class="p">(</span><span class="n">result</span><span class="p">).</span><span class="na">isEqualTo</span><span class="p">(</span><span class="s">&quot;1two&quot;</span><span class="p">);</span>
<span class="w">    </span><span class="n">assertThat</span><span class="p">(</span><span class="n">firstReleased</span><span class="p">.</span><span class="na">get</span><span class="p">()).</span><span class="na">isTrue</span><span class="p">();</span>
<span class="w">    </span><span class="n">assertThat</span><span class="p">(</span><span class="n">secondReleased</span><span class="p">.</span><span class="na">get</span><span class="p">()).</span><span class="na">isTrue</span><span class="p">();</span>
<span class="p">}</span>
</code></pre></div>
<h3 id="129">12.9 テストピラミッド<a class="headerlink" href="#129" title="Permanent link">&para;</a></h3>
<p><img src="data:image/svg+xml;base64,PD9wbGFudHVtbCAxLjIwMjYuMT8+PHN2ZyB4bWxucz0iaHR0cDovL3d3dy53My5vcmcvMjAwMC9zdmciIHhtbG5zOnhsaW5rPSJodHRwOi8vd3d3LnczLm9yZy8xOTk5L3hsaW5rIiBjb250ZW50U3R5bGVUeXBlPSJ0ZXh0L2NzcyIgZGF0YS1kaWFncmFtLXR5cGU9IkRFU0NSSVBUSU9OIiBoZWlnaHQ9IjM0NnB4IiBwcmVzZXJ2ZUFzcGVjdFJhdGlvPSJub25lIiBzdHlsZT0id2lkdGg6NDc1cHg7aGVpZ2h0OjM0NnB4O2JhY2tncm91bmQ6I0ZGRkZGRjsiIHZlcnNpb249IjEuMSIgdmlld0JveD0iMCAwIDQ3NSAzNDYiIHdpZHRoPSI0NzVweCIgem9vbUFuZFBhbj0ibWFnbmlmeSI+PGRlZnMvPjxnPjwhLS1jbHVzdGVyID8/Pz8/Pz8/LS0+PGcgY2xhc3M9ImNsdXN0ZXIiIGRhdGEtcXVhbGlmaWVkLW5hbWU9Ii4uLi4uLi4uIiBkYXRhLXNvdXJjZS1saW5lPSIzIiBpZD0iZW50MDAwMiI+PHJlY3QgZmlsbD0iI0ZGRkZGRiIgaGVpZ2h0PSIzMjguNzgiIHJ4PSIyLjUiIHJ5PSIyLjUiIHN0eWxlPSJzdHJva2U6IzAwMDAwMDtzdHJva2Utd2lkdGg6MTsiIHdpZHRoPSIyNTQiIHg9IjEyIiB5PSIxMiIvPjx0ZXh0IGZpbGw9IiMwMDAwMDAiIGZvbnQtZmFtaWx5PSJWZXJkYW5hIiBmb250LXNpemU9IjE0IiBmb250LXdlaWdodD0iYm9sZCIgbGVuZ3RoQWRqdXN0PSJzcGFjaW5nIiB0ZXh0TGVuZ3RoPSIxMTEuOTk5NSIgeD0iODMuMDAwMiIgeT0iMjYuOTk1MSI+JiMxMjQ4NjsmIzEyNDczOyYjMTI0ODg7JiMxMjUwMDsmIzEyNTIxOyYjMTI1MTE7JiMxMjQ4MzsmIzEyNDg5OzwvdGV4dD48L2c+PCEtLWVudGl0eSBlMmUtLT48ZyBjbGFzcz0iZW50aXR5IiBkYXRhLXF1YWxpZmllZC1uYW1lPSIuLi4uLi4uLi5lMmUiIGRhdGEtc291cmNlLWxpbmU9IjQiIGlkPSJlbnQwMDAzIj48cmVjdCBmaWxsPSIjRkZGRkZGIiBoZWlnaHQ9IjUyLjU5MzgiIHJ4PSIyLjUiIHJ5PSIyLjUiIHN0eWxlPSJzdHJva2U6IzAwMDAwMDtzdHJva2Utd2lkdGg6MTsiIHdpZHRoPSI5My4wNDg2IiB4PSI5Mi40OCIgeT0iNDciLz48dGV4dCBmaWxsPSIjMDAwMDAwIiBmb250LWZhbWlseT0iVmVyZGFuYSIgZm9udC1zaXplPSIxNCIgbGVuZ3RoQWRqdXN0PSJzcGFjaW5nIiB0ZXh0TGVuZ3RoPSI3My4wNDg2IiB4PSIxMDIuNDgiIHk9IjY5Ljk5NTEiPkUyRSAmIzEyNDg2OyYjMTI0NzM7JiMxMjQ4ODs8L3RleHQ+PHRleHQgZmlsbD0iIzAwMDAwMCIgZm9udC1mYW1pbHk9IlZlcmRhbmEiIGZvbnQtc2l6ZT0iMTQiIGxlbmd0aEFkanVzdD0ic3BhY2luZyIgdGV4dExlbmd0aD0iMzguOTIzNyIgeD0iMTAyLjQ4IiB5PSI4Ni4yOTIiPigmIzIzNTY5OyYjMjU5Njg7KTwvdGV4dD48L2c+PCEtLWVudGl0eSBpbnRlZ3JhdGlvbi0tPjxnIGNsYXNzPSJlbnRpdHkiIGRhdGEtcXVhbGlmaWVkLW5hbWU9Ii4uLi4uLi4uLmludGVncmF0aW9uIiBkYXRhLXNvdXJjZS1saW5lPSI1IiBpZD0iZW50MDAwNCI+PHJlY3QgZmlsbD0iI0ZGRkZGRiIgaGVpZ2h0PSI1Mi41OTM4IiByeD0iMi41IiByeT0iMi41IiBzdHlsZT0ic3Ryb2tlOiMwMDAwMDA7c3Ryb2tlLXdpZHRoOjE7IiB3aWR0aD0iODkuOTk5NyIgeD0iOTQiIHk9IjE1OS41OSIvPjx0ZXh0IGZpbGw9IiMwMDAwMDAiIGZvbnQtZmFtaWx5PSJWZXJkYW5hIiBmb250LXNpemU9IjE0IiBsZW5ndGhBZGp1c3Q9InNwYWNpbmciIHRleHRMZW5ndGg9IjY5Ljk5OTciIHg9IjEwNCIgeT0iMTgyLjU4NTEiPiYjMzIxMTM7JiMyMTUxMjsmIzEyNDg2OyYjMTI0NzM7JiMxMjQ4ODs8L3RleHQ+PHRleHQgZmlsbD0iIzAwMDAwMCIgZm9udC1mYW1pbHk9IlZlcmRhbmEiIGZvbnQtc2l6ZT0iMTQiIGxlbmd0aEFkanVzdD0ic3BhY2luZyIgdGV4dExlbmd0aD0iNTIuOTIzNiIgeD0iMTA0IiB5PSIxOTguODgyIj4oJiMyMDAxMzsmIzMxMjQzOyYjMjQyMzA7KTwvdGV4dD48L2c+PCEtLWVudGl0eSB1bml0LS0+PGcgY2xhc3M9ImVudGl0eSIgZGF0YS1xdWFsaWZpZWQtbmFtZT0iLi4uLi4uLi4udW5pdCIgZGF0YS1zb3VyY2UtbGluZT0iNiIgaWQ9ImVudDAwMDUiPjxyZWN0IGZpbGw9IiNGRkZGRkYiIGhlaWdodD0iNTIuNTkzOCIgcng9IjIuNSIgcnk9IjIuNSIgc3R5bGU9InN0cm9rZTojMDAwMDAwO3N0cm9rZS13aWR0aDoxOyIgd2lkdGg9IjIyMi42MzAxIiB4PSIyNy42OCIgeT0iMjcyLjE5Ii8+PHRleHQgZmlsbD0iIzAwMDAwMCIgZm9udC1mYW1pbHk9IlZlcmRhbmEiIGZvbnQtc2l6ZT0iMTQiIGxlbmd0aEFkanVzdD0ic3BhY2luZyIgdGV4dExlbmd0aD0iMjAyLjYzMDEiIHg9IjM3LjY4IiB5PSIyOTUuMTg1MSI+JiMyMTMzNjsmIzIwMzA3OyYjMTI0ODY7JiMxMjQ3MzsmIzEyNDg4OyArICYjMTI1MDM7JiMxMjUyNTsmIzEyNDk3OyYjMTI0ODY7JiMxMjQ1MTsmIzEyNDg2OyYjMTI0NzM7JiMxMjQ4ODs8L3RleHQ+PHRleHQgZmlsbD0iIzAwMDAwMCIgZm9udC1mYW1pbHk9IlZlcmRhbmEiIGZvbnQtc2l6ZT0iMTQiIGxlbmd0aEFkanVzdD0ic3BhY2luZyIgdGV4dExlbmd0aD0iMzguOTIzNyIgeD0iMzcuNjgiIHk9IjMxMS40ODIiPigmIzIyODEwOyYjMjU5Njg7KTwvdGV4dD48L2c+PGcgY2xhc3M9ImVudGl0eSIgZGF0YS1xdWFsaWZpZWQtbmFtZT0iR01OOCIgZGF0YS1zb3VyY2UtbGluZT0iMTMiIGlkPSJlbnQwMDA5Ij48cGF0aCBkPSJNMjg1LjI4LDI3OC4zNSBMMjg1LjI4LDI5NC40OCBMMjUwLjU2LDI5OC40OCBMMjg1LjI4LDMwMi40OCBMMjg1LjI4LDMxOC42MTU2IEEwLDAgMCAwIDAgMjg1LjI4LDMxOC42MTU2IEw0NjguNzI5NCwzMTguNjE1NiBBMCwwIDAgMCAwIDQ2OC43Mjk0LDMxOC42MTU2IEw0NjguNzI5NCwyODguMzUgTDQ1OC43Mjk0LDI3OC4zNSBMMjg1LjI4LDI3OC4zNSBBMCwwIDAgMCAwIDI4NS4yOCwyNzguMzUiIGZpbGw9IiNGRkZGRkYiIHN0eWxlPSJzdHJva2U6IzAwMDAwMDtzdHJva2Utd2lkdGg6MTsiLz48cGF0aCBkPSJNNDU4LjcyOTQsMjc4LjM1IEw0NTguNzI5NCwyODguMzUgTDQ2OC43Mjk0LDI4OC4zNSBMNDU4LjcyOTQsMjc4LjM1IiBmaWxsPSIjRkZGRkZGIiBzdHlsZT0ic3Ryb2tlOiMwMDAwMDA7c3Ryb2tlLXdpZHRoOjE7Ii8+PHRleHQgZmlsbD0iIzAwMDAwMCIgZm9udC1mYW1pbHk9IlZlcmRhbmEiIGZvbnQtc2l6ZT0iMTMiIGxlbmd0aEFkanVzdD0ic3BhY2luZyIgdGV4dExlbmd0aD0iMTYyLjQ0OTQiIHg9IjI5MS4yOCIgeT0iMjk1LjQxNjkiPkZQICYjMTIzOTE7JiMxMjM5OTsmIzMyMDIwOyYjMzE4ODM7JiMzODMwNjsmIzI1OTY4OyYjMTIzNjQ7JiMyMjgxMDsmIzEyMzU2OyYjMTIzODM7JiMxMjQxNzs8L3RleHQ+PHRleHQgZmlsbD0iIzAwMDAwMCIgZm9udC1mYW1pbHk9IlZlcmRhbmEiIGZvbnQtc2l6ZT0iMTMiIGxlbmd0aEFkanVzdD0ic3BhY2luZyIgdGV4dExlbmd0aD0iMTU2LjAwMDIiIHg9IjI5MS4yOCIgeT0iMzEwLjU0OTciPiYjMjEzMzY7JiMyMDMwNzsmIzEyNDg2OyYjMTI0NzM7JiMxMjQ4ODsmIzEyMzY0OyYjMzg3NTA7JiMyNDEyMDsmIzEyMzk1OyYjMjExNzc7JiMyNjUyNDsmIzMwMzQwOzwvdGV4dD48L2c+PCEtLWxpbmsgZTJlIHRvIGludGVncmF0aW9uLS0+PCEtLWxpbmsgaW50ZWdyYXRpb24gdG8gdW5pdC0tPjw/cGxhbnR1bWwtc3JjIE5PeEJJV0QxNDROdF9ITmJoMUo5OWx5R3IteExuVTJxQ21zbkhpT001eTU1ZnVENGVzMG1GV1lRVzhlRjkySUFtYUptUW9nVDhOelhjeTNHb1F3ZUVoVkVOUDhIdC1NbUxfTzVDZlJtUlViWk1FUldhSndjd2YxcWROSUJ6MWxmQmNiRC1pSTNZZWtMWVlOOHFLclNEZUZjLTZnbXVlNl8zeHA4TkpKeF9aME5USFNVZlJ0aWpNNS1kY1V5R0NkM245U1lIWlRkcGN6N2x2VHYzYlFqeThQcVp0SHBrZG9TeXAtclNfeTEyaWNFNkJDemVCMEhZSTNXazFONFhyWU9LcGRwOFpSem0zMk03MThISFhCWWRUYmtSSHI4bFAzZ1ByLWp4QkNua053bUxiOWRMYS1nSGdmQkxTS01ZamxwdkJ2WnFmSktrcGFUWlpqdE1SbDZFMFJtQl9XMz8+PC9nPjwvc3ZnPg==" class="uml" alt="uml diagram" title="" /></p>
<hr />
<h2 id="_1">まとめ<a class="headerlink" href="#_1" title="Permanent link">&para;</a></h2>
<h3 id="part-vi_1">Part VI で学んだこと<a class="headerlink" href="#part-vi_1" title="Permanent link">&para;</a></h3>
<p><img src="data:image/svg+xml;base64,PD9wbGFudHVtbCAxLjIwMjYuMT8+PHN2ZyB4bWxucz0iaHR0cDovL3d3dy53My5vcmcvMjAwMC9zdmciIHhtbG5zOnhsaW5rPSJodHRwOi8vd3d3LnczLm9yZy8xOTk5L3hsaW5rIiBjb250ZW50U3R5bGVUeXBlPSJ0ZXh0L2NzcyIgZGF0YS1kaWFncmFtLXR5cGU9IkRFU0NSSVBUSU9OIiBoZWlnaHQ9IjM2MXB4IiBwcmVzZXJ2ZUFzcGVjdFJhdGlvPSJub25lIiBzdHlsZT0id2lkdGg6OTE0cHg7aGVpZ2h0OjM2MXB4O2JhY2tncm91bmQ6I0ZGRkZGRjsiIHZlcnNpb249IjEuMSIgdmlld0JveD0iMCAwIDkxNCAzNjEiIHdpZHRoPSI5MTRweCIgem9vbUFuZFBhbj0ibWFnbmlmeSI+PGRlZnMvPjxnPjwhLS1jbHVzdGVyIFBhcnQgVkk6ID8/Pz8/Pz8/Pz8/Py0tPjxnIGNsYXNzPSJjbHVzdGVyIiBkYXRhLXF1YWxpZmllZC1uYW1lPSJQYXJ0IFZJLiAuLi4uLi4uLi4uLi4iIGRhdGEtc291cmNlLWxpbmU9IjMiIGlkPSJlbnQwMDAyIj48cmVjdCBmaWxsPSIjRkZGRkZGIiBoZWlnaHQ9IjM0My44OSIgcng9IjIuNSIgcnk9IjIuNSIgc3R5bGU9InN0cm9rZTojMDAwMDAwO3N0cm9rZS13aWR0aDoxOyIgd2lkdGg9Ijg5NiIgeD0iMTIiIHk9IjEyIi8+PHRleHQgZmlsbD0iIzAwMDAwMCIgZm9udC1mYW1pbHk9IlZlcmRhbmEiIGZvbnQtc2l6ZT0iMTQiIGZvbnQtd2VpZ2h0PSJib2xkIiBsZW5ndGhBZGp1c3Q9InNwYWNpbmciIHRleHRMZW5ndGg9IjIzMi42OTQ2IiB4PSIzNDMuNjUyNyIgeT0iMjYuOTk1MSI+UGFydCBWSTogJiMyMzQ1NTsmIzM2MzQxOyYjMzAzNDA7JiMxMjM5NDsmIzEyNDUwOyYjMTI1MDM7JiMxMjUyMjsmIzEyNDY1OyYjMTI1NDA7JiMxMjQ3MTsmIzEyNTE5OyYjMTI1MzE7PC90ZXh0PjwvZz48IS0tY2x1c3RlciBjaDExLS0+PGcgY2xhc3M9ImNsdXN0ZXIiIGRhdGEtcXVhbGlmaWVkLW5hbWU9IlBhcnQgVkkuIC4uLi4uLi4uLi4uLi5jaDExIiBkYXRhLXNvdXJjZS1saW5lPSI0IiBpZD0iZW50MDAwMyI+PHJlY3QgZmlsbD0iI0ZGRkZGRiIgaGVpZ2h0PSIxNzguNTkiIHJ4PSIyLjUiIHJ5PSIyLjUiIHN0eWxlPSJzdHJva2U6IzAwMDAwMDtzdHJva2Utd2lkdGg6MTsiIHdpZHRoPSIzOTYiIHg9IjQ0IiB5PSI2MyIvPjx0ZXh0IGZpbGw9IiMwMDAwMDAiIGZvbnQtZmFtaWx5PSJWZXJkYW5hIiBmb250LXNpemU9IjE0IiBmb250LXdlaWdodD0iYm9sZCIgbGVuZ3RoQWRqdXN0PSJzcGFjaW5nIiB0ZXh0TGVuZ3RoPSI0Ny40ODIzIiB4PSIyMTguMjU4OSIgeT0iNzcuOTk1MSI+JiMzMTUzMjsxMSYjMzE0NTY7PC90ZXh0PjwvZz48IS0tY2x1c3RlciBjaDEyLS0+PGcgY2xhc3M9ImNsdXN0ZXIiIGRhdGEtcXVhbGlmaWVkLW5hbWU9IlBhcnQgVkkuIC4uLi4uLi4uLi4uLi5jaDEyIiBkYXRhLXNvdXJjZS1saW5lPSIxMSIgaWQ9ImVudDAwMDgiPjxyZWN0IGZpbGw9IiNGRkZGRkYiIGhlaWdodD0iMTcxLjU5IiByeD0iMi41IiByeT0iMi41IiBzdHlsZT0ic3Ryb2tlOiMwMDAwMDA7c3Ryb2tlLXdpZHRoOjE7IiB3aWR0aD0iMzk2IiB4PSI0ODAiIHk9IjE1Mi4zIi8+PHRleHQgZmlsbD0iIzAwMDAwMCIgZm9udC1mYW1pbHk9IlZlcmRhbmEiIGZvbnQtc2l6ZT0iMTQiIGZvbnQtd2VpZ2h0PSJib2xkIiBsZW5ndGhBZGp1c3Q9InNwYWNpbmciIHRleHRMZW5ndGg9IjQ3LjQ4MjMiIHg9IjY1NC4yNTg5IiB5PSIxNjcuMjk1MSI+JiMzMTUzMjsxMiYjMzE0NTY7PC90ZXh0PjwvZz48IS0tZW50aXR5ID8/Pz8/Pz8/Py0tPjxnIGNsYXNzPSJlbnRpdHkiIGRhdGEtcXVhbGlmaWVkLW5hbWU9IlBhcnQgVkkuIC4uLi4uLi4uLi4uLi5jaDExLi4uLi4uLi4uLiIgZGF0YS1zb3VyY2UtbGluZT0iNSIgaWQ9ImVudDAwMDQiPjxyZWN0IGZpbGw9IiNGRkZGRkYiIGhlaWdodD0iMjIuMjk2OSIgcng9IjIuNSIgcnk9IjIuNSIgc3R5bGU9InN0cm9rZTojMDAwMDAwO3N0cm9rZS13aWR0aDoxOyIgd2lkdGg9IjE0NS45OTk1IiB4PSI2OCIgeT0iMTA2Ii8+PHRleHQgZmlsbD0iIzAwMDAwMCIgZm9udC1mYW1pbHk9IlZlcmRhbmEiIGZvbnQtc2l6ZT0iMTQiIGxlbmd0aEFkanVzdD0ic3BhY2luZyIgdGV4dExlbmd0aD0iMTI1Ljk5OTUiIHg9Ijc4IiB5PSIxMjEuOTk1MSI+JiMxMjQ4OTsmIzEyNTEzOyYjMTI0NTI7JiMxMjUzMTsmIzEyNTE0OyYjMTI0ODc7JiMxMjUyMzsmIzM1MzczOyYjMzUzMzY7PC90ZXh0PjwvZz48IS0tZW50aXR5IERhdGFBY2Nlc3MgPz8/LS0+PGcgY2xhc3M9ImVudGl0eSIgZGF0YS1xdWFsaWZpZWQtbmFtZT0iUGFydCBWSS4gLi4uLi4uLi4uLi4uLmNoMTEuRGF0YUFjY2VzcyAuLi4iIGRhdGEtc291cmNlLWxpbmU9IjYiIGlkPSJlbnQwMDA1Ij48cmVjdCBmaWxsPSIjRkZGRkZGIiBoZWlnaHQ9IjIyLjI5NjkiIHJ4PSIyLjUiIHJ5PSIyLjUiIHN0eWxlPSJzdHJva2U6IzAwMDAwMDtzdHJva2Utd2lkdGg6MTsiIHdpZHRoPSIxNDguMDUwNiIgeD0iMjQ4Ljk3IiB5PSIxMDYiLz48dGV4dCBmaWxsPSIjMDAwMDAwIiBmb250LWZhbWlseT0iVmVyZGFuYSIgZm9udC1zaXplPSIxNCIgbGVuZ3RoQWRqdXN0PSJzcGFjaW5nIiB0ZXh0TGVuZ3RoPSIxMjguMDUwNiIgeD0iMjU4Ljk3IiB5PSIxMjEuOTk1MSI+RGF0YUFjY2VzcyAmIzI1Mjc3OyYjMzU5Mzc7JiMyMTI3MDs8L3RleHQ+PC9nPjwhLS1lbnRpdHkgUmVzb3VyY2UgPz8tLT48ZyBjbGFzcz0iZW50aXR5IiBkYXRhLXF1YWxpZmllZC1uYW1lPSJQYXJ0IFZJLiAuLi4uLi4uLi4uLi4uY2gxMS5SZXNvdXJjZSAuLiIgZGF0YS1zb3VyY2UtbGluZT0iNyIgaWQ9ImVudDAwMDYiPjxyZWN0IGZpbGw9IiNGRkZGRkYiIGhlaWdodD0iMjIuMjk2OSIgcng9IjIuNSIgcnk9IjIuNSIgc3R5bGU9InN0cm9rZTojMDAwMDAwO3N0cm9rZS13aWR0aDoxOyIgd2lkdGg9IjExNy41ODk3IiB4PSI4Mi4yMSIgeT0iMTk1LjMiLz48dGV4dCBmaWxsPSIjMDAwMDAwIiBmb250LWZhbWlseT0iVmVyZGFuYSIgZm9udC1zaXplPSIxNCIgbGVuZ3RoQWRqdXN0PSJzcGFjaW5nIiB0ZXh0TGVuZ3RoPSI5Ny41ODk3IiB4PSI5Mi4yMSIgeT0iMjExLjI5NTEiPlJlc291cmNlICYjMzE2NDk7JiMyOTcwMjs8L3RleHQ+PC9nPjwhLS1lbnRpdHkgPz8/Pz8/Py0tPjxnIGNsYXNzPSJlbnRpdHkiIGRhdGEtcXVhbGlmaWVkLW5hbWU9IlBhcnQgVkkuIC4uLi4uLi4uLi4uLi5jaDExLi4uLi4uLi4iIGRhdGEtc291cmNlLWxpbmU9IjgiIGlkPSJlbnQwMDA3Ij48cmVjdCBmaWxsPSIjRkZGRkZGIiBoZWlnaHQ9IjIyLjI5NjkiIHJ4PSIyLjUiIHJ5PSIyLjUiIHN0eWxlPSJzdHJva2U6IzAwMDAwMDtzdHJva2Utd2lkdGg6MTsiIHdpZHRoPSIxMTcuOTk5NiIgeD0iMjM1IiB5PSIxOTUuMyIvPjx0ZXh0IGZpbGw9IiMwMDAwMDAiIGZvbnQtZmFtaWx5PSJWZXJkYW5hIiBmb250LXNpemU9IjE0IiBsZW5ndGhBZGp1c3Q9InNwYWNpbmciIHRleHRMZW5ndGg9Ijk3Ljk5OTYiIHg9IjI0NSIgeT0iMjExLjI5NTEiPiYjMTI0NjE7JiMxMjUxNTsmIzEyNDgzOyYjMTI0NzE7JiMxMjUxNzsmIzIzNDU1OyYjMzUwMTM7PC90ZXh0PjwvZz48IS0tZW50aXR5IFNlYXJjaFJlcG9ydC0tPjxnIGNsYXNzPSJlbnRpdHkiIGRhdGEtcXVhbGlmaWVkLW5hbWU9IlBhcnQgVkkuIC4uLi4uLi4uLi4uLi5jaDEyLlNlYXJjaFJlcG9ydCIgZGF0YS1zb3VyY2UtbGluZT0iMTIiIGlkPSJlbnQwMDA5Ij48cmVjdCBmaWxsPSIjRkZGRkZGIiBoZWlnaHQ9IjIyLjI5NjkiIHJ4PSIyLjUiIHJ5PSIyLjUiIHN0eWxlPSJzdHJva2U6IzAwMDAwMDtzdHJva2Utd2lkdGg6MTsiIHdpZHRoPSIxMTUuNDQzNCIgeD0iNTA0LjI4IiB5PSIxOTUuMyIvPjx0ZXh0IGZpbGw9IiMwMDAwMDAiIGZvbnQtZmFtaWx5PSJWZXJkYW5hIiBmb250LXNpemU9IjE0IiBsZW5ndGhBZGp1c3Q9InNwYWNpbmciIHRleHRMZW5ndGg9Ijk1LjQ0MzQiIHg9IjUxNC4yOCIgeT0iMjExLjI5NTEiPlNlYXJjaFJlcG9ydDwvdGV4dD48L2c+PCEtLWVudGl0eSBUZXN0RGF0YUFjY2VzcyA/Pz8tLT48ZyBjbGFzcz0iZW50aXR5IiBkYXRhLXF1YWxpZmllZC1uYW1lPSJQYXJ0IFZJLiAuLi4uLi4uLi4uLi4uY2gxMi5UZXN0RGF0YUFjY2VzcyAuLi4iIGRhdGEtc291cmNlLWxpbmU9IjEzIiBpZD0iZW50MDAxMCI+PHJlY3QgZmlsbD0iI0ZGRkZGRiIgaGVpZ2h0PSIyMi4yOTY5IiByeD0iMi41IiByeT0iMi41IiBzdHlsZT0ic3Ryb2tlOiMwMDAwMDA7c3Ryb2tlLXdpZHRoOjE7IiB3aWR0aD0iMTc3Ljk5ODgiIHg9IjY1NSIgeT0iMTk1LjMiLz48dGV4dCBmaWxsPSIjMDAwMDAwIiBmb250LWZhbWlseT0iVmVyZGFuYSIgZm9udC1zaXplPSIxNCIgbGVuZ3RoQWRqdXN0PSJzcGFjaW5nIiB0ZXh0TGVuZ3RoPSIxNTcuOTk4OCIgeD0iNjY1IiB5PSIyMTEuMjk1MSI+VGVzdERhdGFBY2Nlc3MgJiMxMjQ3MzsmIzEyNDc5OyYjMTI1MDI7PC90ZXh0PjwvZz48IS0tZW50aXR5ID8/Pz8/Pz8/Pz8/LS0+PGcgY2xhc3M9ImVudGl0eSIgZGF0YS1xdWFsaWZpZWQtbmFtZT0iUGFydCBWSS4gLi4uLi4uLi4uLi4uLmNoMTIuLi4uLi4uLi4uLi4iIGRhdGEtc291cmNlLWxpbmU9IjE0IiBpZD0iZW50MDAxMSI+PHJlY3QgZmlsbD0iI0ZGRkZGRiIgaGVpZ2h0PSIyMi4yOTY5IiByeD0iMi41IiByeT0iMi41IiBzdHlsZT0ic3Ryb2tlOiMwMDAwMDA7c3Ryb2tlLXdpZHRoOjE7IiB3aWR0aD0iMTczLjk5OTMiIHg9IjUwNCIgeT0iMjc3LjU5Ii8+PHRleHQgZmlsbD0iIzAwMDAwMCIgZm9udC1mYW1pbHk9IlZlcmRhbmEiIGZvbnQtc2l6ZT0iMTQiIGxlbmd0aEFkanVzdD0ic3BhY2luZyIgdGV4dExlbmd0aD0iMTUzLjk5OTMiIHg9IjUxNCIgeT0iMjkzLjU4NTEiPiYjMTI1MDM7JiMxMjUyNTsmIzEyNDk3OyYjMTI0ODY7JiMxMjQ1MTsmIzEyNTA1OyYjMTI1NDA7JiMxMjQ3MzsmIzEyNDg2OyYjMTI0NzM7JiMxMjQ4ODs8L3RleHQ+PC9nPjwhLS1lbnRpdHkgPz8/Pz8tLT48ZyBjbGFzcz0iZW50aXR5IiBkYXRhLXF1YWxpZmllZC1uYW1lPSJQYXJ0IFZJLiAuLi4uLi4uLi4uLi4uY2gxMi4uLi4uLiIgZGF0YS1zb3VyY2UtbGluZT0iMTUiIGlkPSJlbnQwMDEyIj48cmVjdCBmaWxsPSIjRkZGRkZGIiBoZWlnaHQ9IjIyLjI5NjkiIHJ4PSIyLjUiIHJ5PSIyLjUiIHN0eWxlPSJzdHJva2U6IzAwMDAwMDtzdHJva2Utd2lkdGg6MTsiIHdpZHRoPSI4OS45OTk3IiB4PSI3MTMiIHk9IjI3Ny41OSIvPjx0ZXh0IGZpbGw9IiMwMDAwMDAiIGZvbnQtZmFtaWx5PSJWZXJkYW5hIiBmb250LXNpemU9IjE0IiBsZW5ndGhBZGp1c3Q9InNwYWNpbmciIHRleHRMZW5ndGg9IjY5Ljk5OTciIHg9IjcyMyIgeT0iMjkzLjU4NTEiPiYjMzIxMTM7JiMyMTUxMjsmIzEyNDg2OyYjMTI0NzM7JiMxMjQ4ODs8L3RleHQ+PC9nPjwhLS1saW5rIGNoMTEgdG8gY2gxMi0tPjxnIGNsYXNzPSJsaW5rIiBkYXRhLWVudGl0eS0xPSJlbnQwMDAzIiBkYXRhLWVudGl0eS0yPSJlbnQwMDA4IiBkYXRhLWxpbmstdHlwZT0iZGVwZW5kZW5jeSIgZGF0YS1zb3VyY2UtbGluZT0iMTkiIGlkPSJsbmsxMyI+PHBhdGggZD0iTTQ0MC4yMjU5LDExOC4yMzQ3IEM0NDEuMTkzMiwxMTguMjQ1MyA0NDIuMjQwNCwxMTguMjU2OSA0NDMuMzY0NiwxMTguMjY5NiBDNDQ1LjYxMjksMTE4LjI5NSA0NDguMTY5MSwxMTguMzI0NSA0NTEuMDA5OSwxMTguMzU4NSBDNDYyLjM3MzMsMTE4LjQ5NDYgNDc4LjI5MSwxMTguNzAxNiA0OTcuMjc1OCwxMTguOTkzMyBDNTM1LjI0NTMsMTE5LjU3NjYgNTg1LjQ4MzEsMTIwLjQ5ODEgNjM2LjA5MTMsMTIxLjg2NjIgQzczNy4zMDc1LDEyNC42MDI1IDg0MC4wMDUsMTI5LjEyNSA4NDksMTM2LjMgQzg1Mi4wMTc1LDEzOC43MDUgODU0LjU4MjgsMTQxLjU0MTQgODU2Ljc2MTIsMTQ0LjY2OTUgQzg1Ny44NTA0LDE0Ni4yMzM1IDg1OC44NDI5LDE0Ny44NzA1IDg1OS43NDY4LDE0OS41NjI4IEM4NjAuMTk4NywxNTAuNDA5IDg1OC4wODE2LDE0NS44MzY1IDg1OC40OTAzLDE0Ni43MDgyIiBmaWxsPSJub25lIiBpZD0iY2gxMS10by1jaDEyIiBzdHlsZT0ic3Ryb2tlOiMwMDAwMDA7c3Ryb2tlLXdpZHRoOjE7Ii8+PHBvbHlnb24gZmlsbD0iIzAwMDAwMCIgcG9pbnRzPSI4NjEuMDM3MiwxNTIuMTQwOCw4NjAuODM4NiwxNDIuMjk0LDg1OC45MTQ4LDE0Ny42MTM3LDg1My41OTUxLDE0NS42ODk5LDg2MS4wMzcyLDE1Mi4xNDA4IiBzdHlsZT0ic3Ryb2tlOiMwMDAwMDA7c3Ryb2tlLXdpZHRoOjE7Ii8+PC9nPjw/cGxhbnR1bWwtc3JjIE5QMnpJV0QxNENWeFV1ZnItbklOcWE4R1JFbWFZbHNvQmZ1R2F4MnhnSUg1VFpINmlPWURlZXNVS0dwYzBtdTk4TTNtT09QcHhwN1NCRHZuczBwcEZSX3ZSLVg4ZDBoSWdoRUpIWDE4bUpMaDdEUzVlTmpDUWRBdWtxZElzTEVzY0RsN1Mtbi1lN2IxazRUbUplQm1YTVExeTh4bUlTYlBVVFBFOWM1ZW55LUtDNEx1NThRa3A5YXk4WEpYMlk1NnktZzY0RG9vSXVIbkRmZmNlcHh6UXpiWGNjcnBCZkdZRnpVaEI4ZEpjeGt5TFhFZ3NQUFM0M2tCeFEyTmZ6NUM0T084dTg3VXJpSjMybmZxV2x6R3JIOUtqTzNRNXFwb2cyUFFKUWRwYkdUMndIODljWU1RUnVJMm5DbFdoanVZekQydXNtelVad0tGZEl0VWlWQ2E3VkhCd1N3UW91aklnTW52YTV5MD8+PC9nPjwvc3ZnPg==" class="uml" alt="uml diagram" title="" /></p>
<h3 id="_2">キーポイント<a class="headerlink" href="#_2" title="Permanent link">&para;</a></h3>
<ol>
<li><strong>record と sealed interface</strong>: Java 17 の機能で Scala の case class と ADT を表現</li>
<li><strong>DataAccess インターフェース</strong>: 外部依存を抽象化してテスト可能に</li>
<li><strong>Resource</strong>: acquire/release パターンで安全なリソース管理</li>
<li><strong>guarantee</strong>: finally 的なセマンティクスを IO に追加</li>
<li><strong>attempt</strong>: 例外を Either に変換してエラーを値として扱う</li>
<li><strong>CachedDataAccess</strong>: Ref を使用したスレッドセーフなキャッシュ</li>
<li><strong>TestDataAccess</strong>: Builder パターンでテストスタブを柔軟に作成</li>
<li><strong>プロパティベーステスト</strong>: @RepeatedTest とランダム生成で不変条件を検証</li>
</ol>
<h3 id="_3">学習の総括<a class="headerlink" href="#_3" title="Permanent link">&para;</a></h3>
<p><img src="data:image/svg+xml;base64,PD9wbGFudHVtbCAxLjIwMjYuMT8+PHN2ZyB4bWxucz0iaHR0cDovL3d3dy53My5vcmcvMjAwMC9zdmciIHhtbG5zOnhsaW5rPSJodHRwOi8vd3d3LnczLm9yZy8xOTk5L3hsaW5rIiBjb250ZW50U3R5bGVUeXBlPSJ0ZXh0L2NzcyIgZGF0YS1kaWFncmFtLXR5cGU9IkRFU0NSSVBUSU9OIiBoZWlnaHQ9IjEwN3B4IiBwcmVzZXJ2ZUFzcGVjdFJhdGlvPSJub25lIiBzdHlsZT0id2lkdGg6OTA0cHg7aGVpZ2h0OjEwN3B4O2JhY2tncm91bmQ6I0ZGRkZGRjsiIHZlcnNpb249IjEuMSIgdmlld0JveD0iMCAwIDkwNCAxMDciIHdpZHRoPSI5MDRweCIgem9vbUFuZFBhbj0ibWFnbmlmeSI+PGRlZnMvPjxnPjwhLS1jbHVzdGVyIEZQID8/Pz8/LS0+PGcgY2xhc3M9ImNsdXN0ZXIiIGRhdGEtcXVhbGlmaWVkLW5hbWU9IkZQIC4uLi4uIiBkYXRhLXNvdXJjZS1saW5lPSI0IiBpZD0iZW50MDAwMiI+PHJlY3QgZmlsbD0iI0ZGRkZGRiIgaGVpZ2h0PSI4OSIgcng9IjIuNSIgcnk9IjIuNSIgc3R5bGU9InN0cm9rZTojMDAwMDAwO3N0cm9rZS13aWR0aDoxOyIgd2lkdGg9Ijg4Ni4wOSIgeD0iMTIiIHk9IjEyIi8+PHRleHQgZmlsbD0iIzAwMDAwMCIgZm9udC1mYW1pbHk9IlZlcmRhbmEiIGZvbnQtc2l6ZT0iMTQiIGZvbnQtd2VpZ2h0PSJib2xkIiBsZW5ndGhBZGp1c3Q9InNwYWNpbmciIHRleHRMZW5ndGg9Ijk0LjY5NzkiIHg9IjQwNy42OTYiIHk9IjI2Ljk5NTEiPkZQICYjMTIzOTg7JiMyMzM5ODsmIzMyNzIyOyYjMTI0OTc7JiMxMjQ3Mzs8L3RleHQ+PC9nPjwhLS1lbnRpdHkgcDEtLT48ZyBjbGFzcz0iZW50aXR5IiBkYXRhLXF1YWxpZmllZC1uYW1lPSJGUCAuLi4uLi5wMSIgZGF0YS1zb3VyY2UtbGluZT0iNSIgaWQ9ImVudDAwMDMiPjxyZWN0IGZpbGw9IiNGRkZGRkYiIGhlaWdodD0iMzguNTkzOCIgcng9IjIuNSIgcnk9IjIuNSIgc3R5bGU9InN0cm9rZTojMDAwMDAwO3N0cm9rZS13aWR0aDoxOyIgd2lkdGg9IjU2Ljg0NTciIHg9IjI4IiB5PSI0Ni43Ii8+PHRleHQgZmlsbD0iIzAwMDAwMCIgZm9udC1mYW1pbHk9IlZlcmRhbmEiIGZvbnQtc2l6ZT0iMTQiIGxlbmd0aEFkanVzdD0ic3BhY2luZyIgdGV4dExlbmd0aD0iMzYuODQ1NyIgeD0iMzgiIHk9IjYyLjY5NTEiPlBhcnQgSTwvdGV4dD48dGV4dCBmaWxsPSIjMDAwMDAwIiBmb250LWZhbWlseT0iVmVyZGFuYSIgZm9udC1zaXplPSIxNCIgbGVuZ3RoQWRqdXN0PSJzcGFjaW5nIiB0ZXh0TGVuZ3RoPSIyNy45OTk5IiB4PSIzOCIgeT0iNzguOTkyIj4mIzIyNTIyOyYjMzA5OTA7PC90ZXh0PjwvZz48IS0tZW50aXR5IHAyLS0+PGcgY2xhc3M9ImVudGl0eSIgZGF0YS1xdWFsaWZpZWQtbmFtZT0iRlAgLi4uLi4ucDIiIGRhdGEtc291cmNlLWxpbmU9IjYiIGlkPSJlbnQwMDA0Ij48cmVjdCBmaWxsPSIjRkZGRkZGIiBoZWlnaHQ9IjM4LjU5MzgiIHJ4PSIyLjUiIHJ5PSIyLjUiIHN0eWxlPSJzdHJva2U6IzAwMDAwMDtzdHJva2Utd2lkdGg6MTsiIHdpZHRoPSIxNDUuOTk5NSIgeD0iMTQ0Ljg1IiB5PSI0Ni43Ii8+PHRleHQgZmlsbD0iIzAwMDAwMCIgZm9udC1mYW1pbHk9IlZlcmRhbmEiIGZvbnQtc2l6ZT0iMTQiIGxlbmd0aEFkanVzdD0ic3BhY2luZyIgdGV4dExlbmd0aD0iNDAuOTc0NiIgeD0iMTU0Ljg1IiB5PSI2Mi42OTUxIj5QYXJ0IElJPC90ZXh0Pjx0ZXh0IGZpbGw9IiMwMDAwMDAiIGZvbnQtZmFtaWx5PSJWZXJkYW5hIiBmb250LXNpemU9IjE0IiBsZW5ndGhBZGp1c3Q9InNwYWNpbmciIHRleHRMZW5ndGg9IjEyNS45OTk1IiB4PSIxNTQuODUiIHk9Ijc4Ljk5MiI+JiMxMjQ1MjsmIzEyNTExOyYjMTI1MTc7JiMxMjU0MDsmIzEyNDc5OyYjMTI1MDI7JiMxMjUyMzsmIzI1ODA1OyYjMjAzMTY7PC90ZXh0PjwvZz48IS0tZW50aXR5IHAzLS0+PGcgY2xhc3M9ImVudGl0eSIgZGF0YS1xdWFsaWZpZWQtbmFtZT0iRlAgLi4uLi4ucDMiIGRhdGEtc291cmNlLWxpbmU9IjciIGlkPSJlbnQwMDA1Ij48cmVjdCBmaWxsPSIjRkZGRkZGIiBoZWlnaHQ9IjM4LjU5MzgiIHJ4PSIyLjUiIHJ5PSIyLjUiIHN0eWxlPSJzdHJva2U6IzAwMDAwMDtzdHJva2Utd2lkdGg6MTsiIHdpZHRoPSIxMTcuOTk5NiIgeD0iMzUwLjg1IiB5PSI0Ni43Ii8+PHRleHQgZmlsbD0iIzAwMDAwMCIgZm9udC1mYW1pbHk9IlZlcmRhbmEiIGZvbnQtc2l6ZT0iMTQiIGxlbmd0aEFkanVzdD0ic3BhY2luZyIgdGV4dExlbmd0aD0iNDUuMTAzNSIgeD0iMzYwLjg1IiB5PSI2Mi42OTUxIj5QYXJ0IElJSTwvdGV4dD48dGV4dCBmaWxsPSIjMDAwMDAwIiBmb250LWZhbWlseT0iVmVyZGFuYSIgZm9udC1zaXplPSIxNCIgbGVuZ3RoQWRqdXN0PSJzcGFjaW5nIiB0ZXh0TGVuZ3RoPSI5Ny45OTk2IiB4PSIzNjAuODUiIHk9Ijc4Ljk5MiI+JiMyMjQxMTsmIzEyMzk1OyYjMTI0MjQ7JiMxMjQyNzsmIzIzNDMzOyYjMjA4NDA7JiMyNDYxNTs8L3RleHQ+PC9nPjwhLS1lbnRpdHkgcDQtLT48ZyBjbGFzcz0iZW50aXR5IiBkYXRhLXF1YWxpZmllZC1uYW1lPSJGUCAuLi4uLi5wNCIgZGF0YS1zb3VyY2UtbGluZT0iOCIgaWQ9ImVudDAwMDYiPjxyZWN0IGZpbGw9IiNGRkZGRkYiIGhlaWdodD0iMzguNTkzOCIgcng9IjIuNSIgcnk9IjIuNSIgc3R5bGU9InN0cm9rZTojMDAwMDAwO3N0cm9rZS13aWR0aDoxOyIgd2lkdGg9IjkwLjgyNzEiIHg9IjUyOC44NCIgeT0iNDYuNyIvPjx0ZXh0IGZpbGw9IiMwMDAwMDAiIGZvbnQtZmFtaWx5PSJWZXJkYW5hIiBmb250LXNpemU9IjE0IiBsZW5ndGhBZGp1c3Q9InNwYWNpbmciIHRleHRMZW5ndGg9IjQ2LjQyMjkiIHg9IjUzOC44NCIgeT0iNjIuNjk1MSI+UGFydCBJVjwvdGV4dD48dGV4dCBmaWxsPSIjMDAwMDAwIiBmb250LWZhbWlseT0iVmVyZGFuYSIgZm9udC1zaXplPSIxNCIgbGVuZ3RoQWRqdXN0PSJzcGFjaW5nIiB0ZXh0TGVuZ3RoPSI3MC44MjcxIiB4PSI1MzguODQiIHk9Ijc4Ljk5MiI+SU8vU3RyZWFtPC90ZXh0PjwvZz48IS0tZW50aXR5IHA1LS0+PGcgY2xhc3M9ImVudGl0eSIgZGF0YS1xdWFsaWZpZWQtbmFtZT0iRlAgLi4uLi4ucDUiIGRhdGEtc291cmNlLWxpbmU9IjkiIGlkPSJlbnQwMDA3Ij48cmVjdCBmaWxsPSIjRkZGRkZGIiBoZWlnaHQ9IjM4LjU5MzgiIHJ4PSIyLjUiIHJ5PSIyLjUiIHN0eWxlPSJzdHJva2U6IzAwMDAwMDtzdHJva2Utd2lkdGg6MTsiIHdpZHRoPSI3NS45OTk4IiB4PSI2NzkuNjciIHk9IjQ2LjciLz48dGV4dCBmaWxsPSIjMDAwMDAwIiBmb250LWZhbWlseT0iVmVyZGFuYSIgZm9udC1zaXplPSIxNCIgbGVuZ3RoQWRqdXN0PSJzcGFjaW5nIiB0ZXh0TGVuZ3RoPSI0Mi4yOTM5IiB4PSI2ODkuNjciIHk9IjYyLjY5NTEiPlBhcnQgVjwvdGV4dD48dGV4dCBmaWxsPSIjMDAwMDAwIiBmb250LWZhbWlseT0iVmVyZGFuYSIgZm9udC1zaXplPSIxNCIgbGVuZ3RoQWRqdXN0PSJzcGFjaW5nIiB0ZXh0TGVuZ3RoPSI1NS45OTk4IiB4PSI2ODkuNjciIHk9Ijc4Ljk5MiI+JiMyMDAwNjsmIzM0ODkyOyYjMjA5NjY7JiMyOTcwMjs8L3RleHQ+PC9nPjwhLS1lbnRpdHkgcDYtLT48ZyBjbGFzcz0iZW50aXR5IiBkYXRhLXF1YWxpZmllZC1uYW1lPSJGUCAuLi4uLi5wNiIgZGF0YS1zb3VyY2UtbGluZT0iMTAiIGlkPSJlbnQwMDA4Ij48cmVjdCBmaWxsPSIjRkZGRkZGIiBoZWlnaHQ9IjM4LjU5MzgiIHJ4PSIyLjUiIHJ5PSIyLjUiIHN0eWxlPSJzdHJva2U6IzAwMDAwMDtzdHJva2Utd2lkdGg6MTsiIHdpZHRoPSI2Ni40MjI5IiB4PSI4MTUuNjciIHk9IjQ2LjciLz48dGV4dCBmaWxsPSIjMDAwMDAwIiBmb250LWZhbWlseT0iVmVyZGFuYSIgZm9udC1zaXplPSIxNCIgbGVuZ3RoQWRqdXN0PSJzcGFjaW5nIiB0ZXh0TGVuZ3RoPSI0Ni40MjI5IiB4PSI4MjUuNjciIHk9IjYyLjY5NTEiPlBhcnQgVkk8L3RleHQ+PHRleHQgZmlsbD0iIzAwMDAwMCIgZm9udC1mYW1pbHk9IlZlcmRhbmEiIGZvbnQtc2l6ZT0iMTQiIGxlbmd0aEFkanVzdD0ic3BhY2luZyIgdGV4dExlbmd0aD0iMjcuOTk5OSIgeD0iODI1LjY3IiB5PSI3OC45OTIiPiYjMjM0NTU7JiMzNjM0MTs8L3RleHQ+PC9nPjwhLS1saW5rIHAxIHRvIHAyLS0+PGcgY2xhc3M9ImxpbmsiIGRhdGEtZW50aXR5LTE9ImVudDAwMDMiIGRhdGEtZW50aXR5LTI9ImVudDAwMDQiIGRhdGEtbGluay10eXBlPSJkZXBlbmRlbmN5IiBkYXRhLXNvdXJjZS1saW5lPSIxMyIgaWQ9ImxuazkiPjxwYXRoIGQ9Ik04NS4xOSw2NiBDMTAxLjcsNjYgMTE3LjQ2LDY2IDEzOC41Myw2NiIgZmlsbD0ibm9uZSIgaWQ9InAxLXRvLXAyIiBzdHlsZT0ic3Ryb2tlOiMwMDAwMDA7c3Ryb2tlLXdpZHRoOjE7Ii8+PHBvbHlnb24gZmlsbD0iIzAwMDAwMCIgcG9pbnRzPSIxNDQuNTMsNjYsMTM1LjUzLDYyLDEzOS41Myw2NiwxMzUuNTMsNzAsMTQ0LjUzLDY2IiBzdHlsZT0ic3Ryb2tlOiMwMDAwMDA7c3Ryb2tlLXdpZHRoOjE7Ii8+PC9nPjwhLS1saW5rIHAyIHRvIHAzLS0+PGcgY2xhc3M9ImxpbmsiIGRhdGEtZW50aXR5LTE9ImVudDAwMDQiIGRhdGEtZW50aXR5LTI9ImVudDAwMDUiIGRhdGEtbGluay10eXBlPSJkZXBlbmRlbmN5IiBkYXRhLXNvdXJjZS1saW5lPSIxNCIgaWQ9ImxuazEwIj48cGF0aCBkPSJNMjkxLjIyLDY2IEMzMTAuODMsNjYgMzI1LjgxLDY2IDM0NC41Myw2NiIgZmlsbD0ibm9uZSIgaWQ9InAyLXRvLXAzIiBzdHlsZT0ic3Ryb2tlOiMwMDAwMDA7c3Ryb2tlLXdpZHRoOjE7Ii8+PHBvbHlnb24gZmlsbD0iIzAwMDAwMCIgcG9pbnRzPSIzNTAuNTMsNjYsMzQxLjUzLDYyLDM0NS41Myw2NiwzNDEuNTMsNzAsMzUwLjUzLDY2IiBzdHlsZT0ic3Ryb2tlOiMwMDAwMDA7c3Ryb2tlLXdpZHRoOjE7Ii8+PC9nPjwhLS1saW5rIHAzIHRvIHA0LS0+PGcgY2xhc3M9ImxpbmsiIGRhdGEtZW50aXR5LTE9ImVudDAwMDUiIGRhdGEtZW50aXR5LTI9ImVudDAwMDYiIGRhdGEtbGluay10eXBlPSJkZXBlbmRlbmN5IiBkYXRhLXNvdXJjZS1saW5lPSIxNSIgaWQ9ImxuazExIj48cGF0aCBkPSJNNDY5LjAyLDY2IEM0ODguNTksNjYgNTA0LjExLDY2IDUyMi40OCw2NiIgZmlsbD0ibm9uZSIgaWQ9InAzLXRvLXA0IiBzdHlsZT0ic3Ryb2tlOiMwMDAwMDA7c3Ryb2tlLXdpZHRoOjE7Ii8+PHBvbHlnb24gZmlsbD0iIzAwMDAwMCIgcG9pbnRzPSI1MjguNDgsNjYsNTE5LjQ4LDYyLDUyMy40OCw2Niw1MTkuNDgsNzAsNTI4LjQ4LDY2IiBzdHlsZT0ic3Ryb2tlOiMwMDAwMDA7c3Ryb2tlLXdpZHRoOjE7Ii8+PC9nPjwhLS1saW5rIHA0IHRvIHA1LS0+PGcgY2xhc3M9ImxpbmsiIGRhdGEtZW50aXR5LTE9ImVudDAwMDYiIGRhdGEtZW50aXR5LTI9ImVudDAwMDciIGRhdGEtbGluay10eXBlPSJkZXBlbmRlbmN5IiBkYXRhLXNvdXJjZS1saW5lPSIxNiIgaWQ9ImxuazEyIj48cGF0aCBkPSJNNjIwLDY2IEM2MzkuMSw2NiA2NTUuMTMsNjYgNjczLjMzLDY2IiBmaWxsPSJub25lIiBpZD0icDQtdG8tcDUiIHN0eWxlPSJzdHJva2U6IzAwMDAwMDtzdHJva2Utd2lkdGg6MTsiLz48cG9seWdvbiBmaWxsPSIjMDAwMDAwIiBwb2ludHM9IjY3OS4zMyw2Niw2NzAuMzMsNjIsNjc0LjMzLDY2LDY3MC4zMyw3MCw2NzkuMzMsNjYiIHN0eWxlPSJzdHJva2U6IzAwMDAwMDtzdHJva2Utd2lkdGg6MTsiLz48L2c+PCEtLWxpbmsgcDUgdG8gcDYtLT48ZyBjbGFzcz0ibGluayIgZGF0YS1lbnRpdHktMT0iZW50MDAwNyIgZGF0YS1lbnRpdHktMj0iZW50MDAwOCIgZGF0YS1saW5rLXR5cGU9ImRlcGVuZGVuY3kiIGRhdGEtc291cmNlLWxpbmU9IjE3IiBpZD0ibG5rMTMiPjxwYXRoIGQ9Ik03NTYuMDUsNjYgQzc3NC44Myw2NiA3OTEuMzcsNjYgODA5LjQyLDY2IiBmaWxsPSJub25lIiBpZD0icDUtdG8tcDYiIHN0eWxlPSJzdHJva2U6IzAwMDAwMDtzdHJva2Utd2lkdGg6MTsiLz48cG9seWdvbiBmaWxsPSIjMDAwMDAwIiBwb2ludHM9IjgxNS40Miw2Niw4MDYuNDIsNjIsODEwLjQyLDY2LDgwNi40Miw3MCw4MTUuNDIsNjYiIHN0eWxlPSJzdHJva2U6IzAwMDAwMDtzdHJva2Utd2lkdGg6MTsiLz48L2c+PD9wbGFudHVtbC1zcmMgTE93eElXRDE1NDN4LU9oaHphNkl0S3JmQVFHbzg1WWI2UDhuTVRYQ1hkNHc0U21DbGVZQTN4MEk1bzVrWEUxc3VXQ2I3dENwc05uNmlhb0p4R3dTU256UmdpVnczNEhDOHF2WVRnWDAzSzE2dFB3MkpZSFBNcUszSmFXMWI3VFoxanZrNHQyT3NPeXFkcHNXa0tWenV5NG5RTEZQMFF6OWZPOTZZemxhRG5fVlVhMkZHNUhCUllySFp6NGFRRHhHX0E2VWVOYjJDcnF5dGlwX2R6cjRoSm5IeDdpUHVOMkEtWEJybzZQTnprbnpTSmZuaUwtQTNyZ3lpUlV6aG9JWlZVVTNKUl9NeS16cS1OZmpCekJ5eGptTE9RYWVoY045eWtsSm9KZXY4S0hLZUxCUEFIdUpES1MtNFJ3Wlc4WjBLS1g0d0FZLTBXMDA/PjwvZz48L3N2Zz4=" class="uml" alt="uml diagram" title="" /></p>
<h3 id="scala">Scala との比較<a class="headerlink" href="#scala" title="Permanent link">&para;</a></h3>
<table>
<thead>
<tr>
<th>概念</th>
<th>Scala (cats-effect)</th>
<th>Java + Vavr</th>
</tr>
</thead>
<tbody>
<tr>
<td>値オブジェクト</td>
<td><code>opaque type LocationId</code></td>
<td><code>record LocationId(String value)</code></td>
</tr>
<tr>
<td>ドメインモデル</td>
<td><code>case class</code></td>
<td><code>record</code></td>
</tr>
<tr>
<td>ADT</td>
<td><code>sealed trait</code></td>
<td><code>sealed interface</code></td>
</tr>
<tr>
<td>リソース管理</td>
<td><code>Resource[IO, A]</code></td>
<td><code>Resource&lt;A&gt;</code> (独自実装)</td>
</tr>
<tr>
<td>キャッシュ</td>
<td><code>Ref[IO, Map[...]]</code></td>
<td><code>Ref&lt;Map&lt;...&gt;&gt;</code></td>
</tr>
<tr>
<td>エラーハンドリング</td>
<td><code>IO[A].attempt</code></td>
<td><code>IO&lt;A&gt;.attempt()</code></td>
</tr>
<tr>
<td>テストスタブ</td>
<td><code>val stub = new DataAccess {...}</code></td>
<td><code>TestDataAccess.builder().build()</code></td>
</tr>
<tr>
<td>プロパティテスト</td>
<td>ScalaCheck <code>Gen[A]</code></td>
<td><code>@RepeatedTest</code> + random generators</td>
</tr>
</tbody>
</table>
<hr />
<h2 id="_4">演習問題<a class="headerlink" href="#_4" title="Permanent link">&para;</a></h2>
<h3 id="1-dataaccess">問題 1: DataAccess の拡張<a class="headerlink" href="#1-dataaccess" title="Permanent link">&para;</a></h3>
<p>以下の要件で <code>DataAccess</code> を拡張してください:
- 新しいメソッド <code>findHotelsNearLocation</code> を追加
- 戻り値は <code>IO&lt;List&lt;Hotel&gt;&gt;</code></p>
<details>
<summary>解答</summary>

<div class="highlight"><pre><span></span><code><span class="kd">public</span><span class="w"> </span><span class="kd">record</span> <span class="nc">Hotel</span><span class="p">(</span><span class="n">String</span><span class="w"> </span><span class="n">name</span><span class="p">,</span><span class="w"> </span><span class="kt">double</span><span class="w"> </span><span class="n">rating</span><span class="p">,</span><span class="w"> </span><span class="n">Location</span><span class="w"> </span><span class="n">location</span><span class="p">)</span><span class="w"> </span><span class="p">{}</span>

<span class="kd">public</span><span class="w"> </span><span class="kd">interface</span> <span class="nc">DataAccess</span><span class="w"> </span><span class="p">{</span>
<span class="w">    </span><span class="c1">// 既存のメソッド...</span>

<span class="w">    </span><span class="n">IO</span><span class="o">&lt;</span><span class="n">List</span><span class="o">&lt;</span><span class="n">Hotel</span><span class="o">&gt;&gt;</span><span class="w"> </span><span class="nf">findHotelsNearLocation</span><span class="p">(</span>
<span class="w">            </span><span class="n">LocationId</span><span class="w"> </span><span class="n">locationId</span><span class="p">,</span>
<span class="w">            </span><span class="kt">int</span><span class="w"> </span><span class="n">limit</span>
<span class="w">    </span><span class="p">);</span>
<span class="p">}</span>

<span class="c1">// TestDataAccess.Builder に追加</span>
<span class="kd">public</span><span class="w"> </span><span class="n">Builder</span><span class="w"> </span><span class="nf">withHotels</span><span class="p">(</span><span class="n">Hotel</span><span class="p">...</span><span class="w"> </span><span class="n">hotels</span><span class="p">)</span><span class="w"> </span><span class="p">{</span>
<span class="w">    </span><span class="k">this</span><span class="p">.</span><span class="na">hotels</span><span class="w"> </span><span class="o">=</span><span class="w"> </span><span class="n">List</span><span class="p">.</span><span class="na">of</span><span class="p">(</span><span class="n">hotels</span><span class="p">);</span>
<span class="w">    </span><span class="k">return</span><span class="w"> </span><span class="k">this</span><span class="p">;</span>
<span class="p">}</span>
</code></pre></div>

</details>

<h3 id="2_1">問題 2: プロパティベーステスト<a class="headerlink" href="#2_1" title="Permanent link">&para;</a></h3>
<p>以下の関数に対するプロパティベーステストを書いてください:</p>
<div class="highlight"><pre><span></span><code><span class="kd">public</span><span class="w"> </span><span class="kd">static</span><span class="w"> </span><span class="n">List</span><span class="o">&lt;</span><span class="n">Location</span><span class="o">&gt;</span><span class="w"> </span><span class="nf">filterPopularLocations</span><span class="p">(</span>
<span class="w">        </span><span class="n">List</span><span class="o">&lt;</span><span class="n">Location</span><span class="o">&gt;</span><span class="w"> </span><span class="n">locations</span><span class="p">,</span>
<span class="w">        </span><span class="kt">int</span><span class="w"> </span><span class="n">minPopulation</span><span class="p">)</span><span class="w"> </span><span class="p">{</span>
<span class="w">    </span><span class="k">return</span><span class="w"> </span><span class="n">locations</span><span class="p">.</span><span class="na">filter</span><span class="p">(</span><span class="n">loc</span><span class="w"> </span><span class="o">-&gt;</span><span class="w"> </span><span class="n">loc</span><span class="p">.</span><span class="na">population</span><span class="p">()</span><span class="w"> </span><span class="o">&gt;=</span><span class="w"> </span><span class="n">minPopulation</span><span class="p">);</span>
<span class="p">}</span>
</code></pre></div>
<details>
<summary>解答</summary>

<div class="highlight"><pre><span></span><code><span class="kd">static</span><span class="w"> </span><span class="n">List</span><span class="o">&lt;</span><span class="n">Location</span><span class="o">&gt;</span><span class="w"> </span><span class="nf">randomLocations</span><span class="p">(</span><span class="kt">int</span><span class="w"> </span><span class="n">maxCount</span><span class="p">)</span><span class="w"> </span><span class="p">{</span>
<span class="w">    </span><span class="kt">int</span><span class="w"> </span><span class="n">count</span><span class="w"> </span><span class="o">=</span><span class="w"> </span><span class="n">random</span><span class="p">.</span><span class="na">nextInt</span><span class="p">(</span><span class="n">maxCount</span><span class="w"> </span><span class="o">+</span><span class="w"> </span><span class="mi">1</span><span class="p">);</span>
<span class="w">    </span><span class="k">return</span><span class="w"> </span><span class="n">List</span><span class="p">.</span><span class="na">range</span><span class="p">(</span><span class="mi">0</span><span class="p">,</span><span class="w"> </span><span class="n">count</span><span class="p">).</span><span class="na">map</span><span class="p">(</span><span class="n">i</span><span class="w"> </span><span class="o">-&gt;</span><span class="w"> </span><span class="n">randomLocation</span><span class="p">());</span>
<span class="p">}</span>

<span class="c1">// プロパティ1: 結果は入力以下の要素数</span>
<span class="nd">@RepeatedTest</span><span class="p">(</span><span class="mi">100</span><span class="p">)</span>
<span class="nd">@DisplayName</span><span class="p">(</span><span class="s">&quot;結果のサイズは入力以下&quot;</span><span class="p">)</span>
<span class="kt">void</span><span class="w"> </span><span class="nf">resultSizeIsLessOrEqual</span><span class="p">()</span><span class="w"> </span><span class="p">{</span>
<span class="w">    </span><span class="n">List</span><span class="o">&lt;</span><span class="n">Location</span><span class="o">&gt;</span><span class="w"> </span><span class="n">locations</span><span class="w"> </span><span class="o">=</span><span class="w"> </span><span class="n">randomLocations</span><span class="p">(</span><span class="mi">20</span><span class="p">);</span>
<span class="w">    </span><span class="kt">int</span><span class="w"> </span><span class="n">minPop</span><span class="w"> </span><span class="o">=</span><span class="w"> </span><span class="n">nonNegativeInt</span><span class="p">(</span><span class="mi">10_000_000</span><span class="p">);</span>

<span class="w">    </span><span class="n">List</span><span class="o">&lt;</span><span class="n">Location</span><span class="o">&gt;</span><span class="w"> </span><span class="n">result</span><span class="w"> </span><span class="o">=</span><span class="w"> </span><span class="n">filterPopularLocations</span><span class="p">(</span><span class="n">locations</span><span class="p">,</span><span class="w"> </span><span class="n">minPop</span><span class="p">);</span>

<span class="w">    </span><span class="n">assertThat</span><span class="p">(</span><span class="n">result</span><span class="p">.</span><span class="na">size</span><span class="p">()).</span><span class="na">isLessThanOrEqualTo</span><span class="p">(</span><span class="n">locations</span><span class="p">.</span><span class="na">size</span><span class="p">());</span>
<span class="p">}</span>

<span class="c1">// プロパティ2: 結果のすべての要素は条件を満たす</span>
<span class="nd">@RepeatedTest</span><span class="p">(</span><span class="mi">100</span><span class="p">)</span>
<span class="nd">@DisplayName</span><span class="p">(</span><span class="s">&quot;すべての結果は最小人口以上&quot;</span><span class="p">)</span>
<span class="kt">void</span><span class="w"> </span><span class="nf">allResultsMeetMinimum</span><span class="p">()</span><span class="w"> </span><span class="p">{</span>
<span class="w">    </span><span class="n">List</span><span class="o">&lt;</span><span class="n">Location</span><span class="o">&gt;</span><span class="w"> </span><span class="n">locations</span><span class="w"> </span><span class="o">=</span><span class="w"> </span><span class="n">randomLocations</span><span class="p">(</span><span class="mi">20</span><span class="p">);</span>
<span class="w">    </span><span class="kt">int</span><span class="w"> </span><span class="n">minPop</span><span class="w"> </span><span class="o">=</span><span class="w"> </span><span class="n">nonNegativeInt</span><span class="p">(</span><span class="mi">10_000_000</span><span class="p">);</span>

<span class="w">    </span><span class="n">List</span><span class="o">&lt;</span><span class="n">Location</span><span class="o">&gt;</span><span class="w"> </span><span class="n">result</span><span class="w"> </span><span class="o">=</span><span class="w"> </span><span class="n">filterPopularLocations</span><span class="p">(</span><span class="n">locations</span><span class="p">,</span><span class="w"> </span><span class="n">minPop</span><span class="p">);</span>

<span class="w">    </span><span class="n">assertThat</span><span class="p">(</span><span class="n">result</span><span class="p">.</span><span class="na">forAll</span><span class="p">(</span><span class="n">loc</span><span class="w"> </span><span class="o">-&gt;</span><span class="w"> </span><span class="n">loc</span><span class="p">.</span><span class="na">population</span><span class="p">()</span><span class="w"> </span><span class="o">&gt;=</span><span class="w"> </span><span class="n">minPop</span><span class="p">)).</span><span class="na">isTrue</span><span class="p">();</span>
<span class="p">}</span>

<span class="c1">// プロパティ3: 条件を満たす要素はすべて結果に含まれる</span>
<span class="nd">@RepeatedTest</span><span class="p">(</span><span class="mi">100</span><span class="p">)</span>
<span class="nd">@DisplayName</span><span class="p">(</span><span class="s">&quot;条件を満たす要素はすべて結果に含まれる&quot;</span><span class="p">)</span>
<span class="kt">void</span><span class="w"> </span><span class="nf">allQualifyingLocationsAreInResult</span><span class="p">()</span><span class="w"> </span><span class="p">{</span>
<span class="w">    </span><span class="n">List</span><span class="o">&lt;</span><span class="n">Location</span><span class="o">&gt;</span><span class="w"> </span><span class="n">locations</span><span class="w"> </span><span class="o">=</span><span class="w"> </span><span class="n">randomLocations</span><span class="p">(</span><span class="mi">20</span><span class="p">);</span>
<span class="w">    </span><span class="kt">int</span><span class="w"> </span><span class="n">minPop</span><span class="w"> </span><span class="o">=</span><span class="w"> </span><span class="n">nonNegativeInt</span><span class="p">(</span><span class="mi">10_000_000</span><span class="p">);</span>

<span class="w">    </span><span class="n">List</span><span class="o">&lt;</span><span class="n">Location</span><span class="o">&gt;</span><span class="w"> </span><span class="n">result</span><span class="w"> </span><span class="o">=</span><span class="w"> </span><span class="n">filterPopularLocations</span><span class="p">(</span><span class="n">locations</span><span class="p">,</span><span class="w"> </span><span class="n">minPop</span><span class="p">);</span>
<span class="w">    </span><span class="n">List</span><span class="o">&lt;</span><span class="n">Location</span><span class="o">&gt;</span><span class="w"> </span><span class="n">expected</span><span class="w"> </span><span class="o">=</span><span class="w"> </span><span class="n">locations</span><span class="p">.</span><span class="na">filter</span><span class="p">(</span><span class="n">loc</span><span class="w"> </span><span class="o">-&gt;</span><span class="w"> </span><span class="n">loc</span><span class="p">.</span><span class="na">population</span><span class="p">()</span><span class="w"> </span><span class="o">&gt;=</span><span class="w"> </span><span class="n">minPop</span><span class="p">);</span>

<span class="w">    </span><span class="n">assertThat</span><span class="p">(</span><span class="n">result</span><span class="p">).</span><span class="na">containsExactlyInAnyOrderElementsOf</span><span class="p">(</span><span class="n">expected</span><span class="p">);</span>
<span class="p">}</span>
</code></pre></div>

</details>

<h3 id="3-resource">問題 3: Resource の実装<a class="headerlink" href="#3-resource" title="Permanent link">&para;</a></h3>
<p>ファイルを安全に読み取る <code>Resource</code> を実装してください。</p>
<details>
<summary>解答</summary>

<div class="highlight"><pre><span></span><code><span class="kd">public</span><span class="w"> </span><span class="kd">static</span><span class="w"> </span><span class="n">Resource</span><span class="o">&lt;</span><span class="n">BufferedReader</span><span class="o">&gt;</span><span class="w"> </span><span class="nf">fileResource</span><span class="p">(</span><span class="n">String</span><span class="w"> </span><span class="n">path</span><span class="p">)</span><span class="w"> </span><span class="p">{</span>
<span class="w">    </span><span class="k">return</span><span class="w"> </span><span class="n">Resource</span><span class="p">.</span><span class="na">fromAutoCloseable</span><span class="p">(</span>
<span class="w">            </span><span class="n">IO</span><span class="p">.</span><span class="na">delay</span><span class="p">(()</span><span class="w"> </span><span class="o">-&gt;</span><span class="w"> </span><span class="k">new</span><span class="w"> </span><span class="n">BufferedReader</span><span class="p">(</span><span class="k">new</span><span class="w"> </span><span class="n">FileReader</span><span class="p">(</span><span class="n">path</span><span class="p">)))</span>
<span class="w">    </span><span class="p">);</span>
<span class="p">}</span>

<span class="kd">public</span><span class="w"> </span><span class="kd">static</span><span class="w"> </span><span class="n">IO</span><span class="o">&lt;</span><span class="n">List</span><span class="o">&lt;</span><span class="n">String</span><span class="o">&gt;&gt;</span><span class="w"> </span><span class="nf">readLines</span><span class="p">(</span><span class="n">String</span><span class="w"> </span><span class="n">path</span><span class="p">)</span><span class="w"> </span><span class="p">{</span>
<span class="w">    </span><span class="k">return</span><span class="w"> </span><span class="n">fileResource</span><span class="p">(</span><span class="n">path</span><span class="p">).</span><span class="na">use</span><span class="p">(</span><span class="n">reader</span><span class="w"> </span><span class="o">-&gt;</span>
<span class="w">            </span><span class="n">IO</span><span class="p">.</span><span class="na">delay</span><span class="p">(()</span><span class="w"> </span><span class="o">-&gt;</span><span class="w"> </span><span class="p">{</span>
<span class="w">                </span><span class="n">java</span><span class="p">.</span><span class="na">util</span><span class="p">.</span><span class="na">List</span><span class="o">&lt;</span><span class="n">String</span><span class="o">&gt;</span><span class="w"> </span><span class="n">lines</span><span class="w"> </span><span class="o">=</span><span class="w"> </span><span class="k">new</span><span class="w"> </span><span class="n">java</span><span class="p">.</span><span class="na">util</span><span class="p">.</span><span class="na">ArrayList</span><span class="o">&lt;&gt;</span><span class="p">();</span>
<span class="w">                </span><span class="n">String</span><span class="w"> </span><span class="n">line</span><span class="p">;</span>
<span class="w">                </span><span class="k">while</span><span class="w"> </span><span class="p">((</span><span class="n">line</span><span class="w"> </span><span class="o">=</span><span class="w"> </span><span class="n">reader</span><span class="p">.</span><span class="na">readLine</span><span class="p">())</span><span class="w"> </span><span class="o">!=</span><span class="w"> </span><span class="kc">null</span><span class="p">)</span><span class="w"> </span><span class="p">{</span>
<span class="w">                    </span><span class="n">lines</span><span class="p">.</span><span class="na">add</span><span class="p">(</span><span class="n">line</span><span class="p">);</span>
<span class="w">                </span><span class="p">}</span>
<span class="w">                </span><span class="k">return</span><span class="w"> </span><span class="n">List</span><span class="p">.</span><span class="na">ofAll</span><span class="p">(</span><span class="n">lines</span><span class="p">);</span>
<span class="w">            </span><span class="p">})</span>
<span class="w">    </span><span class="p">);</span>
<span class="p">}</span>

<span class="c1">// 使用例</span>
<span class="n">IO</span><span class="o">&lt;</span><span class="n">Void</span><span class="o">&gt;</span><span class="w"> </span><span class="n">program</span><span class="w"> </span><span class="o">=</span><span class="w"> </span><span class="n">readLines</span><span class="p">(</span><span class="s">&quot;data.txt&quot;</span><span class="p">)</span>
<span class="w">        </span><span class="p">.</span><span class="na">flatMap</span><span class="p">(</span><span class="n">lines</span><span class="w"> </span><span class="o">-&gt;</span>
<span class="w">                </span><span class="n">IO</span><span class="p">.</span><span class="na">effect</span><span class="p">(()</span><span class="w"> </span><span class="o">-&gt;</span><span class="w"> </span><span class="n">System</span><span class="p">.</span><span class="na">out</span><span class="p">.</span><span class="na">println</span><span class="p">(</span><span class="s">&quot;Read &quot;</span><span class="w"> </span><span class="o">+</span><span class="w"> </span><span class="n">lines</span><span class="p">.</span><span class="na">size</span><span class="p">()</span><span class="w"> </span><span class="o">+</span><span class="w"> </span><span class="s">&quot; lines&quot;</span><span class="p">))</span>
<span class="w">        </span><span class="p">);</span>

<span class="n">program</span><span class="p">.</span><span class="na">unsafeRun</span><span class="p">();</span>
</code></pre></div>

</details>

<hr />
<h2 id="_5">シリーズ全体の総括<a class="headerlink" href="#_5" title="Permanent link">&para;</a></h2>
<p>本シリーズでは、「Grokking Functional Programming」の内容に沿って、関数型プログラミングの基礎から実践的なアプリケーション構築までを学びました。</p>
<h3 id="_6">学んだ主な概念<a class="headerlink" href="#_6" title="Permanent link">&para;</a></h3>
<table>
<thead>
<tr>
<th>Part</th>
<th>章</th>
<th>主な概念</th>
</tr>
</thead>
<tbody>
<tr>
<td>I</td>
<td>1-2</td>
<td>純粋関数、参照透過性</td>
</tr>
<tr>
<td>II</td>
<td>3-5</td>
<td>イミュータブルデータ、高階関数、flatMap</td>
</tr>
<tr>
<td>III</td>
<td>6-7</td>
<td>Option、Either、ADT</td>
</tr>
<tr>
<td>IV</td>
<td>8-9</td>
<td>IO モナド、Stream</td>
</tr>
<tr>
<td>V</td>
<td>10</td>
<td>並行処理、Ref、Fiber</td>
</tr>
<tr>
<td>VI</td>
<td>11-12</td>
<td>実践アプリケーション、テスト</td>
</tr>
</tbody>
</table>
<h3 id="_7">関数型プログラミングの利点<a class="headerlink" href="#_7" title="Permanent link">&para;</a></h3>
<ol>
<li><strong>予測可能性</strong>: 純粋関数は同じ入力に対して常に同じ出力</li>
<li><strong>テスト容易性</strong>: 副作用がないためテストが簡単</li>
<li><strong>合成可能性</strong>: 小さな関数を組み合わせて複雑な処理を構築</li>
<li><strong>並行安全性</strong>: イミュータブルデータは競合状態を防ぐ</li>
<li><strong>型安全性</strong>: Option、Either で null や例外を型で表現</li>
</ol>
<h3 id="_8">次のステップ<a class="headerlink" href="#_8" title="Permanent link">&para;</a></h3>
<ul>
<li>Vavr のより高度な機能を学ぶ</li>
<li>プロジェクト Reactor や RxJava を探索</li>
<li>Virtual Thread と組み合わせた実践的な並行処理</li>
<li>実際のプロジェクトで FP を適用する</li>
</ul>












                
              </article>
            </div>
          
          
<script>var target=document.getElementById(location.hash.slice(1));target&&target.name&&(target.checked=target.name.startsWith("__tabbed_"))</script>
        </div>
        
      </main>
      
        <footer class="md-footer">
  
  <div class="md-footer-meta md-typeset">
    <div class="md-footer-meta__inner md-grid">
      <div class="md-copyright">
  
  
    Made with
    <a href="https://squidfunk.github.io/mkdocs-material/" target="_blank" rel="noopener">
      Material for MkDocs
    </a>
  
</div>
      
        
<div class="md-social">
  
    
    
    
    
    <a href="https://github.com/k2works/case-study-accounting" target="_blank" rel="noopener" title="財務会計システム ケーススタディ" class="md-social__link">
      <svg xmlns="http://www.w3.org/2000/svg" viewBox="0 0 512 512"><!--! Font Awesome Free 7.1.0 by @fontawesome - https://fontawesome.com License - https://fontawesome.com/license/free (Icons: CC BY 4.0, Fonts: SIL OFL 1.1, Code: MIT License) Copyright 2025 Fonticons, Inc.--><path d="M173.9 397.4c0 2-2.3 3.6-5.2 3.6-3.3.3-5.6-1.3-5.6-3.6 0-2 2.3-3.6 5.2-3.6 3-.3 5.6 1.3 5.6 3.6m-31.1-4.5c-.7 2 1.3 4.3 4.3 4.9 2.6 1 5.6 0 6.2-2s-1.3-4.3-4.3-5.2c-2.6-.7-5.5.3-6.2 2.3m44.2-1.7c-2.9.7-4.9 2.6-4.6 4.9.3 2 2.9 3.3 5.9 2.6 2.9-.7 4.9-2.6 4.6-4.6-.3-1.9-3-3.2-5.9-2.9M252.8 8C114.1 8 8 113.3 8 252c0 110.9 69.8 205.8 169.5 239.2 12.8 2.3 17.3-5.6 17.3-12.1 0-6.2-.3-40.4-.3-61.4 0 0-70 15-84.7-29.8 0 0-11.4-29.1-27.8-36.6 0 0-22.9-15.7 1.6-15.4 0 0 24.9 2 38.6 25.8 21.9 38.6 58.6 27.5 72.9 20.9 2.3-16 8.8-27.1 16-33.7-55.9-6.2-112.3-14.3-112.3-110.5 0-27.5 7.6-41.3 23.6-58.9-2.6-6.5-11.1-33.3 2.6-67.9 20.9-6.5 69 27 69 27 20-5.6 41.5-8.5 62.8-8.5s42.8 2.9 62.8 8.5c0 0 48.1-33.6 69-27 13.7 34.7 5.2 61.4 2.6 67.9 16 17.7 25.8 31.5 25.8 58.9 0 96.5-58.9 104.2-114.8 110.5 9.2 7.9 17 22.9 17 46.4 0 33.7-.3 75.4-.3 83.6 0 6.5 4.6 14.4 17.3 12.1C436.2 457.8 504 362.9 504 252 504 113.3 391.5 8 252.8 8M105.2 352.9c-1.3 1-1 3.3.7 5.2 1.6 1.6 3.9 2.3 5.2 1 1.3-1 1-3.3-.7-5.2-1.6-1.6-3.9-2.3-5.2-1m-10.8-8.1c-.7 1.3.3 2.9 2.3 3.9 1.6 1 3.6.7 4.3-.7.7-1.3-.3-2.9-2.3-3.9-2-.6-3.6-.3-4.3.7m32.4 35.6c-1.6 1.3-1 4.3 1.3 6.2 2.3 2.3 5.2 2.6 6.5 1 1.3-1.3.7-4.3-1.3-6.2-2.2-2.3-5.2-2.6-6.5-1m-11.4-14.7c-1.6 1-1.6 3.6 0 5.9s4.3 3.3 5.6 2.3c1.6-1.3 1.6-3.9 0-6.2-1.4-2.3-4-3.3-5.6-2"/></svg>
    </a>
  
</div>
      
    </div>
  </div>
</footer>
      
    </div>
    <div class="md-dialog" data-md-component="dialog">
      <div class="md-dialog__inner md-typeset"></div>
    </div>
    
    
    
      
      
      <script id="__config" type="application/json">{"annotate": null, "base": "../../..", "features": ["navigation.tabs", "navigation.sections", "toc.integrate", "search.suggest", "search.highlight"], "search": "../../../assets/javascripts/workers/search.2c215733.min.js", "tags": null, "translations": {"clipboard.copied": "Copied to clipboard", "clipboard.copy": "Copy to clipboard", "search.result.more.one": "1 more on this page", "search.result.more.other": "# more on this page", "search.result.none": "No matching documents", "search.result.one": "1 matching document", "search.result.other": "# matching documents", "search.result.placeholder": "Type to start searching", "search.result.term.missing": "Missing", "select.version": "Select version"}, "version": null}</script>
    
    
      <script src="../../../assets/javascripts/bundle.79ae519e.min.js"></script>
      
        <script src="https://cdn.jsdelivr.net/npm/mermaid@10.6.1/dist/mermaid.min.js"></script>
      
        <script src="../../../assets/js/extra.js"></script>
      
    
  </body>
</html>