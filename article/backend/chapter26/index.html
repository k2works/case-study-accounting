
<!doctype html>
<html lang="en" class="no-js">
  <head>
    
      <meta charset="utf-8">
      <meta name="viewport" content="width=device-width,initial-scale=1">
      
        <meta name="description" content="財務会計システムの設計・開発ドキュメント">
      
      
        <meta name="author" content="Project Team">
      
      
      
        <link rel="prev" href="../chapter25/">
      
      
        <link rel="next" href="../chapter27/">
      
      
        
      
      
      <link rel="icon" href="../../../assets/images/favicon.png">
      <meta name="generator" content="mkdocs-1.6.1, mkdocs-material-9.7.1">
    
    
      
        <title>第26章 - 財務会計システム ケーススタディ</title>
      
    
    
      <link rel="stylesheet" href="../../../assets/stylesheets/main.484c7ddc.min.css">
      
        
        <link rel="stylesheet" href="../../../assets/stylesheets/palette.ab4e12ef.min.css">
      
      


    
    
      
    
    
      
        
        
        <link rel="preconnect" href="https://fonts.gstatic.com" crossorigin>
        <link rel="stylesheet" href="https://fonts.googleapis.com/css?family=Roboto:300,300i,400,400i,700,700i%7CRoboto+Mono:400,400i,700,700i&display=fallback">
        <style>:root{--md-text-font:"Roboto";--md-code-font:"Roboto Mono"}</style>
      
    
    
      <link rel="stylesheet" href="../../../assets/css/extra.css">
    
    <script>__md_scope=new URL("../../..",location),__md_hash=e=>[...e].reduce(((e,_)=>(e<<5)-e+_.charCodeAt(0)),0),__md_get=(e,_=localStorage,t=__md_scope)=>JSON.parse(_.getItem(t.pathname+"."+e)),__md_set=(e,_,t=localStorage,a=__md_scope)=>{try{t.setItem(a.pathname+"."+e,JSON.stringify(_))}catch(e){}}</script>
    
      

    
    
  </head>
  
  
    
    
    
    
    
    <body dir="ltr" data-md-color-scheme="default" data-md-color-primary="indigo" data-md-color-accent="indigo">
  
    
    <input class="md-toggle" data-md-toggle="drawer" type="checkbox" id="__drawer" autocomplete="off">
    <input class="md-toggle" data-md-toggle="search" type="checkbox" id="__search" autocomplete="off">
    <label class="md-overlay" for="__drawer"></label>
    <div data-md-component="skip">
      
        
        <a href="#26-2-" class="md-skip">
          Skip to content
        </a>
      
    </div>
    <div data-md-component="announce">
      
    </div>
    
    
      

<header class="md-header" data-md-component="header">
  <nav class="md-header__inner md-grid" aria-label="Header">
    <a href="../../.." title="財務会計システム ケーススタディ" class="md-header__button md-logo" aria-label="財務会計システム ケーススタディ" data-md-component="logo">
      
  
  <svg xmlns="http://www.w3.org/2000/svg" viewBox="0 0 24 24"><path d="M12 8a3 3 0 0 0 3-3 3 3 0 0 0-3-3 3 3 0 0 0-3 3 3 3 0 0 0 3 3m0 3.54C9.64 9.35 6.5 8 3 8v11c3.5 0 6.64 1.35 9 3.54 2.36-2.19 5.5-3.54 9-3.54V8c-3.5 0-6.64 1.35-9 3.54"/></svg>

    </a>
    <label class="md-header__button md-icon" for="__drawer">
      
      <svg xmlns="http://www.w3.org/2000/svg" viewBox="0 0 24 24"><path d="M3 6h18v2H3zm0 5h18v2H3zm0 5h18v2H3z"/></svg>
    </label>
    <div class="md-header__title" data-md-component="header-title">
      <div class="md-header__ellipsis">
        <div class="md-header__topic">
          <span class="md-ellipsis">
            財務会計システム ケーススタディ
          </span>
        </div>
        <div class="md-header__topic" data-md-component="header-topic">
          <span class="md-ellipsis">
            
              第26章
            
          </span>
        </div>
      </div>
    </div>
    
      
    
    
    
    
      
      
        <label class="md-header__button md-icon" for="__search">
          
          <svg xmlns="http://www.w3.org/2000/svg" viewBox="0 0 24 24"><path d="M9.5 3A6.5 6.5 0 0 1 16 9.5c0 1.61-.59 3.09-1.56 4.23l.27.27h.79l5 5-1.5 1.5-5-5v-.79l-.27-.27A6.52 6.52 0 0 1 9.5 16 6.5 6.5 0 0 1 3 9.5 6.5 6.5 0 0 1 9.5 3m0 2C7 5 5 7 5 9.5S7 14 9.5 14 14 12 14 9.5 12 5 9.5 5"/></svg>
        </label>
        <div class="md-search" data-md-component="search" role="dialog">
  <label class="md-search__overlay" for="__search"></label>
  <div class="md-search__inner" role="search">
    <form class="md-search__form" name="search">
      <input type="text" class="md-search__input" name="query" aria-label="Search" placeholder="Search" autocapitalize="off" autocorrect="off" autocomplete="off" spellcheck="false" data-md-component="search-query" required>
      <label class="md-search__icon md-icon" for="__search">
        
        <svg xmlns="http://www.w3.org/2000/svg" viewBox="0 0 24 24"><path d="M9.5 3A6.5 6.5 0 0 1 16 9.5c0 1.61-.59 3.09-1.56 4.23l.27.27h.79l5 5-1.5 1.5-5-5v-.79l-.27-.27A6.52 6.52 0 0 1 9.5 16 6.5 6.5 0 0 1 3 9.5 6.5 6.5 0 0 1 9.5 3m0 2C7 5 5 7 5 9.5S7 14 9.5 14 14 12 14 9.5 12 5 9.5 5"/></svg>
        
        <svg xmlns="http://www.w3.org/2000/svg" viewBox="0 0 24 24"><path d="M20 11v2H8l5.5 5.5-1.42 1.42L4.16 12l7.92-7.92L13.5 5.5 8 11z"/></svg>
      </label>
      <nav class="md-search__options" aria-label="Search">
        
        <button type="reset" class="md-search__icon md-icon" title="Clear" aria-label="Clear" tabindex="-1">
          
          <svg xmlns="http://www.w3.org/2000/svg" viewBox="0 0 24 24"><path d="M19 6.41 17.59 5 12 10.59 6.41 5 5 6.41 10.59 12 5 17.59 6.41 19 12 13.41 17.59 19 19 17.59 13.41 12z"/></svg>
        </button>
      </nav>
      
        <div class="md-search__suggest" data-md-component="search-suggest"></div>
      
    </form>
    <div class="md-search__output">
      <div class="md-search__scrollwrap" tabindex="0" data-md-scrollfix>
        <div class="md-search-result" data-md-component="search-result">
          <div class="md-search-result__meta">
            Initializing search
          </div>
          <ol class="md-search-result__list" role="presentation"></ol>
        </div>
      </div>
    </div>
  </div>
</div>
      
    
    
      <div class="md-header__source">
        <a href="https://github.com/k2works/case-study-accounting" title="Go to repository" class="md-source" data-md-component="source">
  <div class="md-source__icon md-icon">
    
    <svg xmlns="http://www.w3.org/2000/svg" viewBox="0 0 448 512"><!--! Font Awesome Free 7.1.0 by @fontawesome - https://fontawesome.com License - https://fontawesome.com/license/free (Icons: CC BY 4.0, Fonts: SIL OFL 1.1, Code: MIT License) Copyright 2025 Fonticons, Inc.--><path d="M439.6 236.1 244 40.5c-5.4-5.5-12.8-8.5-20.4-8.5s-15 3-20.4 8.4L162.5 81l51.5 51.5c27.1-9.1 52.7 16.8 43.4 43.7l49.7 49.7c34.2-11.8 61.2 31 35.5 56.7-26.5 26.5-70.2-2.9-56-37.3L240.3 199v121.9c25.3 12.5 22.3 41.8 9.1 55-6.4 6.4-15.2 10.1-24.3 10.1s-17.8-3.6-24.3-10.1c-17.6-17.6-11.1-46.9 11.2-56v-123c-20.8-8.5-24.6-30.7-18.6-45L142.6 101 8.5 235.1C3 240.6 0 247.9 0 255.5s3 15 8.5 20.4l195.6 195.7c5.4 5.4 12.7 8.4 20.4 8.4s15-3 20.4-8.4l194.7-194.7c5.4-5.4 8.4-12.8 8.4-20.4s-3-15-8.4-20.4"/></svg>
  </div>
  <div class="md-source__repository">
    case-study-accounting
  </div>
</a>
      </div>
    
  </nav>
  
</header>
    
    <div class="md-container" data-md-component="container">
      
      
        
          
            
<nav class="md-tabs" aria-label="Tabs" data-md-component="tabs">
  <div class="md-grid">
    <ul class="md-tabs__list">
      
        
  
  
  
  
    <li class="md-tabs__item">
      <a href="../../.." class="md-tabs__link">
        
  
  
    
  
  Home

      </a>
    </li>
  

      
        
  
  
  
  
    
    
      <li class="md-tabs__item">
        <a href="../../../requirements/requirements_definition/" class="md-tabs__link">
          
  
  
  要件定義

        </a>
      </li>
    
  

      
        
  
  
  
  
    
    
      
  
  
  
  
    
    
      <li class="md-tabs__item">
        <a href="../../../design/architecture_backend/" class="md-tabs__link">
          
  
  
  設計

        </a>
      </li>
    
  

    
  

      
        
  
  
  
  
    
    
      <li class="md-tabs__item">
        <a href="../../../development/release_plan/" class="md-tabs__link">
          
  
  
  開発

        </a>
      </li>
    
  

      
        
  
  
  
  
    
    
      <li class="md-tabs__item">
        <a href="../../../operation/dev_container/" class="md-tabs__link">
          
  
  
  運用

        </a>
      </li>
    
  

      
        
  
  
  
  
    
    
      <li class="md-tabs__item">
        <a href="../../../reference/%E9%96%8B%E7%99%BA%E3%82%AC%E3%82%A4%E3%83%89/" class="md-tabs__link">
          
  
  
  リファレンス

        </a>
      </li>
    
  

      
        
  
  
  
  
    
    
      <li class="md-tabs__item">
        <a href="../../../template/ADR/" class="md-tabs__link">
          
  
  
  テンプレート

        </a>
      </li>
    
  

      
        
  
  
  
    
  
  
    
    
      <li class="md-tabs__item md-tabs__item--active">
        <a href="../../" class="md-tabs__link">
          
  
  
  実践ガイド

        </a>
      </li>
    
  

      
    </ul>
  </div>
</nav>
          
        
      
      <main class="md-main" data-md-component="main">
        <div class="md-main__inner md-grid">
          
            
              
              <div class="md-sidebar md-sidebar--primary" data-md-component="sidebar" data-md-type="navigation" >
                <div class="md-sidebar__scrollwrap">
                  <div class="md-sidebar__inner">
                    


  


  

<nav class="md-nav md-nav--primary md-nav--lifted md-nav--integrated" aria-label="Navigation" data-md-level="0">
  <label class="md-nav__title" for="__drawer">
    <a href="../../.." title="財務会計システム ケーススタディ" class="md-nav__button md-logo" aria-label="財務会計システム ケーススタディ" data-md-component="logo">
      
  
  <svg xmlns="http://www.w3.org/2000/svg" viewBox="0 0 24 24"><path d="M12 8a3 3 0 0 0 3-3 3 3 0 0 0-3-3 3 3 0 0 0-3 3 3 3 0 0 0 3 3m0 3.54C9.64 9.35 6.5 8 3 8v11c3.5 0 6.64 1.35 9 3.54 2.36-2.19 5.5-3.54 9-3.54V8c-3.5 0-6.64 1.35-9 3.54"/></svg>

    </a>
    財務会計システム ケーススタディ
  </label>
  
    <div class="md-nav__source">
      <a href="https://github.com/k2works/case-study-accounting" title="Go to repository" class="md-source" data-md-component="source">
  <div class="md-source__icon md-icon">
    
    <svg xmlns="http://www.w3.org/2000/svg" viewBox="0 0 448 512"><!--! Font Awesome Free 7.1.0 by @fontawesome - https://fontawesome.com License - https://fontawesome.com/license/free (Icons: CC BY 4.0, Fonts: SIL OFL 1.1, Code: MIT License) Copyright 2025 Fonticons, Inc.--><path d="M439.6 236.1 244 40.5c-5.4-5.5-12.8-8.5-20.4-8.5s-15 3-20.4 8.4L162.5 81l51.5 51.5c27.1-9.1 52.7 16.8 43.4 43.7l49.7 49.7c34.2-11.8 61.2 31 35.5 56.7-26.5 26.5-70.2-2.9-56-37.3L240.3 199v121.9c25.3 12.5 22.3 41.8 9.1 55-6.4 6.4-15.2 10.1-24.3 10.1s-17.8-3.6-24.3-10.1c-17.6-17.6-11.1-46.9 11.2-56v-123c-20.8-8.5-24.6-30.7-18.6-45L142.6 101 8.5 235.1C3 240.6 0 247.9 0 255.5s3 15 8.5 20.4l195.6 195.7c5.4 5.4 12.7 8.4 20.4 8.4s15-3 20.4-8.4l194.7-194.7c5.4-5.4 8.4-12.8 8.4-20.4s-3-15-8.4-20.4"/></svg>
  </div>
  <div class="md-source__repository">
    case-study-accounting
  </div>
</a>
    </div>
  
  <ul class="md-nav__list" data-md-scrollfix>
    
      
      
  
  
  
  
    <li class="md-nav__item">
      <a href="../../.." class="md-nav__link">
        
  
  
  <span class="md-ellipsis">
    
  
    Home
  

    
  </span>
  
  

      </a>
    </li>
  

    
      
      
  
  
  
  
    
    
    
    
      
      
        
      
    
    
    <li class="md-nav__item md-nav__item--nested">
      
        
        
        <input class="md-nav__toggle md-toggle " type="checkbox" id="__nav_2" >
        
          
          <label class="md-nav__link" for="__nav_2" id="__nav_2_label" tabindex="0">
            
  
  
  <span class="md-ellipsis">
    
  
    要件定義
  

    
  </span>
  
  

            <span class="md-nav__icon md-icon"></span>
          </label>
        
        <nav class="md-nav" data-md-level="1" aria-labelledby="__nav_2_label" aria-expanded="false">
          <label class="md-nav__title" for="__nav_2">
            <span class="md-nav__icon md-icon"></span>
            
  
    要件定義
  

          </label>
          <ul class="md-nav__list" data-md-scrollfix>
            
              
                
  
  
  
  
    <li class="md-nav__item">
      <a href="../../../requirements/requirements_definition/" class="md-nav__link">
        
  
  
  <span class="md-ellipsis">
    
  
    要件定義書
  

    
  </span>
  
  

      </a>
    </li>
  

              
            
              
                
  
  
  
  
    <li class="md-nav__item">
      <a href="../../../requirements/business_usecase/" class="md-nav__link">
        
  
  
  <span class="md-ellipsis">
    
  
    ビジネスユースケース
  

    
  </span>
  
  

      </a>
    </li>
  

              
            
              
                
  
  
  
  
    <li class="md-nav__item">
      <a href="../../../requirements/system_usecase/" class="md-nav__link">
        
  
  
  <span class="md-ellipsis">
    
  
    システムユースケース
  

    
  </span>
  
  

      </a>
    </li>
  

              
            
              
                
  
  
  
  
    <li class="md-nav__item">
      <a href="../../../requirements/user_story/" class="md-nav__link">
        
  
  
  <span class="md-ellipsis">
    
  
    ユーザーストーリー
  

    
  </span>
  
  

      </a>
    </li>
  

              
            
          </ul>
        </nav>
      
    </li>
  

    
      
      
  
  
  
  
    
    
    
    
      
      
        
      
    
    
    <li class="md-nav__item md-nav__item--nested">
      
        
        
        <input class="md-nav__toggle md-toggle " type="checkbox" id="__nav_3" >
        
          
          <label class="md-nav__link" for="__nav_3" id="__nav_3_label" tabindex="0">
            
  
  
  <span class="md-ellipsis">
    
  
    設計
  

    
  </span>
  
  

            <span class="md-nav__icon md-icon"></span>
          </label>
        
        <nav class="md-nav" data-md-level="1" aria-labelledby="__nav_3_label" aria-expanded="false">
          <label class="md-nav__title" for="__nav_3">
            <span class="md-nav__icon md-icon"></span>
            
  
    設計
  

          </label>
          <ul class="md-nav__list" data-md-scrollfix>
            
              
                
  
  
  
  
    
    
    
    
      
      
        
      
    
    
    <li class="md-nav__item md-nav__item--nested">
      
        
        
        <input class="md-nav__toggle md-toggle " type="checkbox" id="__nav_3_1" >
        
          
          <label class="md-nav__link" for="__nav_3_1" id="__nav_3_1_label" tabindex="0">
            
  
  
  <span class="md-ellipsis">
    
  
    アーキテクチャ
  

    
  </span>
  
  

            <span class="md-nav__icon md-icon"></span>
          </label>
        
        <nav class="md-nav" data-md-level="2" aria-labelledby="__nav_3_1_label" aria-expanded="false">
          <label class="md-nav__title" for="__nav_3_1">
            <span class="md-nav__icon md-icon"></span>
            
  
    アーキテクチャ
  

          </label>
          <ul class="md-nav__list" data-md-scrollfix>
            
              
                
  
  
  
  
    <li class="md-nav__item">
      <a href="../../../design/architecture_backend/" class="md-nav__link">
        
  
  
  <span class="md-ellipsis">
    
  
    バックエンド
  

    
  </span>
  
  

      </a>
    </li>
  

              
            
              
                
  
  
  
  
    <li class="md-nav__item">
      <a href="../../../design/architecture_frontend/" class="md-nav__link">
        
  
  
  <span class="md-ellipsis">
    
  
    フロントエンド
  

    
  </span>
  
  

      </a>
    </li>
  

              
            
              
                
  
  
  
  
    <li class="md-nav__item">
      <a href="../../../design/architecture_infrastructure/" class="md-nav__link">
        
  
  
  <span class="md-ellipsis">
    
  
    インフラストラクチャ
  

    
  </span>
  
  

      </a>
    </li>
  

              
            
          </ul>
        </nav>
      
    </li>
  

              
            
              
                
  
  
  
  
    
    
    
    
      
      
        
      
    
    
    <li class="md-nav__item md-nav__item--nested">
      
        
        
        <input class="md-nav__toggle md-toggle " type="checkbox" id="__nav_3_2" >
        
          
          <label class="md-nav__link" for="__nav_3_2" id="__nav_3_2_label" tabindex="0">
            
  
  
  <span class="md-ellipsis">
    
  
    モデル設計
  

    
  </span>
  
  

            <span class="md-nav__icon md-icon"></span>
          </label>
        
        <nav class="md-nav" data-md-level="2" aria-labelledby="__nav_3_2_label" aria-expanded="false">
          <label class="md-nav__title" for="__nav_3_2">
            <span class="md-nav__icon md-icon"></span>
            
  
    モデル設計
  

          </label>
          <ul class="md-nav__list" data-md-scrollfix>
            
              
                
  
  
  
  
    <li class="md-nav__item">
      <a href="../../../design/data-model/" class="md-nav__link">
        
  
  
  <span class="md-ellipsis">
    
  
    データモデル
  

    
  </span>
  
  

      </a>
    </li>
  

              
            
              
                
  
  
  
  
    <li class="md-nav__item">
      <a href="../../../design/domain-model/" class="md-nav__link">
        
  
  
  <span class="md-ellipsis">
    
  
    ドメインモデル
  

    
  </span>
  
  

      </a>
    </li>
  

              
            
          </ul>
        </nav>
      
    </li>
  

              
            
              
                
  
  
  
  
    <li class="md-nav__item">
      <a href="../../../design/ui-design/" class="md-nav__link">
        
  
  
  <span class="md-ellipsis">
    
  
    UI 設計
  

    
  </span>
  
  

      </a>
    </li>
  

              
            
              
                
  
  
  
  
    <li class="md-nav__item">
      <a href="../../../design/test_strategy/" class="md-nav__link">
        
  
  
  <span class="md-ellipsis">
    
  
    テスト戦略
  

    
  </span>
  
  

      </a>
    </li>
  

              
            
              
                
  
  
  
  
    <li class="md-nav__item">
      <a href="../../../design/non_functional/" class="md-nav__link">
        
  
  
  <span class="md-ellipsis">
    
  
    非機能要件
  

    
  </span>
  
  

      </a>
    </li>
  

              
            
              
                
  
  
  
  
    <li class="md-nav__item">
      <a href="../../../design/operation/" class="md-nav__link">
        
  
  
  <span class="md-ellipsis">
    
  
    運用要件
  

    
  </span>
  
  

      </a>
    </li>
  

              
            
              
                
  
  
  
  
    <li class="md-nav__item">
      <a href="../../../design/tech_stack/" class="md-nav__link">
        
  
  
  <span class="md-ellipsis">
    
  
    技術スタック選定
  

    
  </span>
  
  

      </a>
    </li>
  

              
            
          </ul>
        </nav>
      
    </li>
  

    
      
      
  
  
  
  
    
    
    
    
      
      
        
      
    
    
    <li class="md-nav__item md-nav__item--nested">
      
        
        
        <input class="md-nav__toggle md-toggle " type="checkbox" id="__nav_4" >
        
          
          <label class="md-nav__link" for="__nav_4" id="__nav_4_label" tabindex="0">
            
  
  
  <span class="md-ellipsis">
    
  
    開発
  

    
  </span>
  
  

            <span class="md-nav__icon md-icon"></span>
          </label>
        
        <nav class="md-nav" data-md-level="1" aria-labelledby="__nav_4_label" aria-expanded="false">
          <label class="md-nav__title" for="__nav_4">
            <span class="md-nav__icon md-icon"></span>
            
  
    開発
  

          </label>
          <ul class="md-nav__list" data-md-scrollfix>
            
              
                
  
  
  
  
    <li class="md-nav__item">
      <a href="../../../development/release_plan/" class="md-nav__link">
        
  
  
  <span class="md-ellipsis">
    
  
    リリース計画
  

    
  </span>
  
  

      </a>
    </li>
  

              
            
              
                
  
  
  
  
    
    
    
    
      
      
        
      
    
    
    <li class="md-nav__item md-nav__item--nested">
      
        
        
        <input class="md-nav__toggle md-toggle " type="checkbox" id="__nav_4_2" >
        
          
          <label class="md-nav__link" for="__nav_4_2" id="__nav_4_2_label" tabindex="0">
            
  
  
  <span class="md-ellipsis">
    
  
    イテレーション計画
  

    
  </span>
  
  

            <span class="md-nav__icon md-icon"></span>
          </label>
        
        <nav class="md-nav" data-md-level="2" aria-labelledby="__nav_4_2_label" aria-expanded="false">
          <label class="md-nav__title" for="__nav_4_2">
            <span class="md-nav__icon md-icon"></span>
            
  
    イテレーション計画
  

          </label>
          <ul class="md-nav__list" data-md-scrollfix>
            
              
                
  
  
  
  
    <li class="md-nav__item">
      <a href="../../../development/iteration_plan-1/" class="md-nav__link">
        
  
  
  <span class="md-ellipsis">
    
  
    イテレーション1
  

    
  </span>
  
  

      </a>
    </li>
  

              
            
          </ul>
        </nav>
      
    </li>
  

              
            
          </ul>
        </nav>
      
    </li>
  

    
      
      
  
  
  
  
    
    
    
    
      
      
        
      
    
    
    <li class="md-nav__item md-nav__item--nested">
      
        
        
        <input class="md-nav__toggle md-toggle " type="checkbox" id="__nav_5" >
        
          
          <label class="md-nav__link" for="__nav_5" id="__nav_5_label" tabindex="0">
            
  
  
  <span class="md-ellipsis">
    
  
    運用
  

    
  </span>
  
  

            <span class="md-nav__icon md-icon"></span>
          </label>
        
        <nav class="md-nav" data-md-level="1" aria-labelledby="__nav_5_label" aria-expanded="false">
          <label class="md-nav__title" for="__nav_5">
            <span class="md-nav__icon md-icon"></span>
            
  
    運用
  

          </label>
          <ul class="md-nav__list" data-md-scrollfix>
            
              
                
  
  
  
  
    <li class="md-nav__item">
      <a href="../../../operation/dev_container/" class="md-nav__link">
        
  
  
  <span class="md-ellipsis">
    
  
    開発コンテナ構築手順書
  

    
  </span>
  
  

      </a>
    </li>
  

              
            
              
                
  
  
  
  
    <li class="md-nav__item">
      <a href="../../../operation/backend_setup/" class="md-nav__link">
        
  
  
  <span class="md-ellipsis">
    
  
    バックエンド構築手順書
  

    
  </span>
  
  

      </a>
    </li>
  

              
            
              
                
  
  
  
  
    <li class="md-nav__item">
      <a href="../../../operation/backend_demo_env/" class="md-nav__link">
        
  
  
  <span class="md-ellipsis">
    
  
    バックエンドデモ環境
  

    
  </span>
  
  

      </a>
    </li>
  

              
            
              
                
  
  
  
  
    <li class="md-nav__item">
      <a href="../../../operation/frontend_setup/" class="md-nav__link">
        
  
  
  <span class="md-ellipsis">
    
  
    フロントエンド構築手順書
  

    
  </span>
  
  

      </a>
    </li>
  

              
            
              
                
  
  
  
  
    <li class="md-nav__item">
      <a href="../../../operation/frontend_demo_env/" class="md-nav__link">
        
  
  
  <span class="md-ellipsis">
    
  
    フロントエンドデモ環境
  

    
  </span>
  
  

      </a>
    </li>
  

              
            
              
                
  
  
  
  
    <li class="md-nav__item">
      <a href="../../../operation/deploy_demo/" class="md-nav__link">
        
  
  
  <span class="md-ellipsis">
    
  
    デモ環境デプロイ
  

    
  </span>
  
  

      </a>
    </li>
  

              
            
              
                
  
  
  
  
    <li class="md-nav__item">
      <a href="../../../operation/sonarqube_setup/" class="md-nav__link">
        
  
  
  <span class="md-ellipsis">
    
  
    SonarQube セットアップガイド
  

    
  </span>
  
  

      </a>
    </li>
  

              
            
          </ul>
        </nav>
      
    </li>
  

    
      
      
  
  
  
  
    
    
    
    
      
      
        
      
    
    
    <li class="md-nav__item md-nav__item--nested">
      
        
        
        <input class="md-nav__toggle md-toggle " type="checkbox" id="__nav_6" >
        
          
          <label class="md-nav__link" for="__nav_6" id="__nav_6_label" tabindex="0">
            
  
  
  <span class="md-ellipsis">
    
  
    リファレンス
  

    
  </span>
  
  

            <span class="md-nav__icon md-icon"></span>
          </label>
        
        <nav class="md-nav" data-md-level="1" aria-labelledby="__nav_6_label" aria-expanded="false">
          <label class="md-nav__title" for="__nav_6">
            <span class="md-nav__icon md-icon"></span>
            
  
    リファレンス
  

          </label>
          <ul class="md-nav__list" data-md-scrollfix>
            
              
                
  
  
  
  
    <li class="md-nav__item">
      <a href="../../../reference/%E9%96%8B%E7%99%BA%E3%82%AC%E3%82%A4%E3%83%89/" class="md-nav__link">
        
  
  
  <span class="md-ellipsis">
    
  
    開発ガイド
  

    
  </span>
  
  

      </a>
    </li>
  

              
            
              
                
  
  
  
  
    <li class="md-nav__item">
      <a href="../../../reference/%E3%82%88%E3%81%84%E3%82%BD%E3%83%95%E3%83%88%E3%82%A6%E3%82%A7%E3%82%A2%E3%81%A8%E3%81%AF/" class="md-nav__link">
        
  
  
  <span class="md-ellipsis">
    
  
    よいソフトウェアとは
  

    
  </span>
  
  

      </a>
    </li>
  

              
            
              
                
  
  
  
  
    <li class="md-nav__item">
      <a href="../../../reference/%E3%82%B3%E3%83%BC%E3%83%87%E3%82%A3%E3%83%B3%E3%82%B0%E3%81%A8%E3%83%86%E3%82%B9%E3%83%88%E3%82%AC%E3%82%A4%E3%83%89/" class="md-nav__link">
        
  
  
  <span class="md-ellipsis">
    
  
    コーディングとテストガイド
  

    
  </span>
  
  

      </a>
    </li>
  

              
            
              
                
  
  
  
  
    <li class="md-nav__item">
      <a href="../../../reference/%E3%82%A2%E3%83%BC%E3%82%AD%E3%83%86%E3%82%AF%E3%83%81%E3%83%A3%E8%A8%AD%E8%A8%88%E3%82%AC%E3%82%A4%E3%83%89/" class="md-nav__link">
        
  
  
  <span class="md-ellipsis">
    
  
    アーキテクチャ設計ガイド
  

    
  </span>
  
  

      </a>
    </li>
  

              
            
              
                
  
  
  
  
    <li class="md-nav__item">
      <a href="../../../reference/%E3%83%87%E3%83%BC%E3%82%BF%E3%83%A2%E3%83%87%E3%83%AB%E8%A8%AD%E8%A8%88%E3%82%AC%E3%82%A4%E3%83%89/" class="md-nav__link">
        
  
  
  <span class="md-ellipsis">
    
  
    データモデル設計ガイド
  

    
  </span>
  
  

      </a>
    </li>
  

              
            
              
                
  
  
  
  
    <li class="md-nav__item">
      <a href="../../../reference/%E3%83%89%E3%83%A1%E3%82%A4%E3%83%B3%E3%83%A2%E3%83%87%E3%83%AB%E8%A8%AD%E8%A8%88%E3%82%AC%E3%82%A4%E3%83%89/" class="md-nav__link">
        
  
  
  <span class="md-ellipsis">
    
  
    ドメインモデル設計ガイド
  

    
  </span>
  
  

      </a>
    </li>
  

              
            
              
                
  
  
  
  
    <li class="md-nav__item">
      <a href="../../../reference/UI%E8%A8%AD%E8%A8%88%E3%82%AC%E3%82%A4%E3%83%89/" class="md-nav__link">
        
  
  
  <span class="md-ellipsis">
    
  
    UI設計ガイド
  

    
  </span>
  
  

      </a>
    </li>
  

              
            
              
                
  
  
  
  
    <li class="md-nav__item">
      <a href="../../../reference/%E3%83%86%E3%82%B9%E3%83%88%E6%88%A6%E7%95%A5%E3%82%AC%E3%82%A4%E3%83%89/" class="md-nav__link">
        
  
  
  <span class="md-ellipsis">
    
  
    テスト戦略ガイド
  

    
  </span>
  
  

      </a>
    </li>
  

              
            
              
                
  
  
  
  
    <li class="md-nav__item">
      <a href="../../../reference/%E9%9D%9E%E6%A9%9F%E8%83%BD%E8%A6%81%E4%BB%B6%E5%AE%9A%E7%BE%A9%E3%82%AC%E3%82%A4%E3%83%89/" class="md-nav__link">
        
  
  
  <span class="md-ellipsis">
    
  
    非機能要件定義ガイド
  

    
  </span>
  
  

      </a>
    </li>
  

              
            
              
                
  
  
  
  
    <li class="md-nav__item">
      <a href="../../../reference/%E9%81%8B%E7%94%A8%E8%A6%81%E4%BB%B6%E5%AE%9A%E7%BE%A9%E3%82%AC%E3%82%A4%E3%83%89/" class="md-nav__link">
        
  
  
  <span class="md-ellipsis">
    
  
    運用要件定義ガイド
  

    
  </span>
  
  

      </a>
    </li>
  

              
            
              
                
  
  
  
  
    <li class="md-nav__item">
      <a href="../../../reference/%E8%A6%81%E4%BB%B6%E5%AE%9A%E7%BE%A9%E3%82%AC%E3%82%A4%E3%83%89/" class="md-nav__link">
        
  
  
  <span class="md-ellipsis">
    
  
    要件定義ガイド
  

    
  </span>
  
  

      </a>
    </li>
  

              
            
              
                
  
  
  
  
    <li class="md-nav__item">
      <a href="../../../reference/%E3%83%A6%E3%83%BC%E3%82%B9%E3%82%B1%E3%83%BC%E3%82%B9%E4%BD%9C%E6%88%90%E3%82%AC%E3%82%A4%E3%83%89/" class="md-nav__link">
        
  
  
  <span class="md-ellipsis">
    
  
    ユースケース作成ガイド
  

    
  </span>
  
  

      </a>
    </li>
  

              
            
              
                
  
  
  
  
    <li class="md-nav__item">
      <a href="../../../reference/%E3%83%AA%E3%83%AA%E3%83%BC%E3%82%B9%E3%83%BB%E3%82%A4%E3%83%86%E3%83%AC%E3%83%BC%E3%82%B7%E3%83%A7%E3%83%B3%E8%A8%88%E7%94%BB%E3%82%AC%E3%82%A4%E3%83%89/" class="md-nav__link">
        
  
  
  <span class="md-ellipsis">
    
  
    リリース・イテレーション計画ガイド
  

    
  </span>
  
  

      </a>
    </li>
  

              
            
              
                
  
  
  
  
    <li class="md-nav__item">
      <a href="../../../reference/%E3%82%A8%E3%82%AF%E3%82%B9%E3%83%88%E3%83%AA%E3%83%BC%E3%83%A0%E3%83%97%E3%83%AD%E3%82%B0%E3%83%A9%E3%83%9F%E3%83%B3%E3%82%B0/" class="md-nav__link">
        
  
  
  <span class="md-ellipsis">
    
  
    エクストリームプログラミング
  

    
  </span>
  
  

      </a>
    </li>
  

              
            
              
                
  
  
  
  
    <li class="md-nav__item">
      <a href="../../../reference/%E3%82%A4%E3%83%B3%E3%83%95%E3%83%A9%E8%A8%AD%E8%A8%88%E3%82%AC%E3%82%A4%E3%83%89/" class="md-nav__link">
        
  
  
  <span class="md-ellipsis">
    
  
    インフラ設計ガイド
  

    
  </span>
  
  

      </a>
    </li>
  

              
            
              
                
  
  
  
  
    <li class="md-nav__item">
      <a href="../../../reference/Java%E3%82%A2%E3%83%97%E3%83%AA%E3%82%B1%E3%83%BC%E3%82%B7%E3%83%A7%E3%83%B3%E7%92%B0%E5%A2%83%E6%A7%8B%E7%AF%89%E3%82%AC%E3%82%A4%E3%83%89/" class="md-nav__link">
        
  
  
  <span class="md-ellipsis">
    
  
    Javaアプリケーション環境構築ガイド
  

    
  </span>
  
  

      </a>
    </li>
  

              
            
              
                
  
  
  
  
    <li class="md-nav__item">
      <a href="../../../reference/TypeScript%E3%82%A2%E3%83%97%E3%83%AA%E3%82%B1%E3%83%BC%E3%82%B7%E3%83%A7%E3%83%B3%E7%92%B0%E5%A2%83%E6%A7%8B%E7%AF%89%E3%82%AC%E3%82%A4%E3%83%89/" class="md-nav__link">
        
  
  
  <span class="md-ellipsis">
    
  
    TypeScriptアプリケーション環境構築ガイド
  

    
  </span>
  
  

      </a>
    </li>
  

              
            
          </ul>
        </nav>
      
    </li>
  

    
      
      
  
  
  
  
    
    
    
    
      
      
        
      
    
    
    <li class="md-nav__item md-nav__item--nested">
      
        
        
        <input class="md-nav__toggle md-toggle " type="checkbox" id="__nav_7" >
        
          
          <label class="md-nav__link" for="__nav_7" id="__nav_7_label" tabindex="0">
            
  
  
  <span class="md-ellipsis">
    
  
    テンプレート
  

    
  </span>
  
  

            <span class="md-nav__icon md-icon"></span>
          </label>
        
        <nav class="md-nav" data-md-level="1" aria-labelledby="__nav_7_label" aria-expanded="false">
          <label class="md-nav__title" for="__nav_7">
            <span class="md-nav__icon md-icon"></span>
            
  
    テンプレート
  

          </label>
          <ul class="md-nav__list" data-md-scrollfix>
            
              
                
  
  
  
  
    <li class="md-nav__item">
      <a href="../../../template/ADR/" class="md-nav__link">
        
  
  
  <span class="md-ellipsis">
    
  
    ADR
  

    
  </span>
  
  

      </a>
    </li>
  

              
            
              
                
  
  
  
  
    <li class="md-nav__item">
      <a href="../../../template/%E3%82%A4%E3%83%86%E3%83%AC%E3%83%BC%E3%82%B7%E3%83%A7%E3%83%B3%E5%AE%8C%E4%BA%86%E5%A0%B1%E5%91%8A%E6%9B%B8/" class="md-nav__link">
        
  
  
  <span class="md-ellipsis">
    
  
    イテレーション完了報告書
  

    
  </span>
  
  

      </a>
    </li>
  

              
            
              
                
  
  
  
  
    <li class="md-nav__item">
      <a href="../../../template/%E3%82%A4%E3%83%B3%E3%82%BB%E3%83%97%E3%82%B7%E3%83%A7%E3%83%B3%E3%83%87%E3%83%83%E3%82%AD/" class="md-nav__link">
        
  
  
  <span class="md-ellipsis">
    
  
    インセプションデッキ
  

    
  </span>
  
  

      </a>
    </li>
  

              
            
              
                
  
  
  
  
    <li class="md-nav__item">
      <a href="../../../template/%E3%81%BE%E3%81%9A%E3%81%93%E3%82%8C%E3%82%92%E8%AA%AD%E3%82%82%E3%81%86%E3%83%AA%E3%82%B9%E3%83%88/" class="md-nav__link">
        
  
  
  <span class="md-ellipsis">
    
  
    まずこれを読もうリスト
  

    
  </span>
  
  

      </a>
    </li>
  

              
            
              
                
  
  
  
  
    <li class="md-nav__item">
      <a href="../../../template/%E5%AE%8C%E5%85%A8%E5%BD%A2%E5%BC%8F%E3%81%AE%E3%83%A6%E3%83%BC%E3%82%B9%E3%82%B1%E3%83%BC%E3%82%B9/" class="md-nav__link">
        
  
  
  <span class="md-ellipsis">
    
  
    完全形式のユースケース
  

    
  </span>
  
  

      </a>
    </li>
  

              
            
              
                
  
  
  
  
    <li class="md-nav__item">
      <a href="../../../template/%E8%A6%81%E4%BB%B6%E5%AE%9A%E7%BE%A9/" class="md-nav__link">
        
  
  
  <span class="md-ellipsis">
    
  
    要件定義
  

    
  </span>
  
  

      </a>
    </li>
  

              
            
              
                
  
  
  
  
    <li class="md-nav__item">
      <a href="../../../template/%E8%A8%AD%E8%A8%88/" class="md-nav__link">
        
  
  
  <span class="md-ellipsis">
    
  
    設計
  

    
  </span>
  
  

      </a>
    </li>
  

              
            
          </ul>
        </nav>
      
    </li>
  

    
      
      
  
  
    
  
  
  
    
    
    
    
      
        
        
      
      
        
      
    
    
    <li class="md-nav__item md-nav__item--active md-nav__item--section md-nav__item--nested">
      
        
        
        <input class="md-nav__toggle md-toggle " type="checkbox" id="__nav_8" checked>
        
          
          <label class="md-nav__link" for="__nav_8" id="__nav_8_label" tabindex="">
            
  
  
  <span class="md-ellipsis">
    
  
    実践ガイド
  

    
  </span>
  
  

            <span class="md-nav__icon md-icon"></span>
          </label>
        
        <nav class="md-nav" data-md-level="1" aria-labelledby="__nav_8_label" aria-expanded="true">
          <label class="md-nav__title" for="__nav_8">
            <span class="md-nav__icon md-icon"></span>
            
  
    実践ガイド
  

          </label>
          <ul class="md-nav__list" data-md-scrollfix>
            
              
                
  
  
  
  
    <li class="md-nav__item">
      <a href="../../" class="md-nav__link">
        
  
  
  <span class="md-ellipsis">
    
  
    概要
  

    
  </span>
  
  

      </a>
    </li>
  

              
            
              
                
  
  
    
  
  
  
    
    
    
    
      
      
        
          
          
        
      
    
    
    <li class="md-nav__item md-nav__item--active md-nav__item--section md-nav__item--nested">
      
        
        
        <input class="md-nav__toggle md-toggle " type="checkbox" id="__nav_8_2" checked>
        
          
          <label class="md-nav__link" for="__nav_8_2" id="__nav_8_2_label" tabindex="">
            
  
  
  <span class="md-ellipsis">
    
  
    バックエンド編（Java版）
  

    
  </span>
  
  

            <span class="md-nav__icon md-icon"></span>
          </label>
        
        <nav class="md-nav" data-md-level="2" aria-labelledby="__nav_8_2_label" aria-expanded="true">
          <label class="md-nav__title" for="__nav_8_2">
            <span class="md-nav__icon md-icon"></span>
            
  
    バックエンド編（Java版）
  

          </label>
          <ul class="md-nav__list" data-md-scrollfix>
            
              
                
  
  
  
  
    <li class="md-nav__item">
      <a href="../chapter00/" class="md-nav__link">
        
  
  
  <span class="md-ellipsis">
    
  
    はじめに
  

    
  </span>
  
  

      </a>
    </li>
  

              
            
              
                
  
  
  
  
    <li class="md-nav__item">
      <a href="../chapter01/" class="md-nav__link">
        
  
  
  <span class="md-ellipsis">
    
  
    第1章
  

    
  </span>
  
  

      </a>
    </li>
  

              
            
              
                
  
  
  
  
    <li class="md-nav__item">
      <a href="../chapter02/" class="md-nav__link">
        
  
  
  <span class="md-ellipsis">
    
  
    第2章
  

    
  </span>
  
  

      </a>
    </li>
  

              
            
              
                
  
  
  
  
    <li class="md-nav__item">
      <a href="../chapter03/" class="md-nav__link">
        
  
  
  <span class="md-ellipsis">
    
  
    第3章
  

    
  </span>
  
  

      </a>
    </li>
  

              
            
              
                
  
  
  
  
    <li class="md-nav__item">
      <a href="../chapter04/" class="md-nav__link">
        
  
  
  <span class="md-ellipsis">
    
  
    第4章
  

    
  </span>
  
  

      </a>
    </li>
  

              
            
              
                
  
  
  
  
    <li class="md-nav__item">
      <a href="../chapter05/" class="md-nav__link">
        
  
  
  <span class="md-ellipsis">
    
  
    第5章
  

    
  </span>
  
  

      </a>
    </li>
  

              
            
              
                
  
  
  
  
    <li class="md-nav__item">
      <a href="../chapter06/" class="md-nav__link">
        
  
  
  <span class="md-ellipsis">
    
  
    第6章
  

    
  </span>
  
  

      </a>
    </li>
  

              
            
              
                
  
  
  
  
    <li class="md-nav__item">
      <a href="../chapter07/" class="md-nav__link">
        
  
  
  <span class="md-ellipsis">
    
  
    第7章
  

    
  </span>
  
  

      </a>
    </li>
  

              
            
              
                
  
  
  
  
    <li class="md-nav__item">
      <a href="../chapter08/" class="md-nav__link">
        
  
  
  <span class="md-ellipsis">
    
  
    第8章
  

    
  </span>
  
  

      </a>
    </li>
  

              
            
              
                
  
  
  
  
    <li class="md-nav__item">
      <a href="../chapter09/" class="md-nav__link">
        
  
  
  <span class="md-ellipsis">
    
  
    第9章
  

    
  </span>
  
  

      </a>
    </li>
  

              
            
              
                
  
  
  
  
    <li class="md-nav__item">
      <a href="../chapter10/" class="md-nav__link">
        
  
  
  <span class="md-ellipsis">
    
  
    第10章
  

    
  </span>
  
  

      </a>
    </li>
  

              
            
              
                
  
  
  
  
    <li class="md-nav__item">
      <a href="../chapter11/" class="md-nav__link">
        
  
  
  <span class="md-ellipsis">
    
  
    第11章
  

    
  </span>
  
  

      </a>
    </li>
  

              
            
              
                
  
  
  
  
    <li class="md-nav__item">
      <a href="../chapter12/" class="md-nav__link">
        
  
  
  <span class="md-ellipsis">
    
  
    第12章
  

    
  </span>
  
  

      </a>
    </li>
  

              
            
              
                
  
  
  
  
    <li class="md-nav__item">
      <a href="../chapter13/" class="md-nav__link">
        
  
  
  <span class="md-ellipsis">
    
  
    第13章
  

    
  </span>
  
  

      </a>
    </li>
  

              
            
              
                
  
  
  
  
    <li class="md-nav__item">
      <a href="../chapter14/" class="md-nav__link">
        
  
  
  <span class="md-ellipsis">
    
  
    第14章
  

    
  </span>
  
  

      </a>
    </li>
  

              
            
              
                
  
  
  
  
    <li class="md-nav__item">
      <a href="../chapter15/" class="md-nav__link">
        
  
  
  <span class="md-ellipsis">
    
  
    第15章
  

    
  </span>
  
  

      </a>
    </li>
  

              
            
              
                
  
  
  
  
    <li class="md-nav__item">
      <a href="../chapter16/" class="md-nav__link">
        
  
  
  <span class="md-ellipsis">
    
  
    第16章
  

    
  </span>
  
  

      </a>
    </li>
  

              
            
              
                
  
  
  
  
    <li class="md-nav__item">
      <a href="../chapter17/" class="md-nav__link">
        
  
  
  <span class="md-ellipsis">
    
  
    第17章
  

    
  </span>
  
  

      </a>
    </li>
  

              
            
              
                
  
  
  
  
    <li class="md-nav__item">
      <a href="../chapter18/" class="md-nav__link">
        
  
  
  <span class="md-ellipsis">
    
  
    第18章
  

    
  </span>
  
  

      </a>
    </li>
  

              
            
              
                
  
  
  
  
    <li class="md-nav__item">
      <a href="../chapter19/" class="md-nav__link">
        
  
  
  <span class="md-ellipsis">
    
  
    第19章
  

    
  </span>
  
  

      </a>
    </li>
  

              
            
              
                
  
  
  
  
    <li class="md-nav__item">
      <a href="../chapter20/" class="md-nav__link">
        
  
  
  <span class="md-ellipsis">
    
  
    第20章
  

    
  </span>
  
  

      </a>
    </li>
  

              
            
              
                
  
  
  
  
    <li class="md-nav__item">
      <a href="../chapter21/" class="md-nav__link">
        
  
  
  <span class="md-ellipsis">
    
  
    第21章
  

    
  </span>
  
  

      </a>
    </li>
  

              
            
              
                
  
  
  
  
    <li class="md-nav__item">
      <a href="../chapter22/" class="md-nav__link">
        
  
  
  <span class="md-ellipsis">
    
  
    第22章
  

    
  </span>
  
  

      </a>
    </li>
  

              
            
              
                
  
  
  
  
    <li class="md-nav__item">
      <a href="../chapter23/" class="md-nav__link">
        
  
  
  <span class="md-ellipsis">
    
  
    第23章
  

    
  </span>
  
  

      </a>
    </li>
  

              
            
              
                
  
  
  
  
    <li class="md-nav__item">
      <a href="../chapter24/" class="md-nav__link">
        
  
  
  <span class="md-ellipsis">
    
  
    第24章
  

    
  </span>
  
  

      </a>
    </li>
  

              
            
              
                
  
  
  
  
    <li class="md-nav__item">
      <a href="../chapter25/" class="md-nav__link">
        
  
  
  <span class="md-ellipsis">
    
  
    第25章
  

    
  </span>
  
  

      </a>
    </li>
  

              
            
              
                
  
  
    
  
  
  
    <li class="md-nav__item md-nav__item--active">
      
      <input class="md-nav__toggle md-toggle" type="checkbox" id="__toc">
      
      
        
      
      
        <label class="md-nav__link md-nav__link--active" for="__toc">
          
  
  
  <span class="md-ellipsis">
    
  
    第26章
  

    
  </span>
  
  

          <span class="md-nav__icon md-icon"></span>
        </label>
      
      <a href="./" class="md-nav__link md-nav__link--active">
        
  
  
  <span class="md-ellipsis">
    
  
    第26章
  

    
  </span>
  
  

      </a>
      
        

<nav class="md-nav md-nav--secondary" aria-label="Table of contents">
  
  
  
    
  
  
    <label class="md-nav__title" for="__toc">
      <span class="md-nav__icon md-icon"></span>
      Table of contents
    </label>
    <ul class="md-nav__list" data-md-component="toc" data-md-scrollfix>
      
        <li class="md-nav__item">
  <a href="#261" class="md-nav__link">
    <span class="md-ellipsis">
      
        26.1 ダウンロード機能の概要
      
    </span>
  </a>
  
    <nav class="md-nav" aria-label="26.1 ダウンロード機能の概要">
      <ul class="md-nav__list">
        
          <li class="md-nav__item">
  <a href="#_1" class="md-nav__link">
    <span class="md-ellipsis">
      
        ダウンロード機能の必要性
      
    </span>
  </a>
  
</li>
        
          <li class="md-nav__item">
  <a href="#_2" class="md-nav__link">
    <span class="md-ellipsis">
      
        ダウンロード対象
      
    </span>
  </a>
  
</li>
        
      </ul>
    </nav>
  
</li>
      
        <li class="md-nav__item">
  <a href="#262" class="md-nav__link">
    <span class="md-ellipsis">
      
        26.2 ダウンロード機能の設計
      
    </span>
  </a>
  
    <nav class="md-nav" aria-label="26.2 ダウンロード機能の設計">
      <ul class="md-nav__list">
        
          <li class="md-nav__item">
  <a href="#_3" class="md-nav__link">
    <span class="md-ellipsis">
      
        アーキテクチャ
      
    </span>
  </a>
  
</li>
        
          <li class="md-nav__item">
  <a href="#_4" class="md-nav__link">
    <span class="md-ellipsis">
      
        ダウンロード対象の定義
      
    </span>
  </a>
  
</li>
        
          <li class="md-nav__item">
  <a href="#_5" class="md-nav__link">
    <span class="md-ellipsis">
      
        ダウンロード条件
      
    </span>
  </a>
  
</li>
        
      </ul>
    </nav>
  
</li>
      
        <li class="md-nav__item">
  <a href="#263-csv" class="md-nav__link">
    <span class="md-ellipsis">
      
        26.3 CSVエクスポータの実装
      
    </span>
  </a>
  
    <nav class="md-nav" aria-label="26.3 CSVエクスポータの実装">
      <ul class="md-nav__list">
        
          <li class="md-nav__item">
  <a href="#csv" class="md-nav__link">
    <span class="md-ellipsis">
      
        CSVエクスポータインターフェース
      
    </span>
  </a>
  
</li>
        
          <li class="md-nav__item">
  <a href="#csv_1" class="md-nav__link">
    <span class="md-ellipsis">
      
        仕訳CSVエクスポータ
      
    </span>
  </a>
  
</li>
        
          <li class="md-nav__item">
  <a href="#csv_2" class="md-nav__link">
    <span class="md-ellipsis">
      
        財務諸表CSVエクスポータ
      
    </span>
  </a>
  
</li>
        
          <li class="md-nav__item">
  <a href="#csv_3" class="md-nav__link">
    <span class="md-ellipsis">
      
        勘定科目CSVエクスポータ
      
    </span>
  </a>
  
</li>
        
      </ul>
    </nav>
  
</li>
      
        <li class="md-nav__item">
  <a href="#264" class="md-nav__link">
    <span class="md-ellipsis">
      
        26.4 ダウンロードサービスの実装
      
    </span>
  </a>
  
    <nav class="md-nav" aria-label="26.4 ダウンロードサービスの実装">
      <ul class="md-nav__list">
        
          <li class="md-nav__item">
  <a href="#_6" class="md-nav__link">
    <span class="md-ellipsis">
      
        ダウンロードサービス
      
    </span>
  </a>
  
</li>
        
      </ul>
    </nav>
  
</li>
      
        <li class="md-nav__item">
  <a href="#265-api" class="md-nav__link">
    <span class="md-ellipsis">
      
        26.5 ダウンロードAPIの実装
      
    </span>
  </a>
  
    <nav class="md-nav" aria-label="26.5 ダウンロードAPIの実装">
      <ul class="md-nav__list">
        
          <li class="md-nav__item">
  <a href="#_7" class="md-nav__link">
    <span class="md-ellipsis">
      
        ダウンロードコントローラ
      
    </span>
  </a>
  
</li>
        
          <li class="md-nav__item">
  <a href="#dto" class="md-nav__link">
    <span class="md-ellipsis">
      
        リクエスト/レスポンスDTO
      
    </span>
  </a>
  
</li>
        
      </ul>
    </nav>
  
</li>
      
        <li class="md-nav__item">
  <a href="#266" class="md-nav__link">
    <span class="md-ellipsis">
      
        26.6 権限によるアクセス制御
      
    </span>
  </a>
  
    <nav class="md-nav" aria-label="26.6 権限によるアクセス制御">
      <ul class="md-nav__list">
        
          <li class="md-nav__item">
  <a href="#_8" class="md-nav__link">
    <span class="md-ellipsis">
      
        ダウンロード権限マトリクス
      
    </span>
  </a>
  
</li>
        
          <li class="md-nav__item">
  <a href="#_9" class="md-nav__link">
    <span class="md-ellipsis">
      
        権限チェックの実装
      
    </span>
  </a>
  
</li>
        
      </ul>
    </nav>
  
</li>
      
        <li class="md-nav__item">
  <a href="#267" class="md-nav__link">
    <span class="md-ellipsis">
      
        26.7 大量データのダウンロード対応
      
    </span>
  </a>
  
    <nav class="md-nav" aria-label="26.7 大量データのダウンロード対応">
      <ul class="md-nav__list">
        
          <li class="md-nav__item">
  <a href="#_10" class="md-nav__link">
    <span class="md-ellipsis">
      
        ストリーミング出力
      
    </span>
  </a>
  
</li>
        
          <li class="md-nav__item">
  <a href="#_11" class="md-nav__link">
    <span class="md-ellipsis">
      
        ストリーミング実装
      
    </span>
  </a>
  
</li>
        
          <li class="md-nav__item">
  <a href="#_12" class="md-nav__link">
    <span class="md-ellipsis">
      
        非同期ダウンロード
      
    </span>
  </a>
  
</li>
        
          <li class="md-nav__item">
  <a href="#_13" class="md-nav__link">
    <span class="md-ellipsis">
      
        ダウンロードジョブ
      
    </span>
  </a>
  
</li>
        
      </ul>
    </nav>
  
</li>
      
        <li class="md-nav__item">
  <a href="#268-excel" class="md-nav__link">
    <span class="md-ellipsis">
      
        26.8 Excel形式でのダウンロード
      
    </span>
  </a>
  
    <nav class="md-nav" aria-label="26.8 Excel形式でのダウンロード">
      <ul class="md-nav__list">
        
          <li class="md-nav__item">
  <a href="#excel" class="md-nav__link">
    <span class="md-ellipsis">
      
        Excel出力の実装
      
    </span>
  </a>
  
</li>
        
      </ul>
    </nav>
  
</li>
      
        <li class="md-nav__item">
  <a href="#_14" class="md-nav__link">
    <span class="md-ellipsis">
      
        まとめ
      
    </span>
  </a>
  
    <nav class="md-nav" aria-label="まとめ">
      <ul class="md-nav__list">
        
          <li class="md-nav__item">
  <a href="#_15" class="md-nav__link">
    <span class="md-ellipsis">
      
        重要なポイント
      
    </span>
  </a>
  
</li>
        
          <li class="md-nav__item">
  <a href="#_16" class="md-nav__link">
    <span class="md-ellipsis">
      
        ダウンロード機能の用途
      
    </span>
  </a>
  
</li>
        
      </ul>
    </nav>
  
</li>
      
    </ul>
  
</nav>
      
    </li>
  

              
            
              
                
  
  
  
  
    <li class="md-nav__item">
      <a href="../chapter27/" class="md-nav__link">
        
  
  
  <span class="md-ellipsis">
    
  
    第27章
  

    
  </span>
  
  

      </a>
    </li>
  

              
            
              
                
  
  
  
  
    <li class="md-nav__item">
      <a href="../chapter28/" class="md-nav__link">
        
  
  
  <span class="md-ellipsis">
    
  
    第28章
  

    
  </span>
  
  

      </a>
    </li>
  

              
            
              
                
  
  
  
  
    <li class="md-nav__item">
      <a href="../chapter29/" class="md-nav__link">
        
  
  
  <span class="md-ellipsis">
    
  
    第29章
  

    
  </span>
  
  

      </a>
    </li>
  

              
            
              
                
  
  
  
  
    <li class="md-nav__item">
      <a href="../chapter30/" class="md-nav__link">
        
  
  
  <span class="md-ellipsis">
    
  
    第30章
  

    
  </span>
  
  

      </a>
    </li>
  

              
            
              
                
  
  
  
  
    <li class="md-nav__item">
      <a href="../chapter31/" class="md-nav__link">
        
  
  
  <span class="md-ellipsis">
    
  
    第31章
  

    
  </span>
  
  

      </a>
    </li>
  

              
            
              
                
  
  
  
  
    <li class="md-nav__item">
      <a href="../chapter32/" class="md-nav__link">
        
  
  
  <span class="md-ellipsis">
    
  
    第32章
  

    
  </span>
  
  

      </a>
    </li>
  

              
            
          </ul>
        </nav>
      
    </li>
  

              
            
              
                
  
  
  
  
    
    
    
    
      
      
        
          
          
        
      
    
    
    <li class="md-nav__item md-nav__item--section md-nav__item--nested">
      
        
        
        <input class="md-nav__toggle md-toggle " type="checkbox" id="__nav_8_3" >
        
          
          <label class="md-nav__link" for="__nav_8_3" id="__nav_8_3_label" tabindex="">
            
  
  
  <span class="md-ellipsis">
    
  
    フロントエンド編（React版）
  

    
  </span>
  
  

            <span class="md-nav__icon md-icon"></span>
          </label>
        
        <nav class="md-nav" data-md-level="2" aria-labelledby="__nav_8_3_label" aria-expanded="false">
          <label class="md-nav__title" for="__nav_8_3">
            <span class="md-nav__icon md-icon"></span>
            
  
    フロントエンド編（React版）
  

          </label>
          <ul class="md-nav__list" data-md-scrollfix>
            
              
                
  
  
  
  
    <li class="md-nav__item">
      <a href="../../frontend/chapter00/" class="md-nav__link">
        
  
  
  <span class="md-ellipsis">
    
  
    はじめに
  

    
  </span>
  
  

      </a>
    </li>
  

              
            
              
                
  
  
  
  
    <li class="md-nav__item">
      <a href="../../frontend/chapter01/" class="md-nav__link">
        
  
  
  <span class="md-ellipsis">
    
  
    第1章
  

    
  </span>
  
  

      </a>
    </li>
  

              
            
              
                
  
  
  
  
    <li class="md-nav__item">
      <a href="../../frontend/chapter02/" class="md-nav__link">
        
  
  
  <span class="md-ellipsis">
    
  
    第2章
  

    
  </span>
  
  

      </a>
    </li>
  

              
            
              
                
  
  
  
  
    <li class="md-nav__item">
      <a href="../../frontend/chapter03/" class="md-nav__link">
        
  
  
  <span class="md-ellipsis">
    
  
    第3章
  

    
  </span>
  
  

      </a>
    </li>
  

              
            
              
                
  
  
  
  
    <li class="md-nav__item">
      <a href="../../frontend/chapter04/" class="md-nav__link">
        
  
  
  <span class="md-ellipsis">
    
  
    第4章
  

    
  </span>
  
  

      </a>
    </li>
  

              
            
              
                
  
  
  
  
    <li class="md-nav__item">
      <a href="../../frontend/chapter05/" class="md-nav__link">
        
  
  
  <span class="md-ellipsis">
    
  
    第5章
  

    
  </span>
  
  

      </a>
    </li>
  

              
            
              
                
  
  
  
  
    <li class="md-nav__item">
      <a href="../../frontend/chapter06/" class="md-nav__link">
        
  
  
  <span class="md-ellipsis">
    
  
    第6章
  

    
  </span>
  
  

      </a>
    </li>
  

              
            
              
                
  
  
  
  
    <li class="md-nav__item">
      <a href="../../frontend/chapter07/" class="md-nav__link">
        
  
  
  <span class="md-ellipsis">
    
  
    第7章
  

    
  </span>
  
  

      </a>
    </li>
  

              
            
              
                
  
  
  
  
    <li class="md-nav__item">
      <a href="../../frontend/chapter08/" class="md-nav__link">
        
  
  
  <span class="md-ellipsis">
    
  
    第8章
  

    
  </span>
  
  

      </a>
    </li>
  

              
            
              
                
  
  
  
  
    <li class="md-nav__item">
      <a href="../../frontend/chapter09/" class="md-nav__link">
        
  
  
  <span class="md-ellipsis">
    
  
    第9章
  

    
  </span>
  
  

      </a>
    </li>
  

              
            
              
                
  
  
  
  
    <li class="md-nav__item">
      <a href="../../frontend/chapter10/" class="md-nav__link">
        
  
  
  <span class="md-ellipsis">
    
  
    第10章
  

    
  </span>
  
  

      </a>
    </li>
  

              
            
              
                
  
  
  
  
    <li class="md-nav__item">
      <a href="../../frontend/chapter11/" class="md-nav__link">
        
  
  
  <span class="md-ellipsis">
    
  
    第11章
  

    
  </span>
  
  

      </a>
    </li>
  

              
            
              
                
  
  
  
  
    <li class="md-nav__item">
      <a href="../../frontend/chapter12/" class="md-nav__link">
        
  
  
  <span class="md-ellipsis">
    
  
    第12章
  

    
  </span>
  
  

      </a>
    </li>
  

              
            
              
                
  
  
  
  
    <li class="md-nav__item">
      <a href="../../frontend/chapter13/" class="md-nav__link">
        
  
  
  <span class="md-ellipsis">
    
  
    第13章
  

    
  </span>
  
  

      </a>
    </li>
  

              
            
              
                
  
  
  
  
    <li class="md-nav__item">
      <a href="../../frontend/chapter14/" class="md-nav__link">
        
  
  
  <span class="md-ellipsis">
    
  
    第14章
  

    
  </span>
  
  

      </a>
    </li>
  

              
            
              
                
  
  
  
  
    <li class="md-nav__item">
      <a href="../../frontend/chapter15/" class="md-nav__link">
        
  
  
  <span class="md-ellipsis">
    
  
    第15章
  

    
  </span>
  
  

      </a>
    </li>
  

              
            
              
                
  
  
  
  
    <li class="md-nav__item">
      <a href="../../frontend/chapter16/" class="md-nav__link">
        
  
  
  <span class="md-ellipsis">
    
  
    第16章
  

    
  </span>
  
  

      </a>
    </li>
  

              
            
              
                
  
  
  
  
    <li class="md-nav__item">
      <a href="../../frontend/chapter17/" class="md-nav__link">
        
  
  
  <span class="md-ellipsis">
    
  
    第17章
  

    
  </span>
  
  

      </a>
    </li>
  

              
            
              
                
  
  
  
  
    <li class="md-nav__item">
      <a href="../../frontend/chapter18/" class="md-nav__link">
        
  
  
  <span class="md-ellipsis">
    
  
    第18章
  

    
  </span>
  
  

      </a>
    </li>
  

              
            
              
                
  
  
  
  
    <li class="md-nav__item">
      <a href="../../frontend/chapter19/" class="md-nav__link">
        
  
  
  <span class="md-ellipsis">
    
  
    第19章
  

    
  </span>
  
  

      </a>
    </li>
  

              
            
              
                
  
  
  
  
    <li class="md-nav__item">
      <a href="../../frontend/chapter20/" class="md-nav__link">
        
  
  
  <span class="md-ellipsis">
    
  
    第20章
  

    
  </span>
  
  

      </a>
    </li>
  

              
            
              
                
  
  
  
  
    <li class="md-nav__item">
      <a href="../../frontend/chapter21/" class="md-nav__link">
        
  
  
  <span class="md-ellipsis">
    
  
    第21章
  

    
  </span>
  
  

      </a>
    </li>
  

              
            
              
                
  
  
  
  
    <li class="md-nav__item">
      <a href="../../frontend/chapter22/" class="md-nav__link">
        
  
  
  <span class="md-ellipsis">
    
  
    第22章
  

    
  </span>
  
  

      </a>
    </li>
  

              
            
              
                
  
  
  
  
    <li class="md-nav__item">
      <a href="../../frontend/chapter23/" class="md-nav__link">
        
  
  
  <span class="md-ellipsis">
    
  
    第23章
  

    
  </span>
  
  

      </a>
    </li>
  

              
            
              
                
  
  
  
  
    <li class="md-nav__item">
      <a href="../../frontend/chapter24/" class="md-nav__link">
        
  
  
  <span class="md-ellipsis">
    
  
    第24章
  

    
  </span>
  
  

      </a>
    </li>
  

              
            
          </ul>
        </nav>
      
    </li>
  

              
            
          </ul>
        </nav>
      
    </li>
  

    
  </ul>
</nav>
                  </div>
                </div>
              </div>
            
            
          
          
            <div class="md-content" data-md-component="content">
              
              <article class="md-content__inner md-typeset">
                
                  


  
  


<h1 id="26-2-">第26章: 非機能要件 2 - データダウンロード機能<a class="headerlink" href="#26-2-" title="Permanent link">&para;</a></h1>
<h2 id="261">26.1 ダウンロード機能の概要<a class="headerlink" href="#261" title="Permanent link">&para;</a></h2>
<h3 id="_1">ダウンロード機能の必要性<a class="headerlink" href="#_1" title="Permanent link">&para;</a></h3>
<p>財務会計システムでは、データを外部にエクスポートする機能が必須です。会計監査、税務申告、経営分析、バックアップなど多様な用途に対応します。</p>
<p><img src="data:image/svg+xml;base64,PHN2ZyB4bWxucz0iaHR0cDovL3d3dy53My5vcmcvMjAwMC9zdmciIHhtbG5zOnhsaW5rPSJodHRwOi8vd3d3LnczLm9yZy8xOTk5L3hsaW5rIiBjb250ZW50U3R5bGVUeXBlPSJ0ZXh0L2NzcyIgZGF0YS1kaWFncmFtLXR5cGU9IkRFU0NSSVBUSU9OIiBoZWlnaHQ9IjQ4MHB4IiBwcmVzZXJ2ZUFzcGVjdFJhdGlvPSJub25lIiBzdHlsZT0id2lkdGg6NTYxcHg7aGVpZ2h0OjQ4MHB4O2JhY2tncm91bmQ6I0ZGRkZGRjsiIHZlcnNpb249IjEuMSIgdmlld0JveD0iMCAwIDU2MSA0ODAiIHdpZHRoPSI1NjFweCIgem9vbUFuZFBhbj0ibWFnbmlmeSI+PHRpdGxlPiYjMTI0ODc7JiMxMjU0MDsmIzEyNDc5OyYjMTI0ODA7JiMxMjQ1NDsmIzEyNTMxOyYjMTI1MjU7JiMxMjU0MDsmIzEyNDg5OyYjMTIzOTg7JiMyOTk5MjsmIzM2ODg0OzwvdGl0bGU+PGRlZnMvPjxnPjxnIGNsYXNzPSJ0aXRsZSIgZGF0YS1zb3VyY2UtbGluZT0iMSI+PHRleHQgZmlsbD0iIzAwMDAwMCIgZm9udC1mYW1pbHk9InNhbnMtc2VyaWYiIGZvbnQtc2l6ZT0iMTQiIGZvbnQtd2VpZ2h0PSJib2xkIiBsZW5ndGhBZGp1c3Q9InNwYWNpbmciIHRleHRMZW5ndGg9IjE2Ny45OTkzIiB4PSIxODkuNTAwNCIgeT0iMjIuOTk1MSI+JiMxMjQ4NzsmIzEyNTQwOyYjMTI0Nzk7JiMxMjQ4MDsmIzEyNDU0OyYjMTI1MzE7JiMxMjUyNTsmIzEyNTQwOyYjMTI0ODk7JiMxMjM5ODsmIzI5OTkyOyYjMzY4ODQ7PC90ZXh0PjwvZz48IS0tY2x1c3RlciA/Pz8/Pz8/Py0tPjxnIGNsYXNzPSJjbHVzdGVyIiBkYXRhLWVudGl0eT0iLi4uLi4uLi4iIGRhdGEtc291cmNlLWxpbmU9IjMiIGRhdGEtdWlkPSJlbnQwMDAyIiBpZD0iY2x1c3Rlcl8uLi4uLi4uLiI+PHJlY3QgZmlsbD0ibm9uZSIgaGVpZ2h0PSI0MjkuOTEiIHJ4PSIyLjUiIHJ5PSIyLjUiIHN0eWxlPSJzdHJva2U6IzE4MTgxODtzdHJva2Utd2lkdGg6MTsiIHdpZHRoPSI1NDgiIHg9IjciIHk9IjQ0LjI5NjkiLz48dGV4dCBmaWxsPSIjMDAwMDAwIiBmb250LWZhbWlseT0ic2Fucy1zZXJpZiIgZm9udC1zaXplPSIxNCIgZm9udC13ZWlnaHQ9ImJvbGQiIGxlbmd0aEFkanVzdD0ic3BhY2luZyIgdGV4dExlbmd0aD0iMTExLjk5OTUiIHg9IjIyNS4wMDAyIiB5PSI1OS4yOTIiPiYjMTI0ODA7JiMxMjQ1NDsmIzEyNTMxOyYjMTI1MjU7JiMxMjU0MDsmIzEyNDg5OyYjMjk5OTI7JiMzNjg4NDs8L3RleHQ+PC9nPjwhLS1jbHVzdGVyIGxlZ2FsLS0+PGcgY2xhc3M9ImNsdXN0ZXIiIGRhdGEtZW50aXR5PSJsZWdhbCIgZGF0YS1zb3VyY2UtbGluZT0iNCIgZGF0YS11aWQ9ImVudDAwMDMiIGlkPSJjbHVzdGVyX2xlZ2FsIj48cmVjdCBmaWxsPSJub25lIiBoZWlnaHQ9IjE2OS40NiIgcng9IjIuNSIgcnk9IjIuNSIgc3R5bGU9InN0cm9rZTojMTgxODE4O3N0cm9rZS13aWR0aDoxOyIgd2lkdGg9IjIzOCIgeD0iMzEiIHk9Ijg3LjI5NjkiLz48dGV4dCBmaWxsPSIjMDAwMDAwIiBmb250LWZhbWlseT0ic2Fucy1zZXJpZiIgZm9udC1zaXplPSIxNCIgZm9udC13ZWlnaHQ9ImJvbGQiIGxlbmd0aEFkanVzdD0ic3BhY2luZyIgdGV4dExlbmd0aD0iNTUuOTk5OCIgeD0iMTIyLjAwMDEiIHk9IjEwMi4yOTIiPiYjMjc4NjE7JiMyMzQ1MDsmIzIzNTUwOyYjMjQ1NDA7PC90ZXh0PjwvZz48IS0tY2x1c3RlciBidXNpbmVzcy0tPjxnIGNsYXNzPSJjbHVzdGVyIiBkYXRhLWVudGl0eT0iYnVzaW5lc3MiIGRhdGEtc291cmNlLWxpbmU9IjEwIiBkYXRhLXVpZD0iZW50MDAwNyIgaWQ9ImNsdXN0ZXJfYnVzaW5lc3MiPjxyZWN0IGZpbGw9Im5vbmUiIGhlaWdodD0iMTY5LjI4IiByeD0iMi41IiByeT0iMi41IiBzdHlsZT0ic3Ryb2tlOiMxODE4MTg7c3Ryb2tlLXdpZHRoOjE7IiB3aWR0aD0iMjM4IiB4PSIyOTMiIHk9Ijg3LjI5NjkiLz48dGV4dCBmaWxsPSIjMDAwMDAwIiBmb250LWZhbWlseT0ic2Fucy1zZXJpZiIgZm9udC1zaXplPSIxNCIgZm9udC13ZWlnaHQ9ImJvbGQiIGxlbmd0aEFkanVzdD0ic3BhY2luZyIgdGV4dExlbmd0aD0iNTUuOTk5OCIgeD0iMzg0LjAwMDEiIHk9IjEwMi4yOTIiPiYjMjY5ODk7JiMyMTIwOTsmIzI3OTYzOyYjMjk5OTI7PC90ZXh0PjwvZz48IS0tY2x1c3RlciBvcHMtLT48ZyBjbGFzcz0iY2x1c3RlciIgZGF0YS1lbnRpdHk9Im9wcyIgZGF0YS1zb3VyY2UtbGluZT0iMTYiIGRhdGEtdWlkPSJlbnQwMDExIiBpZD0iY2x1c3Rlcl9vcHMiPjxyZWN0IGZpbGw9Im5vbmUiIGhlaWdodD0iMTY5LjQ1IiByeD0iMi41IiByeT0iMi41IiBzdHlsZT0ic3Ryb2tlOiMxODE4MTg7c3Ryb2tlLXdpZHRoOjE7IiB3aWR0aD0iMjk1IiB4PSIzMSIgeT0iMjgwLjc1NjkiLz48dGV4dCBmaWxsPSIjMDAwMDAwIiBmb250LWZhbWlseT0ic2Fucy1zZXJpZiIgZm9udC1zaXplPSIxNCIgZm9udC13ZWlnaHQ9ImJvbGQiIGxlbmd0aEFkanVzdD0ic3BhY2luZyIgdGV4dExlbmd0aD0iODMuOTk5NiIgeD0iMTM2LjUwMDIiIHk9IjI5NS43NTIiPiYjMTI0NzE7JiMxMjQ3MzsmIzEyNDg2OyYjMTI1MTI7JiMzNjkzOTsmIzI5OTkyOzwvdGV4dD48L2c+PCEtLWVudGl0eSA/Pz8/LS0+PGcgY2xhc3M9ImVudGl0eSIgZGF0YS1lbnRpdHk9Ii4uLi4iIGRhdGEtc291cmNlLWxpbmU9IjUiIGRhdGEtdWlkPSJlbnQwMDA0IiBpZD0iZW50aXR5Xy4uLi4iPjxlbGxpcHNlIGN4PSI4OS45OTc4IiBjeT0iMTM2LjgzMDUiIGZpbGw9IiNGMUYxRjEiIHJ4PSI0Mi41OTc4IiByeT0iMTQuNTIzNiIgc3R5bGU9InN0cm9rZTojMTgxODE4O3N0cm9rZS13aWR0aDowLjU7Ii8+PHRleHQgZmlsbD0iIzAwMDAwMCIgZm9udC1mYW1pbHk9InNhbnMtc2VyaWYiIGZvbnQtc2l6ZT0iMTQiIGxlbmd0aEFkanVzdD0ic3BhY2luZyIgdGV4dExlbmd0aD0iNTUuOTk5OCIgeD0iNjEuOTk3OSIgeT0iMTQxLjQ3ODkiPiYjMjAyNTA7JiMzNTMzNjsmIzMwNDM1OyYjMjY2MTk7PC90ZXh0PjwvZz48IS0tZW50aXR5ID8/Pz8tLT48ZyBjbGFzcz0iZW50aXR5IiBkYXRhLWVudGl0eT0iLi4uLiIgZGF0YS1zb3VyY2UtbGluZT0iNiIgZGF0YS11aWQ9ImVudDAwMDUiIGlkPSJlbnRpdHlfLi4uLiI+PGVsbGlwc2UgY3g9IjIwOS45OTc4IiBjeT0iMTM2LjgzMDUiIGZpbGw9IiNGMUYxRjEiIHJ4PSI0Mi41OTc4IiByeT0iMTQuNTIzNiIgc3R5bGU9InN0cm9rZTojMTgxODE4O3N0cm9rZS13aWR0aDowLjU7Ii8+PHRleHQgZmlsbD0iIzAwMDAwMCIgZm9udC1mYW1pbHk9InNhbnMtc2VyaWYiIGZvbnQtc2l6ZT0iMTQiIGxlbmd0aEFkanVzdD0ic3BhY2luZyIgdGV4dExlbmd0aD0iNTUuOTk5OCIgeD0iMTgxLjk5NzkiIHk9IjE0MS40Nzg5Ij4mIzMxMjQ2OyYjMjEyMDk7JiMzMDAwMzsmIzIxNTc4OzwvdGV4dD48L2c+PCEtLWVudGl0eSA/Pz8/Pz8tLT48ZyBjbGFzcz0iZW50aXR5IiBkYXRhLWVudGl0eT0iLi4uLi4uIiBkYXRhLXNvdXJjZS1saW5lPSI3IiBkYXRhLXVpZD0iZW50MDAwNiIgaWQ9ImVudGl0eV8uLi4uLi4iPjxlbGxpcHNlIGN4PSIxMDkuMDA0MiIgY3k9IjIyNi4wNDk3IiBmaWxsPSIjRjFGMUYxIiByeD0iNjEuNTE0MiIgcnk9IjE0LjcwMjgiIHN0eWxlPSJzdHJva2U6IzE4MTgxODtzdHJva2Utd2lkdGg6MC41OyIvPjx0ZXh0IGZpbGw9IiMwMDAwMDAiIGZvbnQtZmFtaWx5PSJzYW5zLXNlcmlmIiBmb250LXNpemU9IjE0IiBsZW5ndGhBZGp1c3Q9InNwYWNpbmciIHRleHRMZW5ndGg9IjgzLjk5OTYiIHg9IjY3LjAwNDQiIHk9IjIzMC42OTgyIj4mIzM4NjUxOyYjMjMzNzY7JiMyNDExNTsmIzMxODA3OyYjMjA0NDU7JiMyMzM4NDs8L3RleHQ+PC9nPjwhLS1lbnRpdHkgPz8/Py0tPjxnIGNsYXNzPSJlbnRpdHkiIGRhdGEtZW50aXR5PSIuLi4uIiBkYXRhLXNvdXJjZS1saW5lPSIxMSIgZGF0YS11aWQ9ImVudDAwMDgiIGlkPSJlbnRpdHlfLi4uLiI+PGVsbGlwc2UgY3g9IjM1MS45OTc4IiBjeT0iMTM2LjgzMDUiIGZpbGw9IiNGMUYxRjEiIHJ4PSI0Mi41OTc4IiByeT0iMTQuNTIzNiIgc3R5bGU9InN0cm9rZTojMTgxODE4O3N0cm9rZS13aWR0aDowLjU7Ii8+PHRleHQgZmlsbD0iIzAwMDAwMCIgZm9udC1mYW1pbHk9InNhbnMtc2VyaWYiIGZvbnQtc2l6ZT0iMTQiIGxlbmd0aEFkanVzdD0ic3BhY2luZyIgdGV4dExlbmd0aD0iNTUuOTk5OCIgeD0iMzIzLjk5NzkiIHk9IjE0MS40Nzg5Ij4mIzMyMDc2OyYjMjE5NDI7JiMyMDk5ODsmIzI2NTEyOzwvdGV4dD48L2c+PCEtLWVudGl0eSA/Pz8/LS0+PGcgY2xhc3M9ImVudGl0eSIgZGF0YS1lbnRpdHk9Ii4uLi4iIGRhdGEtc291cmNlLWxpbmU9IjEyIiBkYXRhLXVpZD0iZW50MDAwOSIgaWQ9ImVudGl0eV8uLi4uIj48ZWxsaXBzZSBjeD0iNDcxLjk5NzgiIGN5PSIxMzYuODMwNSIgZmlsbD0iI0YxRjFGMSIgcng9IjQyLjU5NzgiIHJ5PSIxNC41MjM2IiBzdHlsZT0ic3Ryb2tlOiMxODE4MTg7c3Ryb2tlLXdpZHRoOjAuNTsiLz48dGV4dCBmaWxsPSIjMDAwMDAwIiBmb250LWZhbWlseT0ic2Fucy1zZXJpZiIgZm9udC1zaXplPSIxNCIgbGVuZ3RoQWRqdXN0PSJzcGFjaW5nIiB0ZXh0TGVuZ3RoPSI1NS45OTk4IiB4PSI0NDMuOTk3OSIgeT0iMTQxLjQ3ODkiPiYjMjAxMDQ7JiMzMTYzOTsmIzMxNTc0OyYjMjM0NTA7PC90ZXh0PjwvZz48IS0tZW50aXR5ID8/Pz8tLT48ZyBjbGFzcz0iZW50aXR5IiBkYXRhLWVudGl0eT0iLi4uLiIgZGF0YS1zb3VyY2UtbGluZT0iMTMiIGRhdGEtdWlkPSJlbnQwMDEwIiBpZD0iZW50aXR5Xy4uLi4iPjxlbGxpcHNlIGN4PSIzNTEuOTk3OCIgY3k9IjIyNi4wNTA1IiBmaWxsPSIjRjFGMUYxIiByeD0iNDIuNTk3OCIgcnk9IjE0LjUyMzYiIHN0eWxlPSJzdHJva2U6IzE4MTgxODtzdHJva2Utd2lkdGg6MC41OyIvPjx0ZXh0IGZpbGw9IiMwMDAwMDAiIGZvbnQtZmFtaWx5PSJzYW5zLXNlcmlmIiBmb250LXNpemU9IjE0IiBsZW5ndGhBZGp1c3Q9InNwYWNpbmciIHRleHRMZW5ndGg9IjU1Ljk5OTgiIHg9IjMyMy45OTc5IiB5PSIyMzAuNjk4OSI+JiMzNzA5NjsmIzM4MjcyOyYjMjI1Nzc7JiMyMTU3ODs8L3RleHQ+PC9nPjwhLS1lbnRpdHkgPz8/Pz8/LS0+PGcgY2xhc3M9ImVudGl0eSIgZGF0YS1lbnRpdHk9Ii4uLi4uLiIgZGF0YS1zb3VyY2UtbGluZT0iMTciIGRhdGEtdWlkPSJlbnQwMDEyIiBpZD0iZW50aXR5Xy4uLi4uLiI+PGVsbGlwc2UgY3g9IjEwOS4wMDQyIiBjeT0iMzMwLjQ1OTciIGZpbGw9IiNGMUYxRjEiIHJ4PSI2MS41MTQyIiByeT0iMTQuNzAyOCIgc3R5bGU9InN0cm9rZTojMTgxODE4O3N0cm9rZS13aWR0aDowLjU7Ii8+PHRleHQgZmlsbD0iIzAwMDAwMCIgZm9udC1mYW1pbHk9InNhbnMtc2VyaWYiIGZvbnQtc2l6ZT0iMTQiIGxlbmd0aEFkanVzdD0ic3BhY2luZyIgdGV4dExlbmd0aD0iODMuOTk5NiIgeD0iNjcuMDA0NCIgeT0iMzM1LjEwODIiPiYjMTI0OTY7JiMxMjQ4MzsmIzEyNDYzOyYjMTI0NTA7JiMxMjQ4MzsmIzEyNTAzOzwvdGV4dD48L2c+PCEtLWVudGl0eSA/Pz8/Py0tPjxnIGNsYXNzPSJlbnRpdHkiIGRhdGEtZW50aXR5PSIuLi4uLiIgZGF0YS1zb3VyY2UtbGluZT0iMTgiIGRhdGEtdWlkPSJlbnQwMDEzIiBpZD0iZW50aXR5Xy4uLi4uIj48ZWxsaXBzZSBjeD0iMjU3Ljk5NzMiIGN5PSIzMzAuNDYwNSIgZmlsbD0iI0YxRjFGMSIgcng9IjUyLjQ5NzMiIHJ5PSIxNC41MjM2IiBzdHlsZT0ic3Ryb2tlOiMxODE4MTg7c3Ryb2tlLXdpZHRoOjAuNTsiLz48dGV4dCBmaWxsPSIjMDAwMDAwIiBmb250LWZhbWlseT0ic2Fucy1zZXJpZiIgZm9udC1zaXplPSIxNCIgbGVuZ3RoQWRqdXN0PSJzcGFjaW5nIiB0ZXh0TGVuZ3RoPSI2OS45OTk3IiB4PSIyMjIuOTk3NCIgeT0iMzM1LjEwODkiPiYjMTI0ODc7JiMxMjU0MDsmIzEyNDc5OyYjMzEyMjc7JiMzNDg5Mjs8L3RleHQ+PC9nPjwhLS1lbnRpdHkgPz8/Py0tPjxnIGNsYXNzPSJlbnRpdHkiIGRhdGEtZW50aXR5PSIuLi4uIiBkYXRhLXNvdXJjZS1saW5lPSIxOSIgZGF0YS11aWQ9ImVudDAwMTQiIGlkPSJlbnRpdHlfLi4uLiI+PGVsbGlwc2UgY3g9IjEwOC45OTc4IiBjeT0iNDE5LjY5MDUiIGZpbGw9IiNGMUYxRjEiIHJ4PSI0Mi41OTc4IiByeT0iMTQuNTIzNiIgc3R5bGU9InN0cm9rZTojMTgxODE4O3N0cm9rZS13aWR0aDowLjU7Ii8+PHRleHQgZmlsbD0iIzAwMDAwMCIgZm9udC1mYW1pbHk9InNhbnMtc2VyaWYiIGZvbnQtc2l6ZT0iMTQiIGxlbmd0aEFkanVzdD0ic3BhY2luZyIgdGV4dExlbmd0aD0iNTUuOTk5OCIgeD0iODAuOTk3OSIgeT0iNDI0LjMzODkiPiYjMjI4MDY7JiMzNzA5NjsmIzM2ODk5OyYjMjU2NTg7PC90ZXh0PjwvZz48IS0tU1JDPVtQUDNSSWlEMDQ4Umx5bklYTHlyWkhHY2I0QWdPVTJNNVQwVGdqNEtZbjVIUjN6THdvNHJJOUh3Uk9YdmNDaGxETXhXUjVJcFVwVm55LV90M2tjdE5qZEk0Vk9HYmlXQjFHdFFGYTI0YUFlNDN4QUtZWjJpbHJCR1RRekNyRW90OURfdnB0cjEzdF9rQnlVbzRxWjdERndhdVItWWNlempNb3hHYnFvb051ck5pWXljQ04tTTZyWEpuNEd0RUg5Wkh5UTVTZ3FiRUlLM2xjTldpb2tBMmFiRDN3d3VUbUV5SS1PMF92eEF0RGNfaUVrc0V2SlhBQmJ3NjVCc0l0LVVOV1JJTDJyLWE4djU0eVhPYlh4WUFGOWUtckx0aE1jSGxvM3VHLVdaSmdaVnViTXpqcnJ3NDAwNkdwUDdUZzA1NlhXZl9fYXV5dkFsaGVLcGVEYjhUdGVtNzJyTkdfRzgwXS0tPjwvZz48L3N2Zz4=" class="uml" alt="uml diagram" title="" /></p>
<h3 id="_2">ダウンロード対象<a class="headerlink" href="#_2" title="Permanent link">&para;</a></h3>
<p>財務会計システムで管理するデータはすべてダウンロード可能です。</p>
<p><img src="data:image/svg+xml;base64,PHN2ZyB4bWxucz0iaHR0cDovL3d3dy53My5vcmcvMjAwMC9zdmciIHhtbG5zOnhsaW5rPSJodHRwOi8vd3d3LnczLm9yZy8xOTk5L3hsaW5rIiBjb250ZW50U3R5bGVUeXBlPSJ0ZXh0L2NzcyIgZGF0YS1kaWFncmFtLXR5cGU9IkRFU0NSSVBUSU9OIiBoZWlnaHQ9IjQ2MXB4IiBwcmVzZXJ2ZUFzcGVjdFJhdGlvPSJub25lIiBzdHlsZT0id2lkdGg6MTA1OXB4O2hlaWdodDo0NjFweDtiYWNrZ3JvdW5kOiNGRkZGRkY7IiB2ZXJzaW9uPSIxLjEiIHZpZXdCb3g9IjAgMCAxMDU5IDQ2MSIgd2lkdGg9IjEwNTlweCIgem9vbUFuZFBhbj0ibWFnbmlmeSI+PHRpdGxlPiYjMTI0ODA7JiMxMjQ1NDsmIzEyNTMxOyYjMTI1MjU7JiMxMjU0MDsmIzEyNDg5OyYjMjM1NTA7JiMzNTkzNzsmIzE5OTY4OyYjMzUyMzk7PC90aXRsZT48ZGVmcy8+PGc+PGcgY2xhc3M9InRpdGxlIiBkYXRhLXNvdXJjZS1saW5lPSIxIj48dGV4dCBmaWxsPSIjMDAwMDAwIiBmb250LWZhbWlseT0ic2Fucy1zZXJpZiIgZm9udC1zaXplPSIxNCIgZm9udC13ZWlnaHQ9ImJvbGQiIGxlbmd0aEFkanVzdD0ic3BhY2luZyIgdGV4dExlbmd0aD0iMTM5Ljk5OTQiIHg9IjQ1Mi41MDAzIiB5PSIyMi45OTUxIj4mIzEyNDgwOyYjMTI0NTQ7JiMxMjUzMTsmIzEyNTI1OyYjMTI1NDA7JiMxMjQ4OTsmIzIzNTUwOyYjMzU5Mzc7JiMxOTk2ODsmIzM1MjM5OzwvdGV4dD48L2c+PCEtLWNsdXN0ZXIgPz8/Pz8/LS0+PGcgY2xhc3M9ImNsdXN0ZXIiIGRhdGEtZW50aXR5PSIuLi4uLi4iIGRhdGEtc291cmNlLWxpbmU9IjMiIGRhdGEtdWlkPSJlbnQwMDAyIiBpZD0iY2x1c3Rlcl8uLi4uLi4iPjxyZWN0IGZpbGw9Im5vbmUiIGhlaWdodD0iMTg1LjgyIiByeD0iMi41IiByeT0iMi41IiBzdHlsZT0ic3Ryb2tlOiMxODE4MTg7c3Ryb2tlLXdpZHRoOjE7IiB3aWR0aD0iMzExIiB4PSIxNiIgeT0iNDQuMjk2OSIvPjx0ZXh0IGZpbGw9IiMwMDAwMDAiIGZvbnQtZmFtaWx5PSJzYW5zLXNlcmlmIiBmb250LXNpemU9IjE0IiBmb250LXdlaWdodD0iYm9sZCIgbGVuZ3RoQWRqdXN0PSJzcGFjaW5nIiB0ZXh0TGVuZ3RoPSI4My45OTk2IiB4PSIxMjkuNTAwMiIgeT0iNTkuMjkyIj4mIzEyNTEwOyYjMTI0NzM7JiMxMjQ3OTsmIzEyNDg3OyYjMTI1NDA7JiMxMjQ3OTs8L3RleHQ+PC9nPjwhLS1jbHVzdGVyID8/Pz8/Pz8/Pz8/LS0+PGcgY2xhc3M9ImNsdXN0ZXIiIGRhdGEtZW50aXR5PSIuLi4uLi4uLi4uLiIgZGF0YS1zb3VyY2UtbGluZT0iMTAiIGRhdGEtdWlkPSJlbnQwMDA3IiBpZD0iY2x1c3Rlcl8uLi4uLi4uLi4uLiI+PHJlY3QgZmlsbD0ibm9uZSIgaGVpZ2h0PSIxNjkuNDYiIHJ4PSIyLjUiIHJ5PSIyLjUiIHN0eWxlPSJzdHJva2U6IzE4MTgxODtzdHJva2Utd2lkdGg6MTsiIHdpZHRoPSIyNTciIHg9IjQ5NiIgeT0iNTIuNDc2OSIvPjx0ZXh0IGZpbGw9IiMwMDAwMDAiIGZvbnQtZmFtaWx5PSJzYW5zLXNlcmlmIiBmb250LXNpemU9IjE0IiBmb250LXdlaWdodD0iYm9sZCIgbGVuZ3RoQWRqdXN0PSJzcGFjaW5nIiB0ZXh0TGVuZ3RoPSIxNTMuOTk5MyIgeD0iNTQ3LjUwMDMiIHk9IjY3LjQ3MiI+JiMxMjQ4ODsmIzEyNTIxOyYjMTI1MzE7JiMxMjQ3MDsmIzEyNDYzOyYjMTI0NzE7JiMxMjUxOTsmIzEyNTMxOyYjMTI0ODc7JiMxMjU0MDsmIzEyNDc5OzwvdGV4dD48L2c+PCEtLWNsdXN0ZXIgPz8/Py0tPjxnIGNsYXNzPSJjbHVzdGVyIiBkYXRhLWVudGl0eT0iLi4uLiIgZGF0YS1zb3VyY2UtbGluZT0iMTciIGRhdGEtdWlkPSJlbnQwMDEyIiBpZD0iY2x1c3Rlcl8uLi4uIj48cmVjdCBmaWxsPSJub25lIiBoZWlnaHQ9IjE4NS4wOSIgcng9IjIuNSIgcnk9IjIuNSIgc3R5bGU9InN0cm9rZTojMTgxODE4O3N0cm9rZS13aWR0aDoxOyIgd2lkdGg9IjMxMiIgeD0iNyIgeT0iMjcwLjExNjkiLz48dGV4dCBmaWxsPSIjMDAwMDAwIiBmb250LWZhbWlseT0ic2Fucy1zZXJpZiIgZm9udC1zaXplPSIxNCIgZm9udC13ZWlnaHQ9ImJvbGQiIGxlbmd0aEFkanVzdD0ic3BhY2luZyIgdGV4dExlbmd0aD0iNTUuOTk5OCIgeD0iMTM1LjAwMDEiIHk9IjI4NS4xMTIiPiYjMzYwMDE7JiMyMTIwOTsmIzM1NTc2OyYjMzQ5MjA7PC90ZXh0PjwvZz48IS0tY2x1c3RlciA/Pz8/Py0tPjxnIGNsYXNzPSJjbHVzdGVyIiBkYXRhLWVudGl0eT0iLi4uLi4iIGRhdGEtc291cmNlLWxpbmU9IjIzIiBkYXRhLXVpZD0iZW50MDAxNiIgaWQ9ImNsdXN0ZXJfLi4uLi4iPjxyZWN0IGZpbGw9Im5vbmUiIGhlaWdodD0iODAuNDEiIHJ4PSIyLjUiIHJ5PSIyLjUiIHN0eWxlPSJzdHJva2U6IzE4MTgxODtzdHJva2Utd2lkdGg6MTsiIHdpZHRoPSIyNzYiIHg9Ijc3NyIgeT0iNTIuMjk2OSIvPjx0ZXh0IGZpbGw9IiMwMDAwMDAiIGZvbnQtZmFtaWx5PSJzYW5zLXNlcmlmIiBmb250LXNpemU9IjE0IiBmb250LXdlaWdodD0iYm9sZCIgbGVuZ3RoQWRqdXN0PSJzcGFjaW5nIiB0ZXh0TGVuZ3RoPSI2OS45OTk3IiB4PSI4ODAuMDAwMiIgeT0iNjcuMjkyIj4mIzIwOTk4OyYjMjY1MTI7JiMxMjQ4NzsmIzEyNTQwOyYjMTI0Nzk7PC90ZXh0PjwvZz48IS0tZW50aXR5ID8/Pz8tLT48ZyBjbGFzcz0iZW50aXR5IiBkYXRhLWVudGl0eT0iLi4uLiIgZGF0YS1zb3VyY2UtbGluZT0iNCIgZGF0YS11aWQ9ImVudDAwMDMiIGlkPSJlbnRpdHlfLi4uLiI+PGVsbGlwc2UgY3g9IjgyLjk5NzgiIGN5PSIxMDIuMDEwNSIgZmlsbD0iI0YxRjFGMSIgcng9IjQyLjU5NzgiIHJ5PSIxNC41MjM2IiBzdHlsZT0ic3Ryb2tlOiMxODE4MTg7c3Ryb2tlLXdpZHRoOjAuNTsiLz48dGV4dCBmaWxsPSIjMDAwMDAwIiBmb250LWZhbWlseT0ic2Fucy1zZXJpZiIgZm9udC1zaXplPSIxNCIgbGVuZ3RoQWRqdXN0PSJzcGFjaW5nIiB0ZXh0TGVuZ3RoPSI1NS45OTk4IiB4PSI1NC45OTc5IiB5PSIxMDYuNjU4OSI+JiMyMTIwODsmIzIzNDUwOyYjMzExODU7JiMzMDQ0Njs8L3RleHQ+PC9nPjwhLS1lbnRpdHkgPz8/Pz8/LS0+PGcgY2xhc3M9ImVudGl0eSIgZGF0YS1lbnRpdHk9Ii4uLi4uLiIgZGF0YS1zb3VyY2UtbGluZT0iNSIgZGF0YS11aWQ9ImVudDAwMDQiIGlkPSJlbnRpdHlfLi4uLi4uIj48ZWxsaXBzZSBjeD0iMjIyLjAwNDIiIGN5PSIxMDIuMDA5NyIgZmlsbD0iI0YxRjFGMSIgcng9IjYxLjUxNDIiIHJ5PSIxNC43MDI4IiBzdHlsZT0ic3Ryb2tlOiMxODE4MTg7c3Ryb2tlLXdpZHRoOjAuNTsiLz48dGV4dCBmaWxsPSIjMDAwMDAwIiBmb250LWZhbWlseT0ic2Fucy1zZXJpZiIgZm9udC1zaXplPSIxNCIgbGVuZ3RoQWRqdXN0PSJzcGFjaW5nIiB0ZXh0TGVuZ3RoPSI4My45OTk2IiB4PSIxODAuMDA0NCIgeT0iMTA2LjY1ODIiPiYjMjEyMDg7JiMyMzQ1MDsmIzMxMTg1OyYjMzA0NDY7JiMyNzA4MzsmIzI1MTA0OzwvdGV4dD48L2c+PCEtLWVudGl0eSA/Pz8/LS0+PGcgY2xhc3M9ImVudGl0eSIgZGF0YS1lbnRpdHk9Ii4uLi4iIGRhdGEtc291cmNlLWxpbmU9IjYiIGRhdGEtdWlkPSJlbnQwMDA1IiBpZD0iZW50aXR5Xy4uLi4iPjxlbGxpcHNlIGN4PSI4Mi45OTc4IiBjeT0iMTkxLjQxMDUiIGZpbGw9IiNGMUYxRjEiIHJ4PSI0Mi41OTc4IiByeT0iMTQuNTIzNiIgc3R5bGU9InN0cm9rZTojMTgxODE4O3N0cm9rZS13aWR0aDowLjU7Ii8+PHRleHQgZmlsbD0iIzAwMDAwMCIgZm9udC1mYW1pbHk9InNhbnMtc2VyaWYiIGZvbnQtc2l6ZT0iMTQiIGxlbmd0aEFkanVzdD0ic3BhY2luZyIgdGV4dExlbmd0aD0iNTUuOTk5OCIgeD0iNTQuOTk3OSIgeT0iMTk2LjA1ODkiPiYjMzU1MDY7JiMzMTI0NjsmIzIxNDYyOyYjMjQzNDE7PC90ZXh0PjwvZz48IS0tZW50aXR5ID8/Pz8/Py0tPjxnIGNsYXNzPSJlbnRpdHkiIGRhdGEtZW50aXR5PSIuLi4uLi4iIGRhdGEtc291cmNlLWxpbmU9IjciIGRhdGEtdWlkPSJlbnQwMDA2IiBpZD0iZW50aXR5Xy4uLi4uLiI+PGVsbGlwc2UgY3g9IjIyMi4wMDQyIiBjeT0iMTkxLjQwOTciIGZpbGw9IiNGMUYxRjEiIHJ4PSI2MS41MTQyIiByeT0iMTQuNzAyOCIgc3R5bGU9InN0cm9rZTojMTgxODE4O3N0cm9rZS13aWR0aDowLjU7Ii8+PHRleHQgZmlsbD0iIzAwMDAwMCIgZm9udC1mYW1pbHk9InNhbnMtc2VyaWYiIGZvbnQtc2l6ZT0iMTQiIGxlbmd0aEFkanVzdD0ic3BhY2luZyIgdGV4dExlbmd0aD0iODMuOTk5NiIgeD0iMTgwLjAwNDQiIHk9IjE5Ni4wNTgyIj4mIzMzMjU4OyYjMjEyMDU7JiMyMDE4MTsmIzM1Mzc5OyYjMzUzNzM7JiMyMzQ1MDs8L3RleHQ+PC9nPjwhLS1lbnRpdHkgPz8tLT48ZyBjbGFzcz0iZW50aXR5IiBkYXRhLWVudGl0eT0iLi4iIGRhdGEtc291cmNlLWxpbmU9IjExIiBkYXRhLXVpZD0iZW50MDAwOCIgaWQ9ImVudGl0eV8uLiI+PGVsbGlwc2UgY3g9IjU0OC45OTg5IiBjeT0iMTAyLjAxMDUiIGZpbGw9IiNGMUYxRjEiIHJ4PSIyMi43OTg5IiByeT0iMTQuNTIzNiIgc3R5bGU9InN0cm9rZTojMTgxODE4O3N0cm9rZS13aWR0aDowLjU7Ii8+PHRleHQgZmlsbD0iIzAwMDAwMCIgZm9udC1mYW1pbHk9InNhbnMtc2VyaWYiIGZvbnQtc2l6ZT0iMTQiIGxlbmd0aEFkanVzdD0ic3BhY2luZyIgdGV4dExlbmd0aD0iMjcuOTk5OSIgeD0iNTM0Ljk5OSIgeT0iMTA2LjY1ODkiPiYjMjAxODE7JiMzNTM3OTs8L3RleHQ+PC9nPjwhLS1lbnRpdHkgPz8/Py0tPjxnIGNsYXNzPSJlbnRpdHkiIGRhdGEtZW50aXR5PSIuLi4uIiBkYXRhLXNvdXJjZS1saW5lPSIxMiIgZGF0YS11aWQ9ImVudDAwMDkiIGlkPSJlbnRpdHlfLi4uLiI+PGVsbGlwc2UgY3g9IjY0OC45OTc4IiBjeT0iMTAyLjAxMDUiIGZpbGw9IiNGMUYxRjEiIHJ4PSI0Mi41OTc4IiByeT0iMTQuNTIzNiIgc3R5bGU9InN0cm9rZTojMTgxODE4O3N0cm9rZS13aWR0aDowLjU7Ii8+PHRleHQgZmlsbD0iIzAwMDAwMCIgZm9udC1mYW1pbHk9InNhbnMtc2VyaWYiIGZvbnQtc2l6ZT0iMTQiIGxlbmd0aEFkanVzdD0ic3BhY2luZyIgdGV4dExlbmd0aD0iNTUuOTk5OCIgeD0iNjIwLjk5NzkiIHk9IjEwNi42NTg5Ij4mIzIwMTgxOyYjMzUzNzk7JiMyNjEyNjsmIzMyMDQ4OzwvdGV4dD48L2c+PCEtLWVudGl0eSA/Pz8/Py0tPjxnIGNsYXNzPSJlbnRpdHkiIGRhdGEtZW50aXR5PSIuLi4uLiIgZGF0YS1zb3VyY2UtbGluZT0iMTMiIGRhdGEtdWlkPSJlbnQwMDEwIiBpZD0iZW50aXR5Xy4uLi4uIj48ZWxsaXBzZSBjeD0iNTYzLjk5NzMiIGN5PSIxOTEuNDEwNSIgZmlsbD0iI0YxRjFGMSIgcng9IjUyLjQ5NzMiIHJ5PSIxNC41MjM2IiBzdHlsZT0ic3Ryb2tlOiMxODE4MTg7c3Ryb2tlLXdpZHRoOjAuNTsiLz48dGV4dCBmaWxsPSIjMDAwMDAwIiBmb250LWZhbWlseT0ic2Fucy1zZXJpZiIgZm9udC1zaXplPSIxNCIgbGVuZ3RoQWRqdXN0PSJzcGFjaW5nIiB0ZXh0TGVuZ3RoPSI2OS45OTk3IiB4PSI1MjguOTk3NCIgeT0iMTk2LjA1ODkiPiYjMzIyMDc7JiMyMTIwODsmIzIzNDUwOyYjMjA4MDM7JiMyNDExNTs8L3RleHQ+PC9nPjwhLS1lbnRpdHkgPz8/Py0tPjxnIGNsYXNzPSJlbnRpdHkiIGRhdGEtZW50aXR5PSIuLi4uIiBkYXRhLXNvdXJjZS1saW5lPSIxNCIgZGF0YS11aWQ9ImVudDAwMTEiIGlkPSJlbnRpdHlfLi4uLiI+PGVsbGlwc2UgY3g9IjY5My45OTc4IiBjeT0iMTkxLjQxMDUiIGZpbGw9IiNGMUYxRjEiIHJ4PSI0Mi41OTc4IiByeT0iMTQuNTIzNiIgc3R5bGU9InN0cm9rZTojMTgxODE4O3N0cm9rZS13aWR0aDowLjU7Ii8+PHRleHQgZmlsbD0iIzAwMDAwMCIgZm9udC1mYW1pbHk9InNhbnMtc2VyaWYiIGZvbnQtc2l6ZT0iMTQiIGxlbmd0aEFkanVzdD0ic3BhY2luZyIgdGV4dExlbmd0aD0iNTUuOTk5OCIgeD0iNjY1Ljk5NzkiIHk9IjE5Ni4wNTg5Ij4mIzM1MDM2OyYjMjExNjE7JiMyMDgwMzsmIzI0MTE1OzwvdGV4dD48L2c+PCEtLWVudGl0eSA/Pz8/Py0tPjxnIGNsYXNzPSJlbnRpdHkiIGRhdGEtZW50aXR5PSIuLi4uLiIgZGF0YS1zb3VyY2UtbGluZT0iMTgiIGRhdGEtdWlkPSJlbnQwMDEzIiBpZD0iZW50aXR5Xy4uLi4uIj48ZWxsaXBzZSBjeD0iODIuOTk3MyIgY3k9IjMyNy42NDA1IiBmaWxsPSIjRjFGMUYxIiByeD0iNTIuNDk3MyIgcnk9IjE0LjUyMzYiIHN0eWxlPSJzdHJva2U6IzE4MTgxODtzdHJva2Utd2lkdGg6MC41OyIvPjx0ZXh0IGZpbGw9IiMwMDAwMDAiIGZvbnQtZmFtaWx5PSJzYW5zLXNlcmlmIiBmb250LXNpemU9IjE0IiBsZW5ndGhBZGp1c3Q9InNwYWNpbmciIHRleHRMZW5ndGg9IjY5Ljk5OTciIHg9IjQ3Ljk5NzQiIHk9IjMzMi4yODg5Ij4mIzI3NTMxOyYjMzk2NDA7JiMzNTQzMDsmIzMxNjM5OyYjMzQ5MjA7PC90ZXh0PjwvZz48IS0tZW50aXR5ID8/Pz8/LS0+PGcgY2xhc3M9ImVudGl0eSIgZGF0YS1lbnRpdHk9Ii4uLi4uIiBkYXRhLXNvdXJjZS1saW5lPSIxOSIgZGF0YS11aWQ9ImVudDAwMTQiIGlkPSJlbnRpdHlfLi4uLi4iPjxlbGxpcHNlIGN4PSIyMjIuOTk3MyIgY3k9IjMyNy42NDA1IiBmaWxsPSIjRjFGMUYxIiByeD0iNTIuNDk3MyIgcnk9IjE0LjUyMzYiIHN0eWxlPSJzdHJva2U6IzE4MTgxODtzdHJva2Utd2lkdGg6MC41OyIvPjx0ZXh0IGZpbGw9IiMwMDAwMDAiIGZvbnQtZmFtaWx5PSJzYW5zLXNlcmlmIiBmb250LXNpemU9IjE0IiBsZW5ndGhBZGp1c3Q9InNwYWNpbmciIHRleHRMZW5ndGg9IjY5Ljk5OTciIHg9IjE4Ny45OTc0IiB5PSIzMzIuMjg4OSI+JiMzNjAyNDsmIzIwNTExOyYjMjM1NTA7JiMyOTAzMTsmIzM0OTIwOzwvdGV4dD48L2c+PCEtLWVudGl0eSA/Pz8/Py0tPjxnIGNsYXNzPSJlbnRpdHkiIGRhdGEtZW50aXR5PSIuLi4uLiIgZGF0YS1zb3VyY2UtbGluZT0iMjAiIGRhdGEtdWlkPSJlbnQwMDE1IiBpZD0iZW50aXR5Xy4uLi4uIj48ZWxsaXBzZSBjeD0iODIuOTk3MyIgY3k9IjQxNi42OTA1IiBmaWxsPSIjRjFGMUYxIiByeD0iNTIuNDk3MyIgcnk9IjE0LjUyMzYiIHN0eWxlPSJzdHJva2U6IzE4MTgxODtzdHJva2Utd2lkdGg6MC41OyIvPjx0ZXh0IGZpbGw9IiMwMDAwMDAiIGZvbnQtZmFtaWx5PSJzYW5zLXNlcmlmIiBmb250LXNpemU9IjE0IiBsZW5ndGhBZGp1c3Q9InNwYWNpbmciIHRleHRMZW5ndGg9IjY5Ljk5OTciIHg9IjQ3Ljk5NzQiIHk9IjQyMS4zMzg5Ij4mIzI1NjEzOyYjMzA0MTA7JiMzNTMzNjsmIzMxNjM5OyYjMjYzNjA7PC90ZXh0PjwvZz48IS0tZW50aXR5ID8/Pz8/Py0tPjxnIGNsYXNzPSJlbnRpdHkiIGRhdGEtZW50aXR5PSIuLi4uLi4iIGRhdGEtc291cmNlLWxpbmU9IjI0IiBkYXRhLXVpZD0iZW50MDAxNyIgaWQ9ImVudGl0eV8uLi4uLi4iPjxlbGxpcHNlIGN4PSI4NTUuMDA0MiIgY3k9IjEwMi4wMDk3IiBmaWxsPSIjRjFGMUYxIiByeD0iNjEuNTE0MiIgcnk9IjE0LjcwMjgiIHN0eWxlPSJzdHJva2U6IzE4MTgxODtzdHJva2Utd2lkdGg6MC41OyIvPjx0ZXh0IGZpbGw9IiMwMDAwMDAiIGZvbnQtZmFtaWx5PSJzYW5zLXNlcmlmIiBmb250LXNpemU9IjE0IiBsZW5ndGhBZGp1c3Q9InNwYWNpbmciIHRleHRMZW5ndGg9IjgzLjk5OTYiIHg9IjgxMy4wMDQ0IiB5PSIxMDYuNjU4MiI+JiMzNjAwMTsmIzIxMjA5OyYjMjA5OTg7JiMyNjUxMjsmIzMyMDgwOyYjMjY1MjQ7PC90ZXh0PjwvZz48IS0tZW50aXR5ID8/Pz8tLT48ZyBjbGFzcz0iZW50aXR5IiBkYXRhLWVudGl0eT0iLi4uLiIgZGF0YS1zb3VyY2UtbGluZT0iMjUiIGRhdGEtdWlkPSJlbnQwMDE4IiBpZD0iZW50aXR5Xy4uLi4iPjxlbGxpcHNlIGN4PSI5OTMuOTk3OCIgY3k9IjEwMi4wMTA1IiBmaWxsPSIjRjFGMUYxIiByeD0iNDIuNTk3OCIgcnk9IjE0LjUyMzYiIHN0eWxlPSJzdHJva2U6IzE4MTgxODtzdHJva2Utd2lkdGg6MC41OyIvPjx0ZXh0IGZpbGw9IiMwMDAwMDAiIGZvbnQtZmFtaWx5PSJzYW5zLXNlcmlmIiBmb250LXNpemU9IjE0IiBsZW5ndGhBZGp1c3Q9InNwYWNpbmciIHRleHRMZW5ndGg9IjU1Ljk5OTgiIHg9Ijk2NS45OTc5IiB5PSIxMDYuNjU4OSI+JiMyNjM3NjsmIzI3NDI1OyYjMjU1MTI7JiMzMTIyNzs8L3RleHQ+PC9nPjxnIGNsYXNzPSJlbnRpdHkiIGRhdGEtZW50aXR5PSJHTU4xOSIgZGF0YS1zb3VyY2UtbGluZT0iMjkiIGRhdGEtdWlkPSJlbnQwMDIwIiBpZD0iZW50aXR5X0dNTjE5Ij48cGF0aCBkPSJNMzUxLjUsMTc4Ljg0NjkgTDM1MS41LDIwMy45Nzk3IEw0NzYuNTAwMSwyMDMuOTc5NyBMNDc2LjUwMDEsMTg4Ljg0NjkgTDQ2Ni41MDAxLDE3OC44NDY5IEwzNTEuNSwxNzguODQ2OSIgZmlsbD0iI0ZFRkZERCIgc3R5bGU9InN0cm9rZTojMTgxODE4O3N0cm9rZS13aWR0aDowLjU7Ii8+PHBhdGggZD0iTTQ2Ni41MDAxLDE3OC44NDY5IEw0NjYuNTAwMSwxODguODQ2OSBMNDc2LjUwMDEsMTg4Ljg0NjkgTDQ2Ni41MDAxLDE3OC44NDY5IiBmaWxsPSIjRkVGRkREIiBzdHlsZT0ic3Ryb2tlOiMxODE4MTg7c3Ryb2tlLXdpZHRoOjE7Ii8+PHRleHQgZmlsbD0iIzAwMDAwMCIgZm9udC1mYW1pbHk9InNhbnMtc2VyaWYiIGZvbnQtc2l6ZT0iMTMiIGxlbmd0aEFkanVzdD0ic3BhY2luZyIgdGV4dExlbmd0aD0iMTA0LjAwMDEiIHg9IjM1Ny41IiB5PSIxOTUuOTEzOCI+JiMzMTY0OTsmIzI5NzAyOyYjMzI3NzM7JiMyNzE3NzsmIzM4NDgwOyYjMTIzNjQ7JiMyNDUxNzsmIzM1MjAxOzwvdGV4dD48L2c+PGcgY2xhc3M9ImVudGl0eSIgZGF0YS1lbnRpdHk9IkdNTjIyIiBkYXRhLXNvdXJjZS1saW5lPSIzMyIgZGF0YS11aWQ9ImVudDAwMjMiIGlkPSJlbnRpdHlfR01OMjIiPjxwYXRoIGQ9Ik0zNDMuNSw0MDQuMTE2OSBMMzQzLjUsNDI5LjI0OTcgTDQ5NC41MDAyLDQyOS4yNDk3IEw0OTQuNTAwMiw0MTQuMTE2OSBMNDg0LjUwMDIsNDA0LjExNjkgTDM0My41LDQwNC4xMTY5IiBmaWxsPSIjRkVGRkREIiBzdHlsZT0ic3Ryb2tlOiMxODE4MTg7c3Ryb2tlLXdpZHRoOjAuNTsiLz48cGF0aCBkPSJNNDg0LjUwMDIsNDA0LjExNjkgTDQ4NC41MDAyLDQxNC4xMTY5IEw0OTQuNTAwMiw0MTQuMTE2OSBMNDg0LjUwMDIsNDA0LjExNjkiIGZpbGw9IiNGRUZGREQiIHN0eWxlPSJzdHJva2U6IzE4MTgxODtzdHJva2Utd2lkdGg6MTsiLz48dGV4dCBmaWxsPSIjMDAwMDAwIiBmb250LWZhbWlseT0ic2Fucy1zZXJpZiIgZm9udC1zaXplPSIxMyIgbGVuZ3RoQWRqdXN0PSJzcGFjaW5nIiB0ZXh0TGVuZ3RoPSIxMzAuMDAwMiIgeD0iMzQ5LjUiIHk9IjQyMS4xODM4Ij4mIzMyMDc2OyYjMjk3MDI7JiMxMjUxMDsmIzEyNDkzOyYjMTI1NDA7JiMxMjQ3MjsmIzEyNTE1OyYjMTI1NDA7JiMyMDE5NzsmIzE5OTc4OzwvdGV4dD48L2c+PCEtLWxpbmsgPz8/Pz8/IHRvIEdNTjE5LS0+PGcgY2xhc3M9ImxpbmsiIGRhdGEtZW50aXR5LTE9Ii4uLi4uLiIgZGF0YS1lbnRpdHktMj0iR01OMTkiIGRhdGEtc291cmNlLWxpbmU9IjI5IiBkYXRhLXVpZD0ibG5rMjEiIGlkPSJsaW5rXy4uLi4uLl9HTU4xOSI+PHBhdGggZD0iTTMyNy4xNjczLDExMC41MTkzIEMzMjcuODI5MSwxMTEuMTI4MyAzMjguNTI0NywxMTEuNzY4MyAzMjkuMjUxNCwxMTIuNDM3IEMzMzUuMDY1MywxMTcuNzg2NiAzNDIuODc1NiwxMjQuOTcyNSAzNTEuNDExMywxMzIuODI1NiBDMzY4LjQ4MjUsMTQ4LjUzMTkgMzg4LjQ1NSwxNjYuOTA2OSA0MDEuMTYsMTc4LjU5NjkiIGZpbGw9Im5vbmUiIGlkPSImIzEyNTEwOyYjMTI0NzM7JiMxMjQ3OTsmIzEyNDg3OyYjMTI1NDA7JiMxMjQ3OTstR01OMTkiIHN0eWxlPSJzdHJva2U6IzE4MTgxODtzdHJva2Utd2lkdGg6MTtzdHJva2UtZGFzaGFycmF5OjcsNzsiLz48L2c+PCEtLWxpbmsgPz8/PyB0byBHTU4yMi0tPjxnIGNsYXNzPSJsaW5rIiBkYXRhLWVudGl0eS0xPSIuLi4uIiBkYXRhLWVudGl0eS0yPSJHTU4yMiIgZGF0YS1zb3VyY2UtbGluZT0iMzMiIGRhdGEtdWlkPSJsbmsyNCIgaWQ9ImxpbmtfLi4uLl9HTU4yMiI+PHBhdGggZD0iTTMxOS4xODQ3LDMzNS4yMzIxIEMzMTkuNTQxNCwzMzUuNTE5NyAzMTkuOTA4MSwzMzUuODE1MiAzMjAuMjg0MywzMzYuMTE4NSBDMzIxLjAzNjYsMzM2LjcyNTEgMzIxLjgyNzMsMzM3LjM2MjUgMzIyLjY1MzQsMzM4LjAyODQgQzMyOS4yNjI1LDM0My4zNTYzIDMzOC4xNDEzLDM1MC41MTMxIDM0Ny44NDUsMzU4LjMzNDQgQzM2Ny4yNTI1LDM3My45NzY5IDM4OS45NiwzOTIuMjc2OSA0MDQuNDEsNDAzLjkxNjkiIGZpbGw9Im5vbmUiIGlkPSImIzM2MDAxOyYjMjEyMDk7JiMzNTU3NjsmIzM0OTIwOy1HTU4yMiIgc3R5bGU9InN0cm9rZTojMTgxODE4O3N0cm9rZS13aWR0aDoxO3N0cm9rZS1kYXNoYXJyYXk6Nyw3OyIvPjwvZz48IS0tU1JDPVtQUDNQSmk5RzQ4UmwtbkdETF85T0JqTU9BNHJDeHVuOXdLY1hLZlB3V084R0o0RmkwYkFLSE1lV3laM0ppXzBNZGpDNm10OHRfdm5fbGxkRlFEVlFaSTgzcWk3bTA0cTFaRzJqMDN0WXlJX3hTZkRPUHZ1bElOVkFrTlBRa0VCRTdBMFU2M3pXaDA2TFhUTE92LUh4d0dKUkJIb3pLbC05VGdCeWxZSS1KSW83RHpiV0dlQ3dSWnBaTExGOHlXM1JwTUpQUEM2SzFJRmtwcWlGMXhpaUdBNjhQTm8zQ0dQWjBTWEZLLXdrcFdadlJLNVFUSmh4djk4azZiYUNSMjhTMm1GaFR0NGJ0Q2h6Tk1wWU9obERYWjVwV25IQjhkaXBSQjdHZXo0Qnh1ZG5JT3ByRHR1UFFsZlBYcFdyc2djbW1FOFVxZWFGY1RXZ2FQd3BkcFJSYXh0R2tLRHdOUzdmTWtKMzlWTTAtaWlLS2IwckhKdkpES3N6YlRMQi1WWmU0ZXJTd2ZJT1JmOFd0QkdUQTVSbnNjSFVLTDhBNXg4T0Z1QmlfYjJZeW9lVjVybktJdWFuZTN1bGFrTHg0YlYtOE55MF0tLT48L2c+PC9zdmc+" class="uml" alt="uml diagram" title="" /></p>
<hr />
<h2 id="262">26.2 ダウンロード機能の設計<a class="headerlink" href="#262" title="Permanent link">&para;</a></h2>
<h3 id="_3">アーキテクチャ<a class="headerlink" href="#_3" title="Permanent link">&para;</a></h3>
<p><img src="data:image/svg+xml;base64,PHN2ZyB4bWxucz0iaHR0cDovL3d3dy53My5vcmcvMjAwMC9zdmciIHhtbG5zOnhsaW5rPSJodHRwOi8vd3d3LnczLm9yZy8xOTk5L3hsaW5rIiBjb250ZW50U3R5bGVUeXBlPSJ0ZXh0L2NzcyIgZGF0YS1kaWFncmFtLXR5cGU9IlNFUVVFTkNFIiBoZWlnaHQ9Ijc3MnB4IiBwcmVzZXJ2ZUFzcGVjdFJhdGlvPSJub25lIiBzdHlsZT0id2lkdGg6MTA1OXB4O2hlaWdodDo3NzJweDtiYWNrZ3JvdW5kOiNGRkZGRkY7IiB2ZXJzaW9uPSIxLjEiIHZpZXdCb3g9IjAgMCAxMDU5IDc3MiIgd2lkdGg9IjEwNTlweCIgem9vbUFuZFBhbj0ibWFnbmlmeSI+PHRpdGxlPiYjMTI0ODc7JiMxMjU0MDsmIzEyNDc5OyYjMTI0ODA7JiMxMjQ1NDsmIzEyNTMxOyYjMTI1MjU7JiMxMjU0MDsmIzEyNDg5OyYjMjcyMzE7JiMzMzAyMTsmIzEyMzk4OyYjMjcwODM7JiMyNTEwNDs8L3RpdGxlPjxkZWZzLz48Zz48dGV4dCBmaWxsPSIjMDAwMDAwIiBmb250LWZhbWlseT0ic2Fucy1zZXJpZiIgZm9udC1zaXplPSIxNCIgZm9udC13ZWlnaHQ9ImJvbGQiIGxlbmd0aEFkanVzdD0ic3BhY2luZyIgdGV4dExlbmd0aD0iMTk1Ljk5OTEiIHg9IjQzMy4yNzM4IiB5PSIyNy45OTUxIj4mIzEyNDg3OyYjMTI1NDA7JiMxMjQ3OTsmIzEyNDgwOyYjMTI0NTQ7JiMxMjUzMTsmIzEyNTI1OyYjMTI1NDA7JiMxMjQ4OTsmIzI3MjMxOyYjMzMwMjE7JiMxMjM5ODsmIzI3MDgzOyYjMjUxMDQ7PC90ZXh0PjxnPjx0aXRsZT4uLi4uPC90aXRsZT48cmVjdCBmaWxsPSIjMDAwMDAwIiBmaWxsLW9wYWNpdHk9IjAuMDAwMDAiIGhlaWdodD0iNTczLjUyMzQiIHdpZHRoPSI4IiB4PSIzMS45OTk5IiB5PSIxMTguNTkzOCIvPjxsaW5lIHN0eWxlPSJzdHJva2U6IzE4MTgxODtzdHJva2Utd2lkdGg6MC41O3N0cm9rZS1kYXNoYXJyYXk6NSw1OyIgeDE9IjM1IiB4Mj0iMzUiIHkxPSIxMTguNTkzOCIgeTI9IjY5Mi4xMTcyIi8+PC9nPjxnPjx0aXRsZT4uLi4uLi4uPC90aXRsZT48cmVjdCBmaWxsPSIjMDAwMDAwIiBmaWxsLW9wYWNpdHk9IjAuMDAwMDAiIGhlaWdodD0iNTczLjUyMzQiIHdpZHRoPSI4IiB4PSIxODYiIHk9IjExOC41OTM4Ii8+PGxpbmUgc3R5bGU9InN0cm9rZTojMTgxODE4O3N0cm9rZS13aWR0aDowLjU7c3Ryb2tlLWRhc2hhcnJheTo1LDU7IiB4MT0iMTg5LjAwMDIiIHgyPSIxODkuMDAwMiIgeTE9IjExOC41OTM4IiB5Mj0iNjkyLjExNzIiLz48L2c+PGc+PHRpdGxlPkRvd25sb2FkQ29udHJvbGxlcjwvdGl0bGU+PHJlY3QgZmlsbD0iIzAwMDAwMCIgZmlsbC1vcGFjaXR5PSIwLjAwMDAwIiBoZWlnaHQ9IjU3My41MjM0IiB3aWR0aD0iOCIgeD0iNDEzLjg2MTQiIHk9IjExOC41OTM4Ii8+PGxpbmUgc3R5bGU9InN0cm9rZTojMTgxODE4O3N0cm9rZS13aWR0aDowLjU7c3Ryb2tlLWRhc2hhcnJheTo1LDU7IiB4MT0iNDE3LjQ4IiB4Mj0iNDE3LjQ4IiB5MT0iMTE4LjU5MzgiIHkyPSI2OTIuMTE3MiIvPjwvZz48Zz48dGl0bGU+RG93bmxvYWRTZXJ2aWNlPC90aXRsZT48cmVjdCBmaWxsPSIjMDAwMDAwIiBmaWxsLW9wYWNpdHk9IjAuMDAwMDAiIGhlaWdodD0iNTczLjUyMzQiIHdpZHRoPSI4IiB4PSI2NTEuMzQ1NyIgeT0iMTE4LjU5MzgiLz48bGluZSBzdHlsZT0ic3Ryb2tlOiMxODE4MTg7c3Ryb2tlLXdpZHRoOjAuNTtzdHJva2UtZGFzaGFycmF5OjUsNTsiIHgxPSI2NTQuNjgwMiIgeDI9IjY1NC42ODAyIiB5MT0iMTE4LjU5MzgiIHkyPSI2OTIuMTE3MiIvPjwvZz48Zz48dGl0bGU+Q1NWRXhwb3J0ZXI8L3RpdGxlPjxyZWN0IGZpbGw9IiMwMDAwMDAiIGZpbGwtb3BhY2l0eT0iMC4wMDAwMCIgaGVpZ2h0PSI1NzMuNTIzNCIgd2lkdGg9IjgiIHg9Ijc4MC4yMjk1IiB5PSIxMTguNTkzOCIvPjxsaW5lIHN0eWxlPSJzdHJva2U6IzE4MTgxODtzdHJva2Utd2lkdGg6MC41O3N0cm9rZS1kYXNoYXJyYXk6NSw1OyIgeDE9Ijc4NC4wMTEzIiB4Mj0iNzg0LjAxMTMiIHkxPSIxMTguNTkzOCIgeTI9IjY5Mi4xMTcyIi8+PC9nPjxnPjx0aXRsZT5SZXBvc2l0b3J5PC90aXRsZT48cmVjdCBmaWxsPSIjMDAwMDAwIiBmaWxsLW9wYWNpdHk9IjAuMDAwMDAiIGhlaWdodD0iNTczLjUyMzQiIHdpZHRoPSI4IiB4PSI4ODUuOTgzOSIgeT0iMTE4LjU5MzgiLz48bGluZSBzdHlsZT0ic3Ryb2tlOiMxODE4MTg7c3Ryb2tlLXdpZHRoOjAuNTtzdHJva2UtZGFzaGFycmF5OjUsNTsiIHgxPSI4ODkuNDQ3OCIgeDI9Ijg4OS40NDc4IiB5MT0iMTE4LjU5MzgiIHkyPSI2OTIuMTE3MiIvPjwvZz48Zz48dGl0bGU+Li4uLi4uPC90aXRsZT48cmVjdCBmaWxsPSIjMDAwMDAwIiBmaWxsLW9wYWNpdHk9IjAuMDAwMDAiIGhlaWdodD0iNTczLjUyMzQiIHdpZHRoPSI4IiB4PSIxMDA5LjU0NjkiIHk9IjExOC41OTM4Ii8+PGxpbmUgc3R5bGU9InN0cm9rZTojMTgxODE4O3N0cm9rZS13aWR0aDowLjU7c3Ryb2tlLWRhc2hhcnJheTo1LDU7IiB4MT0iMTAxMi41NDcxIiB4Mj0iMTAxMi41NDcxIiB5MT0iMTE4LjU5MzgiIHkyPSI2OTIuMTE3MiIvPjwvZz48ZyBjbGFzcz0icGFydGljaXBhbnQgcGFydGljaXBhbnQtaGVhZCIgZGF0YS1wYXJ0aWNpcGFudD0iLi4uLiI+PHRleHQgZmlsbD0iIzAwMDAwMCIgZm9udC1mYW1pbHk9InNhbnMtc2VyaWYiIGZvbnQtc2l6ZT0iMTQiIGxlbmd0aEFkanVzdD0ic3BhY2luZyIgdGV4dExlbmd0aD0iNTUuOTk5OCIgeD0iNSIgeT0iMTE1LjI5MiI+JiMxMjUxODsmIzEyNTQwOyYjMTI0NzA7JiMxMjU0MDs8L3RleHQ+PGVsbGlwc2UgY3g9IjM1Ljk5OTkiIGN5PSI1MC43OTY5IiBmaWxsPSIjRTJFMkYwIiByeD0iOCIgcnk9IjgiIHN0eWxlPSJzdHJva2U6IzE4MTgxODtzdHJva2Utd2lkdGg6MC41OyIvPjxwYXRoIGQ9Ik0zNS45OTk5LDU4Ljc5NjkgTDM1Ljk5OTksODUuNzk2OSBNMjIuOTk5OSw2Ni43OTY5IEw0OC45OTk5LDY2Ljc5NjkgTTM1Ljk5OTksODUuNzk2OSBMMjIuOTk5OSwxMDAuNzk2OSBNMzUuOTk5OSw4NS43OTY5IEw0OC45OTk5LDEwMC43OTY5IiBmaWxsPSJub25lIiBzdHlsZT0ic3Ryb2tlOiMxODE4MTg7c3Ryb2tlLXdpZHRoOjAuNTsiLz48L2c+PGcgY2xhc3M9InBhcnRpY2lwYW50IHBhcnRpY2lwYW50LXRhaWwiIGRhdGEtcGFydGljaXBhbnQ9Ii4uLi4iPjx0ZXh0IGZpbGw9IiMwMDAwMDAiIGZvbnQtZmFtaWx5PSJzYW5zLXNlcmlmIiBmb250LXNpemU9IjE0IiBsZW5ndGhBZGp1c3Q9InNwYWNpbmciIHRleHRMZW5ndGg9IjU1Ljk5OTgiIHg9IjUiIHk9IjcwNC4xMTIzIj4mIzEyNTE4OyYjMTI1NDA7JiMxMjQ3MDsmIzEyNTQwOzwvdGV4dD48ZWxsaXBzZSBjeD0iMzUuOTk5OSIgY3k9IjcxNS45MTQxIiBmaWxsPSIjRTJFMkYwIiByeD0iOCIgcnk9IjgiIHN0eWxlPSJzdHJva2U6IzE4MTgxODtzdHJva2Utd2lkdGg6MC41OyIvPjxwYXRoIGQ9Ik0zNS45OTk5LDcyMy45MTQxIEwzNS45OTk5LDc1MC45MTQxIE0yMi45OTk5LDczMS45MTQxIEw0OC45OTk5LDczMS45MTQxIE0zNS45OTk5LDc1MC45MTQxIEwyMi45OTk5LDc2NS45MTQxIE0zNS45OTk5LDc1MC45MTQxIEw0OC45OTk5LDc2NS45MTQxIiBmaWxsPSJub25lIiBzdHlsZT0ic3Ryb2tlOiMxODE4MTg7c3Ryb2tlLXdpZHRoOjAuNTsiLz48L2c+PGcgY2xhc3M9InBhcnRpY2lwYW50IHBhcnRpY2lwYW50LWhlYWQiIGRhdGEtcGFydGljaXBhbnQ9IkZFIj48cmVjdCBmaWxsPSIjRTJFMkYwIiBoZWlnaHQ9IjMwLjI5NjkiIHJ4PSIyLjUiIHJ5PSIyLjUiIHN0eWxlPSJzdHJva2U6IzE4MTgxODtzdHJva2Utd2lkdGg6MC41OyIgd2lkdGg9IjExMS45OTk2IiB4PSIxMzQuMDAwMiIgeT0iODcuMjk2OSIvPjx0ZXh0IGZpbGw9IiMwMDAwMDAiIGZvbnQtZmFtaWx5PSJzYW5zLXNlcmlmIiBmb250LXNpemU9IjE0IiBsZW5ndGhBZGp1c3Q9InNwYWNpbmciIHRleHRMZW5ndGg9Ijk3Ljk5OTYiIHg9IjE0MS4wMDAyIiB5PSIxMDcuMjkyIj4mIzEyNTAxOyYjMTI1MjU7JiMxMjUzMTsmIzEyNDg4OyYjMTI0NTY7JiMxMjUzMTsmIzEyNDg5OzwvdGV4dD48L2c+PGcgY2xhc3M9InBhcnRpY2lwYW50IHBhcnRpY2lwYW50LXRhaWwiIGRhdGEtcGFydGljaXBhbnQ9IkZFIj48cmVjdCBmaWxsPSIjRTJFMkYwIiBoZWlnaHQ9IjMwLjI5NjkiIHJ4PSIyLjUiIHJ5PSIyLjUiIHN0eWxlPSJzdHJva2U6IzE4MTgxODtzdHJva2Utd2lkdGg6MC41OyIgd2lkdGg9IjExMS45OTk2IiB4PSIxMzQuMDAwMiIgeT0iNjkxLjExNzIiLz48dGV4dCBmaWxsPSIjMDAwMDAwIiBmb250LWZhbWlseT0ic2Fucy1zZXJpZiIgZm9udC1zaXplPSIxNCIgbGVuZ3RoQWRqdXN0PSJzcGFjaW5nIiB0ZXh0TGVuZ3RoPSI5Ny45OTk2IiB4PSIxNDEuMDAwMiIgeT0iNzExLjExMjMiPiYjMTI1MDE7JiMxMjUyNTsmIzEyNTMxOyYjMTI0ODg7JiMxMjQ1NjsmIzEyNTMxOyYjMTI0ODk7PC90ZXh0PjwvZz48ZyBjbGFzcz0icGFydGljaXBhbnQgcGFydGljaXBhbnQtaGVhZCIgZGF0YS1wYXJ0aWNpcGFudD0iQVBJIj48cmVjdCBmaWxsPSIjRTJFMkYwIiBoZWlnaHQ9IjMwLjI5NjkiIHJ4PSIyLjUiIHJ5PSIyLjUiIHN0eWxlPSJzdHJva2U6IzE4MTgxODtzdHJva2Utd2lkdGg6MC41OyIgd2lkdGg9IjE1Mi43NjI3IiB4PSIzNDEuNDgiIHk9Ijg3LjI5NjkiLz48dGV4dCBmaWxsPSIjMDAwMDAwIiBmb250LWZhbWlseT0ic2Fucy1zZXJpZiIgZm9udC1zaXplPSIxNCIgbGVuZ3RoQWRqdXN0PSJzcGFjaW5nIiB0ZXh0TGVuZ3RoPSIxMzguNzYyNyIgeD0iMzQ4LjQ4IiB5PSIxMDcuMjkyIj5Eb3dubG9hZENvbnRyb2xsZXI8L3RleHQ+PC9nPjxnIGNsYXNzPSJwYXJ0aWNpcGFudCBwYXJ0aWNpcGFudC10YWlsIiBkYXRhLXBhcnRpY2lwYW50PSJBUEkiPjxyZWN0IGZpbGw9IiNFMkUyRjAiIGhlaWdodD0iMzAuMjk2OSIgcng9IjIuNSIgcnk9IjIuNSIgc3R5bGU9InN0cm9rZTojMTgxODE4O3N0cm9rZS13aWR0aDowLjU7IiB3aWR0aD0iMTUyLjc2MjciIHg9IjM0MS40OCIgeT0iNjkxLjExNzIiLz48dGV4dCBmaWxsPSIjMDAwMDAwIiBmb250LWZhbWlseT0ic2Fucy1zZXJpZiIgZm9udC1zaXplPSIxNCIgbGVuZ3RoQWRqdXN0PSJzcGFjaW5nIiB0ZXh0TGVuZ3RoPSIxMzguNzYyNyIgeD0iMzQ4LjQ4IiB5PSI3MTEuMTEyMyI+RG93bmxvYWRDb250cm9sbGVyPC90ZXh0PjwvZz48ZyBjbGFzcz0icGFydGljaXBhbnQgcGFydGljaXBhbnQtaGVhZCIgZGF0YS1wYXJ0aWNpcGFudD0iU1ZDIj48cmVjdCBmaWxsPSIjRTJFMkYwIiBoZWlnaHQ9IjMwLjI5NjkiIHJ4PSIyLjUiIHJ5PSIyLjUiIHN0eWxlPSJzdHJva2U6IzE4MTgxODtzdHJva2Utd2lkdGg6MC41OyIgd2lkdGg9IjEzNS4zMzExIiB4PSI1ODcuNjgwMiIgeT0iODcuMjk2OSIvPjx0ZXh0IGZpbGw9IiMwMDAwMDAiIGZvbnQtZmFtaWx5PSJzYW5zLXNlcmlmIiBmb250LXNpemU9IjE0IiBsZW5ndGhBZGp1c3Q9InNwYWNpbmciIHRleHRMZW5ndGg9IjEyMS4zMzExIiB4PSI1OTQuNjgwMiIgeT0iMTA3LjI5MiI+RG93bmxvYWRTZXJ2aWNlPC90ZXh0PjwvZz48ZyBjbGFzcz0icGFydGljaXBhbnQgcGFydGljaXBhbnQtdGFpbCIgZGF0YS1wYXJ0aWNpcGFudD0iU1ZDIj48cmVjdCBmaWxsPSIjRTJFMkYwIiBoZWlnaHQ9IjMwLjI5NjkiIHJ4PSIyLjUiIHJ5PSIyLjUiIHN0eWxlPSJzdHJva2U6IzE4MTgxODtzdHJva2Utd2lkdGg6MC41OyIgd2lkdGg9IjEzNS4zMzExIiB4PSI1ODcuNjgwMiIgeT0iNjkxLjExNzIiLz48dGV4dCBmaWxsPSIjMDAwMDAwIiBmb250LWZhbWlseT0ic2Fucy1zZXJpZiIgZm9udC1zaXplPSIxNCIgbGVuZ3RoQWRqdXN0PSJzcGFjaW5nIiB0ZXh0TGVuZ3RoPSIxMjEuMzMxMSIgeD0iNTk0LjY4MDIiIHk9IjcxMS4xMTIzIj5Eb3dubG9hZFNlcnZpY2U8L3RleHQ+PC9nPjxnIGNsYXNzPSJwYXJ0aWNpcGFudCBwYXJ0aWNpcGFudC1oZWFkIiBkYXRhLXBhcnRpY2lwYW50PSJDU1YiPjxyZWN0IGZpbGw9IiNFMkUyRjAiIGhlaWdodD0iMzAuMjk2OSIgcng9IjIuNSIgcnk9IjIuNSIgc3R5bGU9InN0cm9rZTojMTgxODE4O3N0cm9rZS13aWR0aDowLjU7IiB3aWR0aD0iMTAyLjQzNjUiIHg9IjczMy4wMTEzIiB5PSI4Ny4yOTY5Ii8+PHRleHQgZmlsbD0iIzAwMDAwMCIgZm9udC1mYW1pbHk9InNhbnMtc2VyaWYiIGZvbnQtc2l6ZT0iMTQiIGxlbmd0aEFkanVzdD0ic3BhY2luZyIgdGV4dExlbmd0aD0iODguNDM2NSIgeD0iNzQwLjAxMTMiIHk9IjEwNy4yOTIiPkNTVkV4cG9ydGVyPC90ZXh0PjwvZz48ZyBjbGFzcz0icGFydGljaXBhbnQgcGFydGljaXBhbnQtdGFpbCIgZGF0YS1wYXJ0aWNpcGFudD0iQ1NWIj48cmVjdCBmaWxsPSIjRTJFMkYwIiBoZWlnaHQ9IjMwLjI5NjkiIHJ4PSIyLjUiIHJ5PSIyLjUiIHN0eWxlPSJzdHJva2U6IzE4MTgxODtzdHJva2Utd2lkdGg6MC41OyIgd2lkdGg9IjEwMi40MzY1IiB4PSI3MzMuMDExMyIgeT0iNjkxLjExNzIiLz48dGV4dCBmaWxsPSIjMDAwMDAwIiBmb250LWZhbWlseT0ic2Fucy1zZXJpZiIgZm9udC1zaXplPSIxNCIgbGVuZ3RoQWRqdXN0PSJzcGFjaW5nIiB0ZXh0TGVuZ3RoPSI4OC40MzY1IiB4PSI3NDAuMDExMyIgeT0iNzExLjExMjMiPkNTVkV4cG9ydGVyPC90ZXh0PjwvZz48ZyBjbGFzcz0icGFydGljaXBhbnQgcGFydGljaXBhbnQtaGVhZCIgZGF0YS1wYXJ0aWNpcGFudD0iUkVQTyI+PHJlY3QgZmlsbD0iI0UyRTJGMCIgaGVpZ2h0PSIzMC4yOTY5IiByeD0iMi41IiByeT0iMi41IiBzdHlsZT0ic3Ryb2tlOiMxODE4MTg7c3Ryb2tlLXdpZHRoOjAuNTsiIHdpZHRoPSI4OS4wNzIzIiB4PSI4NDUuNDQ3OCIgeT0iODcuMjk2OSIvPjx0ZXh0IGZpbGw9IiMwMDAwMDAiIGZvbnQtZmFtaWx5PSJzYW5zLXNlcmlmIiBmb250LXNpemU9IjE0IiBsZW5ndGhBZGp1c3Q9InNwYWNpbmciIHRleHRMZW5ndGg9Ijc1LjA3MjMiIHg9Ijg1Mi40NDc4IiB5PSIxMDcuMjkyIj5SZXBvc2l0b3J5PC90ZXh0PjwvZz48ZyBjbGFzcz0icGFydGljaXBhbnQgcGFydGljaXBhbnQtdGFpbCIgZGF0YS1wYXJ0aWNpcGFudD0iUkVQTyI+PHJlY3QgZmlsbD0iI0UyRTJGMCIgaGVpZ2h0PSIzMC4yOTY5IiByeD0iMi41IiByeT0iMi41IiBzdHlsZT0ic3Ryb2tlOiMxODE4MTg7c3Ryb2tlLXdpZHRoOjAuNTsiIHdpZHRoPSI4OS4wNzIzIiB4PSI4NDUuNDQ3OCIgeT0iNjkxLjExNzIiLz48dGV4dCBmaWxsPSIjMDAwMDAwIiBmb250LWZhbWlseT0ic2Fucy1zZXJpZiIgZm9udC1zaXplPSIxNCIgbGVuZ3RoQWRqdXN0PSJzcGFjaW5nIiB0ZXh0TGVuZ3RoPSI3NS4wNzIzIiB4PSI4NTIuNDQ3OCIgeT0iNzExLjExMjMiPlJlcG9zaXRvcnk8L3RleHQ+PC9nPjxnIGNsYXNzPSJwYXJ0aWNpcGFudCBwYXJ0aWNpcGFudC1oZWFkIiBkYXRhLXBhcnRpY2lwYW50PSJEQiI+PHRleHQgZmlsbD0iIzAwMDAwMCIgZm9udC1mYW1pbHk9InNhbnMtc2VyaWYiIGZvbnQtc2l6ZT0iMTQiIGxlbmd0aEFkanVzdD0ic3BhY2luZyIgdGV4dExlbmd0aD0iODMuOTk5NiIgeD0iOTY4LjU0NzEiIHk9IjExNS4yOTIiPiYjMTI0ODc7JiMxMjU0MDsmIzEyNDc5OyYjMTI1MDU7JiMxMjU0MDsmIzEyNDczOzwvdGV4dD48cGF0aCBkPSJNOTk1LjU0NjksNjYuMjk2OSBDOTk1LjU0NjksNTYuMjk2OSAxMDEzLjU0NjksNTYuMjk2OSAxMDEzLjU0NjksNTYuMjk2OSBDMTAxMy41NDY5LDU2LjI5NjkgMTAzMS41NDY5LDU2LjI5NjkgMTAzMS41NDY5LDY2LjI5NjkgTDEwMzEuNTQ2OSw5Mi4yOTY5IEMxMDMxLjU0NjksMTAyLjI5NjkgMTAxMy41NDY5LDEwMi4yOTY5IDEwMTMuNTQ2OSwxMDIuMjk2OSBDMTAxMy41NDY5LDEwMi4yOTY5IDk5NS41NDY5LDEwMi4yOTY5IDk5NS41NDY5LDkyLjI5NjkgTDk5NS41NDY5LDY2LjI5NjkiIGZpbGw9IiNFMkUyRjAiIHN0eWxlPSJzdHJva2U6IzE4MTgxODtzdHJva2Utd2lkdGg6MC41OyIvPjxwYXRoIGQ9Ik05OTUuNTQ2OSw2Ni4yOTY5IEM5OTUuNTQ2OSw3Ni4yOTY5IDEwMTMuNTQ2OSw3Ni4yOTY5IDEwMTMuNTQ2OSw3Ni4yOTY5IEMxMDEzLjU0NjksNzYuMjk2OSAxMDMxLjU0NjksNzYuMjk2OSAxMDMxLjU0NjksNjYuMjk2OSIgZmlsbD0ibm9uZSIgc3R5bGU9InN0cm9rZTojMTgxODE4O3N0cm9rZS13aWR0aDowLjU7Ii8+PC9nPjxnIGNsYXNzPSJwYXJ0aWNpcGFudCBwYXJ0aWNpcGFudC10YWlsIiBkYXRhLXBhcnRpY2lwYW50PSJEQiI+PHRleHQgZmlsbD0iIzAwMDAwMCIgZm9udC1mYW1pbHk9InNhbnMtc2VyaWYiIGZvbnQtc2l6ZT0iMTQiIGxlbmd0aEFkanVzdD0ic3BhY2luZyIgdGV4dExlbmd0aD0iODMuOTk5NiIgeD0iOTY4LjU0NzEiIHk9IjcwNC4xMTIzIj4mIzEyNDg3OyYjMTI1NDA7JiMxMjQ3OTsmIzEyNTA1OyYjMTI1NDA7JiMxMjQ3Mzs8L3RleHQ+PHBhdGggZD0iTTk5NS41NDY5LDcxNy40MTQxIEM5OTUuNTQ2OSw3MDcuNDE0MSAxMDEzLjU0NjksNzA3LjQxNDEgMTAxMy41NDY5LDcwNy40MTQxIEMxMDEzLjU0NjksNzA3LjQxNDEgMTAzMS41NDY5LDcwNy40MTQxIDEwMzEuNTQ2OSw3MTcuNDE0MSBMMTAzMS41NDY5LDc0My40MTQxIEMxMDMxLjU0NjksNzUzLjQxNDEgMTAxMy41NDY5LDc1My40MTQxIDEwMTMuNTQ2OSw3NTMuNDE0MSBDMTAxMy41NDY5LDc1My40MTQxIDk5NS41NDY5LDc1My40MTQxIDk5NS41NDY5LDc0My40MTQxIEw5OTUuNTQ2OSw3MTcuNDE0MSIgZmlsbD0iI0UyRTJGMCIgc3R5bGU9InN0cm9rZTojMTgxODE4O3N0cm9rZS13aWR0aDowLjU7Ii8+PHBhdGggZD0iTTk5NS41NDY5LDcxNy40MTQxIEM5OTUuNTQ2OSw3MjcuNDE0MSAxMDEzLjU0NjksNzI3LjQxNDEgMTAxMy41NDY5LDcyNy40MTQxIEMxMDEzLjU0NjksNzI3LjQxNDEgMTAzMS41NDY5LDcyNy40MTQxIDEwMzEuNTQ2OSw3MTcuNDE0MSIgZmlsbD0ibm9uZSIgc3R5bGU9InN0cm9rZTojMTgxODE4O3N0cm9rZS13aWR0aDowLjU7Ii8+PC9nPjxnIGNsYXNzPSJtZXNzYWdlIiBkYXRhLXBhcnRpY2lwYW50LTE9Ii4uLi4iIGRhdGEtcGFydGljaXBhbnQtMj0iRkUiPjxwb2x5Z29uIGZpbGw9IiMxODE4MTgiIHBvaW50cz0iMTc4LDE0NS43MjY2LDE4OCwxNDkuNzI2NiwxNzgsMTUzLjcyNjYsMTgyLDE0OS43MjY2IiBzdHlsZT0ic3Ryb2tlOiMxODE4MTg7c3Ryb2tlLXdpZHRoOjE7Ii8+PGxpbmUgc3R5bGU9InN0cm9rZTojMTgxODE4O3N0cm9rZS13aWR0aDoxOyIgeDE9IjM1Ljk5OTkiIHgyPSIxODQiIHkxPSIxNDkuNzI2NiIgeTI9IjE0OS43MjY2Ii8+PHRleHQgZmlsbD0iIzAwMDAwMCIgZm9udC1mYW1pbHk9InNhbnMtc2VyaWYiIGZvbnQtc2l6ZT0iMTMiIGxlbmd0aEFkanVzdD0ic3BhY2luZyIgdGV4dExlbmd0aD0iMTMwLjAwMDIiIHg9IjQyLjk5OTkiIHk9IjE0NC42NjA2Ij4mIzEyNDgwOyYjMTI0NTQ7JiMxMjUzMTsmIzEyNTI1OyYjMTI1NDA7JiMxMjQ4OTsmIzIzNTUwOyYjMzU5Mzc7JiMzNjk4NDsmIzI1MjQ2OzwvdGV4dD48L2c+PGcgY2xhc3M9Im1lc3NhZ2UiIGRhdGEtcGFydGljaXBhbnQtMT0iRkUiIGRhdGEtcGFydGljaXBhbnQtMj0iQVBJIj48cG9seWdvbiBmaWxsPSIjMTgxODE4IiBwb2ludHM9IjQwNS44NjE0LDE3NC44NTk0LDQxNS44NjE0LDE3OC44NTk0LDQwNS44NjE0LDE4Mi44NTk0LDQwOS44NjE0LDE3OC44NTk0IiBzdHlsZT0ic3Ryb2tlOiMxODE4MTg7c3Ryb2tlLXdpZHRoOjE7Ii8+PGxpbmUgc3R5bGU9InN0cm9rZTojMTgxODE4O3N0cm9rZS13aWR0aDoxOyIgeDE9IjE5MCIgeDI9IjQxMS44NjE0IiB5MT0iMTc4Ljg1OTQiIHkyPSIxNzguODU5NCIvPjx0ZXh0IGZpbGw9IiMwMDAwMDAiIGZvbnQtZmFtaWx5PSJzYW5zLXNlcmlmIiBmb250LXNpemU9IjEzIiBsZW5ndGhBZGp1c3Q9InNwYWNpbmciIHRleHRMZW5ndGg9IjE3Ny42NzcyIiB4PSIxOTciIHk9IjE3My43OTM1Ij5QT1NUIC9hcGkvZG93bmxvYWRzL2NvdW50PC90ZXh0PjwvZz48ZyBjbGFzcz0ibWVzc2FnZSIgZGF0YS1wYXJ0aWNpcGFudC0xPSJBUEkiIGRhdGEtcGFydGljaXBhbnQtMj0iU1ZDIj48cG9seWdvbiBmaWxsPSIjMTgxODE4IiBwb2ludHM9IjY0My4zNDU3LDIwMy45OTIyLDY1My4zNDU3LDIwNy45OTIyLDY0My4zNDU3LDIxMS45OTIyLDY0Ny4zNDU3LDIwNy45OTIyIiBzdHlsZT0ic3Ryb2tlOiMxODE4MTg7c3Ryb2tlLXdpZHRoOjE7Ii8+PGxpbmUgc3R5bGU9InN0cm9rZTojMTgxODE4O3N0cm9rZS13aWR0aDoxOyIgeDE9IjQxNy44NjE0IiB4Mj0iNjQ5LjM0NTciIHkxPSIyMDcuOTkyMiIgeTI9IjIwNy45OTIyIi8+PHRleHQgZmlsbD0iIzAwMDAwMCIgZm9udC1mYW1pbHk9InNhbnMtc2VyaWYiIGZvbnQtc2l6ZT0iMTMiIGxlbmd0aEFkanVzdD0ic3BhY2luZyIgdGV4dExlbmd0aD0iOTIuOTQyNCIgeD0iNDI0Ljg2MTQiIHk9IjIwMi45MjYzIj5jb3VudChjcml0ZXJpYSk8L3RleHQ+PC9nPjxnIGNsYXNzPSJtZXNzYWdlIiBkYXRhLXBhcnRpY2lwYW50LTE9IlNWQyIgZGF0YS1wYXJ0aWNpcGFudC0yPSJSRVBPIj48cG9seWdvbiBmaWxsPSIjMTgxODE4IiBwb2ludHM9Ijg3Ny45ODM5LDIzMy4xMjUsODg3Ljk4MzksMjM3LjEyNSw4NzcuOTgzOSwyNDEuMTI1LDg4MS45ODM5LDIzNy4xMjUiIHN0eWxlPSJzdHJva2U6IzE4MTgxODtzdHJva2Utd2lkdGg6MTsiLz48bGluZSBzdHlsZT0ic3Ryb2tlOiMxODE4MTg7c3Ryb2tlLXdpZHRoOjE7IiB4MT0iNjU1LjM0NTciIHgyPSI4ODMuOTgzOSIgeTE9IjIzNy4xMjUiIHkyPSIyMzcuMTI1Ii8+PHRleHQgZmlsbD0iIzAwMDAwMCIgZm9udC1mYW1pbHk9InNhbnMtc2VyaWYiIGZvbnQtc2l6ZT0iMTMiIGxlbmd0aEFkanVzdD0ic3BhY2luZyIgdGV4dExlbmd0aD0iMTIzLjUzODEiIHg9IjY2Mi4zNDU3IiB5PSIyMzIuMDU5MSI+Y291bnRCeShjb25kaXRpb24pPC90ZXh0PjwvZz48ZyBjbGFzcz0ibWVzc2FnZSIgZGF0YS1wYXJ0aWNpcGFudC0xPSJSRVBPIiBkYXRhLXBhcnRpY2lwYW50LTI9IkRCIj48cG9seWdvbiBmaWxsPSIjMTgxODE4IiBwb2ludHM9IjEwMDEuNTQ2OSwyNjIuMjU3OCwxMDExLjU0NjksMjY2LjI1NzgsMTAwMS41NDY5LDI3MC4yNTc4LDEwMDUuNTQ2OSwyNjYuMjU3OCIgc3R5bGU9InN0cm9rZTojMTgxODE4O3N0cm9rZS13aWR0aDoxOyIvPjxsaW5lIHN0eWxlPSJzdHJva2U6IzE4MTgxODtzdHJva2Utd2lkdGg6MTsiIHgxPSI4ODkuOTgzOSIgeDI9IjEwMDcuNTQ2OSIgeTE9IjI2Ni4yNTc4IiB5Mj0iMjY2LjI1NzgiLz48dGV4dCBmaWxsPSIjMDAwMDAwIiBmb250LWZhbWlseT0ic2Fucy1zZXJpZiIgZm9udC1zaXplPSIxMyIgbGVuZ3RoQWRqdXN0PSJzcGFjaW5nIiB0ZXh0TGVuZ3RoPSI5OS41NjMiIHg9Ijg5Ni45ODM5IiB5PSIyNjEuMTkxOSI+U0VMRUNUIENPVU5UPC90ZXh0PjwvZz48ZyBjbGFzcz0ibWVzc2FnZSIgZGF0YS1wYXJ0aWNpcGFudC0xPSJSRVBPIiBkYXRhLXBhcnRpY2lwYW50LTI9IlNWQyI+PHBvbHlnb24gZmlsbD0iIzE4MTgxOCIgcG9pbnRzPSI2NjYuMzQ1NywyOTEuMzkwNiw2NTYuMzQ1NywyOTUuMzkwNiw2NjYuMzQ1NywyOTkuMzkwNiw2NjIuMzQ1NywyOTUuMzkwNiIgc3R5bGU9InN0cm9rZTojMTgxODE4O3N0cm9rZS13aWR0aDoxOyIvPjxsaW5lIHN0eWxlPSJzdHJva2U6IzE4MTgxODtzdHJva2Utd2lkdGg6MTtzdHJva2UtZGFzaGFycmF5OjIsMjsiIHgxPSI2NjAuMzQ1NyIgeDI9Ijg4OC45ODM5IiB5MT0iMjk1LjM5MDYiIHkyPSIyOTUuMzkwNiIvPjx0ZXh0IGZpbGw9IiMwMDAwMDAiIGZvbnQtZmFtaWx5PSJzYW5zLXNlcmlmIiBmb250LXNpemU9IjEzIiBsZW5ndGhBZGp1c3Q9InNwYWNpbmciIHRleHRMZW5ndGg9IjI2IiB4PSI2NzIuMzQ1NyIgeT0iMjkwLjMyNDciPiYjMjAyMTQ7JiMyNTk2ODs8L3RleHQ+PC9nPjxnIGNsYXNzPSJtZXNzYWdlIiBkYXRhLXBhcnRpY2lwYW50LTE9IlNWQyIgZGF0YS1wYXJ0aWNpcGFudC0yPSJBUEkiPjxwb2x5Z29uIGZpbGw9IiMxODE4MTgiIHBvaW50cz0iNDI4Ljg2MTQsMzIwLjUyMzQsNDE4Ljg2MTQsMzI0LjUyMzQsNDI4Ljg2MTQsMzI4LjUyMzQsNDI0Ljg2MTQsMzI0LjUyMzQiIHN0eWxlPSJzdHJva2U6IzE4MTgxODtzdHJva2Utd2lkdGg6MTsiLz48bGluZSBzdHlsZT0ic3Ryb2tlOiMxODE4MTg7c3Ryb2tlLXdpZHRoOjE7c3Ryb2tlLWRhc2hhcnJheToyLDI7IiB4MT0iNDIyLjg2MTQiIHgyPSI2NTQuMzQ1NyIgeTE9IjMyNC41MjM0IiB5Mj0iMzI0LjUyMzQiLz48dGV4dCBmaWxsPSIjMDAwMDAwIiBmb250LWZhbWlseT0ic2Fucy1zZXJpZiIgZm9udC1zaXplPSIxMyIgbGVuZ3RoQWRqdXN0PSJzcGFjaW5nIiB0ZXh0TGVuZ3RoPSIyNiIgeD0iNDM0Ljg2MTQiIHk9IjMxOS40NTc1Ij4mIzIwMjE0OyYjMjU5Njg7PC90ZXh0PjwvZz48ZyBjbGFzcz0ibWVzc2FnZSIgZGF0YS1wYXJ0aWNpcGFudC0xPSJBUEkiIGRhdGEtcGFydGljaXBhbnQtMj0iRkUiPjxwb2x5Z29uIGZpbGw9IiMxODE4MTgiIHBvaW50cz0iMjAxLDM0OS42NTYzLDE5MSwzNTMuNjU2MywyMDEsMzU3LjY1NjMsMTk3LDM1My42NTYzIiBzdHlsZT0ic3Ryb2tlOiMxODE4MTg7c3Ryb2tlLXdpZHRoOjE7Ii8+PGxpbmUgc3R5bGU9InN0cm9rZTojMTgxODE4O3N0cm9rZS13aWR0aDoxO3N0cm9rZS1kYXNoYXJyYXk6MiwyOyIgeDE9IjE5NSIgeDI9IjQxNi44NjE0IiB5MT0iMzUzLjY1NjMiIHkyPSIzNTMuNjU2MyIvPjx0ZXh0IGZpbGw9IiMwMDAwMDAiIGZvbnQtZmFtaWx5PSJzYW5zLXNlcmlmIiBmb250LXNpemU9IjEzIiBsZW5ndGhBZGp1c3Q9InNwYWNpbmciIHRleHRMZW5ndGg9IjUyLjAwMDEiIHg9IjIwNyIgeT0iMzQ4LjU5MDMiPiYjMjAyMTQ7JiMyNTk2ODsmIzM0OTIwOyYjMzEwMzQ7PC90ZXh0PjwvZz48ZyBjbGFzcz0ibWVzc2FnZSIgZGF0YS1wYXJ0aWNpcGFudC0xPSIuLi4uIiBkYXRhLXBhcnRpY2lwYW50LTI9IkZFIj48cG9seWdvbiBmaWxsPSIjMTgxODE4IiBwb2ludHM9IjE3OCwzNzguNzg5MSwxODgsMzgyLjc4OTEsMTc4LDM4Ni43ODkxLDE4MiwzODIuNzg5MSIgc3R5bGU9InN0cm9rZTojMTgxODE4O3N0cm9rZS13aWR0aDoxOyIvPjxsaW5lIHN0eWxlPSJzdHJva2U6IzE4MTgxODtzdHJva2Utd2lkdGg6MTsiIHgxPSIzNS45OTk5IiB4Mj0iMTg0IiB5MT0iMzgyLjc4OTEiIHkyPSIzODIuNzg5MSIvPjx0ZXh0IGZpbGw9IiMwMDAwMDAiIGZvbnQtZmFtaWx5PSJzYW5zLXNlcmlmIiBmb250LXNpemU9IjEzIiBsZW5ndGhBZGp1c3Q9InNwYWNpbmciIHRleHRMZW5ndGg9IjY1LjAwMDEiIHg9IjQyLjk5OTkiIHk9IjM3Ny43MjMxIj4mIzIzNDU1OyYjMzQ4OTI7JiMxMjUwODsmIzEyNDc5OyYjMTI1MzE7PC90ZXh0PjwvZz48ZyBjbGFzcz0ibWVzc2FnZSIgZGF0YS1wYXJ0aWNpcGFudC0xPSJGRSIgZGF0YS1wYXJ0aWNpcGFudC0yPSJBUEkiPjxwb2x5Z29uIGZpbGw9IiMxODE4MTgiIHBvaW50cz0iNDA1Ljg2MTQsNDA3LjkyMTksNDE1Ljg2MTQsNDExLjkyMTksNDA1Ljg2MTQsNDE1LjkyMTksNDA5Ljg2MTQsNDExLjkyMTkiIHN0eWxlPSJzdHJva2U6IzE4MTgxODtzdHJva2Utd2lkdGg6MTsiLz48bGluZSBzdHlsZT0ic3Ryb2tlOiMxODE4MTg7c3Ryb2tlLXdpZHRoOjE7IiB4MT0iMTkwIiB4Mj0iNDExLjg2MTQiIHkxPSI0MTEuOTIxOSIgeTI9IjQxMS45MjE5Ii8+PHRleHQgZmlsbD0iIzAwMDAwMCIgZm9udC1mYW1pbHk9InNhbnMtc2VyaWYiIGZvbnQtc2l6ZT0iMTMiIGxlbmd0aEFkanVzdD0ic3BhY2luZyIgdGV4dExlbmd0aD0iMjAzLjg2MTMiIHg9IjE5NyIgeT0iNDA2Ljg1NiI+UE9TVCAvYXBpL2Rvd25sb2Fkcy9kb3dubG9hZDwvdGV4dD48L2c+PGcgY2xhc3M9Im1lc3NhZ2UiIGRhdGEtcGFydGljaXBhbnQtMT0iQVBJIiBkYXRhLXBhcnRpY2lwYW50LTI9IlNWQyI+PHBvbHlnb24gZmlsbD0iIzE4MTgxOCIgcG9pbnRzPSI2NDMuMzQ1Nyw0MzcuMDU0Nyw2NTMuMzQ1Nyw0NDEuMDU0Nyw2NDMuMzQ1Nyw0NDUuMDU0Nyw2NDcuMzQ1Nyw0NDEuMDU0NyIgc3R5bGU9InN0cm9rZTojMTgxODE4O3N0cm9rZS13aWR0aDoxOyIvPjxsaW5lIHN0eWxlPSJzdHJva2U6IzE4MTgxODtzdHJva2Utd2lkdGg6MTsiIHgxPSI0MTcuODYxNCIgeDI9IjY0OS4zNDU3IiB5MT0iNDQxLjA1NDciIHkyPSI0NDEuMDU0NyIvPjx0ZXh0IGZpbGw9IiMwMDAwMDAiIGZvbnQtZmFtaWx5PSJzYW5zLXNlcmlmIiBmb250LXNpemU9IjEzIiBsZW5ndGhBZGp1c3Q9InNwYWNpbmciIHRleHRMZW5ndGg9IjIxMy40ODQ0IiB4PSI0MjQuODYxNCIgeT0iNDM1Ljk4ODgiPmRvd25sb2FkKHN0cmVhbVdyaXRlciwgY3JpdGVyaWEpPC90ZXh0PjwvZz48ZyBjbGFzcz0ibWVzc2FnZSIgZGF0YS1wYXJ0aWNpcGFudC0xPSJTVkMiIGRhdGEtcGFydGljaXBhbnQtMj0iUkVQTyI+PHBvbHlnb24gZmlsbD0iIzE4MTgxOCIgcG9pbnRzPSI4NzcuOTgzOSw0NjYuMTg3NSw4ODcuOTgzOSw0NzAuMTg3NSw4NzcuOTgzOSw0NzQuMTg3NSw4ODEuOTgzOSw0NzAuMTg3NSIgc3R5bGU9InN0cm9rZTojMTgxODE4O3N0cm9rZS13aWR0aDoxOyIvPjxsaW5lIHN0eWxlPSJzdHJva2U6IzE4MTgxODtzdHJva2Utd2lkdGg6MTsiIHgxPSI2NTUuMzQ1NyIgeDI9Ijg4My45ODM5IiB5MT0iNDcwLjE4NzUiIHkyPSI0NzAuMTg3NSIvPjx0ZXh0IGZpbGw9IiMwMDAwMDAiIGZvbnQtZmFtaWx5PSJzYW5zLXNlcmlmIiBmb250LXNpemU9IjEzIiBsZW5ndGhBZGp1c3Q9InNwYWNpbmciIHRleHRMZW5ndGg9IjExMS4wNDU5IiB4PSI2NjIuMzQ1NyIgeT0iNDY1LjEyMTYiPmZpbmRBbGwoY29uZGl0aW9uKTwvdGV4dD48L2c+PGcgY2xhc3M9Im1lc3NhZ2UiIGRhdGEtcGFydGljaXBhbnQtMT0iUkVQTyIgZGF0YS1wYXJ0aWNpcGFudC0yPSJEQiI+PHBvbHlnb24gZmlsbD0iIzE4MTgxOCIgcG9pbnRzPSIxMDAxLjU0NjksNDk1LjMyMDMsMTAxMS41NDY5LDQ5OS4zMjAzLDEwMDEuNTQ2OSw1MDMuMzIwMywxMDA1LjU0NjksNDk5LjMyMDMiIHN0eWxlPSJzdHJva2U6IzE4MTgxODtzdHJva2Utd2lkdGg6MTsiLz48bGluZSBzdHlsZT0ic3Ryb2tlOiMxODE4MTg7c3Ryb2tlLXdpZHRoOjE7IiB4MT0iODg5Ljk4MzkiIHgyPSIxMDA3LjU0NjkiIHkxPSI0OTkuMzIwMyIgeTI9IjQ5OS4zMjAzIi8+PHRleHQgZmlsbD0iIzAwMDAwMCIgZm9udC1mYW1pbHk9InNhbnMtc2VyaWYiIGZvbnQtc2l6ZT0iMTMiIGxlbmd0aEFkanVzdD0ic3BhY2luZyIgdGV4dExlbmd0aD0iNDguOTQwNCIgeD0iODk2Ljk4MzkiIHk9IjQ5NC4yNTQ0Ij5TRUxFQ1Q8L3RleHQ+PC9nPjxnIGNsYXNzPSJtZXNzYWdlIiBkYXRhLXBhcnRpY2lwYW50LTE9IlJFUE8iIGRhdGEtcGFydGljaXBhbnQtMj0iU1ZDIj48cG9seWdvbiBmaWxsPSIjMTgxODE4IiBwb2ludHM9IjY2Ni4zNDU3LDUyNC40NTMxLDY1Ni4zNDU3LDUyOC40NTMxLDY2Ni4zNDU3LDUzMi40NTMxLDY2Mi4zNDU3LDUyOC40NTMxIiBzdHlsZT0ic3Ryb2tlOiMxODE4MTg7c3Ryb2tlLXdpZHRoOjE7Ii8+PGxpbmUgc3R5bGU9InN0cm9rZTojMTgxODE4O3N0cm9rZS13aWR0aDoxO3N0cm9rZS1kYXNoYXJyYXk6MiwyOyIgeDE9IjY2MC4zNDU3IiB4Mj0iODg4Ljk4MzkiIHkxPSI1MjguNDUzMSIgeTI9IjUyOC40NTMxIi8+PHRleHQgZmlsbD0iIzAwMDAwMCIgZm9udC1mYW1pbHk9InNhbnMtc2VyaWYiIGZvbnQtc2l6ZT0iMTMiIGxlbmd0aEFkanVzdD0ic3BhY2luZyIgdGV4dExlbmd0aD0iNzguMDAwMSIgeD0iNjcyLjM0NTciIHk9IjUyMy4zODcyIj4mIzEyNDg3OyYjMTI1NDA7JiMxMjQ3OTsmIzEyNTIyOyYjMTI0NzM7JiMxMjQ4ODs8L3RleHQ+PC9nPjxnIGNsYXNzPSJtZXNzYWdlIiBkYXRhLXBhcnRpY2lwYW50LTE9IlNWQyIgZGF0YS1wYXJ0aWNpcGFudC0yPSJDU1YiPjxwb2x5Z29uIGZpbGw9IiMxODE4MTgiIHBvaW50cz0iNzcyLjIyOTUsNTUzLjU4NTksNzgyLjIyOTUsNTU3LjU4NTksNzcyLjIyOTUsNTYxLjU4NTksNzc2LjIyOTUsNTU3LjU4NTkiIHN0eWxlPSJzdHJva2U6IzE4MTgxODtzdHJva2Utd2lkdGg6MTsiLz48bGluZSBzdHlsZT0ic3Ryb2tlOiMxODE4MTg7c3Ryb2tlLXdpZHRoOjE7IiB4MT0iNjU1LjM0NTciIHgyPSI3NzguMjI5NSIgeTE9IjU1Ny41ODU5IiB5Mj0iNTU3LjU4NTkiLz48dGV4dCBmaWxsPSIjMDAwMDAwIiBmb250LWZhbWlseT0ic2Fucy1zZXJpZiIgZm9udC1zaXplPSIxMyIgbGVuZ3RoQWRqdXN0PSJzcGFjaW5nIiB0ZXh0TGVuZ3RoPSI4MS43NjQyIiB4PSI2NjIuMzQ1NyIgeT0iNTUyLjUyIj5leHBvcnQoZGF0YSk8L3RleHQ+PC9nPjxnIGNsYXNzPSJtZXNzYWdlIiBkYXRhLXBhcnRpY2lwYW50LTE9IkNTViIgZGF0YS1wYXJ0aWNpcGFudC0yPSJTVkMiPjxwb2x5Z29uIGZpbGw9IiMxODE4MTgiIHBvaW50cz0iNjY2LjM0NTcsNTgyLjcxODgsNjU2LjM0NTcsNTg2LjcxODgsNjY2LjM0NTcsNTkwLjcxODgsNjYyLjM0NTcsNTg2LjcxODgiIHN0eWxlPSJzdHJva2U6IzE4MTgxODtzdHJva2Utd2lkdGg6MTsiLz48bGluZSBzdHlsZT0ic3Ryb2tlOiMxODE4MTg7c3Ryb2tlLXdpZHRoOjE7c3Ryb2tlLWRhc2hhcnJheToyLDI7IiB4MT0iNjYwLjM0NTciIHgyPSI3ODMuMjI5NSIgeTE9IjU4Ni43MTg4IiB5Mj0iNTg2LjcxODgiLz48dGV4dCBmaWxsPSIjMDAwMDAwIiBmb250LWZhbWlseT0ic2Fucy1zZXJpZiIgZm9udC1zaXplPSIxMyIgbGVuZ3RoQWRqdXN0PSJzcGFjaW5nIiB0ZXh0TGVuZ3RoPSI2OS4zNTQ1IiB4PSI2NzIuMzQ1NyIgeT0iNTgxLjY1MjgiPkNTViAmIzEyNDg3OyYjMTI1NDA7JiMxMjQ3OTs8L3RleHQ+PC9nPjxnIGNsYXNzPSJtZXNzYWdlIiBkYXRhLXBhcnRpY2lwYW50LTE9IlNWQyIgZGF0YS1wYXJ0aWNpcGFudC0yPSJBUEkiPjxwb2x5Z29uIGZpbGw9IiMxODE4MTgiIHBvaW50cz0iNDI4Ljg2MTQsNjExLjg1MTYsNDE4Ljg2MTQsNjE1Ljg1MTYsNDI4Ljg2MTQsNjE5Ljg1MTYsNDI0Ljg2MTQsNjE1Ljg1MTYiIHN0eWxlPSJzdHJva2U6IzE4MTgxODtzdHJva2Utd2lkdGg6MTsiLz48bGluZSBzdHlsZT0ic3Ryb2tlOiMxODE4MTg7c3Ryb2tlLXdpZHRoOjE7c3Ryb2tlLWRhc2hhcnJheToyLDI7IiB4MT0iNDIyLjg2MTQiIHgyPSI2NTQuMzQ1NyIgeTE9IjYxNS44NTE2IiB5Mj0iNjE1Ljg1MTYiLz48dGV4dCBmaWxsPSIjMDAwMDAwIiBmb250LWZhbWlseT0ic2Fucy1zZXJpZiIgZm9udC1zaXplPSIxMyIgbGVuZ3RoQWRqdXN0PSJzcGFjaW5nIiB0ZXh0TGVuZ3RoPSIxNTYuNzA0NyIgeD0iNDM0Ljg2MTQiIHk9IjYxMC43ODU2Ij5TdHJlYW1Xcml0ZXIgJiMxMjM5NTsmIzI2MzYwOyYjMTIzNjU7JiMzNjc5NjsmIzEyNDE1OzwvdGV4dD48L2c+PGcgY2xhc3M9Im1lc3NhZ2UiIGRhdGEtcGFydGljaXBhbnQtMT0iQVBJIiBkYXRhLXBhcnRpY2lwYW50LTI9IkZFIj48cG9seWdvbiBmaWxsPSIjMTgxODE4IiBwb2ludHM9IjIwMSw2NDAuOTg0NCwxOTEsNjQ0Ljk4NDQsMjAxLDY0OC45ODQ0LDE5Nyw2NDQuOTg0NCIgc3R5bGU9InN0cm9rZTojMTgxODE4O3N0cm9rZS13aWR0aDoxOyIvPjxsaW5lIHN0eWxlPSJzdHJva2U6IzE4MTgxODtzdHJva2Utd2lkdGg6MTtzdHJva2UtZGFzaGFycmF5OjIsMjsiIHgxPSIxOTUiIHgyPSI0MTYuODYxNCIgeTE9IjY0NC45ODQ0IiB5Mj0iNjQ0Ljk4NDQiLz48dGV4dCBmaWxsPSIjMDAwMDAwIiBmb250LWZhbWlseT0ic2Fucy1zZXJpZiIgZm9udC1zaXplPSIxMyIgbGVuZ3RoQWRqdXN0PSJzcGFjaW5nIiB0ZXh0TGVuZ3RoPSI4Mi4zNTQ2IiB4PSIyMDciIHk9IjYzOS45MTg1Ij5DU1YgJiMxMjUwMTsmIzEyNDQ5OyYjMTI0NTI7JiMxMjUyMzs8L3RleHQ+PC9nPjxnIGNsYXNzPSJtZXNzYWdlIiBkYXRhLXBhcnRpY2lwYW50LTE9IkZFIiBkYXRhLXBhcnRpY2lwYW50LTI9Ii4uLi4iPjxwb2x5Z29uIGZpbGw9IiMxODE4MTgiIHBvaW50cz0iNDYuOTk5OSw2NzAuMTE3MiwzNi45OTk5LDY3NC4xMTcyLDQ2Ljk5OTksNjc4LjExNzIsNDIuOTk5OSw2NzQuMTE3MiIgc3R5bGU9InN0cm9rZTojMTgxODE4O3N0cm9rZS13aWR0aDoxOyIvPjxsaW5lIHN0eWxlPSJzdHJva2U6IzE4MTgxODtzdHJva2Utd2lkdGg6MTtzdHJva2UtZGFzaGFycmF5OjIsMjsiIHgxPSI0MC45OTk5IiB4Mj0iMTg5IiB5MT0iNjc0LjExNzIiIHkyPSI2NzQuMTE3MiIvPjx0ZXh0IGZpbGw9IiMwMDAwMDAiIGZvbnQtZmFtaWx5PSJzYW5zLXNlcmlmIiBmb250LXNpemU9IjEzIiBsZW5ndGhBZGp1c3Q9InNwYWNpbmciIHRleHRMZW5ndGg9Ijc4LjAwMDEiIHg9IjUyLjk5OTkiIHk9IjY2OS4wNTEzIj4mIzEyNTAxOyYjMTI0NDk7JiMxMjQ1MjsmIzEyNTIzOyYjMjA0NDU7JiMyMzM4NDs8L3RleHQ+PC9nPjwhLS1TUkM9W1hMOVRJem4wNTdzVk5wN3VqMGlqLSAtdzN1Nk9aMkFNeGNBcnpkWU9IMWM4Yzk1RWpSb1JwS0VxN3o2TDFnUXFpWTF5TEZ1ZVdRak56Q1RURHV4X2VwVW5ja3g0TE51UVBTeXd6dDdGY0lZdXpidTl3My1lUWFYd2VMS1hzR1BzMUVpZUhqUHVVUjZWZzFrQlpURXpaa2xRNTQ2UEI0TUI1aGd1dW52QzRCOUpTdlc3cDlQcTByVDc1czY4RGFkcnpNUC1XQkE4cFBiZFA0Q2stOXZYWjI1LTZtbEZTS0NrY014Rl9ycmJra0NIakx1a2lVUUNpQ2dudnlycVdHWmRpV2stb09DdURIQ0huelhORHB2Y2o5ZDZPUDZ6T3ZFUEpabkJPcjlUQmhNaEsySGN0SWZ6RmVHcXdJVnlEZ2R6b2NfdGl0aVNOd09WbDEzTWVIMlNlUkpNakRnc25XRFVTZVA2ZVBla3RsWUd2WnBCcVdaOERMVW9HZW1GRWdZSDdhU3BkQkRad0lpS01saUNiNXR3TFEwT0xaSmhvYmxkMkREaEtRQnZ3c0h1b2V5dnRseXhKcGtjV3VNWWc4UVg3QTRtRGlBb3hfdGxkd1g3Vl9VRmpoRmk5cjlRRXdrbjlleU1qeEJMMEF2NENOUlJ1TWZqLUhYeXBseTF6UHpocGRaM19xRlJPYl94MF95SHJCRGhZUlkzbHdkTWZ2M2pHOUpkcWpwSF9aU2VWMTZVRFpLbVhGYW9fTmEzeUVSa3pYaFhOWmRGR2ZHRDk1djhUSzhTd0IySEJtS3dNOTdVelJfc1paSnkwXS0tPjwvZz48L3N2Zz4=" class="uml" alt="uml diagram" title="" /></p>
<h3 id="_4">ダウンロード対象の定義<a class="headerlink" href="#_4" title="Permanent link">&para;</a></h3>
<div class="highlight"><pre><span></span><code><span class="kn">package</span><span class="w"> </span><span class="nn">com.example.accounting.application.download</span><span class="p">;</span>

<span class="kn">import</span><span class="w"> </span><span class="nn">lombok.Getter</span><span class="p">;</span>
<span class="kn">import</span><span class="w"> </span><span class="nn">lombok.RequiredArgsConstructor</span><span class="p">;</span>

<span class="cm">/**</span>
<span class="cm"> * ダウンロード対象</span>
<span class="cm"> */</span>
<span class="nd">@Getter</span>
<span class="nd">@RequiredArgsConstructor</span>
<span class="kd">public</span><span class="w"> </span><span class="kd">enum</span><span class="w"> </span><span class="n">DownloadTarget</span><span class="w"> </span><span class="p">{</span>

<span class="w">    </span><span class="c1">// マスタデータ</span>
<span class="w">    </span><span class="n">勘定科目</span><span class="p">(</span><span class="s">&quot;account.csv&quot;</span><span class="p">,</span><span class="w"> </span><span class="n">Permission</span><span class="p">.</span><span class="na">ACCOUNT_READ</span><span class="p">),</span>
<span class="w">    </span><span class="n">勘定科目構成</span><span class="p">(</span><span class="s">&quot;account_structure.csv&quot;</span><span class="p">,</span><span class="w"> </span><span class="n">Permission</span><span class="p">.</span><span class="na">ACCOUNT_READ</span><span class="p">),</span>
<span class="w">    </span><span class="n">課税取引</span><span class="p">(</span><span class="s">&quot;tax_transaction.csv&quot;</span><span class="p">,</span><span class="w"> </span><span class="n">Permission</span><span class="p">.</span><span class="na">ACCOUNT_READ</span><span class="p">),</span>
<span class="w">    </span><span class="n">自動仕訳設定</span><span class="p">(</span><span class="s">&quot;auto_journal_setting.csv&quot;</span><span class="p">,</span><span class="w"> </span><span class="n">Permission</span><span class="p">.</span><span class="na">ACCOUNT_READ</span><span class="p">),</span>

<span class="w">    </span><span class="c1">// トランザクションデータ</span>
<span class="w">    </span><span class="n">仕訳</span><span class="p">(</span><span class="s">&quot;journal_entry.csv&quot;</span><span class="p">,</span><span class="w"> </span><span class="n">Permission</span><span class="p">.</span><span class="na">JOURNAL_READ</span><span class="p">),</span>
<span class="w">    </span><span class="n">仕訳明細</span><span class="p">(</span><span class="s">&quot;journal_line.csv&quot;</span><span class="p">,</span><span class="w"> </span><span class="n">Permission</span><span class="p">.</span><span class="na">JOURNAL_READ</span><span class="p">),</span>
<span class="w">    </span><span class="n">総勘定元帳</span><span class="p">(</span><span class="s">&quot;general_ledger.csv&quot;</span><span class="p">,</span><span class="w"> </span><span class="n">Permission</span><span class="p">.</span><span class="na">LEDGER_READ</span><span class="p">),</span>
<span class="w">    </span><span class="n">補助元帳</span><span class="p">(</span><span class="s">&quot;subsidiary_ledger.csv&quot;</span><span class="p">,</span><span class="w"> </span><span class="n">Permission</span><span class="p">.</span><span class="na">LEDGER_READ</span><span class="p">),</span>
<span class="w">    </span><span class="n">日次残高</span><span class="p">(</span><span class="s">&quot;daily_balance.csv&quot;</span><span class="p">,</span><span class="w"> </span><span class="n">Permission</span><span class="p">.</span><span class="na">LEDGER_READ</span><span class="p">),</span>

<span class="w">    </span><span class="c1">// 財務諸表</span>
<span class="w">    </span><span class="n">残高試算表</span><span class="p">(</span><span class="s">&quot;trial_balance.csv&quot;</span><span class="p">,</span><span class="w"> </span><span class="n">Permission</span><span class="p">.</span><span class="na">STATEMENT_READ</span><span class="p">),</span>
<span class="w">    </span><span class="n">貸借対照表</span><span class="p">(</span><span class="s">&quot;balance_sheet.csv&quot;</span><span class="p">,</span><span class="w"> </span><span class="n">Permission</span><span class="p">.</span><span class="na">STATEMENT_READ</span><span class="p">),</span>
<span class="w">    </span><span class="n">損益計算書</span><span class="p">(</span><span class="s">&quot;profit_loss.csv&quot;</span><span class="p">,</span><span class="w"> </span><span class="n">Permission</span><span class="p">.</span><span class="na">STATEMENT_READ</span><span class="p">),</span>

<span class="w">    </span><span class="c1">// 分析データ</span>
<span class="w">    </span><span class="n">財務分析</span><span class="p">(</span><span class="s">&quot;financial_analysis.csv&quot;</span><span class="p">,</span><span class="w"> </span><span class="n">Permission</span><span class="p">.</span><span class="na">ANALYSIS_READ</span><span class="p">),</span>
<span class="w">    </span><span class="n">月次推移</span><span class="p">(</span><span class="s">&quot;monthly_trend.csv&quot;</span><span class="p">,</span><span class="w"> </span><span class="n">Permission</span><span class="p">.</span><span class="na">ANALYSIS_READ</span><span class="p">),</span>

<span class="w">    </span><span class="c1">// 監査データ</span>
<span class="w">    </span><span class="n">監査ログ</span><span class="p">(</span><span class="s">&quot;audit_log.csv&quot;</span><span class="p">,</span><span class="w"> </span><span class="n">Permission</span><span class="p">.</span><span class="na">AUDIT_READ</span><span class="p">);</span>

<span class="w">    </span><span class="kd">private</span><span class="w"> </span><span class="kd">final</span><span class="w"> </span><span class="n">String</span><span class="w"> </span><span class="n">fileName</span><span class="p">;</span>
<span class="w">    </span><span class="kd">private</span><span class="w"> </span><span class="kd">final</span><span class="w"> </span><span class="n">Permission</span><span class="w"> </span><span class="n">requiredPermission</span><span class="p">;</span>

<span class="w">    </span><span class="cm">/**</span>
<span class="cm">     * ファイル名から対象を取得</span>
<span class="cm">     */</span>
<span class="w">    </span><span class="kd">public</span><span class="w"> </span><span class="kd">static</span><span class="w"> </span><span class="n">DownloadTarget</span><span class="w"> </span><span class="nf">fromFileName</span><span class="p">(</span><span class="n">String</span><span class="w"> </span><span class="n">fileName</span><span class="p">)</span><span class="w"> </span><span class="p">{</span>
<span class="w">        </span><span class="k">for</span><span class="w"> </span><span class="p">(</span><span class="n">DownloadTarget</span><span class="w"> </span><span class="n">target</span><span class="w"> </span><span class="p">:</span><span class="w"> </span><span class="n">values</span><span class="p">())</span><span class="w"> </span><span class="p">{</span>
<span class="w">            </span><span class="k">if</span><span class="w"> </span><span class="p">(</span><span class="n">target</span><span class="p">.</span><span class="na">fileName</span><span class="p">.</span><span class="na">equals</span><span class="p">(</span><span class="n">fileName</span><span class="p">))</span><span class="w"> </span><span class="p">{</span>
<span class="w">                </span><span class="k">return</span><span class="w"> </span><span class="n">target</span><span class="p">;</span>
<span class="w">            </span><span class="p">}</span>
<span class="w">        </span><span class="p">}</span>
<span class="w">        </span><span class="k">throw</span><span class="w"> </span><span class="k">new</span><span class="w"> </span><span class="n">IllegalArgumentException</span><span class="p">(</span>
<span class="w">            </span><span class="s">&quot;不正なダウンロード対象です: &quot;</span><span class="w"> </span><span class="o">+</span><span class="w"> </span><span class="n">fileName</span>
<span class="w">        </span><span class="p">);</span>
<span class="w">    </span><span class="p">}</span>
<span class="p">}</span>
</code></pre></div>
<h3 id="_5">ダウンロード条件<a class="headerlink" href="#_5" title="Permanent link">&para;</a></h3>
<div class="highlight"><pre><span></span><code><span class="kn">package</span><span class="w"> </span><span class="nn">com.example.accounting.application.download</span><span class="p">;</span>

<span class="kn">import</span><span class="w"> </span><span class="nn">lombok.Builder</span><span class="p">;</span>
<span class="kn">import</span><span class="w"> </span><span class="nn">lombok.Value</span><span class="p">;</span>
<span class="kn">import</span><span class="w"> </span><span class="nn">java.time.LocalDate</span><span class="p">;</span>

<span class="cm">/**</span>
<span class="cm"> * ダウンロード条件</span>
<span class="cm"> */</span>
<span class="nd">@Value</span>
<span class="nd">@Builder</span>
<span class="kd">public</span><span class="w"> </span><span class="kd">class</span> <span class="nc">DownloadCriteria</span><span class="w"> </span><span class="p">{</span>

<span class="w">    </span><span class="n">DownloadTarget</span><span class="w"> </span><span class="n">target</span><span class="p">;</span>

<span class="w">    </span><span class="c1">// 期間指定</span>
<span class="w">    </span><span class="n">LocalDate</span><span class="w"> </span><span class="n">startDate</span><span class="p">;</span>
<span class="w">    </span><span class="n">LocalDate</span><span class="w"> </span><span class="n">endDate</span><span class="p">;</span>

<span class="w">    </span><span class="c1">// 会計年度指定</span>
<span class="w">    </span><span class="n">Integer</span><span class="w"> </span><span class="n">fiscalYear</span><span class="p">;</span>

<span class="w">    </span><span class="c1">// 勘定科目フィルタ</span>
<span class="w">    </span><span class="n">String</span><span class="w"> </span><span class="n">accountCodeFrom</span><span class="p">;</span>
<span class="w">    </span><span class="n">String</span><span class="w"> </span><span class="n">accountCodeTo</span><span class="p">;</span>

<span class="w">    </span><span class="c1">// 仕訳ステータスフィルタ</span>
<span class="w">    </span><span class="n">String</span><span class="w"> </span><span class="n">journalStatus</span><span class="p">;</span>

<span class="w">    </span><span class="cm">/**</span>
<span class="cm">     * ダウンロード対象のファイル名を取得</span>
<span class="cm">     */</span>
<span class="w">    </span><span class="kd">public</span><span class="w"> </span><span class="n">String</span><span class="w"> </span><span class="nf">getFileName</span><span class="p">()</span><span class="w"> </span><span class="p">{</span>
<span class="w">        </span><span class="k">return</span><span class="w"> </span><span class="n">target</span><span class="p">.</span><span class="na">getFileName</span><span class="p">();</span>
<span class="w">    </span><span class="p">}</span>

<span class="w">    </span><span class="cm">/**</span>
<span class="cm">     * 期間指定があるか確認</span>
<span class="cm">     */</span>
<span class="w">    </span><span class="kd">public</span><span class="w"> </span><span class="kt">boolean</span><span class="w"> </span><span class="nf">hasPeriod</span><span class="p">()</span><span class="w"> </span><span class="p">{</span>
<span class="w">        </span><span class="k">return</span><span class="w"> </span><span class="n">startDate</span><span class="w"> </span><span class="o">!=</span><span class="w"> </span><span class="kc">null</span><span class="w"> </span><span class="o">&amp;&amp;</span><span class="w"> </span><span class="n">endDate</span><span class="w"> </span><span class="o">!=</span><span class="w"> </span><span class="kc">null</span><span class="p">;</span>
<span class="w">    </span><span class="p">}</span>

<span class="w">    </span><span class="cm">/**</span>
<span class="cm">     * 会計年度指定があるか確認</span>
<span class="cm">     */</span>
<span class="w">    </span><span class="kd">public</span><span class="w"> </span><span class="kt">boolean</span><span class="w"> </span><span class="nf">hasFiscalYear</span><span class="p">()</span><span class="w"> </span><span class="p">{</span>
<span class="w">        </span><span class="k">return</span><span class="w"> </span><span class="n">fiscalYear</span><span class="w"> </span><span class="o">!=</span><span class="w"> </span><span class="kc">null</span><span class="p">;</span>
<span class="w">    </span><span class="p">}</span>

<span class="w">    </span><span class="cm">/**</span>
<span class="cm">     * 勘定科目範囲指定があるか確認</span>
<span class="cm">     */</span>
<span class="w">    </span><span class="kd">public</span><span class="w"> </span><span class="kt">boolean</span><span class="w"> </span><span class="nf">hasAccountRange</span><span class="p">()</span><span class="w"> </span><span class="p">{</span>
<span class="w">        </span><span class="k">return</span><span class="w"> </span><span class="n">accountCodeFrom</span><span class="w"> </span><span class="o">!=</span><span class="w"> </span><span class="kc">null</span><span class="w"> </span><span class="o">||</span><span class="w"> </span><span class="n">accountCodeTo</span><span class="w"> </span><span class="o">!=</span><span class="w"> </span><span class="kc">null</span><span class="p">;</span>
<span class="w">    </span><span class="p">}</span>
<span class="p">}</span>
</code></pre></div>
<hr />
<h2 id="263-csv">26.3 CSVエクスポータの実装<a class="headerlink" href="#263-csv" title="Permanent link">&para;</a></h2>
<h3 id="csv">CSVエクスポータインターフェース<a class="headerlink" href="#csv" title="Permanent link">&para;</a></h3>
<div class="highlight"><pre><span></span><code><span class="kn">package</span><span class="w"> </span><span class="nn">com.example.accounting.infrastructure.export</span><span class="p">;</span>

<span class="kn">import</span><span class="w"> </span><span class="nn">java.io.Writer</span><span class="p">;</span>
<span class="kn">import</span><span class="w"> </span><span class="nn">java.util.List</span><span class="p">;</span>

<span class="cm">/**</span>
<span class="cm"> * CSVエクスポータ</span>
<span class="cm"> */</span>
<span class="kd">public</span><span class="w"> </span><span class="kd">interface</span> <span class="nc">CsvExporter</span><span class="o">&lt;</span><span class="n">T</span><span class="o">&gt;</span><span class="w"> </span><span class="p">{</span>

<span class="w">    </span><span class="cm">/**</span>
<span class="cm">     * ヘッダー行を取得</span>
<span class="cm">     */</span>
<span class="w">    </span><span class="n">String</span><span class="o">[]</span><span class="w"> </span><span class="nf">getHeaders</span><span class="p">();</span>

<span class="w">    </span><span class="cm">/**</span>
<span class="cm">     * データをCSV行に変換</span>
<span class="cm">     */</span>
<span class="w">    </span><span class="n">String</span><span class="o">[]</span><span class="w"> </span><span class="nf">toRow</span><span class="p">(</span><span class="n">T</span><span class="w"> </span><span class="n">data</span><span class="p">);</span>

<span class="w">    </span><span class="cm">/**</span>
<span class="cm">     * CSVを出力</span>
<span class="cm">     */</span>
<span class="w">    </span><span class="k">default</span><span class="w"> </span><span class="kt">void</span><span class="w"> </span><span class="nf">export</span><span class="p">(</span><span class="n">Writer</span><span class="w"> </span><span class="n">writer</span><span class="p">,</span><span class="w"> </span><span class="n">List</span><span class="o">&lt;</span><span class="n">T</span><span class="o">&gt;</span><span class="w"> </span><span class="n">dataList</span><span class="p">)</span><span class="w"> </span><span class="kd">throws</span><span class="w"> </span><span class="n">Exception</span><span class="w"> </span><span class="p">{</span>
<span class="w">        </span><span class="c1">// BOM出力（Excel対応）</span>
<span class="w">        </span><span class="n">writer</span><span class="p">.</span><span class="na">write</span><span class="p">(</span><span class="sc">&#39;\uFEFF&#39;</span><span class="p">);</span>

<span class="w">        </span><span class="c1">// ヘッダー出力</span>
<span class="w">        </span><span class="n">writeLine</span><span class="p">(</span><span class="n">writer</span><span class="p">,</span><span class="w"> </span><span class="n">getHeaders</span><span class="p">());</span>

<span class="w">        </span><span class="c1">// データ出力</span>
<span class="w">        </span><span class="k">for</span><span class="w"> </span><span class="p">(</span><span class="n">T</span><span class="w"> </span><span class="n">data</span><span class="w"> </span><span class="p">:</span><span class="w"> </span><span class="n">dataList</span><span class="p">)</span><span class="w"> </span><span class="p">{</span>
<span class="w">            </span><span class="n">writeLine</span><span class="p">(</span><span class="n">writer</span><span class="p">,</span><span class="w"> </span><span class="n">toRow</span><span class="p">(</span><span class="n">data</span><span class="p">));</span>
<span class="w">        </span><span class="p">}</span>

<span class="w">        </span><span class="n">writer</span><span class="p">.</span><span class="na">flush</span><span class="p">();</span>
<span class="w">    </span><span class="p">}</span>

<span class="w">    </span><span class="cm">/**</span>
<span class="cm">     * 1行出力</span>
<span class="cm">     */</span>
<span class="w">    </span><span class="kd">private</span><span class="w"> </span><span class="kt">void</span><span class="w"> </span><span class="nf">writeLine</span><span class="p">(</span><span class="n">Writer</span><span class="w"> </span><span class="n">writer</span><span class="p">,</span><span class="w"> </span><span class="n">String</span><span class="o">[]</span><span class="w"> </span><span class="n">values</span><span class="p">)</span><span class="w"> </span><span class="kd">throws</span><span class="w"> </span><span class="n">Exception</span><span class="w"> </span><span class="p">{</span>
<span class="w">        </span><span class="n">StringBuilder</span><span class="w"> </span><span class="n">sb</span><span class="w"> </span><span class="o">=</span><span class="w"> </span><span class="k">new</span><span class="w"> </span><span class="n">StringBuilder</span><span class="p">();</span>
<span class="w">        </span><span class="k">for</span><span class="w"> </span><span class="p">(</span><span class="kt">int</span><span class="w"> </span><span class="n">i</span><span class="w"> </span><span class="o">=</span><span class="w"> </span><span class="mi">0</span><span class="p">;</span><span class="w"> </span><span class="n">i</span><span class="w"> </span><span class="o">&lt;</span><span class="w"> </span><span class="n">values</span><span class="p">.</span><span class="na">length</span><span class="p">;</span><span class="w"> </span><span class="n">i</span><span class="o">++</span><span class="p">)</span><span class="w"> </span><span class="p">{</span>
<span class="w">            </span><span class="k">if</span><span class="w"> </span><span class="p">(</span><span class="n">i</span><span class="w"> </span><span class="o">&gt;</span><span class="w"> </span><span class="mi">0</span><span class="p">)</span><span class="w"> </span><span class="n">sb</span><span class="p">.</span><span class="na">append</span><span class="p">(</span><span class="s">&quot;,&quot;</span><span class="p">);</span>
<span class="w">            </span><span class="n">sb</span><span class="p">.</span><span class="na">append</span><span class="p">(</span><span class="n">escapeCsv</span><span class="p">(</span><span class="n">values</span><span class="o">[</span><span class="n">i</span><span class="o">]</span><span class="p">));</span>
<span class="w">        </span><span class="p">}</span>
<span class="w">        </span><span class="n">sb</span><span class="p">.</span><span class="na">append</span><span class="p">(</span><span class="s">&quot;\r\n&quot;</span><span class="p">);</span>
<span class="w">        </span><span class="n">writer</span><span class="p">.</span><span class="na">write</span><span class="p">(</span><span class="n">sb</span><span class="p">.</span><span class="na">toString</span><span class="p">());</span>
<span class="w">    </span><span class="p">}</span>

<span class="w">    </span><span class="cm">/**</span>
<span class="cm">     * CSVエスケープ</span>
<span class="cm">     */</span>
<span class="w">    </span><span class="kd">private</span><span class="w"> </span><span class="n">String</span><span class="w"> </span><span class="nf">escapeCsv</span><span class="p">(</span><span class="n">String</span><span class="w"> </span><span class="n">value</span><span class="p">)</span><span class="w"> </span><span class="p">{</span>
<span class="w">        </span><span class="k">if</span><span class="w"> </span><span class="p">(</span><span class="n">value</span><span class="w"> </span><span class="o">==</span><span class="w"> </span><span class="kc">null</span><span class="p">)</span><span class="w"> </span><span class="k">return</span><span class="w"> </span><span class="s">&quot;&quot;</span><span class="p">;</span>
<span class="w">        </span><span class="k">if</span><span class="w"> </span><span class="p">(</span><span class="n">value</span><span class="p">.</span><span class="na">contains</span><span class="p">(</span><span class="s">&quot;,&quot;</span><span class="p">)</span><span class="w"> </span><span class="o">||</span><span class="w"> </span><span class="n">value</span><span class="p">.</span><span class="na">contains</span><span class="p">(</span><span class="s">&quot;\&quot;&quot;</span><span class="p">)</span><span class="w"> </span><span class="o">||</span>
<span class="w">            </span><span class="n">value</span><span class="p">.</span><span class="na">contains</span><span class="p">(</span><span class="s">&quot;\n&quot;</span><span class="p">)</span><span class="w"> </span><span class="o">||</span><span class="w"> </span><span class="n">value</span><span class="p">.</span><span class="na">contains</span><span class="p">(</span><span class="s">&quot;\r&quot;</span><span class="p">))</span><span class="w"> </span><span class="p">{</span>
<span class="w">            </span><span class="k">return</span><span class="w"> </span><span class="s">&quot;\&quot;&quot;</span><span class="w"> </span><span class="o">+</span><span class="w"> </span><span class="n">value</span><span class="p">.</span><span class="na">replace</span><span class="p">(</span><span class="s">&quot;\&quot;&quot;</span><span class="p">,</span><span class="w"> </span><span class="s">&quot;\&quot;\&quot;&quot;</span><span class="p">)</span><span class="w"> </span><span class="o">+</span><span class="w"> </span><span class="s">&quot;\&quot;&quot;</span><span class="p">;</span>
<span class="w">        </span><span class="p">}</span>
<span class="w">        </span><span class="k">return</span><span class="w"> </span><span class="n">value</span><span class="p">;</span>
<span class="w">    </span><span class="p">}</span>
<span class="p">}</span>
</code></pre></div>
<h3 id="csv_1">仕訳CSVエクスポータ<a class="headerlink" href="#csv_1" title="Permanent link">&para;</a></h3>
<div class="highlight"><pre><span></span><code><span class="kn">package</span><span class="w"> </span><span class="nn">com.example.accounting.infrastructure.export</span><span class="p">;</span>

<span class="kn">import</span><span class="w"> </span><span class="nn">com.example.accounting.domain.model.journal.JournalEntry</span><span class="p">;</span>
<span class="kn">import</span><span class="w"> </span><span class="nn">com.example.accounting.domain.model.journal.JournalLine</span><span class="p">;</span>
<span class="kn">import</span><span class="w"> </span><span class="nn">org.springframework.stereotype.Component</span><span class="p">;</span>

<span class="kn">import</span><span class="w"> </span><span class="nn">java.time.format.DateTimeFormatter</span><span class="p">;</span>

<span class="cm">/**</span>
<span class="cm"> * 仕訳CSVエクスポータ</span>
<span class="cm"> */</span>
<span class="nd">@Component</span>
<span class="kd">public</span><span class="w"> </span><span class="kd">class</span> <span class="nc">JournalEntryCsvExporter</span><span class="w"> </span><span class="kd">implements</span><span class="w"> </span><span class="n">CsvExporter</span><span class="o">&lt;</span><span class="n">JournalEntry</span><span class="o">&gt;</span><span class="w"> </span><span class="p">{</span>

<span class="w">    </span><span class="kd">private</span><span class="w"> </span><span class="kd">static</span><span class="w"> </span><span class="kd">final</span><span class="w"> </span><span class="n">DateTimeFormatter</span><span class="w"> </span><span class="n">DATE_FORMAT</span><span class="w"> </span><span class="o">=</span>
<span class="w">        </span><span class="n">DateTimeFormatter</span><span class="p">.</span><span class="na">ofPattern</span><span class="p">(</span><span class="s">&quot;yyyy/MM/dd&quot;</span><span class="p">);</span>
<span class="w">    </span><span class="kd">private</span><span class="w"> </span><span class="kd">static</span><span class="w"> </span><span class="kd">final</span><span class="w"> </span><span class="n">DateTimeFormatter</span><span class="w"> </span><span class="n">DATETIME_FORMAT</span><span class="w"> </span><span class="o">=</span>
<span class="w">        </span><span class="n">DateTimeFormatter</span><span class="p">.</span><span class="na">ofPattern</span><span class="p">(</span><span class="s">&quot;yyyy/MM/dd HH:mm:ss&quot;</span><span class="p">);</span>

<span class="w">    </span><span class="nd">@Override</span>
<span class="w">    </span><span class="kd">public</span><span class="w"> </span><span class="n">String</span><span class="o">[]</span><span class="w"> </span><span class="nf">getHeaders</span><span class="p">()</span><span class="w"> </span><span class="p">{</span>
<span class="w">        </span><span class="k">return</span><span class="w"> </span><span class="k">new</span><span class="w"> </span><span class="n">String</span><span class="o">[]</span><span class="w"> </span><span class="p">{</span>
<span class="w">            </span><span class="s">&quot;仕訳番号&quot;</span><span class="p">,</span>
<span class="w">            </span><span class="s">&quot;仕訳日&quot;</span><span class="p">,</span>
<span class="w">            </span><span class="s">&quot;摘要&quot;</span><span class="p">,</span>
<span class="w">            </span><span class="s">&quot;ステータス&quot;</span><span class="p">,</span>
<span class="w">            </span><span class="s">&quot;借方合計&quot;</span><span class="p">,</span>
<span class="w">            </span><span class="s">&quot;貸方合計&quot;</span><span class="p">,</span>
<span class="w">            </span><span class="s">&quot;作成日時&quot;</span><span class="p">,</span>
<span class="w">            </span><span class="s">&quot;更新日時&quot;</span>
<span class="w">        </span><span class="p">};</span>
<span class="w">    </span><span class="p">}</span>

<span class="w">    </span><span class="nd">@Override</span>
<span class="w">    </span><span class="kd">public</span><span class="w"> </span><span class="n">String</span><span class="o">[]</span><span class="w"> </span><span class="nf">toRow</span><span class="p">(</span><span class="n">JournalEntry</span><span class="w"> </span><span class="n">entry</span><span class="p">)</span><span class="w"> </span><span class="p">{</span>
<span class="w">        </span><span class="k">return</span><span class="w"> </span><span class="k">new</span><span class="w"> </span><span class="n">String</span><span class="o">[]</span><span class="w"> </span><span class="p">{</span>
<span class="w">            </span><span class="n">entry</span><span class="p">.</span><span class="na">getJournalNumber</span><span class="p">().</span><span class="na">getValue</span><span class="p">(),</span>
<span class="w">            </span><span class="n">entry</span><span class="p">.</span><span class="na">getJournalDate</span><span class="p">().</span><span class="na">getValue</span><span class="p">().</span><span class="na">format</span><span class="p">(</span><span class="n">DATE_FORMAT</span><span class="p">),</span>
<span class="w">            </span><span class="n">entry</span><span class="p">.</span><span class="na">getDescription</span><span class="p">().</span><span class="na">getValue</span><span class="p">(),</span>
<span class="w">            </span><span class="n">entry</span><span class="p">.</span><span class="na">getStatus</span><span class="p">().</span><span class="na">getDisplayName</span><span class="p">(),</span>
<span class="w">            </span><span class="n">entry</span><span class="p">.</span><span class="na">getTotalDebit</span><span class="p">().</span><span class="na">getAmount</span><span class="p">().</span><span class="na">toPlainString</span><span class="p">(),</span>
<span class="w">            </span><span class="n">entry</span><span class="p">.</span><span class="na">getTotalCredit</span><span class="p">().</span><span class="na">getAmount</span><span class="p">().</span><span class="na">toPlainString</span><span class="p">(),</span>
<span class="w">            </span><span class="n">entry</span><span class="p">.</span><span class="na">getCreatedAt</span><span class="p">()</span><span class="w"> </span><span class="o">!=</span><span class="w"> </span><span class="kc">null</span><span class="w"> </span><span class="o">?</span>
<span class="w">                </span><span class="n">entry</span><span class="p">.</span><span class="na">getCreatedAt</span><span class="p">().</span><span class="na">format</span><span class="p">(</span><span class="n">DATETIME_FORMAT</span><span class="p">)</span><span class="w"> </span><span class="p">:</span><span class="w"> </span><span class="s">&quot;&quot;</span><span class="p">,</span>
<span class="w">            </span><span class="n">entry</span><span class="p">.</span><span class="na">getUpdatedAt</span><span class="p">()</span><span class="w"> </span><span class="o">!=</span><span class="w"> </span><span class="kc">null</span><span class="w"> </span><span class="o">?</span>
<span class="w">                </span><span class="n">entry</span><span class="p">.</span><span class="na">getUpdatedAt</span><span class="p">().</span><span class="na">format</span><span class="p">(</span><span class="n">DATETIME_FORMAT</span><span class="p">)</span><span class="w"> </span><span class="p">:</span><span class="w"> </span><span class="s">&quot;&quot;</span>
<span class="w">        </span><span class="p">};</span>
<span class="w">    </span><span class="p">}</span>
<span class="p">}</span>

<span class="cm">/**</span>
<span class="cm"> * 仕訳明細CSVエクスポータ</span>
<span class="cm"> */</span>
<span class="nd">@Component</span>
<span class="kd">public</span><span class="w"> </span><span class="kd">class</span> <span class="nc">JournalLineCsvExporter</span><span class="w"> </span><span class="kd">implements</span><span class="w"> </span><span class="n">CsvExporter</span><span class="o">&lt;</span><span class="n">JournalLineWithEntry</span><span class="o">&gt;</span><span class="w"> </span><span class="p">{</span>

<span class="w">    </span><span class="nd">@Override</span>
<span class="w">    </span><span class="kd">public</span><span class="w"> </span><span class="n">String</span><span class="o">[]</span><span class="w"> </span><span class="nf">getHeaders</span><span class="p">()</span><span class="w"> </span><span class="p">{</span>
<span class="w">        </span><span class="k">return</span><span class="w"> </span><span class="k">new</span><span class="w"> </span><span class="n">String</span><span class="o">[]</span><span class="w"> </span><span class="p">{</span>
<span class="w">            </span><span class="s">&quot;仕訳番号&quot;</span><span class="p">,</span>
<span class="w">            </span><span class="s">&quot;仕訳日&quot;</span><span class="p">,</span>
<span class="w">            </span><span class="s">&quot;行番号&quot;</span><span class="p">,</span>
<span class="w">            </span><span class="s">&quot;勘定科目コード&quot;</span><span class="p">,</span>
<span class="w">            </span><span class="s">&quot;勘定科目名&quot;</span><span class="p">,</span>
<span class="w">            </span><span class="s">&quot;借方金額&quot;</span><span class="p">,</span>
<span class="w">            </span><span class="s">&quot;貸方金額&quot;</span><span class="p">,</span>
<span class="w">            </span><span class="s">&quot;摘要&quot;</span>
<span class="w">        </span><span class="p">};</span>
<span class="w">    </span><span class="p">}</span>

<span class="w">    </span><span class="nd">@Override</span>
<span class="w">    </span><span class="kd">public</span><span class="w"> </span><span class="n">String</span><span class="o">[]</span><span class="w"> </span><span class="nf">toRow</span><span class="p">(</span><span class="n">JournalLineWithEntry</span><span class="w"> </span><span class="n">data</span><span class="p">)</span><span class="w"> </span><span class="p">{</span>
<span class="w">        </span><span class="n">JournalLine</span><span class="w"> </span><span class="n">line</span><span class="w"> </span><span class="o">=</span><span class="w"> </span><span class="n">data</span><span class="p">.</span><span class="na">getLine</span><span class="p">();</span>
<span class="w">        </span><span class="k">return</span><span class="w"> </span><span class="k">new</span><span class="w"> </span><span class="n">String</span><span class="o">[]</span><span class="w"> </span><span class="p">{</span>
<span class="w">            </span><span class="n">data</span><span class="p">.</span><span class="na">getJournalNumber</span><span class="p">(),</span>
<span class="w">            </span><span class="n">data</span><span class="p">.</span><span class="na">getJournalDate</span><span class="p">(),</span>
<span class="w">            </span><span class="n">String</span><span class="p">.</span><span class="na">valueOf</span><span class="p">(</span><span class="n">line</span><span class="p">.</span><span class="na">getLineNumber</span><span class="p">()),</span>
<span class="w">            </span><span class="n">line</span><span class="p">.</span><span class="na">getAccountCode</span><span class="p">().</span><span class="na">getValue</span><span class="p">(),</span>
<span class="w">            </span><span class="n">line</span><span class="p">.</span><span class="na">getAccountName</span><span class="p">(),</span>
<span class="w">            </span><span class="n">line</span><span class="p">.</span><span class="na">isDebit</span><span class="p">()</span><span class="w"> </span><span class="o">?</span><span class="w"> </span><span class="n">line</span><span class="p">.</span><span class="na">getAmount</span><span class="p">().</span><span class="na">getAmount</span><span class="p">().</span><span class="na">toPlainString</span><span class="p">()</span><span class="w"> </span><span class="p">:</span><span class="w"> </span><span class="s">&quot;&quot;</span><span class="p">,</span>
<span class="w">            </span><span class="n">line</span><span class="p">.</span><span class="na">isCredit</span><span class="p">()</span><span class="w"> </span><span class="o">?</span><span class="w"> </span><span class="n">line</span><span class="p">.</span><span class="na">getAmount</span><span class="p">().</span><span class="na">getAmount</span><span class="p">().</span><span class="na">toPlainString</span><span class="p">()</span><span class="w"> </span><span class="p">:</span><span class="w"> </span><span class="s">&quot;&quot;</span><span class="p">,</span>
<span class="w">            </span><span class="n">line</span><span class="p">.</span><span class="na">getDescription</span><span class="p">()</span><span class="w"> </span><span class="o">!=</span><span class="w"> </span><span class="kc">null</span><span class="w"> </span><span class="o">?</span><span class="w"> </span><span class="n">line</span><span class="p">.</span><span class="na">getDescription</span><span class="p">()</span><span class="w"> </span><span class="p">:</span><span class="w"> </span><span class="s">&quot;&quot;</span>
<span class="w">        </span><span class="p">};</span>
<span class="w">    </span><span class="p">}</span>
<span class="p">}</span>
</code></pre></div>
<h3 id="csv_2">財務諸表CSVエクスポータ<a class="headerlink" href="#csv_2" title="Permanent link">&para;</a></h3>
<div class="highlight"><pre><span></span><code><span class="kn">package</span><span class="w"> </span><span class="nn">com.example.accounting.infrastructure.export</span><span class="p">;</span>

<span class="kn">import</span><span class="w"> </span><span class="nn">com.example.accounting.domain.model.statement.BalanceSheetLine</span><span class="p">;</span>
<span class="kn">import</span><span class="w"> </span><span class="nn">com.example.accounting.domain.model.statement.ProfitLossLine</span><span class="p">;</span>
<span class="kn">import</span><span class="w"> </span><span class="nn">org.springframework.stereotype.Component</span><span class="p">;</span>

<span class="cm">/**</span>
<span class="cm"> * 貸借対照表CSVエクスポータ</span>
<span class="cm"> */</span>
<span class="nd">@Component</span>
<span class="kd">public</span><span class="w"> </span><span class="kd">class</span> <span class="nc">BalanceSheetCsvExporter</span><span class="w"> </span><span class="kd">implements</span><span class="w"> </span><span class="n">CsvExporter</span><span class="o">&lt;</span><span class="n">BalanceSheetLine</span><span class="o">&gt;</span><span class="w"> </span><span class="p">{</span>

<span class="w">    </span><span class="nd">@Override</span>
<span class="w">    </span><span class="kd">public</span><span class="w"> </span><span class="n">String</span><span class="o">[]</span><span class="w"> </span><span class="nf">getHeaders</span><span class="p">()</span><span class="w"> </span><span class="p">{</span>
<span class="w">        </span><span class="k">return</span><span class="w"> </span><span class="k">new</span><span class="w"> </span><span class="n">String</span><span class="o">[]</span><span class="w"> </span><span class="p">{</span>
<span class="w">            </span><span class="s">&quot;会計年度&quot;</span><span class="p">,</span>
<span class="w">            </span><span class="s">&quot;区分&quot;</span><span class="p">,</span>
<span class="w">            </span><span class="s">&quot;科目コード&quot;</span><span class="p">,</span>
<span class="w">            </span><span class="s">&quot;科目名&quot;</span><span class="p">,</span>
<span class="w">            </span><span class="s">&quot;金額&quot;</span><span class="p">,</span>
<span class="w">            </span><span class="s">&quot;構成比&quot;</span>
<span class="w">        </span><span class="p">};</span>
<span class="w">    </span><span class="p">}</span>

<span class="w">    </span><span class="nd">@Override</span>
<span class="w">    </span><span class="kd">public</span><span class="w"> </span><span class="n">String</span><span class="o">[]</span><span class="w"> </span><span class="nf">toRow</span><span class="p">(</span><span class="n">BalanceSheetLine</span><span class="w"> </span><span class="n">line</span><span class="p">)</span><span class="w"> </span><span class="p">{</span>
<span class="w">        </span><span class="k">return</span><span class="w"> </span><span class="k">new</span><span class="w"> </span><span class="n">String</span><span class="o">[]</span><span class="w"> </span><span class="p">{</span>
<span class="w">            </span><span class="n">String</span><span class="p">.</span><span class="na">valueOf</span><span class="p">(</span><span class="n">line</span><span class="p">.</span><span class="na">getFiscalYear</span><span class="p">()),</span>
<span class="w">            </span><span class="n">line</span><span class="p">.</span><span class="na">getSection</span><span class="p">().</span><span class="na">getDisplayName</span><span class="p">(),</span>
<span class="w">            </span><span class="n">line</span><span class="p">.</span><span class="na">getAccountCode</span><span class="p">(),</span>
<span class="w">            </span><span class="n">line</span><span class="p">.</span><span class="na">getAccountName</span><span class="p">(),</span>
<span class="w">            </span><span class="n">line</span><span class="p">.</span><span class="na">getAmount</span><span class="p">().</span><span class="na">toPlainString</span><span class="p">(),</span>
<span class="w">            </span><span class="n">line</span><span class="p">.</span><span class="na">getRatio</span><span class="p">()</span><span class="w"> </span><span class="o">!=</span><span class="w"> </span><span class="kc">null</span><span class="w"> </span><span class="o">?</span>
<span class="w">                </span><span class="n">line</span><span class="p">.</span><span class="na">getRatio</span><span class="p">().</span><span class="na">toPlainString</span><span class="p">()</span><span class="w"> </span><span class="o">+</span><span class="w"> </span><span class="s">&quot;%&quot;</span><span class="w"> </span><span class="p">:</span><span class="w"> </span><span class="s">&quot;&quot;</span>
<span class="w">        </span><span class="p">};</span>
<span class="w">    </span><span class="p">}</span>
<span class="p">}</span>

<span class="cm">/**</span>
<span class="cm"> * 損益計算書CSVエクスポータ</span>
<span class="cm"> */</span>
<span class="nd">@Component</span>
<span class="kd">public</span><span class="w"> </span><span class="kd">class</span> <span class="nc">ProfitLossCsvExporter</span><span class="w"> </span><span class="kd">implements</span><span class="w"> </span><span class="n">CsvExporter</span><span class="o">&lt;</span><span class="n">ProfitLossLine</span><span class="o">&gt;</span><span class="w"> </span><span class="p">{</span>

<span class="w">    </span><span class="nd">@Override</span>
<span class="w">    </span><span class="kd">public</span><span class="w"> </span><span class="n">String</span><span class="o">[]</span><span class="w"> </span><span class="nf">getHeaders</span><span class="p">()</span><span class="w"> </span><span class="p">{</span>
<span class="w">        </span><span class="k">return</span><span class="w"> </span><span class="k">new</span><span class="w"> </span><span class="n">String</span><span class="o">[]</span><span class="w"> </span><span class="p">{</span>
<span class="w">            </span><span class="s">&quot;会計年度&quot;</span><span class="p">,</span>
<span class="w">            </span><span class="s">&quot;区分&quot;</span><span class="p">,</span>
<span class="w">            </span><span class="s">&quot;科目コード&quot;</span><span class="p">,</span>
<span class="w">            </span><span class="s">&quot;科目名&quot;</span><span class="p">,</span>
<span class="w">            </span><span class="s">&quot;金額&quot;</span><span class="p">,</span>
<span class="w">            </span><span class="s">&quot;売上高比&quot;</span>
<span class="w">        </span><span class="p">};</span>
<span class="w">    </span><span class="p">}</span>

<span class="w">    </span><span class="nd">@Override</span>
<span class="w">    </span><span class="kd">public</span><span class="w"> </span><span class="n">String</span><span class="o">[]</span><span class="w"> </span><span class="nf">toRow</span><span class="p">(</span><span class="n">ProfitLossLine</span><span class="w"> </span><span class="n">line</span><span class="p">)</span><span class="w"> </span><span class="p">{</span>
<span class="w">        </span><span class="k">return</span><span class="w"> </span><span class="k">new</span><span class="w"> </span><span class="n">String</span><span class="o">[]</span><span class="w"> </span><span class="p">{</span>
<span class="w">            </span><span class="n">String</span><span class="p">.</span><span class="na">valueOf</span><span class="p">(</span><span class="n">line</span><span class="p">.</span><span class="na">getFiscalYear</span><span class="p">()),</span>
<span class="w">            </span><span class="n">line</span><span class="p">.</span><span class="na">getSection</span><span class="p">().</span><span class="na">getDisplayName</span><span class="p">(),</span>
<span class="w">            </span><span class="n">line</span><span class="p">.</span><span class="na">getAccountCode</span><span class="p">(),</span>
<span class="w">            </span><span class="n">line</span><span class="p">.</span><span class="na">getAccountName</span><span class="p">(),</span>
<span class="w">            </span><span class="n">line</span><span class="p">.</span><span class="na">getAmount</span><span class="p">().</span><span class="na">toPlainString</span><span class="p">(),</span>
<span class="w">            </span><span class="n">line</span><span class="p">.</span><span class="na">getSalesRatio</span><span class="p">()</span><span class="w"> </span><span class="o">!=</span><span class="w"> </span><span class="kc">null</span><span class="w"> </span><span class="o">?</span>
<span class="w">                </span><span class="n">line</span><span class="p">.</span><span class="na">getSalesRatio</span><span class="p">().</span><span class="na">toPlainString</span><span class="p">()</span><span class="w"> </span><span class="o">+</span><span class="w"> </span><span class="s">&quot;%&quot;</span><span class="w"> </span><span class="p">:</span><span class="w"> </span><span class="s">&quot;&quot;</span>
<span class="w">        </span><span class="p">};</span>
<span class="w">    </span><span class="p">}</span>
<span class="p">}</span>
</code></pre></div>
<h3 id="csv_3">勘定科目CSVエクスポータ<a class="headerlink" href="#csv_3" title="Permanent link">&para;</a></h3>
<div class="highlight"><pre><span></span><code><span class="kn">package</span><span class="w"> </span><span class="nn">com.example.accounting.infrastructure.export</span><span class="p">;</span>

<span class="kn">import</span><span class="w"> </span><span class="nn">com.example.accounting.domain.model.account.Account</span><span class="p">;</span>
<span class="kn">import</span><span class="w"> </span><span class="nn">org.springframework.stereotype.Component</span><span class="p">;</span>

<span class="cm">/**</span>
<span class="cm"> * 勘定科目CSVエクスポータ</span>
<span class="cm"> */</span>
<span class="nd">@Component</span>
<span class="kd">public</span><span class="w"> </span><span class="kd">class</span> <span class="nc">AccountCsvExporter</span><span class="w"> </span><span class="kd">implements</span><span class="w"> </span><span class="n">CsvExporter</span><span class="o">&lt;</span><span class="n">Account</span><span class="o">&gt;</span><span class="w"> </span><span class="p">{</span>

<span class="w">    </span><span class="nd">@Override</span>
<span class="w">    </span><span class="kd">public</span><span class="w"> </span><span class="n">String</span><span class="o">[]</span><span class="w"> </span><span class="nf">getHeaders</span><span class="p">()</span><span class="w"> </span><span class="p">{</span>
<span class="w">        </span><span class="k">return</span><span class="w"> </span><span class="k">new</span><span class="w"> </span><span class="n">String</span><span class="o">[]</span><span class="w"> </span><span class="p">{</span>
<span class="w">            </span><span class="s">&quot;勘定科目コード&quot;</span><span class="p">,</span>
<span class="w">            </span><span class="s">&quot;勘定科目名&quot;</span><span class="p">,</span>
<span class="w">            </span><span class="s">&quot;勘定科目種別&quot;</span><span class="p">,</span>
<span class="w">            </span><span class="s">&quot;税区分&quot;</span><span class="p">,</span>
<span class="w">            </span><span class="s">&quot;補助科目使用&quot;</span><span class="p">,</span>
<span class="w">            </span><span class="s">&quot;有効フラグ&quot;</span>
<span class="w">        </span><span class="p">};</span>
<span class="w">    </span><span class="p">}</span>

<span class="w">    </span><span class="nd">@Override</span>
<span class="w">    </span><span class="kd">public</span><span class="w"> </span><span class="n">String</span><span class="o">[]</span><span class="w"> </span><span class="nf">toRow</span><span class="p">(</span><span class="n">Account</span><span class="w"> </span><span class="n">account</span><span class="p">)</span><span class="w"> </span><span class="p">{</span>
<span class="w">        </span><span class="k">return</span><span class="w"> </span><span class="k">new</span><span class="w"> </span><span class="n">String</span><span class="o">[]</span><span class="w"> </span><span class="p">{</span>
<span class="w">            </span><span class="n">account</span><span class="p">.</span><span class="na">getAccountCode</span><span class="p">().</span><span class="na">getValue</span><span class="p">(),</span>
<span class="w">            </span><span class="n">account</span><span class="p">.</span><span class="na">getAccountName</span><span class="p">(),</span>
<span class="w">            </span><span class="n">account</span><span class="p">.</span><span class="na">getAccountType</span><span class="p">().</span><span class="na">getDisplayName</span><span class="p">(),</span>
<span class="w">            </span><span class="n">account</span><span class="p">.</span><span class="na">getTaxType</span><span class="p">()</span><span class="w"> </span><span class="o">!=</span><span class="w"> </span><span class="kc">null</span><span class="w"> </span><span class="o">?</span>
<span class="w">                </span><span class="n">account</span><span class="p">.</span><span class="na">getTaxType</span><span class="p">().</span><span class="na">getDisplayName</span><span class="p">()</span><span class="w"> </span><span class="p">:</span><span class="w"> </span><span class="s">&quot;&quot;</span><span class="p">,</span>
<span class="w">            </span><span class="n">account</span><span class="p">.</span><span class="na">isUseSubAccount</span><span class="p">()</span><span class="w"> </span><span class="o">?</span><span class="w"> </span><span class="s">&quot;使用&quot;</span><span class="w"> </span><span class="p">:</span><span class="w"> </span><span class="s">&quot;未使用&quot;</span><span class="p">,</span>
<span class="w">            </span><span class="n">account</span><span class="p">.</span><span class="na">isActive</span><span class="p">()</span><span class="w"> </span><span class="o">?</span><span class="w"> </span><span class="s">&quot;有効&quot;</span><span class="w"> </span><span class="p">:</span><span class="w"> </span><span class="s">&quot;無効&quot;</span>
<span class="w">        </span><span class="p">};</span>
<span class="w">    </span><span class="p">}</span>
<span class="p">}</span>
</code></pre></div>
<hr />
<h2 id="264">26.4 ダウンロードサービスの実装<a class="headerlink" href="#264" title="Permanent link">&para;</a></h2>
<h3 id="_6">ダウンロードサービス<a class="headerlink" href="#_6" title="Permanent link">&para;</a></h3>
<div class="highlight"><pre><span></span><code><span class="kn">package</span><span class="w"> </span><span class="nn">com.example.accounting.application.download</span><span class="p">;</span>

<span class="kn">import</span><span class="w"> </span><span class="nn">com.example.accounting.domain.model.account.Account</span><span class="p">;</span>
<span class="kn">import</span><span class="w"> </span><span class="nn">com.example.accounting.domain.model.account.AccountRepository</span><span class="p">;</span>
<span class="kn">import</span><span class="w"> </span><span class="nn">com.example.accounting.domain.model.journal.JournalEntry</span><span class="p">;</span>
<span class="kn">import</span><span class="w"> </span><span class="nn">com.example.accounting.domain.model.journal.JournalRepository</span><span class="p">;</span>
<span class="kn">import</span><span class="w"> </span><span class="nn">com.example.accounting.domain.model.ledger.GeneralLedgerRepository</span><span class="p">;</span>
<span class="kn">import</span><span class="w"> </span><span class="nn">com.example.accounting.domain.model.statement.*</span><span class="p">;</span>
<span class="kn">import</span><span class="w"> </span><span class="nn">com.example.accounting.domain.model.user.Permission</span><span class="p">;</span>
<span class="kn">import</span><span class="w"> </span><span class="nn">com.example.accounting.infrastructure.export.*</span><span class="p">;</span>
<span class="kn">import</span><span class="w"> </span><span class="nn">lombok.RequiredArgsConstructor</span><span class="p">;</span>
<span class="kn">import</span><span class="w"> </span><span class="nn">org.springframework.security.access.AccessDeniedException</span><span class="p">;</span>
<span class="kn">import</span><span class="w"> </span><span class="nn">org.springframework.security.core.context.SecurityContextHolder</span><span class="p">;</span>
<span class="kn">import</span><span class="w"> </span><span class="nn">org.springframework.stereotype.Service</span><span class="p">;</span>
<span class="kn">import</span><span class="w"> </span><span class="nn">org.springframework.transaction.annotation.Transactional</span><span class="p">;</span>

<span class="kn">import</span><span class="w"> </span><span class="nn">java.io.Writer</span><span class="p">;</span>
<span class="kn">import</span><span class="w"> </span><span class="nn">java.util.List</span><span class="p">;</span>

<span class="cm">/**</span>
<span class="cm"> * ダウンロードサービス</span>
<span class="cm"> */</span>
<span class="nd">@Service</span>
<span class="nd">@RequiredArgsConstructor</span>
<span class="nd">@Transactional</span><span class="p">(</span><span class="n">readOnly</span><span class="w"> </span><span class="o">=</span><span class="w"> </span><span class="kc">true</span><span class="p">)</span>
<span class="kd">public</span><span class="w"> </span><span class="kd">class</span> <span class="nc">DownloadService</span><span class="w"> </span><span class="p">{</span>

<span class="w">    </span><span class="kd">private</span><span class="w"> </span><span class="kd">final</span><span class="w"> </span><span class="n">AccountRepository</span><span class="w"> </span><span class="n">accountRepository</span><span class="p">;</span>
<span class="w">    </span><span class="kd">private</span><span class="w"> </span><span class="kd">final</span><span class="w"> </span><span class="n">JournalRepository</span><span class="w"> </span><span class="n">journalRepository</span><span class="p">;</span>
<span class="w">    </span><span class="kd">private</span><span class="w"> </span><span class="kd">final</span><span class="w"> </span><span class="n">GeneralLedgerRepository</span><span class="w"> </span><span class="n">generalLedgerRepository</span><span class="p">;</span>
<span class="w">    </span><span class="kd">private</span><span class="w"> </span><span class="kd">final</span><span class="w"> </span><span class="n">BalanceSheetRepository</span><span class="w"> </span><span class="n">balanceSheetRepository</span><span class="p">;</span>
<span class="w">    </span><span class="kd">private</span><span class="w"> </span><span class="kd">final</span><span class="w"> </span><span class="n">ProfitLossRepository</span><span class="w"> </span><span class="n">profitLossRepository</span><span class="p">;</span>
<span class="w">    </span><span class="kd">private</span><span class="w"> </span><span class="kd">final</span><span class="w"> </span><span class="n">FinancialAnalysisRepository</span><span class="w"> </span><span class="n">analysisRepository</span><span class="p">;</span>

<span class="w">    </span><span class="kd">private</span><span class="w"> </span><span class="kd">final</span><span class="w"> </span><span class="n">AccountCsvExporter</span><span class="w"> </span><span class="n">accountExporter</span><span class="p">;</span>
<span class="w">    </span><span class="kd">private</span><span class="w"> </span><span class="kd">final</span><span class="w"> </span><span class="n">JournalEntryCsvExporter</span><span class="w"> </span><span class="n">journalExporter</span><span class="p">;</span>
<span class="w">    </span><span class="kd">private</span><span class="w"> </span><span class="kd">final</span><span class="w"> </span><span class="n">JournalLineCsvExporter</span><span class="w"> </span><span class="n">journalLineExporter</span><span class="p">;</span>
<span class="w">    </span><span class="kd">private</span><span class="w"> </span><span class="kd">final</span><span class="w"> </span><span class="n">BalanceSheetCsvExporter</span><span class="w"> </span><span class="n">balanceSheetExporter</span><span class="p">;</span>
<span class="w">    </span><span class="kd">private</span><span class="w"> </span><span class="kd">final</span><span class="w"> </span><span class="n">ProfitLossCsvExporter</span><span class="w"> </span><span class="n">profitLossExporter</span><span class="p">;</span>
<span class="w">    </span><span class="kd">private</span><span class="w"> </span><span class="kd">final</span><span class="w"> </span><span class="n">GeneralLedgerCsvExporter</span><span class="w"> </span><span class="n">ledgerExporter</span><span class="p">;</span>

<span class="w">    </span><span class="cm">/**</span>
<span class="cm">     * ダウンロード件数を取得</span>
<span class="cm">     */</span>
<span class="w">    </span><span class="kd">public</span><span class="w"> </span><span class="kt">int</span><span class="w"> </span><span class="nf">count</span><span class="p">(</span><span class="n">DownloadCriteria</span><span class="w"> </span><span class="n">criteria</span><span class="p">)</span><span class="w"> </span><span class="p">{</span>
<span class="w">        </span><span class="n">checkPermission</span><span class="p">(</span><span class="n">criteria</span><span class="p">.</span><span class="na">getTarget</span><span class="p">().</span><span class="na">getRequiredPermission</span><span class="p">());</span>

<span class="w">        </span><span class="k">return</span><span class="w"> </span><span class="k">switch</span><span class="w"> </span><span class="p">(</span><span class="n">criteria</span><span class="p">.</span><span class="na">getTarget</span><span class="p">())</span><span class="w"> </span><span class="p">{</span>
<span class="w">            </span><span class="k">case</span><span class="w"> </span><span class="n">勘定科目</span><span class="w"> </span><span class="o">-&gt;</span><span class="w"> </span><span class="n">accountRepository</span><span class="p">.</span><span class="na">count</span><span class="p">();</span>
<span class="w">            </span><span class="k">case</span><span class="w"> </span><span class="n">勘定科目構成</span><span class="w"> </span><span class="o">-&gt;</span><span class="w"> </span><span class="n">accountRepository</span><span class="p">.</span><span class="na">countStructure</span><span class="p">();</span>
<span class="w">            </span><span class="k">case</span><span class="w"> </span><span class="n">仕訳</span><span class="w"> </span><span class="o">-&gt;</span><span class="w"> </span><span class="n">journalRepository</span><span class="p">.</span><span class="na">countBy</span><span class="p">(</span>
<span class="w">                </span><span class="n">criteria</span><span class="p">.</span><span class="na">getStartDate</span><span class="p">(),</span>
<span class="w">                </span><span class="n">criteria</span><span class="p">.</span><span class="na">getEndDate</span><span class="p">(),</span>
<span class="w">                </span><span class="n">criteria</span><span class="p">.</span><span class="na">getJournalStatus</span><span class="p">()</span>
<span class="w">            </span><span class="p">);</span>
<span class="w">            </span><span class="k">case</span><span class="w"> </span><span class="n">仕訳明細</span><span class="w"> </span><span class="o">-&gt;</span><span class="w"> </span><span class="n">journalRepository</span><span class="p">.</span><span class="na">countLinesBy</span><span class="p">(</span>
<span class="w">                </span><span class="n">criteria</span><span class="p">.</span><span class="na">getStartDate</span><span class="p">(),</span>
<span class="w">                </span><span class="n">criteria</span><span class="p">.</span><span class="na">getEndDate</span><span class="p">()</span>
<span class="w">            </span><span class="p">);</span>
<span class="w">            </span><span class="k">case</span><span class="w"> </span><span class="n">総勘定元帳</span><span class="w"> </span><span class="o">-&gt;</span><span class="w"> </span><span class="n">generalLedgerRepository</span><span class="p">.</span><span class="na">countBy</span><span class="p">(</span>
<span class="w">                </span><span class="n">criteria</span><span class="p">.</span><span class="na">getFiscalYear</span><span class="p">(),</span>
<span class="w">                </span><span class="n">criteria</span><span class="p">.</span><span class="na">getAccountCodeFrom</span><span class="p">(),</span>
<span class="w">                </span><span class="n">criteria</span><span class="p">.</span><span class="na">getAccountCodeTo</span><span class="p">()</span>
<span class="w">            </span><span class="p">);</span>
<span class="w">            </span><span class="k">case</span><span class="w"> </span><span class="n">残高試算表</span><span class="w"> </span><span class="o">-&gt;</span><span class="w"> </span><span class="mi">1</span><span class="p">;</span><span class="w"> </span><span class="c1">// 1レポート</span>
<span class="w">            </span><span class="k">case</span><span class="w"> </span><span class="n">貸借対照表</span><span class="w"> </span><span class="o">-&gt;</span><span class="w"> </span><span class="n">balanceSheetRepository</span><span class="p">.</span><span class="na">countLines</span><span class="p">(</span>
<span class="w">                </span><span class="n">criteria</span><span class="p">.</span><span class="na">getFiscalYear</span><span class="p">()</span>
<span class="w">            </span><span class="p">);</span>
<span class="w">            </span><span class="k">case</span><span class="w"> </span><span class="n">損益計算書</span><span class="w"> </span><span class="o">-&gt;</span><span class="w"> </span><span class="n">profitLossRepository</span><span class="p">.</span><span class="na">countLines</span><span class="p">(</span>
<span class="w">                </span><span class="n">criteria</span><span class="p">.</span><span class="na">getFiscalYear</span><span class="p">()</span>
<span class="w">            </span><span class="p">);</span>
<span class="w">            </span><span class="k">case</span><span class="w"> </span><span class="n">財務分析</span><span class="w"> </span><span class="o">-&gt;</span><span class="w"> </span><span class="n">analysisRepository</span><span class="p">.</span><span class="na">countBy</span><span class="p">(</span>
<span class="w">                </span><span class="n">criteria</span><span class="p">.</span><span class="na">getFiscalYear</span><span class="p">()</span>
<span class="w">            </span><span class="p">);</span>
<span class="w">            </span><span class="k">default</span><span class="w"> </span><span class="o">-&gt;</span><span class="w"> </span><span class="mi">0</span><span class="p">;</span>
<span class="w">        </span><span class="p">};</span>
<span class="w">    </span><span class="p">}</span>

<span class="w">    </span><span class="cm">/**</span>
<span class="cm">     * ダウンロード実行</span>
<span class="cm">     */</span>
<span class="w">    </span><span class="kd">public</span><span class="w"> </span><span class="kt">void</span><span class="w"> </span><span class="nf">download</span><span class="p">(</span><span class="n">Writer</span><span class="w"> </span><span class="n">writer</span><span class="p">,</span><span class="w"> </span><span class="n">DownloadCriteria</span><span class="w"> </span><span class="n">criteria</span><span class="p">)</span>
<span class="w">            </span><span class="kd">throws</span><span class="w"> </span><span class="n">Exception</span><span class="w"> </span><span class="p">{</span>
<span class="w">        </span><span class="n">checkPermission</span><span class="p">(</span><span class="n">criteria</span><span class="p">.</span><span class="na">getTarget</span><span class="p">().</span><span class="na">getRequiredPermission</span><span class="p">());</span>

<span class="w">        </span><span class="k">switch</span><span class="w"> </span><span class="p">(</span><span class="n">criteria</span><span class="p">.</span><span class="na">getTarget</span><span class="p">())</span><span class="w"> </span><span class="p">{</span>
<span class="w">            </span><span class="k">case</span><span class="w"> </span><span class="n">勘定科目</span><span class="w"> </span><span class="o">-&gt;</span><span class="w"> </span><span class="n">downloadAccounts</span><span class="p">(</span><span class="n">writer</span><span class="p">);</span>
<span class="w">            </span><span class="k">case</span><span class="w"> </span><span class="n">仕訳</span><span class="w"> </span><span class="o">-&gt;</span><span class="w"> </span><span class="n">downloadJournalEntries</span><span class="p">(</span><span class="n">writer</span><span class="p">,</span><span class="w"> </span><span class="n">criteria</span><span class="p">);</span>
<span class="w">            </span><span class="k">case</span><span class="w"> </span><span class="n">仕訳明細</span><span class="w"> </span><span class="o">-&gt;</span><span class="w"> </span><span class="n">downloadJournalLines</span><span class="p">(</span><span class="n">writer</span><span class="p">,</span><span class="w"> </span><span class="n">criteria</span><span class="p">);</span>
<span class="w">            </span><span class="k">case</span><span class="w"> </span><span class="n">総勘定元帳</span><span class="w"> </span><span class="o">-&gt;</span><span class="w"> </span><span class="n">downloadGeneralLedger</span><span class="p">(</span><span class="n">writer</span><span class="p">,</span><span class="w"> </span><span class="n">criteria</span><span class="p">);</span>
<span class="w">            </span><span class="k">case</span><span class="w"> </span><span class="n">貸借対照表</span><span class="w"> </span><span class="o">-&gt;</span><span class="w"> </span><span class="n">downloadBalanceSheet</span><span class="p">(</span><span class="n">writer</span><span class="p">,</span><span class="w"> </span><span class="n">criteria</span><span class="p">);</span>
<span class="w">            </span><span class="k">case</span><span class="w"> </span><span class="n">損益計算書</span><span class="w"> </span><span class="o">-&gt;</span><span class="w"> </span><span class="n">downloadProfitLoss</span><span class="p">(</span><span class="n">writer</span><span class="p">,</span><span class="w"> </span><span class="n">criteria</span><span class="p">);</span>
<span class="w">            </span><span class="k">case</span><span class="w"> </span><span class="n">財務分析</span><span class="w"> </span><span class="o">-&gt;</span><span class="w"> </span><span class="n">downloadFinancialAnalysis</span><span class="p">(</span><span class="n">writer</span><span class="p">,</span><span class="w"> </span><span class="n">criteria</span><span class="p">);</span>
<span class="w">            </span><span class="k">default</span><span class="w"> </span><span class="o">-&gt;</span><span class="w"> </span><span class="k">throw</span><span class="w"> </span><span class="k">new</span><span class="w"> </span><span class="n">IllegalArgumentException</span><span class="p">(</span>
<span class="w">                </span><span class="s">&quot;未対応のダウンロード対象です: &quot;</span><span class="w"> </span><span class="o">+</span><span class="w"> </span><span class="n">criteria</span><span class="p">.</span><span class="na">getTarget</span><span class="p">()</span>
<span class="w">            </span><span class="p">);</span>
<span class="w">        </span><span class="p">}</span>
<span class="w">    </span><span class="p">}</span>

<span class="w">    </span><span class="kd">private</span><span class="w"> </span><span class="kt">void</span><span class="w"> </span><span class="nf">downloadAccounts</span><span class="p">(</span><span class="n">Writer</span><span class="w"> </span><span class="n">writer</span><span class="p">)</span><span class="w"> </span><span class="kd">throws</span><span class="w"> </span><span class="n">Exception</span><span class="w"> </span><span class="p">{</span>
<span class="w">        </span><span class="n">List</span><span class="o">&lt;</span><span class="n">Account</span><span class="o">&gt;</span><span class="w"> </span><span class="n">accounts</span><span class="w"> </span><span class="o">=</span><span class="w"> </span><span class="n">accountRepository</span><span class="p">.</span><span class="na">findAll</span><span class="p">();</span>
<span class="w">        </span><span class="n">accountExporter</span><span class="p">.</span><span class="na">export</span><span class="p">(</span><span class="n">writer</span><span class="p">,</span><span class="w"> </span><span class="n">accounts</span><span class="p">);</span>
<span class="w">    </span><span class="p">}</span>

<span class="w">    </span><span class="kd">private</span><span class="w"> </span><span class="kt">void</span><span class="w"> </span><span class="nf">downloadJournalEntries</span><span class="p">(</span><span class="n">Writer</span><span class="w"> </span><span class="n">writer</span><span class="p">,</span><span class="w"> </span><span class="n">DownloadCriteria</span><span class="w"> </span><span class="n">criteria</span><span class="p">)</span>
<span class="w">            </span><span class="kd">throws</span><span class="w"> </span><span class="n">Exception</span><span class="w"> </span><span class="p">{</span>
<span class="w">        </span><span class="n">List</span><span class="o">&lt;</span><span class="n">JournalEntry</span><span class="o">&gt;</span><span class="w"> </span><span class="n">entries</span><span class="w"> </span><span class="o">=</span><span class="w"> </span><span class="n">journalRepository</span><span class="p">.</span><span class="na">findBy</span><span class="p">(</span>
<span class="w">            </span><span class="n">criteria</span><span class="p">.</span><span class="na">getStartDate</span><span class="p">(),</span>
<span class="w">            </span><span class="n">criteria</span><span class="p">.</span><span class="na">getEndDate</span><span class="p">(),</span>
<span class="w">            </span><span class="n">criteria</span><span class="p">.</span><span class="na">getJournalStatus</span><span class="p">()</span>
<span class="w">        </span><span class="p">);</span>
<span class="w">        </span><span class="n">journalExporter</span><span class="p">.</span><span class="na">export</span><span class="p">(</span><span class="n">writer</span><span class="p">,</span><span class="w"> </span><span class="n">entries</span><span class="p">);</span>
<span class="w">    </span><span class="p">}</span>

<span class="w">    </span><span class="kd">private</span><span class="w"> </span><span class="kt">void</span><span class="w"> </span><span class="nf">downloadJournalLines</span><span class="p">(</span><span class="n">Writer</span><span class="w"> </span><span class="n">writer</span><span class="p">,</span><span class="w"> </span><span class="n">DownloadCriteria</span><span class="w"> </span><span class="n">criteria</span><span class="p">)</span>
<span class="w">            </span><span class="kd">throws</span><span class="w"> </span><span class="n">Exception</span><span class="w"> </span><span class="p">{</span>
<span class="w">        </span><span class="n">List</span><span class="o">&lt;</span><span class="n">JournalLineWithEntry</span><span class="o">&gt;</span><span class="w"> </span><span class="n">lines</span><span class="w"> </span><span class="o">=</span><span class="w"> </span><span class="n">journalRepository</span><span class="p">.</span><span class="na">findLinesBy</span><span class="p">(</span>
<span class="w">            </span><span class="n">criteria</span><span class="p">.</span><span class="na">getStartDate</span><span class="p">(),</span>
<span class="w">            </span><span class="n">criteria</span><span class="p">.</span><span class="na">getEndDate</span><span class="p">()</span>
<span class="w">        </span><span class="p">);</span>
<span class="w">        </span><span class="n">journalLineExporter</span><span class="p">.</span><span class="na">export</span><span class="p">(</span><span class="n">writer</span><span class="p">,</span><span class="w"> </span><span class="n">lines</span><span class="p">);</span>
<span class="w">    </span><span class="p">}</span>

<span class="w">    </span><span class="kd">private</span><span class="w"> </span><span class="kt">void</span><span class="w"> </span><span class="nf">downloadGeneralLedger</span><span class="p">(</span><span class="n">Writer</span><span class="w"> </span><span class="n">writer</span><span class="p">,</span><span class="w"> </span><span class="n">DownloadCriteria</span><span class="w"> </span><span class="n">criteria</span><span class="p">)</span>
<span class="w">            </span><span class="kd">throws</span><span class="w"> </span><span class="n">Exception</span><span class="w"> </span><span class="p">{</span>
<span class="w">        </span><span class="n">List</span><span class="o">&lt;</span><span class="n">GeneralLedgerEntry</span><span class="o">&gt;</span><span class="w"> </span><span class="n">entries</span><span class="w"> </span><span class="o">=</span><span class="w"> </span><span class="n">generalLedgerRepository</span><span class="p">.</span><span class="na">findBy</span><span class="p">(</span>
<span class="w">            </span><span class="n">criteria</span><span class="p">.</span><span class="na">getFiscalYear</span><span class="p">(),</span>
<span class="w">            </span><span class="n">criteria</span><span class="p">.</span><span class="na">getAccountCodeFrom</span><span class="p">(),</span>
<span class="w">            </span><span class="n">criteria</span><span class="p">.</span><span class="na">getAccountCodeTo</span><span class="p">()</span>
<span class="w">        </span><span class="p">);</span>
<span class="w">        </span><span class="n">ledgerExporter</span><span class="p">.</span><span class="na">export</span><span class="p">(</span><span class="n">writer</span><span class="p">,</span><span class="w"> </span><span class="n">entries</span><span class="p">);</span>
<span class="w">    </span><span class="p">}</span>

<span class="w">    </span><span class="kd">private</span><span class="w"> </span><span class="kt">void</span><span class="w"> </span><span class="nf">downloadBalanceSheet</span><span class="p">(</span><span class="n">Writer</span><span class="w"> </span><span class="n">writer</span><span class="p">,</span><span class="w"> </span><span class="n">DownloadCriteria</span><span class="w"> </span><span class="n">criteria</span><span class="p">)</span>
<span class="w">            </span><span class="kd">throws</span><span class="w"> </span><span class="n">Exception</span><span class="w"> </span><span class="p">{</span>
<span class="w">        </span><span class="n">List</span><span class="o">&lt;</span><span class="n">BalanceSheetLine</span><span class="o">&gt;</span><span class="w"> </span><span class="n">lines</span><span class="w"> </span><span class="o">=</span><span class="w"> </span><span class="n">balanceSheetRepository</span><span class="p">.</span><span class="na">findLines</span><span class="p">(</span>
<span class="w">            </span><span class="n">criteria</span><span class="p">.</span><span class="na">getFiscalYear</span><span class="p">()</span>
<span class="w">        </span><span class="p">);</span>
<span class="w">        </span><span class="n">balanceSheetExporter</span><span class="p">.</span><span class="na">export</span><span class="p">(</span><span class="n">writer</span><span class="p">,</span><span class="w"> </span><span class="n">lines</span><span class="p">);</span>
<span class="w">    </span><span class="p">}</span>

<span class="w">    </span><span class="kd">private</span><span class="w"> </span><span class="kt">void</span><span class="w"> </span><span class="nf">downloadProfitLoss</span><span class="p">(</span><span class="n">Writer</span><span class="w"> </span><span class="n">writer</span><span class="p">,</span><span class="w"> </span><span class="n">DownloadCriteria</span><span class="w"> </span><span class="n">criteria</span><span class="p">)</span>
<span class="w">            </span><span class="kd">throws</span><span class="w"> </span><span class="n">Exception</span><span class="w"> </span><span class="p">{</span>
<span class="w">        </span><span class="n">List</span><span class="o">&lt;</span><span class="n">ProfitLossLine</span><span class="o">&gt;</span><span class="w"> </span><span class="n">lines</span><span class="w"> </span><span class="o">=</span><span class="w"> </span><span class="n">profitLossRepository</span><span class="p">.</span><span class="na">findLines</span><span class="p">(</span>
<span class="w">            </span><span class="n">criteria</span><span class="p">.</span><span class="na">getFiscalYear</span><span class="p">()</span>
<span class="w">        </span><span class="p">);</span>
<span class="w">        </span><span class="n">profitLossExporter</span><span class="p">.</span><span class="na">export</span><span class="p">(</span><span class="n">writer</span><span class="p">,</span><span class="w"> </span><span class="n">lines</span><span class="p">);</span>
<span class="w">    </span><span class="p">}</span>

<span class="w">    </span><span class="kd">private</span><span class="w"> </span><span class="kt">void</span><span class="w"> </span><span class="nf">downloadFinancialAnalysis</span><span class="p">(</span><span class="n">Writer</span><span class="w"> </span><span class="n">writer</span><span class="p">,</span><span class="w"> </span><span class="n">DownloadCriteria</span><span class="w"> </span><span class="n">criteria</span><span class="p">)</span>
<span class="w">            </span><span class="kd">throws</span><span class="w"> </span><span class="n">Exception</span><span class="w"> </span><span class="p">{</span>
<span class="w">        </span><span class="c1">// 財務分析結果のダウンロード</span>
<span class="w">        </span><span class="c1">// 実装省略</span>
<span class="w">    </span><span class="p">}</span>

<span class="w">    </span><span class="cm">/**</span>
<span class="cm">     * 権限チェック</span>
<span class="cm">     */</span>
<span class="w">    </span><span class="kd">private</span><span class="w"> </span><span class="kt">void</span><span class="w"> </span><span class="nf">checkPermission</span><span class="p">(</span><span class="n">Permission</span><span class="w"> </span><span class="n">required</span><span class="p">)</span><span class="w"> </span><span class="p">{</span>
<span class="w">        </span><span class="kd">var</span><span class="w"> </span><span class="n">authentication</span><span class="w"> </span><span class="o">=</span><span class="w"> </span><span class="n">SecurityContextHolder</span><span class="p">.</span><span class="na">getContext</span><span class="p">()</span>
<span class="w">            </span><span class="p">.</span><span class="na">getAuthentication</span><span class="p">();</span>

<span class="w">        </span><span class="k">if</span><span class="w"> </span><span class="p">(</span><span class="n">authentication</span><span class="w"> </span><span class="o">==</span><span class="w"> </span><span class="kc">null</span><span class="p">)</span><span class="w"> </span><span class="p">{</span>
<span class="w">            </span><span class="k">throw</span><span class="w"> </span><span class="k">new</span><span class="w"> </span><span class="n">AccessDeniedException</span><span class="p">(</span><span class="s">&quot;認証が必要です&quot;</span><span class="p">);</span>
<span class="w">        </span><span class="p">}</span>

<span class="w">        </span><span class="kt">boolean</span><span class="w"> </span><span class="n">hasPermission</span><span class="w"> </span><span class="o">=</span><span class="w"> </span><span class="n">authentication</span><span class="p">.</span><span class="na">getAuthorities</span><span class="p">().</span><span class="na">stream</span><span class="p">()</span>
<span class="w">            </span><span class="p">.</span><span class="na">anyMatch</span><span class="p">(</span><span class="n">a</span><span class="w"> </span><span class="o">-&gt;</span><span class="w"> </span><span class="n">a</span><span class="p">.</span><span class="na">getAuthority</span><span class="p">().</span><span class="na">equals</span><span class="p">(</span><span class="n">required</span><span class="p">.</span><span class="na">name</span><span class="p">()));</span>

<span class="w">        </span><span class="k">if</span><span class="w"> </span><span class="p">(</span><span class="o">!</span><span class="n">hasPermission</span><span class="p">)</span><span class="w"> </span><span class="p">{</span>
<span class="w">            </span><span class="k">throw</span><span class="w"> </span><span class="k">new</span><span class="w"> </span><span class="n">AccessDeniedException</span><span class="p">(</span>
<span class="w">                </span><span class="s">&quot;ダウンロード権限がありません: &quot;</span><span class="w"> </span><span class="o">+</span><span class="w"> </span><span class="n">required</span><span class="p">.</span><span class="na">getDisplayName</span><span class="p">()</span>
<span class="w">            </span><span class="p">);</span>
<span class="w">        </span><span class="p">}</span>
<span class="w">    </span><span class="p">}</span>
<span class="p">}</span>
</code></pre></div>
<hr />
<h2 id="265-api">26.5 ダウンロードAPIの実装<a class="headerlink" href="#265-api" title="Permanent link">&para;</a></h2>
<h3 id="_7">ダウンロードコントローラ<a class="headerlink" href="#_7" title="Permanent link">&para;</a></h3>
<div class="highlight"><pre><span></span><code><span class="kn">package</span><span class="w"> </span><span class="nn">com.example.accounting.presentation.api</span><span class="p">;</span>

<span class="kn">import</span><span class="w"> </span><span class="nn">com.example.accounting.application.download.*</span><span class="p">;</span>
<span class="kn">import</span><span class="w"> </span><span class="nn">io.swagger.v3.oas.annotations.Operation</span><span class="p">;</span>
<span class="kn">import</span><span class="w"> </span><span class="nn">io.swagger.v3.oas.annotations.tags.Tag</span><span class="p">;</span>
<span class="kn">import</span><span class="w"> </span><span class="nn">jakarta.servlet.http.HttpServletResponse</span><span class="p">;</span>
<span class="kn">import</span><span class="w"> </span><span class="nn">lombok.RequiredArgsConstructor</span><span class="p">;</span>
<span class="kn">import</span><span class="w"> </span><span class="nn">lombok.extern.slf4j.Slf4j</span><span class="p">;</span>
<span class="kn">import</span><span class="w"> </span><span class="nn">org.springframework.http.HttpHeaders</span><span class="p">;</span>
<span class="kn">import</span><span class="w"> </span><span class="nn">org.springframework.http.ResponseEntity</span><span class="p">;</span>
<span class="kn">import</span><span class="w"> </span><span class="nn">org.springframework.web.bind.annotation.*</span><span class="p">;</span>

<span class="kn">import</span><span class="w"> </span><span class="nn">java.io.OutputStreamWriter</span><span class="p">;</span>
<span class="kn">import</span><span class="w"> </span><span class="nn">java.nio.charset.Charset</span><span class="p">;</span>

<span class="cm">/**</span>
<span class="cm"> * ダウンロードAPIコントローラ</span>
<span class="cm"> */</span>
<span class="nd">@Slf4j</span>
<span class="nd">@RestController</span>
<span class="nd">@RequestMapping</span><span class="p">(</span><span class="s">&quot;/api/downloads&quot;</span><span class="p">)</span>
<span class="nd">@Tag</span><span class="p">(</span><span class="n">name</span><span class="w"> </span><span class="o">=</span><span class="w"> </span><span class="s">&quot;Download&quot;</span><span class="p">,</span><span class="w"> </span><span class="n">description</span><span class="w"> </span><span class="o">=</span><span class="w"> </span><span class="s">&quot;データダウンロード&quot;</span><span class="p">)</span>
<span class="nd">@RequiredArgsConstructor</span>
<span class="kd">public</span><span class="w"> </span><span class="kd">class</span> <span class="nc">DownloadApiController</span><span class="w"> </span><span class="p">{</span>

<span class="w">    </span><span class="kd">private</span><span class="w"> </span><span class="kd">final</span><span class="w"> </span><span class="n">DownloadService</span><span class="w"> </span><span class="n">downloadService</span><span class="p">;</span>

<span class="w">    </span><span class="nd">@Operation</span><span class="p">(</span><span class="n">summary</span><span class="w"> </span><span class="o">=</span><span class="w"> </span><span class="s">&quot;ダウンロード件数取得&quot;</span><span class="p">,</span>
<span class="w">               </span><span class="n">description</span><span class="w"> </span><span class="o">=</span><span class="w"> </span><span class="s">&quot;指定条件でのダウンロード件数を取得する&quot;</span><span class="p">)</span>
<span class="w">    </span><span class="nd">@PostMapping</span><span class="p">(</span><span class="s">&quot;/count&quot;</span><span class="p">)</span>
<span class="w">    </span><span class="kd">public</span><span class="w"> </span><span class="n">ResponseEntity</span><span class="o">&lt;</span><span class="n">DownloadCountResponse</span><span class="o">&gt;</span><span class="w"> </span><span class="nf">count</span><span class="p">(</span>
<span class="w">            </span><span class="nd">@RequestBody</span><span class="w"> </span><span class="n">DownloadRequest</span><span class="w"> </span><span class="n">request</span><span class="p">)</span><span class="w"> </span><span class="p">{</span>
<span class="w">        </span><span class="k">try</span><span class="w"> </span><span class="p">{</span>
<span class="w">            </span><span class="n">DownloadCriteria</span><span class="w"> </span><span class="n">criteria</span><span class="w"> </span><span class="o">=</span><span class="w"> </span><span class="n">toCriteria</span><span class="p">(</span><span class="n">request</span><span class="p">);</span>
<span class="w">            </span><span class="kt">int</span><span class="w"> </span><span class="n">count</span><span class="w"> </span><span class="o">=</span><span class="w"> </span><span class="n">downloadService</span><span class="p">.</span><span class="na">count</span><span class="p">(</span><span class="n">criteria</span><span class="p">);</span>
<span class="w">            </span><span class="k">return</span><span class="w"> </span><span class="n">ResponseEntity</span><span class="p">.</span><span class="na">ok</span><span class="p">(</span><span class="k">new</span><span class="w"> </span><span class="n">DownloadCountResponse</span><span class="p">(</span><span class="n">count</span><span class="p">));</span>
<span class="w">        </span><span class="p">}</span><span class="w"> </span><span class="k">catch</span><span class="w"> </span><span class="p">(</span><span class="n">Exception</span><span class="w"> </span><span class="n">e</span><span class="p">)</span><span class="w"> </span><span class="p">{</span>
<span class="w">            </span><span class="n">log</span><span class="p">.</span><span class="na">error</span><span class="p">(</span><span class="s">&quot;ダウンロード件数取得エラー&quot;</span><span class="p">,</span><span class="w"> </span><span class="n">e</span><span class="p">);</span>
<span class="w">            </span><span class="k">return</span><span class="w"> </span><span class="n">ResponseEntity</span><span class="p">.</span><span class="na">badRequest</span><span class="p">().</span><span class="na">build</span><span class="p">();</span>
<span class="w">        </span><span class="p">}</span>
<span class="w">    </span><span class="p">}</span>

<span class="w">    </span><span class="nd">@Operation</span><span class="p">(</span><span class="n">summary</span><span class="w"> </span><span class="o">=</span><span class="w"> </span><span class="s">&quot;データダウンロード&quot;</span><span class="p">,</span>
<span class="w">               </span><span class="n">description</span><span class="w"> </span><span class="o">=</span><span class="w"> </span><span class="s">&quot;指定条件でデータをCSVダウンロードする&quot;</span><span class="p">)</span>
<span class="w">    </span><span class="nd">@PostMapping</span><span class="p">(</span><span class="s">&quot;/download&quot;</span><span class="p">)</span>
<span class="w">    </span><span class="nd">@AuditAnnotation</span><span class="p">(</span>
<span class="w">        </span><span class="n">process</span><span class="w"> </span><span class="o">=</span><span class="w"> </span><span class="n">ApplicationExecutionProcessType</span><span class="p">.</span><span class="na">データダウンロード</span><span class="p">,</span>
<span class="w">        </span><span class="n">type</span><span class="w"> </span><span class="o">=</span><span class="w"> </span><span class="n">ApplicationExecutionHistoryType</span><span class="p">.</span><span class="na">同期</span>
<span class="w">    </span><span class="p">)</span>
<span class="w">    </span><span class="kd">public</span><span class="w"> </span><span class="kt">void</span><span class="w"> </span><span class="nf">download</span><span class="p">(</span>
<span class="w">            </span><span class="nd">@RequestBody</span><span class="w"> </span><span class="n">DownloadRequest</span><span class="w"> </span><span class="n">request</span><span class="p">,</span>
<span class="w">            </span><span class="n">HttpServletResponse</span><span class="w"> </span><span class="n">response</span><span class="p">)</span><span class="w"> </span><span class="p">{</span>

<span class="w">        </span><span class="n">DownloadCriteria</span><span class="w"> </span><span class="n">criteria</span><span class="w"> </span><span class="o">=</span><span class="w"> </span><span class="n">toCriteria</span><span class="p">(</span><span class="n">request</span><span class="p">);</span>

<span class="w">        </span><span class="c1">// レスポンスヘッダー設定</span>
<span class="w">        </span><span class="n">response</span><span class="p">.</span><span class="na">setContentType</span><span class="p">(</span><span class="s">&quot;text/csv; charset=UTF-8&quot;</span><span class="p">);</span>
<span class="w">        </span><span class="n">response</span><span class="p">.</span><span class="na">setHeader</span><span class="p">(</span>
<span class="w">            </span><span class="n">HttpHeaders</span><span class="p">.</span><span class="na">CONTENT_DISPOSITION</span><span class="p">,</span>
<span class="w">            </span><span class="s">&quot;attachment; filename=\&quot;&quot;</span><span class="w"> </span><span class="o">+</span><span class="w"> </span><span class="n">criteria</span><span class="p">.</span><span class="na">getFileName</span><span class="p">()</span><span class="w"> </span><span class="o">+</span><span class="w"> </span><span class="s">&quot;\&quot;&quot;</span>
<span class="w">        </span><span class="p">);</span>

<span class="w">        </span><span class="k">try</span><span class="w"> </span><span class="p">(</span><span class="n">OutputStreamWriter</span><span class="w"> </span><span class="n">writer</span><span class="w"> </span><span class="o">=</span><span class="w"> </span><span class="k">new</span><span class="w"> </span><span class="n">OutputStreamWriter</span><span class="p">(</span>
<span class="w">                </span><span class="n">response</span><span class="p">.</span><span class="na">getOutputStream</span><span class="p">(),</span>
<span class="w">                </span><span class="n">Charset</span><span class="p">.</span><span class="na">forName</span><span class="p">(</span><span class="s">&quot;UTF-8&quot;</span><span class="p">)))</span><span class="w"> </span><span class="p">{</span>

<span class="w">            </span><span class="n">downloadService</span><span class="p">.</span><span class="na">download</span><span class="p">(</span><span class="n">writer</span><span class="p">,</span><span class="w"> </span><span class="n">criteria</span><span class="p">);</span>

<span class="w">        </span><span class="p">}</span><span class="w"> </span><span class="k">catch</span><span class="w"> </span><span class="p">(</span><span class="n">Exception</span><span class="w"> </span><span class="n">e</span><span class="p">)</span><span class="w"> </span><span class="p">{</span>
<span class="w">            </span><span class="n">log</span><span class="p">.</span><span class="na">error</span><span class="p">(</span><span class="s">&quot;ダウンロードエラー: {}&quot;</span><span class="p">,</span><span class="w"> </span><span class="n">criteria</span><span class="p">.</span><span class="na">getTarget</span><span class="p">(),</span><span class="w"> </span><span class="n">e</span><span class="p">);</span>
<span class="w">            </span><span class="n">response</span><span class="p">.</span><span class="na">setStatus</span><span class="p">(</span><span class="n">HttpServletResponse</span><span class="p">.</span><span class="na">SC_INTERNAL_SERVER_ERROR</span><span class="p">);</span>
<span class="w">        </span><span class="p">}</span>
<span class="w">    </span><span class="p">}</span>

<span class="w">    </span><span class="nd">@Operation</span><span class="p">(</span><span class="n">summary</span><span class="w"> </span><span class="o">=</span><span class="w"> </span><span class="s">&quot;ダウンロード対象一覧&quot;</span><span class="p">,</span>
<span class="w">               </span><span class="n">description</span><span class="w"> </span><span class="o">=</span><span class="w"> </span><span class="s">&quot;ダウンロード可能な対象一覧を取得する&quot;</span><span class="p">)</span>
<span class="w">    </span><span class="nd">@GetMapping</span><span class="p">(</span><span class="s">&quot;/targets&quot;</span><span class="p">)</span>
<span class="w">    </span><span class="kd">public</span><span class="w"> </span><span class="n">ResponseEntity</span><span class="o">&lt;</span><span class="n">DownloadTargetListResponse</span><span class="o">&gt;</span><span class="w"> </span><span class="nf">getTargets</span><span class="p">()</span><span class="w"> </span><span class="p">{</span>
<span class="w">        </span><span class="kd">var</span><span class="w"> </span><span class="n">targets</span><span class="w"> </span><span class="o">=</span><span class="w"> </span><span class="n">java</span><span class="p">.</span><span class="na">util</span><span class="p">.</span><span class="na">Arrays</span><span class="p">.</span><span class="na">stream</span><span class="p">(</span><span class="n">DownloadTarget</span><span class="p">.</span><span class="na">values</span><span class="p">())</span>
<span class="w">            </span><span class="p">.</span><span class="na">map</span><span class="p">(</span><span class="n">t</span><span class="w"> </span><span class="o">-&gt;</span><span class="w"> </span><span class="k">new</span><span class="w"> </span><span class="n">DownloadTargetInfo</span><span class="p">(</span>
<span class="w">                </span><span class="n">t</span><span class="p">.</span><span class="na">name</span><span class="p">(),</span>
<span class="w">                </span><span class="n">t</span><span class="p">.</span><span class="na">getFileName</span><span class="p">(),</span>
<span class="w">                </span><span class="n">t</span><span class="p">.</span><span class="na">getRequiredPermission</span><span class="p">().</span><span class="na">getDisplayName</span><span class="p">()</span>
<span class="w">            </span><span class="p">))</span>
<span class="w">            </span><span class="p">.</span><span class="na">toList</span><span class="p">();</span>
<span class="w">        </span><span class="k">return</span><span class="w"> </span><span class="n">ResponseEntity</span><span class="p">.</span><span class="na">ok</span><span class="p">(</span><span class="k">new</span><span class="w"> </span><span class="n">DownloadTargetListResponse</span><span class="p">(</span><span class="n">targets</span><span class="p">));</span>
<span class="w">    </span><span class="p">}</span>

<span class="w">    </span><span class="kd">private</span><span class="w"> </span><span class="n">DownloadCriteria</span><span class="w"> </span><span class="nf">toCriteria</span><span class="p">(</span><span class="n">DownloadRequest</span><span class="w"> </span><span class="n">request</span><span class="p">)</span><span class="w"> </span><span class="p">{</span>
<span class="w">        </span><span class="k">return</span><span class="w"> </span><span class="n">DownloadCriteria</span><span class="p">.</span><span class="na">builder</span><span class="p">()</span>
<span class="w">            </span><span class="p">.</span><span class="na">target</span><span class="p">(</span><span class="n">DownloadTarget</span><span class="p">.</span><span class="na">valueOf</span><span class="p">(</span><span class="n">request</span><span class="p">.</span><span class="na">getTarget</span><span class="p">()))</span>
<span class="w">            </span><span class="p">.</span><span class="na">startDate</span><span class="p">(</span><span class="n">request</span><span class="p">.</span><span class="na">getStartDate</span><span class="p">())</span>
<span class="w">            </span><span class="p">.</span><span class="na">endDate</span><span class="p">(</span><span class="n">request</span><span class="p">.</span><span class="na">getEndDate</span><span class="p">())</span>
<span class="w">            </span><span class="p">.</span><span class="na">fiscalYear</span><span class="p">(</span><span class="n">request</span><span class="p">.</span><span class="na">getFiscalYear</span><span class="p">())</span>
<span class="w">            </span><span class="p">.</span><span class="na">accountCodeFrom</span><span class="p">(</span><span class="n">request</span><span class="p">.</span><span class="na">getAccountCodeFrom</span><span class="p">())</span>
<span class="w">            </span><span class="p">.</span><span class="na">accountCodeTo</span><span class="p">(</span><span class="n">request</span><span class="p">.</span><span class="na">getAccountCodeTo</span><span class="p">())</span>
<span class="w">            </span><span class="p">.</span><span class="na">journalStatus</span><span class="p">(</span><span class="n">request</span><span class="p">.</span><span class="na">getJournalStatus</span><span class="p">())</span>
<span class="w">            </span><span class="p">.</span><span class="na">build</span><span class="p">();</span>
<span class="w">    </span><span class="p">}</span>
<span class="p">}</span>
</code></pre></div>
<h3 id="dto">リクエスト/レスポンスDTO<a class="headerlink" href="#dto" title="Permanent link">&para;</a></h3>
<div class="highlight"><pre><span></span><code><span class="kn">package</span><span class="w"> </span><span class="nn">com.example.accounting.application.download</span><span class="p">;</span>

<span class="kn">import</span><span class="w"> </span><span class="nn">lombok.Data</span><span class="p">;</span>
<span class="kn">import</span><span class="w"> </span><span class="nn">java.time.LocalDate</span><span class="p">;</span>

<span class="cm">/**</span>
<span class="cm"> * ダウンロードリクエスト</span>
<span class="cm"> */</span>
<span class="nd">@Data</span>
<span class="kd">public</span><span class="w"> </span><span class="kd">class</span> <span class="nc">DownloadRequest</span><span class="w"> </span><span class="p">{</span>
<span class="w">    </span><span class="kd">private</span><span class="w"> </span><span class="n">String</span><span class="w"> </span><span class="n">target</span><span class="p">;</span>
<span class="w">    </span><span class="kd">private</span><span class="w"> </span><span class="n">LocalDate</span><span class="w"> </span><span class="n">startDate</span><span class="p">;</span>
<span class="w">    </span><span class="kd">private</span><span class="w"> </span><span class="n">LocalDate</span><span class="w"> </span><span class="n">endDate</span><span class="p">;</span>
<span class="w">    </span><span class="kd">private</span><span class="w"> </span><span class="n">Integer</span><span class="w"> </span><span class="n">fiscalYear</span><span class="p">;</span>
<span class="w">    </span><span class="kd">private</span><span class="w"> </span><span class="n">String</span><span class="w"> </span><span class="n">accountCodeFrom</span><span class="p">;</span>
<span class="w">    </span><span class="kd">private</span><span class="w"> </span><span class="n">String</span><span class="w"> </span><span class="n">accountCodeTo</span><span class="p">;</span>
<span class="w">    </span><span class="kd">private</span><span class="w"> </span><span class="n">String</span><span class="w"> </span><span class="n">journalStatus</span><span class="p">;</span>
<span class="p">}</span>

<span class="cm">/**</span>
<span class="cm"> * ダウンロード件数レスポンス</span>
<span class="cm"> */</span>
<span class="kd">public</span><span class="w"> </span><span class="kd">record</span> <span class="nc">DownloadCountResponse</span><span class="p">(</span><span class="kt">int</span><span class="w"> </span><span class="n">count</span><span class="p">)</span><span class="w"> </span><span class="p">{}</span>

<span class="cm">/**</span>
<span class="cm"> * ダウンロード対象情報</span>
<span class="cm"> */</span>
<span class="kd">public</span><span class="w"> </span><span class="kd">record</span> <span class="nc">DownloadTargetInfo</span><span class="p">(</span>
<span class="w">    </span><span class="n">String</span><span class="w"> </span><span class="n">name</span><span class="p">,</span>
<span class="w">    </span><span class="n">String</span><span class="w"> </span><span class="n">fileName</span><span class="p">,</span>
<span class="w">    </span><span class="n">String</span><span class="w"> </span><span class="n">requiredPermission</span>
<span class="p">)</span><span class="w"> </span><span class="p">{}</span>

<span class="cm">/**</span>
<span class="cm"> * ダウンロード対象一覧レスポンス</span>
<span class="cm"> */</span>
<span class="kd">public</span><span class="w"> </span><span class="kd">record</span> <span class="nc">DownloadTargetListResponse</span><span class="p">(</span>
<span class="w">    </span><span class="n">java</span><span class="p">.</span><span class="na">util</span><span class="p">.</span><span class="na">List</span><span class="o">&lt;</span><span class="n">DownloadTargetInfo</span><span class="o">&gt;</span><span class="w"> </span><span class="n">targets</span>
<span class="p">)</span><span class="w"> </span><span class="p">{}</span>
</code></pre></div>
<hr />
<h2 id="266">26.6 権限によるアクセス制御<a class="headerlink" href="#266" title="Permanent link">&para;</a></h2>
<h3 id="_8">ダウンロード権限マトリクス<a class="headerlink" href="#_8" title="Permanent link">&para;</a></h3>
<table>
<thead>
<tr>
<th>対象</th>
<th style="text-align: center;">ACCOUNTANT</th>
<th style="text-align: center;">MANAGER</th>
<th style="text-align: center;">EXECUTIVE</th>
<th style="text-align: center;">ADMIN</th>
</tr>
</thead>
<tbody>
<tr>
<td>勘定科目</td>
<td style="text-align: center;">✓</td>
<td style="text-align: center;">✓</td>
<td style="text-align: center;">✓</td>
<td style="text-align: center;">✓</td>
</tr>
<tr>
<td>勘定科目構成</td>
<td style="text-align: center;">✓</td>
<td style="text-align: center;">✓</td>
<td style="text-align: center;">✓</td>
<td style="text-align: center;">✓</td>
</tr>
<tr>
<td>課税取引</td>
<td style="text-align: center;">✓</td>
<td style="text-align: center;">✓</td>
<td style="text-align: center;">✓</td>
<td style="text-align: center;">✓</td>
</tr>
<tr>
<td>自動仕訳設定</td>
<td style="text-align: center;">✓</td>
<td style="text-align: center;">✓</td>
<td style="text-align: center;">✓</td>
<td style="text-align: center;">✓</td>
</tr>
<tr>
<td>仕訳</td>
<td style="text-align: center;">✓</td>
<td style="text-align: center;">✓</td>
<td style="text-align: center;">✓</td>
<td style="text-align: center;">✓</td>
</tr>
<tr>
<td>仕訳明細</td>
<td style="text-align: center;">✓</td>
<td style="text-align: center;">✓</td>
<td style="text-align: center;">✓</td>
<td style="text-align: center;">✓</td>
</tr>
<tr>
<td>総勘定元帳</td>
<td style="text-align: center;">✓</td>
<td style="text-align: center;">✓</td>
<td style="text-align: center;">✓</td>
<td style="text-align: center;">✓</td>
</tr>
<tr>
<td>補助元帳</td>
<td style="text-align: center;">✓</td>
<td style="text-align: center;">✓</td>
<td style="text-align: center;">✓</td>
<td style="text-align: center;">✓</td>
</tr>
<tr>
<td>残高試算表</td>
<td style="text-align: center;">✓</td>
<td style="text-align: center;">✓</td>
<td style="text-align: center;">✓</td>
<td style="text-align: center;">✓</td>
</tr>
<tr>
<td>貸借対照表</td>
<td style="text-align: center;">✓</td>
<td style="text-align: center;">✓</td>
<td style="text-align: center;">✓</td>
<td style="text-align: center;">✓</td>
</tr>
<tr>
<td>損益計算書</td>
<td style="text-align: center;">✓</td>
<td style="text-align: center;">✓</td>
<td style="text-align: center;">✓</td>
<td style="text-align: center;">✓</td>
</tr>
<tr>
<td>財務分析</td>
<td style="text-align: center;">-</td>
<td style="text-align: center;">✓</td>
<td style="text-align: center;">✓</td>
<td style="text-align: center;">✓</td>
</tr>
<tr>
<td>月次推移</td>
<td style="text-align: center;">-</td>
<td style="text-align: center;">✓</td>
<td style="text-align: center;">✓</td>
<td style="text-align: center;">✓</td>
</tr>
<tr>
<td>監査ログ</td>
<td style="text-align: center;">-</td>
<td style="text-align: center;">-</td>
<td style="text-align: center;">✓</td>
<td style="text-align: center;">✓</td>
</tr>
</tbody>
</table>
<h3 id="_9">権限チェックの実装<a class="headerlink" href="#_9" title="Permanent link">&para;</a></h3>
<div class="highlight"><pre><span></span><code><span class="cm">/**</span>
<span class="cm"> * メソッドレベルの権限チェック</span>
<span class="cm"> */</span>
<span class="nd">@PreAuthorize</span><span class="p">(</span><span class="s">&quot;hasAuthority(&#39;STATEMENT_READ&#39;)&quot;</span><span class="p">)</span>
<span class="kd">public</span><span class="w"> </span><span class="kt">void</span><span class="w"> </span><span class="nf">downloadBalanceSheet</span><span class="p">(</span><span class="n">Writer</span><span class="w"> </span><span class="n">writer</span><span class="p">,</span><span class="w"> </span><span class="n">DownloadCriteria</span><span class="w"> </span><span class="n">criteria</span><span class="p">)</span>
<span class="w">        </span><span class="kd">throws</span><span class="w"> </span><span class="n">Exception</span><span class="w"> </span><span class="p">{</span>
<span class="w">    </span><span class="c1">// 実装</span>
<span class="p">}</span>

<span class="nd">@PreAuthorize</span><span class="p">(</span><span class="s">&quot;hasAuthority(&#39;ANALYSIS_READ&#39;)&quot;</span><span class="p">)</span>
<span class="kd">public</span><span class="w"> </span><span class="kt">void</span><span class="w"> </span><span class="nf">downloadFinancialAnalysis</span><span class="p">(</span><span class="n">Writer</span><span class="w"> </span><span class="n">writer</span><span class="p">,</span><span class="w"> </span><span class="n">DownloadCriteria</span><span class="w"> </span><span class="n">criteria</span><span class="p">)</span>
<span class="w">        </span><span class="kd">throws</span><span class="w"> </span><span class="n">Exception</span><span class="w"> </span><span class="p">{</span>
<span class="w">    </span><span class="c1">// 実装</span>
<span class="p">}</span>

<span class="nd">@PreAuthorize</span><span class="p">(</span><span class="s">&quot;hasAuthority(&#39;AUDIT_READ&#39;)&quot;</span><span class="p">)</span>
<span class="kd">public</span><span class="w"> </span><span class="kt">void</span><span class="w"> </span><span class="nf">downloadAuditLog</span><span class="p">(</span><span class="n">Writer</span><span class="w"> </span><span class="n">writer</span><span class="p">,</span><span class="w"> </span><span class="n">DownloadCriteria</span><span class="w"> </span><span class="n">criteria</span><span class="p">)</span>
<span class="w">        </span><span class="kd">throws</span><span class="w"> </span><span class="n">Exception</span><span class="w"> </span><span class="p">{</span>
<span class="w">    </span><span class="c1">// 実装</span>
<span class="p">}</span>
</code></pre></div>
<hr />
<h2 id="267">26.7 大量データのダウンロード対応<a class="headerlink" href="#267" title="Permanent link">&para;</a></h2>
<h3 id="_10">ストリーミング出力<a class="headerlink" href="#_10" title="Permanent link">&para;</a></h3>
<p>大量データのダウンロードでは、メモリ効率を考慮したストリーミング出力を行います。</p>
<p><img src="data:image/svg+xml;base64,PHN2ZyB4bWxucz0iaHR0cDovL3d3dy53My5vcmcvMjAwMC9zdmciIHhtbG5zOnhsaW5rPSJodHRwOi8vd3d3LnczLm9yZy8xOTk5L3hsaW5rIiBjb250ZW50U3R5bGVUeXBlPSJ0ZXh0L2NzcyIgZGF0YS1kaWFncmFtLXR5cGU9IlNFUVVFTkNFIiBoZWlnaHQ9IjQ0M3B4IiBwcmVzZXJ2ZUFzcGVjdFJhdGlvPSJub25lIiBzdHlsZT0id2lkdGg6NzM3cHg7aGVpZ2h0OjQ0M3B4O2JhY2tncm91bmQ6I0ZGRkZGRjsiIHZlcnNpb249IjEuMSIgdmlld0JveD0iMCAwIDczNyA0NDMiIHdpZHRoPSI3MzdweCIgem9vbUFuZFBhbj0ibWFnbmlmeSI+PHRpdGxlPiYjMTI0NzM7JiMxMjQ4ODsmIzEyNTIyOyYjMTI1NDA7JiMxMjUxMTsmIzEyNTMxOyYjMTI0NjQ7JiMxMjQ4MDsmIzEyNDU0OyYjMTI1MzE7JiMxMjUyNTsmIzEyNTQwOyYjMTI0ODk7JiMxMjM5ODsmIzI3OTY5OyYjMTI0Mjg7PC90aXRsZT48ZGVmcy8+PGc+PHRleHQgZmlsbD0iIzAwMDAwMCIgZm9udC1mYW1pbHk9InNhbnMtc2VyaWYiIGZvbnQtc2l6ZT0iMTQiIGZvbnQtd2VpZ2h0PSJib2xkIiBsZW5ndGhBZGp1c3Q9InNwYWNpbmciIHRleHRMZW5ndGg9IjIyMy45OTkiIHg9IjI1NS42OSIgeT0iMjcuOTk1MSI+JiMxMjQ3MzsmIzEyNDg4OyYjMTI1MjI7JiMxMjU0MDsmIzEyNTExOyYjMTI1MzE7JiMxMjQ2NDsmIzEyNDgwOyYjMTI0NTQ7JiMxMjUzMTsmIzEyNTI1OyYjMTI1NDA7JiMxMjQ4OTsmIzEyMzk4OyYjMjc5Njk7JiMxMjQyODs8L3RleHQ+PHJlY3QgZmlsbD0ibm9uZSIgaGVpZ2h0PSIxMzMuNjY0MSIgc3R5bGU9InN0cm9rZTojMDAwMDAwO3N0cm9rZS13aWR0aDoxLjU7IiB3aWR0aD0iNjY2Ljg0ODciIHg9IjEwIiB5PSIxNzcuOTkyMiIvPjxnPjx0aXRsZT5Db250cm9sbGVyPC90aXRsZT48cmVjdCBmaWxsPSIjMDAwMDAwIiBmaWxsLW9wYWNpdHk9IjAuMDAwMDAiIGhlaWdodD0iMzM0LjQ2MDkiIHdpZHRoPSI4IiB4PSI1Ny41ODY0IiB5PSI3My41OTM4Ii8+PGxpbmUgc3R5bGU9InN0cm9rZTojMTgxODE4O3N0cm9rZS13aWR0aDowLjU7c3Ryb2tlLWRhc2hhcnJheTo1LDU7IiB4MT0iNjEiIHgyPSI2MSIgeTE9IjczLjU5MzgiIHkyPSI0MDguMDU0NyIvPjwvZz48Zz48dGl0bGU+U2VydmljZTwvdGl0bGU+PHJlY3QgZmlsbD0iIzAwMDAwMCIgZmlsbC1vcGFjaXR5PSIwLjAwMDAwIiBoZWlnaHQ9IjMzNC40NjA5IiB3aWR0aD0iOCIgeD0iMjQ3LjAwNjMiIHk9IjczLjU5MzgiLz48bGluZSBzdHlsZT0ic3Ryb2tlOiMxODE4MTg7c3Ryb2tlLXdpZHRoOjAuNTtzdHJva2UtZGFzaGFycmF5OjUsNTsiIHgxPSIyNTAuMTM1NyIgeDI9IjI1MC4xMzU3IiB5MT0iNzMuNTkzOCIgeTI9IjQwOC4wNTQ3Ii8+PC9nPjxnPjx0aXRsZT5SZXBvc2l0b3J5PC90aXRsZT48cmVjdCBmaWxsPSIjMDAwMDAwIiBmaWxsLW9wYWNpdHk9IjAuMDAwMDAiIGhlaWdodD0iMzM0LjQ2MDkiIHdpZHRoPSI4IiB4PSI0MTUuODg1MyIgeT0iNzMuNTkzOCIvPjxsaW5lIHN0eWxlPSJzdHJva2U6IzE4MTgxODtzdHJva2Utd2lkdGg6MC41O3N0cm9rZS1kYXNoYXJyYXk6NSw1OyIgeDE9IjQxOS4zNDkxIiB4Mj0iNDE5LjM0OTEiIHkxPSI3My41OTM4IiB5Mj0iNDA4LjA1NDciLz48L2c+PGc+PHRpdGxlPkRhdGFiYXNlPC90aXRsZT48cmVjdCBmaWxsPSIjMDAwMDAwIiBmaWxsLW9wYWNpdHk9IjAuMDAwMDAiIGhlaWdodD0iMzM0LjQ2MDkiIHdpZHRoPSI4IiB4PSI1NTUuMTAxNiIgeT0iNzMuNTkzOCIvPjxsaW5lIHN0eWxlPSJzdHJva2U6IzE4MTgxODtzdHJva2Utd2lkdGg6MC41O3N0cm9rZS1kYXNoYXJyYXk6NSw1OyIgeDE9IjU1OC43MDEyIiB4Mj0iNTU4LjcwMTIiIHkxPSI3My41OTM4IiB5Mj0iNDA4LjA1NDciLz48L2c+PGc+PHRpdGxlPldyaXRlcjwvdGl0bGU+PHJlY3QgZmlsbD0iIzAwMDAwMCIgZmlsbC1vcGFjaXR5PSIwLjAwMDAwIiBoZWlnaHQ9IjMzNC40NjA5IiB3aWR0aD0iOCIgeD0iNjM0LjE3NTQiIHk9IjczLjU5MzgiLz48bGluZSBzdHlsZT0ic3Ryb2tlOiMxODE4MTg7c3Ryb2tlLXdpZHRoOjAuNTtzdHJva2UtZGFzaGFycmF5OjUsNTsiIHgxPSI2MzcuNTAyIiB4Mj0iNjM3LjUwMiIgeTE9IjczLjU5MzgiIHkyPSI0MDguMDU0NyIvPjwvZz48Zz48dGl0bGU+Q2xpZW50PC90aXRsZT48cmVjdCBmaWxsPSIjMDAwMDAwIiBmaWxsLW9wYWNpdHk9IjAuMDAwMDAiIGhlaWdodD0iMzM0LjQ2MDkiIHdpZHRoPSI4IiB4PSI3MDAuMTEzOCIgeT0iNzMuNTkzOCIvPjxsaW5lIHN0eWxlPSJzdHJva2U6IzE4MTgxODtzdHJva2Utd2lkdGg6MC41O3N0cm9rZS1kYXNoYXJyYXk6NSw1OyIgeDE9IjcwMy44NDg3IiB4Mj0iNzAzLjg0ODciIHkxPSI3My41OTM4IiB5Mj0iNDA4LjA1NDciLz48L2c+PGcgY2xhc3M9InBhcnRpY2lwYW50IHBhcnRpY2lwYW50LWhlYWQiIGRhdGEtcGFydGljaXBhbnQ9IkNvbnRyb2xsZXIiPjxyZWN0IGZpbGw9IiNFMkUyRjAiIGhlaWdodD0iMzAuMjk2OSIgcng9IjIuNSIgcnk9IjIuNSIgc3R5bGU9InN0cm9rZTojMTgxODE4O3N0cm9rZS13aWR0aDowLjU7IiB3aWR0aD0iODMuMTcyOSIgeD0iMjAiIHk9IjQyLjI5NjkiLz48dGV4dCBmaWxsPSIjMDAwMDAwIiBmb250LWZhbWlseT0ic2Fucy1zZXJpZiIgZm9udC1zaXplPSIxNCIgbGVuZ3RoQWRqdXN0PSJzcGFjaW5nIiB0ZXh0TGVuZ3RoPSI2OS4xNzI5IiB4PSIyNyIgeT0iNjIuMjkyIj5Db250cm9sbGVyPC90ZXh0PjwvZz48ZyBjbGFzcz0icGFydGljaXBhbnQgcGFydGljaXBhbnQtdGFpbCIgZGF0YS1wYXJ0aWNpcGFudD0iQ29udHJvbGxlciI+PHJlY3QgZmlsbD0iI0UyRTJGMCIgaGVpZ2h0PSIzMC4yOTY5IiByeD0iMi41IiByeT0iMi41IiBzdHlsZT0ic3Ryb2tlOiMxODE4MTg7c3Ryb2tlLXdpZHRoOjAuNTsiIHdpZHRoPSI4My4xNzI5IiB4PSIyMCIgeT0iNDA3LjA1NDciLz48dGV4dCBmaWxsPSIjMDAwMDAwIiBmb250LWZhbWlseT0ic2Fucy1zZXJpZiIgZm9udC1zaXplPSIxNCIgbGVuZ3RoQWRqdXN0PSJzcGFjaW5nIiB0ZXh0TGVuZ3RoPSI2OS4xNzI5IiB4PSIyNyIgeT0iNDI3LjA0OTgiPkNvbnRyb2xsZXI8L3RleHQ+PC9nPjxnIGNsYXNzPSJwYXJ0aWNpcGFudCBwYXJ0aWNpcGFudC1oZWFkIiBkYXRhLXBhcnRpY2lwYW50PSJTZXJ2aWNlIj48cmVjdCBmaWxsPSIjRTJFMkYwIiBoZWlnaHQ9IjMwLjI5NjkiIHJ4PSIyLjUiIHJ5PSIyLjUiIHN0eWxlPSJzdHJva2U6IzE4MTgxODtzdHJva2Utd2lkdGg6MC41OyIgd2lkdGg9IjY1Ljc0MTIiIHg9IjIxOC4xMzU3IiB5PSI0Mi4yOTY5Ii8+PHRleHQgZmlsbD0iIzAwMDAwMCIgZm9udC1mYW1pbHk9InNhbnMtc2VyaWYiIGZvbnQtc2l6ZT0iMTQiIGxlbmd0aEFkanVzdD0ic3BhY2luZyIgdGV4dExlbmd0aD0iNTEuNzQxMiIgeD0iMjI1LjEzNTciIHk9IjYyLjI5MiI+U2VydmljZTwvdGV4dD48L2c+PGcgY2xhc3M9InBhcnRpY2lwYW50IHBhcnRpY2lwYW50LXRhaWwiIGRhdGEtcGFydGljaXBhbnQ9IlNlcnZpY2UiPjxyZWN0IGZpbGw9IiNFMkUyRjAiIGhlaWdodD0iMzAuMjk2OSIgcng9IjIuNSIgcnk9IjIuNSIgc3R5bGU9InN0cm9rZTojMTgxODE4O3N0cm9rZS13aWR0aDowLjU7IiB3aWR0aD0iNjUuNzQxMiIgeD0iMjE4LjEzNTciIHk9IjQwNy4wNTQ3Ii8+PHRleHQgZmlsbD0iIzAwMDAwMCIgZm9udC1mYW1pbHk9InNhbnMtc2VyaWYiIGZvbnQtc2l6ZT0iMTQiIGxlbmd0aEFkanVzdD0ic3BhY2luZyIgdGV4dExlbmd0aD0iNTEuNzQxMiIgeD0iMjI1LjEzNTciIHk9IjQyNy4wNDk4Ij5TZXJ2aWNlPC90ZXh0PjwvZz48ZyBjbGFzcz0icGFydGljaXBhbnQgcGFydGljaXBhbnQtaGVhZCIgZGF0YS1wYXJ0aWNpcGFudD0iUmVwb3NpdG9yeSI+PHJlY3QgZmlsbD0iI0UyRTJGMCIgaGVpZ2h0PSIzMC4yOTY5IiByeD0iMi41IiByeT0iMi41IiBzdHlsZT0ic3Ryb2tlOiMxODE4MTg7c3Ryb2tlLXdpZHRoOjAuNTsiIHdpZHRoPSI4OS4wNzIzIiB4PSIzNzUuMzQ5MSIgeT0iNDIuMjk2OSIvPjx0ZXh0IGZpbGw9IiMwMDAwMDAiIGZvbnQtZmFtaWx5PSJzYW5zLXNlcmlmIiBmb250LXNpemU9IjE0IiBsZW5ndGhBZGp1c3Q9InNwYWNpbmciIHRleHRMZW5ndGg9Ijc1LjA3MjMiIHg9IjM4Mi4zNDkxIiB5PSI2Mi4yOTIiPlJlcG9zaXRvcnk8L3RleHQ+PC9nPjxnIGNsYXNzPSJwYXJ0aWNpcGFudCBwYXJ0aWNpcGFudC10YWlsIiBkYXRhLXBhcnRpY2lwYW50PSJSZXBvc2l0b3J5Ij48cmVjdCBmaWxsPSIjRTJFMkYwIiBoZWlnaHQ9IjMwLjI5NjkiIHJ4PSIyLjUiIHJ5PSIyLjUiIHN0eWxlPSJzdHJva2U6IzE4MTgxODtzdHJva2Utd2lkdGg6MC41OyIgd2lkdGg9Ijg5LjA3MjMiIHg9IjM3NS4zNDkxIiB5PSI0MDcuMDU0NyIvPjx0ZXh0IGZpbGw9IiMwMDAwMDAiIGZvbnQtZmFtaWx5PSJzYW5zLXNlcmlmIiBmb250LXNpemU9IjE0IiBsZW5ndGhBZGp1c3Q9InNwYWNpbmciIHRleHRMZW5ndGg9Ijc1LjA3MjMiIHg9IjM4Mi4zNDkxIiB5PSI0MjcuMDQ5OCI+UmVwb3NpdG9yeTwvdGV4dD48L2c+PGcgY2xhc3M9InBhcnRpY2lwYW50IHBhcnRpY2lwYW50LWhlYWQiIGRhdGEtcGFydGljaXBhbnQ9IkRhdGFiYXNlIj48cmVjdCBmaWxsPSIjRTJFMkYwIiBoZWlnaHQ9IjMwLjI5NjkiIHJ4PSIyLjUiIHJ5PSIyLjUiIHN0eWxlPSJzdHJva2U6IzE4MTgxODtzdHJva2Utd2lkdGg6MC41OyIgd2lkdGg9IjgwLjgwMDgiIHg9IjUxOC43MDEyIiB5PSI0Mi4yOTY5Ii8+PHRleHQgZmlsbD0iIzAwMDAwMCIgZm9udC1mYW1pbHk9InNhbnMtc2VyaWYiIGZvbnQtc2l6ZT0iMTQiIGxlbmd0aEFkanVzdD0ic3BhY2luZyIgdGV4dExlbmd0aD0iNjYuODAwOCIgeD0iNTI1LjcwMTIiIHk9IjYyLjI5MiI+RGF0YWJhc2U8L3RleHQ+PC9nPjxnIGNsYXNzPSJwYXJ0aWNpcGFudCBwYXJ0aWNpcGFudC10YWlsIiBkYXRhLXBhcnRpY2lwYW50PSJEYXRhYmFzZSI+PHJlY3QgZmlsbD0iI0UyRTJGMCIgaGVpZ2h0PSIzMC4yOTY5IiByeD0iMi41IiByeT0iMi41IiBzdHlsZT0ic3Ryb2tlOiMxODE4MTg7c3Ryb2tlLXdpZHRoOjAuNTsiIHdpZHRoPSI4MC44MDA4IiB4PSI1MTguNzAxMiIgeT0iNDA3LjA1NDciLz48dGV4dCBmaWxsPSIjMDAwMDAwIiBmb250LWZhbWlseT0ic2Fucy1zZXJpZiIgZm9udC1zaXplPSIxNCIgbGVuZ3RoQWRqdXN0PSJzcGFjaW5nIiB0ZXh0TGVuZ3RoPSI2Ni44MDA4IiB4PSI1MjUuNzAxMiIgeT0iNDI3LjA0OTgiPkRhdGFiYXNlPC90ZXh0PjwvZz48ZyBjbGFzcz0icGFydGljaXBhbnQgcGFydGljaXBhbnQtaGVhZCIgZGF0YS1wYXJ0aWNpcGFudD0iV3JpdGVyIj48cmVjdCBmaWxsPSIjRTJFMkYwIiBoZWlnaHQ9IjMwLjI5NjkiIHJ4PSIyLjUiIHJ5PSIyLjUiIHN0eWxlPSJzdHJva2U6IzE4MTgxODtzdHJva2Utd2lkdGg6MC41OyIgd2lkdGg9IjU3LjM0NjciIHg9IjYwOS41MDIiIHk9IjQyLjI5NjkiLz48dGV4dCBmaWxsPSIjMDAwMDAwIiBmb250LWZhbWlseT0ic2Fucy1zZXJpZiIgZm9udC1zaXplPSIxNCIgbGVuZ3RoQWRqdXN0PSJzcGFjaW5nIiB0ZXh0TGVuZ3RoPSI0My4zNDY3IiB4PSI2MTYuNTAyIiB5PSI2Mi4yOTIiPldyaXRlcjwvdGV4dD48L2c+PGcgY2xhc3M9InBhcnRpY2lwYW50IHBhcnRpY2lwYW50LXRhaWwiIGRhdGEtcGFydGljaXBhbnQ9IldyaXRlciI+PHJlY3QgZmlsbD0iI0UyRTJGMCIgaGVpZ2h0PSIzMC4yOTY5IiByeD0iMi41IiByeT0iMi41IiBzdHlsZT0ic3Ryb2tlOiMxODE4MTg7c3Ryb2tlLXdpZHRoOjAuNTsiIHdpZHRoPSI1Ny4zNDY3IiB4PSI2MDkuNTAyIiB5PSI0MDcuMDU0NyIvPjx0ZXh0IGZpbGw9IiMwMDAwMDAiIGZvbnQtZmFtaWx5PSJzYW5zLXNlcmlmIiBmb250LXNpemU9IjE0IiBsZW5ndGhBZGp1c3Q9InNwYWNpbmciIHRleHRMZW5ndGg9IjQzLjM0NjciIHg9IjYxNi41MDIiIHk9IjQyNy4wNDk4Ij5Xcml0ZXI8L3RleHQ+PC9nPjxnIGNsYXNzPSJwYXJ0aWNpcGFudCBwYXJ0aWNpcGFudC1oZWFkIiBkYXRhLXBhcnRpY2lwYW50PSJDbGllbnQiPjxyZWN0IGZpbGw9IiNFMkUyRjAiIGhlaWdodD0iMzAuMjk2OSIgcng9IjIuNSIgcnk9IjIuNSIgc3R5bGU9InN0cm9rZTojMTgxODE4O3N0cm9rZS13aWR0aDowLjU7IiB3aWR0aD0iNTQuNTMwMyIgeD0iNjc2Ljg0ODciIHk9IjQyLjI5NjkiLz48dGV4dCBmaWxsPSIjMDAwMDAwIiBmb250LWZhbWlseT0ic2Fucy1zZXJpZiIgZm9udC1zaXplPSIxNCIgbGVuZ3RoQWRqdXN0PSJzcGFjaW5nIiB0ZXh0TGVuZ3RoPSI0MC41MzAzIiB4PSI2ODMuODQ4NyIgeT0iNjIuMjkyIj5DbGllbnQ8L3RleHQ+PC9nPjxnIGNsYXNzPSJwYXJ0aWNpcGFudCBwYXJ0aWNpcGFudC10YWlsIiBkYXRhLXBhcnRpY2lwYW50PSJDbGllbnQiPjxyZWN0IGZpbGw9IiNFMkUyRjAiIGhlaWdodD0iMzAuMjk2OSIgcng9IjIuNSIgcnk9IjIuNSIgc3R5bGU9InN0cm9rZTojMTgxODE4O3N0cm9rZS13aWR0aDowLjU7IiB3aWR0aD0iNTQuNTMwMyIgeD0iNjc2Ljg0ODciIHk9IjQwNy4wNTQ3Ii8+PHRleHQgZmlsbD0iIzAwMDAwMCIgZm9udC1mYW1pbHk9InNhbnMtc2VyaWYiIGZvbnQtc2l6ZT0iMTQiIGxlbmd0aEFkanVzdD0ic3BhY2luZyIgdGV4dExlbmd0aD0iNDAuNTMwMyIgeD0iNjgzLjg0ODciIHk9IjQyNy4wNDk4Ij5DbGllbnQ8L3RleHQ+PC9nPjxnIGNsYXNzPSJtZXNzYWdlIiBkYXRhLXBhcnRpY2lwYW50LTE9IkNvbnRyb2xsZXIiIGRhdGEtcGFydGljaXBhbnQtMj0iU2VydmljZSI+PHBvbHlnb24gZmlsbD0iIzE4MTgxOCIgcG9pbnRzPSIyMzkuMDA2MywxMDAuNzI2NiwyNDkuMDA2MywxMDQuNzI2NiwyMzkuMDA2MywxMDguNzI2NiwyNDMuMDA2MywxMDQuNzI2NiIgc3R5bGU9InN0cm9rZTojMTgxODE4O3N0cm9rZS13aWR0aDoxOyIvPjxsaW5lIHN0eWxlPSJzdHJva2U6IzE4MTgxODtzdHJva2Utd2lkdGg6MTsiIHgxPSI2MS41ODY0IiB4Mj0iMjQ1LjAwNjMiIHkxPSIxMDQuNzI2NiIgeTI9IjEwNC43MjY2Ii8+PHRleHQgZmlsbD0iIzAwMDAwMCIgZm9udC1mYW1pbHk9InNhbnMtc2VyaWYiIGZvbnQtc2l6ZT0iMTMiIGxlbmd0aEFkanVzdD0ic3BhY2luZyIgdGV4dExlbmd0aD0iMTY1LjQxOTkiIHg9IjY4LjU4NjQiIHk9Ijk5LjY2MDYiPmRvd25sb2FkKHdyaXRlciwgY3JpdGVyaWEpPC90ZXh0PjwvZz48ZyBjbGFzcz0ibWVzc2FnZSIgZGF0YS1wYXJ0aWNpcGFudC0xPSJTZXJ2aWNlIiBkYXRhLXBhcnRpY2lwYW50LTI9IlJlcG9zaXRvcnkiPjxwb2x5Z29uIGZpbGw9IiMxODE4MTgiIHBvaW50cz0iNDA3Ljg4NTMsMTI5Ljg1OTQsNDE3Ljg4NTMsMTMzLjg1OTQsNDA3Ljg4NTMsMTM3Ljg1OTQsNDExLjg4NTMsMTMzLjg1OTQiIHN0eWxlPSJzdHJva2U6IzE4MTgxODtzdHJva2Utd2lkdGg6MTsiLz48bGluZSBzdHlsZT0ic3Ryb2tlOiMxODE4MTg7c3Ryb2tlLXdpZHRoOjE7IiB4MT0iMjUxLjAwNjMiIHgyPSI0MTMuODg1MyIgeTE9IjEzMy44NTk0IiB5Mj0iMTMzLjg1OTQiLz48dGV4dCBmaWxsPSIjMDAwMDAwIiBmb250LWZhbWlseT0ic2Fucy1zZXJpZiIgZm9udC1zaXplPSIxMyIgbGVuZ3RoQWRqdXN0PSJzcGFjaW5nIiB0ZXh0TGVuZ3RoPSIxNDQuODc4OSIgeD0iMjU4LjAwNjMiIHk9IjEyOC43OTM1Ij5maW5kQnlTdHJlYW0oY3JpdGVyaWEpPC90ZXh0PjwvZz48ZyBjbGFzcz0ibWVzc2FnZSIgZGF0YS1wYXJ0aWNpcGFudC0xPSJSZXBvc2l0b3J5IiBkYXRhLXBhcnRpY2lwYW50LTI9IkRhdGFiYXNlIj48cG9seWdvbiBmaWxsPSIjMTgxODE4IiBwb2ludHM9IjU0Ny4xMDE2LDE1OC45OTIyLDU1Ny4xMDE2LDE2Mi45OTIyLDU0Ny4xMDE2LDE2Ni45OTIyLDU1MS4xMDE2LDE2Mi45OTIyIiBzdHlsZT0ic3Ryb2tlOiMxODE4MTg7c3Ryb2tlLXdpZHRoOjE7Ii8+PGxpbmUgc3R5bGU9InN0cm9rZTojMTgxODE4O3N0cm9rZS13aWR0aDoxOyIgeDE9IjQxOS44ODUzIiB4Mj0iNTUzLjEwMTYiIHkxPSIxNjIuOTkyMiIgeTI9IjE2Mi45OTIyIi8+PHRleHQgZmlsbD0iIzAwMDAwMCIgZm9udC1mYW1pbHk9InNhbnMtc2VyaWYiIGZvbnQtc2l6ZT0iMTMiIGxlbmd0aEFkanVzdD0ic3BhY2luZyIgdGV4dExlbmd0aD0iMTE1LjIxNjQiIHg9IjQyNi44ODUzIiB5PSIxNTcuOTI2MyI+U0VMRUNUICgmIzEyNDU5OyYjMTI1NDA7JiMxMjQ3NzsmIzEyNTIzOyk8L3RleHQ+PC9nPjxwYXRoIGQ9Ik0xMCwxNzcuOTkyMiBMODYuNjI0LDE3Ny45OTIyIEw4Ni42MjQsMTg1LjEyNSBMNzYuNjI0LDE5NS4xMjUgTDEwLDE5NS4xMjUgTDEwLDE3Ny45OTIyIiBmaWxsPSIjRUVFRUVFIiBzdHlsZT0ic3Ryb2tlOiMwMDAwMDA7c3Ryb2tlLXdpZHRoOjEuNTsiLz48cmVjdCBmaWxsPSJub25lIiBoZWlnaHQ9IjEzMy42NjQxIiBzdHlsZT0ic3Ryb2tlOiMwMDAwMDA7c3Ryb2tlLXdpZHRoOjEuNTsiIHdpZHRoPSI2NjYuODQ4NyIgeD0iMTAiIHk9IjE3Ny45OTIyIi8+PHRleHQgZmlsbD0iIzAwMDAwMCIgZm9udC1mYW1pbHk9InNhbnMtc2VyaWYiIGZvbnQtc2l6ZT0iMTMiIGZvbnQtd2VpZ2h0PSJib2xkIiBsZW5ndGhBZGp1c3Q9InNwYWNpbmciIHRleHRMZW5ndGg9IjMxLjYyNCIgeD0iMjUiIHk9IjE5MS4wNTkxIj5sb29wPC90ZXh0Pjx0ZXh0IGZpbGw9IiMwMDAwMDAiIGZvbnQtZmFtaWx5PSJzYW5zLXNlcmlmIiBmb250LXNpemU9IjExIiBmb250LXdlaWdodD0iYm9sZCIgbGVuZ3RoQWRqdXN0PSJzcGFjaW5nIiB0ZXh0TGVuZ3RoPSIxNjQuMDUzNiIgeD0iMTAxLjYyNCIgeT0iMTkwLjIwMjYiPlsmIzEyNTI0OyYjMTI0Njc7JiMxMjU0MDsmIzEyNDg5OyYjMTIzNzI7JiMxMjM5MjsmIzEyMzk1OyYjMTI0NzM7JiMxMjQ4ODsmIzEyNTIyOyYjMTI1NDA7JiMxMjUxMTsmIzEyNTMxOyYjMTI0NjQ7XTwvdGV4dD48ZyBjbGFzcz0ibWVzc2FnZSIgZGF0YS1wYXJ0aWNpcGFudC0xPSJEYXRhYmFzZSIgZGF0YS1wYXJ0aWNpcGFudC0yPSJSZXBvc2l0b3J5Ij48cG9seWdvbiBmaWxsPSIjMTgxODE4IiBwb2ludHM9IjQzMC44ODUzLDIxMi4yNTc4LDQyMC44ODUzLDIxNi4yNTc4LDQzMC44ODUzLDIyMC4yNTc4LDQyNi44ODUzLDIxNi4yNTc4IiBzdHlsZT0ic3Ryb2tlOiMxODE4MTg7c3Ryb2tlLXdpZHRoOjE7Ii8+PGxpbmUgc3R5bGU9InN0cm9rZTojMTgxODE4O3N0cm9rZS13aWR0aDoxO3N0cm9rZS1kYXNoYXJyYXk6MiwyOyIgeDE9IjQyNC44ODUzIiB4Mj0iNTU4LjEwMTYiIHkxPSIyMTYuMjU3OCIgeTI9IjIxNi4yNTc4Ii8+PHRleHQgZmlsbD0iIzAwMDAwMCIgZm9udC1mYW1pbHk9InNhbnMtc2VyaWYiIGZvbnQtc2l6ZT0iMTMiIGxlbmd0aEFkanVzdD0ic3BhY2luZyIgdGV4dExlbmd0aD0iNjAuMjcxMSIgeD0iNDM2Ljg4NTMiIHk9IjIxMS4xOTE5Ij4xJiMxMjUyNDsmIzEyNDY3OyYjMTI1NDA7JiMxMjQ4OTs8L3RleHQ+PC9nPjxnIGNsYXNzPSJtZXNzYWdlIiBkYXRhLXBhcnRpY2lwYW50LTE9IlJlcG9zaXRvcnkiIGRhdGEtcGFydGljaXBhbnQtMj0iU2VydmljZSI+PHBvbHlnb24gZmlsbD0iIzE4MTgxOCIgcG9pbnRzPSIyNjIuMDA2MywyNDEuMzkwNiwyNTIuMDA2MywyNDUuMzkwNiwyNjIuMDA2MywyNDkuMzkwNiwyNTguMDA2MywyNDUuMzkwNiIgc3R5bGU9InN0cm9rZTojMTgxODE4O3N0cm9rZS13aWR0aDoxOyIvPjxsaW5lIHN0eWxlPSJzdHJva2U6IzE4MTgxODtzdHJva2Utd2lkdGg6MTtzdHJva2UtZGFzaGFycmF5OjIsMjsiIHgxPSIyNTYuMDA2MyIgeDI9IjQxOC44ODUzIiB5MT0iMjQ1LjM5MDYiIHkyPSIyNDUuMzkwNiIvPjx0ZXh0IGZpbGw9IiMwMDAwMDAiIGZvbnQtZmFtaWx5PSJzYW5zLXNlcmlmIiBmb250LXNpemU9IjEzIiBsZW5ndGhBZGp1c3Q9InNwYWNpbmciIHRleHRMZW5ndGg9Ijc4LjAwMDEiIHg9IjI2OC4wMDYzIiB5PSIyNDAuMzI0NyI+JiMxMjQ1NjsmIzEyNTMxOyYjMTI0ODY7JiMxMjQ1MTsmIzEyNDg2OyYjMTI0NTE7PC90ZXh0PjwvZz48ZyBjbGFzcz0ibWVzc2FnZSIgZGF0YS1wYXJ0aWNpcGFudC0xPSJTZXJ2aWNlIiBkYXRhLXBhcnRpY2lwYW50LTI9IldyaXRlciI+PHBvbHlnb24gZmlsbD0iIzE4MTgxOCIgcG9pbnRzPSI2MjYuMTc1NCwyNzAuNTIzNCw2MzYuMTc1NCwyNzQuNTIzNCw2MjYuMTc1NCwyNzguNTIzNCw2MzAuMTc1NCwyNzQuNTIzNCIgc3R5bGU9InN0cm9rZTojMTgxODE4O3N0cm9rZS13aWR0aDoxOyIvPjxsaW5lIHN0eWxlPSJzdHJva2U6IzE4MTgxODtzdHJva2Utd2lkdGg6MTsiIHgxPSIyNTEuMDA2MyIgeDI9IjYzMi4xNzU0IiB5MT0iMjc0LjUyMzQiIHkyPSIyNzQuNTIzNCIvPjx0ZXh0IGZpbGw9IiMwMDAwMDAiIGZvbnQtZmFtaWx5PSJzYW5zLXNlcmlmIiBmb250LXNpemU9IjEzIiBsZW5ndGhBZGp1c3Q9InNwYWNpbmciIHRleHRMZW5ndGg9IjY1LjIyMjIiIHg9IjI1OC4wMDYzIiB5PSIyNjkuNDU3NSI+Q1NWJiMzNDg5MjsmIzIwOTg2OyYjMjExNDc7PC90ZXh0PjwvZz48ZyBjbGFzcz0ibWVzc2FnZSIgZGF0YS1wYXJ0aWNpcGFudC0xPSJXcml0ZXIiIGRhdGEtcGFydGljaXBhbnQtMj0iQ29udHJvbGxlciI+PHBvbHlnb24gZmlsbD0iIzE4MTgxOCIgcG9pbnRzPSI3Mi41ODY0LDI5OS42NTYzLDYyLjU4NjQsMzAzLjY1NjMsNzIuNTg2NCwzMDcuNjU2Myw2OC41ODY0LDMwMy42NTYzIiBzdHlsZT0ic3Ryb2tlOiMxODE4MTg7c3Ryb2tlLXdpZHRoOjE7Ii8+PGxpbmUgc3R5bGU9InN0cm9rZTojMTgxODE4O3N0cm9rZS13aWR0aDoxO3N0cm9rZS1kYXNoYXJyYXk6MiwyOyIgeDE9IjY2LjU4NjQiIHgyPSI2MzcuMTc1NCIgeTE9IjMwMy42NTYzIiB5Mj0iMzAzLjY1NjMiLz48dGV4dCBmaWxsPSIjMDAwMDAwIiBmb250LWZhbWlseT0ic2Fucy1zZXJpZiIgZm9udC1zaXplPSIxMyIgbGVuZ3RoQWRqdXN0PSJzcGFjaW5nIiB0ZXh0TGVuZ3RoPSIxMTcuMDAwMSIgeD0iNzguNTg2NCIgeT0iMjk4LjU5MDMiPiYjMTI0OTY7JiMxMjQ4MzsmIzEyNTAxOyYjMTI0NDk7JiMxMjUwMTsmIzEyNTIxOyYjMTI0ODM7JiMxMjQ3MTsmIzEyNTE3OzwvdGV4dD48L2c+PGcgY2xhc3M9Im1lc3NhZ2UiIGRhdGEtcGFydGljaXBhbnQtMT0iQ29udHJvbGxlciIgZGF0YS1wYXJ0aWNpcGFudC0yPSJDbGllbnQiPjxwb2x5Z29uIGZpbGw9IiMxODE4MTgiIHBvaW50cz0iNjkyLjExMzgsMzM1Ljc4OTEsNzAyLjExMzgsMzM5Ljc4OTEsNjkyLjExMzgsMzQzLjc4OTEsNjk2LjExMzgsMzM5Ljc4OTEiIHN0eWxlPSJzdHJva2U6IzE4MTgxODtzdHJva2Utd2lkdGg6MTsiLz48bGluZSBzdHlsZT0ic3Ryb2tlOiMxODE4MTg7c3Ryb2tlLXdpZHRoOjE7c3Ryb2tlLWRhc2hhcnJheToyLDI7IiB4MT0iNjEuNTg2NCIgeDI9IjY5OC4xMTM4IiB5MT0iMzM5Ljc4OTEiIHkyPSIzMzkuNzg5MSIvPjx0ZXh0IGZpbGw9IiMwMDAwMDAiIGZvbnQtZmFtaWx5PSJzYW5zLXNlcmlmIiBmb250LXNpemU9IjEzIiBsZW5ndGhBZGp1c3Q9InNwYWNpbmciIHRleHRMZW5ndGg9IjkxLjAwMDEiIHg9IjY4LjU4NjQiIHk9IjMzNC43MjMxIj4mIzEyNTI0OyYjMTI0NzM7JiMxMjUwOTsmIzEyNTMxOyYjMTI0NzM7JiMyMzQzNjsmIzIwMTAyOzwvdGV4dD48L2c+PHBhdGggZD0iTTQyNCwzNTIuNzg5MSBMNDI0LDM5Mi43ODkxIEw2MTksMzkyLjc4OTEgTDYxOSwzNjIuNzg5MSBMNjA5LDM1Mi43ODkxIEw0MjQsMzUyLjc4OTEiIGZpbGw9IiNGRUZGREQiIHN0eWxlPSJzdHJva2U6IzE4MTgxODtzdHJva2Utd2lkdGg6MC41OyIvPjxwYXRoIGQ9Ik02MDksMzUyLjc4OTEgTDYwOSwzNjIuNzg5MSBMNjE5LDM2Mi43ODkxIEw2MDksMzUyLjc4OTEiIGZpbGw9IiNGRUZGREQiIHN0eWxlPSJzdHJva2U6IzE4MTgxODtzdHJva2Utd2lkdGg6MC41OyIvPjx0ZXh0IGZpbGw9IiMwMDAwMDAiIGZvbnQtZmFtaWx5PSJzYW5zLXNlcmlmIiBmb250LXNpemU9IjEzIiBsZW5ndGhBZGp1c3Q9InNwYWNpbmciIHRleHRMZW5ndGg9IjE1Ni4yMTU4IiB4PSI0MzAiIHk9IjM2OS44NTYiPk15QmF0aXMmIzEyMzk4O1Jlc3VsdEhhbmRsZXI8L3RleHQ+PHRleHQgZmlsbD0iIzAwMDAwMCIgZm9udC1mYW1pbHk9InNhbnMtc2VyaWYiIGZvbnQtc2l6ZT0iMTMiIGxlbmd0aEFkanVzdD0ic3BhY2luZyIgdGV4dExlbmd0aD0iMTc0LjcxOTMiIHg9IjQzMCIgeT0iMzg0Ljk4ODgiPiYjMTI0MTQ7JiMxMjM4MzsmIzEyMzk5O0pQQSBTdHJlYW0gQVBJJiMxMjQzNDsmIzIwMzUxOyYjMjk5OTI7PC90ZXh0PjwhLS1TUkM9W1JMOURJcTkxNUR0Rmh2WWJHWXhRa1daS1g4ZTJ5S01qOXp6TzB3eXR5Zm1JVHhxUGkwelNIRFdnR1lHQW94OTA4ZklpN3RFci1YZERGM0ZWWXBScFNKWnRwM3RkWmMzMmVIWGE3ekdIZzNqR2h3MlFlN2VXZHEwVFdCbW5QX0tHdUNWV1RwLVVWUDFyWDRoNDR3cDBJaUdMRUNEVHVONzdlTHU0amdZdHBtZXFXa0xmWVBVUHU1dXIwWXlJR1JQOEVTaFR6OVpHYWNXY1puQ0JLck1TbjNRbGswdWRUZ21JNEVUbThUV1BZUUNmSVZEZEItZ0k4ZEZqVERLSTdZTXhpSGF6bkQ0THFzT3F0eWdrUFpGaEUwUW9PbkFHR3IyVEU0OEV2b0tDd1h2YVJuZkMwX21zLTlyX1dxSV9ZZWNfM1NzN0xJOXpIQW8yUjBUcGc4NnljZ25YWXZFV0QyclpSTm9yd2tGM21WWmEwbHNXSFlZS2VEUElmdzBLZzdFR0JSRWdNdEVMQncyazROTmpRRHdjczY1S0pvQ3ZDUXBqTkdRay1rRGtWSkllOFVIb0dSNzdqZFM0dmlObVdEVWdRSTlPTU4tUUYydGxFTUE5a0JSdjgtMl9XVHk0X3Q0YmJ5QUpNVTFLUlhkYXNNWnVfamJlY293bUtWcTZdLS0+PC9nPjwvc3ZnPg==" class="uml" alt="uml diagram" title="" /></p>
<h3 id="_11">ストリーミング実装<a class="headerlink" href="#_11" title="Permanent link">&para;</a></h3>
<div class="highlight"><pre><span></span><code><span class="kn">package</span><span class="w"> </span><span class="nn">com.example.accounting.infrastructure.repository</span><span class="p">;</span>

<span class="kn">import</span><span class="w"> </span><span class="nn">org.apache.ibatis.cursor.Cursor</span><span class="p">;</span>
<span class="kn">import</span><span class="w"> </span><span class="nn">org.apache.ibatis.session.SqlSession</span><span class="p">;</span>
<span class="kn">import</span><span class="w"> </span><span class="nn">org.springframework.stereotype.Repository</span><span class="p">;</span>

<span class="kn">import</span><span class="w"> </span><span class="nn">java.io.Writer</span><span class="p">;</span>
<span class="kn">import</span><span class="w"> </span><span class="nn">java.util.function.Consumer</span><span class="p">;</span>

<span class="cm">/**</span>
<span class="cm"> * 仕訳ストリーミングリポジトリ</span>
<span class="cm"> */</span>
<span class="nd">@Repository</span>
<span class="kd">public</span><span class="w"> </span><span class="kd">class</span> <span class="nc">JournalStreamRepository</span><span class="w"> </span><span class="p">{</span>

<span class="w">    </span><span class="kd">private</span><span class="w"> </span><span class="kd">final</span><span class="w"> </span><span class="n">SqlSession</span><span class="w"> </span><span class="n">sqlSession</span><span class="p">;</span>
<span class="w">    </span><span class="kd">private</span><span class="w"> </span><span class="kd">final</span><span class="w"> </span><span class="n">JournalEntryCsvExporter</span><span class="w"> </span><span class="n">exporter</span><span class="p">;</span>

<span class="w">    </span><span class="cm">/**</span>
<span class="cm">     * ストリーミングダウンロード</span>
<span class="cm">     */</span>
<span class="w">    </span><span class="kd">public</span><span class="w"> </span><span class="kt">void</span><span class="w"> </span><span class="nf">streamDownload</span><span class="p">(</span>
<span class="w">            </span><span class="n">Writer</span><span class="w"> </span><span class="n">writer</span><span class="p">,</span>
<span class="w">            </span><span class="n">LocalDate</span><span class="w"> </span><span class="n">startDate</span><span class="p">,</span>
<span class="w">            </span><span class="n">LocalDate</span><span class="w"> </span><span class="n">endDate</span><span class="p">,</span>
<span class="w">            </span><span class="n">Consumer</span><span class="o">&lt;</span><span class="n">JournalEntry</span><span class="o">&gt;</span><span class="w"> </span><span class="n">processor</span><span class="p">)</span><span class="w"> </span><span class="kd">throws</span><span class="w"> </span><span class="n">Exception</span><span class="w"> </span><span class="p">{</span>

<span class="w">        </span><span class="c1">// ヘッダー出力</span>
<span class="w">        </span><span class="n">writer</span><span class="p">.</span><span class="na">write</span><span class="p">(</span><span class="sc">&#39;\uFEFF&#39;</span><span class="p">);</span>
<span class="w">        </span><span class="n">writeLine</span><span class="p">(</span><span class="n">writer</span><span class="p">,</span><span class="w"> </span><span class="n">exporter</span><span class="p">.</span><span class="na">getHeaders</span><span class="p">());</span>

<span class="w">        </span><span class="c1">// カーソルでストリーミング取得</span>
<span class="w">        </span><span class="k">try</span><span class="w"> </span><span class="p">(</span><span class="n">Cursor</span><span class="o">&lt;</span><span class="n">JournalEntry</span><span class="o">&gt;</span><span class="w"> </span><span class="n">cursor</span><span class="w"> </span><span class="o">=</span><span class="w"> </span><span class="n">sqlSession</span><span class="p">.</span><span class="na">selectCursor</span><span class="p">(</span>
<span class="w">                </span><span class="s">&quot;JournalMapper.selectByDateRangeCursor&quot;</span><span class="p">,</span>
<span class="w">                </span><span class="n">Map</span><span class="p">.</span><span class="na">of</span><span class="p">(</span><span class="s">&quot;startDate&quot;</span><span class="p">,</span><span class="w"> </span><span class="n">startDate</span><span class="p">,</span><span class="w"> </span><span class="s">&quot;endDate&quot;</span><span class="p">,</span><span class="w"> </span><span class="n">endDate</span><span class="p">)))</span><span class="w"> </span><span class="p">{</span>

<span class="w">            </span><span class="k">for</span><span class="w"> </span><span class="p">(</span><span class="n">JournalEntry</span><span class="w"> </span><span class="n">entry</span><span class="w"> </span><span class="p">:</span><span class="w"> </span><span class="n">cursor</span><span class="p">)</span><span class="w"> </span><span class="p">{</span>
<span class="w">                </span><span class="n">writeLine</span><span class="p">(</span><span class="n">writer</span><span class="p">,</span><span class="w"> </span><span class="n">exporter</span><span class="p">.</span><span class="na">toRow</span><span class="p">(</span><span class="n">entry</span><span class="p">));</span>

<span class="w">                </span><span class="c1">// 定期的にフラッシュ</span>
<span class="w">                </span><span class="k">if</span><span class="w"> </span><span class="p">(</span><span class="n">cursor</span><span class="p">.</span><span class="na">getCurrentIndex</span><span class="p">()</span><span class="w"> </span><span class="o">%</span><span class="w"> </span><span class="mi">1000</span><span class="w"> </span><span class="o">==</span><span class="w"> </span><span class="mi">0</span><span class="p">)</span><span class="w"> </span><span class="p">{</span>
<span class="w">                    </span><span class="n">writer</span><span class="p">.</span><span class="na">flush</span><span class="p">();</span>
<span class="w">                </span><span class="p">}</span>
<span class="w">            </span><span class="p">}</span>
<span class="w">        </span><span class="p">}</span>

<span class="w">        </span><span class="n">writer</span><span class="p">.</span><span class="na">flush</span><span class="p">();</span>
<span class="w">    </span><span class="p">}</span>

<span class="w">    </span><span class="kd">private</span><span class="w"> </span><span class="kt">void</span><span class="w"> </span><span class="nf">writeLine</span><span class="p">(</span><span class="n">Writer</span><span class="w"> </span><span class="n">writer</span><span class="p">,</span><span class="w"> </span><span class="n">String</span><span class="o">[]</span><span class="w"> </span><span class="n">values</span><span class="p">)</span><span class="w"> </span><span class="kd">throws</span><span class="w"> </span><span class="n">Exception</span><span class="w"> </span><span class="p">{</span>
<span class="w">        </span><span class="n">StringBuilder</span><span class="w"> </span><span class="n">sb</span><span class="w"> </span><span class="o">=</span><span class="w"> </span><span class="k">new</span><span class="w"> </span><span class="n">StringBuilder</span><span class="p">();</span>
<span class="w">        </span><span class="k">for</span><span class="w"> </span><span class="p">(</span><span class="kt">int</span><span class="w"> </span><span class="n">i</span><span class="w"> </span><span class="o">=</span><span class="w"> </span><span class="mi">0</span><span class="p">;</span><span class="w"> </span><span class="n">i</span><span class="w"> </span><span class="o">&lt;</span><span class="w"> </span><span class="n">values</span><span class="p">.</span><span class="na">length</span><span class="p">;</span><span class="w"> </span><span class="n">i</span><span class="o">++</span><span class="p">)</span><span class="w"> </span><span class="p">{</span>
<span class="w">            </span><span class="k">if</span><span class="w"> </span><span class="p">(</span><span class="n">i</span><span class="w"> </span><span class="o">&gt;</span><span class="w"> </span><span class="mi">0</span><span class="p">)</span><span class="w"> </span><span class="n">sb</span><span class="p">.</span><span class="na">append</span><span class="p">(</span><span class="s">&quot;,&quot;</span><span class="p">);</span>
<span class="w">            </span><span class="n">sb</span><span class="p">.</span><span class="na">append</span><span class="p">(</span><span class="n">escapeCsv</span><span class="p">(</span><span class="n">values</span><span class="o">[</span><span class="n">i</span><span class="o">]</span><span class="p">));</span>
<span class="w">        </span><span class="p">}</span>
<span class="w">        </span><span class="n">sb</span><span class="p">.</span><span class="na">append</span><span class="p">(</span><span class="s">&quot;\r\n&quot;</span><span class="p">);</span>
<span class="w">        </span><span class="n">writer</span><span class="p">.</span><span class="na">write</span><span class="p">(</span><span class="n">sb</span><span class="p">.</span><span class="na">toString</span><span class="p">());</span>
<span class="w">    </span><span class="p">}</span>
<span class="p">}</span>
</code></pre></div>
<h3 id="_12">非同期ダウンロード<a class="headerlink" href="#_12" title="Permanent link">&para;</a></h3>
<p>大量データの場合は非同期ダウンロードを提供します。</p>
<div class="highlight"><pre><span></span><code><span class="kn">package</span><span class="w"> </span><span class="nn">com.example.accounting.application.download</span><span class="p">;</span>

<span class="kn">import</span><span class="w"> </span><span class="nn">org.springframework.scheduling.annotation.Async</span><span class="p">;</span>
<span class="kn">import</span><span class="w"> </span><span class="nn">org.springframework.stereotype.Service</span><span class="p">;</span>

<span class="kn">import</span><span class="w"> </span><span class="nn">java.io.FileWriter</span><span class="p">;</span>
<span class="kn">import</span><span class="w"> </span><span class="nn">java.nio.file.Path</span><span class="p">;</span>
<span class="kn">import</span><span class="w"> </span><span class="nn">java.util.UUID</span><span class="p">;</span>
<span class="kn">import</span><span class="w"> </span><span class="nn">java.util.concurrent.CompletableFuture</span><span class="p">;</span>

<span class="cm">/**</span>
<span class="cm"> * 非同期ダウンロードサービス</span>
<span class="cm"> */</span>
<span class="nd">@Service</span>
<span class="kd">public</span><span class="w"> </span><span class="kd">class</span> <span class="nc">AsyncDownloadService</span><span class="w"> </span><span class="p">{</span>

<span class="w">    </span><span class="kd">private</span><span class="w"> </span><span class="kd">final</span><span class="w"> </span><span class="n">DownloadService</span><span class="w"> </span><span class="n">downloadService</span><span class="p">;</span>
<span class="w">    </span><span class="kd">private</span><span class="w"> </span><span class="kd">final</span><span class="w"> </span><span class="n">DownloadJobRepository</span><span class="w"> </span><span class="n">jobRepository</span><span class="p">;</span>

<span class="w">    </span><span class="cm">/**</span>
<span class="cm">     * 非同期ダウンロードを開始</span>
<span class="cm">     */</span>
<span class="w">    </span><span class="kd">public</span><span class="w"> </span><span class="n">String</span><span class="w"> </span><span class="nf">startAsyncDownload</span><span class="p">(</span><span class="n">DownloadCriteria</span><span class="w"> </span><span class="n">criteria</span><span class="p">,</span><span class="w"> </span><span class="n">String</span><span class="w"> </span><span class="n">userId</span><span class="p">)</span><span class="w"> </span><span class="p">{</span>
<span class="w">        </span><span class="n">String</span><span class="w"> </span><span class="n">jobId</span><span class="w"> </span><span class="o">=</span><span class="w"> </span><span class="n">UUID</span><span class="p">.</span><span class="na">randomUUID</span><span class="p">().</span><span class="na">toString</span><span class="p">();</span>

<span class="w">        </span><span class="c1">// ジョブ登録</span>
<span class="w">        </span><span class="n">DownloadJob</span><span class="w"> </span><span class="n">job</span><span class="w"> </span><span class="o">=</span><span class="w"> </span><span class="n">DownloadJob</span><span class="p">.</span><span class="na">create</span><span class="p">(</span><span class="n">jobId</span><span class="p">,</span><span class="w"> </span><span class="n">criteria</span><span class="p">,</span><span class="w"> </span><span class="n">userId</span><span class="p">);</span>
<span class="w">        </span><span class="n">jobRepository</span><span class="p">.</span><span class="na">save</span><span class="p">(</span><span class="n">job</span><span class="p">);</span>

<span class="w">        </span><span class="c1">// 非同期実行</span>
<span class="w">        </span><span class="n">executeAsync</span><span class="p">(</span><span class="n">jobId</span><span class="p">,</span><span class="w"> </span><span class="n">criteria</span><span class="p">);</span>

<span class="w">        </span><span class="k">return</span><span class="w"> </span><span class="n">jobId</span><span class="p">;</span>
<span class="w">    </span><span class="p">}</span>

<span class="w">    </span><span class="nd">@Async</span><span class="p">(</span><span class="s">&quot;downloadTaskExecutor&quot;</span><span class="p">)</span>
<span class="w">    </span><span class="kd">public</span><span class="w"> </span><span class="n">CompletableFuture</span><span class="o">&lt;</span><span class="n">Void</span><span class="o">&gt;</span><span class="w"> </span><span class="nf">executeAsync</span><span class="p">(</span>
<span class="w">            </span><span class="n">String</span><span class="w"> </span><span class="n">jobId</span><span class="p">,</span>
<span class="w">            </span><span class="n">DownloadCriteria</span><span class="w"> </span><span class="n">criteria</span><span class="p">)</span><span class="w"> </span><span class="p">{</span>

<span class="w">        </span><span class="n">DownloadJob</span><span class="w"> </span><span class="n">job</span><span class="w"> </span><span class="o">=</span><span class="w"> </span><span class="n">jobRepository</span><span class="p">.</span><span class="na">findById</span><span class="p">(</span><span class="n">jobId</span><span class="p">).</span><span class="na">orElseThrow</span><span class="p">();</span>

<span class="w">        </span><span class="k">try</span><span class="w"> </span><span class="p">{</span>
<span class="w">            </span><span class="c1">// ステータス更新: 実行中</span>
<span class="w">            </span><span class="n">jobRepository</span><span class="p">.</span><span class="na">save</span><span class="p">(</span><span class="n">job</span><span class="p">.</span><span class="na">start</span><span class="p">());</span>

<span class="w">            </span><span class="c1">// 一時ファイルに出力</span>
<span class="w">            </span><span class="n">Path</span><span class="w"> </span><span class="n">tempFile</span><span class="w"> </span><span class="o">=</span><span class="w"> </span><span class="n">Path</span><span class="p">.</span><span class="na">of</span><span class="p">(</span><span class="s">&quot;/tmp/downloads&quot;</span><span class="p">,</span><span class="w"> </span><span class="n">jobId</span><span class="w"> </span><span class="o">+</span><span class="w"> </span><span class="s">&quot;.csv&quot;</span><span class="p">);</span>
<span class="w">            </span><span class="k">try</span><span class="w"> </span><span class="p">(</span><span class="n">FileWriter</span><span class="w"> </span><span class="n">writer</span><span class="w"> </span><span class="o">=</span><span class="w"> </span><span class="k">new</span><span class="w"> </span><span class="n">FileWriter</span><span class="p">(</span><span class="n">tempFile</span><span class="p">.</span><span class="na">toFile</span><span class="p">()))</span><span class="w"> </span><span class="p">{</span>
<span class="w">                </span><span class="n">downloadService</span><span class="p">.</span><span class="na">download</span><span class="p">(</span><span class="n">writer</span><span class="p">,</span><span class="w"> </span><span class="n">criteria</span><span class="p">);</span>
<span class="w">            </span><span class="p">}</span>

<span class="w">            </span><span class="c1">// ステータス更新: 完了</span>
<span class="w">            </span><span class="n">jobRepository</span><span class="p">.</span><span class="na">save</span><span class="p">(</span><span class="n">job</span><span class="p">.</span><span class="na">complete</span><span class="p">(</span><span class="n">tempFile</span><span class="p">.</span><span class="na">toString</span><span class="p">()));</span>

<span class="w">        </span><span class="p">}</span><span class="w"> </span><span class="k">catch</span><span class="w"> </span><span class="p">(</span><span class="n">Exception</span><span class="w"> </span><span class="n">e</span><span class="p">)</span><span class="w"> </span><span class="p">{</span>
<span class="w">            </span><span class="c1">// ステータス更新: エラー</span>
<span class="w">            </span><span class="n">jobRepository</span><span class="p">.</span><span class="na">save</span><span class="p">(</span><span class="n">job</span><span class="p">.</span><span class="na">fail</span><span class="p">(</span><span class="n">e</span><span class="p">.</span><span class="na">getMessage</span><span class="p">()));</span>
<span class="w">        </span><span class="p">}</span>

<span class="w">        </span><span class="k">return</span><span class="w"> </span><span class="n">CompletableFuture</span><span class="p">.</span><span class="na">completedFuture</span><span class="p">(</span><span class="kc">null</span><span class="p">);</span>
<span class="w">    </span><span class="p">}</span>

<span class="w">    </span><span class="cm">/**</span>
<span class="cm">     * ダウンロードジョブのステータス確認</span>
<span class="cm">     */</span>
<span class="w">    </span><span class="kd">public</span><span class="w"> </span><span class="n">DownloadJob</span><span class="w"> </span><span class="nf">getJobStatus</span><span class="p">(</span><span class="n">String</span><span class="w"> </span><span class="n">jobId</span><span class="p">)</span><span class="w"> </span><span class="p">{</span>
<span class="w">        </span><span class="k">return</span><span class="w"> </span><span class="n">jobRepository</span><span class="p">.</span><span class="na">findById</span><span class="p">(</span><span class="n">jobId</span><span class="p">)</span>
<span class="w">            </span><span class="p">.</span><span class="na">orElseThrow</span><span class="p">(()</span><span class="w"> </span><span class="o">-&gt;</span><span class="w"> </span><span class="k">new</span><span class="w"> </span><span class="n">IllegalArgumentException</span><span class="p">(</span>
<span class="w">                </span><span class="s">&quot;ダウンロードジョブが見つかりません: &quot;</span><span class="w"> </span><span class="o">+</span><span class="w"> </span><span class="n">jobId</span>
<span class="w">            </span><span class="p">));</span>
<span class="w">    </span><span class="p">}</span>

<span class="w">    </span><span class="cm">/**</span>
<span class="cm">     * ダウンロードファイル取得</span>
<span class="cm">     */</span>
<span class="w">    </span><span class="kd">public</span><span class="w"> </span><span class="n">Path</span><span class="w"> </span><span class="nf">getDownloadFile</span><span class="p">(</span><span class="n">String</span><span class="w"> </span><span class="n">jobId</span><span class="p">)</span><span class="w"> </span><span class="p">{</span>
<span class="w">        </span><span class="n">DownloadJob</span><span class="w"> </span><span class="n">job</span><span class="w"> </span><span class="o">=</span><span class="w"> </span><span class="n">getJobStatus</span><span class="p">(</span><span class="n">jobId</span><span class="p">);</span>
<span class="w">        </span><span class="k">if</span><span class="w"> </span><span class="p">(</span><span class="n">job</span><span class="p">.</span><span class="na">getStatus</span><span class="p">()</span><span class="w"> </span><span class="o">!=</span><span class="w"> </span><span class="n">DownloadJobStatus</span><span class="p">.</span><span class="na">COMPLETED</span><span class="p">)</span><span class="w"> </span><span class="p">{</span>
<span class="w">            </span><span class="k">throw</span><span class="w"> </span><span class="k">new</span><span class="w"> </span><span class="n">IllegalStateException</span><span class="p">(</span><span class="s">&quot;ダウンロードが完了していません&quot;</span><span class="p">);</span>
<span class="w">        </span><span class="p">}</span>
<span class="w">        </span><span class="k">return</span><span class="w"> </span><span class="n">Path</span><span class="p">.</span><span class="na">of</span><span class="p">(</span><span class="n">job</span><span class="p">.</span><span class="na">getFilePath</span><span class="p">());</span>
<span class="w">    </span><span class="p">}</span>
<span class="p">}</span>
</code></pre></div>
<h3 id="_13">ダウンロードジョブ<a class="headerlink" href="#_13" title="Permanent link">&para;</a></h3>
<div class="highlight"><pre><span></span><code><span class="kn">package</span><span class="w"> </span><span class="nn">com.example.accounting.application.download</span><span class="p">;</span>

<span class="kn">import</span><span class="w"> </span><span class="nn">lombok.Value</span><span class="p">;</span>
<span class="kn">import</span><span class="w"> </span><span class="nn">lombok.With</span><span class="p">;</span>
<span class="kn">import</span><span class="w"> </span><span class="nn">java.time.LocalDateTime</span><span class="p">;</span>

<span class="cm">/**</span>
<span class="cm"> * ダウンロードジョブ</span>
<span class="cm"> */</span>
<span class="nd">@Value</span>
<span class="nd">@With</span>
<span class="kd">public</span><span class="w"> </span><span class="kd">class</span> <span class="nc">DownloadJob</span><span class="w"> </span><span class="p">{</span>

<span class="w">    </span><span class="n">String</span><span class="w"> </span><span class="n">jobId</span><span class="p">;</span>
<span class="w">    </span><span class="n">DownloadTarget</span><span class="w"> </span><span class="n">target</span><span class="p">;</span>
<span class="w">    </span><span class="n">String</span><span class="w"> </span><span class="n">userId</span><span class="p">;</span>
<span class="w">    </span><span class="n">DownloadJobStatus</span><span class="w"> </span><span class="n">status</span><span class="p">;</span>
<span class="w">    </span><span class="n">LocalDateTime</span><span class="w"> </span><span class="n">startedAt</span><span class="p">;</span>
<span class="w">    </span><span class="n">LocalDateTime</span><span class="w"> </span><span class="n">completedAt</span><span class="p">;</span>
<span class="w">    </span><span class="n">String</span><span class="w"> </span><span class="n">filePath</span><span class="p">;</span>
<span class="w">    </span><span class="n">String</span><span class="w"> </span><span class="n">errorMessage</span><span class="p">;</span>

<span class="w">    </span><span class="kd">public</span><span class="w"> </span><span class="kd">static</span><span class="w"> </span><span class="n">DownloadJob</span><span class="w"> </span><span class="nf">create</span><span class="p">(</span>
<span class="w">            </span><span class="n">String</span><span class="w"> </span><span class="n">jobId</span><span class="p">,</span>
<span class="w">            </span><span class="n">DownloadCriteria</span><span class="w"> </span><span class="n">criteria</span><span class="p">,</span>
<span class="w">            </span><span class="n">String</span><span class="w"> </span><span class="n">userId</span><span class="p">)</span><span class="w"> </span><span class="p">{</span>
<span class="w">        </span><span class="k">return</span><span class="w"> </span><span class="k">new</span><span class="w"> </span><span class="n">DownloadJob</span><span class="p">(</span>
<span class="w">            </span><span class="n">jobId</span><span class="p">,</span>
<span class="w">            </span><span class="n">criteria</span><span class="p">.</span><span class="na">getTarget</span><span class="p">(),</span>
<span class="w">            </span><span class="n">userId</span><span class="p">,</span>
<span class="w">            </span><span class="n">DownloadJobStatus</span><span class="p">.</span><span class="na">PENDING</span><span class="p">,</span>
<span class="w">            </span><span class="kc">null</span><span class="p">,</span>
<span class="w">            </span><span class="kc">null</span><span class="p">,</span>
<span class="w">            </span><span class="kc">null</span><span class="p">,</span>
<span class="w">            </span><span class="kc">null</span>
<span class="w">        </span><span class="p">);</span>
<span class="w">    </span><span class="p">}</span>

<span class="w">    </span><span class="kd">public</span><span class="w"> </span><span class="n">DownloadJob</span><span class="w"> </span><span class="nf">start</span><span class="p">()</span><span class="w"> </span><span class="p">{</span>
<span class="w">        </span><span class="k">return</span><span class="w"> </span><span class="k">this</span>
<span class="w">            </span><span class="p">.</span><span class="na">withStatus</span><span class="p">(</span><span class="n">DownloadJobStatus</span><span class="p">.</span><span class="na">RUNNING</span><span class="p">)</span>
<span class="w">            </span><span class="p">.</span><span class="na">withStartedAt</span><span class="p">(</span><span class="n">LocalDateTime</span><span class="p">.</span><span class="na">now</span><span class="p">());</span>
<span class="w">    </span><span class="p">}</span>

<span class="w">    </span><span class="kd">public</span><span class="w"> </span><span class="n">DownloadJob</span><span class="w"> </span><span class="nf">complete</span><span class="p">(</span><span class="n">String</span><span class="w"> </span><span class="n">filePath</span><span class="p">)</span><span class="w"> </span><span class="p">{</span>
<span class="w">        </span><span class="k">return</span><span class="w"> </span><span class="k">this</span>
<span class="w">            </span><span class="p">.</span><span class="na">withStatus</span><span class="p">(</span><span class="n">DownloadJobStatus</span><span class="p">.</span><span class="na">COMPLETED</span><span class="p">)</span>
<span class="w">            </span><span class="p">.</span><span class="na">withCompletedAt</span><span class="p">(</span><span class="n">LocalDateTime</span><span class="p">.</span><span class="na">now</span><span class="p">())</span>
<span class="w">            </span><span class="p">.</span><span class="na">withFilePath</span><span class="p">(</span><span class="n">filePath</span><span class="p">);</span>
<span class="w">    </span><span class="p">}</span>

<span class="w">    </span><span class="kd">public</span><span class="w"> </span><span class="n">DownloadJob</span><span class="w"> </span><span class="nf">fail</span><span class="p">(</span><span class="n">String</span><span class="w"> </span><span class="n">errorMessage</span><span class="p">)</span><span class="w"> </span><span class="p">{</span>
<span class="w">        </span><span class="k">return</span><span class="w"> </span><span class="k">this</span>
<span class="w">            </span><span class="p">.</span><span class="na">withStatus</span><span class="p">(</span><span class="n">DownloadJobStatus</span><span class="p">.</span><span class="na">FAILED</span><span class="p">)</span>
<span class="w">            </span><span class="p">.</span><span class="na">withCompletedAt</span><span class="p">(</span><span class="n">LocalDateTime</span><span class="p">.</span><span class="na">now</span><span class="p">())</span>
<span class="w">            </span><span class="p">.</span><span class="na">withErrorMessage</span><span class="p">(</span><span class="n">errorMessage</span><span class="p">);</span>
<span class="w">    </span><span class="p">}</span>
<span class="p">}</span>

<span class="kd">public</span><span class="w"> </span><span class="kd">enum</span><span class="w"> </span><span class="n">DownloadJobStatus</span><span class="w"> </span><span class="p">{</span>
<span class="w">    </span><span class="n">PENDING</span><span class="p">(</span><span class="s">&quot;待機中&quot;</span><span class="p">),</span>
<span class="w">    </span><span class="n">RUNNING</span><span class="p">(</span><span class="s">&quot;実行中&quot;</span><span class="p">),</span>
<span class="w">    </span><span class="n">COMPLETED</span><span class="p">(</span><span class="s">&quot;完了&quot;</span><span class="p">),</span>
<span class="w">    </span><span class="n">FAILED</span><span class="p">(</span><span class="s">&quot;失敗&quot;</span><span class="p">);</span>

<span class="w">    </span><span class="kd">private</span><span class="w"> </span><span class="kd">final</span><span class="w"> </span><span class="n">String</span><span class="w"> </span><span class="n">displayName</span><span class="p">;</span>

<span class="w">    </span><span class="n">DownloadJobStatus</span><span class="p">(</span><span class="n">String</span><span class="w"> </span><span class="n">displayName</span><span class="p">)</span><span class="w"> </span><span class="p">{</span>
<span class="w">        </span><span class="k">this</span><span class="p">.</span><span class="na">displayName</span><span class="w"> </span><span class="o">=</span><span class="w"> </span><span class="n">displayName</span><span class="p">;</span>
<span class="w">    </span><span class="p">}</span>

<span class="w">    </span><span class="kd">public</span><span class="w"> </span><span class="n">String</span><span class="w"> </span><span class="nf">getDisplayName</span><span class="p">()</span><span class="w"> </span><span class="p">{</span>
<span class="w">        </span><span class="k">return</span><span class="w"> </span><span class="n">displayName</span><span class="p">;</span>
<span class="w">    </span><span class="p">}</span>
<span class="p">}</span>
</code></pre></div>
<hr />
<h2 id="268-excel">26.8 Excel形式でのダウンロード<a class="headerlink" href="#268-excel" title="Permanent link">&para;</a></h2>
<h3 id="excel">Excel出力の実装<a class="headerlink" href="#excel" title="Permanent link">&para;</a></h3>
<p>財務諸表などはExcel形式でのダウンロードも提供します。</p>
<div class="highlight"><pre><span></span><code><span class="kn">package</span><span class="w"> </span><span class="nn">com.example.accounting.infrastructure.export</span><span class="p">;</span>

<span class="kn">import</span><span class="w"> </span><span class="nn">org.apache.poi.ss.usermodel.*</span><span class="p">;</span>
<span class="kn">import</span><span class="w"> </span><span class="nn">org.apache.poi.xssf.usermodel.XSSFWorkbook</span><span class="p">;</span>
<span class="kn">import</span><span class="w"> </span><span class="nn">org.springframework.stereotype.Component</span><span class="p">;</span>

<span class="kn">import</span><span class="w"> </span><span class="nn">java.io.OutputStream</span><span class="p">;</span>
<span class="kn">import</span><span class="w"> </span><span class="nn">java.util.List</span><span class="p">;</span>

<span class="cm">/**</span>
<span class="cm"> * 財務諸表Excelエクスポータ</span>
<span class="cm"> */</span>
<span class="nd">@Component</span>
<span class="kd">public</span><span class="w"> </span><span class="kd">class</span> <span class="nc">FinancialStatementExcelExporter</span><span class="w"> </span><span class="p">{</span>

<span class="w">    </span><span class="cm">/**</span>
<span class="cm">     * 貸借対照表をExcel出力</span>
<span class="cm">     */</span>
<span class="w">    </span><span class="kd">public</span><span class="w"> </span><span class="kt">void</span><span class="w"> </span><span class="nf">exportBalanceSheet</span><span class="p">(</span>
<span class="w">            </span><span class="n">OutputStream</span><span class="w"> </span><span class="n">outputStream</span><span class="p">,</span>
<span class="w">            </span><span class="n">BalanceSheet</span><span class="w"> </span><span class="n">balanceSheet</span><span class="p">)</span><span class="w"> </span><span class="kd">throws</span><span class="w"> </span><span class="n">Exception</span><span class="w"> </span><span class="p">{</span>

<span class="w">        </span><span class="k">try</span><span class="w"> </span><span class="p">(</span><span class="n">Workbook</span><span class="w"> </span><span class="n">workbook</span><span class="w"> </span><span class="o">=</span><span class="w"> </span><span class="k">new</span><span class="w"> </span><span class="n">XSSFWorkbook</span><span class="p">())</span><span class="w"> </span><span class="p">{</span>
<span class="w">            </span><span class="n">Sheet</span><span class="w"> </span><span class="n">sheet</span><span class="w"> </span><span class="o">=</span><span class="w"> </span><span class="n">workbook</span><span class="p">.</span><span class="na">createSheet</span><span class="p">(</span><span class="s">&quot;貸借対照表&quot;</span><span class="p">);</span>

<span class="w">            </span><span class="c1">// ヘッダースタイル</span>
<span class="w">            </span><span class="n">CellStyle</span><span class="w"> </span><span class="n">headerStyle</span><span class="w"> </span><span class="o">=</span><span class="w"> </span><span class="n">createHeaderStyle</span><span class="p">(</span><span class="n">workbook</span><span class="p">);</span>
<span class="w">            </span><span class="n">CellStyle</span><span class="w"> </span><span class="n">amountStyle</span><span class="w"> </span><span class="o">=</span><span class="w"> </span><span class="n">createAmountStyle</span><span class="p">(</span><span class="n">workbook</span><span class="p">);</span>

<span class="w">            </span><span class="c1">// タイトル</span>
<span class="w">            </span><span class="n">Row</span><span class="w"> </span><span class="n">titleRow</span><span class="w"> </span><span class="o">=</span><span class="w"> </span><span class="n">sheet</span><span class="p">.</span><span class="na">createRow</span><span class="p">(</span><span class="mi">0</span><span class="p">);</span>
<span class="w">            </span><span class="n">Cell</span><span class="w"> </span><span class="n">titleCell</span><span class="w"> </span><span class="o">=</span><span class="w"> </span><span class="n">titleRow</span><span class="p">.</span><span class="na">createCell</span><span class="p">(</span><span class="mi">0</span><span class="p">);</span>
<span class="w">            </span><span class="n">titleCell</span><span class="p">.</span><span class="na">setCellValue</span><span class="p">(</span><span class="s">&quot;貸借対照表&quot;</span><span class="p">);</span>
<span class="w">            </span><span class="n">titleCell</span><span class="p">.</span><span class="na">setCellStyle</span><span class="p">(</span><span class="n">headerStyle</span><span class="p">);</span>

<span class="w">            </span><span class="c1">// 期間</span>
<span class="w">            </span><span class="n">Row</span><span class="w"> </span><span class="n">periodRow</span><span class="w"> </span><span class="o">=</span><span class="w"> </span><span class="n">sheet</span><span class="p">.</span><span class="na">createRow</span><span class="p">(</span><span class="mi">1</span><span class="p">);</span>
<span class="w">            </span><span class="n">periodRow</span><span class="p">.</span><span class="na">createCell</span><span class="p">(</span><span class="mi">0</span><span class="p">).</span><span class="na">setCellValue</span><span class="p">(</span>
<span class="w">                </span><span class="n">String</span><span class="p">.</span><span class="na">format</span><span class="p">(</span><span class="s">&quot;%d年度&quot;</span><span class="p">,</span><span class="w"> </span><span class="n">balanceSheet</span><span class="p">.</span><span class="na">getFiscalYear</span><span class="p">())</span>
<span class="w">            </span><span class="p">);</span>

<span class="w">            </span><span class="c1">// ヘッダー行</span>
<span class="w">            </span><span class="kt">int</span><span class="w"> </span><span class="n">rowNum</span><span class="w"> </span><span class="o">=</span><span class="w"> </span><span class="mi">3</span><span class="p">;</span>
<span class="w">            </span><span class="n">Row</span><span class="w"> </span><span class="n">headerRow</span><span class="w"> </span><span class="o">=</span><span class="w"> </span><span class="n">sheet</span><span class="p">.</span><span class="na">createRow</span><span class="p">(</span><span class="n">rowNum</span><span class="o">++</span><span class="p">);</span>
<span class="w">            </span><span class="n">String</span><span class="o">[]</span><span class="w"> </span><span class="n">headers</span><span class="w"> </span><span class="o">=</span><span class="w"> </span><span class="p">{</span><span class="s">&quot;区分&quot;</span><span class="p">,</span><span class="w"> </span><span class="s">&quot;科目&quot;</span><span class="p">,</span><span class="w"> </span><span class="s">&quot;金額&quot;</span><span class="p">};</span>
<span class="w">            </span><span class="k">for</span><span class="w"> </span><span class="p">(</span><span class="kt">int</span><span class="w"> </span><span class="n">i</span><span class="w"> </span><span class="o">=</span><span class="w"> </span><span class="mi">0</span><span class="p">;</span><span class="w"> </span><span class="n">i</span><span class="w"> </span><span class="o">&lt;</span><span class="w"> </span><span class="n">headers</span><span class="p">.</span><span class="na">length</span><span class="p">;</span><span class="w"> </span><span class="n">i</span><span class="o">++</span><span class="p">)</span><span class="w"> </span><span class="p">{</span>
<span class="w">                </span><span class="n">Cell</span><span class="w"> </span><span class="n">cell</span><span class="w"> </span><span class="o">=</span><span class="w"> </span><span class="n">headerRow</span><span class="p">.</span><span class="na">createCell</span><span class="p">(</span><span class="n">i</span><span class="p">);</span>
<span class="w">                </span><span class="n">cell</span><span class="p">.</span><span class="na">setCellValue</span><span class="p">(</span><span class="n">headers</span><span class="o">[</span><span class="n">i</span><span class="o">]</span><span class="p">);</span>
<span class="w">                </span><span class="n">cell</span><span class="p">.</span><span class="na">setCellStyle</span><span class="p">(</span><span class="n">headerStyle</span><span class="p">);</span>
<span class="w">            </span><span class="p">}</span>

<span class="w">            </span><span class="c1">// 資産の部</span>
<span class="w">            </span><span class="n">rowNum</span><span class="w"> </span><span class="o">=</span><span class="w"> </span><span class="n">writeSection</span><span class="p">(</span><span class="n">sheet</span><span class="p">,</span><span class="w"> </span><span class="n">rowNum</span><span class="p">,</span><span class="w"> </span><span class="s">&quot;資産の部&quot;</span><span class="p">,</span>
<span class="w">                </span><span class="n">balanceSheet</span><span class="p">.</span><span class="na">getAssets</span><span class="p">(),</span><span class="w"> </span><span class="n">amountStyle</span><span class="p">);</span>

<span class="w">            </span><span class="c1">// 負債の部</span>
<span class="w">            </span><span class="n">rowNum</span><span class="w"> </span><span class="o">=</span><span class="w"> </span><span class="n">writeSection</span><span class="p">(</span><span class="n">sheet</span><span class="p">,</span><span class="w"> </span><span class="n">rowNum</span><span class="p">,</span><span class="w"> </span><span class="s">&quot;負債の部&quot;</span><span class="p">,</span>
<span class="w">                </span><span class="n">balanceSheet</span><span class="p">.</span><span class="na">getLiabilities</span><span class="p">(),</span><span class="w"> </span><span class="n">amountStyle</span><span class="p">);</span>

<span class="w">            </span><span class="c1">// 純資産の部</span>
<span class="w">            </span><span class="n">rowNum</span><span class="w"> </span><span class="o">=</span><span class="w"> </span><span class="n">writeSection</span><span class="p">(</span><span class="n">sheet</span><span class="p">,</span><span class="w"> </span><span class="n">rowNum</span><span class="p">,</span><span class="w"> </span><span class="s">&quot;純資産の部&quot;</span><span class="p">,</span>
<span class="w">                </span><span class="n">balanceSheet</span><span class="p">.</span><span class="na">getEquity</span><span class="p">(),</span><span class="w"> </span><span class="n">amountStyle</span><span class="p">);</span>

<span class="w">            </span><span class="c1">// 列幅調整</span>
<span class="w">            </span><span class="n">sheet</span><span class="p">.</span><span class="na">autoSizeColumn</span><span class="p">(</span><span class="mi">0</span><span class="p">);</span>
<span class="w">            </span><span class="n">sheet</span><span class="p">.</span><span class="na">autoSizeColumn</span><span class="p">(</span><span class="mi">1</span><span class="p">);</span>
<span class="w">            </span><span class="n">sheet</span><span class="p">.</span><span class="na">setColumnWidth</span><span class="p">(</span><span class="mi">2</span><span class="p">,</span><span class="w"> </span><span class="mi">15</span><span class="w"> </span><span class="o">*</span><span class="w"> </span><span class="mi">256</span><span class="p">);</span>

<span class="w">            </span><span class="n">workbook</span><span class="p">.</span><span class="na">write</span><span class="p">(</span><span class="n">outputStream</span><span class="p">);</span>
<span class="w">        </span><span class="p">}</span>
<span class="w">    </span><span class="p">}</span>

<span class="w">    </span><span class="kd">private</span><span class="w"> </span><span class="kt">int</span><span class="w"> </span><span class="nf">writeSection</span><span class="p">(</span>
<span class="w">            </span><span class="n">Sheet</span><span class="w"> </span><span class="n">sheet</span><span class="p">,</span>
<span class="w">            </span><span class="kt">int</span><span class="w"> </span><span class="n">startRow</span><span class="p">,</span>
<span class="w">            </span><span class="n">String</span><span class="w"> </span><span class="n">sectionName</span><span class="p">,</span>
<span class="w">            </span><span class="n">List</span><span class="o">&lt;</span><span class="n">BalanceSheetLine</span><span class="o">&gt;</span><span class="w"> </span><span class="n">lines</span><span class="p">,</span>
<span class="w">            </span><span class="n">CellStyle</span><span class="w"> </span><span class="n">amountStyle</span><span class="p">)</span><span class="w"> </span><span class="p">{</span>

<span class="w">        </span><span class="kt">int</span><span class="w"> </span><span class="n">rowNum</span><span class="w"> </span><span class="o">=</span><span class="w"> </span><span class="n">startRow</span><span class="p">;</span>

<span class="w">        </span><span class="c1">// セクションヘッダー</span>
<span class="w">        </span><span class="n">Row</span><span class="w"> </span><span class="n">sectionRow</span><span class="w"> </span><span class="o">=</span><span class="w"> </span><span class="n">sheet</span><span class="p">.</span><span class="na">createRow</span><span class="p">(</span><span class="n">rowNum</span><span class="o">++</span><span class="p">);</span>
<span class="w">        </span><span class="n">sectionRow</span><span class="p">.</span><span class="na">createCell</span><span class="p">(</span><span class="mi">0</span><span class="p">).</span><span class="na">setCellValue</span><span class="p">(</span><span class="n">sectionName</span><span class="p">);</span>

<span class="w">        </span><span class="c1">// 明細行</span>
<span class="w">        </span><span class="k">for</span><span class="w"> </span><span class="p">(</span><span class="n">BalanceSheetLine</span><span class="w"> </span><span class="n">line</span><span class="w"> </span><span class="p">:</span><span class="w"> </span><span class="n">lines</span><span class="p">)</span><span class="w"> </span><span class="p">{</span>
<span class="w">            </span><span class="n">Row</span><span class="w"> </span><span class="n">row</span><span class="w"> </span><span class="o">=</span><span class="w"> </span><span class="n">sheet</span><span class="p">.</span><span class="na">createRow</span><span class="p">(</span><span class="n">rowNum</span><span class="o">++</span><span class="p">);</span>
<span class="w">            </span><span class="n">row</span><span class="p">.</span><span class="na">createCell</span><span class="p">(</span><span class="mi">1</span><span class="p">).</span><span class="na">setCellValue</span><span class="p">(</span><span class="n">line</span><span class="p">.</span><span class="na">getAccountName</span><span class="p">());</span>

<span class="w">            </span><span class="n">Cell</span><span class="w"> </span><span class="n">amountCell</span><span class="w"> </span><span class="o">=</span><span class="w"> </span><span class="n">row</span><span class="p">.</span><span class="na">createCell</span><span class="p">(</span><span class="mi">2</span><span class="p">);</span>
<span class="w">            </span><span class="n">amountCell</span><span class="p">.</span><span class="na">setCellValue</span><span class="p">(</span><span class="n">line</span><span class="p">.</span><span class="na">getAmount</span><span class="p">().</span><span class="na">doubleValue</span><span class="p">());</span>
<span class="w">            </span><span class="n">amountCell</span><span class="p">.</span><span class="na">setCellStyle</span><span class="p">(</span><span class="n">amountStyle</span><span class="p">);</span>
<span class="w">        </span><span class="p">}</span>

<span class="w">        </span><span class="k">return</span><span class="w"> </span><span class="n">rowNum</span><span class="w"> </span><span class="o">+</span><span class="w"> </span><span class="mi">1</span><span class="p">;</span><span class="w"> </span><span class="c1">// 空行を追加</span>
<span class="w">    </span><span class="p">}</span>

<span class="w">    </span><span class="kd">private</span><span class="w"> </span><span class="n">CellStyle</span><span class="w"> </span><span class="nf">createHeaderStyle</span><span class="p">(</span><span class="n">Workbook</span><span class="w"> </span><span class="n">workbook</span><span class="p">)</span><span class="w"> </span><span class="p">{</span>
<span class="w">        </span><span class="n">CellStyle</span><span class="w"> </span><span class="n">style</span><span class="w"> </span><span class="o">=</span><span class="w"> </span><span class="n">workbook</span><span class="p">.</span><span class="na">createCellStyle</span><span class="p">();</span>
<span class="w">        </span><span class="n">Font</span><span class="w"> </span><span class="n">font</span><span class="w"> </span><span class="o">=</span><span class="w"> </span><span class="n">workbook</span><span class="p">.</span><span class="na">createFont</span><span class="p">();</span>
<span class="w">        </span><span class="n">font</span><span class="p">.</span><span class="na">setBold</span><span class="p">(</span><span class="kc">true</span><span class="p">);</span>
<span class="w">        </span><span class="n">style</span><span class="p">.</span><span class="na">setFont</span><span class="p">(</span><span class="n">font</span><span class="p">);</span>
<span class="w">        </span><span class="n">style</span><span class="p">.</span><span class="na">setFillForegroundColor</span><span class="p">(</span><span class="n">IndexedColors</span><span class="p">.</span><span class="na">GREY_25_PERCENT</span><span class="p">.</span><span class="na">getIndex</span><span class="p">());</span>
<span class="w">        </span><span class="n">style</span><span class="p">.</span><span class="na">setFillPattern</span><span class="p">(</span><span class="n">FillPatternType</span><span class="p">.</span><span class="na">SOLID_FOREGROUND</span><span class="p">);</span>
<span class="w">        </span><span class="k">return</span><span class="w"> </span><span class="n">style</span><span class="p">;</span>
<span class="w">    </span><span class="p">}</span>

<span class="w">    </span><span class="kd">private</span><span class="w"> </span><span class="n">CellStyle</span><span class="w"> </span><span class="nf">createAmountStyle</span><span class="p">(</span><span class="n">Workbook</span><span class="w"> </span><span class="n">workbook</span><span class="p">)</span><span class="w"> </span><span class="p">{</span>
<span class="w">        </span><span class="n">CellStyle</span><span class="w"> </span><span class="n">style</span><span class="w"> </span><span class="o">=</span><span class="w"> </span><span class="n">workbook</span><span class="p">.</span><span class="na">createCellStyle</span><span class="p">();</span>
<span class="w">        </span><span class="n">DataFormat</span><span class="w"> </span><span class="n">format</span><span class="w"> </span><span class="o">=</span><span class="w"> </span><span class="n">workbook</span><span class="p">.</span><span class="na">createDataFormat</span><span class="p">();</span>
<span class="w">        </span><span class="n">style</span><span class="p">.</span><span class="na">setDataFormat</span><span class="p">(</span><span class="n">format</span><span class="p">.</span><span class="na">getFormat</span><span class="p">(</span><span class="s">&quot;#,##0&quot;</span><span class="p">));</span>
<span class="w">        </span><span class="n">style</span><span class="p">.</span><span class="na">setAlignment</span><span class="p">(</span><span class="n">HorizontalAlignment</span><span class="p">.</span><span class="na">RIGHT</span><span class="p">);</span>
<span class="w">        </span><span class="k">return</span><span class="w"> </span><span class="n">style</span><span class="p">;</span>
<span class="w">    </span><span class="p">}</span>
<span class="p">}</span>
</code></pre></div>
<hr />
<h2 id="_14">まとめ<a class="headerlink" href="#_14" title="Permanent link">&para;</a></h2>
<p>本章では、財務会計システムのデータダウンロード機能について解説しました。</p>
<h3 id="_15">重要なポイント<a class="headerlink" href="#_15" title="Permanent link">&para;</a></h3>
<ol>
<li>
<p><strong>ダウンロード対象の網羅</strong>: マスタデータ、トランザクションデータ、財務諸表、分析データなど、システムで管理するすべてのデータをダウンロード可能にしています。</p>
</li>
<li>
<p><strong>権限によるアクセス制御</strong>: ダウンロード対象ごとに必要な権限を定義し、財務分析や監査ログなど機密性の高いデータへのアクセスを制限しています。</p>
</li>
<li>
<p><strong>大量データ対応</strong>: ストリーミング出力や非同期ダウンロードにより、大量データでもメモリ効率よくダウンロードできます。</p>
</li>
<li>
<p><strong>複数フォーマット対応</strong>: CSV形式に加えて、財務諸表などはExcel形式でのダウンロードも提供し、利用者の利便性を高めています。</p>
</li>
</ol>
<h3 id="_16">ダウンロード機能の用途<a class="headerlink" href="#_16" title="Permanent link">&para;</a></h3>
<table>
<thead>
<tr>
<th>用途</th>
<th>対象データ</th>
<th>形式</th>
</tr>
</thead>
<tbody>
<tr>
<td>会計監査</td>
<td>仕訳、元帳、財務諸表</td>
<td>CSV/Excel</td>
</tr>
<tr>
<td>税務申告</td>
<td>仕訳、勘定科目、財務諸表</td>
<td>CSV</td>
</tr>
<tr>
<td>経営分析</td>
<td>財務分析、月次推移</td>
<td>Excel</td>
</tr>
<tr>
<td>バックアップ</td>
<td>全データ</td>
<td>CSV</td>
</tr>
<tr>
<td>外部連携</td>
<td>仕訳、元帳</td>
<td>CSV</td>
</tr>
</tbody>
</table>
<p>次章では、監査ログとトレーサビリティについて解説します。</p>












                
              </article>
            </div>
          
          
<script>var target=document.getElementById(location.hash.slice(1));target&&target.name&&(target.checked=target.name.startsWith("__tabbed_"))</script>
        </div>
        
      </main>
      
        <footer class="md-footer">
  
  <div class="md-footer-meta md-typeset">
    <div class="md-footer-meta__inner md-grid">
      <div class="md-copyright">
  
  
    Made with
    <a href="https://squidfunk.github.io/mkdocs-material/" target="_blank" rel="noopener">
      Material for MkDocs
    </a>
  
</div>
      
        
<div class="md-social">
  
    
    
    
    
    <a href="https://github.com/k2works/case-study-accounting" target="_blank" rel="noopener" title="財務会計システム ケーススタディ" class="md-social__link">
      <svg xmlns="http://www.w3.org/2000/svg" viewBox="0 0 512 512"><!--! Font Awesome Free 7.1.0 by @fontawesome - https://fontawesome.com License - https://fontawesome.com/license/free (Icons: CC BY 4.0, Fonts: SIL OFL 1.1, Code: MIT License) Copyright 2025 Fonticons, Inc.--><path d="M173.9 397.4c0 2-2.3 3.6-5.2 3.6-3.3.3-5.6-1.3-5.6-3.6 0-2 2.3-3.6 5.2-3.6 3-.3 5.6 1.3 5.6 3.6m-31.1-4.5c-.7 2 1.3 4.3 4.3 4.9 2.6 1 5.6 0 6.2-2s-1.3-4.3-4.3-5.2c-2.6-.7-5.5.3-6.2 2.3m44.2-1.7c-2.9.7-4.9 2.6-4.6 4.9.3 2 2.9 3.3 5.9 2.6 2.9-.7 4.9-2.6 4.6-4.6-.3-1.9-3-3.2-5.9-2.9M252.8 8C114.1 8 8 113.3 8 252c0 110.9 69.8 205.8 169.5 239.2 12.8 2.3 17.3-5.6 17.3-12.1 0-6.2-.3-40.4-.3-61.4 0 0-70 15-84.7-29.8 0 0-11.4-29.1-27.8-36.6 0 0-22.9-15.7 1.6-15.4 0 0 24.9 2 38.6 25.8 21.9 38.6 58.6 27.5 72.9 20.9 2.3-16 8.8-27.1 16-33.7-55.9-6.2-112.3-14.3-112.3-110.5 0-27.5 7.6-41.3 23.6-58.9-2.6-6.5-11.1-33.3 2.6-67.9 20.9-6.5 69 27 69 27 20-5.6 41.5-8.5 62.8-8.5s42.8 2.9 62.8 8.5c0 0 48.1-33.6 69-27 13.7 34.7 5.2 61.4 2.6 67.9 16 17.7 25.8 31.5 25.8 58.9 0 96.5-58.9 104.2-114.8 110.5 9.2 7.9 17 22.9 17 46.4 0 33.7-.3 75.4-.3 83.6 0 6.5 4.6 14.4 17.3 12.1C436.2 457.8 504 362.9 504 252 504 113.3 391.5 8 252.8 8M105.2 352.9c-1.3 1-1 3.3.7 5.2 1.6 1.6 3.9 2.3 5.2 1 1.3-1 1-3.3-.7-5.2-1.6-1.6-3.9-2.3-5.2-1m-10.8-8.1c-.7 1.3.3 2.9 2.3 3.9 1.6 1 3.6.7 4.3-.7.7-1.3-.3-2.9-2.3-3.9-2-.6-3.6-.3-4.3.7m32.4 35.6c-1.6 1.3-1 4.3 1.3 6.2 2.3 2.3 5.2 2.6 6.5 1 1.3-1.3.7-4.3-1.3-6.2-2.2-2.3-5.2-2.6-6.5-1m-11.4-14.7c-1.6 1-1.6 3.6 0 5.9s4.3 3.3 5.6 2.3c1.6-1.3 1.6-3.9 0-6.2-1.4-2.3-4-3.3-5.6-2"/></svg>
    </a>
  
</div>
      
    </div>
  </div>
</footer>
      
    </div>
    <div class="md-dialog" data-md-component="dialog">
      <div class="md-dialog__inner md-typeset"></div>
    </div>
    
    
    
      
      
      <script id="__config" type="application/json">{"annotate": null, "base": "../../..", "features": ["navigation.tabs", "navigation.sections", "toc.integrate", "search.suggest", "search.highlight"], "search": "../../../assets/javascripts/workers/search.2c215733.min.js", "tags": null, "translations": {"clipboard.copied": "Copied to clipboard", "clipboard.copy": "Copy to clipboard", "search.result.more.one": "1 more on this page", "search.result.more.other": "# more on this page", "search.result.none": "No matching documents", "search.result.one": "1 matching document", "search.result.other": "# matching documents", "search.result.placeholder": "Type to start searching", "search.result.term.missing": "Missing", "select.version": "Select version"}, "version": null}</script>
    
    
      <script src="../../../assets/javascripts/bundle.79ae519e.min.js"></script>
      
        <script src="https://cdn.jsdelivr.net/npm/mermaid@10.6.1/dist/mermaid.min.js"></script>
      
        <script src="../../../assets/js/extra.js"></script>
      
    
  </body>
</html>