
<!doctype html>
<html lang="en" class="no-js">
  <head>
    
      <meta charset="utf-8">
      <meta name="viewport" content="width=device-width,initial-scale=1">
      
        <meta name="description" content="財務会計システムの設計・開発ドキュメント">
      
      
        <meta name="author" content="Project Team">
      
      
      
        <link rel="prev" href="../chapter22/">
      
      
        <link rel="next" href="../chapter24/">
      
      
        
      
      
      <link rel="icon" href="../../../assets/images/favicon.png">
      <meta name="generator" content="mkdocs-1.6.1, mkdocs-material-9.7.1">
    
    
      
        <title>第23章 - 財務会計システム ケーススタディ</title>
      
    
    
      <link rel="stylesheet" href="../../../assets/stylesheets/main.484c7ddc.min.css">
      
        
        <link rel="stylesheet" href="../../../assets/stylesheets/palette.ab4e12ef.min.css">
      
      


    
    
      
    
    
      
        
        
        <link rel="preconnect" href="https://fonts.gstatic.com" crossorigin>
        <link rel="stylesheet" href="https://fonts.googleapis.com/css?family=Roboto:300,300i,400,400i,700,700i%7CRoboto+Mono:400,400i,700,700i&display=fallback">
        <style>:root{--md-text-font:"Roboto";--md-code-font:"Roboto Mono"}</style>
      
    
    
      <link rel="stylesheet" href="../../../assets/css/extra.css">
    
    <script>__md_scope=new URL("../../..",location),__md_hash=e=>[...e].reduce(((e,_)=>(e<<5)-e+_.charCodeAt(0)),0),__md_get=(e,_=localStorage,t=__md_scope)=>JSON.parse(_.getItem(t.pathname+"."+e)),__md_set=(e,_,t=localStorage,a=__md_scope)=>{try{t.setItem(a.pathname+"."+e,JSON.stringify(_))}catch(e){}}</script>
    
      

    
    
  </head>
  
  
    
    
    
    
    
    <body dir="ltr" data-md-color-scheme="default" data-md-color-primary="indigo" data-md-color-accent="indigo">
  
    
    <input class="md-toggle" data-md-toggle="drawer" type="checkbox" id="__drawer" autocomplete="off">
    <input class="md-toggle" data-md-toggle="search" type="checkbox" id="__search" autocomplete="off">
    <label class="md-overlay" for="__drawer"></label>
    <div data-md-component="skip">
      
        
        <a href="#23" class="md-skip">
          Skip to content
        </a>
      
    </div>
    <div data-md-component="announce">
      
    </div>
    
    
      

<header class="md-header" data-md-component="header">
  <nav class="md-header__inner md-grid" aria-label="Header">
    <a href="../../.." title="財務会計システム ケーススタディ" class="md-header__button md-logo" aria-label="財務会計システム ケーススタディ" data-md-component="logo">
      
  
  <svg xmlns="http://www.w3.org/2000/svg" viewBox="0 0 24 24"><path d="M12 8a3 3 0 0 0 3-3 3 3 0 0 0-3-3 3 3 0 0 0-3 3 3 3 0 0 0 3 3m0 3.54C9.64 9.35 6.5 8 3 8v11c3.5 0 6.64 1.35 9 3.54 2.36-2.19 5.5-3.54 9-3.54V8c-3.5 0-6.64 1.35-9 3.54"/></svg>

    </a>
    <label class="md-header__button md-icon" for="__drawer">
      
      <svg xmlns="http://www.w3.org/2000/svg" viewBox="0 0 24 24"><path d="M3 6h18v2H3zm0 5h18v2H3zm0 5h18v2H3z"/></svg>
    </label>
    <div class="md-header__title" data-md-component="header-title">
      <div class="md-header__ellipsis">
        <div class="md-header__topic">
          <span class="md-ellipsis">
            財務会計システム ケーススタディ
          </span>
        </div>
        <div class="md-header__topic" data-md-component="header-topic">
          <span class="md-ellipsis">
            
              第23章
            
          </span>
        </div>
      </div>
    </div>
    
      
    
    
    
    
      
      
        <label class="md-header__button md-icon" for="__search">
          
          <svg xmlns="http://www.w3.org/2000/svg" viewBox="0 0 24 24"><path d="M9.5 3A6.5 6.5 0 0 1 16 9.5c0 1.61-.59 3.09-1.56 4.23l.27.27h.79l5 5-1.5 1.5-5-5v-.79l-.27-.27A6.52 6.52 0 0 1 9.5 16 6.5 6.5 0 0 1 3 9.5 6.5 6.5 0 0 1 9.5 3m0 2C7 5 5 7 5 9.5S7 14 9.5 14 14 12 14 9.5 12 5 9.5 5"/></svg>
        </label>
        <div class="md-search" data-md-component="search" role="dialog">
  <label class="md-search__overlay" for="__search"></label>
  <div class="md-search__inner" role="search">
    <form class="md-search__form" name="search">
      <input type="text" class="md-search__input" name="query" aria-label="Search" placeholder="Search" autocapitalize="off" autocorrect="off" autocomplete="off" spellcheck="false" data-md-component="search-query" required>
      <label class="md-search__icon md-icon" for="__search">
        
        <svg xmlns="http://www.w3.org/2000/svg" viewBox="0 0 24 24"><path d="M9.5 3A6.5 6.5 0 0 1 16 9.5c0 1.61-.59 3.09-1.56 4.23l.27.27h.79l5 5-1.5 1.5-5-5v-.79l-.27-.27A6.52 6.52 0 0 1 9.5 16 6.5 6.5 0 0 1 3 9.5 6.5 6.5 0 0 1 9.5 3m0 2C7 5 5 7 5 9.5S7 14 9.5 14 14 12 14 9.5 12 5 9.5 5"/></svg>
        
        <svg xmlns="http://www.w3.org/2000/svg" viewBox="0 0 24 24"><path d="M20 11v2H8l5.5 5.5-1.42 1.42L4.16 12l7.92-7.92L13.5 5.5 8 11z"/></svg>
      </label>
      <nav class="md-search__options" aria-label="Search">
        
        <button type="reset" class="md-search__icon md-icon" title="Clear" aria-label="Clear" tabindex="-1">
          
          <svg xmlns="http://www.w3.org/2000/svg" viewBox="0 0 24 24"><path d="M19 6.41 17.59 5 12 10.59 6.41 5 5 6.41 10.59 12 5 17.59 6.41 19 12 13.41 17.59 19 19 17.59 13.41 12z"/></svg>
        </button>
      </nav>
      
        <div class="md-search__suggest" data-md-component="search-suggest"></div>
      
    </form>
    <div class="md-search__output">
      <div class="md-search__scrollwrap" tabindex="0" data-md-scrollfix>
        <div class="md-search-result" data-md-component="search-result">
          <div class="md-search-result__meta">
            Initializing search
          </div>
          <ol class="md-search-result__list" role="presentation"></ol>
        </div>
      </div>
    </div>
  </div>
</div>
      
    
    
      <div class="md-header__source">
        <a href="https://github.com/k2works/case-study-accounting" title="Go to repository" class="md-source" data-md-component="source">
  <div class="md-source__icon md-icon">
    
    <svg xmlns="http://www.w3.org/2000/svg" viewBox="0 0 448 512"><!--! Font Awesome Free 7.1.0 by @fontawesome - https://fontawesome.com License - https://fontawesome.com/license/free (Icons: CC BY 4.0, Fonts: SIL OFL 1.1, Code: MIT License) Copyright 2025 Fonticons, Inc.--><path d="M439.6 236.1 244 40.5c-5.4-5.5-12.8-8.5-20.4-8.5s-15 3-20.4 8.4L162.5 81l51.5 51.5c27.1-9.1 52.7 16.8 43.4 43.7l49.7 49.7c34.2-11.8 61.2 31 35.5 56.7-26.5 26.5-70.2-2.9-56-37.3L240.3 199v121.9c25.3 12.5 22.3 41.8 9.1 55-6.4 6.4-15.2 10.1-24.3 10.1s-17.8-3.6-24.3-10.1c-17.6-17.6-11.1-46.9 11.2-56v-123c-20.8-8.5-24.6-30.7-18.6-45L142.6 101 8.5 235.1C3 240.6 0 247.9 0 255.5s3 15 8.5 20.4l195.6 195.7c5.4 5.4 12.7 8.4 20.4 8.4s15-3 20.4-8.4l194.7-194.7c5.4-5.4 8.4-12.8 8.4-20.4s-3-15-8.4-20.4"/></svg>
  </div>
  <div class="md-source__repository">
    case-study-accounting
  </div>
</a>
      </div>
    
  </nav>
  
</header>
    
    <div class="md-container" data-md-component="container">
      
      
        
          
            
<nav class="md-tabs" aria-label="Tabs" data-md-component="tabs">
  <div class="md-grid">
    <ul class="md-tabs__list">
      
        
  
  
  
  
    <li class="md-tabs__item">
      <a href="../../.." class="md-tabs__link">
        
  
  
    
  
  Home

      </a>
    </li>
  

      
        
  
  
  
  
    
    
      <li class="md-tabs__item">
        <a href="../../../requirements/requirements_definition/" class="md-tabs__link">
          
  
  
  要件定義

        </a>
      </li>
    
  

      
        
  
  
  
  
    
    
      
  
  
  
  
    
    
      <li class="md-tabs__item">
        <a href="../../../design/architecture_backend/" class="md-tabs__link">
          
  
  
  設計

        </a>
      </li>
    
  

    
  

      
        
  
  
  
  
    
    
      <li class="md-tabs__item">
        <a href="../../../development/release_plan/" class="md-tabs__link">
          
  
  
  開発

        </a>
      </li>
    
  

      
        
  
  
  
  
    
    
      <li class="md-tabs__item">
        <a href="../../../operation/dev_env/" class="md-tabs__link">
          
  
  
  運用

        </a>
      </li>
    
  

      
        
  
  
  
  
    
    
      <li class="md-tabs__item">
        <a href="../../../reference/%E9%96%8B%E7%99%BA%E3%82%AC%E3%82%A4%E3%83%89/" class="md-tabs__link">
          
  
  
  リファレンス

        </a>
      </li>
    
  

      
        
  
  
  
  
    
    
      <li class="md-tabs__item">
        <a href="../../../template/ADR/" class="md-tabs__link">
          
  
  
  テンプレート

        </a>
      </li>
    
  

      
        
  
  
  
    
  
  
    
    
      <li class="md-tabs__item md-tabs__item--active">
        <a href="../../" class="md-tabs__link">
          
  
  
  実践ガイド

        </a>
      </li>
    
  

      
        
  
  
  
  
    
    
      
  
  
  
  
    
    
      <li class="md-tabs__item">
        <a href="../../functional-java/" class="md-tabs__link">
          
  
  
  関数型プログラミング実践ガイド

        </a>
      </li>
    
  

    
  

      
    </ul>
  </div>
</nav>
          
        
      
      <main class="md-main" data-md-component="main">
        <div class="md-main__inner md-grid">
          
            
              
              <div class="md-sidebar md-sidebar--primary" data-md-component="sidebar" data-md-type="navigation" >
                <div class="md-sidebar__scrollwrap">
                  <div class="md-sidebar__inner">
                    


  


  

<nav class="md-nav md-nav--primary md-nav--lifted md-nav--integrated" aria-label="Navigation" data-md-level="0">
  <label class="md-nav__title" for="__drawer">
    <a href="../../.." title="財務会計システム ケーススタディ" class="md-nav__button md-logo" aria-label="財務会計システム ケーススタディ" data-md-component="logo">
      
  
  <svg xmlns="http://www.w3.org/2000/svg" viewBox="0 0 24 24"><path d="M12 8a3 3 0 0 0 3-3 3 3 0 0 0-3-3 3 3 0 0 0-3 3 3 3 0 0 0 3 3m0 3.54C9.64 9.35 6.5 8 3 8v11c3.5 0 6.64 1.35 9 3.54 2.36-2.19 5.5-3.54 9-3.54V8c-3.5 0-6.64 1.35-9 3.54"/></svg>

    </a>
    財務会計システム ケーススタディ
  </label>
  
    <div class="md-nav__source">
      <a href="https://github.com/k2works/case-study-accounting" title="Go to repository" class="md-source" data-md-component="source">
  <div class="md-source__icon md-icon">
    
    <svg xmlns="http://www.w3.org/2000/svg" viewBox="0 0 448 512"><!--! Font Awesome Free 7.1.0 by @fontawesome - https://fontawesome.com License - https://fontawesome.com/license/free (Icons: CC BY 4.0, Fonts: SIL OFL 1.1, Code: MIT License) Copyright 2025 Fonticons, Inc.--><path d="M439.6 236.1 244 40.5c-5.4-5.5-12.8-8.5-20.4-8.5s-15 3-20.4 8.4L162.5 81l51.5 51.5c27.1-9.1 52.7 16.8 43.4 43.7l49.7 49.7c34.2-11.8 61.2 31 35.5 56.7-26.5 26.5-70.2-2.9-56-37.3L240.3 199v121.9c25.3 12.5 22.3 41.8 9.1 55-6.4 6.4-15.2 10.1-24.3 10.1s-17.8-3.6-24.3-10.1c-17.6-17.6-11.1-46.9 11.2-56v-123c-20.8-8.5-24.6-30.7-18.6-45L142.6 101 8.5 235.1C3 240.6 0 247.9 0 255.5s3 15 8.5 20.4l195.6 195.7c5.4 5.4 12.7 8.4 20.4 8.4s15-3 20.4-8.4l194.7-194.7c5.4-5.4 8.4-12.8 8.4-20.4s-3-15-8.4-20.4"/></svg>
  </div>
  <div class="md-source__repository">
    case-study-accounting
  </div>
</a>
    </div>
  
  <ul class="md-nav__list" data-md-scrollfix>
    
      
      
  
  
  
  
    <li class="md-nav__item">
      <a href="../../.." class="md-nav__link">
        
  
  
  <span class="md-ellipsis">
    
  
    Home
  

    
  </span>
  
  

      </a>
    </li>
  

    
      
      
  
  
  
  
    
    
    
    
      
      
        
      
    
    
    <li class="md-nav__item md-nav__item--nested">
      
        
        
        <input class="md-nav__toggle md-toggle " type="checkbox" id="__nav_2" >
        
          
          <label class="md-nav__link" for="__nav_2" id="__nav_2_label" tabindex="0">
            
  
  
  <span class="md-ellipsis">
    
  
    要件定義
  

    
  </span>
  
  

            <span class="md-nav__icon md-icon"></span>
          </label>
        
        <nav class="md-nav" data-md-level="1" aria-labelledby="__nav_2_label" aria-expanded="false">
          <label class="md-nav__title" for="__nav_2">
            <span class="md-nav__icon md-icon"></span>
            
  
    要件定義
  

          </label>
          <ul class="md-nav__list" data-md-scrollfix>
            
              
                
  
  
  
  
    <li class="md-nav__item">
      <a href="../../../requirements/requirements_definition/" class="md-nav__link">
        
  
  
  <span class="md-ellipsis">
    
  
    要件定義書
  

    
  </span>
  
  

      </a>
    </li>
  

              
            
              
                
  
  
  
  
    <li class="md-nav__item">
      <a href="../../../requirements/business_usecase/" class="md-nav__link">
        
  
  
  <span class="md-ellipsis">
    
  
    ビジネスユースケース
  

    
  </span>
  
  

      </a>
    </li>
  

              
            
              
                
  
  
  
  
    <li class="md-nav__item">
      <a href="../../../requirements/system_usecase/" class="md-nav__link">
        
  
  
  <span class="md-ellipsis">
    
  
    システムユースケース
  

    
  </span>
  
  

      </a>
    </li>
  

              
            
              
                
  
  
  
  
    <li class="md-nav__item">
      <a href="../../../requirements/user_story/" class="md-nav__link">
        
  
  
  <span class="md-ellipsis">
    
  
    ユーザーストーリー
  

    
  </span>
  
  

      </a>
    </li>
  

              
            
          </ul>
        </nav>
      
    </li>
  

    
      
      
  
  
  
  
    
    
    
    
      
      
        
      
    
    
    <li class="md-nav__item md-nav__item--nested">
      
        
        
        <input class="md-nav__toggle md-toggle " type="checkbox" id="__nav_3" >
        
          
          <label class="md-nav__link" for="__nav_3" id="__nav_3_label" tabindex="0">
            
  
  
  <span class="md-ellipsis">
    
  
    設計
  

    
  </span>
  
  

            <span class="md-nav__icon md-icon"></span>
          </label>
        
        <nav class="md-nav" data-md-level="1" aria-labelledby="__nav_3_label" aria-expanded="false">
          <label class="md-nav__title" for="__nav_3">
            <span class="md-nav__icon md-icon"></span>
            
  
    設計
  

          </label>
          <ul class="md-nav__list" data-md-scrollfix>
            
              
                
  
  
  
  
    
    
    
    
      
      
        
      
    
    
    <li class="md-nav__item md-nav__item--nested">
      
        
        
        <input class="md-nav__toggle md-toggle " type="checkbox" id="__nav_3_1" >
        
          
          <label class="md-nav__link" for="__nav_3_1" id="__nav_3_1_label" tabindex="0">
            
  
  
  <span class="md-ellipsis">
    
  
    アーキテクチャ
  

    
  </span>
  
  

            <span class="md-nav__icon md-icon"></span>
          </label>
        
        <nav class="md-nav" data-md-level="2" aria-labelledby="__nav_3_1_label" aria-expanded="false">
          <label class="md-nav__title" for="__nav_3_1">
            <span class="md-nav__icon md-icon"></span>
            
  
    アーキテクチャ
  

          </label>
          <ul class="md-nav__list" data-md-scrollfix>
            
              
                
  
  
  
  
    <li class="md-nav__item">
      <a href="../../../design/architecture_backend/" class="md-nav__link">
        
  
  
  <span class="md-ellipsis">
    
  
    バックエンド
  

    
  </span>
  
  

      </a>
    </li>
  

              
            
              
                
  
  
  
  
    <li class="md-nav__item">
      <a href="../../../design/architecture_frontend/" class="md-nav__link">
        
  
  
  <span class="md-ellipsis">
    
  
    フロントエンド
  

    
  </span>
  
  

      </a>
    </li>
  

              
            
              
                
  
  
  
  
    <li class="md-nav__item">
      <a href="../../../design/architecture_infrastructure/" class="md-nav__link">
        
  
  
  <span class="md-ellipsis">
    
  
    インフラストラクチャ
  

    
  </span>
  
  

      </a>
    </li>
  

              
            
          </ul>
        </nav>
      
    </li>
  

              
            
              
                
  
  
  
  
    
    
    
    
      
      
        
      
    
    
    <li class="md-nav__item md-nav__item--nested">
      
        
        
        <input class="md-nav__toggle md-toggle " type="checkbox" id="__nav_3_2" >
        
          
          <label class="md-nav__link" for="__nav_3_2" id="__nav_3_2_label" tabindex="0">
            
  
  
  <span class="md-ellipsis">
    
  
    モデル設計
  

    
  </span>
  
  

            <span class="md-nav__icon md-icon"></span>
          </label>
        
        <nav class="md-nav" data-md-level="2" aria-labelledby="__nav_3_2_label" aria-expanded="false">
          <label class="md-nav__title" for="__nav_3_2">
            <span class="md-nav__icon md-icon"></span>
            
  
    モデル設計
  

          </label>
          <ul class="md-nav__list" data-md-scrollfix>
            
              
                
  
  
  
  
    <li class="md-nav__item">
      <a href="../../../design/data-model/" class="md-nav__link">
        
  
  
  <span class="md-ellipsis">
    
  
    データモデル
  

    
  </span>
  
  

      </a>
    </li>
  

              
            
              
                
  
  
  
  
    <li class="md-nav__item">
      <a href="../../../design/domain-model/" class="md-nav__link">
        
  
  
  <span class="md-ellipsis">
    
  
    ドメインモデル
  

    
  </span>
  
  

      </a>
    </li>
  

              
            
          </ul>
        </nav>
      
    </li>
  

              
            
              
                
  
  
  
  
    <li class="md-nav__item">
      <a href="../../../design/ui-design/" class="md-nav__link">
        
  
  
  <span class="md-ellipsis">
    
  
    UI 設計
  

    
  </span>
  
  

      </a>
    </li>
  

              
            
              
                
  
  
  
  
    <li class="md-nav__item">
      <a href="../../../design/test_strategy/" class="md-nav__link">
        
  
  
  <span class="md-ellipsis">
    
  
    テスト戦略
  

    
  </span>
  
  

      </a>
    </li>
  

              
            
              
                
  
  
  
  
    <li class="md-nav__item">
      <a href="../../../design/non_functional/" class="md-nav__link">
        
  
  
  <span class="md-ellipsis">
    
  
    非機能要件
  

    
  </span>
  
  

      </a>
    </li>
  

              
            
              
                
  
  
  
  
    <li class="md-nav__item">
      <a href="../../../design/operation/" class="md-nav__link">
        
  
  
  <span class="md-ellipsis">
    
  
    運用要件
  

    
  </span>
  
  

      </a>
    </li>
  

              
            
              
                
  
  
  
  
    <li class="md-nav__item">
      <a href="../../../design/tech_stack/" class="md-nav__link">
        
  
  
  <span class="md-ellipsis">
    
  
    技術スタック選定
  

    
  </span>
  
  

      </a>
    </li>
  

              
            
          </ul>
        </nav>
      
    </li>
  

    
      
      
  
  
  
  
    
    
    
    
      
      
        
      
    
    
    <li class="md-nav__item md-nav__item--nested">
      
        
        
        <input class="md-nav__toggle md-toggle " type="checkbox" id="__nav_4" >
        
          
          <label class="md-nav__link" for="__nav_4" id="__nav_4_label" tabindex="0">
            
  
  
  <span class="md-ellipsis">
    
  
    開発
  

    
  </span>
  
  

            <span class="md-nav__icon md-icon"></span>
          </label>
        
        <nav class="md-nav" data-md-level="1" aria-labelledby="__nav_4_label" aria-expanded="false">
          <label class="md-nav__title" for="__nav_4">
            <span class="md-nav__icon md-icon"></span>
            
  
    開発
  

          </label>
          <ul class="md-nav__list" data-md-scrollfix>
            
              
                
  
  
  
  
    <li class="md-nav__item">
      <a href="../../../development/release_plan/" class="md-nav__link">
        
  
  
  <span class="md-ellipsis">
    
  
    リリース計画
  

    
  </span>
  
  

      </a>
    </li>
  

              
            
              
                
  
  
  
  
    
    
    
    
      
      
        
      
    
    
    <li class="md-nav__item md-nav__item--nested">
      
        
        
        <input class="md-nav__toggle md-toggle " type="checkbox" id="__nav_4_2" >
        
          
          <label class="md-nav__link" for="__nav_4_2" id="__nav_4_2_label" tabindex="0">
            
  
  
  <span class="md-ellipsis">
    
  
    イテレーション計画
  

    
  </span>
  
  

            <span class="md-nav__icon md-icon"></span>
          </label>
        
        <nav class="md-nav" data-md-level="2" aria-labelledby="__nav_4_2_label" aria-expanded="false">
          <label class="md-nav__title" for="__nav_4_2">
            <span class="md-nav__icon md-icon"></span>
            
  
    イテレーション計画
  

          </label>
          <ul class="md-nav__list" data-md-scrollfix>
            
              
                
  
  
  
  
    <li class="md-nav__item">
      <a href="../../../development/iteration_plan-1/" class="md-nav__link">
        
  
  
  <span class="md-ellipsis">
    
  
    イテレーション1
  

    
  </span>
  
  

      </a>
    </li>
  

              
            
          </ul>
        </nav>
      
    </li>
  

              
            
          </ul>
        </nav>
      
    </li>
  

    
      
      
  
  
  
  
    
    
    
    
      
      
        
      
    
    
    <li class="md-nav__item md-nav__item--nested">
      
        
        
        <input class="md-nav__toggle md-toggle " type="checkbox" id="__nav_5" >
        
          
          <label class="md-nav__link" for="__nav_5" id="__nav_5_label" tabindex="0">
            
  
  
  <span class="md-ellipsis">
    
  
    運用
  

    
  </span>
  
  

            <span class="md-nav__icon md-icon"></span>
          </label>
        
        <nav class="md-nav" data-md-level="1" aria-labelledby="__nav_5_label" aria-expanded="false">
          <label class="md-nav__title" for="__nav_5">
            <span class="md-nav__icon md-icon"></span>
            
  
    運用
  

          </label>
          <ul class="md-nav__list" data-md-scrollfix>
            
              
                
  
  
  
  
    <li class="md-nav__item">
      <a href="../../../operation/dev_env/" class="md-nav__link">
        
  
  
  <span class="md-ellipsis">
    
  
    開発環境解説
  

    
  </span>
  
  

      </a>
    </li>
  

              
            
              
                
  
  
  
  
    <li class="md-nav__item">
      <a href="../../../operation/dev_container/" class="md-nav__link">
        
  
  
  <span class="md-ellipsis">
    
  
    開発コンテナ構築手順書
  

    
  </span>
  
  

      </a>
    </li>
  

              
            
              
                
  
  
  
  
    <li class="md-nav__item">
      <a href="../../../operation/backend_setup/" class="md-nav__link">
        
  
  
  <span class="md-ellipsis">
    
  
    バックエンド構築手順書
  

    
  </span>
  
  

      </a>
    </li>
  

              
            
              
                
  
  
  
  
    <li class="md-nav__item">
      <a href="../../../operation/backend_demo_env/" class="md-nav__link">
        
  
  
  <span class="md-ellipsis">
    
  
    バックエンドデモ環境
  

    
  </span>
  
  

      </a>
    </li>
  

              
            
              
                
  
  
  
  
    <li class="md-nav__item">
      <a href="../../../operation/frontend_setup/" class="md-nav__link">
        
  
  
  <span class="md-ellipsis">
    
  
    フロントエンド構築手順書
  

    
  </span>
  
  

      </a>
    </li>
  

              
            
              
                
  
  
  
  
    <li class="md-nav__item">
      <a href="../../../operation/frontend_dev/" class="md-nav__link">
        
  
  
  <span class="md-ellipsis">
    
  
    フロントエンド開発手順
  

    
  </span>
  
  

      </a>
    </li>
  

              
            
              
                
  
  
  
  
    <li class="md-nav__item">
      <a href="../../../operation/frontend_common_ui/" class="md-nav__link">
        
  
  
  <span class="md-ellipsis">
    
  
    フロントエンド共通 UI
  

    
  </span>
  
  

      </a>
    </li>
  

              
            
              
                
  
  
  
  
    <li class="md-nav__item">
      <a href="../../../operation/frontend_demo_env/" class="md-nav__link">
        
  
  
  <span class="md-ellipsis">
    
  
    フロントエンドデモ環境
  

    
  </span>
  
  

      </a>
    </li>
  

              
            
              
                
  
  
  
  
    <li class="md-nav__item">
      <a href="../../../operation/deploy_demo/" class="md-nav__link">
        
  
  
  <span class="md-ellipsis">
    
  
    デモ環境デプロイ
  

    
  </span>
  
  

      </a>
    </li>
  

              
            
              
                
  
  
  
  
    <li class="md-nav__item">
      <a href="../../../operation/third_party_service/" class="md-nav__link">
        
  
  
  <span class="md-ellipsis">
    
  
    外部サービス連携
  

    
  </span>
  
  

      </a>
    </li>
  

              
            
              
                
  
  
  
  
    <li class="md-nav__item">
      <a href="../../../operation/sonarqube_setup/" class="md-nav__link">
        
  
  
  <span class="md-ellipsis">
    
  
    SonarQube セットアップガイド
  

    
  </span>
  
  

      </a>
    </li>
  

              
            
              
                
  
  
  
  
    <li class="md-nav__item">
      <a href="../../../operation/e2e_test/" class="md-nav__link">
        
  
  
  <span class="md-ellipsis">
    
  
    E2E テスト実行手順書
  

    
  </span>
  
  

      </a>
    </li>
  

              
            
              
                
  
  
  
  
    <li class="md-nav__item">
      <a href="../../../operation/github_project/" class="md-nav__link">
        
  
  
  <span class="md-ellipsis">
    
  
    GitHub Project 運用ガイド
  

    
  </span>
  
  

      </a>
    </li>
  

              
            
          </ul>
        </nav>
      
    </li>
  

    
      
      
  
  
  
  
    
    
    
    
      
      
        
      
    
    
    <li class="md-nav__item md-nav__item--nested">
      
        
        
        <input class="md-nav__toggle md-toggle " type="checkbox" id="__nav_6" >
        
          
          <label class="md-nav__link" for="__nav_6" id="__nav_6_label" tabindex="0">
            
  
  
  <span class="md-ellipsis">
    
  
    リファレンス
  

    
  </span>
  
  

            <span class="md-nav__icon md-icon"></span>
          </label>
        
        <nav class="md-nav" data-md-level="1" aria-labelledby="__nav_6_label" aria-expanded="false">
          <label class="md-nav__title" for="__nav_6">
            <span class="md-nav__icon md-icon"></span>
            
  
    リファレンス
  

          </label>
          <ul class="md-nav__list" data-md-scrollfix>
            
              
                
  
  
  
  
    <li class="md-nav__item">
      <a href="../../../reference/%E9%96%8B%E7%99%BA%E3%82%AC%E3%82%A4%E3%83%89/" class="md-nav__link">
        
  
  
  <span class="md-ellipsis">
    
  
    開発ガイド
  

    
  </span>
  
  

      </a>
    </li>
  

              
            
              
                
  
  
  
  
    <li class="md-nav__item">
      <a href="../../../reference/%E3%82%88%E3%81%84%E3%82%BD%E3%83%95%E3%83%88%E3%82%A6%E3%82%A7%E3%82%A2%E3%81%A8%E3%81%AF/" class="md-nav__link">
        
  
  
  <span class="md-ellipsis">
    
  
    よいソフトウェアとは
  

    
  </span>
  
  

      </a>
    </li>
  

              
            
              
                
  
  
  
  
    <li class="md-nav__item">
      <a href="../../../reference/%E3%82%B3%E3%83%BC%E3%83%87%E3%82%A3%E3%83%B3%E3%82%B0%E3%81%A8%E3%83%86%E3%82%B9%E3%83%88%E3%82%AC%E3%82%A4%E3%83%89/" class="md-nav__link">
        
  
  
  <span class="md-ellipsis">
    
  
    コーディングとテストガイド
  

    
  </span>
  
  

      </a>
    </li>
  

              
            
              
                
  
  
  
  
    <li class="md-nav__item">
      <a href="../../../reference/%E3%82%A2%E3%83%BC%E3%82%AD%E3%83%86%E3%82%AF%E3%83%81%E3%83%A3%E8%A8%AD%E8%A8%88%E3%82%AC%E3%82%A4%E3%83%89/" class="md-nav__link">
        
  
  
  <span class="md-ellipsis">
    
  
    アーキテクチャ設計ガイド
  

    
  </span>
  
  

      </a>
    </li>
  

              
            
              
                
  
  
  
  
    <li class="md-nav__item">
      <a href="../../../reference/%E3%83%87%E3%83%BC%E3%82%BF%E3%83%A2%E3%83%87%E3%83%AB%E8%A8%AD%E8%A8%88%E3%82%AC%E3%82%A4%E3%83%89/" class="md-nav__link">
        
  
  
  <span class="md-ellipsis">
    
  
    データモデル設計ガイド
  

    
  </span>
  
  

      </a>
    </li>
  

              
            
              
                
  
  
  
  
    <li class="md-nav__item">
      <a href="../../../reference/%E3%83%89%E3%83%A1%E3%82%A4%E3%83%B3%E3%83%A2%E3%83%87%E3%83%AB%E8%A8%AD%E8%A8%88%E3%82%AC%E3%82%A4%E3%83%89/" class="md-nav__link">
        
  
  
  <span class="md-ellipsis">
    
  
    ドメインモデル設計ガイド
  

    
  </span>
  
  

      </a>
    </li>
  

              
            
              
                
  
  
  
  
    <li class="md-nav__item">
      <a href="../../../reference/UI%E8%A8%AD%E8%A8%88%E3%82%AC%E3%82%A4%E3%83%89/" class="md-nav__link">
        
  
  
  <span class="md-ellipsis">
    
  
    UI設計ガイド
  

    
  </span>
  
  

      </a>
    </li>
  

              
            
              
                
  
  
  
  
    <li class="md-nav__item">
      <a href="../../../reference/%E3%83%86%E3%82%B9%E3%83%88%E6%88%A6%E7%95%A5%E3%82%AC%E3%82%A4%E3%83%89/" class="md-nav__link">
        
  
  
  <span class="md-ellipsis">
    
  
    テスト戦略ガイド
  

    
  </span>
  
  

      </a>
    </li>
  

              
            
              
                
  
  
  
  
    <li class="md-nav__item">
      <a href="../../../reference/%E9%9D%9E%E6%A9%9F%E8%83%BD%E8%A6%81%E4%BB%B6%E5%AE%9A%E7%BE%A9%E3%82%AC%E3%82%A4%E3%83%89/" class="md-nav__link">
        
  
  
  <span class="md-ellipsis">
    
  
    非機能要件定義ガイド
  

    
  </span>
  
  

      </a>
    </li>
  

              
            
              
                
  
  
  
  
    <li class="md-nav__item">
      <a href="../../../reference/%E9%81%8B%E7%94%A8%E8%A6%81%E4%BB%B6%E5%AE%9A%E7%BE%A9%E3%82%AC%E3%82%A4%E3%83%89/" class="md-nav__link">
        
  
  
  <span class="md-ellipsis">
    
  
    運用要件定義ガイド
  

    
  </span>
  
  

      </a>
    </li>
  

              
            
              
                
  
  
  
  
    <li class="md-nav__item">
      <a href="../../../reference/%E8%A6%81%E4%BB%B6%E5%AE%9A%E7%BE%A9%E3%82%AC%E3%82%A4%E3%83%89/" class="md-nav__link">
        
  
  
  <span class="md-ellipsis">
    
  
    要件定義ガイド
  

    
  </span>
  
  

      </a>
    </li>
  

              
            
              
                
  
  
  
  
    <li class="md-nav__item">
      <a href="../../../reference/%E3%83%A6%E3%83%BC%E3%82%B9%E3%82%B1%E3%83%BC%E3%82%B9%E4%BD%9C%E6%88%90%E3%82%AC%E3%82%A4%E3%83%89/" class="md-nav__link">
        
  
  
  <span class="md-ellipsis">
    
  
    ユースケース作成ガイド
  

    
  </span>
  
  

      </a>
    </li>
  

              
            
              
                
  
  
  
  
    <li class="md-nav__item">
      <a href="../../../reference/%E3%83%AA%E3%83%AA%E3%83%BC%E3%82%B9%E3%83%BB%E3%82%A4%E3%83%86%E3%83%AC%E3%83%BC%E3%82%B7%E3%83%A7%E3%83%B3%E8%A8%88%E7%94%BB%E3%82%AC%E3%82%A4%E3%83%89/" class="md-nav__link">
        
  
  
  <span class="md-ellipsis">
    
  
    リリース・イテレーション計画ガイド
  

    
  </span>
  
  

      </a>
    </li>
  

              
            
              
                
  
  
  
  
    <li class="md-nav__item">
      <a href="../../../reference/%E3%82%A8%E3%82%AF%E3%82%B9%E3%83%88%E3%83%AA%E3%83%BC%E3%83%A0%E3%83%97%E3%83%AD%E3%82%B0%E3%83%A9%E3%83%9F%E3%83%B3%E3%82%B0/" class="md-nav__link">
        
  
  
  <span class="md-ellipsis">
    
  
    エクストリームプログラミング
  

    
  </span>
  
  

      </a>
    </li>
  

              
            
              
                
  
  
  
  
    <li class="md-nav__item">
      <a href="../../../reference/%E3%82%A4%E3%83%B3%E3%83%95%E3%83%A9%E8%A8%AD%E8%A8%88%E3%82%AC%E3%82%A4%E3%83%89/" class="md-nav__link">
        
  
  
  <span class="md-ellipsis">
    
  
    インフラ設計ガイド
  

    
  </span>
  
  

      </a>
    </li>
  

              
            
              
                
  
  
  
  
    <li class="md-nav__item">
      <a href="../../../reference/Java%E3%82%A2%E3%83%97%E3%83%AA%E3%82%B1%E3%83%BC%E3%82%B7%E3%83%A7%E3%83%B3%E7%92%B0%E5%A2%83%E6%A7%8B%E7%AF%89%E3%82%AC%E3%82%A4%E3%83%89/" class="md-nav__link">
        
  
  
  <span class="md-ellipsis">
    
  
    Javaアプリケーション環境構築ガイド
  

    
  </span>
  
  

      </a>
    </li>
  

              
            
              
                
  
  
  
  
    <li class="md-nav__item">
      <a href="../../../reference/TypeScript%E3%82%A2%E3%83%97%E3%83%AA%E3%82%B1%E3%83%BC%E3%82%B7%E3%83%A7%E3%83%B3%E7%92%B0%E5%A2%83%E6%A7%8B%E7%AF%89%E3%82%AC%E3%82%A4%E3%83%89/" class="md-nav__link">
        
  
  
  <span class="md-ellipsis">
    
  
    TypeScriptアプリケーション環境構築ガイド
  

    
  </span>
  
  

      </a>
    </li>
  

              
            
          </ul>
        </nav>
      
    </li>
  

    
      
      
  
  
  
  
    
    
    
    
      
      
        
      
    
    
    <li class="md-nav__item md-nav__item--nested">
      
        
        
        <input class="md-nav__toggle md-toggle " type="checkbox" id="__nav_7" >
        
          
          <label class="md-nav__link" for="__nav_7" id="__nav_7_label" tabindex="0">
            
  
  
  <span class="md-ellipsis">
    
  
    テンプレート
  

    
  </span>
  
  

            <span class="md-nav__icon md-icon"></span>
          </label>
        
        <nav class="md-nav" data-md-level="1" aria-labelledby="__nav_7_label" aria-expanded="false">
          <label class="md-nav__title" for="__nav_7">
            <span class="md-nav__icon md-icon"></span>
            
  
    テンプレート
  

          </label>
          <ul class="md-nav__list" data-md-scrollfix>
            
              
                
  
  
  
  
    <li class="md-nav__item">
      <a href="../../../template/ADR/" class="md-nav__link">
        
  
  
  <span class="md-ellipsis">
    
  
    ADR
  

    
  </span>
  
  

      </a>
    </li>
  

              
            
              
                
  
  
  
  
    <li class="md-nav__item">
      <a href="../../../template/%E3%82%A4%E3%83%86%E3%83%AC%E3%83%BC%E3%82%B7%E3%83%A7%E3%83%B3%E5%AE%8C%E4%BA%86%E5%A0%B1%E5%91%8A%E6%9B%B8/" class="md-nav__link">
        
  
  
  <span class="md-ellipsis">
    
  
    イテレーション完了報告書
  

    
  </span>
  
  

      </a>
    </li>
  

              
            
              
                
  
  
  
  
    <li class="md-nav__item">
      <a href="../../../template/%E3%82%A4%E3%83%B3%E3%82%BB%E3%83%97%E3%82%B7%E3%83%A7%E3%83%B3%E3%83%87%E3%83%83%E3%82%AD/" class="md-nav__link">
        
  
  
  <span class="md-ellipsis">
    
  
    インセプションデッキ
  

    
  </span>
  
  

      </a>
    </li>
  

              
            
              
                
  
  
  
  
    <li class="md-nav__item">
      <a href="../../../template/%E3%81%BE%E3%81%9A%E3%81%93%E3%82%8C%E3%82%92%E8%AA%AD%E3%82%82%E3%81%86%E3%83%AA%E3%82%B9%E3%83%88/" class="md-nav__link">
        
  
  
  <span class="md-ellipsis">
    
  
    まずこれを読もうリスト
  

    
  </span>
  
  

      </a>
    </li>
  

              
            
              
                
  
  
  
  
    <li class="md-nav__item">
      <a href="../../../template/%E5%AE%8C%E5%85%A8%E5%BD%A2%E5%BC%8F%E3%81%AE%E3%83%A6%E3%83%BC%E3%82%B9%E3%82%B1%E3%83%BC%E3%82%B9/" class="md-nav__link">
        
  
  
  <span class="md-ellipsis">
    
  
    完全形式のユースケース
  

    
  </span>
  
  

      </a>
    </li>
  

              
            
              
                
  
  
  
  
    <li class="md-nav__item">
      <a href="../../../template/%E8%A6%81%E4%BB%B6%E5%AE%9A%E7%BE%A9/" class="md-nav__link">
        
  
  
  <span class="md-ellipsis">
    
  
    要件定義
  

    
  </span>
  
  

      </a>
    </li>
  

              
            
              
                
  
  
  
  
    <li class="md-nav__item">
      <a href="../../../template/%E8%A8%AD%E8%A8%88/" class="md-nav__link">
        
  
  
  <span class="md-ellipsis">
    
  
    設計
  

    
  </span>
  
  

      </a>
    </li>
  

              
            
          </ul>
        </nav>
      
    </li>
  

    
      
      
  
  
    
  
  
  
    
    
    
    
      
        
        
      
      
        
      
    
    
    <li class="md-nav__item md-nav__item--active md-nav__item--section md-nav__item--nested">
      
        
        
        <input class="md-nav__toggle md-toggle " type="checkbox" id="__nav_8" checked>
        
          
          <label class="md-nav__link" for="__nav_8" id="__nav_8_label" tabindex="">
            
  
  
  <span class="md-ellipsis">
    
  
    実践ガイド
  

    
  </span>
  
  

            <span class="md-nav__icon md-icon"></span>
          </label>
        
        <nav class="md-nav" data-md-level="1" aria-labelledby="__nav_8_label" aria-expanded="true">
          <label class="md-nav__title" for="__nav_8">
            <span class="md-nav__icon md-icon"></span>
            
  
    実践ガイド
  

          </label>
          <ul class="md-nav__list" data-md-scrollfix>
            
              
                
  
  
  
  
    <li class="md-nav__item">
      <a href="../../" class="md-nav__link">
        
  
  
  <span class="md-ellipsis">
    
  
    概要
  

    
  </span>
  
  

      </a>
    </li>
  

              
            
              
                
  
  
    
  
  
  
    
    
    
    
      
      
        
          
          
        
      
    
    
    <li class="md-nav__item md-nav__item--active md-nav__item--section md-nav__item--nested">
      
        
        
        <input class="md-nav__toggle md-toggle " type="checkbox" id="__nav_8_2" checked>
        
          
          <label class="md-nav__link" for="__nav_8_2" id="__nav_8_2_label" tabindex="">
            
  
  
  <span class="md-ellipsis">
    
  
    バックエンド編（Java版）
  

    
  </span>
  
  

            <span class="md-nav__icon md-icon"></span>
          </label>
        
        <nav class="md-nav" data-md-level="2" aria-labelledby="__nav_8_2_label" aria-expanded="true">
          <label class="md-nav__title" for="__nav_8_2">
            <span class="md-nav__icon md-icon"></span>
            
  
    バックエンド編（Java版）
  

          </label>
          <ul class="md-nav__list" data-md-scrollfix>
            
              
                
  
  
  
  
    <li class="md-nav__item">
      <a href="../chapter00/" class="md-nav__link">
        
  
  
  <span class="md-ellipsis">
    
  
    はじめに
  

    
  </span>
  
  

      </a>
    </li>
  

              
            
              
                
  
  
  
  
    <li class="md-nav__item">
      <a href="../chapter01/" class="md-nav__link">
        
  
  
  <span class="md-ellipsis">
    
  
    第1章
  

    
  </span>
  
  

      </a>
    </li>
  

              
            
              
                
  
  
  
  
    <li class="md-nav__item">
      <a href="../chapter02/" class="md-nav__link">
        
  
  
  <span class="md-ellipsis">
    
  
    第2章
  

    
  </span>
  
  

      </a>
    </li>
  

              
            
              
                
  
  
  
  
    <li class="md-nav__item">
      <a href="../chapter03/" class="md-nav__link">
        
  
  
  <span class="md-ellipsis">
    
  
    第3章
  

    
  </span>
  
  

      </a>
    </li>
  

              
            
              
                
  
  
  
  
    <li class="md-nav__item">
      <a href="../chapter04/" class="md-nav__link">
        
  
  
  <span class="md-ellipsis">
    
  
    第4章
  

    
  </span>
  
  

      </a>
    </li>
  

              
            
              
                
  
  
  
  
    <li class="md-nav__item">
      <a href="../chapter05/" class="md-nav__link">
        
  
  
  <span class="md-ellipsis">
    
  
    第5章
  

    
  </span>
  
  

      </a>
    </li>
  

              
            
              
                
  
  
  
  
    <li class="md-nav__item">
      <a href="../chapter06/" class="md-nav__link">
        
  
  
  <span class="md-ellipsis">
    
  
    第6章
  

    
  </span>
  
  

      </a>
    </li>
  

              
            
              
                
  
  
  
  
    <li class="md-nav__item">
      <a href="../chapter07/" class="md-nav__link">
        
  
  
  <span class="md-ellipsis">
    
  
    第7章
  

    
  </span>
  
  

      </a>
    </li>
  

              
            
              
                
  
  
  
  
    <li class="md-nav__item">
      <a href="../chapter08/" class="md-nav__link">
        
  
  
  <span class="md-ellipsis">
    
  
    第8章
  

    
  </span>
  
  

      </a>
    </li>
  

              
            
              
                
  
  
  
  
    <li class="md-nav__item">
      <a href="../chapter09/" class="md-nav__link">
        
  
  
  <span class="md-ellipsis">
    
  
    第9章
  

    
  </span>
  
  

      </a>
    </li>
  

              
            
              
                
  
  
  
  
    <li class="md-nav__item">
      <a href="../chapter10/" class="md-nav__link">
        
  
  
  <span class="md-ellipsis">
    
  
    第10章
  

    
  </span>
  
  

      </a>
    </li>
  

              
            
              
                
  
  
  
  
    <li class="md-nav__item">
      <a href="../chapter11/" class="md-nav__link">
        
  
  
  <span class="md-ellipsis">
    
  
    第11章
  

    
  </span>
  
  

      </a>
    </li>
  

              
            
              
                
  
  
  
  
    <li class="md-nav__item">
      <a href="../chapter12/" class="md-nav__link">
        
  
  
  <span class="md-ellipsis">
    
  
    第12章
  

    
  </span>
  
  

      </a>
    </li>
  

              
            
              
                
  
  
  
  
    <li class="md-nav__item">
      <a href="../chapter13/" class="md-nav__link">
        
  
  
  <span class="md-ellipsis">
    
  
    第13章
  

    
  </span>
  
  

      </a>
    </li>
  

              
            
              
                
  
  
  
  
    <li class="md-nav__item">
      <a href="../chapter14/" class="md-nav__link">
        
  
  
  <span class="md-ellipsis">
    
  
    第14章
  

    
  </span>
  
  

      </a>
    </li>
  

              
            
              
                
  
  
  
  
    <li class="md-nav__item">
      <a href="../chapter15/" class="md-nav__link">
        
  
  
  <span class="md-ellipsis">
    
  
    第15章
  

    
  </span>
  
  

      </a>
    </li>
  

              
            
              
                
  
  
  
  
    <li class="md-nav__item">
      <a href="../chapter16/" class="md-nav__link">
        
  
  
  <span class="md-ellipsis">
    
  
    第16章
  

    
  </span>
  
  

      </a>
    </li>
  

              
            
              
                
  
  
  
  
    <li class="md-nav__item">
      <a href="../chapter17/" class="md-nav__link">
        
  
  
  <span class="md-ellipsis">
    
  
    第17章
  

    
  </span>
  
  

      </a>
    </li>
  

              
            
              
                
  
  
  
  
    <li class="md-nav__item">
      <a href="../chapter18/" class="md-nav__link">
        
  
  
  <span class="md-ellipsis">
    
  
    第18章
  

    
  </span>
  
  

      </a>
    </li>
  

              
            
              
                
  
  
  
  
    <li class="md-nav__item">
      <a href="../chapter19/" class="md-nav__link">
        
  
  
  <span class="md-ellipsis">
    
  
    第19章
  

    
  </span>
  
  

      </a>
    </li>
  

              
            
              
                
  
  
  
  
    <li class="md-nav__item">
      <a href="../chapter20/" class="md-nav__link">
        
  
  
  <span class="md-ellipsis">
    
  
    第20章
  

    
  </span>
  
  

      </a>
    </li>
  

              
            
              
                
  
  
  
  
    <li class="md-nav__item">
      <a href="../chapter21/" class="md-nav__link">
        
  
  
  <span class="md-ellipsis">
    
  
    第21章
  

    
  </span>
  
  

      </a>
    </li>
  

              
            
              
                
  
  
  
  
    <li class="md-nav__item">
      <a href="../chapter22/" class="md-nav__link">
        
  
  
  <span class="md-ellipsis">
    
  
    第22章
  

    
  </span>
  
  

      </a>
    </li>
  

              
            
              
                
  
  
    
  
  
  
    <li class="md-nav__item md-nav__item--active">
      
      <input class="md-nav__toggle md-toggle" type="checkbox" id="__toc">
      
      
        
      
      
        <label class="md-nav__link md-nav__link--active" for="__toc">
          
  
  
  <span class="md-ellipsis">
    
  
    第23章
  

    
  </span>
  
  

          <span class="md-nav__icon md-icon"></span>
        </label>
      
      <a href="./" class="md-nav__link md-nav__link--active">
        
  
  
  <span class="md-ellipsis">
    
  
    第23章
  

    
  </span>
  
  

      </a>
      
        

<nav class="md-nav md-nav--secondary" aria-label="Table of contents">
  
  
  
    
  
  
    <label class="md-nav__title" for="__toc">
      <span class="md-nav__icon md-icon"></span>
      Table of contents
    </label>
    <ul class="md-nav__list" data-md-component="toc" data-md-scrollfix>
      
        <li class="md-nav__item">
  <a href="#231" class="md-nav__link">
    <span class="md-ellipsis">
      
        23.1 貧血モデルからリッチモデルへ
      
    </span>
  </a>
  
    <nav class="md-nav" aria-label="23.1 貧血モデルからリッチモデルへ">
      <ul class="md-nav__list">
        
          <li class="md-nav__item">
  <a href="#_1" class="md-nav__link">
    <span class="md-ellipsis">
      
        問題の認識
      
    </span>
  </a>
  
</li>
        
          <li class="md-nav__item">
  <a href="#_2" class="md-nav__link">
    <span class="md-ellipsis">
      
        段階的な移行
      
    </span>
  </a>
  
</li>
        
          <li class="md-nav__item">
  <a href="#_3" class="md-nav__link">
    <span class="md-ellipsis">
      
        ビジネスロジックの移動
      
    </span>
  </a>
  
</li>
        
      </ul>
    </nav>
  
</li>
      
        <li class="md-nav__item">
  <a href="#232" class="md-nav__link">
    <span class="md-ellipsis">
      
        23.2 値オブジェクトの導入
      
    </span>
  </a>
  
    <nav class="md-nav" aria-label="23.2 値オブジェクトの導入">
      <ul class="md-nav__list">
        
          <li class="md-nav__item">
  <a href="#_4" class="md-nav__link">
    <span class="md-ellipsis">
      
        参照から値への変更
      
    </span>
  </a>
  
</li>
        
          <li class="md-nav__item">
  <a href="#money" class="md-nav__link">
    <span class="md-ellipsis">
      
        金額（Money）値オブジェクト
      
    </span>
  </a>
  
</li>
        
          <li class="md-nav__item">
  <a href="#_5" class="md-nav__link">
    <span class="md-ellipsis">
      
        勘定科目コード値オブジェクト
      
    </span>
  </a>
  
</li>
        
          <li class="md-nav__item">
  <a href="#_6" class="md-nav__link">
    <span class="md-ellipsis">
      
        仕訳番号値オブジェクト
      
    </span>
  </a>
  
</li>
        
          <li class="md-nav__item">
  <a href="#_7" class="md-nav__link">
    <span class="md-ellipsis">
      
        値オブジェクトの等価性
      
    </span>
  </a>
  
</li>
        
      </ul>
    </nav>
  
</li>
      
        <li class="md-nav__item">
  <a href="#233" class="md-nav__link">
    <span class="md-ellipsis">
      
        23.3 メソッド抽出
      
    </span>
  </a>
  
    <nav class="md-nav" aria-label="23.3 メソッド抽出">
      <ul class="md-nav__list">
        
          <li class="md-nav__item">
  <a href="#_8" class="md-nav__link">
    <span class="md-ellipsis">
      
        複雑度の測定
      
    </span>
  </a>
  
</li>
        
          <li class="md-nav__item">
  <a href="#_9" class="md-nav__link">
    <span class="md-ellipsis">
      
        抽出例: 財務諸表生成
      
    </span>
  </a>
  
</li>
        
          <li class="md-nav__item">
  <a href="#_10" class="md-nav__link">
    <span class="md-ellipsis">
      
        抽出例: 仕訳検証
      
    </span>
  </a>
  
</li>
        
          <li class="md-nav__item">
  <a href="#_11" class="md-nav__link">
    <span class="md-ellipsis">
      
        メソッド抽出のガイドライン
      
    </span>
  </a>
  
</li>
        
      </ul>
    </nav>
  
</li>
      
        <li class="md-nav__item">
  <a href="#234" class="md-nav__link">
    <span class="md-ellipsis">
      
        23.4 ドメインサービス
      
    </span>
  </a>
  
    <nav class="md-nav" aria-label="23.4 ドメインサービス">
      <ul class="md-nav__list">
        
          <li class="md-nav__item">
  <a href="#_12" class="md-nav__link">
    <span class="md-ellipsis">
      
        適切な配置
      
    </span>
  </a>
  
</li>
        
          <li class="md-nav__item">
  <a href="#_13" class="md-nav__link">
    <span class="md-ellipsis">
      
        仕訳ドメインサービス
      
    </span>
  </a>
  
</li>
        
          <li class="md-nav__item">
  <a href="#_14" class="md-nav__link">
    <span class="md-ellipsis">
      
        財務分析ドメインサービス
      
    </span>
  </a>
  
</li>
        
          <li class="md-nav__item">
  <a href="#_15" class="md-nav__link">
    <span class="md-ellipsis">
      
        エンティティとドメインサービスの使い分け
      
    </span>
  </a>
  
</li>
        
      </ul>
    </nav>
  
</li>
      
        <li class="md-nav__item">
  <a href="#235" class="md-nav__link">
    <span class="md-ellipsis">
      
        23.5 リファクタリングのサイクル
      
    </span>
  </a>
  
    <nav class="md-nav" aria-label="23.5 リファクタリングのサイクル">
      <ul class="md-nav__list">
        
          <li class="md-nav__item">
  <a href="#_16" class="md-nav__link">
    <span class="md-ellipsis">
      
        継続的改善のプロセス
      
    </span>
  </a>
  
</li>
        
          <li class="md-nav__item">
  <a href="#_17" class="md-nav__link">
    <span class="md-ellipsis">
      
        コードスメルの例と対処法
      
    </span>
  </a>
  
</li>
        
      </ul>
    </nav>
  
</li>
      
        <li class="md-nav__item">
  <a href="#_18" class="md-nav__link">
    <span class="md-ellipsis">
      
        まとめ
      
    </span>
  </a>
  
    <nav class="md-nav" aria-label="まとめ">
      <ul class="md-nav__list">
        
          <li class="md-nav__item">
  <a href="#_19" class="md-nav__link">
    <span class="md-ellipsis">
      
        重要なポイント
      
    </span>
  </a>
  
</li>
        
          <li class="md-nav__item">
  <a href="#_20" class="md-nav__link">
    <span class="md-ellipsis">
      
        財務会計システムでの値オブジェクト例
      
    </span>
  </a>
  
</li>
        
          <li class="md-nav__item">
  <a href="#_21" class="md-nav__link">
    <span class="md-ellipsis">
      
        リファクタリングの原則
      
    </span>
  </a>
  
</li>
        
      </ul>
    </nav>
  
</li>
      
    </ul>
  
</nav>
      
    </li>
  

              
            
              
                
  
  
  
  
    <li class="md-nav__item">
      <a href="../chapter24/" class="md-nav__link">
        
  
  
  <span class="md-ellipsis">
    
  
    第24章
  

    
  </span>
  
  

      </a>
    </li>
  

              
            
              
                
  
  
  
  
    <li class="md-nav__item">
      <a href="../chapter25/" class="md-nav__link">
        
  
  
  <span class="md-ellipsis">
    
  
    第25章
  

    
  </span>
  
  

      </a>
    </li>
  

              
            
              
                
  
  
  
  
    <li class="md-nav__item">
      <a href="../chapter26/" class="md-nav__link">
        
  
  
  <span class="md-ellipsis">
    
  
    第26章
  

    
  </span>
  
  

      </a>
    </li>
  

              
            
              
                
  
  
  
  
    <li class="md-nav__item">
      <a href="../chapter27/" class="md-nav__link">
        
  
  
  <span class="md-ellipsis">
    
  
    第27章
  

    
  </span>
  
  

      </a>
    </li>
  

              
            
              
                
  
  
  
  
    <li class="md-nav__item">
      <a href="../chapter28/" class="md-nav__link">
        
  
  
  <span class="md-ellipsis">
    
  
    第28章
  

    
  </span>
  
  

      </a>
    </li>
  

              
            
              
                
  
  
  
  
    <li class="md-nav__item">
      <a href="../chapter29/" class="md-nav__link">
        
  
  
  <span class="md-ellipsis">
    
  
    第29章
  

    
  </span>
  
  

      </a>
    </li>
  

              
            
              
                
  
  
  
  
    <li class="md-nav__item">
      <a href="../chapter30/" class="md-nav__link">
        
  
  
  <span class="md-ellipsis">
    
  
    第30章
  

    
  </span>
  
  

      </a>
    </li>
  

              
            
              
                
  
  
  
  
    <li class="md-nav__item">
      <a href="../chapter31/" class="md-nav__link">
        
  
  
  <span class="md-ellipsis">
    
  
    第31章
  

    
  </span>
  
  

      </a>
    </li>
  

              
            
              
                
  
  
  
  
    <li class="md-nav__item">
      <a href="../chapter32/" class="md-nav__link">
        
  
  
  <span class="md-ellipsis">
    
  
    第32章
  

    
  </span>
  
  

      </a>
    </li>
  

              
            
          </ul>
        </nav>
      
    </li>
  

              
            
              
                
  
  
  
  
    
    
    
    
      
      
        
          
          
        
      
    
    
    <li class="md-nav__item md-nav__item--section md-nav__item--nested">
      
        
        
        <input class="md-nav__toggle md-toggle " type="checkbox" id="__nav_8_3" >
        
          
          <label class="md-nav__link" for="__nav_8_3" id="__nav_8_3_label" tabindex="">
            
  
  
  <span class="md-ellipsis">
    
  
    フロントエンド編（React版）
  

    
  </span>
  
  

            <span class="md-nav__icon md-icon"></span>
          </label>
        
        <nav class="md-nav" data-md-level="2" aria-labelledby="__nav_8_3_label" aria-expanded="false">
          <label class="md-nav__title" for="__nav_8_3">
            <span class="md-nav__icon md-icon"></span>
            
  
    フロントエンド編（React版）
  

          </label>
          <ul class="md-nav__list" data-md-scrollfix>
            
              
                
  
  
  
  
    <li class="md-nav__item">
      <a href="../../frontend/chapter00/" class="md-nav__link">
        
  
  
  <span class="md-ellipsis">
    
  
    はじめに
  

    
  </span>
  
  

      </a>
    </li>
  

              
            
              
                
  
  
  
  
    <li class="md-nav__item">
      <a href="../../frontend/chapter01/" class="md-nav__link">
        
  
  
  <span class="md-ellipsis">
    
  
    第1章
  

    
  </span>
  
  

      </a>
    </li>
  

              
            
              
                
  
  
  
  
    <li class="md-nav__item">
      <a href="../../frontend/chapter02/" class="md-nav__link">
        
  
  
  <span class="md-ellipsis">
    
  
    第2章
  

    
  </span>
  
  

      </a>
    </li>
  

              
            
              
                
  
  
  
  
    <li class="md-nav__item">
      <a href="../../frontend/chapter03/" class="md-nav__link">
        
  
  
  <span class="md-ellipsis">
    
  
    第3章
  

    
  </span>
  
  

      </a>
    </li>
  

              
            
              
                
  
  
  
  
    <li class="md-nav__item">
      <a href="../../frontend/chapter04/" class="md-nav__link">
        
  
  
  <span class="md-ellipsis">
    
  
    第4章
  

    
  </span>
  
  

      </a>
    </li>
  

              
            
              
                
  
  
  
  
    <li class="md-nav__item">
      <a href="../../frontend/chapter05/" class="md-nav__link">
        
  
  
  <span class="md-ellipsis">
    
  
    第5章
  

    
  </span>
  
  

      </a>
    </li>
  

              
            
              
                
  
  
  
  
    <li class="md-nav__item">
      <a href="../../frontend/chapter06/" class="md-nav__link">
        
  
  
  <span class="md-ellipsis">
    
  
    第6章
  

    
  </span>
  
  

      </a>
    </li>
  

              
            
              
                
  
  
  
  
    <li class="md-nav__item">
      <a href="../../frontend/chapter07/" class="md-nav__link">
        
  
  
  <span class="md-ellipsis">
    
  
    第7章
  

    
  </span>
  
  

      </a>
    </li>
  

              
            
              
                
  
  
  
  
    <li class="md-nav__item">
      <a href="../../frontend/chapter08/" class="md-nav__link">
        
  
  
  <span class="md-ellipsis">
    
  
    第8章
  

    
  </span>
  
  

      </a>
    </li>
  

              
            
              
                
  
  
  
  
    <li class="md-nav__item">
      <a href="../../frontend/chapter09/" class="md-nav__link">
        
  
  
  <span class="md-ellipsis">
    
  
    第9章
  

    
  </span>
  
  

      </a>
    </li>
  

              
            
              
                
  
  
  
  
    <li class="md-nav__item">
      <a href="../../frontend/chapter10/" class="md-nav__link">
        
  
  
  <span class="md-ellipsis">
    
  
    第10章
  

    
  </span>
  
  

      </a>
    </li>
  

              
            
              
                
  
  
  
  
    <li class="md-nav__item">
      <a href="../../frontend/chapter11/" class="md-nav__link">
        
  
  
  <span class="md-ellipsis">
    
  
    第11章
  

    
  </span>
  
  

      </a>
    </li>
  

              
            
              
                
  
  
  
  
    <li class="md-nav__item">
      <a href="../../frontend/chapter12/" class="md-nav__link">
        
  
  
  <span class="md-ellipsis">
    
  
    第12章
  

    
  </span>
  
  

      </a>
    </li>
  

              
            
              
                
  
  
  
  
    <li class="md-nav__item">
      <a href="../../frontend/chapter13/" class="md-nav__link">
        
  
  
  <span class="md-ellipsis">
    
  
    第13章
  

    
  </span>
  
  

      </a>
    </li>
  

              
            
              
                
  
  
  
  
    <li class="md-nav__item">
      <a href="../../frontend/chapter14/" class="md-nav__link">
        
  
  
  <span class="md-ellipsis">
    
  
    第14章
  

    
  </span>
  
  

      </a>
    </li>
  

              
            
              
                
  
  
  
  
    <li class="md-nav__item">
      <a href="../../frontend/chapter15/" class="md-nav__link">
        
  
  
  <span class="md-ellipsis">
    
  
    第15章
  

    
  </span>
  
  

      </a>
    </li>
  

              
            
              
                
  
  
  
  
    <li class="md-nav__item">
      <a href="../../frontend/chapter16/" class="md-nav__link">
        
  
  
  <span class="md-ellipsis">
    
  
    第16章
  

    
  </span>
  
  

      </a>
    </li>
  

              
            
              
                
  
  
  
  
    <li class="md-nav__item">
      <a href="../../frontend/chapter17/" class="md-nav__link">
        
  
  
  <span class="md-ellipsis">
    
  
    第17章
  

    
  </span>
  
  

      </a>
    </li>
  

              
            
              
                
  
  
  
  
    <li class="md-nav__item">
      <a href="../../frontend/chapter18/" class="md-nav__link">
        
  
  
  <span class="md-ellipsis">
    
  
    第18章
  

    
  </span>
  
  

      </a>
    </li>
  

              
            
              
                
  
  
  
  
    <li class="md-nav__item">
      <a href="../../frontend/chapter19/" class="md-nav__link">
        
  
  
  <span class="md-ellipsis">
    
  
    第19章
  

    
  </span>
  
  

      </a>
    </li>
  

              
            
              
                
  
  
  
  
    <li class="md-nav__item">
      <a href="../../frontend/chapter20/" class="md-nav__link">
        
  
  
  <span class="md-ellipsis">
    
  
    第20章
  

    
  </span>
  
  

      </a>
    </li>
  

              
            
              
                
  
  
  
  
    <li class="md-nav__item">
      <a href="../../frontend/chapter21/" class="md-nav__link">
        
  
  
  <span class="md-ellipsis">
    
  
    第21章
  

    
  </span>
  
  

      </a>
    </li>
  

              
            
              
                
  
  
  
  
    <li class="md-nav__item">
      <a href="../../frontend/chapter22/" class="md-nav__link">
        
  
  
  <span class="md-ellipsis">
    
  
    第22章
  

    
  </span>
  
  

      </a>
    </li>
  

              
            
              
                
  
  
  
  
    <li class="md-nav__item">
      <a href="../../frontend/chapter23/" class="md-nav__link">
        
  
  
  <span class="md-ellipsis">
    
  
    第23章
  

    
  </span>
  
  

      </a>
    </li>
  

              
            
              
                
  
  
  
  
    <li class="md-nav__item">
      <a href="../../frontend/chapter24/" class="md-nav__link">
        
  
  
  <span class="md-ellipsis">
    
  
    第24章
  

    
  </span>
  
  

      </a>
    </li>
  

              
            
          </ul>
        </nav>
      
    </li>
  

              
            
          </ul>
        </nav>
      
    </li>
  

    
      
      
  
  
  
  
    
    
    
    
      
      
        
      
    
    
    <li class="md-nav__item md-nav__item--nested">
      
        
        
        <input class="md-nav__toggle md-toggle " type="checkbox" id="__nav_9" >
        
          
          <label class="md-nav__link" for="__nav_9" id="__nav_9_label" tabindex="0">
            
  
  
  <span class="md-ellipsis">
    
  
    関数型プログラミング実践ガイド
  

    
  </span>
  
  

            <span class="md-nav__icon md-icon"></span>
          </label>
        
        <nav class="md-nav" data-md-level="1" aria-labelledby="__nav_9_label" aria-expanded="false">
          <label class="md-nav__title" for="__nav_9">
            <span class="md-nav__icon md-icon"></span>
            
  
    関数型プログラミング実践ガイド
  

          </label>
          <ul class="md-nav__list" data-md-scrollfix>
            
              
                
  
  
  
  
    
    
    
    
      
      
        
      
    
    
    <li class="md-nav__item md-nav__item--nested">
      
        
        
        <input class="md-nav__toggle md-toggle " type="checkbox" id="__nav_9_1" >
        
          
          <label class="md-nav__link" for="__nav_9_1" id="__nav_9_1_label" tabindex="0">
            
  
  
  <span class="md-ellipsis">
    
  
    関数型プログラミング（Java版）
  

    
  </span>
  
  

            <span class="md-nav__icon md-icon"></span>
          </label>
        
        <nav class="md-nav" data-md-level="2" aria-labelledby="__nav_9_1_label" aria-expanded="false">
          <label class="md-nav__title" for="__nav_9_1">
            <span class="md-nav__icon md-icon"></span>
            
  
    関数型プログラミング（Java版）
  

          </label>
          <ul class="md-nav__list" data-md-scrollfix>
            
              
                
  
  
  
  
    <li class="md-nav__item">
      <a href="../../functional-java/" class="md-nav__link">
        
  
  
  <span class="md-ellipsis">
    
  
    はじめに
  

    
  </span>
  
  

      </a>
    </li>
  

              
            
              
                
  
  
  
  
    <li class="md-nav__item">
      <a href="../../functional-java/part-1/" class="md-nav__link">
        
  
  
  <span class="md-ellipsis">
    
  
    Part I 基礎
  

    
  </span>
  
  

      </a>
    </li>
  

              
            
              
                
  
  
  
  
    <li class="md-nav__item">
      <a href="../../functional-java/part-2/" class="md-nav__link">
        
  
  
  <span class="md-ellipsis">
    
  
    Part II 関数型スタイル
  

    
  </span>
  
  

      </a>
    </li>
  

              
            
              
                
  
  
  
  
    <li class="md-nav__item">
      <a href="../../functional-java/part-3/" class="md-nav__link">
        
  
  
  <span class="md-ellipsis">
    
  
    Part III エラーハンドリング
  

    
  </span>
  
  

      </a>
    </li>
  

              
            
              
                
  
  
  
  
    <li class="md-nav__item">
      <a href="../../functional-java/part-4/" class="md-nav__link">
        
  
  
  <span class="md-ellipsis">
    
  
    Part IV IO と副作用
  

    
  </span>
  
  

      </a>
    </li>
  

              
            
              
                
  
  
  
  
    <li class="md-nav__item">
      <a href="../../functional-java/part-5/" class="md-nav__link">
        
  
  
  <span class="md-ellipsis">
    
  
    Part V 並行処理
  

    
  </span>
  
  

      </a>
    </li>
  

              
            
              
                
  
  
  
  
    <li class="md-nav__item">
      <a href="../../functional-java/part-6/" class="md-nav__link">
        
  
  
  <span class="md-ellipsis">
    
  
    Part VI 実践
  

    
  </span>
  
  

      </a>
    </li>
  

              
            
          </ul>
        </nav>
      
    </li>
  

              
            
          </ul>
        </nav>
      
    </li>
  

    
  </ul>
</nav>
                  </div>
                </div>
              </div>
            
            
          
          
            <div class="md-content" data-md-component="content">
              
              <article class="md-content__inner md-typeset">
                
                  


  
  


<h1 id="23">第23章: 継続的リファクタリング<a class="headerlink" href="#23" title="Permanent link">&para;</a></h1>
<h2 id="231">23.1 貧血モデルからリッチモデルへ<a class="headerlink" href="#231" title="Permanent link">&para;</a></h2>
<h3 id="_1">問題の認識<a class="headerlink" href="#_1" title="Permanent link">&para;</a></h3>
<p>貧血ドメインモデル（Anemic Domain Model）は、データの入れ物としてのみ機能し、ビジネスロジックがサービス層に散らばっている状態です。この状態では、ドメインの知識がコード全体に分散し、保守性が低下します。</p>
<p><img src="data:image/svg+xml;base64,PHN2ZyB4bWxucz0iaHR0cDovL3d3dy53My5vcmcvMjAwMC9zdmciIHhtbG5zOnhsaW5rPSJodHRwOi8vd3d3LnczLm9yZy8xOTk5L3hsaW5rIiBjb250ZW50U3R5bGVUeXBlPSJ0ZXh0L2NzcyIgZGF0YS1kaWFncmFtLXR5cGU9IkNMQVNTIiBoZWlnaHQ9IjMwNHB4IiBwcmVzZXJ2ZUFzcGVjdFJhdGlvPSJub25lIiBzdHlsZT0id2lkdGg6MTE1NHB4O2hlaWdodDozMDRweDtiYWNrZ3JvdW5kOiNGRkZGRkY7IiB2ZXJzaW9uPSIxLjEiIHZpZXdCb3g9IjAgMCAxMTU0IDMwNCIgd2lkdGg9IjExNTRweCIgem9vbUFuZFBhbj0ibWFnbmlmeSI+PHRpdGxlPiYjMzYwMDc7JiMzNDg4MDsmIzEyNDg5OyYjMTI1MTM7JiMxMjQ1MjsmIzEyNTMxOyYjMTI1MTQ7JiMxMjQ4NzsmIzEyNTIzOyYjMTIzOTg7JiMyMTgzOTsmIzM4OTg4OzwvdGl0bGU+PGRlZnMvPjxnPjxnIGNsYXNzPSJ0aXRsZSIgZGF0YS1zb3VyY2UtbGluZT0iMSI+PHRleHQgZmlsbD0iIzAwMDAwMCIgZm9udC1mYW1pbHk9InNhbnMtc2VyaWYiIGZvbnQtc2l6ZT0iMTQiIGZvbnQtd2VpZ2h0PSJib2xkIiBsZW5ndGhBZGp1c3Q9InNwYWNpbmciIHRleHRMZW5ndGg9IjE2Ny45OTkzIiB4PSI0ODYuMDAwNCIgeT0iMjIuOTk1MSI+JiMzNjAwNzsmIzM0ODgwOyYjMTI0ODk7JiMxMjUxMzsmIzEyNDUyOyYjMTI1MzE7JiMxMjUxNDsmIzEyNDg3OyYjMTI1MjM7JiMxMjM5ODsmIzIxODM5OyYjMzg5ODg7PC90ZXh0PjwvZz48IS0tY2x1c3RlciA/Pz8/Pz8/Pz8/Pz8/Py0tPjxnIGNsYXNzPSJjbHVzdGVyIiBkYXRhLWVudGl0eT0iLi4uLi4uLi4uLi4uLi4iIGRhdGEtc291cmNlLWxpbmU9IjMiIGRhdGEtdWlkPSJlbnQwMDAyIiBpZD0iY2x1c3Rlcl8uLi4uLi4uLi4uLi4uLiI+PHJlY3QgZmlsbD0ibm9uZSIgaGVpZ2h0PSIyNTMuOTQiIHJ4PSIyLjUiIHJ5PSIyLjUiIHN0eWxlPSJzdHJva2U6IzE4MTgxODtzdHJva2Utd2lkdGg6MTsiIHdpZHRoPSI2MjgiIHg9IjciIHk9IjQ0LjI5NjkiLz48dGV4dCBmaWxsPSIjMDAwMDAwIiBmb250LWZhbWlseT0ic2Fucy1zZXJpZiIgZm9udC1zaXplPSIxNCIgZm9udC13ZWlnaHQ9ImJvbGQiIGxlbmd0aEFkanVzdD0ic3BhY2luZyIgdGV4dExlbmd0aD0iMTk1Ljk5OTEiIHg9IjIyMy4wMDA0IiB5PSI1OS4yOTIiPiYjMzYwMDc7JiMzNDg4MDsmIzEyNTE0OyYjMTI0ODc7JiMxMjUyMzsmIzY1Mjg4OyYjMTI0NTA7JiMxMjUzMTsmIzEyNDgxOyYjMTI0OTc7JiMxMjQ3OTsmIzEyNTQwOyYjMTI1MzE7JiM2NTI4OTs8L3RleHQ+PC9nPjwhLS1jbHVzdGVyID8/Pz8/Pz8/Pz8tLT48ZyBjbGFzcz0iY2x1c3RlciIgZGF0YS1lbnRpdHk9Ii4uLi4uLi4uLi4iIGRhdGEtc291cmNlLWxpbmU9IjI4IiBkYXRhLXVpZD0iZW50MDAwOCIgaWQ9ImNsdXN0ZXJfLi4uLi4uLi4uLiI+PHJlY3QgZmlsbD0ibm9uZSIgaGVpZ2h0PSIyMjEuMzQiIHJ4PSIyLjUiIHJ5PSIyLjUiIHN0eWxlPSJzdHJva2U6IzE4MTgxODtzdHJva2Utd2lkdGg6MTsiIHdpZHRoPSI0ODkiIHg9IjY1OSIgeT0iNjAuNTk2OSIvPjx0ZXh0IGZpbGw9IiMwMDAwMDAiIGZvbnQtZmFtaWx5PSJzYW5zLXNlcmlmIiBmb250LXNpemU9IjE0IiBmb250LXdlaWdodD0iYm9sZCIgbGVuZ3RoQWRqdXN0PSJzcGFjaW5nIiB0ZXh0TGVuZ3RoPSIxMzkuOTk5NCIgeD0iODMzLjUwMDMiIHk9Ijc1LjU5MiI+JiMxMjUyMjsmIzEyNDgzOyYjMTI0ODE7JiMxMjUxNDsmIzEyNDg3OyYjMTI1MjM7JiM2NTI4ODsmIzI1NTEyOyYjMjI4ODg7JiM2NTI4OTs8L3RleHQ+PC9nPjwhLS1jbGFzcyBKb3VybmFsRW50cnktLT48ZyBjbGFzcz0iZW50aXR5IiBkYXRhLWVudGl0eT0iSm91cm5hbEVudHJ5IiBkYXRhLXNvdXJjZS1saW5lPSI0IiBkYXRhLXVpZD0iZW50MDAwMyIgaWQ9ImVudGl0eV9Kb3VybmFsRW50cnkiPjxyZWN0IGZpbGw9IiNGMUYxRjEiIGhlaWdodD0iMjAyLjkzNzUiIHJ4PSIyLjUiIHJ5PSIyLjUiIHN0eWxlPSJzdHJva2U6IzE4MTgxODtzdHJva2Utd2lkdGg6MC41OyIgd2lkdGg9IjE4OS4wNTc2IiB4PSI0MjkuNDciIHk9Ijc5LjI5NjkiLz48ZWxsaXBzZSBjeD0iNDc2Ljc5MTgiIGN5PSI5OS40Mjk3IiBmaWxsPSIjQUREMUIyIiByeD0iMTEiIHJ5PSIxMSIgc3R5bGU9InN0cm9rZTojMTgxODE4O3N0cm9rZS13aWR0aDoxOyIvPjxwYXRoIGQ9Ik00NzkuNzYwNSwxMDUuMDcwMyBRNDc5LjE4MjQsMTA1LjM2NzIgNDc4LjU0MTgsMTA1LjUwNzggUTQ3Ny45MDEyLDEwNS42NjQxIDQ3Ny4xOTgsMTA1LjY2NDEgUTQ3NC42OTgsMTA1LjY2NDEgNDczLjM2OTksMTA0LjAyMzQgUTQ3Mi4wNTc0LDEwMi4zNjcyIDQ3Mi4wNTc0LDk5LjI0MjIgUTQ3Mi4wNTc0LDk2LjExNzIgNDczLjM2OTksOTQuNDYwOSBRNDc0LjY5OCw5Mi44MDQ3IDQ3Ny4xOTgsOTIuODA0NyBRNDc3LjkwMTIsOTIuODA0NyA0NzguNTQxOCw5Mi45NjA5IFE0NzkuMTk4LDkzLjExNzIgNDc5Ljc2MDUsOTMuNDE0MSBMNDc5Ljc2MDUsOTYuMTMyOCBRNDc5LjEzNTUsOTUuNTU0NyA0NzguNTQxOCw5NS4yODkxIFE0NzcuOTQ4LDk1LjAwNzggNDc3LjMyMyw5NS4wMDc4IFE0NzUuOTc5Myw5NS4wMDc4IDQ3NS4yOTE4LDk2LjA4NTkgUTQ3NC42MDQzLDk3LjE0ODQgNDc0LjYwNDMsOTkuMjQyMiBRNDc0LjYwNDMsMTAxLjMzNTkgNDc1LjI5MTgsMTAyLjQxNDEgUTQ3NS45NzkzLDEwMy40NzY2IDQ3Ny4zMjMsMTAzLjQ3NjYgUTQ3Ny45NDgsMTAzLjQ3NjYgNDc4LjU0MTgsMTAzLjIxMDkgUTQ3OS4xMzU1LDEwMi45Mjk3IDQ3OS43NjA1LDEwMi4zNTE2IEw0NzkuNzYwNSwxMDUuMDcwMyBaICIgZmlsbD0iIzAwMDAwMCIvPjx0ZXh0IGZpbGw9IiMwMDAwMDAiIGZvbnQtZmFtaWx5PSJzYW5zLXNlcmlmIiBmb250LXNpemU9IjEyIiBmb250LXN0eWxlPSJpdGFsaWMiIGxlbmd0aEFkanVzdD0ic3BhY2luZyIgdGV4dExlbmd0aD0iNDkuNzE2OCIgeD0iNTE1LjM5MDQiIHk9Ijk1LjQzNTUiPiYjMTcxO0VudGl0eSYjMTg3OzwvdGV4dD48dGV4dCBmaWxsPSIjMDAwMDAwIiBmb250LWZhbWlseT0ic2Fucy1zZXJpZiIgZm9udC1zaXplPSIxNCIgbGVuZ3RoQWRqdXN0PSJzcGFjaW5nIiB0ZXh0TGVuZ3RoPSI4NS45MTQxIiB4PSI0OTcuMjkxOCIgeT0iMTExLjI2MDciPkpvdXJuYWxFbnRyeTwvdGV4dD48bGluZSBzdHlsZT0ic3Ryb2tlOiMxODE4MTg7c3Ryb2tlLXdpZHRoOjAuNTsiIHgxPSI0MzAuNDciIHgyPSI2MTcuNTI3NiIgeTE9IjExOS41NjI1IiB5Mj0iMTE5LjU2MjUiLz48cmVjdCBmaWxsPSJub25lIiBoZWlnaHQ9IjYiIHN0eWxlPSJzdHJva2U6I0M4MjkzMDtzdHJva2Utd2lkdGg6MTsiIHdpZHRoPSI2IiB4PSI0MzcuNDciIHk9IjEzMC4yMTA5Ii8+PHRleHQgZmlsbD0iIzAwMDAwMCIgZm9udC1mYW1pbHk9InNhbnMtc2VyaWYiIGZvbnQtc2l6ZT0iMTQiIGxlbmd0aEFkanVzdD0ic3BhY2luZyIgdGV4dExlbmd0aD0iMTIwLjk2ODgiIHg9IjQ0OS40NyIgeT0iMTM2LjU1NzYiPmpvdXJuYWxJZDogSW50ZWdlcjwvdGV4dD48cmVjdCBmaWxsPSJub25lIiBoZWlnaHQ9IjYiIHN0eWxlPSJzdHJva2U6I0M4MjkzMDtzdHJva2Utd2lkdGg6MTsiIHdpZHRoPSI2IiB4PSI0MzcuNDciIHk9IjE0Ni41MDc4Ii8+PHRleHQgZmlsbD0iIzAwMDAwMCIgZm9udC1mYW1pbHk9InNhbnMtc2VyaWYiIGZvbnQtc2l6ZT0iMTQiIGxlbmd0aEFkanVzdD0ic3BhY2luZyIgdGV4dExlbmd0aD0iMTYxLjA0NzkiIHg9IjQ0OS40NyIgeT0iMTUyLjg1NDUiPmpvdXJuYWxEYXRlOiBMb2NhbERhdGU8L3RleHQ+PHJlY3QgZmlsbD0ibm9uZSIgaGVpZ2h0PSI2IiBzdHlsZT0ic3Ryb2tlOiNDODI5MzA7c3Ryb2tlLXdpZHRoOjE7IiB3aWR0aD0iNiIgeD0iNDM3LjQ3IiB5PSIxNjIuODA0NyIvPjx0ZXh0IGZpbGw9IiMwMDAwMDAiIGZvbnQtZmFtaWx5PSJzYW5zLXNlcmlmIiBmb250LXNpemU9IjE0IiBsZW5ndGhBZGp1c3Q9InNwYWNpbmciIHRleHRMZW5ndGg9IjEyOC43ODkxIiB4PSI0NDkuNDciIHk9IjE2OS4xNTE0Ij5kZXNjcmlwdGlvbjogU3RyaW5nPC90ZXh0PjxyZWN0IGZpbGw9Im5vbmUiIGhlaWdodD0iNiIgc3R5bGU9InN0cm9rZTojQzgyOTMwO3N0cm9rZS13aWR0aDoxOyIgd2lkdGg9IjYiIHg9IjQzNy40NyIgeT0iMTc5LjEwMTYiLz48dGV4dCBmaWxsPSIjMDAwMDAwIiBmb250LWZhbWlseT0ic2Fucy1zZXJpZiIgZm9udC1zaXplPSIxNCIgbGVuZ3RoQWRqdXN0PSJzcGFjaW5nIiB0ZXh0TGVuZ3RoPSIxNTguMzA2NiIgeD0iNDQ5LjQ3IiB5PSIxODUuNDQ4MiI+dG90YWxEZWJpdDogQmlnRGVjaW1hbDwvdGV4dD48cmVjdCBmaWxsPSJub25lIiBoZWlnaHQ9IjYiIHN0eWxlPSJzdHJva2U6I0M4MjkzMDtzdHJva2Utd2lkdGg6MTsiIHdpZHRoPSI2IiB4PSI0MzcuNDciIHk9IjE5NS4zOTg0Ii8+PHRleHQgZmlsbD0iIzAwMDAwMCIgZm9udC1mYW1pbHk9InNhbnMtc2VyaWYiIGZvbnQtc2l6ZT0iMTQiIGxlbmd0aEFkanVzdD0ic3BhY2luZyIgdGV4dExlbmd0aD0iMTYzLjA1NzYiIHg9IjQ0OS40NyIgeT0iMjAxLjc0NTEiPnRvdGFsQ3JlZGl0OiBCaWdEZWNpbWFsPC90ZXh0PjxsaW5lIHN0eWxlPSJzdHJva2U6IzE4MTgxODtzdHJva2Utd2lkdGg6MC41OyIgeDE9IjQzMC40NyIgeDI9IjYxNy41Mjc2IiB5MT0iMjA5LjA0NjkiIHkyPSIyMDkuMDQ2OSIvPjxlbGxpcHNlIGN4PSI0NDAuNDciIGN5PSIyMjIuNjk1MyIgZmlsbD0iIzg0QkU4NCIgcng9IjMiIHJ5PSIzIiBzdHlsZT0ic3Ryb2tlOiMwMzgwNDg7c3Ryb2tlLXdpZHRoOjE7Ii8+PHRleHQgZmlsbD0iIzAwMDAwMCIgZm9udC1mYW1pbHk9InNhbnMtc2VyaWYiIGZvbnQtc2l6ZT0iMTQiIGxlbmd0aEFkanVzdD0ic3BhY2luZyIgdGV4dExlbmd0aD0iOTUuNTkzOCIgeD0iNDQ5LjQ3IiB5PSIyMjYuMDQyIj5nZXRKb3VybmFsSWQoKTwvdGV4dD48ZWxsaXBzZSBjeD0iNDQwLjQ3IiBjeT0iMjM4Ljk5MjIiIGZpbGw9IiM4NEJFODQiIHJ4PSIzIiByeT0iMyIgc3R5bGU9InN0cm9rZTojMDM4MDQ4O3N0cm9rZS13aWR0aDoxOyIvPjx0ZXh0IGZpbGw9IiMwMDAwMDAiIGZvbnQtZmFtaWx5PSJzYW5zLXNlcmlmIiBmb250LXNpemU9IjE0IiBsZW5ndGhBZGp1c3Q9InNwYWNpbmciIHRleHRMZW5ndGg9Ijk0LjAwMSIgeD0iNDQ5LjQ3IiB5PSIyNDIuMzM4OSI+c2V0Sm91cm5hbElkKCk8L3RleHQ+PGVsbGlwc2UgY3g9IjQ0MC40NyIgY3k9IjI1NS4yODkxIiBmaWxsPSIjODRCRTg0IiByeD0iMyIgcnk9IjMiIHN0eWxlPSJzdHJva2U6IzAzODA0ODtzdHJva2Utd2lkdGg6MTsiLz48dGV4dCBmaWxsPSIjMDAwMDAwIiBmb250LWZhbWlseT0ic2Fucy1zZXJpZiIgZm9udC1zaXplPSIxNCIgbGVuZ3RoQWRqdXN0PSJzcGFjaW5nIiB0ZXh0TGVuZ3RoPSIxMTYuMDQiIHg9IjQ0OS40NyIgeT0iMjU4LjYzNTciPmdldEpvdXJuYWxEYXRlKCk8L3RleHQ+PGVsbGlwc2UgY3g9IjQ0MC40NyIgY3k9IjI3MS41ODU5IiBmaWxsPSIjODRCRTg0IiByeD0iMyIgcnk9IjMiIHN0eWxlPSJzdHJva2U6IzAzODA0ODtzdHJva2Utd2lkdGg6MTsiLz48dGV4dCBmaWxsPSIjMDAwMDAwIiBmb250LWZhbWlseT0ic2Fucy1zZXJpZiIgZm9udC1zaXplPSIxNCIgbGVuZ3RoQWRqdXN0PSJzcGFjaW5nIiB0ZXh0TGVuZ3RoPSIxMTQuNDQ3MyIgeD0iNDQ5LjQ3IiB5PSIyNzQuOTMyNiI+c2V0Sm91cm5hbERhdGUoKTwvdGV4dD48L2c+PCEtLWNsYXNzIEpvdXJuYWxTZXJ2aWNlLS0+PGcgY2xhc3M9ImVudGl0eSIgZGF0YS1lbnRpdHk9IkpvdXJuYWxTZXJ2aWNlIiBkYXRhLXNvdXJjZS1saW5lPSIxNiIgZGF0YS11aWQ9ImVudDAwMDQiIGlkPSJlbnRpdHlfSm91cm5hbFNlcnZpY2UiPjxyZWN0IGZpbGw9IiNGMUYxRjEiIGhlaWdodD0iOTYuODkwNiIgcng9IjIuNSIgcnk9IjIuNSIgc3R5bGU9InN0cm9rZTojMTgxODE4O3N0cm9rZS13aWR0aDowLjU7IiB3aWR0aD0iMTg1Ljk4ODMiIHg9IjIzLjAxIiB5PSIxMzIuMzI2OSIvPjxlbGxpcHNlIGN4PSI2Mi4xMjE5IiBjeT0iMTQ4LjMyNjkiIGZpbGw9IiNBREQxQjIiIHJ4PSIxMSIgcnk9IjExIiBzdHlsZT0ic3Ryb2tlOiMxODE4MTg7c3Ryb2tlLXdpZHRoOjE7Ii8+PHBhdGggZD0iTTY1LjA5MDcsMTUzLjk2NzUgUTY0LjUxMjUsMTU0LjI2NDQgNjMuODcxOSwxNTQuNDA1IFE2My4yMzEzLDE1NC41NjEzIDYyLjUyODIsMTU0LjU2MTMgUTYwLjAyODIsMTU0LjU2MTMgNTguNywxNTIuOTIwNiBRNTcuMzg3NSwxNTEuMjY0NCA1Ny4zODc1LDE0OC4xMzk0IFE1Ny4zODc1LDE0NS4wMTQ0IDU4LjcsMTQzLjM1ODEgUTYwLjAyODIsMTQxLjcwMTkgNjIuNTI4MiwxNDEuNzAxOSBRNjMuMjMxMywxNDEuNzAxOSA2My44NzE5LDE0MS44NTgxIFE2NC41MjgyLDE0Mi4wMTQ0IDY1LjA5MDcsMTQyLjMxMTMgTDY1LjA5MDcsMTQ1LjAzIFE2NC40NjU3LDE0NC40NTE5IDYzLjg3MTksMTQ0LjE4NjMgUTYzLjI3ODIsMTQzLjkwNSA2Mi42NTMyLDE0My45MDUgUTYxLjMwOTQsMTQzLjkwNSA2MC42MjE5LDE0NC45ODMxIFE1OS45MzQ0LDE0Ni4wNDU2IDU5LjkzNDQsMTQ4LjEzOTQgUTU5LjkzNDQsMTUwLjIzMzEgNjAuNjIxOSwxNTEuMzExMyBRNjEuMzA5NCwxNTIuMzczOCA2Mi42NTMyLDE1Mi4zNzM4IFE2My4yNzgyLDE1Mi4zNzM4IDYzLjg3MTksMTUyLjEwODEgUTY0LjQ2NTcsMTUxLjgyNjkgNjUuMDkwNywxNTEuMjQ4OCBMNjUuMDkwNywxNTMuOTY3NSBaICIgZmlsbD0iIzAwMDAwMCIvPjx0ZXh0IGZpbGw9IiMwMDAwMDAiIGZvbnQtZmFtaWx5PSJzYW5zLXNlcmlmIiBmb250LXNpemU9IjE0IiBsZW5ndGhBZGp1c3Q9InNwYWNpbmciIHRleHRMZW5ndGg9IjEwMC40MDYzIiB4PSI4MS40ODAxIiB5PSIxNTMuMTczNiI+Sm91cm5hbFNlcnZpY2U8L3RleHQ+PGxpbmUgc3R5bGU9InN0cm9rZTojMTgxODE4O3N0cm9rZS13aWR0aDowLjU7IiB4MT0iMjQuMDEiIHgyPSIyMDcuOTk4MyIgeTE9IjE2NC4zMjY5IiB5Mj0iMTY0LjMyNjkiLz48bGluZSBzdHlsZT0ic3Ryb2tlOiMxODE4MTg7c3Ryb2tlLXdpZHRoOjAuNTsiIHgxPSIyNC4wMSIgeDI9IjIwNy45OTgzIiB5MT0iMTcyLjMyNjkiIHkyPSIxNzIuMzI2OSIvPjxlbGxpcHNlIGN4PSIzNC4wMSIgY3k9IjE4NS45NzUzIiBmaWxsPSIjODRCRTg0IiByeD0iMyIgcnk9IjMiIHN0eWxlPSJzdHJva2U6IzAzODA0ODtzdHJva2Utd2lkdGg6MTsiLz48dGV4dCBmaWxsPSIjMDAwMDAwIiBmb250LWZhbWlseT0ic2Fucy1zZXJpZiIgZm9udC1zaXplPSIxNCIgbGVuZ3RoQWRqdXN0PSJzcGFjaW5nIiB0ZXh0TGVuZ3RoPSIxNTMuNjE3MiIgeD0iNDMuMDEiIHk9IjE4OS4zMjIiPmNhbGN1bGF0ZVRvdGFscyhlbnRyeSk8L3RleHQ+PGVsbGlwc2UgY3g9IjM0LjAxIiBjeT0iMjAyLjI3MjIiIGZpbGw9IiM4NEJFODQiIHJ4PSIzIiByeT0iMyIgc3R5bGU9InN0cm9rZTojMDM4MDQ4O3N0cm9rZS13aWR0aDoxOyIvPjx0ZXh0IGZpbGw9IiMwMDAwMDAiIGZvbnQtZmFtaWx5PSJzYW5zLXNlcmlmIiBmb250LXNpemU9IjE0IiBsZW5ndGhBZGp1c3Q9InNwYWNpbmciIHRleHRMZW5ndGg9IjE1OS45ODgzIiB4PSI0My4wMSIgeT0iMjA1LjYxODkiPnZhbGlkYXRlQmFsYW5jZShlbnRyeSk8L3RleHQ+PGVsbGlwc2UgY3g9IjM0LjAxIiBjeT0iMjE4LjU2OTEiIGZpbGw9IiM4NEJFODQiIHJ4PSIzIiByeT0iMyIgc3R5bGU9InN0cm9rZTojMDM4MDQ4O3N0cm9rZS13aWR0aDoxOyIvPjx0ZXh0IGZpbGw9IiMwMDAwMDAiIGZvbnQtZmFtaWx5PSJzYW5zLXNlcmlmIiBmb250LXNpemU9IjE0IiBsZW5ndGhBZGp1c3Q9InNwYWNpbmciIHRleHRMZW5ndGg9IjEwNS41MTI3IiB4PSI0My4wMSIgeT0iMjIxLjkxNTciPmFwcHJvdmUoZW50cnkpPC90ZXh0PjwvZz48ZyBjbGFzcz0iZW50aXR5IiBkYXRhLWVudGl0eT0iR01ONSIgZGF0YS1zb3VyY2UtbGluZT0iMjMiIGRhdGEtdWlkPSJlbnQwMDA2IiBpZD0iZW50aXR5X0dNTjUiPjxwYXRoIGQ9Ik0yNDMuNSwxNjAuNjM2OSBMMjQzLjUsMTc2Ljc2NjkgTDIwOS4xNywxODAuNzY2OSBMMjQzLjUsMTg0Ljc2NjkgTDI0My41LDIwMC45MDI1IEEwLDAgMCAwIDAgMjQzLjUsMjAwLjkwMjUgTDM5NC41MDAyLDIwMC45MDI1IEEwLDAgMCAwIDAgMzk0LjUwMDIsMjAwLjkwMjUgTDM5NC41MDAyLDE3MC42MzY5IEwzODQuNTAwMiwxNjAuNjM2OSBMMjQzLjUsMTYwLjYzNjkgQTAsMCAwIDAgMCAyNDMuNSwxNjAuNjM2OSIgZmlsbD0iI0ZFRkZERCIgc3R5bGU9InN0cm9rZTojMTgxODE4O3N0cm9rZS13aWR0aDowLjU7Ii8+PHBhdGggZD0iTTM4NC41MDAyLDE2MC42MzY5IEwzODQuNTAwMiwxNzAuNjM2OSBMMzk0LjUwMDIsMTcwLjYzNjkgTDM4NC41MDAyLDE2MC42MzY5IiBmaWxsPSIjRkVGRkREIiBzdHlsZT0ic3Ryb2tlOiMxODE4MTg7c3Ryb2tlLXdpZHRoOjAuNTsiLz48dGV4dCBmaWxsPSIjMDAwMDAwIiBmb250LWZhbWlseT0ic2Fucy1zZXJpZiIgZm9udC1zaXplPSIxMyIgbGVuZ3RoQWRqdXN0PSJzcGFjaW5nIiB0ZXh0TGVuZ3RoPSIxMTcuMDAwMSIgeD0iMjQ5LjUiIHk9IjE3Ny43MDM4Ij4mIzEyNDk5OyYjMTI0NzI7JiMxMjQ5MzsmIzEyNDczOyYjMTI1MjU7JiMxMjQ3MjsmIzEyNDgzOyYjMTI0NjM7JiMxMjM2NDs8L3RleHQ+PHRleHQgZmlsbD0iIzAwMDAwMCIgZm9udC1mYW1pbHk9InNhbnMtc2VyaWYiIGZvbnQtc2l6ZT0iMTMiIGxlbmd0aEFkanVzdD0ic3BhY2luZyIgdGV4dExlbmd0aD0iMTMwLjAwMDIiIHg9IjI0OS41IiB5PSIxOTIuODM2NiI+JiMxMjQ2OTsmIzEyNTQwOyYjMTI0OTk7JiMxMjQ3MzsmIzIzNjUyOyYjMTIzOTU7JiMyNTk1NTsmIzEyNDI1OyYjMTI0MDA7JiMxMjQyNzs8L3RleHQ+PC9nPjwhLS1jbGFzcyBSaWNoSm91cm5hbEVudHJ5LS0+PGcgY2xhc3M9ImVudGl0eSIgZGF0YS1lbnRpdHk9IlJpY2hKb3VybmFsRW50cnkiIGRhdGEtc291cmNlLWxpbmU9IjI5IiBkYXRhLXVpZD0iZW50MDAwOSIgaWQ9ImVudGl0eV9SaWNoSm91cm5hbEVudHJ5Ij48cmVjdCBmaWxsPSIjRjFGMUYxIiBoZWlnaHQ9IjE3MC4zNDM4IiByeD0iMi41IiByeT0iMi41IiBzdHlsZT0ic3Ryb2tlOiMxODE4MTg7c3Ryb2tlLXdpZHRoOjAuNTsiIHdpZHRoPSIyNDQuNzM2MyIgeD0iNjc0LjYzIiB5PSI5NS41OTY5Ii8+PGVsbGlwc2UgY3g9IjczNC42OTc0IiBjeT0iMTE1LjcyOTciIGZpbGw9IiNBREQxQjIiIHJ4PSIxMSIgcnk9IjExIiBzdHlsZT0ic3Ryb2tlOiMxODE4MTg7c3Ryb2tlLXdpZHRoOjE7Ii8+PHBhdGggZD0iTTczNy42NjYxLDEyMS4zNzAzIFE3MzcuMDg4LDEyMS42NjcyIDczNi40NDc0LDEyMS44MDc4IFE3MzUuODA2OCwxMjEuOTY0MSA3MzUuMTAzNiwxMjEuOTY0MSBRNzMyLjYwMzYsMTIxLjk2NDEgNzMxLjI3NTUsMTIwLjMyMzQgUTcyOS45NjMsMTE4LjY2NzIgNzI5Ljk2MywxMTUuNTQyMiBRNzI5Ljk2MywxMTIuNDE3MiA3MzEuMjc1NSwxMTAuNzYwOSBRNzMyLjYwMzYsMTA5LjEwNDcgNzM1LjEwMzYsMTA5LjEwNDcgUTczNS44MDY4LDEwOS4xMDQ3IDczNi40NDc0LDEwOS4yNjA5IFE3MzcuMTAzNiwxMDkuNDE3MiA3MzcuNjY2MSwxMDkuNzE0MSBMNzM3LjY2NjEsMTEyLjQzMjggUTczNy4wNDExLDExMS44NTQ3IDczNi40NDc0LDExMS41ODkxIFE3MzUuODUzNiwxMTEuMzA3OCA3MzUuMjI4NiwxMTEuMzA3OCBRNzMzLjg4NDksMTExLjMwNzggNzMzLjE5NzQsMTEyLjM4NTkgUTczMi41MDk5LDExMy40NDg0IDczMi41MDk5LDExNS41NDIyIFE3MzIuNTA5OSwxMTcuNjM1OSA3MzMuMTk3NCwxMTguNzE0MSBRNzMzLjg4NDksMTE5Ljc3NjYgNzM1LjIyODYsMTE5Ljc3NjYgUTczNS44NTM2LDExOS43NzY2IDczNi40NDc0LDExOS41MTA5IFE3MzcuMDQxMSwxMTkuMjI5NyA3MzcuNjY2MSwxMTguNjUxNiBMNzM3LjY2NjEsMTIxLjM3MDMgWiAiIGZpbGw9IiMwMDAwMDAiLz48dGV4dCBmaWxsPSIjMDAwMDAwIiBmb250LWZhbWlseT0ic2Fucy1zZXJpZiIgZm9udC1zaXplPSIxMiIgZm9udC1zdHlsZT0iaXRhbGljIiBsZW5ndGhBZGp1c3Q9InNwYWNpbmciIHRleHRMZW5ndGg9IjQ5LjcxNjgiIHg9Ijc4OC4zODk4IiB5PSIxMTEuNzM1NSI+JiMxNzE7RW50aXR5JiMxODc7PC90ZXh0Pjx0ZXh0IGZpbGw9IiMwMDAwMDAiIGZvbnQtZmFtaWx5PSJzYW5zLXNlcmlmIiBmb250LXNpemU9IjE0IiBsZW5ndGhBZGp1c3Q9InNwYWNpbmciIHRleHRMZW5ndGg9IjExNi4xMDE2IiB4PSI3NTUuMTk3NCIgeT0iMTI3LjU2MDciPlJpY2hKb3VybmFsRW50cnk8L3RleHQ+PGxpbmUgc3R5bGU9InN0cm9rZTojMTgxODE4O3N0cm9rZS13aWR0aDowLjU7IiB4MT0iNjc1LjYzIiB4Mj0iOTE4LjM2NjMiIHkxPSIxMzUuODYyNSIgeTI9IjEzNS44NjI1Ii8+PHJlY3QgZmlsbD0ibm9uZSIgaGVpZ2h0PSI2IiBzdHlsZT0ic3Ryb2tlOiNDODI5MzA7c3Ryb2tlLXdpZHRoOjE7IiB3aWR0aD0iNiIgeD0iNjgyLjYzIiB5PSIxNDYuNTEwOSIvPjx0ZXh0IGZpbGw9IiMwMDAwMDAiIGZvbnQtZmFtaWx5PSJzYW5zLXNlcmlmIiBmb250LXNpemU9IjE0IiBsZW5ndGhBZGp1c3Q9InNwYWNpbmciIHRleHRMZW5ndGg9IjIxOC43MzYzIiB4PSI2OTQuNjMiIHk9IjE1Mi44NTc2Ij5qb3VybmFsTnVtYmVyOiBKb3VybmFsTnVtYmVyPC90ZXh0PjxyZWN0IGZpbGw9Im5vbmUiIGhlaWdodD0iNiIgc3R5bGU9InN0cm9rZTojQzgyOTMwO3N0cm9rZS13aWR0aDoxOyIgd2lkdGg9IjYiIHg9IjY4Mi42MyIgeT0iMTYyLjgwNzgiLz48dGV4dCBmaWxsPSIjMDAwMDAwIiBmb250LWZhbWlseT0ic2Fucy1zZXJpZiIgZm9udC1zaXplPSIxNCIgbGVuZ3RoQWRqdXN0PSJzcGFjaW5nIiB0ZXh0TGVuZ3RoPSIxNzMuMTgxNiIgeD0iNjk0LjYzIiB5PSIxNjkuMTU0NSI+am91cm5hbERhdGU6IEpvdXJuYWxEYXRlPC90ZXh0PjxyZWN0IGZpbGw9Im5vbmUiIGhlaWdodD0iNiIgc3R5bGU9InN0cm9rZTojQzgyOTMwO3N0cm9rZS13aWR0aDoxOyIgd2lkdGg9IjYiIHg9IjY4Mi42MyIgeT0iMTc5LjEwNDciLz48dGV4dCBmaWxsPSIjMDAwMDAwIiBmb250LWZhbWlseT0ic2Fucy1zZXJpZiIgZm9udC1zaXplPSIxNCIgbGVuZ3RoQWRqdXN0PSJzcGFjaW5nIiB0ZXh0TGVuZ3RoPSIxNjcuNTAxIiB4PSI2OTQuNjMiIHk9IjE4NS40NTE0Ij5saW5lczogTGlzdCZsdDtKb3VybmFsTGluZSZndDs8L3RleHQ+PGxpbmUgc3R5bGU9InN0cm9rZTojMTgxODE4O3N0cm9rZS13aWR0aDowLjU7IiB4MT0iNjc1LjYzIiB4Mj0iOTE4LjM2NjMiIHkxPSIxOTIuNzUzMSIgeTI9IjE5Mi43NTMxIi8+PGVsbGlwc2UgY3g9IjY4NS42MyIgY3k9IjIwNi40MDE2IiBmaWxsPSIjODRCRTg0IiByeD0iMyIgcnk9IjMiIHN0eWxlPSJzdHJva2U6IzAzODA0ODtzdHJva2Utd2lkdGg6MTsiLz48dGV4dCBmaWxsPSIjMDAwMDAwIiBmb250LWZhbWlseT0ic2Fucy1zZXJpZiIgZm9udC1zaXplPSIxNCIgbGVuZ3RoQWRqdXN0PSJzcGFjaW5nIiB0ZXh0TGVuZ3RoPSIxNDYuOTY1OCIgeD0iNjk0LjYzIiB5PSIyMDkuNzQ4MiI+Y2FsY3VsYXRlVG90YWxEZWJpdCgpPC90ZXh0PjxlbGxpcHNlIGN4PSI2ODUuNjMiIGN5PSIyMjIuNjk4NCIgZmlsbD0iIzg0QkU4NCIgcng9IjMiIHJ5PSIzIiBzdHlsZT0ic3Ryb2tlOiMwMzgwNDg7c3Ryb2tlLXdpZHRoOjE7Ii8+PHRleHQgZmlsbD0iIzAwMDAwMCIgZm9udC1mYW1pbHk9InNhbnMtc2VyaWYiIGZvbnQtc2l6ZT0iMTQiIGxlbmd0aEFkanVzdD0ic3BhY2luZyIgdGV4dExlbmd0aD0iMTUxLjcxNjgiIHg9IjY5NC42MyIgeT0iMjI2LjA0NTEiPmNhbGN1bGF0ZVRvdGFsQ3JlZGl0KCk8L3RleHQ+PGVsbGlwc2UgY3g9IjY4NS42MyIgY3k9IjIzOC45OTUzIiBmaWxsPSIjODRCRTg0IiByeD0iMyIgcnk9IjMiIHN0eWxlPSJzdHJva2U6IzAzODA0ODtzdHJva2Utd2lkdGg6MTsiLz48dGV4dCBmaWxsPSIjMDAwMDAwIiBmb250LWZhbWlseT0ic2Fucy1zZXJpZiIgZm9udC1zaXplPSIxNCIgbGVuZ3RoQWRqdXN0PSJzcGFjaW5nIiB0ZXh0TGVuZ3RoPSI4Ni44MzAxIiB4PSI2OTQuNjMiIHk9IjI0Mi4zNDIiPmlzQmFsYW5jZWQoKTwvdGV4dD48ZWxsaXBzZSBjeD0iNjg1LjYzIiBjeT0iMjU1LjI5MjIiIGZpbGw9IiM4NEJFODQiIHJ4PSIzIiByeT0iMyIgc3R5bGU9InN0cm9rZTojMDM4MDQ4O3N0cm9rZS13aWR0aDoxOyIvPjx0ZXh0IGZpbGw9IiMwMDAwMDAiIGZvbnQtZmFtaWx5PSJzYW5zLXNlcmlmIiBmb250LXNpemU9IjE0IiBsZW5ndGhBZGp1c3Q9InNwYWNpbmciIHRleHRMZW5ndGg9IjY4LjQ5NjEiIHg9IjY5NC42MyIgeT0iMjU4LjYzODkiPmFwcHJvdmUoKTwvdGV4dD48L2c+PGcgY2xhc3M9ImVudGl0eSIgZGF0YS1lbnRpdHk9IkdNTjEwIiBkYXRhLXNvdXJjZS1saW5lPSI0MCIgZGF0YS11aWQ9ImVudDAwMTEiIGlkPSJlbnRpdHlfR01OMTAiPjxwYXRoIGQ9Ik05NTQuNSwxNjAuNjM2OSBMOTU0LjUsMTc2Ljc2NjkgTDkxOS41MiwxODAuNzY2OSBMOTU0LjUsMTg0Ljc2NjkgTDk1NC41LDIwMC45MDI1IEEwLDAgMCAwIDAgOTU0LjUsMjAwLjkwMjUgTDExMzEuNTAwMiwyMDAuOTAyNSBBMCwwIDAgMCAwIDExMzEuNTAwMiwyMDAuOTAyNSBMMTEzMS41MDAyLDE3MC42MzY5IEwxMTIxLjUwMDIsMTYwLjYzNjkgTDk1NC41LDE2MC42MzY5IEEwLDAgMCAwIDAgOTU0LjUsMTYwLjYzNjkiIGZpbGw9IiNGRUZGREQiIHN0eWxlPSJzdHJva2U6IzE4MTgxODtzdHJva2Utd2lkdGg6MC41OyIvPjxwYXRoIGQ9Ik0xMTIxLjUwMDIsMTYwLjYzNjkgTDExMjEuNTAwMiwxNzAuNjM2OSBMMTEzMS41MDAyLDE3MC42MzY5IEwxMTIxLjUwMDIsMTYwLjYzNjkiIGZpbGw9IiNGRUZGREQiIHN0eWxlPSJzdHJva2U6IzE4MTgxODtzdHJva2Utd2lkdGg6MC41OyIvPjx0ZXh0IGZpbGw9IiMwMDAwMDAiIGZvbnQtZmFtaWx5PSJzYW5zLXNlcmlmIiBmb250LXNpemU9IjEzIiBsZW5ndGhBZGp1c3Q9InNwYWNpbmciIHRleHRMZW5ndGg9IjExNy4wMDAxIiB4PSI5NjAuNSIgeT0iMTc3LjcwMzgiPiYjMTI0OTk7JiMxMjQ3MjsmIzEyNDkzOyYjMTI0NzM7JiMxMjUyNTsmIzEyNDcyOyYjMTI0ODM7JiMxMjQ2MzsmIzEyMzY0OzwvdGV4dD48dGV4dCBmaWxsPSIjMDAwMDAwIiBmb250LWZhbWlseT0ic2Fucy1zZXJpZiIgZm9udC1zaXplPSIxMyIgbGVuZ3RoQWRqdXN0PSJzcGFjaW5nIiB0ZXh0TGVuZ3RoPSIxNTYuMDAwMiIgeD0iOTYwLjUiIHk9IjE5Mi44MzY2Ij4mIzEyNDU2OyYjMTI1MzE7JiMxMjQ4NjsmIzEyNDUxOyYjMTI0ODY7JiMxMjQ1MTsmIzEyMzk1OyYjMzg1OTg7JiMzMjAwNDsmIzEyMzczOyYjMTI0Mjg7JiMxMjQyNzs8L3RleHQ+PC9nPjwhLS1TUkM9W1pMQkJJWG4xNUR0dExuSWszOThWUThQUDZCREc5OGtPN29ZaFJ6ZUFSVkxHTkpDVzRhWE5ZTjc4OTI2NE1NS3JGaVlHOFQ0eTE4SzFGLU9vSGJWLUdjd183QVNKQzlra2dkREV0TGx0ZDNSSUhDMmtWZG8tNmhuMnJxS3RHN2s4eFlVd1ZOSWxxT3FtX0pSZmx4eVV6M25GV3AxU1hRSVZnb3dLZWZsbjdqaHpfNWdBeFdGUTJ0SFpFandDa3REaXNuQ0hKbkFzNGhVcnVqNVpQVkdNUXBIZWJNUWhzSUotOE5qSFNDazFwdlFMV0gzcTU1cFkxZG9zNmVqWUlxRzBZVDJvUE1JaVZCUGNqNUdYZUlPc2Y4MXJRTm9zQUNDYjQ3QUpIbk5uSTRER09uUE8yNlFid1pwX1c4MmEzYW1MTVUtUWZlSFVVaENKaGU3a0kwNHFzMEFaSHVqc0hCZmRzSUVJVVNZY3B3ZnFVMkczbVhUdm45TTBBUzVSQkhydFJXNGdoYzgzSkNqbW14M3VVUXM5WC11WnNaRHFSejZVZV9rUXhudFFPcW54N2poSkYwVElkNC0gLTdzOHdra21WZUVyWVVlQnNaR1NnTzVkamhDVVRSRDV6b0tmYUlLeFpsTm10ZDFtRFBfOXlBaU42VnNKd2ZCc3YzamdsdGJxU3ctZFVDUEllSTJmOEE3QVBjNFI5aDFCS19DbEZGRXF5YjVjeTIzaWRQNTh3TkVIUGtWaUZPLWxwdDZGakNGX1RUejRVYkR6cVRGcmZ6X1VsN0tweFE3a3AxbHkxXS0tPjwvZz48L3N2Zz4=" class="uml" alt="uml diagram" title="" /></p>
<h3 id="_2">段階的な移行<a class="headerlink" href="#_2" title="Permanent link">&para;</a></h3>
<p>本プロジェクトでは、以下の段階でリッチモデルへ移行しています。</p>
<p><strong>Phase 1: 貧血モデルで CRUD 実装</strong></p>
<div class="highlight"><pre><span></span><code><span class="c1">// 初期実装：データの入れ物として機能</span>
<span class="kd">public</span><span class="w"> </span><span class="kd">class</span> <span class="nc">JournalEntry</span><span class="w"> </span><span class="p">{</span>
<span class="w">    </span><span class="n">Integer</span><span class="w"> </span><span class="n">journalId</span><span class="p">;</span>
<span class="w">    </span><span class="n">LocalDate</span><span class="w"> </span><span class="n">journalDate</span><span class="p">;</span>
<span class="w">    </span><span class="n">String</span><span class="w"> </span><span class="n">description</span><span class="p">;</span>
<span class="w">    </span><span class="n">BigDecimal</span><span class="w"> </span><span class="n">totalDebit</span><span class="p">;</span>
<span class="w">    </span><span class="n">BigDecimal</span><span class="w"> </span><span class="n">totalCredit</span><span class="p">;</span>
<span class="w">    </span><span class="n">String</span><span class="w"> </span><span class="n">status</span><span class="p">;</span>
<span class="w">    </span><span class="c1">// getter/setter のみ</span>
<span class="p">}</span>
</code></pre></div>
<p><strong>Phase 2: 値オブジェクトの導入</strong></p>
<div class="highlight"><pre><span></span><code><span class="c1">// 値オブジェクトによる型安全性の向上</span>
<span class="kd">public</span><span class="w"> </span><span class="kd">class</span> <span class="nc">JournalEntry</span><span class="w"> </span><span class="p">{</span>
<span class="w">    </span><span class="n">JournalNumber</span><span class="w"> </span><span class="n">journalNumber</span><span class="p">;</span>
<span class="w">    </span><span class="n">JournalDate</span><span class="w"> </span><span class="n">journalDate</span><span class="p">;</span>
<span class="w">    </span><span class="n">Description</span><span class="w"> </span><span class="n">description</span><span class="p">;</span>
<span class="w">    </span><span class="n">Money</span><span class="w"> </span><span class="n">totalDebit</span><span class="p">;</span>
<span class="w">    </span><span class="n">Money</span><span class="w"> </span><span class="n">totalCredit</span><span class="p">;</span>
<span class="w">    </span><span class="n">JournalStatus</span><span class="w"> </span><span class="n">status</span><span class="p">;</span>
<span class="p">}</span>
</code></pre></div>
<p><strong>Phase 3: ビジネスロジックの移動</strong></p>
<div class="highlight"><pre><span></span><code><span class="c1">// ビジネスロジックをエンティティに移動</span>
<span class="nd">@Value</span>
<span class="nd">@With</span>
<span class="kd">public</span><span class="w"> </span><span class="kd">class</span> <span class="nc">JournalEntry</span><span class="w"> </span><span class="p">{</span>
<span class="w">    </span><span class="n">JournalNumber</span><span class="w"> </span><span class="n">journalNumber</span><span class="p">;</span>
<span class="w">    </span><span class="n">JournalDate</span><span class="w"> </span><span class="n">journalDate</span><span class="p">;</span>
<span class="w">    </span><span class="n">Description</span><span class="w"> </span><span class="n">description</span><span class="p">;</span>
<span class="w">    </span><span class="n">JournalStatus</span><span class="w"> </span><span class="n">status</span><span class="p">;</span>
<span class="w">    </span><span class="n">List</span><span class="o">&lt;</span><span class="n">JournalLine</span><span class="o">&gt;</span><span class="w"> </span><span class="n">lines</span><span class="p">;</span>

<span class="w">    </span><span class="kd">public</span><span class="w"> </span><span class="kd">static</span><span class="w"> </span><span class="n">JournalEntry</span><span class="w"> </span><span class="nf">create</span><span class="p">(</span>
<span class="w">            </span><span class="n">LocalDate</span><span class="w"> </span><span class="n">journalDate</span><span class="p">,</span>
<span class="w">            </span><span class="n">String</span><span class="w"> </span><span class="n">description</span><span class="p">,</span>
<span class="w">            </span><span class="n">List</span><span class="o">&lt;</span><span class="n">JournalLine</span><span class="o">&gt;</span><span class="w"> </span><span class="n">lines</span>
<span class="w">    </span><span class="p">)</span><span class="w"> </span><span class="p">{</span>
<span class="w">        </span><span class="c1">// バリデーション: 借方と貸方が一致すること</span>
<span class="w">        </span><span class="n">Money</span><span class="w"> </span><span class="n">totalDebit</span><span class="w"> </span><span class="o">=</span><span class="w"> </span><span class="n">calculateTotalDebit</span><span class="p">(</span><span class="n">lines</span><span class="p">);</span>
<span class="w">        </span><span class="n">Money</span><span class="w"> </span><span class="n">totalCredit</span><span class="w"> </span><span class="o">=</span><span class="w"> </span><span class="n">calculateTotalCredit</span><span class="p">(</span><span class="n">lines</span><span class="p">);</span>

<span class="w">        </span><span class="k">if</span><span class="w"> </span><span class="p">(</span><span class="o">!</span><span class="n">totalDebit</span><span class="p">.</span><span class="na">equals</span><span class="p">(</span><span class="n">totalCredit</span><span class="p">))</span><span class="w"> </span><span class="p">{</span>
<span class="w">            </span><span class="k">throw</span><span class="w"> </span><span class="k">new</span><span class="w"> </span><span class="n">IllegalArgumentException</span><span class="p">(</span>
<span class="w">                </span><span class="s">&quot;借方と貸方が一致しません: 借方=&quot;</span><span class="w"> </span><span class="o">+</span><span class="w"> </span><span class="n">totalDebit</span><span class="w"> </span><span class="o">+</span>
<span class="w">                </span><span class="s">&quot;, 貸方=&quot;</span><span class="w"> </span><span class="o">+</span><span class="w"> </span><span class="n">totalCredit</span>
<span class="w">            </span><span class="p">);</span>
<span class="w">        </span><span class="p">}</span>

<span class="w">        </span><span class="c1">// バリデーション: 仕訳明細が空でないこと</span>
<span class="w">        </span><span class="k">if</span><span class="w"> </span><span class="p">(</span><span class="n">lines</span><span class="p">.</span><span class="na">isEmpty</span><span class="p">())</span><span class="w"> </span><span class="p">{</span>
<span class="w">            </span><span class="k">throw</span><span class="w"> </span><span class="k">new</span><span class="w"> </span><span class="n">IllegalArgumentException</span><span class="p">(</span><span class="s">&quot;仕訳明細が必要です&quot;</span><span class="p">);</span>
<span class="w">        </span><span class="p">}</span>

<span class="w">        </span><span class="k">return</span><span class="w"> </span><span class="k">new</span><span class="w"> </span><span class="n">JournalEntry</span><span class="p">(</span>
<span class="w">            </span><span class="kc">null</span><span class="p">,</span><span class="w">  </span><span class="c1">// 採番は保存時</span>
<span class="w">            </span><span class="n">JournalDate</span><span class="p">.</span><span class="na">of</span><span class="p">(</span><span class="n">journalDate</span><span class="p">),</span>
<span class="w">            </span><span class="n">Description</span><span class="p">.</span><span class="na">of</span><span class="p">(</span><span class="n">description</span><span class="p">),</span>
<span class="w">            </span><span class="n">JournalStatus</span><span class="p">.</span><span class="na">DRAFT</span><span class="p">,</span>
<span class="w">            </span><span class="n">lines</span>
<span class="w">        </span><span class="p">);</span>
<span class="w">    </span><span class="p">}</span>

<span class="w">    </span><span class="kd">private</span><span class="w"> </span><span class="kd">static</span><span class="w"> </span><span class="n">Money</span><span class="w"> </span><span class="nf">calculateTotalDebit</span><span class="p">(</span><span class="n">List</span><span class="o">&lt;</span><span class="n">JournalLine</span><span class="o">&gt;</span><span class="w"> </span><span class="n">lines</span><span class="p">)</span><span class="w"> </span><span class="p">{</span>
<span class="w">        </span><span class="k">return</span><span class="w"> </span><span class="n">lines</span><span class="p">.</span><span class="na">stream</span><span class="p">()</span>
<span class="w">            </span><span class="p">.</span><span class="na">map</span><span class="p">(</span><span class="n">JournalLine</span><span class="p">::</span><span class="n">getDebitAmount</span><span class="p">)</span>
<span class="w">            </span><span class="p">.</span><span class="na">reduce</span><span class="p">(</span><span class="n">Money</span><span class="p">.</span><span class="na">ZERO</span><span class="p">,</span><span class="w"> </span><span class="n">Money</span><span class="p">::</span><span class="n">add</span><span class="p">);</span>
<span class="w">    </span><span class="p">}</span>

<span class="w">    </span><span class="kd">private</span><span class="w"> </span><span class="kd">static</span><span class="w"> </span><span class="n">Money</span><span class="w"> </span><span class="nf">calculateTotalCredit</span><span class="p">(</span><span class="n">List</span><span class="o">&lt;</span><span class="n">JournalLine</span><span class="o">&gt;</span><span class="w"> </span><span class="n">lines</span><span class="p">)</span><span class="w"> </span><span class="p">{</span>
<span class="w">        </span><span class="k">return</span><span class="w"> </span><span class="n">lines</span><span class="p">.</span><span class="na">stream</span><span class="p">()</span>
<span class="w">            </span><span class="p">.</span><span class="na">map</span><span class="p">(</span><span class="n">JournalLine</span><span class="p">::</span><span class="n">getCreditAmount</span><span class="p">)</span>
<span class="w">            </span><span class="p">.</span><span class="na">reduce</span><span class="p">(</span><span class="n">Money</span><span class="p">.</span><span class="na">ZERO</span><span class="p">,</span><span class="w"> </span><span class="n">Money</span><span class="p">::</span><span class="n">add</span><span class="p">);</span>
<span class="w">    </span><span class="p">}</span>
<span class="p">}</span>
</code></pre></div>
<h3 id="_3">ビジネスロジックの移動<a class="headerlink" href="#_3" title="Permanent link">&para;</a></h3>
<p>ファクトリメソッドにビジネスロジックを集約することで、エンティティの整合性を保証します。</p>
<div class="highlight"><pre><span></span><code><span class="nd">@Value</span>
<span class="nd">@With</span>
<span class="kd">public</span><span class="w"> </span><span class="kd">class</span> <span class="nc">JournalEntry</span><span class="w"> </span><span class="p">{</span>

<span class="w">    </span><span class="n">Integer</span><span class="w"> </span><span class="n">journalId</span><span class="p">;</span>
<span class="w">    </span><span class="n">JournalNumber</span><span class="w"> </span><span class="n">journalNumber</span><span class="p">;</span>
<span class="w">    </span><span class="n">JournalDate</span><span class="w"> </span><span class="n">journalDate</span><span class="p">;</span>
<span class="w">    </span><span class="n">Description</span><span class="w"> </span><span class="n">description</span><span class="p">;</span>
<span class="w">    </span><span class="n">JournalStatus</span><span class="w"> </span><span class="n">status</span><span class="p">;</span>
<span class="w">    </span><span class="n">List</span><span class="o">&lt;</span><span class="n">JournalLine</span><span class="o">&gt;</span><span class="w"> </span><span class="n">lines</span><span class="p">;</span>
<span class="w">    </span><span class="n">LocalDateTime</span><span class="w"> </span><span class="n">createdAt</span><span class="p">;</span>
<span class="w">    </span><span class="n">LocalDateTime</span><span class="w"> </span><span class="n">updatedAt</span><span class="p">;</span>

<span class="w">    </span><span class="cm">/**</span>
<span class="cm">     * 新規仕訳を作成</span>
<span class="cm">     */</span>
<span class="w">    </span><span class="kd">public</span><span class="w"> </span><span class="kd">static</span><span class="w"> </span><span class="n">JournalEntry</span><span class="w"> </span><span class="nf">create</span><span class="p">(</span>
<span class="w">            </span><span class="n">LocalDate</span><span class="w"> </span><span class="n">journalDate</span><span class="p">,</span>
<span class="w">            </span><span class="n">String</span><span class="w"> </span><span class="n">description</span><span class="p">,</span>
<span class="w">            </span><span class="n">List</span><span class="o">&lt;</span><span class="n">JournalLine</span><span class="o">&gt;</span><span class="w"> </span><span class="n">lines</span>
<span class="w">    </span><span class="p">)</span><span class="w"> </span><span class="p">{</span>
<span class="w">        </span><span class="c1">// ビジネスルール: 仕訳明細は必須</span>
<span class="w">        </span><span class="k">if</span><span class="w"> </span><span class="p">(</span><span class="n">lines</span><span class="w"> </span><span class="o">==</span><span class="w"> </span><span class="kc">null</span><span class="w"> </span><span class="o">||</span><span class="w"> </span><span class="n">lines</span><span class="p">.</span><span class="na">isEmpty</span><span class="p">())</span><span class="w"> </span><span class="p">{</span>
<span class="w">            </span><span class="k">throw</span><span class="w"> </span><span class="k">new</span><span class="w"> </span><span class="n">IllegalArgumentException</span><span class="p">(</span><span class="s">&quot;仕訳明細が必要です&quot;</span><span class="p">);</span>
<span class="w">        </span><span class="p">}</span>

<span class="w">        </span><span class="c1">// ビジネスルール: 借方のみ、または貸方のみは不可</span>
<span class="w">        </span><span class="kt">boolean</span><span class="w"> </span><span class="n">hasDebit</span><span class="w"> </span><span class="o">=</span><span class="w"> </span><span class="n">lines</span><span class="p">.</span><span class="na">stream</span><span class="p">().</span><span class="na">anyMatch</span><span class="p">(</span><span class="n">l</span><span class="w"> </span><span class="o">-&gt;</span><span class="w"> </span><span class="n">l</span><span class="p">.</span><span class="na">isDebit</span><span class="p">());</span>
<span class="w">        </span><span class="kt">boolean</span><span class="w"> </span><span class="n">hasCredit</span><span class="w"> </span><span class="o">=</span><span class="w"> </span><span class="n">lines</span><span class="p">.</span><span class="na">stream</span><span class="p">().</span><span class="na">anyMatch</span><span class="p">(</span><span class="n">l</span><span class="w"> </span><span class="o">-&gt;</span><span class="w"> </span><span class="n">l</span><span class="p">.</span><span class="na">isCredit</span><span class="p">());</span>
<span class="w">        </span><span class="k">if</span><span class="w"> </span><span class="p">(</span><span class="o">!</span><span class="n">hasDebit</span><span class="w"> </span><span class="o">||</span><span class="w"> </span><span class="o">!</span><span class="n">hasCredit</span><span class="p">)</span><span class="w"> </span><span class="p">{</span>
<span class="w">            </span><span class="k">throw</span><span class="w"> </span><span class="k">new</span><span class="w"> </span><span class="n">IllegalArgumentException</span><span class="p">(</span>
<span class="w">                </span><span class="s">&quot;借方と貸方の両方が必要です&quot;</span>
<span class="w">            </span><span class="p">);</span>
<span class="w">        </span><span class="p">}</span>

<span class="w">        </span><span class="c1">// ビジネスルール: 借方合計と貸方合計が一致すること</span>
<span class="w">        </span><span class="n">Money</span><span class="w"> </span><span class="n">totalDebit</span><span class="w"> </span><span class="o">=</span><span class="w"> </span><span class="n">lines</span><span class="p">.</span><span class="na">stream</span><span class="p">()</span>
<span class="w">            </span><span class="p">.</span><span class="na">filter</span><span class="p">(</span><span class="n">JournalLine</span><span class="p">::</span><span class="n">isDebit</span><span class="p">)</span>
<span class="w">            </span><span class="p">.</span><span class="na">map</span><span class="p">(</span><span class="n">JournalLine</span><span class="p">::</span><span class="n">getAmount</span><span class="p">)</span>
<span class="w">            </span><span class="p">.</span><span class="na">reduce</span><span class="p">(</span><span class="n">Money</span><span class="p">.</span><span class="na">ZERO</span><span class="p">,</span><span class="w"> </span><span class="n">Money</span><span class="p">::</span><span class="n">add</span><span class="p">);</span>

<span class="w">        </span><span class="n">Money</span><span class="w"> </span><span class="n">totalCredit</span><span class="w"> </span><span class="o">=</span><span class="w"> </span><span class="n">lines</span><span class="p">.</span><span class="na">stream</span><span class="p">()</span>
<span class="w">            </span><span class="p">.</span><span class="na">filter</span><span class="p">(</span><span class="n">JournalLine</span><span class="p">::</span><span class="n">isCredit</span><span class="p">)</span>
<span class="w">            </span><span class="p">.</span><span class="na">map</span><span class="p">(</span><span class="n">JournalLine</span><span class="p">::</span><span class="n">getAmount</span><span class="p">)</span>
<span class="w">            </span><span class="p">.</span><span class="na">reduce</span><span class="p">(</span><span class="n">Money</span><span class="p">.</span><span class="na">ZERO</span><span class="p">,</span><span class="w"> </span><span class="n">Money</span><span class="p">::</span><span class="n">add</span><span class="p">);</span>

<span class="w">        </span><span class="k">if</span><span class="w"> </span><span class="p">(</span><span class="o">!</span><span class="n">totalDebit</span><span class="p">.</span><span class="na">equals</span><span class="p">(</span><span class="n">totalCredit</span><span class="p">))</span><span class="w"> </span><span class="p">{</span>
<span class="w">            </span><span class="k">throw</span><span class="w"> </span><span class="k">new</span><span class="w"> </span><span class="n">IllegalArgumentException</span><span class="p">(</span>
<span class="w">                </span><span class="n">String</span><span class="p">.</span><span class="na">format</span><span class="p">(</span>
<span class="w">                    </span><span class="s">&quot;借方と貸方が一致しません: 借方=%s, 貸方=%s&quot;</span><span class="p">,</span>
<span class="w">                    </span><span class="n">totalDebit</span><span class="p">,</span><span class="w"> </span><span class="n">totalCredit</span>
<span class="w">                </span><span class="p">)</span>
<span class="w">            </span><span class="p">);</span>
<span class="w">        </span><span class="p">}</span>

<span class="w">        </span><span class="k">return</span><span class="w"> </span><span class="k">new</span><span class="w"> </span><span class="n">JournalEntry</span><span class="p">(</span>
<span class="w">            </span><span class="kc">null</span><span class="p">,</span>
<span class="w">            </span><span class="kc">null</span><span class="p">,</span><span class="w">  </span><span class="c1">// 採番は保存時</span>
<span class="w">            </span><span class="n">JournalDate</span><span class="p">.</span><span class="na">of</span><span class="p">(</span><span class="n">journalDate</span><span class="p">),</span>
<span class="w">            </span><span class="n">Description</span><span class="p">.</span><span class="na">of</span><span class="p">(</span><span class="n">description</span><span class="p">),</span>
<span class="w">            </span><span class="n">JournalStatus</span><span class="p">.</span><span class="na">DRAFT</span><span class="p">,</span>
<span class="w">            </span><span class="n">lines</span><span class="p">,</span>
<span class="w">            </span><span class="kc">null</span><span class="p">,</span>
<span class="w">            </span><span class="kc">null</span>
<span class="w">        </span><span class="p">);</span>
<span class="w">    </span><span class="p">}</span>

<span class="w">    </span><span class="cm">/**</span>
<span class="cm">     * 仕訳を承認</span>
<span class="cm">     */</span>
<span class="w">    </span><span class="kd">public</span><span class="w"> </span><span class="n">JournalEntry</span><span class="w"> </span><span class="nf">approve</span><span class="p">()</span><span class="w"> </span><span class="p">{</span>
<span class="w">        </span><span class="k">if</span><span class="w"> </span><span class="p">(</span><span class="k">this</span><span class="p">.</span><span class="na">status</span><span class="w"> </span><span class="o">!=</span><span class="w"> </span><span class="n">JournalStatus</span><span class="p">.</span><span class="na">DRAFT</span><span class="p">)</span><span class="w"> </span><span class="p">{</span>
<span class="w">            </span><span class="k">throw</span><span class="w"> </span><span class="k">new</span><span class="w"> </span><span class="n">IllegalStateException</span><span class="p">(</span>
<span class="w">                </span><span class="s">&quot;下書き状態の仕訳のみ承認できます&quot;</span>
<span class="w">            </span><span class="p">);</span>
<span class="w">        </span><span class="p">}</span>
<span class="w">        </span><span class="k">return</span><span class="w"> </span><span class="k">this</span><span class="p">.</span><span class="na">withStatus</span><span class="p">(</span><span class="n">JournalStatus</span><span class="p">.</span><span class="na">APPROVED</span><span class="p">);</span>
<span class="w">    </span><span class="p">}</span>

<span class="w">    </span><span class="cm">/**</span>
<span class="cm">     * 仕訳を確定</span>
<span class="cm">     */</span>
<span class="w">    </span><span class="kd">public</span><span class="w"> </span><span class="n">JournalEntry</span><span class="w"> </span><span class="nf">confirm</span><span class="p">()</span><span class="w"> </span><span class="p">{</span>
<span class="w">        </span><span class="k">if</span><span class="w"> </span><span class="p">(</span><span class="k">this</span><span class="p">.</span><span class="na">status</span><span class="w"> </span><span class="o">!=</span><span class="w"> </span><span class="n">JournalStatus</span><span class="p">.</span><span class="na">APPROVED</span><span class="p">)</span><span class="w"> </span><span class="p">{</span>
<span class="w">            </span><span class="k">throw</span><span class="w"> </span><span class="k">new</span><span class="w"> </span><span class="n">IllegalStateException</span><span class="p">(</span>
<span class="w">                </span><span class="s">&quot;承認済みの仕訳のみ確定できます&quot;</span>
<span class="w">            </span><span class="p">);</span>
<span class="w">        </span><span class="p">}</span>
<span class="w">        </span><span class="k">return</span><span class="w"> </span><span class="k">this</span><span class="p">.</span><span class="na">withStatus</span><span class="p">(</span><span class="n">JournalStatus</span><span class="p">.</span><span class="na">CONFIRMED</span><span class="p">);</span>
<span class="w">    </span><span class="p">}</span>

<span class="w">    </span><span class="cm">/**</span>
<span class="cm">     * 仕訳を取り消し</span>
<span class="cm">     */</span>
<span class="w">    </span><span class="kd">public</span><span class="w"> </span><span class="n">JournalEntry</span><span class="w"> </span><span class="nf">cancel</span><span class="p">()</span><span class="w"> </span><span class="p">{</span>
<span class="w">        </span><span class="k">if</span><span class="w"> </span><span class="p">(</span><span class="k">this</span><span class="p">.</span><span class="na">status</span><span class="w"> </span><span class="o">==</span><span class="w"> </span><span class="n">JournalStatus</span><span class="p">.</span><span class="na">CANCELLED</span><span class="p">)</span><span class="w"> </span><span class="p">{</span>
<span class="w">            </span><span class="k">throw</span><span class="w"> </span><span class="k">new</span><span class="w"> </span><span class="n">IllegalStateException</span><span class="p">(</span><span class="s">&quot;既に取り消し済みです&quot;</span><span class="p">);</span>
<span class="w">        </span><span class="p">}</span>
<span class="w">        </span><span class="k">return</span><span class="w"> </span><span class="k">this</span><span class="p">.</span><span class="na">withStatus</span><span class="p">(</span><span class="n">JournalStatus</span><span class="p">.</span><span class="na">CANCELLED</span><span class="p">);</span>
<span class="w">    </span><span class="p">}</span>

<span class="w">    </span><span class="cm">/**</span>
<span class="cm">     * 借方合計を取得</span>
<span class="cm">     */</span>
<span class="w">    </span><span class="kd">public</span><span class="w"> </span><span class="n">Money</span><span class="w"> </span><span class="nf">getTotalDebit</span><span class="p">()</span><span class="w"> </span><span class="p">{</span>
<span class="w">        </span><span class="k">return</span><span class="w"> </span><span class="n">lines</span><span class="p">.</span><span class="na">stream</span><span class="p">()</span>
<span class="w">            </span><span class="p">.</span><span class="na">filter</span><span class="p">(</span><span class="n">JournalLine</span><span class="p">::</span><span class="n">isDebit</span><span class="p">)</span>
<span class="w">            </span><span class="p">.</span><span class="na">map</span><span class="p">(</span><span class="n">JournalLine</span><span class="p">::</span><span class="n">getAmount</span><span class="p">)</span>
<span class="w">            </span><span class="p">.</span><span class="na">reduce</span><span class="p">(</span><span class="n">Money</span><span class="p">.</span><span class="na">ZERO</span><span class="p">,</span><span class="w"> </span><span class="n">Money</span><span class="p">::</span><span class="n">add</span><span class="p">);</span>
<span class="w">    </span><span class="p">}</span>

<span class="w">    </span><span class="cm">/**</span>
<span class="cm">     * 貸方合計を取得</span>
<span class="cm">     */</span>
<span class="w">    </span><span class="kd">public</span><span class="w"> </span><span class="n">Money</span><span class="w"> </span><span class="nf">getTotalCredit</span><span class="p">()</span><span class="w"> </span><span class="p">{</span>
<span class="w">        </span><span class="k">return</span><span class="w"> </span><span class="n">lines</span><span class="p">.</span><span class="na">stream</span><span class="p">()</span>
<span class="w">            </span><span class="p">.</span><span class="na">filter</span><span class="p">(</span><span class="n">JournalLine</span><span class="p">::</span><span class="n">isCredit</span><span class="p">)</span>
<span class="w">            </span><span class="p">.</span><span class="na">map</span><span class="p">(</span><span class="n">JournalLine</span><span class="p">::</span><span class="n">getAmount</span><span class="p">)</span>
<span class="w">            </span><span class="p">.</span><span class="na">reduce</span><span class="p">(</span><span class="n">Money</span><span class="p">.</span><span class="na">ZERO</span><span class="p">,</span><span class="w"> </span><span class="n">Money</span><span class="p">::</span><span class="n">add</span><span class="p">);</span>
<span class="w">    </span><span class="p">}</span>

<span class="w">    </span><span class="cm">/**</span>
<span class="cm">     * 貸借が一致しているか確認</span>
<span class="cm">     */</span>
<span class="w">    </span><span class="kd">public</span><span class="w"> </span><span class="kt">boolean</span><span class="w"> </span><span class="nf">isBalanced</span><span class="p">()</span><span class="w"> </span><span class="p">{</span>
<span class="w">        </span><span class="k">return</span><span class="w"> </span><span class="n">getTotalDebit</span><span class="p">().</span><span class="na">equals</span><span class="p">(</span><span class="n">getTotalCredit</span><span class="p">());</span>
<span class="w">    </span><span class="p">}</span>
<span class="p">}</span>
</code></pre></div>
<hr />
<h2 id="232">23.2 値オブジェクトの導入<a class="headerlink" href="#232" title="Permanent link">&para;</a></h2>
<h3 id="_4">参照から値への変更<a class="headerlink" href="#_4" title="Permanent link">&para;</a></h3>
<p>プリミティブ型を値オブジェクトに置き換えることで、型安全性とドメイン知識の表現が向上します。</p>
<p><img src="data:image/svg+xml;base64,PHN2ZyB4bWxucz0iaHR0cDovL3d3dy53My5vcmcvMjAwMC9zdmciIHhtbG5zOnhsaW5rPSJodHRwOi8vd3d3LnczLm9yZy8xOTk5L3hsaW5rIiBjb250ZW50U3R5bGVUeXBlPSJ0ZXh0L2NzcyIgZGF0YS1kaWFncmFtLXR5cGU9IkNMQVNTIiBoZWlnaHQ9IjM4N3B4IiBwcmVzZXJ2ZUFzcGVjdFJhdGlvPSJub25lIiBzdHlsZT0id2lkdGg6MTE5MnB4O2hlaWdodDozODdweDtiYWNrZ3JvdW5kOiNGRkZGRkY7IiB2ZXJzaW9uPSIxLjEiIHZpZXdCb3g9IjAgMCAxMTkyIDM4NyIgd2lkdGg9IjExOTJweCIgem9vbUFuZFBhbj0ibWFnbmlmeSI+PHRpdGxlPiYjMjA1MTY7JiMxMjQ1ODsmIzEyNTAyOyYjMTI0NzI7JiMxMjQ1NTsmIzEyNDYzOyYjMTI0ODg7JiMxMjM5ODsmIzIzNTY2OyYjMjA4Mzc7PC90aXRsZT48ZGVmcy8+PGc+PGcgY2xhc3M9InRpdGxlIiBkYXRhLXNvdXJjZS1saW5lPSIxIj48dGV4dCBmaWxsPSIjMDAwMDAwIiBmb250LWZhbWlseT0ic2Fucy1zZXJpZiIgZm9udC1zaXplPSIxNCIgZm9udC13ZWlnaHQ9ImJvbGQiIGxlbmd0aEFkanVzdD0ic3BhY2luZyIgdGV4dExlbmd0aD0iMTM5Ljk5OTQiIHg9IjUxOS4wMDAzIiB5PSIyMi45OTUxIj4mIzIwNTE2OyYjMTI0NTg7JiMxMjUwMjsmIzEyNDcyOyYjMTI0NTU7JiMxMjQ2MzsmIzEyNDg4OyYjMTIzOTg7JiMyMzU2NjsmIzIwODM3OzwvdGV4dD48L2c+PCEtLWNsdXN0ZXIgQmVmb3JlOiA/Pz8/Pz8/LS0+PGcgY2xhc3M9ImNsdXN0ZXIiIGRhdGEtZW50aXR5PSJCZWZvcmUuIC4uLi4uLi4iIGRhdGEtc291cmNlLWxpbmU9IjMiIGRhdGEtdWlkPSJlbnQwMDAyIiBpZD0iY2x1c3Rlcl9CZWZvcmUuIC4uLi4uLi4iPjxyZWN0IGZpbGw9Im5vbmUiIGhlaWdodD0iMTY0LjE5IiByeD0iMi41IiByeT0iMi41IiBzdHlsZT0ic3Ryb2tlOiMxODE4MTg7c3Ryb2tlLXdpZHRoOjE7IiB3aWR0aD0iNDA3IiB4PSI3IiB5PSI0OC40MjY5Ii8+PHRleHQgZmlsbD0iIzAwMDAwMCIgZm9udC1mYW1pbHk9InNhbnMtc2VyaWYiIGZvbnQtc2l6ZT0iMTQiIGZvbnQtd2VpZ2h0PSJib2xkIiBsZW5ndGhBZGp1c3Q9InNwYWNpbmciIHRleHRMZW5ndGg9IjE2MC43NDY2IiB4PSIxMzAuMTI2NyIgeT0iNjMuNDIyIj5CZWZvcmU6ICYjMTI1MDM7JiMxMjUyMjsmIzEyNTExOyYjMTI0ODY7JiMxMjQ1MTsmIzEyNTAyOyYjMjI0MTE7PC90ZXh0PjwvZz48IS0tY2x1c3RlciBBZnRlcjogPz8/Pz8/Py0tPjxnIGNsYXNzPSJjbHVzdGVyIiBkYXRhLWVudGl0eT0iQWZ0ZXIuIC4uLi4uLi4iIGRhdGEtc291cmNlLWxpbmU9IjE4IiBkYXRhLXVpZD0iZW50MDAwNyIgaWQ9ImNsdXN0ZXJfQWZ0ZXIuIC4uLi4uLi4iPjxyZWN0IGZpbGw9Im5vbmUiIGhlaWdodD0iMzM3LjYxIiByeD0iMi41IiByeT0iMi41IiBzdHlsZT0ic3Ryb2tlOiMxODE4MTg7c3Ryb2tlLXdpZHRoOjE7IiB3aWR0aD0iNzQ4IiB4PSI0MzgiIHk9IjQ0LjI5NjkiLz48dGV4dCBmaWxsPSIjMDAwMDAwIiBmb250LWZhbWlseT0ic2Fucy1zZXJpZiIgZm9udC1zaXplPSIxNCIgZm9udC13ZWlnaHQ9ImJvbGQiIGxlbmd0aEFkanVzdD0ic3BhY2luZyIgdGV4dExlbmd0aD0iMTQ4LjQ4OTgiIHg9IjczNy43NTUxIiB5PSI1OS4yOTIiPkFmdGVyOiAmIzIwNTE2OyYjMTI0NTg7JiMxMjUwMjsmIzEyNDcyOyYjMTI0NTU7JiMxMjQ2MzsmIzEyNDg4OzwvdGV4dD48L2c+PCEtLWNsYXNzIEpvdXJuYWxFbnRyeUJlZm9yZS0tPjxnIGNsYXNzPSJlbnRpdHkiIGRhdGEtZW50aXR5PSJKb3VybmFsRW50cnlCZWZvcmUiIGRhdGEtc291cmNlLWxpbmU9IjQiIGRhdGEtdWlkPSJlbnQwMDAzIiBpZD0iZW50aXR5X0pvdXJuYWxFbnRyeUJlZm9yZSI+PHJlY3QgZmlsbD0iI0YxRjFGMSIgaGVpZ2h0PSIxMTMuMTg3NSIgcng9IjIuNSIgcnk9IjIuNSIgc3R5bGU9InN0cm9rZTojMTgxODE4O3N0cm9rZS13aWR0aDowLjU7IiB3aWR0aD0iMjAxLjY2MzEiIHg9IjIzLjE3IiB5PSI4My40MjY5Ii8+PGVsbGlwc2UgY3g9IjU1LjEyMDYiIGN5PSI5OS40MjY5IiBmaWxsPSIjQUREMUIyIiByeD0iMTEiIHJ5PSIxMSIgc3R5bGU9InN0cm9rZTojMTgxODE4O3N0cm9rZS13aWR0aDoxOyIvPjxwYXRoIGQ9Ik01OC4wODkzLDEwNS4wNjc1IFE1Ny41MTEyLDEwNS4zNjQ0IDU2Ljg3MDYsMTA1LjUwNSBRNTYuMjMsMTA1LjY2MTMgNTUuNTI2OCwxMDUuNjYxMyBRNTMuMDI2OCwxMDUuNjYxMyA1MS42OTg3LDEwNC4wMjA2IFE1MC4zODYyLDEwMi4zNjQ0IDUwLjM4NjIsOTkuMjM5NCBRNTAuMzg2Miw5Ni4xMTQ0IDUxLjY5ODcsOTQuNDU4MSBRNTMuMDI2OCw5Mi44MDE5IDU1LjUyNjgsOTIuODAxOSBRNTYuMjMsOTIuODAxOSA1Ni44NzA2LDkyLjk1ODEgUTU3LjUyNjgsOTMuMTE0NCA1OC4wODkzLDkzLjQxMTMgTDU4LjA4OTMsOTYuMTMgUTU3LjQ2NDMsOTUuNTUxOSA1Ni44NzA2LDk1LjI4NjMgUTU2LjI3NjgsOTUuMDA1IDU1LjY1MTgsOTUuMDA1IFE1NC4zMDgxLDk1LjAwNSA1My42MjA2LDk2LjA4MzEgUTUyLjkzMzEsOTcuMTQ1NiA1Mi45MzMxLDk5LjIzOTQgUTUyLjkzMzEsMTAxLjMzMzEgNTMuNjIwNiwxMDIuNDExMyBRNTQuMzA4MSwxMDMuNDczOCA1NS42NTE4LDEwMy40NzM4IFE1Ni4yNzY4LDEwMy40NzM4IDU2Ljg3MDYsMTAzLjIwODEgUTU3LjQ2NDMsMTAyLjkyNjkgNTguMDg5MywxMDIuMzQ4OCBMNTguMDg5MywxMDUuMDY3NSBaICIgZmlsbD0iIzAwMDAwMCIvPjx0ZXh0IGZpbGw9IiMwMDAwMDAiIGZvbnQtZmFtaWx5PSJzYW5zLXNlcmlmIiBmb250LXNpemU9IjE0IiBsZW5ndGhBZGp1c3Q9InNwYWNpbmciIHRleHRMZW5ndGg9IjEzMS45OTUxIiB4PSI3Mi44ODc0IiB5PSIxMDQuMjczNiI+Sm91cm5hbEVudHJ5QmVmb3JlPC90ZXh0PjxsaW5lIHN0eWxlPSJzdHJva2U6IzE4MTgxODtzdHJva2Utd2lkdGg6MC41OyIgeDE9IjI0LjE3IiB4Mj0iMjIzLjgzMzEiIHkxPSIxMTUuNDI2OSIgeTI9IjExNS40MjY5Ii8+PHJlY3QgZmlsbD0ibm9uZSIgaGVpZ2h0PSI2IiBzdHlsZT0ic3Ryb2tlOiNDODI5MzA7c3Ryb2tlLXdpZHRoOjE7IiB3aWR0aD0iNiIgeD0iMzEuMTciIHk9IjEyNi4wNzUzIi8+PHRleHQgZmlsbD0iIzAwMDAwMCIgZm9udC1mYW1pbHk9InNhbnMtc2VyaWYiIGZvbnQtc2l6ZT0iMTQiIGxlbmd0aEFkanVzdD0ic3BhY2luZyIgdGV4dExlbmd0aD0iMTU1LjYxMzMiIHg9IjQzLjE3IiB5PSIxMzIuNDIyIj5qb3VybmFsTnVtYmVyOiBTdHJpbmc8L3RleHQ+PHJlY3QgZmlsbD0ibm9uZSIgaGVpZ2h0PSI2IiBzdHlsZT0ic3Ryb2tlOiNDODI5MzA7c3Ryb2tlLXdpZHRoOjE7IiB3aWR0aD0iNiIgeD0iMzEuMTciIHk9IjE0Mi4zNzIyIi8+PHRleHQgZmlsbD0iIzAwMDAwMCIgZm9udC1mYW1pbHk9InNhbnMtc2VyaWYiIGZvbnQtc2l6ZT0iMTQiIGxlbmd0aEFkanVzdD0ic3BhY2luZyIgdGV4dExlbmd0aD0iMTYxLjA0NzkiIHg9IjQzLjE3IiB5PSIxNDguNzE4OSI+am91cm5hbERhdGU6IExvY2FsRGF0ZTwvdGV4dD48cmVjdCBmaWxsPSJub25lIiBoZWlnaHQ9IjYiIHN0eWxlPSJzdHJva2U6I0M4MjkzMDtzdHJva2Utd2lkdGg6MTsiIHdpZHRoPSI2IiB4PSIzMS4xNyIgeT0iMTU4LjY2OTEiLz48dGV4dCBmaWxsPSIjMDAwMDAwIiBmb250LWZhbWlseT0ic2Fucy1zZXJpZiIgZm9udC1zaXplPSIxNCIgbGVuZ3RoQWRqdXN0PSJzcGFjaW5nIiB0ZXh0TGVuZ3RoPSIxNzUuNjYzMSIgeD0iNDMuMTciIHk9IjE2NS4wMTU3Ij50b3RhbEFtb3VudDogQmlnRGVjaW1hbDwvdGV4dD48cmVjdCBmaWxsPSJub25lIiBoZWlnaHQ9IjYiIHN0eWxlPSJzdHJva2U6I0M4MjkzMDtzdHJva2Utd2lkdGg6MTsiIHdpZHRoPSI2IiB4PSIzMS4xNyIgeT0iMTc0Ljk2NTkiLz48dGV4dCBmaWxsPSIjMDAwMDAwIiBmb250LWZhbWlseT0ic2Fucy1zZXJpZiIgZm9udC1zaXplPSIxNCIgbGVuZ3RoQWRqdXN0PSJzcGFjaW5nIiB0ZXh0TGVuZ3RoPSIxNDIuNTYzNSIgeD0iNDMuMTciIHk9IjE4MS4zMTI2Ij5hY2NvdW50Q29kZTogU3RyaW5nPC90ZXh0PjxsaW5lIHN0eWxlPSJzdHJva2U6IzE4MTgxODtzdHJva2Utd2lkdGg6MC41OyIgeDE9IjI0LjE3IiB4Mj0iMjIzLjgzMzEiIHkxPSIxODguNjE0NCIgeTI9IjE4OC42MTQ0Ii8+PC9nPjxnIGNsYXNzPSJlbnRpdHkiIGRhdGEtZW50aXR5PSJHTU40IiBkYXRhLXNvdXJjZS1saW5lPSIxMiIgZGF0YS11aWQ9ImVudDAwMDUiIGlkPSJlbnRpdHlfR01ONCI+PHBhdGggZD0iTTI2MCwxMTIuMzI2OSBMMjYwLDEzNi4wMjY5IEwyMjUuMywxNDAuMDI2OSBMMjYwLDE0NC4wMjY5IEwyNjAsMTY3LjcyNTMgQTAsMCAwIDAgMCAyNjAsMTY3LjcyNTMgTDM5OC4wMDAxLDE2Ny43MjUzIEEwLDAgMCAwIDAgMzk4LjAwMDEsMTY3LjcyNTMgTDM5OC4wMDAxLDEyMi4zMjY5IEwzODguMDAwMSwxMTIuMzI2OSBMMjYwLDExMi4zMjY5IEEwLDAgMCAwIDAgMjYwLDExMi4zMjY5IiBmaWxsPSIjRkVGRkREIiBzdHlsZT0ic3Ryb2tlOiMxODE4MTg7c3Ryb2tlLXdpZHRoOjAuNTsiLz48cGF0aCBkPSJNMzg4LjAwMDEsMTEyLjMyNjkgTDM4OC4wMDAxLDEyMi4zMjY5IEwzOTguMDAwMSwxMjIuMzI2OSBMMzg4LjAwMDEsMTEyLjMyNjkiIGZpbGw9IiNGRUZGREQiIHN0eWxlPSJzdHJva2U6IzE4MTgxODtzdHJva2Utd2lkdGg6MC41OyIvPjx0ZXh0IGZpbGw9IiMwMDAwMDAiIGZvbnQtZmFtaWx5PSJzYW5zLXNlcmlmIiBmb250LXNpemU9IjEzIiBsZW5ndGhBZGp1c3Q9InNwYWNpbmciIHRleHRMZW5ndGg9Ijc4LjAwMDEiIHg9IjI2NiIgeT0iMTI5LjM5MzgiPiYjMjI0MTE7JiMyMzQzMzsmIzIwODQwOyYjMjQ2MTU7JiMxMjM5NDsmIzEyMzc1OzwvdGV4dD48dGV4dCBmaWxsPSIjMDAwMDAwIiBmb250LWZhbWlseT0ic2Fucy1zZXJpZiIgZm9udC1zaXplPSIxMyIgbGVuZ3RoQWRqdXN0PSJzcGFjaW5nIiB0ZXh0TGVuZ3RoPSIxMTcuMDAwMSIgeD0iMjY2IiB5PSIxNDQuNTI2NiI+JiMxMjQ5NjsmIzEyNTIyOyYjMTI0ODc7JiMxMjU0MDsmIzEyNDcxOyYjMTI1MTk7JiMxMjUzMTsmIzEyMzk0OyYjMTIzNzU7PC90ZXh0Pjx0ZXh0IGZpbGw9IiMwMDAwMDAiIGZvbnQtZmFtaWx5PSJzYW5zLXNlcmlmIiBmb250LXNpemU9IjEzIiBsZW5ndGhBZGp1c3Q9InNwYWNpbmciIHRleHRMZW5ndGg9IjExNy4wMDAxIiB4PSIyNjYiIHk9IjE1OS42NTk0Ij4mIzEyNDg5OyYjMTI1MTM7JiMxMjQ1MjsmIzEyNTMxOyYjMzA2OTM7JiMzNTY3MjsmIzEyMzY0OyYjMjU5NTU7JiMyMjMxMjs8L3RleHQ+PC9nPjwhLS1jbGFzcyBKb3VybmFsRW50cnlBZnRlci0tPjxnIGNsYXNzPSJlbnRpdHkiIGRhdGEtZW50aXR5PSJKb3VybmFsRW50cnlBZnRlciIgZGF0YS1zb3VyY2UtbGluZT0iMTkiIGRhdGEtdWlkPSJlbnQwMDA4IiBpZD0iZW50aXR5X0pvdXJuYWxFbnRyeUFmdGVyIj48cmVjdCBmaWxsPSIjRjFGMUYxIiBoZWlnaHQ9IjExMy4xODc1IiByeD0iMi41IiByeT0iMi41IiBzdHlsZT0ic3Ryb2tlOiMxODE4MTg7c3Ryb2tlLXdpZHRoOjAuNTsiIHdpZHRoPSIyNDQuNzM2MyIgeD0iOTI1LjYzIiB5PSI4My40MjY5Ii8+PGVsbGlwc2UgY3g9Ijk4My42MDkiIGN5PSI5OS40MjY5IiBmaWxsPSIjQUREMUIyIiByeD0iMTEiIHJ5PSIxMSIgc3R5bGU9InN0cm9rZTojMTgxODE4O3N0cm9rZS13aWR0aDoxOyIvPjxwYXRoIGQ9Ik05ODYuNTc3OCwxMDUuMDY3NSBROTg1Ljk5OTYsMTA1LjM2NDQgOTg1LjM1OSwxMDUuNTA1IFE5ODQuNzE4NCwxMDUuNjYxMyA5ODQuMDE1MywxMDUuNjYxMyBROTgxLjUxNTMsMTA1LjY2MTMgOTgwLjE4NzEsMTA0LjAyMDYgUTk3OC44NzQ2LDEwMi4zNjQ0IDk3OC44NzQ2LDk5LjIzOTQgUTk3OC44NzQ2LDk2LjExNDQgOTgwLjE4NzEsOTQuNDU4MSBROTgxLjUxNTMsOTIuODAxOSA5ODQuMDE1Myw5Mi44MDE5IFE5ODQuNzE4NCw5Mi44MDE5IDk4NS4zNTksOTIuOTU4MSBROTg2LjAxNTMsOTMuMTE0NCA5ODYuNTc3OCw5My40MTEzIEw5ODYuNTc3OCw5Ni4xMyBROTg1Ljk1MjgsOTUuNTUxOSA5ODUuMzU5LDk1LjI4NjMgUTk4NC43NjUzLDk1LjAwNSA5ODQuMTQwMyw5NS4wMDUgUTk4Mi43OTY1LDk1LjAwNSA5ODIuMTA5LDk2LjA4MzEgUTk4MS40MjE1LDk3LjE0NTYgOTgxLjQyMTUsOTkuMjM5NCBROTgxLjQyMTUsMTAxLjMzMzEgOTgyLjEwOSwxMDIuNDExMyBROTgyLjc5NjUsMTAzLjQ3MzggOTg0LjE0MDMsMTAzLjQ3MzggUTk4NC43NjUzLDEwMy40NzM4IDk4NS4zNTksMTAzLjIwODEgUTk4NS45NTI4LDEwMi45MjY5IDk4Ni41Nzc4LDEwMi4zNDg4IEw5ODYuNTc3OCwxMDUuMDY3NSBaICIgZmlsbD0iIzAwMDAwMCIvPjx0ZXh0IGZpbGw9IiMwMDAwMDAiIGZvbnQtZmFtaWx5PSJzYW5zLXNlcmlmIiBmb250LXNpemU9IjE0IiBsZW5ndGhBZGp1c3Q9InNwYWNpbmciIHRleHRMZW5ndGg9IjEyMC4yNzgzIiB4PSIxMDA0LjEwOSIgeT0iMTA0LjI3MzYiPkpvdXJuYWxFbnRyeUFmdGVyPC90ZXh0PjxsaW5lIHN0eWxlPSJzdHJva2U6IzE4MTgxODtzdHJva2Utd2lkdGg6MC41OyIgeDE9IjkyNi42MyIgeDI9IjExNjkuMzY2MyIgeTE9IjExNS40MjY5IiB5Mj0iMTE1LjQyNjkiLz48cmVjdCBmaWxsPSJub25lIiBoZWlnaHQ9IjYiIHN0eWxlPSJzdHJva2U6I0M4MjkzMDtzdHJva2Utd2lkdGg6MTsiIHdpZHRoPSI2IiB4PSI5MzMuNjMiIHk9IjEyNi4wNzUzIi8+PHRleHQgZmlsbD0iIzAwMDAwMCIgZm9udC1mYW1pbHk9InNhbnMtc2VyaWYiIGZvbnQtc2l6ZT0iMTQiIGxlbmd0aEFkanVzdD0ic3BhY2luZyIgdGV4dExlbmd0aD0iMjE4LjczNjMiIHg9Ijk0NS42MyIgeT0iMTMyLjQyMiI+am91cm5hbE51bWJlcjogSm91cm5hbE51bWJlcjwvdGV4dD48cmVjdCBmaWxsPSJub25lIiBoZWlnaHQ9IjYiIHN0eWxlPSJzdHJva2U6I0M4MjkzMDtzdHJva2Utd2lkdGg6MTsiIHdpZHRoPSI2IiB4PSI5MzMuNjMiIHk9IjE0Mi4zNzIyIi8+PHRleHQgZmlsbD0iIzAwMDAwMCIgZm9udC1mYW1pbHk9InNhbnMtc2VyaWYiIGZvbnQtc2l6ZT0iMTQiIGxlbmd0aEFkanVzdD0ic3BhY2luZyIgdGV4dExlbmd0aD0iMTczLjE4MTYiIHg9Ijk0NS42MyIgeT0iMTQ4LjcxODkiPmpvdXJuYWxEYXRlOiBKb3VybmFsRGF0ZTwvdGV4dD48cmVjdCBmaWxsPSJub25lIiBoZWlnaHQ9IjYiIHN0eWxlPSJzdHJva2U6I0M4MjkzMDtzdHJva2Utd2lkdGg6MTsiIHdpZHRoPSI2IiB4PSI5MzMuNjMiIHk9IjE1OC42NjkxIi8+PHRleHQgZmlsbD0iIzAwMDAwMCIgZm9udC1mYW1pbHk9InNhbnMtc2VyaWYiIGZvbnQtc2l6ZT0iMTQiIGxlbmd0aEFkanVzdD0ic3BhY2luZyIgdGV4dExlbmd0aD0iMTQyLjYxMTMiIHg9Ijk0NS42MyIgeT0iMTY1LjAxNTciPnRvdGFsQW1vdW50OiBNb25leTwvdGV4dD48cmVjdCBmaWxsPSJub25lIiBoZWlnaHQ9IjYiIHN0eWxlPSJzdHJva2U6I0M4MjkzMDtzdHJva2Utd2lkdGg6MTsiIHdpZHRoPSI2IiB4PSI5MzMuNjMiIHk9IjE3NC45NjU5Ii8+PHRleHQgZmlsbD0iIzAwMDAwMCIgZm9udC1mYW1pbHk9InNhbnMtc2VyaWYiIGZvbnQtc2l6ZT0iMTQiIGxlbmd0aEFkanVzdD0ic3BhY2luZyIgdGV4dExlbmd0aD0iMTkzLjM5NTUiIHg9Ijk0NS42MyIgeT0iMTgxLjMxMjYiPmFjY291bnRDb2RlOiBBY2NvdW50Q29kZTwvdGV4dD48bGluZSBzdHlsZT0ic3Ryb2tlOiMxODE4MTg7c3Ryb2tlLXdpZHRoOjAuNTsiIHgxPSI5MjYuNjMiIHgyPSIxMTY5LjM2NjMiIHkxPSIxODguNjE0NCIgeTI9IjE4OC42MTQ0Ii8+PC9nPjwhLS1jbGFzcyBKb3VybmFsTnVtYmVyLS0+PGcgY2xhc3M9ImVudGl0eSIgZGF0YS1lbnRpdHk9IkpvdXJuYWxOdW1iZXIiIGRhdGEtc291cmNlLWxpbmU9IjI2IiBkYXRhLXVpZD0iZW50MDAwOSIgaWQ9ImVudGl0eV9Kb3VybmFsTnVtYmVyIj48cmVjdCBmaWxsPSIjRjFGMUYxIiBoZWlnaHQ9IjEwNS4xNTYzIiByeD0iMi41IiByeT0iMi41IiBzdHlsZT0ic3Ryb2tlOiMxODE4MTg7c3Ryb2tlLXdpZHRoOjAuNTsiIHdpZHRoPSIyMDIuNzI5NSIgeD0iNDUzLjY0IiB5PSI4Ny40NDY5Ii8+PGVsbGlwc2UgY3g9IjQ5OC4zMDI2IiBjeT0iMTA3LjU3OTciIGZpbGw9IiNBREQxQjIiIHJ4PSIxMSIgcnk9IjExIiBzdHlsZT0ic3Ryb2tlOiMxODE4MTg7c3Ryb2tlLXdpZHRoOjE7Ii8+PHBhdGggZD0iTTUwMS4yNzEzLDExMy4yMjAzIFE1MDAuNjkzMiwxMTMuNTE3MiA1MDAuMDUyNiwxMTMuNjU3OCBRNDk5LjQxMiwxMTMuODE0MSA0OTguNzA4OCwxMTMuODE0MSBRNDk2LjIwODgsMTEzLjgxNDEgNDk0Ljg4MDcsMTEyLjE3MzQgUTQ5My41NjgyLDExMC41MTcyIDQ5My41NjgyLDEwNy4zOTIyIFE0OTMuNTY4MiwxMDQuMjY3MiA0OTQuODgwNywxMDIuNjEwOSBRNDk2LjIwODgsMTAwLjk1NDcgNDk4LjcwODgsMTAwLjk1NDcgUTQ5OS40MTIsMTAwLjk1NDcgNTAwLjA1MjYsMTAxLjExMDkgUTUwMC43MDg4LDEwMS4yNjcyIDUwMS4yNzEzLDEwMS41NjQxIEw1MDEuMjcxMywxMDQuMjgyOCBRNTAwLjY0NjMsMTAzLjcwNDcgNTAwLjA1MjYsMTAzLjQzOTEgUTQ5OS40NTg4LDEwMy4xNTc4IDQ5OC44MzM4LDEwMy4xNTc4IFE0OTcuNDkwMSwxMDMuMTU3OCA0OTYuODAyNiwxMDQuMjM1OSBRNDk2LjExNTEsMTA1LjI5ODQgNDk2LjExNTEsMTA3LjM5MjIgUTQ5Ni4xMTUxLDEwOS40ODU5IDQ5Ni44MDI2LDExMC41NjQxIFE0OTcuNDkwMSwxMTEuNjI2NiA0OTguODMzOCwxMTEuNjI2NiBRNDk5LjQ1ODgsMTExLjYyNjYgNTAwLjA1MjYsMTExLjM2MDkgUTUwMC42NDYzLDExMS4wNzk3IDUwMS4yNzEzLDExMC41MDE2IEw1MDEuMjcxMywxMTMuMjIwMyBaICIgZmlsbD0iIzAwMDAwMCIvPjx0ZXh0IGZpbGw9IiMwMDAwMDAiIGZvbnQtZmFtaWx5PSJzYW5zLXNlcmlmIiBmb250LXNpemU9IjEyIiBmb250LXN0eWxlPSJpdGFsaWMiIGxlbmd0aEFkanVzdD0ic3BhY2luZyIgdGV4dExlbmd0aD0iOTEuNDY0OCIgeD0iNTI1LjUyMjMiIHk9IjEwMy41ODU1Ij4mIzE3MTtWYWx1ZSBPYmplY3QmIzE4Nzs8L3RleHQ+PHRleHQgZmlsbD0iIzAwMDAwMCIgZm9udC1mYW1pbHk9InNhbnMtc2VyaWYiIGZvbnQtc2l6ZT0iMTQiIGxlbmd0aEFkanVzdD0ic3BhY2luZyIgdGV4dExlbmd0aD0iMTA0LjkwNDMiIHg9IjUxOC44MDI2IiB5PSIxMTkuNDEwNyI+Sm91cm5hbE51bWJlcjwvdGV4dD48bGluZSBzdHlsZT0ic3Ryb2tlOiMxODE4MTg7c3Ryb2tlLXdpZHRoOjAuNTsiIHgxPSI0NTQuNjQiIHgyPSI2NTUuMzY5NSIgeTE9IjEyNy43MTI1IiB5Mj0iMTI3LjcxMjUiLz48cmVjdCBmaWxsPSJub25lIiBoZWlnaHQ9IjYiIHN0eWxlPSJzdHJva2U6I0M4MjkzMDtzdHJva2Utd2lkdGg6MTsiIHdpZHRoPSI2IiB4PSI0NjEuNjQiIHk9IjEzOC4zNjA5Ii8+PHRleHQgZmlsbD0iIzAwMDAwMCIgZm9udC1mYW1pbHk9InNhbnMtc2VyaWYiIGZvbnQtc2l6ZT0iMTQiIGxlbmd0aEFkanVzdD0ic3BhY2luZyIgdGV4dExlbmd0aD0iODkuMTg4NSIgeD0iNDczLjY0IiB5PSIxNDQuNzA3NiI+dmFsdWU6IFN0cmluZzwvdGV4dD48bGluZSBzdHlsZT0ic3Ryb2tlOiMxODE4MTg7c3Ryb2tlLXdpZHRoOjAuNTsiIHgxPSI0NTQuNjQiIHgyPSI2NTUuMzY5NSIgeTE9IjE1Mi4wMDk0IiB5Mj0iMTUyLjAwOTQiLz48ZWxsaXBzZSBjeD0iNDY0LjY0IiBjeT0iMTY1LjY1NzgiIGZpbGw9IiM4NEJFODQiIHJ4PSIzIiByeT0iMyIgc3R5bGU9InN0cm9rZTojMDM4MDQ4O3N0cm9rZS13aWR0aDoxOyIvPjx0ZXh0IGZpbGw9IiMwMDAwMDAiIGZvbnQtZmFtaWx5PSJzYW5zLXNlcmlmIiBmb250LXNpemU9IjE0IiBsZW5ndGhBZGp1c3Q9InNwYWNpbmciIHRleHRMZW5ndGg9IjE3Ni43Mjk1IiB4PSI0NzMuNjQiIHk9IjE2OS4wMDQ1Ij5vZih2YWx1ZSk6IEpvdXJuYWxOdW1iZXI8L3RleHQ+PGVsbGlwc2UgY3g9IjQ2NC42NCIgY3k9IjE4MS45NTQ3IiBmaWxsPSIjODRCRTg0IiByeD0iMyIgcnk9IjMiIHN0eWxlPSJzdHJva2U6IzAzODA0ODtzdHJva2Utd2lkdGg6MTsiLz48dGV4dCBmaWxsPSIjMDAwMDAwIiBmb250LWZhbWlseT0ic2Fucy1zZXJpZiIgZm9udC1zaXplPSIxNCIgbGVuZ3RoQWRqdXN0PSJzcGFjaW5nIiB0ZXh0TGVuZ3RoPSIxMjQuMzkzNiIgeD0iNDczLjY0IiB5PSIxODUuMzAxNCI+Z2V0VmFsdWUoKTogU3RyaW5nPC90ZXh0PjwvZz48IS0tY2xhc3MgTW9uZXktLT48ZyBjbGFzcz0iZW50aXR5IiBkYXRhLWVudGl0eT0iTW9uZXkiIGRhdGEtc291cmNlLWxpbmU9IjMyIiBkYXRhLXVpZD0iZW50MDAxMCIgaWQ9ImVudGl0eV9Nb25leSI+PHJlY3QgZmlsbD0iI0YxRjFGMSIgaGVpZ2h0PSIxMjEuNDUzMSIgcng9IjIuNSIgcnk9IjIuNSIgc3R5bGU9InN0cm9rZTojMTgxODE4O3N0cm9rZS13aWR0aDowLjU7IiB3aWR0aD0iMTk4LjU0NTkiIHg9IjY5MS43MyIgeT0iNzkuMjk2OSIvPjxlbGxpcHNlIGN4PSI3NDMuMDIwNSIgY3k9Ijk5LjQyOTciIGZpbGw9IiNBREQxQjIiIHJ4PSIxMSIgcnk9IjExIiBzdHlsZT0ic3Ryb2tlOiMxODE4MTg7c3Ryb2tlLXdpZHRoOjE7Ii8+PHBhdGggZD0iTTc0NS45ODkzLDEwNS4wNzAzIFE3NDUuNDExMiwxMDUuMzY3MiA3NDQuNzcwNSwxMDUuNTA3OCBRNzQ0LjEyOTksMTA1LjY2NDEgNzQzLjQyNjgsMTA1LjY2NDEgUTc0MC45MjY4LDEwNS42NjQxIDczOS41OTg3LDEwNC4wMjM0IFE3MzguMjg2MiwxMDIuMzY3MiA3MzguMjg2Miw5OS4yNDIyIFE3MzguMjg2Miw5Ni4xMTcyIDczOS41OTg3LDk0LjQ2MDkgUTc0MC45MjY4LDkyLjgwNDcgNzQzLjQyNjgsOTIuODA0NyBRNzQ0LjEyOTksOTIuODA0NyA3NDQuNzcwNSw5Mi45NjA5IFE3NDUuNDI2OCw5My4xMTcyIDc0NS45ODkzLDkzLjQxNDEgTDc0NS45ODkzLDk2LjEzMjggUTc0NS4zNjQzLDk1LjU1NDcgNzQ0Ljc3MDUsOTUuMjg5MSBRNzQ0LjE3NjgsOTUuMDA3OCA3NDMuNTUxOCw5NS4wMDc4IFE3NDIuMjA4LDk1LjAwNzggNzQxLjUyMDUsOTYuMDg1OSBRNzQwLjgzMyw5Ny4xNDg0IDc0MC44MzMsOTkuMjQyMiBRNzQwLjgzMywxMDEuMzM1OSA3NDEuNTIwNSwxMDIuNDE0MSBRNzQyLjIwOCwxMDMuNDc2NiA3NDMuNTUxOCwxMDMuNDc2NiBRNzQ0LjE3NjgsMTAzLjQ3NjYgNzQ0Ljc3MDUsMTAzLjIxMDkgUTc0NS4zNjQzLDEwMi45Mjk3IDc0NS45ODkzLDEwMi4zNTE2IEw3NDUuOTg5MywxMDUuMDcwMyBaICIgZmlsbD0iIzAwMDAwMCIvPjx0ZXh0IGZpbGw9IiMwMDAwMDAiIGZvbnQtZmFtaWx5PSJzYW5zLXNlcmlmIiBmb250LXNpemU9IjEyIiBmb250LXN0eWxlPSJpdGFsaWMiIGxlbmd0aEFkanVzdD0ic3BhY2luZyIgdGV4dExlbmd0aD0iOTEuNDY0OCIgeD0iNzYxLjUyMDUiIHk9Ijk1LjQzNTUiPiYjMTcxO1ZhbHVlIE9iamVjdCYjMTg3OzwvdGV4dD48dGV4dCBmaWxsPSIjMDAwMDAwIiBmb250LWZhbWlseT0ic2Fucy1zZXJpZiIgZm9udC1zaXplPSIxNCIgbGVuZ3RoQWRqdXN0PSJzcGFjaW5nIiB0ZXh0TGVuZ3RoPSI0Ni40MTYiIHg9Ijc4NC4wNDQ5IiB5PSIxMTEuMjYwNyI+TW9uZXk8L3RleHQ+PGxpbmUgc3R5bGU9InN0cm9rZTojMTgxODE4O3N0cm9rZS13aWR0aDowLjU7IiB4MT0iNjkyLjczIiB4Mj0iODg5LjI3NTkiIHkxPSIxMTkuNTYyNSIgeTI9IjExOS41NjI1Ii8+PHJlY3QgZmlsbD0ibm9uZSIgaGVpZ2h0PSI2IiBzdHlsZT0ic3Ryb2tlOiNDODI5MzA7c3Ryb2tlLXdpZHRoOjE7IiB3aWR0aD0iNiIgeD0iNjk5LjczIiB5PSIxMzAuMjEwOSIvPjx0ZXh0IGZpbGw9IiMwMDAwMDAiIGZvbnQtZmFtaWx5PSJzYW5zLXNlcmlmIiBmb250LXNpemU9IjE0IiBsZW5ndGhBZGp1c3Q9InNwYWNpbmciIHRleHRMZW5ndGg9IjE0Mi42NTIzIiB4PSI3MTEuNzMiIHk9IjEzNi41NTc2Ij5hbW91bnQ6IEJpZ0RlY2ltYWw8L3RleHQ+PGxpbmUgc3R5bGU9InN0cm9rZTojMTgxODE4O3N0cm9rZS13aWR0aDowLjU7IiB4MT0iNjkyLjczIiB4Mj0iODg5LjI3NTkiIHkxPSIxNDMuODU5NCIgeTI9IjE0My44NTk0Ii8+PGVsbGlwc2UgY3g9IjcwMi43MyIgY3k9IjE1Ny41MDc4IiBmaWxsPSIjODRCRTg0IiByeD0iMyIgcnk9IjMiIHN0eWxlPSJzdHJva2U6IzAzODA0ODtzdHJva2Utd2lkdGg6MTsiLz48dGV4dCBmaWxsPSIjMDAwMDAwIiBmb250LWZhbWlseT0ic2Fucy1zZXJpZiIgZm9udC1zaXplPSIxNCIgbGVuZ3RoQWRqdXN0PSJzcGFjaW5nIiB0ZXh0TGVuZ3RoPSIxMzQuMDE4NiIgeD0iNzExLjczIiB5PSIxNjAuODU0NSI+b2YoYW1vdW50KTogTW9uZXk8L3RleHQ+PGVsbGlwc2UgY3g9IjcwMi43MyIgY3k9IjE3My44MDQ3IiBmaWxsPSIjODRCRTg0IiByeD0iMyIgcnk9IjMiIHN0eWxlPSJzdHJva2U6IzAzODA0ODtzdHJva2Utd2lkdGg6MTsiLz48dGV4dCBmaWxsPSIjMDAwMDAwIiBmb250LWZhbWlseT0ic2Fucy1zZXJpZiIgZm9udC1zaXplPSIxNCIgbGVuZ3RoQWRqdXN0PSJzcGFjaW5nIiB0ZXh0TGVuZ3RoPSIxNDAuODM0IiB4PSI3MTEuNzMiIHk9IjE3Ny4xNTE0Ij5hZGQobW9uZXkpOiBNb25leTwvdGV4dD48ZWxsaXBzZSBjeD0iNzAyLjczIiBjeT0iMTkwLjEwMTYiIGZpbGw9IiM4NEJFODQiIHJ4PSIzIiByeT0iMyIgc3R5bGU9InN0cm9rZTojMDM4MDQ4O3N0cm9rZS13aWR0aDoxOyIvPjx0ZXh0IGZpbGw9IiMwMDAwMDAiIGZvbnQtZmFtaWx5PSJzYW5zLXNlcmlmIiBmb250LXNpemU9IjE0IiBsZW5ndGhBZGp1c3Q9InNwYWNpbmciIHRleHRMZW5ndGg9IjE3Mi41NDU5IiB4PSI3MTEuNzMiIHk9IjE5My40NDgyIj5zdWJ0cmFjdChtb25leSk6IE1vbmV5PC90ZXh0PjwvZz48IS0tY2xhc3MgQWNjb3VudENvZGUtLT48ZyBjbGFzcz0iZW50aXR5IiBkYXRhLWVudGl0eT0iQWNjb3VudENvZGUiIGRhdGEtc291cmNlLWxpbmU9IjM5IiBkYXRhLXVpZD0iZW50MDAxMSIgaWQ9ImVudGl0eV9BY2NvdW50Q29kZSI+PHJlY3QgZmlsbD0iI0YxRjFGMSIgaGVpZ2h0PSIxMDUuMTU2MyIgcng9IjIuNSIgcnk9IjIuNSIgc3R5bGU9InN0cm9rZTojMTgxODE4O3N0cm9rZS13aWR0aDowLjU7IiB3aWR0aD0iMTkwLjQzODUiIHg9IjQ1OS43OCIgeT0iMjYwLjc0NjkiLz48ZWxsaXBzZSBjeD0iNTA0LjQ0MjYiIGN5PSIyODAuODc5NyIgZmlsbD0iI0FERDFCMiIgcng9IjExIiByeT0iMTEiIHN0eWxlPSJzdHJva2U6IzE4MTgxODtzdHJva2Utd2lkdGg6MTsiLz48cGF0aCBkPSJNNTA3LjQxMTMsMjg2LjUyMDMgUTUwNi44MzMyLDI4Ni44MTcyIDUwNi4xOTI2LDI4Ni45NTc4IFE1MDUuNTUyLDI4Ny4xMTQxIDUwNC44NDg4LDI4Ny4xMTQxIFE1MDIuMzQ4OCwyODcuMTE0MSA1MDEuMDIwNywyODUuNDczNCBRNDk5LjcwODIsMjgzLjgxNzIgNDk5LjcwODIsMjgwLjY5MjIgUTQ5OS43MDgyLDI3Ny41NjcyIDUwMS4wMjA3LDI3NS45MTA5IFE1MDIuMzQ4OCwyNzQuMjU0NyA1MDQuODQ4OCwyNzQuMjU0NyBRNTA1LjU1MiwyNzQuMjU0NyA1MDYuMTkyNiwyNzQuNDEwOSBRNTA2Ljg0ODgsMjc0LjU2NzIgNTA3LjQxMTMsMjc0Ljg2NDEgTDUwNy40MTEzLDI3Ny41ODI4IFE1MDYuNzg2MywyNzcuMDA0NyA1MDYuMTkyNiwyNzYuNzM5MSBRNTA1LjU5ODgsMjc2LjQ1NzggNTA0Ljk3MzgsMjc2LjQ1NzggUTUwMy42MzAxLDI3Ni40NTc4IDUwMi45NDI2LDI3Ny41MzU5IFE1MDIuMjU1MSwyNzguNTk4NCA1MDIuMjU1MSwyODAuNjkyMiBRNTAyLjI1NTEsMjgyLjc4NTkgNTAyLjk0MjYsMjgzLjg2NDEgUTUwMy42MzAxLDI4NC45MjY2IDUwNC45NzM4LDI4NC45MjY2IFE1MDUuNTk4OCwyODQuOTI2NiA1MDYuMTkyNiwyODQuNjYwOSBRNTA2Ljc4NjMsMjg0LjM3OTcgNTA3LjQxMTMsMjgzLjgwMTYgTDUwNy40MTEzLDI4Ni41MjAzIFogIiBmaWxsPSIjMDAwMDAwIi8+PHRleHQgZmlsbD0iIzAwMDAwMCIgZm9udC1mYW1pbHk9InNhbnMtc2VyaWYiIGZvbnQtc2l6ZT0iMTIiIGZvbnQtc3R5bGU9Iml0YWxpYyIgbGVuZ3RoQWRqdXN0PSJzcGFjaW5nIiB0ZXh0TGVuZ3RoPSI5MS40NjQ4IiB4PSI1MjUuNTE2OCIgeT0iMjc2Ljg4NTUiPiYjMTcxO1ZhbHVlIE9iamVjdCYjMTg3OzwvdGV4dD48dGV4dCBmaWxsPSIjMDAwMDAwIiBmb250LWZhbWlseT0ic2Fucy1zZXJpZiIgZm9udC1zaXplPSIxNCIgbGVuZ3RoQWRqdXN0PSJzcGFjaW5nIiB0ZXh0TGVuZ3RoPSI5Mi42MTMzIiB4PSI1MjQuOTQyNiIgeT0iMjkyLjcxMDciPkFjY291bnRDb2RlPC90ZXh0PjxsaW5lIHN0eWxlPSJzdHJva2U6IzE4MTgxODtzdHJva2Utd2lkdGg6MC41OyIgeDE9IjQ2MC43OCIgeDI9IjY0OS4yMTg1IiB5MT0iMzAxLjAxMjUiIHkyPSIzMDEuMDEyNSIvPjxyZWN0IGZpbGw9Im5vbmUiIGhlaWdodD0iNiIgc3R5bGU9InN0cm9rZTojQzgyOTMwO3N0cm9rZS13aWR0aDoxOyIgd2lkdGg9IjYiIHg9IjQ2Ny43OCIgeT0iMzExLjY2MDkiLz48dGV4dCBmaWxsPSIjMDAwMDAwIiBmb250LWZhbWlseT0ic2Fucy1zZXJpZiIgZm9udC1zaXplPSIxNCIgbGVuZ3RoQWRqdXN0PSJzcGFjaW5nIiB0ZXh0TGVuZ3RoPSI4OS4xODg1IiB4PSI0NzkuNzgiIHk9IjMxOC4wMDc2Ij52YWx1ZTogU3RyaW5nPC90ZXh0PjxsaW5lIHN0eWxlPSJzdHJva2U6IzE4MTgxODtzdHJva2Utd2lkdGg6MC41OyIgeDE9IjQ2MC43OCIgeDI9IjY0OS4yMTg1IiB5MT0iMzI1LjMwOTQiIHkyPSIzMjUuMzA5NCIvPjxlbGxpcHNlIGN4PSI0NzAuNzgiIGN5PSIzMzguOTU3OCIgZmlsbD0iIzg0QkU4NCIgcng9IjMiIHJ5PSIzIiBzdHlsZT0ic3Ryb2tlOiMwMzgwNDg7c3Ryb2tlLXdpZHRoOjE7Ii8+PHRleHQgZmlsbD0iIzAwMDAwMCIgZm9udC1mYW1pbHk9InNhbnMtc2VyaWYiIGZvbnQtc2l6ZT0iMTQiIGxlbmd0aEFkanVzdD0ic3BhY2luZyIgdGV4dExlbmd0aD0iMTY0LjQzODUiIHg9IjQ3OS43OCIgeT0iMzQyLjMwNDUiPm9mKHZhbHVlKTogQWNjb3VudENvZGU8L3RleHQ+PGVsbGlwc2UgY3g9IjQ3MC43OCIgY3k9IjM1NS4yNTQ3IiBmaWxsPSIjODRCRTg0IiByeD0iMyIgcnk9IjMiIHN0eWxlPSJzdHJva2U6IzAzODA0ODtzdHJva2Utd2lkdGg6MTsiLz48dGV4dCBmaWxsPSIjMDAwMDAwIiBmb250LWZhbWlseT0ic2Fucy1zZXJpZiIgZm9udC1zaXplPSIxNCIgbGVuZ3RoQWRqdXN0PSJzcGFjaW5nIiB0ZXh0TGVuZ3RoPSIxNDguODExNSIgeD0iNDc5Ljc4IiB5PSIzNTguNjAxNCI+Z2V0Q2F0ZWdvcnkoKTogU3RyaW5nPC90ZXh0PjwvZz48ZyBjbGFzcz0iZW50aXR5IiBkYXRhLWVudGl0eT0iR01OMTIiIGRhdGEtc291cmNlLWxpbmU9IjQ2IiBkYXRhLXVpZD0iZW50MDAxMyIgaWQ9ImVudGl0eV9HTU4xMiI+PHBhdGggZD0iTTk3OSwyODUuNjI2OSBMOTc5LDM0MS4wMjUzIEEwLDAgMCAwIDAgOTc5LDM0MS4wMjUzIEwxMTE3LjAwMDEsMzQxLjAyNTMgQTAsMCAwIDAgMCAxMTE3LjAwMDEsMzQxLjAyNTMgTDExMTcuMDAwMSwyOTUuNjI2OSBMMTEwNy4wMDAxLDI4NS42MjY5IEwxMDUyLDI4NS42MjY5IEwxMDQ4LDE5Ny4xMTY5IEwxMDQ0LDI4NS42MjY5IEw5NzksMjg1LjYyNjkgQTAsMCAwIDAgMCA5NzksMjg1LjYyNjkiIGZpbGw9IiNGRUZGREQiIHN0eWxlPSJzdHJva2U6IzE4MTgxODtzdHJva2Utd2lkdGg6MC41OyIvPjxwYXRoIGQ9Ik0xMTA3LjAwMDEsMjg1LjYyNjkgTDExMDcuMDAwMSwyOTUuNjI2OSBMMTExNy4wMDAxLDI5NS42MjY5IEwxMTA3LjAwMDEsMjg1LjYyNjkiIGZpbGw9IiNGRUZGREQiIHN0eWxlPSJzdHJva2U6IzE4MTgxODtzdHJva2Utd2lkdGg6MC41OyIvPjx0ZXh0IGZpbGw9IiMwMDAwMDAiIGZvbnQtZmFtaWx5PSJzYW5zLXNlcmlmIiBmb250LXNpemU9IjEzIiBsZW5ndGhBZGp1c3Q9InNwYWNpbmciIHRleHRMZW5ndGg9Ijc4LjAwMDEiIHg9Ijk4NSIgeT0iMzAyLjY5MzgiPiYjMjI0MTE7JiMyMzQzMzsmIzIwODQwOyYjMjQ2MTU7JiMxMjM1NDsmIzEyNDI2OzwvdGV4dD48dGV4dCBmaWxsPSIjMDAwMDAwIiBmb250LWZhbWlseT0ic2Fucy1zZXJpZiIgZm9udC1zaXplPSIxMyIgbGVuZ3RoQWRqdXN0PSJzcGFjaW5nIiB0ZXh0TGVuZ3RoPSIxMTcuMDAwMSIgeD0iOTg1IiB5PSIzMTcuODI2NiI+JiMxMjQ5NjsmIzEyNTIyOyYjMTI0ODc7JiMxMjU0MDsmIzEyNDcxOyYjMTI1MTk7JiMxMjUzMTsmIzIwODY5OyYjMzQxMDE7PC90ZXh0Pjx0ZXh0IGZpbGw9IiMwMDAwMDAiIGZvbnQtZmFtaWx5PSJzYW5zLXNlcmlmIiBmb250LXNpemU9IjEzIiBsZW5ndGhBZGp1c3Q9InNwYWNpbmciIHRleHRMZW5ndGg9IjExNy4wMDAxIiB4PSI5ODUiIHk9IjMzMi45NTk0Ij4mIzEyNDg5OyYjMTI1MTM7JiMxMjQ1MjsmIzEyNTMxOyYjMzA2OTM7JiMzNTY3MjsmIzEyMzY0OyYjMzg1OTg7JiMzMjAwNDs8L3RleHQ+PC9nPjwhLS1TUkM9W2JMOUZJbmoxNUJfbGZuWG9JV1p6MGE0MllWT0lqMXU0eHZGRFBCa29rbUVKanE4R21QcmZxZ09qZk9Vc0FMR0tDSTRZUTBqTHpFMnRVTXBLUi03aUIyUmhUWS16cFZrelVWRnhDbXpTeTFZOTNvT2Vwcjd6RzdjQlNlUm9Ed2VGNjV0NlZ4eDRXd2JiMk1PMzNIbnppekhhTkl2T1pRMFFlejhabndZNkE0X3JSN3BxZ0tKc0JEa1psSHZmeUwwNHI3aVRXRVlkOHhocllrb2F5OWxHUnBESDhyaVd0QzFQdWNpS3pERmh0NHdGa1c0U2dEVm1VSFgwWkpIVFB1dFBoYXl6dFE2c2RRMmhsQ0NNMy1yUkxpMjE0VTR3UnU3bVJlNENJeWtDQnFWbnU2bi1DQ0ZlN0FFblhVZ2h5VjhVckh0QTZyR3BMN3lObEg2ZzR2R0ozVHFWSm55a1ZjQnFVVnh6RDN1eWlyWkc4R2JWbWZrOWdENjVuNW5YZ0NLOWNPY1lXNWhQQ2Z6SlFyZGFhemhXMFVsZEdzZWlZcUpuMm5hZjByYlBzUVBVb0NYY1VxVnhnVFVEZmpxNE1jSFNyUmNNM0xKOXd3aUlYdTV2ZTVwOV9hZEFQM0dMQ3oxX0Z6WkdmN1pic0stTHE0d2R4MlZkM0RPQnNvMmUzUmQ2V1pUWi14X3pQSUNweGJQcnMwdU5fUFM2cFRBckVHM3R5cmpkbFpRdFQxQmJuLUFiWXVVM1hzX05uS2x0LTZqdVZfS2tpdEhGXS0tPjwvZz48L3N2Zz4=" class="uml" alt="uml diagram" title="" /></p>
<h3 id="money">金額（Money）値オブジェクト<a class="headerlink" href="#money" title="Permanent link">&para;</a></h3>
<div class="highlight"><pre><span></span><code><span class="kn">package</span><span class="w"> </span><span class="nn">com.example.accounting.domain.model.journal</span><span class="p">;</span>

<span class="kn">import</span><span class="w"> </span><span class="nn">lombok.Value</span><span class="p">;</span>
<span class="kn">import</span><span class="w"> </span><span class="nn">java.math.BigDecimal</span><span class="p">;</span>
<span class="kn">import</span><span class="w"> </span><span class="nn">java.math.RoundingMode</span><span class="p">;</span>

<span class="cm">/**</span>
<span class="cm"> * 金額を表現する値オブジェクト</span>
<span class="cm"> */</span>
<span class="nd">@Value</span>
<span class="kd">public</span><span class="w"> </span><span class="kd">class</span> <span class="nc">Money</span><span class="w"> </span><span class="p">{</span>

<span class="w">    </span><span class="kd">public</span><span class="w"> </span><span class="kd">static</span><span class="w"> </span><span class="kd">final</span><span class="w"> </span><span class="n">Money</span><span class="w"> </span><span class="n">ZERO</span><span class="w"> </span><span class="o">=</span><span class="w"> </span><span class="k">new</span><span class="w"> </span><span class="n">Money</span><span class="p">(</span><span class="n">BigDecimal</span><span class="p">.</span><span class="na">ZERO</span><span class="p">);</span>
<span class="w">    </span><span class="kd">private</span><span class="w"> </span><span class="kd">static</span><span class="w"> </span><span class="kd">final</span><span class="w"> </span><span class="kt">int</span><span class="w"> </span><span class="n">SCALE</span><span class="w"> </span><span class="o">=</span><span class="w"> </span><span class="mi">2</span><span class="p">;</span>
<span class="w">    </span><span class="kd">private</span><span class="w"> </span><span class="kd">static</span><span class="w"> </span><span class="kd">final</span><span class="w"> </span><span class="n">RoundingMode</span><span class="w"> </span><span class="n">ROUNDING</span><span class="w"> </span><span class="o">=</span><span class="w"> </span><span class="n">RoundingMode</span><span class="p">.</span><span class="na">HALF_UP</span><span class="p">;</span>

<span class="w">    </span><span class="n">BigDecimal</span><span class="w"> </span><span class="n">amount</span><span class="p">;</span>

<span class="w">    </span><span class="kd">private</span><span class="w"> </span><span class="nf">Money</span><span class="p">(</span><span class="n">BigDecimal</span><span class="w"> </span><span class="n">amount</span><span class="p">)</span><span class="w"> </span><span class="p">{</span>
<span class="w">        </span><span class="k">if</span><span class="w"> </span><span class="p">(</span><span class="n">amount</span><span class="w"> </span><span class="o">==</span><span class="w"> </span><span class="kc">null</span><span class="p">)</span><span class="w"> </span><span class="p">{</span>
<span class="w">            </span><span class="k">throw</span><span class="w"> </span><span class="k">new</span><span class="w"> </span><span class="n">NullPointerException</span><span class="p">(</span><span class="s">&quot;金額は null にできません&quot;</span><span class="p">);</span>
<span class="w">        </span><span class="p">}</span>
<span class="w">        </span><span class="k">this</span><span class="p">.</span><span class="na">amount</span><span class="w"> </span><span class="o">=</span><span class="w"> </span><span class="n">amount</span><span class="p">.</span><span class="na">setScale</span><span class="p">(</span><span class="n">SCALE</span><span class="p">,</span><span class="w"> </span><span class="n">ROUNDING</span><span class="p">);</span>
<span class="w">    </span><span class="p">}</span>

<span class="w">    </span><span class="cm">/**</span>
<span class="cm">     * 金額を生成</span>
<span class="cm">     */</span>
<span class="w">    </span><span class="kd">public</span><span class="w"> </span><span class="kd">static</span><span class="w"> </span><span class="n">Money</span><span class="w"> </span><span class="nf">of</span><span class="p">(</span><span class="n">BigDecimal</span><span class="w"> </span><span class="n">amount</span><span class="p">)</span><span class="w"> </span><span class="p">{</span>
<span class="w">        </span><span class="k">return</span><span class="w"> </span><span class="k">new</span><span class="w"> </span><span class="n">Money</span><span class="p">(</span><span class="n">amount</span><span class="p">);</span>
<span class="w">    </span><span class="p">}</span>

<span class="w">    </span><span class="cm">/**</span>
<span class="cm">     * 金額を生成（long 値から）</span>
<span class="cm">     */</span>
<span class="w">    </span><span class="kd">public</span><span class="w"> </span><span class="kd">static</span><span class="w"> </span><span class="n">Money</span><span class="w"> </span><span class="nf">of</span><span class="p">(</span><span class="kt">long</span><span class="w"> </span><span class="n">amount</span><span class="p">)</span><span class="w"> </span><span class="p">{</span>
<span class="w">        </span><span class="k">return</span><span class="w"> </span><span class="k">new</span><span class="w"> </span><span class="n">Money</span><span class="p">(</span><span class="n">BigDecimal</span><span class="p">.</span><span class="na">valueOf</span><span class="p">(</span><span class="n">amount</span><span class="p">));</span>
<span class="w">    </span><span class="p">}</span>

<span class="w">    </span><span class="cm">/**</span>
<span class="cm">     * 金額を生成（文字列から）</span>
<span class="cm">     */</span>
<span class="w">    </span><span class="kd">public</span><span class="w"> </span><span class="kd">static</span><span class="w"> </span><span class="n">Money</span><span class="w"> </span><span class="nf">of</span><span class="p">(</span><span class="n">String</span><span class="w"> </span><span class="n">amount</span><span class="p">)</span><span class="w"> </span><span class="p">{</span>
<span class="w">        </span><span class="k">return</span><span class="w"> </span><span class="k">new</span><span class="w"> </span><span class="n">Money</span><span class="p">(</span><span class="k">new</span><span class="w"> </span><span class="n">BigDecimal</span><span class="p">(</span><span class="n">amount</span><span class="p">));</span>
<span class="w">    </span><span class="p">}</span>

<span class="w">    </span><span class="cm">/**</span>
<span class="cm">     * 金額を加算（新しいインスタンスを返す）</span>
<span class="cm">     */</span>
<span class="w">    </span><span class="kd">public</span><span class="w"> </span><span class="n">Money</span><span class="w"> </span><span class="nf">add</span><span class="p">(</span><span class="n">Money</span><span class="w"> </span><span class="n">other</span><span class="p">)</span><span class="w"> </span><span class="p">{</span>
<span class="w">        </span><span class="k">if</span><span class="w"> </span><span class="p">(</span><span class="n">other</span><span class="w"> </span><span class="o">==</span><span class="w"> </span><span class="kc">null</span><span class="p">)</span><span class="w"> </span><span class="p">{</span>
<span class="w">            </span><span class="k">throw</span><span class="w"> </span><span class="k">new</span><span class="w"> </span><span class="n">NullPointerException</span><span class="p">(</span><span class="s">&quot;加算対象は null にできません&quot;</span><span class="p">);</span>
<span class="w">        </span><span class="p">}</span>
<span class="w">        </span><span class="k">return</span><span class="w"> </span><span class="k">new</span><span class="w"> </span><span class="n">Money</span><span class="p">(</span><span class="k">this</span><span class="p">.</span><span class="na">amount</span><span class="p">.</span><span class="na">add</span><span class="p">(</span><span class="n">other</span><span class="p">.</span><span class="na">amount</span><span class="p">));</span>
<span class="w">    </span><span class="p">}</span>

<span class="w">    </span><span class="cm">/**</span>
<span class="cm">     * 金額を減算（新しいインスタンスを返す）</span>
<span class="cm">     */</span>
<span class="w">    </span><span class="kd">public</span><span class="w"> </span><span class="n">Money</span><span class="w"> </span><span class="nf">subtract</span><span class="p">(</span><span class="n">Money</span><span class="w"> </span><span class="n">other</span><span class="p">)</span><span class="w"> </span><span class="p">{</span>
<span class="w">        </span><span class="k">if</span><span class="w"> </span><span class="p">(</span><span class="n">other</span><span class="w"> </span><span class="o">==</span><span class="w"> </span><span class="kc">null</span><span class="p">)</span><span class="w"> </span><span class="p">{</span>
<span class="w">            </span><span class="k">throw</span><span class="w"> </span><span class="k">new</span><span class="w"> </span><span class="n">NullPointerException</span><span class="p">(</span><span class="s">&quot;減算対象は null にできません&quot;</span><span class="p">);</span>
<span class="w">        </span><span class="p">}</span>
<span class="w">        </span><span class="k">return</span><span class="w"> </span><span class="k">new</span><span class="w"> </span><span class="n">Money</span><span class="p">(</span><span class="k">this</span><span class="p">.</span><span class="na">amount</span><span class="p">.</span><span class="na">subtract</span><span class="p">(</span><span class="n">other</span><span class="p">.</span><span class="na">amount</span><span class="p">));</span>
<span class="w">    </span><span class="p">}</span>

<span class="w">    </span><span class="cm">/**</span>
<span class="cm">     * 金額を乗算（新しいインスタンスを返す）</span>
<span class="cm">     */</span>
<span class="w">    </span><span class="kd">public</span><span class="w"> </span><span class="n">Money</span><span class="w"> </span><span class="nf">multiply</span><span class="p">(</span><span class="kt">int</span><span class="w"> </span><span class="n">multiplier</span><span class="p">)</span><span class="w"> </span><span class="p">{</span>
<span class="w">        </span><span class="k">return</span><span class="w"> </span><span class="k">new</span><span class="w"> </span><span class="n">Money</span><span class="p">(</span><span class="k">this</span><span class="p">.</span><span class="na">amount</span><span class="p">.</span><span class="na">multiply</span><span class="p">(</span><span class="n">BigDecimal</span><span class="p">.</span><span class="na">valueOf</span><span class="p">(</span><span class="n">multiplier</span><span class="p">)));</span>
<span class="w">    </span><span class="p">}</span>

<span class="w">    </span><span class="cm">/**</span>
<span class="cm">     * 金額を乗算（新しいインスタンスを返す）</span>
<span class="cm">     */</span>
<span class="w">    </span><span class="kd">public</span><span class="w"> </span><span class="n">Money</span><span class="w"> </span><span class="nf">multiply</span><span class="p">(</span><span class="n">BigDecimal</span><span class="w"> </span><span class="n">multiplier</span><span class="p">)</span><span class="w"> </span><span class="p">{</span>
<span class="w">        </span><span class="k">return</span><span class="w"> </span><span class="k">new</span><span class="w"> </span><span class="n">Money</span><span class="p">(</span><span class="k">this</span><span class="p">.</span><span class="na">amount</span><span class="p">.</span><span class="na">multiply</span><span class="p">(</span><span class="n">multiplier</span><span class="p">));</span>
<span class="w">    </span><span class="p">}</span>

<span class="w">    </span><span class="cm">/**</span>
<span class="cm">     * 正の金額かどうか</span>
<span class="cm">     */</span>
<span class="w">    </span><span class="kd">public</span><span class="w"> </span><span class="kt">boolean</span><span class="w"> </span><span class="nf">isPositive</span><span class="p">()</span><span class="w"> </span><span class="p">{</span>
<span class="w">        </span><span class="k">return</span><span class="w"> </span><span class="n">amount</span><span class="p">.</span><span class="na">compareTo</span><span class="p">(</span><span class="n">BigDecimal</span><span class="p">.</span><span class="na">ZERO</span><span class="p">)</span><span class="w"> </span><span class="o">&gt;</span><span class="w"> </span><span class="mi">0</span><span class="p">;</span>
<span class="w">    </span><span class="p">}</span>

<span class="w">    </span><span class="cm">/**</span>
<span class="cm">     * ゼロかどうか</span>
<span class="cm">     */</span>
<span class="w">    </span><span class="kd">public</span><span class="w"> </span><span class="kt">boolean</span><span class="w"> </span><span class="nf">isZero</span><span class="p">()</span><span class="w"> </span><span class="p">{</span>
<span class="w">        </span><span class="k">return</span><span class="w"> </span><span class="n">amount</span><span class="p">.</span><span class="na">compareTo</span><span class="p">(</span><span class="n">BigDecimal</span><span class="p">.</span><span class="na">ZERO</span><span class="p">)</span><span class="w"> </span><span class="o">==</span><span class="w"> </span><span class="mi">0</span><span class="p">;</span>
<span class="w">    </span><span class="p">}</span>

<span class="w">    </span><span class="cm">/**</span>
<span class="cm">     * 負の金額かどうか</span>
<span class="cm">     */</span>
<span class="w">    </span><span class="kd">public</span><span class="w"> </span><span class="kt">boolean</span><span class="w"> </span><span class="nf">isNegative</span><span class="p">()</span><span class="w"> </span><span class="p">{</span>
<span class="w">        </span><span class="k">return</span><span class="w"> </span><span class="n">amount</span><span class="p">.</span><span class="na">compareTo</span><span class="p">(</span><span class="n">BigDecimal</span><span class="p">.</span><span class="na">ZERO</span><span class="p">)</span><span class="w"> </span><span class="o">&lt;</span><span class="w"> </span><span class="mi">0</span><span class="p">;</span>
<span class="w">    </span><span class="p">}</span>

<span class="w">    </span><span class="cm">/**</span>
<span class="cm">     * 絶対値を取得</span>
<span class="cm">     */</span>
<span class="w">    </span><span class="kd">public</span><span class="w"> </span><span class="n">Money</span><span class="w"> </span><span class="nf">abs</span><span class="p">()</span><span class="w"> </span><span class="p">{</span>
<span class="w">        </span><span class="k">return</span><span class="w"> </span><span class="k">new</span><span class="w"> </span><span class="n">Money</span><span class="p">(</span><span class="k">this</span><span class="p">.</span><span class="na">amount</span><span class="p">.</span><span class="na">abs</span><span class="p">());</span>
<span class="w">    </span><span class="p">}</span>

<span class="w">    </span><span class="nd">@Override</span>
<span class="w">    </span><span class="kd">public</span><span class="w"> </span><span class="n">String</span><span class="w"> </span><span class="nf">toString</span><span class="p">()</span><span class="w"> </span><span class="p">{</span>
<span class="w">        </span><span class="k">return</span><span class="w"> </span><span class="n">amount</span><span class="p">.</span><span class="na">toString</span><span class="p">();</span>
<span class="w">    </span><span class="p">}</span>
<span class="p">}</span>
</code></pre></div>
<h3 id="_5">勘定科目コード値オブジェクト<a class="headerlink" href="#_5" title="Permanent link">&para;</a></h3>
<div class="highlight"><pre><span></span><code><span class="kn">package</span><span class="w"> </span><span class="nn">com.example.accounting.domain.model.account</span><span class="p">;</span>

<span class="kn">import</span><span class="w"> </span><span class="nn">lombok.Value</span><span class="p">;</span>

<span class="cm">/**</span>
<span class="cm"> * 勘定科目コードを表現する値オブジェクト</span>
<span class="cm"> */</span>
<span class="nd">@Value</span>
<span class="kd">public</span><span class="w"> </span><span class="kd">class</span> <span class="nc">AccountCode</span><span class="w"> </span><span class="p">{</span>

<span class="w">    </span><span class="n">String</span><span class="w"> </span><span class="n">value</span><span class="p">;</span>

<span class="w">    </span><span class="kd">private</span><span class="w"> </span><span class="nf">AccountCode</span><span class="p">(</span><span class="n">String</span><span class="w"> </span><span class="n">value</span><span class="p">)</span><span class="w"> </span><span class="p">{</span>
<span class="w">        </span><span class="k">if</span><span class="w"> </span><span class="p">(</span><span class="n">value</span><span class="w"> </span><span class="o">==</span><span class="w"> </span><span class="kc">null</span><span class="w"> </span><span class="o">||</span><span class="w"> </span><span class="n">value</span><span class="p">.</span><span class="na">isBlank</span><span class="p">())</span><span class="w"> </span><span class="p">{</span>
<span class="w">            </span><span class="k">throw</span><span class="w"> </span><span class="k">new</span><span class="w"> </span><span class="n">IllegalArgumentException</span><span class="p">(</span>
<span class="w">                </span><span class="s">&quot;勘定科目コードは必須です&quot;</span>
<span class="w">            </span><span class="p">);</span>
<span class="w">        </span><span class="p">}</span>
<span class="w">        </span><span class="k">if</span><span class="w"> </span><span class="p">(</span><span class="o">!</span><span class="n">value</span><span class="p">.</span><span class="na">matches</span><span class="p">(</span><span class="s">&quot;^\\d{4}$&quot;</span><span class="p">))</span><span class="w"> </span><span class="p">{</span>
<span class="w">            </span><span class="k">throw</span><span class="w"> </span><span class="k">new</span><span class="w"> </span><span class="n">IllegalArgumentException</span><span class="p">(</span>
<span class="w">                </span><span class="s">&quot;勘定科目コードは4桁の数字である必要があります: &quot;</span><span class="w"> </span><span class="o">+</span><span class="w"> </span><span class="n">value</span>
<span class="w">            </span><span class="p">);</span>
<span class="w">        </span><span class="p">}</span>
<span class="w">        </span><span class="k">this</span><span class="p">.</span><span class="na">value</span><span class="w"> </span><span class="o">=</span><span class="w"> </span><span class="n">value</span><span class="p">;</span>
<span class="w">    </span><span class="p">}</span>

<span class="w">    </span><span class="kd">public</span><span class="w"> </span><span class="kd">static</span><span class="w"> </span><span class="n">AccountCode</span><span class="w"> </span><span class="nf">of</span><span class="p">(</span><span class="n">String</span><span class="w"> </span><span class="n">value</span><span class="p">)</span><span class="w"> </span><span class="p">{</span>
<span class="w">        </span><span class="k">return</span><span class="w"> </span><span class="k">new</span><span class="w"> </span><span class="n">AccountCode</span><span class="p">(</span><span class="n">value</span><span class="p">);</span>
<span class="w">    </span><span class="p">}</span>

<span class="w">    </span><span class="cm">/**</span>
<span class="cm">     * 科目カテゴリを取得（先頭2桁）</span>
<span class="cm">     */</span>
<span class="w">    </span><span class="kd">public</span><span class="w"> </span><span class="n">String</span><span class="w"> </span><span class="nf">getCategory</span><span class="p">()</span><span class="w"> </span><span class="p">{</span>
<span class="w">        </span><span class="k">return</span><span class="w"> </span><span class="n">value</span><span class="p">.</span><span class="na">substring</span><span class="p">(</span><span class="mi">0</span><span class="p">,</span><span class="w"> </span><span class="mi">2</span><span class="p">);</span>
<span class="w">    </span><span class="p">}</span>

<span class="w">    </span><span class="cm">/**</span>
<span class="cm">     * 貸借対照表科目かどうか</span>
<span class="cm">     */</span>
<span class="w">    </span><span class="kd">public</span><span class="w"> </span><span class="kt">boolean</span><span class="w"> </span><span class="nf">isBalanceSheetAccount</span><span class="p">()</span><span class="w"> </span><span class="p">{</span>
<span class="w">        </span><span class="n">String</span><span class="w"> </span><span class="n">category</span><span class="w"> </span><span class="o">=</span><span class="w"> </span><span class="n">getCategory</span><span class="p">();</span>
<span class="w">        </span><span class="k">return</span><span class="w"> </span><span class="n">category</span><span class="p">.</span><span class="na">startsWith</span><span class="p">(</span><span class="s">&quot;1&quot;</span><span class="p">)</span><span class="w"> </span><span class="o">||</span><span class="w">  </span><span class="c1">// 資産</span>
<span class="w">               </span><span class="n">category</span><span class="p">.</span><span class="na">startsWith</span><span class="p">(</span><span class="s">&quot;2&quot;</span><span class="p">)</span><span class="w"> </span><span class="o">||</span><span class="w">  </span><span class="c1">// 負債</span>
<span class="w">               </span><span class="n">category</span><span class="p">.</span><span class="na">startsWith</span><span class="p">(</span><span class="s">&quot;3&quot;</span><span class="p">);</span><span class="w">    </span><span class="c1">// 純資産</span>
<span class="w">    </span><span class="p">}</span>

<span class="w">    </span><span class="cm">/**</span>
<span class="cm">     * 損益計算書科目かどうか</span>
<span class="cm">     */</span>
<span class="w">    </span><span class="kd">public</span><span class="w"> </span><span class="kt">boolean</span><span class="w"> </span><span class="nf">isProfitLossAccount</span><span class="p">()</span><span class="w"> </span><span class="p">{</span>
<span class="w">        </span><span class="n">String</span><span class="w"> </span><span class="n">category</span><span class="w"> </span><span class="o">=</span><span class="w"> </span><span class="n">getCategory</span><span class="p">();</span>
<span class="w">        </span><span class="k">return</span><span class="w"> </span><span class="n">category</span><span class="p">.</span><span class="na">startsWith</span><span class="p">(</span><span class="s">&quot;4&quot;</span><span class="p">)</span><span class="w"> </span><span class="o">||</span><span class="w">  </span><span class="c1">// 収益</span>
<span class="w">               </span><span class="n">category</span><span class="p">.</span><span class="na">startsWith</span><span class="p">(</span><span class="s">&quot;5&quot;</span><span class="p">)</span><span class="w"> </span><span class="o">||</span><span class="w">  </span><span class="c1">// 売上原価</span>
<span class="w">               </span><span class="n">category</span><span class="p">.</span><span class="na">startsWith</span><span class="p">(</span><span class="s">&quot;6&quot;</span><span class="p">)</span><span class="w"> </span><span class="o">||</span><span class="w">  </span><span class="c1">// 営業外費用</span>
<span class="w">               </span><span class="n">category</span><span class="p">.</span><span class="na">startsWith</span><span class="p">(</span><span class="s">&quot;7&quot;</span><span class="p">);</span><span class="w">    </span><span class="c1">// 特別損益・法人税</span>
<span class="w">    </span><span class="p">}</span>

<span class="w">    </span><span class="cm">/**</span>
<span class="cm">     * 資産科目かどうか</span>
<span class="cm">     */</span>
<span class="w">    </span><span class="kd">public</span><span class="w"> </span><span class="kt">boolean</span><span class="w"> </span><span class="nf">isAssetAccount</span><span class="p">()</span><span class="w"> </span><span class="p">{</span>
<span class="w">        </span><span class="k">return</span><span class="w"> </span><span class="n">getCategory</span><span class="p">().</span><span class="na">startsWith</span><span class="p">(</span><span class="s">&quot;1&quot;</span><span class="p">);</span>
<span class="w">    </span><span class="p">}</span>

<span class="w">    </span><span class="cm">/**</span>
<span class="cm">     * 負債科目かどうか</span>
<span class="cm">     */</span>
<span class="w">    </span><span class="kd">public</span><span class="w"> </span><span class="kt">boolean</span><span class="w"> </span><span class="nf">isLiabilityAccount</span><span class="p">()</span><span class="w"> </span><span class="p">{</span>
<span class="w">        </span><span class="k">return</span><span class="w"> </span><span class="n">getCategory</span><span class="p">().</span><span class="na">startsWith</span><span class="p">(</span><span class="s">&quot;2&quot;</span><span class="p">);</span>
<span class="w">    </span><span class="p">}</span>

<span class="w">    </span><span class="cm">/**</span>
<span class="cm">     * 純資産科目かどうか</span>
<span class="cm">     */</span>
<span class="w">    </span><span class="kd">public</span><span class="w"> </span><span class="kt">boolean</span><span class="w"> </span><span class="nf">isEquityAccount</span><span class="p">()</span><span class="w"> </span><span class="p">{</span>
<span class="w">        </span><span class="k">return</span><span class="w"> </span><span class="n">getCategory</span><span class="p">().</span><span class="na">startsWith</span><span class="p">(</span><span class="s">&quot;3&quot;</span><span class="p">);</span>
<span class="w">    </span><span class="p">}</span>

<span class="w">    </span><span class="cm">/**</span>
<span class="cm">     * 収益科目かどうか</span>
<span class="cm">     */</span>
<span class="w">    </span><span class="kd">public</span><span class="w"> </span><span class="kt">boolean</span><span class="w"> </span><span class="nf">isRevenueAccount</span><span class="p">()</span><span class="w"> </span><span class="p">{</span>
<span class="w">        </span><span class="k">return</span><span class="w"> </span><span class="n">getCategory</span><span class="p">().</span><span class="na">startsWith</span><span class="p">(</span><span class="s">&quot;4&quot;</span><span class="p">);</span>
<span class="w">    </span><span class="p">}</span>

<span class="w">    </span><span class="cm">/**</span>
<span class="cm">     * 費用科目かどうか</span>
<span class="cm">     */</span>
<span class="w">    </span><span class="kd">public</span><span class="w"> </span><span class="kt">boolean</span><span class="w"> </span><span class="nf">isExpenseAccount</span><span class="p">()</span><span class="w"> </span><span class="p">{</span>
<span class="w">        </span><span class="n">String</span><span class="w"> </span><span class="n">category</span><span class="w"> </span><span class="o">=</span><span class="w"> </span><span class="n">getCategory</span><span class="p">();</span>
<span class="w">        </span><span class="k">return</span><span class="w"> </span><span class="n">category</span><span class="p">.</span><span class="na">startsWith</span><span class="p">(</span><span class="s">&quot;5&quot;</span><span class="p">)</span><span class="w"> </span><span class="o">||</span>
<span class="w">               </span><span class="n">category</span><span class="p">.</span><span class="na">startsWith</span><span class="p">(</span><span class="s">&quot;6&quot;</span><span class="p">)</span><span class="w"> </span><span class="o">||</span>
<span class="w">               </span><span class="n">category</span><span class="p">.</span><span class="na">startsWith</span><span class="p">(</span><span class="s">&quot;7&quot;</span><span class="p">);</span>
<span class="w">    </span><span class="p">}</span>
<span class="p">}</span>
</code></pre></div>
<h3 id="_6">仕訳番号値オブジェクト<a class="headerlink" href="#_6" title="Permanent link">&para;</a></h3>
<div class="highlight"><pre><span></span><code><span class="kn">package</span><span class="w"> </span><span class="nn">com.example.accounting.domain.model.journal</span><span class="p">;</span>

<span class="kn">import</span><span class="w"> </span><span class="nn">lombok.Value</span><span class="p">;</span>
<span class="kn">import</span><span class="w"> </span><span class="nn">java.time.LocalDate</span><span class="p">;</span>
<span class="kn">import</span><span class="w"> </span><span class="nn">java.time.format.DateTimeFormatter</span><span class="p">;</span>

<span class="cm">/**</span>
<span class="cm"> * 仕訳番号を表現する値オブジェクト</span>
<span class="cm"> */</span>
<span class="nd">@Value</span>
<span class="kd">public</span><span class="w"> </span><span class="kd">class</span> <span class="nc">JournalNumber</span><span class="w"> </span><span class="p">{</span>

<span class="w">    </span><span class="kd">private</span><span class="w"> </span><span class="kd">static</span><span class="w"> </span><span class="kd">final</span><span class="w"> </span><span class="n">String</span><span class="w"> </span><span class="n">PREFIX</span><span class="w"> </span><span class="o">=</span><span class="w"> </span><span class="s">&quot;JE&quot;</span><span class="p">;</span>
<span class="w">    </span><span class="kd">private</span><span class="w"> </span><span class="kd">static</span><span class="w"> </span><span class="kd">final</span><span class="w"> </span><span class="n">DateTimeFormatter</span><span class="w"> </span><span class="n">DATE_FORMAT</span><span class="w"> </span><span class="o">=</span>
<span class="w">        </span><span class="n">DateTimeFormatter</span><span class="p">.</span><span class="na">ofPattern</span><span class="p">(</span><span class="s">&quot;yyyyMMdd&quot;</span><span class="p">);</span>

<span class="w">    </span><span class="n">String</span><span class="w"> </span><span class="n">value</span><span class="p">;</span>

<span class="w">    </span><span class="kd">private</span><span class="w"> </span><span class="nf">JournalNumber</span><span class="p">(</span><span class="n">String</span><span class="w"> </span><span class="n">value</span><span class="p">)</span><span class="w"> </span><span class="p">{</span>
<span class="w">        </span><span class="k">if</span><span class="w"> </span><span class="p">(</span><span class="n">value</span><span class="w"> </span><span class="o">==</span><span class="w"> </span><span class="kc">null</span><span class="w"> </span><span class="o">||</span><span class="w"> </span><span class="n">value</span><span class="p">.</span><span class="na">isBlank</span><span class="p">())</span><span class="w"> </span><span class="p">{</span>
<span class="w">            </span><span class="k">throw</span><span class="w"> </span><span class="k">new</span><span class="w"> </span><span class="n">IllegalArgumentException</span><span class="p">(</span><span class="s">&quot;仕訳番号は必須です&quot;</span><span class="p">);</span>
<span class="w">        </span><span class="p">}</span>
<span class="w">        </span><span class="k">if</span><span class="w"> </span><span class="p">(</span><span class="o">!</span><span class="n">value</span><span class="p">.</span><span class="na">matches</span><span class="p">(</span><span class="s">&quot;^JE\\d{8}-\\d{4}$&quot;</span><span class="p">))</span><span class="w"> </span><span class="p">{</span>
<span class="w">            </span><span class="k">throw</span><span class="w"> </span><span class="k">new</span><span class="w"> </span><span class="n">IllegalArgumentException</span><span class="p">(</span>
<span class="w">                </span><span class="s">&quot;仕訳番号の形式が不正です: &quot;</span><span class="w"> </span><span class="o">+</span><span class="w"> </span><span class="n">value</span>
<span class="w">            </span><span class="p">);</span>
<span class="w">        </span><span class="p">}</span>
<span class="w">        </span><span class="k">this</span><span class="p">.</span><span class="na">value</span><span class="w"> </span><span class="o">=</span><span class="w"> </span><span class="n">value</span><span class="p">;</span>
<span class="w">    </span><span class="p">}</span>

<span class="w">    </span><span class="kd">public</span><span class="w"> </span><span class="kd">static</span><span class="w"> </span><span class="n">JournalNumber</span><span class="w"> </span><span class="nf">of</span><span class="p">(</span><span class="n">String</span><span class="w"> </span><span class="n">value</span><span class="p">)</span><span class="w"> </span><span class="p">{</span>
<span class="w">        </span><span class="k">return</span><span class="w"> </span><span class="k">new</span><span class="w"> </span><span class="n">JournalNumber</span><span class="p">(</span><span class="n">value</span><span class="p">);</span>
<span class="w">    </span><span class="p">}</span>

<span class="w">    </span><span class="cm">/**</span>
<span class="cm">     * 新しい仕訳番号を生成</span>
<span class="cm">     */</span>
<span class="w">    </span><span class="kd">public</span><span class="w"> </span><span class="kd">static</span><span class="w"> </span><span class="n">JournalNumber</span><span class="w"> </span><span class="nf">generate</span><span class="p">(</span><span class="n">LocalDate</span><span class="w"> </span><span class="n">date</span><span class="p">,</span><span class="w"> </span><span class="kt">int</span><span class="w"> </span><span class="n">sequence</span><span class="p">)</span><span class="w"> </span><span class="p">{</span>
<span class="w">        </span><span class="n">String</span><span class="w"> </span><span class="n">dateStr</span><span class="w"> </span><span class="o">=</span><span class="w"> </span><span class="n">date</span><span class="p">.</span><span class="na">format</span><span class="p">(</span><span class="n">DATE_FORMAT</span><span class="p">);</span>
<span class="w">        </span><span class="n">String</span><span class="w"> </span><span class="n">seqStr</span><span class="w"> </span><span class="o">=</span><span class="w"> </span><span class="n">String</span><span class="p">.</span><span class="na">format</span><span class="p">(</span><span class="s">&quot;%04d&quot;</span><span class="p">,</span><span class="w"> </span><span class="n">sequence</span><span class="p">);</span>
<span class="w">        </span><span class="k">return</span><span class="w"> </span><span class="k">new</span><span class="w"> </span><span class="n">JournalNumber</span><span class="p">(</span><span class="n">PREFIX</span><span class="w"> </span><span class="o">+</span><span class="w"> </span><span class="n">dateStr</span><span class="w"> </span><span class="o">+</span><span class="w"> </span><span class="s">&quot;-&quot;</span><span class="w"> </span><span class="o">+</span><span class="w"> </span><span class="n">seqStr</span><span class="p">);</span>
<span class="w">    </span><span class="p">}</span>

<span class="w">    </span><span class="cm">/**</span>
<span class="cm">     * 仕訳日を取得</span>
<span class="cm">     */</span>
<span class="w">    </span><span class="kd">public</span><span class="w"> </span><span class="n">LocalDate</span><span class="w"> </span><span class="nf">getJournalDate</span><span class="p">()</span><span class="w"> </span><span class="p">{</span>
<span class="w">        </span><span class="n">String</span><span class="w"> </span><span class="n">dateStr</span><span class="w"> </span><span class="o">=</span><span class="w"> </span><span class="n">value</span><span class="p">.</span><span class="na">substring</span><span class="p">(</span><span class="mi">2</span><span class="p">,</span><span class="w"> </span><span class="mi">10</span><span class="p">);</span>
<span class="w">        </span><span class="k">return</span><span class="w"> </span><span class="n">LocalDate</span><span class="p">.</span><span class="na">parse</span><span class="p">(</span><span class="n">dateStr</span><span class="p">,</span><span class="w"> </span><span class="n">DATE_FORMAT</span><span class="p">);</span>
<span class="w">    </span><span class="p">}</span>

<span class="w">    </span><span class="cm">/**</span>
<span class="cm">     * 連番を取得</span>
<span class="cm">     */</span>
<span class="w">    </span><span class="kd">public</span><span class="w"> </span><span class="kt">int</span><span class="w"> </span><span class="nf">getSequence</span><span class="p">()</span><span class="w"> </span><span class="p">{</span>
<span class="w">        </span><span class="k">return</span><span class="w"> </span><span class="n">Integer</span><span class="p">.</span><span class="na">parseInt</span><span class="p">(</span><span class="n">value</span><span class="p">.</span><span class="na">substring</span><span class="p">(</span><span class="mi">11</span><span class="p">));</span>
<span class="w">    </span><span class="p">}</span>
<span class="p">}</span>
</code></pre></div>
<h3 id="_7">値オブジェクトの等価性<a class="headerlink" href="#_7" title="Permanent link">&para;</a></h3>
<div class="highlight"><pre><span></span><code><span class="nd">@Test</span>
<span class="nd">@DisplayName</span><span class="p">(</span><span class="s">&quot;金額の等価性をテストする&quot;</span><span class="p">)</span>
<span class="kt">void</span><span class="w"> </span><span class="nf">testMoneyEquality</span><span class="p">()</span><span class="w"> </span><span class="p">{</span>
<span class="w">    </span><span class="c1">// 同じ金額は等しい</span>
<span class="w">    </span><span class="n">assertEquals</span><span class="p">(</span><span class="n">Money</span><span class="p">.</span><span class="na">of</span><span class="p">(</span><span class="mi">10000</span><span class="p">),</span><span class="w"> </span><span class="n">Money</span><span class="p">.</span><span class="na">of</span><span class="p">(</span><span class="mi">10000</span><span class="p">));</span>
<span class="w">    </span><span class="n">assertEquals</span><span class="p">(</span><span class="n">Money</span><span class="p">.</span><span class="na">of</span><span class="p">(</span><span class="s">&quot;10000.00&quot;</span><span class="p">),</span><span class="w"> </span><span class="n">Money</span><span class="p">.</span><span class="na">of</span><span class="p">(</span><span class="mi">10000</span><span class="p">));</span>

<span class="w">    </span><span class="c1">// 異なる金額は等しくない</span>
<span class="w">    </span><span class="n">assertNotEquals</span><span class="p">(</span><span class="n">Money</span><span class="p">.</span><span class="na">of</span><span class="p">(</span><span class="mi">10000</span><span class="p">),</span><span class="w"> </span><span class="n">Money</span><span class="p">.</span><span class="na">of</span><span class="p">(</span><span class="mi">5000</span><span class="p">));</span>

<span class="w">    </span><span class="c1">// ZERO 定数との比較</span>
<span class="w">    </span><span class="n">assertEquals</span><span class="p">(</span><span class="n">Money</span><span class="p">.</span><span class="na">ZERO</span><span class="p">,</span><span class="w"> </span><span class="n">Money</span><span class="p">.</span><span class="na">of</span><span class="p">(</span><span class="mi">0</span><span class="p">));</span>
<span class="p">}</span>

<span class="nd">@Test</span>
<span class="nd">@DisplayName</span><span class="p">(</span><span class="s">&quot;勘定科目コードの等価性をテストする&quot;</span><span class="p">)</span>
<span class="kt">void</span><span class="w"> </span><span class="nf">testAccountCodeEquality</span><span class="p">()</span><span class="w"> </span><span class="p">{</span>
<span class="w">    </span><span class="c1">// 同じコードは等しい</span>
<span class="w">    </span><span class="n">assertEquals</span><span class="p">(</span><span class="n">AccountCode</span><span class="p">.</span><span class="na">of</span><span class="p">(</span><span class="s">&quot;1101&quot;</span><span class="p">),</span><span class="w"> </span><span class="n">AccountCode</span><span class="p">.</span><span class="na">of</span><span class="p">(</span><span class="s">&quot;1101&quot;</span><span class="p">));</span>

<span class="w">    </span><span class="c1">// 異なるコードは等しくない</span>
<span class="w">    </span><span class="n">assertNotEquals</span><span class="p">(</span><span class="n">AccountCode</span><span class="p">.</span><span class="na">of</span><span class="p">(</span><span class="s">&quot;1101&quot;</span><span class="p">),</span><span class="w"> </span><span class="n">AccountCode</span><span class="p">.</span><span class="na">of</span><span class="p">(</span><span class="s">&quot;1102&quot;</span><span class="p">));</span>
<span class="p">}</span>
</code></pre></div>
<hr />
<h2 id="233">23.3 メソッド抽出<a class="headerlink" href="#233" title="Permanent link">&para;</a></h2>
<h3 id="_8">複雑度の測定<a class="headerlink" href="#_8" title="Permanent link">&para;</a></h3>
<p>メソッドが長くなったり、複雑度が高くなったりした場合は、メソッド抽出を検討します。</p>
<p><img src="data:image/svg+xml;base64,PHN2ZyB4bWxucz0iaHR0cDovL3d3dy53My5vcmcvMjAwMC9zdmciIHhtbG5zOnhsaW5rPSJodHRwOi8vd3d3LnczLm9yZy8xOTk5L3hsaW5rIiBjb250ZW50U3R5bGVUeXBlPSJ0ZXh0L2NzcyIgZGF0YS1kaWFncmFtLXR5cGU9IkFDVElWSVRZIiBoZWlnaHQ9Ijc2NnB4IiBwcmVzZXJ2ZUFzcGVjdFJhdGlvPSJub25lIiBzdHlsZT0id2lkdGg6NDE2cHg7aGVpZ2h0Ojc2NnB4O2JhY2tncm91bmQ6I0ZGRkZGRjsiIHZlcnNpb249IjEuMSIgdmlld0JveD0iMCAwIDQxNiA3NjYiIHdpZHRoPSI0MTZweCIgem9vbUFuZFBhbj0ibWFnbmlmeSI+PHRpdGxlPiYjMTI1MTM7JiMxMjQ3NzsmIzEyNDgzOyYjMTI0ODk7JiMyNTI3NzsmIzIwOTg2OyYjMTIzOTg7JiMyMTAyODsmIzI2MDI5OyYjMjI1MjI7JiMyODMxMDs8L3RpdGxlPjxkZWZzLz48Zz48ZyBjbGFzcz0idGl0bGUiIGRhdGEtc291cmNlLWxpbmU9IjEiPjx0ZXh0IGZpbGw9IiMwMDAwMDAiIGZvbnQtZmFtaWx5PSJzYW5zLXNlcmlmIiBmb250LXNpemU9IjE0IiBmb250LXdlaWdodD0iYm9sZCIgbGVuZ3RoQWRqdXN0PSJzcGFjaW5nIiB0ZXh0TGVuZ3RoPSIxNTMuOTk5MyIgeD0iMTI5LjcxIiB5PSIzMi45OTUxIj4mIzEyNTEzOyYjMTI0Nzc7JiMxMjQ4MzsmIzEyNDg5OyYjMjUyNzc7JiMyMDk4NjsmIzEyMzk4OyYjMjEwMjg7JiMyNjAyOTsmIzIyNTIyOyYjMjgzMTA7PC90ZXh0PjwvZz48ZWxsaXBzZSBjeD0iMTA2LjQxODciIGN5PSI1Ny4yOTY5IiBmaWxsPSIjMjIyMjIyIiByeD0iMTAiIHJ5PSIxMCIgc3R5bGU9InN0cm9rZTojMjIyMjIyO3N0cm9rZS13aWR0aDoxOyIvPjxyZWN0IGZpbGw9IiNGMUYxRjEiIGhlaWdodD0iMzMuOTY4OCIgcng9IjEyLjUiIHJ5PSIxMi41IiBzdHlsZT0ic3Ryb2tlOiMxODE4MTg7c3Ryb2tlLXdpZHRoOjAuNTsiIHdpZHRoPSIxNDAuMDAwOSIgeD0iMzYuNDE4MiIgeT0iODcuMjk2OSIvPjx0ZXh0IGZpbGw9IiMwMDAwMDAiIGZvbnQtZmFtaWx5PSJzYW5zLXNlcmlmIiBmb250LXNpemU9IjEyIiBsZW5ndGhBZGp1c3Q9InNwYWNpbmciIHRleHRMZW5ndGg9IjEyMC4wMDA5IiB4PSI0Ni40MTgyIiB5PSIxMDguNDM1NSI+JiMxMjQ2NzsmIzEyNTQwOyYjMTI0ODk7JiMxMjM5ODsmIzM1MDc5OyYjMzg2MDk7JiMyNDIzMDsmIzEyNDM0OyYjMzA5MDY7JiMzNTQ2OTs8L3RleHQ+PHJlY3QgZmlsbD0iI0YxRjFGMSIgaGVpZ2h0PSIzMy45Njg4IiByeD0iMTIuNSIgcnk9IjEyLjUiIHN0eWxlPSJzdHJva2U6IzE4MTgxODtzdHJva2Utd2lkdGg6MC41OyIgd2lkdGg9IjEyOC4wMDA4IiB4PSI0Mi40MTgzIiB5PSIxODkuNjY4Ii8+PHRleHQgZmlsbD0iIzAwMDAwMCIgZm9udC1mYW1pbHk9InNhbnMtc2VyaWYiIGZvbnQtc2l6ZT0iMTIiIGxlbmd0aEFkanVzdD0ic3BhY2luZyIgdGV4dExlbmd0aD0iMTA4LjAwMDgiIHg9IjUyLjQxODMiIHk9IjIxMC44MDY2Ij4mIzEyNTEzOyYjMTI0Nzc7JiMxMjQ4MzsmIzEyNDg5OyYjMjUyNzc7JiMyMDk4NjsmIzEyNDM0OyYjMjY5MDg7JiMzNTM0Mjs8L3RleHQ+PHBvbHlnb24gZmlsbD0iI0YxRjFGMSIgcG9pbnRzPSI0MS41MDE0LDE0MS4yNjU2LDE3MS4zMzYsMTQxLjI2NTYsMTgzLjMzNiwxNTMuMjY1NiwxNzEuMzM2LDE2NS4yNjU2LDQxLjUwMTQsMTY1LjI2NTYsMjkuNTAxNCwxNTMuMjY1Niw0MS41MDE0LDE0MS4yNjU2IiBzdHlsZT0ic3Ryb2tlOiMxODE4MTg7c3Ryb2tlLXdpZHRoOjAuNTsiLz48dGV4dCBmaWxsPSIjMDAwMDAwIiBmb250LWZhbWlseT0ic2Fucy1zZXJpZiIgZm9udC1zaXplPSIxMSIgbGVuZ3RoQWRqdXN0PSJzcGFjaW5nIiB0ZXh0TGVuZ3RoPSIxOS4wMDgzIiB4PSIxMTAuNDE4NyIgeT0iMTc1LjQ3NjEiPnllczwvdGV4dD48dGV4dCBmaWxsPSIjMDAwMDAwIiBmb250LWZhbWlseT0ic2Fucy1zZXJpZiIgZm9udC1zaXplPSIxMSIgbGVuZ3RoQWRqdXN0PSJzcGFjaW5nIiB0ZXh0TGVuZ3RoPSIxMjkuODM0NyIgeD0iNDEuNTAxNCIgeT0iMTU3LjA3MzciPiYjMTI1MTM7JiMxMjQ3NzsmIzEyNDgzOyYjMTI0ODk7JiMxMjM2NDsyMCYjMzQ4OTI7JiMxMjQzNDsmIzM2MjI5OyYjMTIzNjA7JiMxMjQyNzs/PC90ZXh0Pjx0ZXh0IGZpbGw9IiMwMDAwMDAiIGZvbnQtZmFtaWx5PSJzYW5zLXNlcmlmIiBmb250LXNpemU9IjExIiBsZW5ndGhBZGp1c3Q9InNwYWNpbmciIHRleHRMZW5ndGg9IjEzLjcwMTciIHg9IjE4My4zMzYiIHk9IjE1MC42NzE0Ij5ubzwvdGV4dD48cG9seWdvbiBmaWxsPSIjRjFGMUYxIiBwb2ludHM9IjEwNi40MTg3LDI0My42MzY3LDExOC40MTg3LDI1NS42MzY3LDEwNi40MTg3LDI2Ny42MzY3LDk0LjQxODcsMjU1LjYzNjcsMTA2LjQxODcsMjQzLjYzNjciIHN0eWxlPSJzdHJva2U6IzE4MTgxODtzdHJva2Utd2lkdGg6MC41OyIvPjxyZWN0IGZpbGw9IiNGMUYxRjEiIGhlaWdodD0iMzMuOTY4OCIgcng9IjEyLjUiIHJ5PSIxMi41IiBzdHlsZT0ic3Ryb2tlOiMxODE4MTg7c3Ryb2tlLXdpZHRoOjAuNTsiIHdpZHRoPSIxMjguMDAwOCIgeD0iNDIuNDE4MyIgeT0iMzM2LjAzOTEiLz48dGV4dCBmaWxsPSIjMDAwMDAwIiBmb250LWZhbWlseT0ic2Fucy1zZXJpZiIgZm9udC1zaXplPSIxMiIgbGVuZ3RoQWRqdXN0PSJzcGFjaW5nIiB0ZXh0TGVuZ3RoPSIxMDguMDAwOCIgeD0iNTIuNDE4MyIgeT0iMzU3LjE3NzciPiYjMTI1MTM7JiMxMjQ3NzsmIzEyNDgzOyYjMTI0ODk7JiMyNTI3NzsmIzIwOTg2OyYjMTI0MzQ7JiMyNjkwODsmIzM1MzQyOzwvdGV4dD48cG9seWdvbiBmaWxsPSIjRjFGMUYxIiBwb2ludHM9IjYxLjUwMDUsMjg3LjYzNjcsMTUxLjMzNjksMjg3LjYzNjcsMTYzLjMzNjksMjk5LjYzNjcsMTUxLjMzNjksMzExLjYzNjcsNjEuNTAwNSwzMTEuNjM2Nyw0OS41MDA1LDI5OS42MzY3LDYxLjUwMDUsMjg3LjYzNjciIHN0eWxlPSJzdHJva2U6IzE4MTgxODtzdHJva2Utd2lkdGg6MC41OyIvPjx0ZXh0IGZpbGw9IiMwMDAwMDAiIGZvbnQtZmFtaWx5PSJzYW5zLXNlcmlmIiBmb250LXNpemU9IjExIiBsZW5ndGhBZGp1c3Q9InNwYWNpbmciIHRleHRMZW5ndGg9IjE5LjAwODMiIHg9IjExMC40MTg3IiB5PSIzMjEuODQ3MiI+eWVzPC90ZXh0Pjx0ZXh0IGZpbGw9IiMwMDAwMDAiIGZvbnQtZmFtaWx5PSJzYW5zLXNlcmlmIiBmb250LXNpemU9IjExIiBsZW5ndGhBZGp1c3Q9InNwYWNpbmciIHRleHRMZW5ndGg9Ijg5LjgzNjQiIHg9IjYxLjUwMDUiIHk9IjMwMy40NDQ4Ij4mIzEyNDkzOyYjMTI0NzM7JiMxMjQ4ODsmIzEyMzY0OzMmIzI3NTczOyYjMjAxOTc7JiMxOTk3ODs/PC90ZXh0Pjx0ZXh0IGZpbGw9IiMwMDAwMDAiIGZvbnQtZmFtaWx5PSJzYW5zLXNlcmlmIiBmb250LXNpemU9IjExIiBsZW5ndGhBZGp1c3Q9InNwYWNpbmciIHRleHRMZW5ndGg9IjEzLjcwMTciIHg9IjE2My4zMzY5IiB5PSIyOTcuMDQyNSI+bm88L3RleHQ+PHBvbHlnb24gZmlsbD0iI0YxRjFGMSIgcG9pbnRzPSIxMDYuNDE4NywzOTAuMDA3OCwxMTguNDE4Nyw0MDIuMDA3OCwxMDYuNDE4Nyw0MTQuMDA3OCw5NC40MTg3LDQwMi4wMDc4LDEwNi40MTg3LDM5MC4wMDc4IiBzdHlsZT0ic3Ryb2tlOiMxODE4MTg7c3Ryb2tlLXdpZHRoOjAuNTsiLz48cGF0aCBkPSJNMTkwLjQxOTEsNDgyLjQxMDIgTDE5MC40MTkxLDQ5OC41NDMgTDE3MC40MTkxLDUwMi41NDMgTDE5MC40MTkxLDUwNi41NDMgTDE5MC40MTkxLDUyMi42NzU4IEEwLDAgMCAwIDAgMTkwLjQxOTEsNTIyLjY3NTggTDM4MC40MTkzLDUyMi42NzU4IEEwLDAgMCAwIDAgMzgwLjQxOTMsNTIyLjY3NTggTDM4MC40MTkzLDQ5Mi40MTAyIEwzNzAuNDE5Myw0ODIuNDEwMiBMMTkwLjQxOTEsNDgyLjQxMDIgQTAsMCAwIDAgMCAxOTAuNDE5MSw0ODIuNDEwMiIgZmlsbD0iI0ZFRkZERCIgc3R5bGU9InN0cm9rZTojMTgxODE4O3N0cm9rZS13aWR0aDowLjU7Ii8+PHBhdGggZD0iTTM3MC40MTkzLDQ4Mi40MTAyIEwzNzAuNDE5Myw0OTIuNDEwMiBMMzgwLjQxOTMsNDkyLjQxMDIgTDM3MC40MTkzLDQ4Mi40MTAyIiBmaWxsPSIjRkVGRkREIiBzdHlsZT0ic3Ryb2tlOiMxODE4MTg7c3Ryb2tlLXdpZHRoOjAuNTsiLz48dGV4dCBmaWxsPSIjMDAwMDAwIiBmb250LWZhbWlseT0ic2Fucy1zZXJpZiIgZm9udC1zaXplPSIxMyIgbGVuZ3RoQWRqdXN0PSJzcGFjaW5nIiB0ZXh0TGVuZ3RoPSIxMTcuMDAwMSIgeD0iMTk2LjQxOTEiIHk9IjQ5OS40NzcxIj4mIzEyNDY3OyYjMTI1MTM7JiMxMjUzMTsmIzEyNDg4OyYjMTIzOTg7JiMyMDE5NTsmIzEyNDMxOyYjMTI0MjY7JiMxMjM5NTs8L3RleHQ+PHRleHQgZmlsbD0iIzAwMDAwMCIgZm9udC1mYW1pbHk9InNhbnMtc2VyaWYiIGZvbnQtc2l6ZT0iMTMiIGxlbmd0aEFkanVzdD0ic3BhY2luZyIgdGV4dExlbmd0aD0iMTY5LjAwMDIiIHg9IjE5Ni40MTkxIiB5PSI1MTQuNjA5OSI+JiMyNDg0NzsmIzIyMjU5OyYjMTI0MzQ7JiMzNDkyMDsmIzEyMzc3OyYjMTI1MTM7JiMxMjQ3NzsmIzEyNDgzOyYjMTI0ODk7JiMyMTUxNzsmIzEyNDM0OyYjMjAzNTE7JiMyOTk5Mjs8L3RleHQ+PHJlY3QgZmlsbD0iI0YxRjFGMSIgaGVpZ2h0PSIzMy45Njg4IiByeD0iMTIuNSIgcnk9IjEyLjUiIHN0eWxlPSJzdHJva2U6IzE4MTgxODtzdHJva2Utd2lkdGg6MC41OyIgd2lkdGg9IjEyOC4wMDA4IiB4PSI0Mi40MTgzIiB5PSI0ODUuNTU4NiIvPjx0ZXh0IGZpbGw9IiMwMDAwMDAiIGZvbnQtZmFtaWx5PSJzYW5zLXNlcmlmIiBmb250LXNpemU9IjEyIiBsZW5ndGhBZGp1c3Q9InNwYWNpbmciIHRleHRMZW5ndGg9IjEwOC4wMDA4IiB4PSI1Mi40MTgzIiB5PSI1MDYuNjk3MyI+JiMxMjUxMzsmIzEyNDc3OyYjMTI0ODM7JiMxMjQ4OTsmIzI1Mjc3OyYjMjA5ODY7JiMxMjQzNDsmIzI2OTA4OyYjMzUzNDI7PC90ZXh0Pjxwb2x5Z29uIGZpbGw9IiNGMUYxRjEiIHBvaW50cz0iMzIsNDM0LjAwNzgsMTgwLjgzNzQsNDM0LjAwNzgsMTkyLjgzNzQsNDQ2LjAwNzgsMTgwLjgzNzQsNDU4LjAwNzgsMzIsNDU4LjAwNzgsMjAsNDQ2LjAwNzgsMzIsNDM0LjAwNzgiIHN0eWxlPSJzdHJva2U6IzE4MTgxODtzdHJva2Utd2lkdGg6MC41OyIvPjx0ZXh0IGZpbGw9IiMwMDAwMDAiIGZvbnQtZmFtaWx5PSJzYW5zLXNlcmlmIiBmb250LXNpemU9IjExIiBsZW5ndGhBZGp1c3Q9InNwYWNpbmciIHRleHRMZW5ndGg9IjE5LjAwODMiIHg9IjExMC40MTg3IiB5PSI0NjguMjE4MyI+eWVzPC90ZXh0Pjx0ZXh0IGZpbGw9IiMwMDAwMDAiIGZvbnQtZmFtaWx5PSJzYW5zLXNlcmlmIiBmb250LXNpemU9IjExIiBsZW5ndGhBZGp1c3Q9InNwYWNpbmciIHRleHRMZW5ndGg9IjE0OC44Mzc0IiB4PSIzMiIgeT0iNDQ5LjgxNTkiPiYjMTI0Njc7JiMxMjUxMzsmIzEyNTMxOyYjMTI0ODg7JiMxMjM2NDsmIzI0NTE3OyYjMzUyMDE7JiMxMjM5NDsmIzIwOTY2OyYjMjk3MDI7JiMxMjM2NDsmIzEyMzU0OyYjMTI0Mjc7PzwvdGV4dD48dGV4dCBmaWxsPSIjMDAwMDAwIiBmb250LWZhbWlseT0ic2Fucy1zZXJpZiIgZm9udC1zaXplPSIxMSIgbGVuZ3RoQWRqdXN0PSJzcGFjaW5nIiB0ZXh0TGVuZ3RoPSIxMy43MDE3IiB4PSIxOTIuODM3NCIgeT0iNDQzLjQxMzYiPm5vPC90ZXh0Pjxwb2x5Z29uIGZpbGw9IiNGMUYxRjEiIHBvaW50cz0iMTA2LjQxODcsNTQyLjY3NTgsMTE4LjQxODcsNTU0LjY3NTgsMTA2LjQxODcsNTY2LjY3NTgsOTQuNDE4Nyw1NTQuNjc1OCwxMDYuNDE4Nyw1NDIuNjc1OCIgc3R5bGU9InN0cm9rZTojMTgxODE4O3N0cm9rZS13aWR0aDowLjU7Ii8+PHJlY3QgZmlsbD0iI0YxRjFGMSIgaGVpZ2h0PSIzMy45Njg4IiByeD0iMTIuNSIgcnk9IjEyLjUiIHN0eWxlPSJzdHJva2U6IzE4MTgxODtzdHJva2Utd2lkdGg6MC41OyIgd2lkdGg9IjE0MC4wMDA5IiB4PSIzNi40MTgyIiB5PSI2MzUuMDc4MSIvPjx0ZXh0IGZpbGw9IiMwMDAwMDAiIGZvbnQtZmFtaWx5PSJzYW5zLXNlcmlmIiBmb250LXNpemU9IjEyIiBsZW5ndGhBZGp1c3Q9InNwYWNpbmciIHRleHRMZW5ndGg9IjEyMC4wMDA5IiB4PSI0Ni40MTgyIiB5PSI2NTYuMjE2OCI+JiMxMjUxMzsmIzEyNDc3OyYjMTI0ODM7JiMxMjQ4OTsmIzI1Mjc3OyYjMjA5ODY7JiMxMjM5MTsmIzIwODQ5OyYjMzY4OTA7JiMyMTI3MDs8L3RleHQ+PHBvbHlnb24gZmlsbD0iI0YxRjFGMSIgcG9pbnRzPSIzNy41LDU4Ni42NzU4LDE3NS4zMzc0LDU4Ni42NzU4LDE4Ny4zMzc0LDU5OC42NzU4LDE3NS4zMzc0LDYxMC42NzU4LDM3LjUsNjEwLjY3NTgsMjUuNSw1OTguNjc1OCwzNy41LDU4Ni42NzU4IiBzdHlsZT0ic3Ryb2tlOiMxODE4MTg7c3Ryb2tlLXdpZHRoOjAuNTsiLz48dGV4dCBmaWxsPSIjMDAwMDAwIiBmb250LWZhbWlseT0ic2Fucy1zZXJpZiIgZm9udC1zaXplPSIxMSIgbGVuZ3RoQWRqdXN0PSJzcGFjaW5nIiB0ZXh0TGVuZ3RoPSIxOS4wMDgzIiB4PSIxMTAuNDE4NyIgeT0iNjIwLjg4NjIiPnllczwvdGV4dD48dGV4dCBmaWxsPSIjMDAwMDAwIiBmb250LWZhbWlseT0ic2Fucy1zZXJpZiIgZm9udC1zaXplPSIxMSIgbGVuZ3RoQWRqdXN0PSJzcGFjaW5nIiB0ZXh0TGVuZ3RoPSIxMzcuODM3NSIgeD0iMzcuNSIgeT0iNjAyLjQ4MzkiPiYjMjE1MTY7JiMxMjM3NjsmIzIwOTY2OyYjMjk3MDI7JiMxMjM2NDsmIzM1MDc5OyYjMjU5Njg7JiMzMTYyMzsmIzI1MTUyOyYjMTIzOTU7JiMxMjM1NDsmIzEyNDI3Oz88L3RleHQ+PHRleHQgZmlsbD0iIzAwMDAwMCIgZm9udC1mYW1pbHk9InNhbnMtc2VyaWYiIGZvbnQtc2l6ZT0iMTEiIGxlbmd0aEFkanVzdD0ic3BhY2luZyIgdGV4dExlbmd0aD0iMTMuNzAxNyIgeD0iMTg3LjMzNzQiIHk9IjU5Ni4wODE1Ij5ubzwvdGV4dD48cG9seWdvbiBmaWxsPSIjRjFGMUYxIiBwb2ludHM9IjEwNi40MTg3LDY4OS4wNDY5LDExOC40MTg3LDcwMS4wNDY5LDEwNi40MTg3LDcxMy4wNDY5LDk0LjQxODcsNzAxLjA0NjksMTA2LjQxODcsNjg5LjA0NjkiIHN0eWxlPSJzdHJva2U6IzE4MTgxODtzdHJva2Utd2lkdGg6MC41OyIvPjxlbGxpcHNlIGN4PSIxMDYuNDE4NyIgY3k9Ijc0NC4wNDY5IiBmaWxsPSJub25lIiByeD0iMTEiIHJ5PSIxMSIgc3R5bGU9InN0cm9rZTojMjIyMjIyO3N0cm9rZS13aWR0aDoxOyIvPjxlbGxpcHNlIGN4PSIxMDYuNDE4NyIgY3k9Ijc0NC4wNDY5IiBmaWxsPSIjMjIyMjIyIiByeD0iNiIgcnk9IjYiIHN0eWxlPSJzdHJva2U6IzIyMjIyMjtzdHJva2Utd2lkdGg6MTsiLz48bGluZSBzdHlsZT0ic3Ryb2tlOiMxODE4MTg7c3Ryb2tlLXdpZHRoOjE7IiB4MT0iMTA2LjQxODciIHgyPSIxMDYuNDE4NyIgeTE9IjY3LjI5NjkiIHkyPSI4Ny4yOTY5Ii8+PHBvbHlnb24gZmlsbD0iIzE4MTgxOCIgcG9pbnRzPSIxMDIuNDE4Nyw3Ny4yOTY5LDEwNi40MTg3LDg3LjI5NjksMTEwLjQxODcsNzcuMjk2OSwxMDYuNDE4Nyw4MS4yOTY5IiBzdHlsZT0ic3Ryb2tlOiMxODE4MTg7c3Ryb2tlLXdpZHRoOjE7Ii8+PGxpbmUgc3R5bGU9InN0cm9rZTojMTgxODE4O3N0cm9rZS13aWR0aDoxOyIgeDE9IjEwNi40MTg3IiB4Mj0iMTA2LjQxODciIHkxPSIxNjUuMjY1NiIgeTI9IjE4OS42NjgiLz48cG9seWdvbiBmaWxsPSIjMTgxODE4IiBwb2ludHM9IjEwMi40MTg3LDE3OS42NjgsMTA2LjQxODcsMTg5LjY2OCwxMTAuNDE4NywxNzkuNjY4LDEwNi40MTg3LDE4My42NjgiIHN0eWxlPSJzdHJva2U6IzE4MTgxODtzdHJva2Utd2lkdGg6MTsiLz48bGluZSBzdHlsZT0ic3Ryb2tlOiMxODE4MTg7c3Ryb2tlLXdpZHRoOjE7IiB4MT0iMTgzLjMzNiIgeDI9IjE5NS4zMzYiIHkxPSIxNTMuMjY1NiIgeTI9IjE1My4yNjU2Ii8+PHBvbHlnb24gZmlsbD0iIzE4MTgxOCIgcG9pbnRzPSIxOTEuMzM2LDE5Ni42NTIzLDE5NS4zMzYsMjA2LjY1MjMsMTk5LjMzNiwxOTYuNjUyMywxOTUuMzM2LDIwMC42NTIzIiBzdHlsZT0ic3Ryb2tlOiMxODE4MTg7c3Ryb2tlLXdpZHRoOjE7Ii8+PGxpbmUgc3R5bGU9InN0cm9rZTojMTgxODE4O3N0cm9rZS13aWR0aDoxOyIgeDE9IjE5NS4zMzYiIHgyPSIxOTUuMzM2IiB5MT0iMTUzLjI2NTYiIHkyPSIyNTUuNjM2NyIvPjxsaW5lIHN0eWxlPSJzdHJva2U6IzE4MTgxODtzdHJva2Utd2lkdGg6MTsiIHgxPSIxOTUuMzM2IiB4Mj0iMTE4LjQxODciIHkxPSIyNTUuNjM2NyIgeTI9IjI1NS42MzY3Ii8+PHBvbHlnb24gZmlsbD0iIzE4MTgxOCIgcG9pbnRzPSIxMjguNDE4NywyNTEuNjM2NywxMTguNDE4NywyNTUuNjM2NywxMjguNDE4NywyNTkuNjM2NywxMjQuNDE4NywyNTUuNjM2NyIgc3R5bGU9InN0cm9rZTojMTgxODE4O3N0cm9rZS13aWR0aDoxOyIvPjxsaW5lIHN0eWxlPSJzdHJva2U6IzE4MTgxODtzdHJva2Utd2lkdGg6MTsiIHgxPSIxMDYuNDE4NyIgeDI9IjEwNi40MTg3IiB5MT0iMjIzLjYzNjciIHkyPSIyNDMuNjM2NyIvPjxwb2x5Z29uIGZpbGw9IiMxODE4MTgiIHBvaW50cz0iMTAyLjQxODcsMjMzLjYzNjcsMTA2LjQxODcsMjQzLjYzNjcsMTEwLjQxODcsMjMzLjYzNjcsMTA2LjQxODcsMjM3LjYzNjciIHN0eWxlPSJzdHJva2U6IzE4MTgxODtzdHJva2Utd2lkdGg6MTsiLz48bGluZSBzdHlsZT0ic3Ryb2tlOiMxODE4MTg7c3Ryb2tlLXdpZHRoOjE7IiB4MT0iMTA2LjQxODciIHgyPSIxMDYuNDE4NyIgeTE9IjEyMS4yNjU2IiB5Mj0iMTQxLjI2NTYiLz48cG9seWdvbiBmaWxsPSIjMTgxODE4IiBwb2ludHM9IjEwMi40MTg3LDEzMS4yNjU2LDEwNi40MTg3LDE0MS4yNjU2LDExMC40MTg3LDEzMS4yNjU2LDEwNi40MTg3LDEzNS4yNjU2IiBzdHlsZT0ic3Ryb2tlOiMxODE4MTg7c3Ryb2tlLXdpZHRoOjE7Ii8+PGxpbmUgc3R5bGU9InN0cm9rZTojMTgxODE4O3N0cm9rZS13aWR0aDoxOyIgeDE9IjEwNi40MTg3IiB4Mj0iMTA2LjQxODciIHkxPSIzMTEuNjM2NyIgeTI9IjMzNi4wMzkxIi8+PHBvbHlnb24gZmlsbD0iIzE4MTgxOCIgcG9pbnRzPSIxMDIuNDE4NywzMjYuMDM5MSwxMDYuNDE4NywzMzYuMDM5MSwxMTAuNDE4NywzMjYuMDM5MSwxMDYuNDE4NywzMzAuMDM5MSIgc3R5bGU9InN0cm9rZTojMTgxODE4O3N0cm9rZS13aWR0aDoxOyIvPjxsaW5lIHN0eWxlPSJzdHJva2U6IzE4MTgxODtzdHJva2Utd2lkdGg6MTsiIHgxPSIxNjMuMzM2OSIgeDI9IjE4MC40MTkxIiB5MT0iMjk5LjYzNjciIHkyPSIyOTkuNjM2NyIvPjxwb2x5Z29uIGZpbGw9IiMxODE4MTgiIHBvaW50cz0iMTc2LjQxOTEsMzQzLjAyMzQsMTgwLjQxOTEsMzUzLjAyMzQsMTg0LjQxOTEsMzQzLjAyMzQsMTgwLjQxOTEsMzQ3LjAyMzQiIHN0eWxlPSJzdHJva2U6IzE4MTgxODtzdHJva2Utd2lkdGg6MTsiLz48bGluZSBzdHlsZT0ic3Ryb2tlOiMxODE4MTg7c3Ryb2tlLXdpZHRoOjE7IiB4MT0iMTgwLjQxOTEiIHgyPSIxODAuNDE5MSIgeTE9IjI5OS42MzY3IiB5Mj0iNDAyLjAwNzgiLz48bGluZSBzdHlsZT0ic3Ryb2tlOiMxODE4MTg7c3Ryb2tlLXdpZHRoOjE7IiB4MT0iMTgwLjQxOTEiIHgyPSIxMTguNDE4NyIgeTE9IjQwMi4wMDc4IiB5Mj0iNDAyLjAwNzgiLz48cG9seWdvbiBmaWxsPSIjMTgxODE4IiBwb2ludHM9IjEyOC40MTg3LDM5OC4wMDc4LDExOC40MTg3LDQwMi4wMDc4LDEyOC40MTg3LDQwNi4wMDc4LDEyNC40MTg3LDQwMi4wMDc4IiBzdHlsZT0ic3Ryb2tlOiMxODE4MTg7c3Ryb2tlLXdpZHRoOjE7Ii8+PGxpbmUgc3R5bGU9InN0cm9rZTojMTgxODE4O3N0cm9rZS13aWR0aDoxOyIgeDE9IjEwNi40MTg3IiB4Mj0iMTA2LjQxODciIHkxPSIzNzAuMDA3OCIgeTI9IjM5MC4wMDc4Ii8+PHBvbHlnb24gZmlsbD0iIzE4MTgxOCIgcG9pbnRzPSIxMDIuNDE4NywzODAuMDA3OCwxMDYuNDE4NywzOTAuMDA3OCwxMTAuNDE4NywzODAuMDA3OCwxMDYuNDE4NywzODQuMDA3OCIgc3R5bGU9InN0cm9rZTojMTgxODE4O3N0cm9rZS13aWR0aDoxOyIvPjxsaW5lIHN0eWxlPSJzdHJva2U6IzE4MTgxODtzdHJva2Utd2lkdGg6MTsiIHgxPSIxMDYuNDE4NyIgeDI9IjEwNi40MTg3IiB5MT0iMjY3LjYzNjciIHkyPSIyODcuNjM2NyIvPjxwb2x5Z29uIGZpbGw9IiMxODE4MTgiIHBvaW50cz0iMTAyLjQxODcsMjc3LjYzNjcsMTA2LjQxODcsMjg3LjYzNjcsMTEwLjQxODcsMjc3LjYzNjcsMTA2LjQxODcsMjgxLjYzNjciIHN0eWxlPSJzdHJva2U6IzE4MTgxODtzdHJva2Utd2lkdGg6MTsiLz48bGluZSBzdHlsZT0ic3Ryb2tlOiMxODE4MTg7c3Ryb2tlLXdpZHRoOjE7IiB4MT0iMTA2LjQxODciIHgyPSIxMDYuNDE4NyIgeTE9IjQ1OC4wMDc4IiB5Mj0iNDg1LjU1ODYiLz48cG9seWdvbiBmaWxsPSIjMTgxODE4IiBwb2ludHM9IjEwMi40MTg3LDQ3NS41NTg2LDEwNi40MTg3LDQ4NS41NTg2LDExMC40MTg3LDQ3NS41NTg2LDEwNi40MTg3LDQ3OS41NTg2IiBzdHlsZT0ic3Ryb2tlOiMxODE4MTg7c3Ryb2tlLXdpZHRoOjE7Ii8+PGxpbmUgc3R5bGU9InN0cm9rZTojMTgxODE4O3N0cm9rZS13aWR0aDoxOyIgeDE9IjE5Mi44Mzc0IiB4Mj0iMzkwLjQxOTMiIHkxPSI0NDYuMDA3OCIgeTI9IjQ0Ni4wMDc4Ii8+PHBvbHlnb24gZmlsbD0iIzE4MTgxOCIgcG9pbnRzPSIzODYuNDE5Myw0OTIuNTQzLDM5MC40MTkzLDUwMi41NDMsMzk0LjQxOTMsNDkyLjU0MywzOTAuNDE5Myw0OTYuNTQzIiBzdHlsZT0ic3Ryb2tlOiMxODE4MTg7c3Ryb2tlLXdpZHRoOjE7Ii8+PGxpbmUgc3R5bGU9InN0cm9rZTojMTgxODE4O3N0cm9rZS13aWR0aDoxOyIgeDE9IjM5MC40MTkzIiB4Mj0iMzkwLjQxOTMiIHkxPSI0NDYuMDA3OCIgeTI9IjU1NC42NzU4Ii8+PGxpbmUgc3R5bGU9InN0cm9rZTojMTgxODE4O3N0cm9rZS13aWR0aDoxOyIgeDE9IjM5MC40MTkzIiB4Mj0iMTE4LjQxODciIHkxPSI1NTQuNjc1OCIgeTI9IjU1NC42NzU4Ii8+PHBvbHlnb24gZmlsbD0iIzE4MTgxOCIgcG9pbnRzPSIxMjguNDE4Nyw1NTAuNjc1OCwxMTguNDE4Nyw1NTQuNjc1OCwxMjguNDE4Nyw1NTguNjc1OCwxMjQuNDE4Nyw1NTQuNjc1OCIgc3R5bGU9InN0cm9rZTojMTgxODE4O3N0cm9rZS13aWR0aDoxOyIvPjxsaW5lIHN0eWxlPSJzdHJva2U6IzE4MTgxODtzdHJva2Utd2lkdGg6MTsiIHgxPSIxMDYuNDE4NyIgeDI9IjEwNi40MTg3IiB5MT0iNTE5LjUyNzMiIHkyPSI1NDIuNjc1OCIvPjxwb2x5Z29uIGZpbGw9IiMxODE4MTgiIHBvaW50cz0iMTAyLjQxODcsNTMyLjY3NTgsMTA2LjQxODcsNTQyLjY3NTgsMTEwLjQxODcsNTMyLjY3NTgsMTA2LjQxODcsNTM2LjY3NTgiIHN0eWxlPSJzdHJva2U6IzE4MTgxODtzdHJva2Utd2lkdGg6MTsiLz48bGluZSBzdHlsZT0ic3Ryb2tlOiMxODE4MTg7c3Ryb2tlLXdpZHRoOjE7IiB4MT0iMTA2LjQxODciIHgyPSIxMDYuNDE4NyIgeTE9IjQxNC4wMDc4IiB5Mj0iNDM0LjAwNzgiLz48cG9seWdvbiBmaWxsPSIjMTgxODE4IiBwb2ludHM9IjEwMi40MTg3LDQyNC4wMDc4LDEwNi40MTg3LDQzNC4wMDc4LDExMC40MTg3LDQyNC4wMDc4LDEwNi40MTg3LDQyOC4wMDc4IiBzdHlsZT0ic3Ryb2tlOiMxODE4MTg7c3Ryb2tlLXdpZHRoOjE7Ii8+PGxpbmUgc3R5bGU9InN0cm9rZTojMTgxODE4O3N0cm9rZS13aWR0aDoxOyIgeDE9IjEwNi40MTg3IiB4Mj0iMTA2LjQxODciIHkxPSI2MTAuNjc1OCIgeTI9IjYzNS4wNzgxIi8+PHBvbHlnb24gZmlsbD0iIzE4MTgxOCIgcG9pbnRzPSIxMDIuNDE4Nyw2MjUuMDc4MSwxMDYuNDE4Nyw2MzUuMDc4MSwxMTAuNDE4Nyw2MjUuMDc4MSwxMDYuNDE4Nyw2MjkuMDc4MSIgc3R5bGU9InN0cm9rZTojMTgxODE4O3N0cm9rZS13aWR0aDoxOyIvPjxsaW5lIHN0eWxlPSJzdHJva2U6IzE4MTgxODtzdHJva2Utd2lkdGg6MTsiIHgxPSIxODcuMzM3NCIgeDI9IjE5OS4zMzc0IiB5MT0iNTk4LjY3NTgiIHkyPSI1OTguNjc1OCIvPjxwb2x5Z29uIGZpbGw9IiMxODE4MTgiIHBvaW50cz0iMTk1LjMzNzQsNjQyLjA2MjUsMTk5LjMzNzQsNjUyLjA2MjUsMjAzLjMzNzQsNjQyLjA2MjUsMTk5LjMzNzQsNjQ2LjA2MjUiIHN0eWxlPSJzdHJva2U6IzE4MTgxODtzdHJva2Utd2lkdGg6MTsiLz48bGluZSBzdHlsZT0ic3Ryb2tlOiMxODE4MTg7c3Ryb2tlLXdpZHRoOjE7IiB4MT0iMTk5LjMzNzQiIHgyPSIxOTkuMzM3NCIgeTE9IjU5OC42NzU4IiB5Mj0iNzAxLjA0NjkiLz48bGluZSBzdHlsZT0ic3Ryb2tlOiMxODE4MTg7c3Ryb2tlLXdpZHRoOjE7IiB4MT0iMTk5LjMzNzQiIHgyPSIxMTguNDE4NyIgeTE9IjcwMS4wNDY5IiB5Mj0iNzAxLjA0NjkiLz48cG9seWdvbiBmaWxsPSIjMTgxODE4IiBwb2ludHM9IjEyOC40MTg3LDY5Ny4wNDY5LDExOC40MTg3LDcwMS4wNDY5LDEyOC40MTg3LDcwNS4wNDY5LDEyNC40MTg3LDcwMS4wNDY5IiBzdHlsZT0ic3Ryb2tlOiMxODE4MTg7c3Ryb2tlLXdpZHRoOjE7Ii8+PGxpbmUgc3R5bGU9InN0cm9rZTojMTgxODE4O3N0cm9rZS13aWR0aDoxOyIgeDE9IjEwNi40MTg3IiB4Mj0iMTA2LjQxODciIHkxPSI2NjkuMDQ2OSIgeTI9IjY4OS4wNDY5Ii8+PHBvbHlnb24gZmlsbD0iIzE4MTgxOCIgcG9pbnRzPSIxMDIuNDE4Nyw2NzkuMDQ2OSwxMDYuNDE4Nyw2ODkuMDQ2OSwxMTAuNDE4Nyw2NzkuMDQ2OSwxMDYuNDE4Nyw2ODMuMDQ2OSIgc3R5bGU9InN0cm9rZTojMTgxODE4O3N0cm9rZS13aWR0aDoxOyIvPjxsaW5lIHN0eWxlPSJzdHJva2U6IzE4MTgxODtzdHJva2Utd2lkdGg6MTsiIHgxPSIxMDYuNDE4NyIgeDI9IjEwNi40MTg3IiB5MT0iNTY2LjY3NTgiIHkyPSI1ODYuNjc1OCIvPjxwb2x5Z29uIGZpbGw9IiMxODE4MTgiIHBvaW50cz0iMTAyLjQxODcsNTc2LjY3NTgsMTA2LjQxODcsNTg2LjY3NTgsMTEwLjQxODcsNTc2LjY3NTgsMTA2LjQxODcsNTgwLjY3NTgiIHN0eWxlPSJzdHJva2U6IzE4MTgxODtzdHJva2Utd2lkdGg6MTsiLz48bGluZSBzdHlsZT0ic3Ryb2tlOiMxODE4MTg7c3Ryb2tlLXdpZHRoOjE7IiB4MT0iMTA2LjQxODciIHgyPSIxMDYuNDE4NyIgeTE9IjcxMy4wNDY5IiB5Mj0iNzMzLjA0NjkiLz48cG9seWdvbiBmaWxsPSIjMTgxODE4IiBwb2ludHM9IjEwMi40MTg3LDcyMy4wNDY5LDEwNi40MTg3LDczMy4wNDY5LDExMC40MTg3LDcyMy4wNDY5LDEwNi40MTg3LDcyNy4wNDY5IiBzdHlsZT0ic3Ryb2tlOiMxODE4MTg7c3Ryb2tlLXdpZHRoOjE7Ii8+PCEtLVNSQz1bZlA3MUppOTA0OFJsLW5IeFg5bEhjbm55NVhDTlFLQUFlTmxubmt3QUJHWEk2c3JLSjRvcjhpN09ROFg2WXVJN2NVd3NsOE5SNjByNjNYZ2xhcF9WX3lxQ0RNWUxPMTAxeTJhODBRQWJzYkRmbnkwWXdPSkFsdlVOaU9melgyb3dNUVRlN1ZXT245a0V3SzBNc2xGLWFPbTdtQnRxQWl2NnRIOTJIWGFONWQ3MEVnaWhNVDNIY1VvdjJTbTFWaDFIbkJIMko1cE85TFBIQ3Qtc1NxLTU1emRtaThIOHJJQXVPRFFBWTlYUkhsY3BlMGx5NU9JWndNaWdVYWVjRHliQi1fX09WQmEwbkZZM0I2VkRSQzIwWlFHeklEcnpGRzc2X3dYbHJZWjFUTUV4R2o1dFVmSENoZTd0V0JVMXRJNnJydkZ6U053Wk8wWmlSMTRmTlJzaGJxbmR3VjRtYnlLdlNoY19UQk5Yd1BVal9leXdVS1daTXhLUWtrSXR5a25NRFhfZFpORlB5UFZTb1FBcmROUzBdLS0+PC9nPjwvc3ZnPg==" class="uml" alt="uml diagram" title="" /></p>
<h3 id="_9">抽出例: 財務諸表生成<a class="headerlink" href="#_9" title="Permanent link">&para;</a></h3>
<p><strong>抽出前:</strong></p>
<div class="highlight"><pre><span></span><code><span class="kd">public</span><span class="w"> </span><span class="n">BalanceSheet</span><span class="w"> </span><span class="nf">generateBalanceSheet</span><span class="p">(</span><span class="kt">int</span><span class="w"> </span><span class="n">fiscalYear</span><span class="p">)</span><span class="w"> </span><span class="p">{</span>
<span class="w">    </span><span class="n">LocalDate</span><span class="w"> </span><span class="n">fiscalYearEnd</span><span class="w"> </span><span class="o">=</span><span class="w"> </span><span class="n">LocalDate</span><span class="p">.</span><span class="na">of</span><span class="p">(</span><span class="n">fiscalYear</span><span class="w"> </span><span class="o">+</span><span class="w"> </span><span class="mi">1</span><span class="p">,</span><span class="w"> </span><span class="mi">3</span><span class="p">,</span><span class="w"> </span><span class="mi">31</span><span class="p">);</span>

<span class="w">    </span><span class="c1">// 全勘定科目の残高を取得</span>
<span class="w">    </span><span class="n">List</span><span class="o">&lt;</span><span class="n">DailyBalance</span><span class="o">&gt;</span><span class="w"> </span><span class="n">balances</span><span class="w"> </span><span class="o">=</span><span class="w"> </span><span class="n">dailyBalanceRepository</span>
<span class="w">        </span><span class="p">.</span><span class="na">findByDate</span><span class="p">(</span><span class="n">fiscalYearEnd</span><span class="p">);</span>

<span class="w">    </span><span class="c1">// 資産の集計</span>
<span class="w">    </span><span class="n">BigDecimal</span><span class="w"> </span><span class="n">currentAssets</span><span class="w"> </span><span class="o">=</span><span class="w"> </span><span class="n">BigDecimal</span><span class="p">.</span><span class="na">ZERO</span><span class="p">;</span>
<span class="w">    </span><span class="n">BigDecimal</span><span class="w"> </span><span class="n">fixedAssets</span><span class="w"> </span><span class="o">=</span><span class="w"> </span><span class="n">BigDecimal</span><span class="p">.</span><span class="na">ZERO</span><span class="p">;</span>
<span class="w">    </span><span class="k">for</span><span class="w"> </span><span class="p">(</span><span class="n">DailyBalance</span><span class="w"> </span><span class="n">balance</span><span class="w"> </span><span class="p">:</span><span class="w"> </span><span class="n">balances</span><span class="p">)</span><span class="w"> </span><span class="p">{</span>
<span class="w">        </span><span class="n">String</span><span class="w"> </span><span class="n">code</span><span class="w"> </span><span class="o">=</span><span class="w"> </span><span class="n">balance</span><span class="p">.</span><span class="na">getAccountCode</span><span class="p">();</span>
<span class="w">        </span><span class="k">if</span><span class="w"> </span><span class="p">(</span><span class="n">code</span><span class="p">.</span><span class="na">startsWith</span><span class="p">(</span><span class="s">&quot;11&quot;</span><span class="p">))</span><span class="w"> </span><span class="p">{</span>
<span class="w">            </span><span class="n">currentAssets</span><span class="w"> </span><span class="o">=</span><span class="w"> </span><span class="n">currentAssets</span><span class="p">.</span><span class="na">add</span><span class="p">(</span><span class="n">balance</span><span class="p">.</span><span class="na">getBalance</span><span class="p">());</span>
<span class="w">        </span><span class="p">}</span><span class="w"> </span><span class="k">else</span><span class="w"> </span><span class="k">if</span><span class="w"> </span><span class="p">(</span><span class="n">code</span><span class="p">.</span><span class="na">startsWith</span><span class="p">(</span><span class="s">&quot;12&quot;</span><span class="p">)</span><span class="w"> </span><span class="o">||</span><span class="w"> </span><span class="n">code</span><span class="p">.</span><span class="na">startsWith</span><span class="p">(</span><span class="s">&quot;14&quot;</span><span class="p">)</span><span class="w"> </span><span class="o">||</span>
<span class="w">                   </span><span class="n">code</span><span class="p">.</span><span class="na">startsWith</span><span class="p">(</span><span class="s">&quot;15&quot;</span><span class="p">))</span><span class="w"> </span><span class="p">{</span>
<span class="w">            </span><span class="n">fixedAssets</span><span class="w"> </span><span class="o">=</span><span class="w"> </span><span class="n">fixedAssets</span><span class="p">.</span><span class="na">add</span><span class="p">(</span><span class="n">balance</span><span class="p">.</span><span class="na">getBalance</span><span class="p">());</span>
<span class="w">        </span><span class="p">}</span>
<span class="w">    </span><span class="p">}</span>
<span class="w">    </span><span class="n">BigDecimal</span><span class="w"> </span><span class="n">totalAssets</span><span class="w"> </span><span class="o">=</span><span class="w"> </span><span class="n">currentAssets</span><span class="p">.</span><span class="na">add</span><span class="p">(</span><span class="n">fixedAssets</span><span class="p">);</span>

<span class="w">    </span><span class="c1">// 負債の集計</span>
<span class="w">    </span><span class="n">BigDecimal</span><span class="w"> </span><span class="n">currentLiabilities</span><span class="w"> </span><span class="o">=</span><span class="w"> </span><span class="n">BigDecimal</span><span class="p">.</span><span class="na">ZERO</span><span class="p">;</span>
<span class="w">    </span><span class="n">BigDecimal</span><span class="w"> </span><span class="n">fixedLiabilities</span><span class="w"> </span><span class="o">=</span><span class="w"> </span><span class="n">BigDecimal</span><span class="p">.</span><span class="na">ZERO</span><span class="p">;</span>
<span class="w">    </span><span class="k">for</span><span class="w"> </span><span class="p">(</span><span class="n">DailyBalance</span><span class="w"> </span><span class="n">balance</span><span class="w"> </span><span class="p">:</span><span class="w"> </span><span class="n">balances</span><span class="p">)</span><span class="w"> </span><span class="p">{</span>
<span class="w">        </span><span class="n">String</span><span class="w"> </span><span class="n">code</span><span class="w"> </span><span class="o">=</span><span class="w"> </span><span class="n">balance</span><span class="p">.</span><span class="na">getAccountCode</span><span class="p">();</span>
<span class="w">        </span><span class="k">if</span><span class="w"> </span><span class="p">(</span><span class="n">code</span><span class="p">.</span><span class="na">startsWith</span><span class="p">(</span><span class="s">&quot;21&quot;</span><span class="p">))</span><span class="w"> </span><span class="p">{</span>
<span class="w">            </span><span class="n">currentLiabilities</span><span class="w"> </span><span class="o">=</span><span class="w"> </span><span class="n">currentLiabilities</span><span class="p">.</span><span class="na">add</span><span class="p">(</span><span class="n">balance</span><span class="p">.</span><span class="na">getBalance</span><span class="p">());</span>
<span class="w">        </span><span class="p">}</span><span class="w"> </span><span class="k">else</span><span class="w"> </span><span class="k">if</span><span class="w"> </span><span class="p">(</span><span class="n">code</span><span class="p">.</span><span class="na">startsWith</span><span class="p">(</span><span class="s">&quot;25&quot;</span><span class="p">))</span><span class="w"> </span><span class="p">{</span>
<span class="w">            </span><span class="n">fixedLiabilities</span><span class="w"> </span><span class="o">=</span><span class="w"> </span><span class="n">fixedLiabilities</span><span class="p">.</span><span class="na">add</span><span class="p">(</span><span class="n">balance</span><span class="p">.</span><span class="na">getBalance</span><span class="p">());</span>
<span class="w">        </span><span class="p">}</span>
<span class="w">    </span><span class="p">}</span>
<span class="w">    </span><span class="n">BigDecimal</span><span class="w"> </span><span class="n">totalLiabilities</span><span class="w"> </span><span class="o">=</span><span class="w"> </span><span class="n">currentLiabilities</span><span class="p">.</span><span class="na">add</span><span class="p">(</span><span class="n">fixedLiabilities</span><span class="p">);</span>

<span class="w">    </span><span class="c1">// 純資産の集計</span>
<span class="w">    </span><span class="n">BigDecimal</span><span class="w"> </span><span class="n">equity</span><span class="w"> </span><span class="o">=</span><span class="w"> </span><span class="n">BigDecimal</span><span class="p">.</span><span class="na">ZERO</span><span class="p">;</span>
<span class="w">    </span><span class="k">for</span><span class="w"> </span><span class="p">(</span><span class="n">DailyBalance</span><span class="w"> </span><span class="n">balance</span><span class="w"> </span><span class="p">:</span><span class="w"> </span><span class="n">balances</span><span class="p">)</span><span class="w"> </span><span class="p">{</span>
<span class="w">        </span><span class="n">String</span><span class="w"> </span><span class="n">code</span><span class="w"> </span><span class="o">=</span><span class="w"> </span><span class="n">balance</span><span class="p">.</span><span class="na">getAccountCode</span><span class="p">();</span>
<span class="w">        </span><span class="k">if</span><span class="w"> </span><span class="p">(</span><span class="n">code</span><span class="p">.</span><span class="na">startsWith</span><span class="p">(</span><span class="s">&quot;31&quot;</span><span class="p">)</span><span class="w"> </span><span class="o">||</span><span class="w"> </span><span class="n">code</span><span class="p">.</span><span class="na">startsWith</span><span class="p">(</span><span class="s">&quot;33&quot;</span><span class="p">))</span><span class="w"> </span><span class="p">{</span>
<span class="w">            </span><span class="n">equity</span><span class="w"> </span><span class="o">=</span><span class="w"> </span><span class="n">equity</span><span class="p">.</span><span class="na">add</span><span class="p">(</span><span class="n">balance</span><span class="p">.</span><span class="na">getBalance</span><span class="p">());</span>
<span class="w">        </span><span class="p">}</span>
<span class="w">    </span><span class="p">}</span>

<span class="w">    </span><span class="c1">// 長い処理が続く...</span>
<span class="w">    </span><span class="k">return</span><span class="w"> </span><span class="k">new</span><span class="w"> </span><span class="n">BalanceSheet</span><span class="p">(...);</span>
<span class="p">}</span>
</code></pre></div>
<p><strong>抽出後:</strong></p>
<div class="highlight"><pre><span></span><code><span class="kd">public</span><span class="w"> </span><span class="n">BalanceSheet</span><span class="w"> </span><span class="nf">generateBalanceSheet</span><span class="p">(</span><span class="kt">int</span><span class="w"> </span><span class="n">fiscalYear</span><span class="p">)</span><span class="w"> </span><span class="p">{</span>
<span class="w">    </span><span class="n">LocalDate</span><span class="w"> </span><span class="n">fiscalYearEnd</span><span class="w"> </span><span class="o">=</span><span class="w"> </span><span class="n">calculateFiscalYearEnd</span><span class="p">(</span><span class="n">fiscalYear</span><span class="p">);</span>
<span class="w">    </span><span class="n">List</span><span class="o">&lt;</span><span class="n">DailyBalance</span><span class="o">&gt;</span><span class="w"> </span><span class="n">balances</span><span class="w"> </span><span class="o">=</span><span class="w"> </span><span class="n">dailyBalanceRepository</span><span class="p">.</span><span class="na">findByDate</span><span class="p">(</span><span class="n">fiscalYearEnd</span><span class="p">);</span>

<span class="w">    </span><span class="n">Assets</span><span class="w"> </span><span class="n">assets</span><span class="w"> </span><span class="o">=</span><span class="w"> </span><span class="n">aggregateAssets</span><span class="p">(</span><span class="n">balances</span><span class="p">);</span>
<span class="w">    </span><span class="n">Liabilities</span><span class="w"> </span><span class="n">liabilities</span><span class="w"> </span><span class="o">=</span><span class="w"> </span><span class="n">aggregateLiabilities</span><span class="p">(</span><span class="n">balances</span><span class="p">);</span>
<span class="w">    </span><span class="n">Equity</span><span class="w"> </span><span class="n">equity</span><span class="w"> </span><span class="o">=</span><span class="w"> </span><span class="n">aggregateEquity</span><span class="p">(</span><span class="n">balances</span><span class="p">);</span>

<span class="w">    </span><span class="n">validateBalanceEquation</span><span class="p">(</span><span class="n">assets</span><span class="p">,</span><span class="w"> </span><span class="n">liabilities</span><span class="p">,</span><span class="w"> </span><span class="n">equity</span><span class="p">);</span>

<span class="w">    </span><span class="k">return</span><span class="w"> </span><span class="n">BalanceSheet</span><span class="p">.</span><span class="na">of</span><span class="p">(</span><span class="n">fiscalYear</span><span class="p">,</span><span class="w"> </span><span class="n">assets</span><span class="p">,</span><span class="w"> </span><span class="n">liabilities</span><span class="p">,</span><span class="w"> </span><span class="n">equity</span><span class="p">);</span>
<span class="p">}</span>

<span class="kd">private</span><span class="w"> </span><span class="n">LocalDate</span><span class="w"> </span><span class="nf">calculateFiscalYearEnd</span><span class="p">(</span><span class="kt">int</span><span class="w"> </span><span class="n">fiscalYear</span><span class="p">)</span><span class="w"> </span><span class="p">{</span>
<span class="w">    </span><span class="k">return</span><span class="w"> </span><span class="n">LocalDate</span><span class="p">.</span><span class="na">of</span><span class="p">(</span><span class="n">fiscalYear</span><span class="w"> </span><span class="o">+</span><span class="w"> </span><span class="mi">1</span><span class="p">,</span><span class="w"> </span><span class="mi">3</span><span class="p">,</span><span class="w"> </span><span class="mi">31</span><span class="p">);</span>
<span class="p">}</span>

<span class="kd">private</span><span class="w"> </span><span class="n">Assets</span><span class="w"> </span><span class="nf">aggregateAssets</span><span class="p">(</span><span class="n">List</span><span class="o">&lt;</span><span class="n">DailyBalance</span><span class="o">&gt;</span><span class="w"> </span><span class="n">balances</span><span class="p">)</span><span class="w"> </span><span class="p">{</span>
<span class="w">    </span><span class="n">BigDecimal</span><span class="w"> </span><span class="n">currentAssets</span><span class="w"> </span><span class="o">=</span><span class="w"> </span><span class="n">sumByCodePrefix</span><span class="p">(</span><span class="n">balances</span><span class="p">,</span><span class="w"> </span><span class="s">&quot;11&quot;</span><span class="p">);</span>
<span class="w">    </span><span class="n">BigDecimal</span><span class="w"> </span><span class="n">fixedAssets</span><span class="w"> </span><span class="o">=</span><span class="w"> </span><span class="n">sumByCodePrefixes</span><span class="p">(</span><span class="n">balances</span><span class="p">,</span><span class="w"> </span><span class="s">&quot;12&quot;</span><span class="p">,</span><span class="w"> </span><span class="s">&quot;14&quot;</span><span class="p">,</span><span class="w"> </span><span class="s">&quot;15&quot;</span><span class="p">);</span>
<span class="w">    </span><span class="k">return</span><span class="w"> </span><span class="k">new</span><span class="w"> </span><span class="n">Assets</span><span class="p">(</span><span class="n">currentAssets</span><span class="p">,</span><span class="w"> </span><span class="n">fixedAssets</span><span class="p">);</span>
<span class="p">}</span>

<span class="kd">private</span><span class="w"> </span><span class="n">Liabilities</span><span class="w"> </span><span class="nf">aggregateLiabilities</span><span class="p">(</span><span class="n">List</span><span class="o">&lt;</span><span class="n">DailyBalance</span><span class="o">&gt;</span><span class="w"> </span><span class="n">balances</span><span class="p">)</span><span class="w"> </span><span class="p">{</span>
<span class="w">    </span><span class="n">BigDecimal</span><span class="w"> </span><span class="n">currentLiabilities</span><span class="w"> </span><span class="o">=</span><span class="w"> </span><span class="n">sumByCodePrefix</span><span class="p">(</span><span class="n">balances</span><span class="p">,</span><span class="w"> </span><span class="s">&quot;21&quot;</span><span class="p">);</span>
<span class="w">    </span><span class="n">BigDecimal</span><span class="w"> </span><span class="n">fixedLiabilities</span><span class="w"> </span><span class="o">=</span><span class="w"> </span><span class="n">sumByCodePrefix</span><span class="p">(</span><span class="n">balances</span><span class="p">,</span><span class="w"> </span><span class="s">&quot;25&quot;</span><span class="p">);</span>
<span class="w">    </span><span class="k">return</span><span class="w"> </span><span class="k">new</span><span class="w"> </span><span class="n">Liabilities</span><span class="p">(</span><span class="n">currentLiabilities</span><span class="p">,</span><span class="w"> </span><span class="n">fixedLiabilities</span><span class="p">);</span>
<span class="p">}</span>

<span class="kd">private</span><span class="w"> </span><span class="n">Equity</span><span class="w"> </span><span class="nf">aggregateEquity</span><span class="p">(</span><span class="n">List</span><span class="o">&lt;</span><span class="n">DailyBalance</span><span class="o">&gt;</span><span class="w"> </span><span class="n">balances</span><span class="p">)</span><span class="w"> </span><span class="p">{</span>
<span class="w">    </span><span class="n">BigDecimal</span><span class="w"> </span><span class="n">equity</span><span class="w"> </span><span class="o">=</span><span class="w"> </span><span class="n">sumByCodePrefixes</span><span class="p">(</span><span class="n">balances</span><span class="p">,</span><span class="w"> </span><span class="s">&quot;31&quot;</span><span class="p">,</span><span class="w"> </span><span class="s">&quot;33&quot;</span><span class="p">);</span>
<span class="w">    </span><span class="k">return</span><span class="w"> </span><span class="k">new</span><span class="w"> </span><span class="n">Equity</span><span class="p">(</span><span class="n">equity</span><span class="p">);</span>
<span class="p">}</span>

<span class="kd">private</span><span class="w"> </span><span class="n">BigDecimal</span><span class="w"> </span><span class="nf">sumByCodePrefix</span><span class="p">(</span><span class="n">List</span><span class="o">&lt;</span><span class="n">DailyBalance</span><span class="o">&gt;</span><span class="w"> </span><span class="n">balances</span><span class="p">,</span><span class="w"> </span><span class="n">String</span><span class="w"> </span><span class="n">prefix</span><span class="p">)</span><span class="w"> </span><span class="p">{</span>
<span class="w">    </span><span class="k">return</span><span class="w"> </span><span class="n">balances</span><span class="p">.</span><span class="na">stream</span><span class="p">()</span>
<span class="w">        </span><span class="p">.</span><span class="na">filter</span><span class="p">(</span><span class="n">b</span><span class="w"> </span><span class="o">-&gt;</span><span class="w"> </span><span class="n">b</span><span class="p">.</span><span class="na">getAccountCode</span><span class="p">().</span><span class="na">startsWith</span><span class="p">(</span><span class="n">prefix</span><span class="p">))</span>
<span class="w">        </span><span class="p">.</span><span class="na">map</span><span class="p">(</span><span class="n">DailyBalance</span><span class="p">::</span><span class="n">getBalance</span><span class="p">)</span>
<span class="w">        </span><span class="p">.</span><span class="na">reduce</span><span class="p">(</span><span class="n">BigDecimal</span><span class="p">.</span><span class="na">ZERO</span><span class="p">,</span><span class="w"> </span><span class="n">BigDecimal</span><span class="p">::</span><span class="n">add</span><span class="p">);</span>
<span class="p">}</span>

<span class="kd">private</span><span class="w"> </span><span class="n">BigDecimal</span><span class="w"> </span><span class="nf">sumByCodePrefixes</span><span class="p">(</span>
<span class="w">        </span><span class="n">List</span><span class="o">&lt;</span><span class="n">DailyBalance</span><span class="o">&gt;</span><span class="w"> </span><span class="n">balances</span><span class="p">,</span><span class="w"> </span><span class="n">String</span><span class="p">...</span><span class="w"> </span><span class="n">prefixes</span><span class="p">)</span><span class="w"> </span><span class="p">{</span>
<span class="w">    </span><span class="k">return</span><span class="w"> </span><span class="n">balances</span><span class="p">.</span><span class="na">stream</span><span class="p">()</span>
<span class="w">        </span><span class="p">.</span><span class="na">filter</span><span class="p">(</span><span class="n">b</span><span class="w"> </span><span class="o">-&gt;</span><span class="w"> </span><span class="n">startsWithAny</span><span class="p">(</span><span class="n">b</span><span class="p">.</span><span class="na">getAccountCode</span><span class="p">(),</span><span class="w"> </span><span class="n">prefixes</span><span class="p">))</span>
<span class="w">        </span><span class="p">.</span><span class="na">map</span><span class="p">(</span><span class="n">DailyBalance</span><span class="p">::</span><span class="n">getBalance</span><span class="p">)</span>
<span class="w">        </span><span class="p">.</span><span class="na">reduce</span><span class="p">(</span><span class="n">BigDecimal</span><span class="p">.</span><span class="na">ZERO</span><span class="p">,</span><span class="w"> </span><span class="n">BigDecimal</span><span class="p">::</span><span class="n">add</span><span class="p">);</span>
<span class="p">}</span>

<span class="kd">private</span><span class="w"> </span><span class="kt">boolean</span><span class="w"> </span><span class="nf">startsWithAny</span><span class="p">(</span><span class="n">String</span><span class="w"> </span><span class="n">value</span><span class="p">,</span><span class="w"> </span><span class="n">String</span><span class="p">...</span><span class="w"> </span><span class="n">prefixes</span><span class="p">)</span><span class="w"> </span><span class="p">{</span>
<span class="w">    </span><span class="k">return</span><span class="w"> </span><span class="n">Arrays</span><span class="p">.</span><span class="na">stream</span><span class="p">(</span><span class="n">prefixes</span><span class="p">).</span><span class="na">anyMatch</span><span class="p">(</span><span class="n">value</span><span class="p">::</span><span class="n">startsWith</span><span class="p">);</span>
<span class="p">}</span>

<span class="kd">private</span><span class="w"> </span><span class="kt">void</span><span class="w"> </span><span class="nf">validateBalanceEquation</span><span class="p">(</span>
<span class="w">        </span><span class="n">Assets</span><span class="w"> </span><span class="n">assets</span><span class="p">,</span><span class="w"> </span><span class="n">Liabilities</span><span class="w"> </span><span class="n">liabilities</span><span class="p">,</span><span class="w"> </span><span class="n">Equity</span><span class="w"> </span><span class="n">equity</span><span class="p">)</span><span class="w"> </span><span class="p">{</span>
<span class="w">    </span><span class="n">BigDecimal</span><span class="w"> </span><span class="n">totalAssets</span><span class="w"> </span><span class="o">=</span><span class="w"> </span><span class="n">assets</span><span class="p">.</span><span class="na">getTotal</span><span class="p">();</span>
<span class="w">    </span><span class="n">BigDecimal</span><span class="w"> </span><span class="n">totalLiabilitiesAndEquity</span><span class="w"> </span><span class="o">=</span>
<span class="w">        </span><span class="n">liabilities</span><span class="p">.</span><span class="na">getTotal</span><span class="p">().</span><span class="na">add</span><span class="p">(</span><span class="n">equity</span><span class="p">.</span><span class="na">getTotal</span><span class="p">());</span>

<span class="w">    </span><span class="k">if</span><span class="w"> </span><span class="p">(</span><span class="o">!</span><span class="n">totalAssets</span><span class="p">.</span><span class="na">equals</span><span class="p">(</span><span class="n">totalLiabilitiesAndEquity</span><span class="p">))</span><span class="w"> </span><span class="p">{</span>
<span class="w">        </span><span class="k">throw</span><span class="w"> </span><span class="k">new</span><span class="w"> </span><span class="n">IllegalStateException</span><span class="p">(</span>
<span class="w">            </span><span class="s">&quot;貸借対照表が均衡していません: &quot;</span><span class="w"> </span><span class="o">+</span>
<span class="w">            </span><span class="s">&quot;資産=&quot;</span><span class="w"> </span><span class="o">+</span><span class="w"> </span><span class="n">totalAssets</span><span class="w"> </span><span class="o">+</span>
<span class="w">            </span><span class="s">&quot;, 負債+純資産=&quot;</span><span class="w"> </span><span class="o">+</span><span class="w"> </span><span class="n">totalLiabilitiesAndEquity</span>
<span class="w">        </span><span class="p">);</span>
<span class="w">    </span><span class="p">}</span>
<span class="p">}</span>
</code></pre></div>
<h3 id="_10">抽出例: 仕訳検証<a class="headerlink" href="#_10" title="Permanent link">&para;</a></h3>
<p><strong>抽出前:</strong></p>
<div class="highlight"><pre><span></span><code><span class="kd">public</span><span class="w"> </span><span class="kt">void</span><span class="w"> </span><span class="nf">validateJournalEntry</span><span class="p">(</span><span class="n">JournalEntry</span><span class="w"> </span><span class="n">entry</span><span class="p">)</span><span class="w"> </span><span class="p">{</span>
<span class="w">    </span><span class="c1">// 仕訳日のチェック</span>
<span class="w">    </span><span class="k">if</span><span class="w"> </span><span class="p">(</span><span class="n">entry</span><span class="p">.</span><span class="na">getJournalDate</span><span class="p">()</span><span class="w"> </span><span class="o">==</span><span class="w"> </span><span class="kc">null</span><span class="p">)</span><span class="w"> </span><span class="p">{</span>
<span class="w">        </span><span class="k">throw</span><span class="w"> </span><span class="k">new</span><span class="w"> </span><span class="n">ValidationException</span><span class="p">(</span><span class="s">&quot;仕訳日は必須です&quot;</span><span class="p">);</span>
<span class="w">    </span><span class="p">}</span>
<span class="w">    </span><span class="k">if</span><span class="w"> </span><span class="p">(</span><span class="n">entry</span><span class="p">.</span><span class="na">getJournalDate</span><span class="p">().</span><span class="na">isAfter</span><span class="p">(</span><span class="n">LocalDate</span><span class="p">.</span><span class="na">now</span><span class="p">()))</span><span class="w"> </span><span class="p">{</span>
<span class="w">        </span><span class="k">throw</span><span class="w"> </span><span class="k">new</span><span class="w"> </span><span class="n">ValidationException</span><span class="p">(</span><span class="s">&quot;未来日の仕訳は登録できません&quot;</span><span class="p">);</span>
<span class="w">    </span><span class="p">}</span>

<span class="w">    </span><span class="c1">// 明細のチェック</span>
<span class="w">    </span><span class="k">if</span><span class="w"> </span><span class="p">(</span><span class="n">entry</span><span class="p">.</span><span class="na">getLines</span><span class="p">()</span><span class="w"> </span><span class="o">==</span><span class="w"> </span><span class="kc">null</span><span class="w"> </span><span class="o">||</span><span class="w"> </span><span class="n">entry</span><span class="p">.</span><span class="na">getLines</span><span class="p">().</span><span class="na">isEmpty</span><span class="p">())</span><span class="w"> </span><span class="p">{</span>
<span class="w">        </span><span class="k">throw</span><span class="w"> </span><span class="k">new</span><span class="w"> </span><span class="n">ValidationException</span><span class="p">(</span><span class="s">&quot;仕訳明細は必須です&quot;</span><span class="p">);</span>
<span class="w">    </span><span class="p">}</span>

<span class="w">    </span><span class="c1">// 貸借バランスのチェック</span>
<span class="w">    </span><span class="n">BigDecimal</span><span class="w"> </span><span class="n">totalDebit</span><span class="w"> </span><span class="o">=</span><span class="w"> </span><span class="n">BigDecimal</span><span class="p">.</span><span class="na">ZERO</span><span class="p">;</span>
<span class="w">    </span><span class="n">BigDecimal</span><span class="w"> </span><span class="n">totalCredit</span><span class="w"> </span><span class="o">=</span><span class="w"> </span><span class="n">BigDecimal</span><span class="p">.</span><span class="na">ZERO</span><span class="p">;</span>
<span class="w">    </span><span class="k">for</span><span class="w"> </span><span class="p">(</span><span class="n">JournalLine</span><span class="w"> </span><span class="n">line</span><span class="w"> </span><span class="p">:</span><span class="w"> </span><span class="n">entry</span><span class="p">.</span><span class="na">getLines</span><span class="p">())</span><span class="w"> </span><span class="p">{</span>
<span class="w">        </span><span class="k">if</span><span class="w"> </span><span class="p">(</span><span class="n">line</span><span class="p">.</span><span class="na">getDebitAmount</span><span class="p">()</span><span class="w"> </span><span class="o">!=</span><span class="w"> </span><span class="kc">null</span><span class="p">)</span><span class="w"> </span><span class="p">{</span>
<span class="w">            </span><span class="n">totalDebit</span><span class="w"> </span><span class="o">=</span><span class="w"> </span><span class="n">totalDebit</span><span class="p">.</span><span class="na">add</span><span class="p">(</span><span class="n">line</span><span class="p">.</span><span class="na">getDebitAmount</span><span class="p">());</span>
<span class="w">        </span><span class="p">}</span>
<span class="w">        </span><span class="k">if</span><span class="w"> </span><span class="p">(</span><span class="n">line</span><span class="p">.</span><span class="na">getCreditAmount</span><span class="p">()</span><span class="w"> </span><span class="o">!=</span><span class="w"> </span><span class="kc">null</span><span class="p">)</span><span class="w"> </span><span class="p">{</span>
<span class="w">            </span><span class="n">totalCredit</span><span class="w"> </span><span class="o">=</span><span class="w"> </span><span class="n">totalCredit</span><span class="p">.</span><span class="na">add</span><span class="p">(</span><span class="n">line</span><span class="p">.</span><span class="na">getCreditAmount</span><span class="p">());</span>
<span class="w">        </span><span class="p">}</span>
<span class="w">    </span><span class="p">}</span>
<span class="w">    </span><span class="k">if</span><span class="w"> </span><span class="p">(</span><span class="n">totalDebit</span><span class="p">.</span><span class="na">compareTo</span><span class="p">(</span><span class="n">totalCredit</span><span class="p">)</span><span class="w"> </span><span class="o">!=</span><span class="w"> </span><span class="mi">0</span><span class="p">)</span><span class="w"> </span><span class="p">{</span>
<span class="w">        </span><span class="k">throw</span><span class="w"> </span><span class="k">new</span><span class="w"> </span><span class="n">ValidationException</span><span class="p">(</span><span class="s">&quot;借方と貸方が一致しません&quot;</span><span class="p">);</span>
<span class="w">    </span><span class="p">}</span>

<span class="w">    </span><span class="c1">// 勘定科目の存在チェック</span>
<span class="w">    </span><span class="k">for</span><span class="w"> </span><span class="p">(</span><span class="n">JournalLine</span><span class="w"> </span><span class="n">line</span><span class="w"> </span><span class="p">:</span><span class="w"> </span><span class="n">entry</span><span class="p">.</span><span class="na">getLines</span><span class="p">())</span><span class="w"> </span><span class="p">{</span>
<span class="w">        </span><span class="k">if</span><span class="w"> </span><span class="p">(</span><span class="o">!</span><span class="n">accountRepository</span><span class="p">.</span><span class="na">existsByCode</span><span class="p">(</span><span class="n">line</span><span class="p">.</span><span class="na">getAccountCode</span><span class="p">()))</span><span class="w"> </span><span class="p">{</span>
<span class="w">            </span><span class="k">throw</span><span class="w"> </span><span class="k">new</span><span class="w"> </span><span class="n">ValidationException</span><span class="p">(</span>
<span class="w">                </span><span class="s">&quot;勘定科目が存在しません: &quot;</span><span class="w"> </span><span class="o">+</span><span class="w"> </span><span class="n">line</span><span class="p">.</span><span class="na">getAccountCode</span><span class="p">()</span>
<span class="w">            </span><span class="p">);</span>
<span class="w">        </span><span class="p">}</span>
<span class="w">    </span><span class="p">}</span>
<span class="p">}</span>
</code></pre></div>
<p><strong>抽出後:</strong></p>
<div class="highlight"><pre><span></span><code><span class="kd">public</span><span class="w"> </span><span class="kt">void</span><span class="w"> </span><span class="nf">validateJournalEntry</span><span class="p">(</span><span class="n">JournalEntry</span><span class="w"> </span><span class="n">entry</span><span class="p">)</span><span class="w"> </span><span class="p">{</span>
<span class="w">    </span><span class="n">validateJournalDate</span><span class="p">(</span><span class="n">entry</span><span class="p">.</span><span class="na">getJournalDate</span><span class="p">());</span>
<span class="w">    </span><span class="n">validateJournalLines</span><span class="p">(</span><span class="n">entry</span><span class="p">.</span><span class="na">getLines</span><span class="p">());</span>
<span class="w">    </span><span class="n">validateBalance</span><span class="p">(</span><span class="n">entry</span><span class="p">.</span><span class="na">getLines</span><span class="p">());</span>
<span class="w">    </span><span class="n">validateAccountCodes</span><span class="p">(</span><span class="n">entry</span><span class="p">.</span><span class="na">getLines</span><span class="p">());</span>
<span class="p">}</span>

<span class="kd">private</span><span class="w"> </span><span class="kt">void</span><span class="w"> </span><span class="nf">validateJournalDate</span><span class="p">(</span><span class="n">LocalDate</span><span class="w"> </span><span class="n">journalDate</span><span class="p">)</span><span class="w"> </span><span class="p">{</span>
<span class="w">    </span><span class="k">if</span><span class="w"> </span><span class="p">(</span><span class="n">journalDate</span><span class="w"> </span><span class="o">==</span><span class="w"> </span><span class="kc">null</span><span class="p">)</span><span class="w"> </span><span class="p">{</span>
<span class="w">        </span><span class="k">throw</span><span class="w"> </span><span class="k">new</span><span class="w"> </span><span class="n">ValidationException</span><span class="p">(</span><span class="s">&quot;仕訳日は必須です&quot;</span><span class="p">);</span>
<span class="w">    </span><span class="p">}</span>
<span class="w">    </span><span class="k">if</span><span class="w"> </span><span class="p">(</span><span class="n">journalDate</span><span class="p">.</span><span class="na">isAfter</span><span class="p">(</span><span class="n">LocalDate</span><span class="p">.</span><span class="na">now</span><span class="p">()))</span><span class="w"> </span><span class="p">{</span>
<span class="w">        </span><span class="k">throw</span><span class="w"> </span><span class="k">new</span><span class="w"> </span><span class="n">ValidationException</span><span class="p">(</span><span class="s">&quot;未来日の仕訳は登録できません&quot;</span><span class="p">);</span>
<span class="w">    </span><span class="p">}</span>
<span class="p">}</span>

<span class="kd">private</span><span class="w"> </span><span class="kt">void</span><span class="w"> </span><span class="nf">validateJournalLines</span><span class="p">(</span><span class="n">List</span><span class="o">&lt;</span><span class="n">JournalLine</span><span class="o">&gt;</span><span class="w"> </span><span class="n">lines</span><span class="p">)</span><span class="w"> </span><span class="p">{</span>
<span class="w">    </span><span class="k">if</span><span class="w"> </span><span class="p">(</span><span class="n">lines</span><span class="w"> </span><span class="o">==</span><span class="w"> </span><span class="kc">null</span><span class="w"> </span><span class="o">||</span><span class="w"> </span><span class="n">lines</span><span class="p">.</span><span class="na">isEmpty</span><span class="p">())</span><span class="w"> </span><span class="p">{</span>
<span class="w">        </span><span class="k">throw</span><span class="w"> </span><span class="k">new</span><span class="w"> </span><span class="n">ValidationException</span><span class="p">(</span><span class="s">&quot;仕訳明細は必須です&quot;</span><span class="p">);</span>
<span class="w">    </span><span class="p">}</span>
<span class="p">}</span>

<span class="kd">private</span><span class="w"> </span><span class="kt">void</span><span class="w"> </span><span class="nf">validateBalance</span><span class="p">(</span><span class="n">List</span><span class="o">&lt;</span><span class="n">JournalLine</span><span class="o">&gt;</span><span class="w"> </span><span class="n">lines</span><span class="p">)</span><span class="w"> </span><span class="p">{</span>
<span class="w">    </span><span class="n">Money</span><span class="w"> </span><span class="n">totalDebit</span><span class="w"> </span><span class="o">=</span><span class="w"> </span><span class="n">calculateTotalDebit</span><span class="p">(</span><span class="n">lines</span><span class="p">);</span>
<span class="w">    </span><span class="n">Money</span><span class="w"> </span><span class="n">totalCredit</span><span class="w"> </span><span class="o">=</span><span class="w"> </span><span class="n">calculateTotalCredit</span><span class="p">(</span><span class="n">lines</span><span class="p">);</span>

<span class="w">    </span><span class="k">if</span><span class="w"> </span><span class="p">(</span><span class="o">!</span><span class="n">totalDebit</span><span class="p">.</span><span class="na">equals</span><span class="p">(</span><span class="n">totalCredit</span><span class="p">))</span><span class="w"> </span><span class="p">{</span>
<span class="w">        </span><span class="k">throw</span><span class="w"> </span><span class="k">new</span><span class="w"> </span><span class="n">ValidationException</span><span class="p">(</span>
<span class="w">            </span><span class="n">String</span><span class="p">.</span><span class="na">format</span><span class="p">(</span><span class="s">&quot;借方と貸方が一致しません: 借方=%s, 貸方=%s&quot;</span><span class="p">,</span>
<span class="w">                </span><span class="n">totalDebit</span><span class="p">,</span><span class="w"> </span><span class="n">totalCredit</span><span class="p">)</span>
<span class="w">        </span><span class="p">);</span>
<span class="w">    </span><span class="p">}</span>
<span class="p">}</span>

<span class="kd">private</span><span class="w"> </span><span class="n">Money</span><span class="w"> </span><span class="nf">calculateTotalDebit</span><span class="p">(</span><span class="n">List</span><span class="o">&lt;</span><span class="n">JournalLine</span><span class="o">&gt;</span><span class="w"> </span><span class="n">lines</span><span class="p">)</span><span class="w"> </span><span class="p">{</span>
<span class="w">    </span><span class="k">return</span><span class="w"> </span><span class="n">lines</span><span class="p">.</span><span class="na">stream</span><span class="p">()</span>
<span class="w">        </span><span class="p">.</span><span class="na">filter</span><span class="p">(</span><span class="n">JournalLine</span><span class="p">::</span><span class="n">isDebit</span><span class="p">)</span>
<span class="w">        </span><span class="p">.</span><span class="na">map</span><span class="p">(</span><span class="n">JournalLine</span><span class="p">::</span><span class="n">getAmount</span><span class="p">)</span>
<span class="w">        </span><span class="p">.</span><span class="na">reduce</span><span class="p">(</span><span class="n">Money</span><span class="p">.</span><span class="na">ZERO</span><span class="p">,</span><span class="w"> </span><span class="n">Money</span><span class="p">::</span><span class="n">add</span><span class="p">);</span>
<span class="p">}</span>

<span class="kd">private</span><span class="w"> </span><span class="n">Money</span><span class="w"> </span><span class="nf">calculateTotalCredit</span><span class="p">(</span><span class="n">List</span><span class="o">&lt;</span><span class="n">JournalLine</span><span class="o">&gt;</span><span class="w"> </span><span class="n">lines</span><span class="p">)</span><span class="w"> </span><span class="p">{</span>
<span class="w">    </span><span class="k">return</span><span class="w"> </span><span class="n">lines</span><span class="p">.</span><span class="na">stream</span><span class="p">()</span>
<span class="w">        </span><span class="p">.</span><span class="na">filter</span><span class="p">(</span><span class="n">JournalLine</span><span class="p">::</span><span class="n">isCredit</span><span class="p">)</span>
<span class="w">        </span><span class="p">.</span><span class="na">map</span><span class="p">(</span><span class="n">JournalLine</span><span class="p">::</span><span class="n">getAmount</span><span class="p">)</span>
<span class="w">        </span><span class="p">.</span><span class="na">reduce</span><span class="p">(</span><span class="n">Money</span><span class="p">.</span><span class="na">ZERO</span><span class="p">,</span><span class="w"> </span><span class="n">Money</span><span class="p">::</span><span class="n">add</span><span class="p">);</span>
<span class="p">}</span>

<span class="kd">private</span><span class="w"> </span><span class="kt">void</span><span class="w"> </span><span class="nf">validateAccountCodes</span><span class="p">(</span><span class="n">List</span><span class="o">&lt;</span><span class="n">JournalLine</span><span class="o">&gt;</span><span class="w"> </span><span class="n">lines</span><span class="p">)</span><span class="w"> </span><span class="p">{</span>
<span class="w">    </span><span class="k">for</span><span class="w"> </span><span class="p">(</span><span class="n">JournalLine</span><span class="w"> </span><span class="n">line</span><span class="w"> </span><span class="p">:</span><span class="w"> </span><span class="n">lines</span><span class="p">)</span><span class="w"> </span><span class="p">{</span>
<span class="w">        </span><span class="k">if</span><span class="w"> </span><span class="p">(</span><span class="o">!</span><span class="n">accountRepository</span><span class="p">.</span><span class="na">existsByCode</span><span class="p">(</span><span class="n">line</span><span class="p">.</span><span class="na">getAccountCode</span><span class="p">()))</span><span class="w"> </span><span class="p">{</span>
<span class="w">            </span><span class="k">throw</span><span class="w"> </span><span class="k">new</span><span class="w"> </span><span class="n">ValidationException</span><span class="p">(</span>
<span class="w">                </span><span class="s">&quot;勘定科目が存在しません: &quot;</span><span class="w"> </span><span class="o">+</span><span class="w"> </span><span class="n">line</span><span class="p">.</span><span class="na">getAccountCode</span><span class="p">()</span>
<span class="w">            </span><span class="p">);</span>
<span class="w">        </span><span class="p">}</span>
<span class="w">    </span><span class="p">}</span>
<span class="p">}</span>
</code></pre></div>
<h3 id="_11">メソッド抽出のガイドライン<a class="headerlink" href="#_11" title="Permanent link">&para;</a></h3>
<ol>
<li><strong>単一責任</strong>: 各メソッドは1つのことだけを行う</li>
<li><strong>意図を表す名前</strong>: コメントの代わりにメソッド名で説明</li>
<li><strong>適切な粒度</strong>: 5〜15行程度が理想的</li>
<li><strong>テストの維持</strong>: 抽出後もテストがパスすることを確認</li>
</ol>
<hr />
<h2 id="234">23.4 ドメインサービス<a class="headerlink" href="#234" title="Permanent link">&para;</a></h2>
<h3 id="_12">適切な配置<a class="headerlink" href="#_12" title="Permanent link">&para;</a></h3>
<p>ドメインサービスは、複数のエンティティにまたがるビジネスロジックを配置する場所です。</p>
<p><img src="data:image/svg+xml;base64,PHN2ZyB4bWxucz0iaHR0cDovL3d3dy53My5vcmcvMjAwMC9zdmciIHhtbG5zOnhsaW5rPSJodHRwOi8vd3d3LnczLm9yZy8xOTk5L3hsaW5rIiBjb250ZW50U3R5bGVUeXBlPSJ0ZXh0L2NzcyIgZGF0YS1kaWFncmFtLXR5cGU9IkNMQVNTIiBoZWlnaHQ9IjUyMHB4IiBwcmVzZXJ2ZUFzcGVjdFJhdGlvPSJub25lIiBzdHlsZT0id2lkdGg6NjE2cHg7aGVpZ2h0OjUyMHB4O2JhY2tncm91bmQ6I0ZGRkZGRjsiIHZlcnNpb249IjEuMSIgdmlld0JveD0iMCAwIDYxNiA1MjAiIHdpZHRoPSI2MTZweCIgem9vbUFuZFBhbj0ibWFnbmlmeSI+PHRpdGxlPiYjMTI0ODk7JiMxMjUxMzsmIzEyNDUyOyYjMTI1MzE7JiMxMjQ2OTsmIzEyNTQwOyYjMTI0OTk7JiMxMjQ3MzsmIzEyMzk4OyYjMzcxOTc7JiMzMjYyMjs8L3RpdGxlPjxkZWZzLz48Zz48ZyBjbGFzcz0idGl0bGUiIGRhdGEtc291cmNlLWxpbmU9IjEiPjx0ZXh0IGZpbGw9IiMwMDAwMDAiIGZvbnQtZmFtaWx5PSJzYW5zLXNlcmlmIiBmb250LXNpemU9IjE0IiBmb250LXdlaWdodD0iYm9sZCIgbGVuZ3RoQWRqdXN0PSJzcGFjaW5nIiB0ZXh0TGVuZ3RoPSIxNTMuOTk5MyIgeD0iMjI0LjAwMDUiIHk9IjIyLjk5NTEiPiYjMTI0ODk7JiMxMjUxMzsmIzEyNDUyOyYjMTI1MzE7JiMxMjQ2OTsmIzEyNTQwOyYjMTI0OTk7JiMxMjQ3MzsmIzEyMzk4OyYjMzcxOTc7JiMzMjYyMjs8L3RleHQ+PC9nPjwhLS1jbHVzdGVyID8/Pz8/LS0+PGcgY2xhc3M9ImNsdXN0ZXIiIGRhdGEtZW50aXR5PSIuLi4uLiIgZGF0YS1zb3VyY2UtbGluZT0iMyIgZGF0YS11aWQ9ImVudDAwMDIiIGlkPSJjbHVzdGVyXy4uLi4uIj48cmVjdCBmaWxsPSJub25lIiBoZWlnaHQ9IjQ3MC4xNyIgcng9IjIuNSIgcnk9IjIuNSIgc3R5bGU9InN0cm9rZTojMTgxODE4O3N0cm9rZS13aWR0aDoxOyIgd2lkdGg9IjM2NyIgeD0iNyIgeT0iNDQuMjk2OSIvPjx0ZXh0IGZpbGw9IiMwMDAwMDAiIGZvbnQtZmFtaWx5PSJzYW5zLXNlcmlmIiBmb250LXNpemU9IjE0IiBmb250LXdlaWdodD0iYm9sZCIgbGVuZ3RoQWRqdXN0PSJzcGFjaW5nIiB0ZXh0TGVuZ3RoPSI2OS45OTk3IiB4PSIxNTUuNTAwMiIgeT0iNTkuMjkyIj4mIzEyNDg5OyYjMTI1MTM7JiMxMjQ1MjsmIzEyNTMxOyYjMjM2NTI7PC90ZXh0PjwvZz48IS0tY2xhc3MgSm91cm5hbEVudHJ5LS0+PGcgY2xhc3M9ImVudGl0eSIgZGF0YS1lbnRpdHk9IkpvdXJuYWxFbnRyeSIgZGF0YS1zb3VyY2UtbGluZT0iNCIgZGF0YS11aWQ9ImVudDAwMDMiIGlkPSJlbnRpdHlfSm91cm5hbEVudHJ5Ij48cmVjdCBmaWxsPSIjRjFGMUYxIiBoZWlnaHQ9IjEwNS4xNTYzIiByeD0iMi41IiByeT0iMi41IiBzdHlsZT0ic3Ryb2tlOiMxODE4MTg7c3Ryb2tlLXdpZHRoOjAuNTsiIHdpZHRoPSIxMTcuOTE0MSIgeD0iMjMuMDQiIHk9IjIyOC4xNTY5Ii8+PGVsbGlwc2UgY3g9IjM4LjA0IiBjeT0iMjQ4LjI4OTciIGZpbGw9IiNBREQxQjIiIHJ4PSIxMSIgcnk9IjExIiBzdHlsZT0ic3Ryb2tlOiMxODE4MTg7c3Ryb2tlLXdpZHRoOjE7Ii8+PHBhdGggZD0iTTQxLjAwODgsMjUzLjkzMDMgUTQwLjQzMDYsMjU0LjIyNzIgMzkuNzksMjU0LjM2NzggUTM5LjE0OTQsMjU0LjUyNDEgMzguNDQ2MywyNTQuNTI0MSBRMzUuOTQ2MywyNTQuNTI0MSAzNC42MTgxLDI1Mi44ODM0IFEzMy4zMDU2LDI1MS4yMjcyIDMzLjMwNTYsMjQ4LjEwMjIgUTMzLjMwNTYsMjQ0Ljk3NzIgMzQuNjE4MSwyNDMuMzIwOSBRMzUuOTQ2MywyNDEuNjY0NyAzOC40NDYzLDI0MS42NjQ3IFEzOS4xNDk0LDI0MS42NjQ3IDM5Ljc5LDI0MS44MjA5IFE0MC40NDYzLDI0MS45NzcyIDQxLjAwODgsMjQyLjI3NDEgTDQxLjAwODgsMjQ0Ljk5MjggUTQwLjM4MzgsMjQ0LjQxNDcgMzkuNzksMjQ0LjE0OTEgUTM5LjE5NjMsMjQzLjg2NzggMzguNTcxMywyNDMuODY3OCBRMzcuMjI3NSwyNDMuODY3OCAzNi41NCwyNDQuOTQ1OSBRMzUuODUyNSwyNDYuMDA4NCAzNS44NTI1LDI0OC4xMDIyIFEzNS44NTI1LDI1MC4xOTU5IDM2LjU0LDI1MS4yNzQxIFEzNy4yMjc1LDI1Mi4zMzY2IDM4LjU3MTMsMjUyLjMzNjYgUTM5LjE5NjMsMjUyLjMzNjYgMzkuNzksMjUyLjA3MDkgUTQwLjM4MzgsMjUxLjc4OTcgNDEuMDA4OCwyNTEuMjExNiBMNDEuMDA4OCwyNTMuOTMwMyBaICIgZmlsbD0iIzAwMDAwMCIvPjx0ZXh0IGZpbGw9IiMwMDAwMDAiIGZvbnQtZmFtaWx5PSJzYW5zLXNlcmlmIiBmb250LXNpemU9IjEyIiBmb250LXN0eWxlPSJpdGFsaWMiIGxlbmd0aEFkanVzdD0ic3BhY2luZyIgdGV4dExlbmd0aD0iNDkuNzE2OCIgeD0iNzAuMTM4NiIgeT0iMjQ0LjI5NTUiPiYjMTcxO0VudGl0eSYjMTg3OzwvdGV4dD48dGV4dCBmaWxsPSIjMDAwMDAwIiBmb250LWZhbWlseT0ic2Fucy1zZXJpZiIgZm9udC1zaXplPSIxNCIgbGVuZ3RoQWRqdXN0PSJzcGFjaW5nIiB0ZXh0TGVuZ3RoPSI4NS45MTQxIiB4PSI1Mi4wNCIgeT0iMjYwLjEyMDciPkpvdXJuYWxFbnRyeTwvdGV4dD48bGluZSBzdHlsZT0ic3Ryb2tlOiMxODE4MTg7c3Ryb2tlLXdpZHRoOjAuNTsiIHgxPSIyNC4wNCIgeDI9IjEzOS45NTQxIiB5MT0iMjY4LjQyMjUiIHkyPSIyNjguNDIyNSIvPjxsaW5lIHN0eWxlPSJzdHJva2U6IzE4MTgxODtzdHJva2Utd2lkdGg6MC41OyIgeDE9IjI0LjA0IiB4Mj0iMTM5Ljk1NDEiIHkxPSIyNzYuNDIyNSIgeTI9IjI3Ni40MjI1Ii8+PGVsbGlwc2UgY3g9IjM0LjA0IiBjeT0iMjkwLjA3MDkiIGZpbGw9IiM4NEJFODQiIHJ4PSIzIiByeT0iMyIgc3R5bGU9InN0cm9rZTojMDM4MDQ4O3N0cm9rZS13aWR0aDoxOyIvPjx0ZXh0IGZpbGw9IiMwMDAwMDAiIGZvbnQtZmFtaWx5PSJzYW5zLXNlcmlmIiBmb250LXNpemU9IjE0IiBsZW5ndGhBZGp1c3Q9InNwYWNpbmciIHRleHRMZW5ndGg9Ijg2LjgzMDEiIHg9IjQzLjA0IiB5PSIyOTMuNDE3NiI+aXNCYWxhbmNlZCgpPC90ZXh0PjxlbGxpcHNlIGN4PSIzNC4wNCIgY3k9IjMwNi4zNjc4IiBmaWxsPSIjODRCRTg0IiByeD0iMyIgcnk9IjMiIHN0eWxlPSJzdHJva2U6IzAzODA0ODtzdHJva2Utd2lkdGg6MTsiLz48dGV4dCBmaWxsPSIjMDAwMDAwIiBmb250LWZhbWlseT0ic2Fucy1zZXJpZiIgZm9udC1zaXplPSIxNCIgbGVuZ3RoQWRqdXN0PSJzcGFjaW5nIiB0ZXh0TGVuZ3RoPSI2OC40OTYxIiB4PSI0My4wNCIgeT0iMzA5LjcxNDUiPmFwcHJvdmUoKTwvdGV4dD48ZWxsaXBzZSBjeD0iMzQuMDQiIGN5PSIzMjIuNjY0NyIgZmlsbD0iIzg0QkU4NCIgcng9IjMiIHJ5PSIzIiBzdHlsZT0ic3Ryb2tlOiMwMzgwNDg7c3Ryb2tlLXdpZHRoOjE7Ii8+PHRleHQgZmlsbD0iIzAwMDAwMCIgZm9udC1mYW1pbHk9InNhbnMtc2VyaWYiIGZvbnQtc2l6ZT0iMTQiIGxlbmd0aEFkanVzdD0ic3BhY2luZyIgdGV4dExlbmd0aD0iNjQuMjcxNSIgeD0iNDMuMDQiIHk9IjMyNi4wMTE0Ij5jb25maXJtKCk8L3RleHQ+PC9nPjwhLS1jbGFzcyBKb3VybmFsTGluZS0tPjxnIGNsYXNzPSJlbnRpdHkiIGRhdGEtZW50aXR5PSJKb3VybmFsTGluZSIgZGF0YS1zb3VyY2UtbGluZT0iMTAiIGRhdGEtdWlkPSJlbnQwMDA0IiBpZD0iZW50aXR5X0pvdXJuYWxMaW5lIj48cmVjdCBmaWxsPSIjRjFGMUYxIiBoZWlnaHQ9IjEwNS4xNTYzIiByeD0iMi41IiByeT0iMi41IiBzdHlsZT0ic3Ryb2tlOiMxODE4MTg7c3Ryb2tlLXdpZHRoOjAuNTsiIHdpZHRoPSIxMTQuOTI4NyIgeD0iMjQuNTQiIHk9IjM5My4zMDY5Ii8+PGVsbGlwc2UgY3g9IjQxLjgyOTYiIGN5PSI0MTMuNDM5NyIgZmlsbD0iI0FERDFCMiIgcng9IjExIiByeT0iMTEiIHN0eWxlPSJzdHJva2U6IzE4MTgxODtzdHJva2Utd2lkdGg6MTsiLz48cGF0aCBkPSJNNDQuNzk4Myw0MTkuMDgwMyBRNDQuMjIwMiw0MTkuMzc3MiA0My41Nzk2LDQxOS41MTc4IFE0Mi45Mzg5LDQxOS42NzQxIDQyLjIzNTgsNDE5LjY3NDEgUTM5LjczNTgsNDE5LjY3NDEgMzguNDA3Nyw0MTguMDMzNCBRMzcuMDk1Miw0MTYuMzc3MiAzNy4wOTUyLDQxMy4yNTIyIFEzNy4wOTUyLDQxMC4xMjcyIDM4LjQwNzcsNDA4LjQ3MDkgUTM5LjczNTgsNDA2LjgxNDcgNDIuMjM1OCw0MDYuODE0NyBRNDIuOTM4OSw0MDYuODE0NyA0My41Nzk2LDQwNi45NzA5IFE0NC4yMzU4LDQwNy4xMjcyIDQ0Ljc5ODMsNDA3LjQyNDEgTDQ0Ljc5ODMsNDEwLjE0MjggUTQ0LjE3MzMsNDA5LjU2NDcgNDMuNTc5Niw0MDkuMjk5MSBRNDIuOTg1OCw0MDkuMDE3OCA0Mi4zNjA4LDQwOS4wMTc4IFE0MS4wMTcxLDQwOS4wMTc4IDQwLjMyOTYsNDEwLjA5NTkgUTM5LjY0MjEsNDExLjE1ODQgMzkuNjQyMSw0MTMuMjUyMiBRMzkuNjQyMSw0MTUuMzQ1OSA0MC4zMjk2LDQxNi40MjQxIFE0MS4wMTcxLDQxNy40ODY2IDQyLjM2MDgsNDE3LjQ4NjYgUTQyLjk4NTgsNDE3LjQ4NjYgNDMuNTc5Niw0MTcuMjIwOSBRNDQuMTczMyw0MTYuOTM5NyA0NC43OTgzLDQxNi4zNjE2IEw0NC43OTgzLDQxOS4wODAzIFogIiBmaWxsPSIjMDAwMDAwIi8+PHRleHQgZmlsbD0iIzAwMDAwMCIgZm9udC1mYW1pbHk9InNhbnMtc2VyaWYiIGZvbnQtc2l6ZT0iMTIiIGZvbnQtc3R5bGU9Iml0YWxpYyIgbGVuZ3RoQWRqdXN0PSJzcGFjaW5nIiB0ZXh0TGVuZ3RoPSI0OS43MTY4IiB4PSI3MC40MDA0IiB5PSI0MDkuNDQ1NSI+JiMxNzE7RW50aXR5JiMxODc7PC90ZXh0Pjx0ZXh0IGZpbGw9IiMwMDAwMDAiIGZvbnQtZmFtaWx5PSJzYW5zLXNlcmlmIiBmb250LXNpemU9IjE0IiBsZW5ndGhBZGp1c3Q9InNwYWNpbmciIHRleHRMZW5ndGg9Ijc3Ljg0MDgiIHg9IjU2LjMzODMiIHk9IjQyNS4yNzA3Ij5Kb3VybmFsTGluZTwvdGV4dD48bGluZSBzdHlsZT0ic3Ryb2tlOiMxODE4MTg7c3Ryb2tlLXdpZHRoOjAuNTsiIHgxPSIyNS41NCIgeDI9IjEzOC40Njg3IiB5MT0iNDMzLjU3MjUiIHkyPSI0MzMuNTcyNSIvPjxsaW5lIHN0eWxlPSJzdHJva2U6IzE4MTgxODtzdHJva2Utd2lkdGg6MC41OyIgeDE9IjI1LjU0IiB4Mj0iMTM4LjQ2ODciIHkxPSI0NDEuNTcyNSIgeTI9IjQ0MS41NzI1Ii8+PGVsbGlwc2UgY3g9IjM1LjU0IiBjeT0iNDU1LjIyMDkiIGZpbGw9IiM4NEJFODQiIHJ4PSIzIiByeT0iMyIgc3R5bGU9InN0cm9rZTojMDM4MDQ4O3N0cm9rZS13aWR0aDoxOyIvPjx0ZXh0IGZpbGw9IiMwMDAwMDAiIGZvbnQtZmFtaWx5PSJzYW5zLXNlcmlmIiBmb250LXNpemU9IjE0IiBsZW5ndGhBZGp1c3Q9InNwYWNpbmciIHRleHRMZW5ndGg9Ijg4LjkyODciIHg9IjQ0LjU0IiB5PSI0NTguNTY3NiI+Z2V0QW1vdW50KCk8L3RleHQ+PGVsbGlwc2UgY3g9IjM1LjU0IiBjeT0iNDcxLjUxNzgiIGZpbGw9IiM4NEJFODQiIHJ4PSIzIiByeT0iMyIgc3R5bGU9InN0cm9rZTojMDM4MDQ4O3N0cm9rZS13aWR0aDoxOyIvPjx0ZXh0IGZpbGw9IiMwMDAwMDAiIGZvbnQtZmFtaWx5PSJzYW5zLXNlcmlmIiBmb250LXNpemU9IjE0IiBsZW5ndGhBZGp1c3Q9InNwYWNpbmciIHRleHRMZW5ndGg9IjU5Ljc2NjYiIHg9IjQ0LjU0IiB5PSI0NzQuODY0NSI+aXNEZWJpdCgpPC90ZXh0PjxlbGxpcHNlIGN4PSIzNS41NCIgY3k9IjQ4Ny44MTQ3IiBmaWxsPSIjODRCRTg0IiByeD0iMyIgcnk9IjMiIHN0eWxlPSJzdHJva2U6IzAzODA0ODtzdHJva2Utd2lkdGg6MTsiLz48dGV4dCBmaWxsPSIjMDAwMDAwIiBmb250LWZhbWlseT0ic2Fucy1zZXJpZiIgZm9udC1zaXplPSIxNCIgbGVuZ3RoQWRqdXN0PSJzcGFjaW5nIiB0ZXh0TGVuZ3RoPSI2NC41MTc2IiB4PSI0NC41NCIgeT0iNDkxLjE2MTQiPmlzQ3JlZGl0KCk8L3RleHQ+PC9nPjwhLS1jbGFzcyBKb3VybmFsRG9tYWluU2VydmljZS0tPjxnIGNsYXNzPSJlbnRpdHkiIGRhdGEtZW50aXR5PSJKb3VybmFsRG9tYWluU2VydmljZSIgZGF0YS1zb3VyY2UtbGluZT0iMTYiIGRhdGEtdWlkPSJlbnQwMDA1IiBpZD0iZW50aXR5X0pvdXJuYWxEb21haW5TZXJ2aWNlIj48cmVjdCBmaWxsPSIjRjFGMUYxIiBoZWlnaHQ9Ijg4Ljg1OTQiIHJ4PSIyLjUiIHJ5PSIyLjUiIHN0eWxlPSJzdHJva2U6IzE4MTgxODtzdHJva2Utd2lkdGg6MC41OyIgd2lkdGg9IjIzOS4zMTU0IiB4PSIxMTguMzQiIHk9Ijc5LjI5NjkiLz48ZWxsaXBzZSBjeD0iMTU3LjAwMjgiIGN5PSI5OS40Mjk3IiBmaWxsPSIjQUREMUIyIiByeD0iMTEiIHJ5PSIxMSIgc3R5bGU9InN0cm9rZTojMTgxODE4O3N0cm9rZS13aWR0aDoxOyIvPjxwYXRoIGQ9Ik0xNTkuOTcxNSwxMDUuMDcwMyBRMTU5LjM5MzQsMTA1LjM2NzIgMTU4Ljc1MjgsMTA1LjUwNzggUTE1OC4xMTIyLDEwNS42NjQxIDE1Ny40MDksMTA1LjY2NDEgUTE1NC45MDksMTA1LjY2NDEgMTUzLjU4MDksMTA0LjAyMzQgUTE1Mi4yNjg0LDEwMi4zNjcyIDE1Mi4yNjg0LDk5LjI0MjIgUTE1Mi4yNjg0LDk2LjExNzIgMTUzLjU4MDksOTQuNDYwOSBRMTU0LjkwOSw5Mi44MDQ3IDE1Ny40MDksOTIuODA0NyBRMTU4LjExMjIsOTIuODA0NyAxNTguNzUyOCw5Mi45NjA5IFExNTkuNDA5LDkzLjExNzIgMTU5Ljk3MTUsOTMuNDE0MSBMMTU5Ljk3MTUsOTYuMTMyOCBRMTU5LjM0NjUsOTUuNTU0NyAxNTguNzUyOCw5NS4yODkxIFExNTguMTU5LDk1LjAwNzggMTU3LjUzNCw5NS4wMDc4IFExNTYuMTkwMyw5NS4wMDc4IDE1NS41MDI4LDk2LjA4NTkgUTE1NC44MTUzLDk3LjE0ODQgMTU0LjgxNTMsOTkuMjQyMiBRMTU0LjgxNTMsMTAxLjMzNTkgMTU1LjUwMjgsMTAyLjQxNDEgUTE1Ni4xOTAzLDEwMy40NzY2IDE1Ny41MzQsMTAzLjQ3NjYgUTE1OC4xNTksMTAzLjQ3NjYgMTU4Ljc1MjgsMTAzLjIxMDkgUTE1OS4zNDY1LDEwMi45Mjk3IDE1OS45NzE1LDEwMi4zNTE2IEwxNTkuOTcxNSwxMDUuMDcwMyBaICIgZmlsbD0iIzAwMDAwMCIvPjx0ZXh0IGZpbGw9IiMwMDAwMDAiIGZvbnQtZmFtaWx5PSJzYW5zLXNlcmlmIiBmb250LXNpemU9IjEyIiBmb250LXN0eWxlPSJpdGFsaWMiIGxlbmd0aEFkanVzdD0ic3BhY2luZyIgdGV4dExlbmd0aD0iNTkuMDMzMiIgeD0iMjI0LjExMDMiIHk9Ijk1LjQzNTUiPiYjMTcxO1NlcnZpY2UmIzE4Nzs8L3RleHQ+PHRleHQgZmlsbD0iIzAwMDAwMCIgZm9udC1mYW1pbHk9InNhbnMtc2VyaWYiIGZvbnQtc2l6ZT0iMTQiIGxlbmd0aEFkanVzdD0ic3BhY2luZyIgdGV4dExlbmd0aD0iMTU0LjczMTQiIHg9IjE3Ni4yNjEyIiB5PSIxMTEuMjYwNyI+Sm91cm5hbERvbWFpblNlcnZpY2U8L3RleHQ+PGxpbmUgc3R5bGU9InN0cm9rZTojMTgxODE4O3N0cm9rZS13aWR0aDowLjU7IiB4MT0iMTE5LjM0IiB4Mj0iMzU2LjY1NTQiIHkxPSIxMTkuNTYyNSIgeTI9IjExOS41NjI1Ii8+PGxpbmUgc3R5bGU9InN0cm9rZTojMTgxODE4O3N0cm9rZS13aWR0aDowLjU7IiB4MT0iMTE5LjM0IiB4Mj0iMzU2LjY1NTQiIHkxPSIxMjcuNTYyNSIgeTI9IjEyNy41NjI1Ii8+PGVsbGlwc2UgY3g9IjEyOS4zNCIgY3k9IjE0MS4yMTA5IiBmaWxsPSIjODRCRTg0IiByeD0iMyIgcnk9IjMiIHN0eWxlPSJzdHJva2U6IzAzODA0ODtzdHJva2Utd2lkdGg6MTsiLz48dGV4dCBmaWxsPSIjMDAwMDAwIiBmb250LWZhbWlseT0ic2Fucy1zZXJpZiIgZm9udC1zaXplPSIxNCIgbGVuZ3RoQWRqdXN0PSJzcGFjaW5nIiB0ZXh0TGVuZ3RoPSIyMTMuMzE1NCIgeD0iMTM4LjM0IiB5PSIxNDQuNTU3NiI+dmFsaWRhdGVQZXJpb2QoZW50cmllcywgcGVyaW9kKTwvdGV4dD48ZWxsaXBzZSBjeD0iMTI5LjM0IiBjeT0iMTU3LjUwNzgiIGZpbGw9IiM4NEJFODQiIHJ4PSIzIiByeT0iMyIgc3R5bGU9InN0cm9rZTojMDM4MDQ4O3N0cm9rZS13aWR0aDoxOyIvPjx0ZXh0IGZpbGw9IiMwMDAwMDAiIGZvbnQtZmFtaWx5PSJzYW5zLXNlcmlmIiBmb250LXNpemU9IjE0IiBsZW5ndGhBZGp1c3Q9InNwYWNpbmciIHRleHRMZW5ndGg9IjE3NC40MzI2IiB4PSIxMzguMzQiIHk9IjE2MC44NTQ1Ij5jaGVja0R1cGxpY2F0ZXMoZW50cmllcyk8L3RleHQ+PC9nPjwhLS1jbGFzcyBKb3VybmFsVmFsaWRhdGlvblJ1bGUtLT48ZyBjbGFzcz0iZW50aXR5IiBkYXRhLWVudGl0eT0iSm91cm5hbFZhbGlkYXRpb25SdWxlIiBkYXRhLXNvdXJjZS1saW5lPSIyMSIgZGF0YS11aWQ9ImVudDAwMDYiIGlkPSJlbnRpdHlfSm91cm5hbFZhbGlkYXRpb25SdWxlIj48cmVjdCBmaWxsPSIjRjFGMUYxIiBoZWlnaHQ9IjcyLjU2MjUiIHJ4PSIyLjUiIHJ5PSIyLjUiIHN0eWxlPSJzdHJva2U6IzE4MTgxODtzdHJva2Utd2lkdGg6MC41OyIgd2lkdGg9IjE4MS45ODczIiB4PSIxNzYuMDEiIHk9IjI0NC40NDY5Ii8+PGVsbGlwc2UgY3g9IjE5MS4wMSIgY3k9IjI2NC41Nzk3IiBmaWxsPSIjQUREMUIyIiByeD0iMTEiIHJ5PSIxMSIgc3R5bGU9InN0cm9rZTojMTgxODE4O3N0cm9rZS13aWR0aDoxOyIvPjxwYXRoIGQ9Ik0xOTMuOTc4OCwyNzAuMjIwMyBRMTkzLjQwMDYsMjcwLjUxNzIgMTkyLjc2LDI3MC42NTc4IFExOTIuMTE5NCwyNzAuODE0MSAxOTEuNDE2MywyNzAuODE0MSBRMTg4LjkxNjMsMjcwLjgxNDEgMTg3LjU4ODEsMjY5LjE3MzQgUTE4Ni4yNzU2LDI2Ny41MTcyIDE4Ni4yNzU2LDI2NC4zOTIyIFExODYuMjc1NiwyNjEuMjY3MiAxODcuNTg4MSwyNTkuNjEwOSBRMTg4LjkxNjMsMjU3Ljk1NDcgMTkxLjQxNjMsMjU3Ljk1NDcgUTE5Mi4xMTk0LDI1Ny45NTQ3IDE5Mi43NiwyNTguMTEwOSBRMTkzLjQxNjMsMjU4LjI2NzIgMTkzLjk3ODgsMjU4LjU2NDEgTDE5My45Nzg4LDI2MS4yODI4IFExOTMuMzUzOCwyNjAuNzA0NyAxOTIuNzYsMjYwLjQzOTEgUTE5Mi4xNjYzLDI2MC4xNTc4IDE5MS41NDEzLDI2MC4xNTc4IFExOTAuMTk3NSwyNjAuMTU3OCAxODkuNTEsMjYxLjIzNTkgUTE4OC44MjI1LDI2Mi4yOTg0IDE4OC44MjI1LDI2NC4zOTIyIFExODguODIyNSwyNjYuNDg1OSAxODkuNTEsMjY3LjU2NDEgUTE5MC4xOTc1LDI2OC42MjY2IDE5MS41NDEzLDI2OC42MjY2IFExOTIuMTY2MywyNjguNjI2NiAxOTIuNzYsMjY4LjM2MDkgUTE5My4zNTM4LDI2OC4wNzk3IDE5My45Nzg4LDI2Ny41MDE2IEwxOTMuOTc4OCwyNzAuMjIwMyBaICIgZmlsbD0iIzAwMDAwMCIvPjx0ZXh0IGZpbGw9IiMwMDAwMDAiIGZvbnQtZmFtaWx5PSJzYW5zLXNlcmlmIiBmb250LXNpemU9IjEyIiBmb250LXN0eWxlPSJpdGFsaWMiIGxlbmd0aEFkanVzdD0ic3BhY2luZyIgdGV4dExlbmd0aD0iNjYuMDk5NiIgeD0iMjQ2Ljk1MzgiIHk9IjI2MC41ODU1Ij4mIzE3MTtTdHJhdGVneSYjMTg3OzwvdGV4dD48dGV4dCBmaWxsPSIjMDAwMDAwIiBmb250LWZhbWlseT0ic2Fucy1zZXJpZiIgZm9udC1zaXplPSIxNCIgbGVuZ3RoQWRqdXN0PSJzcGFjaW5nIiB0ZXh0TGVuZ3RoPSIxNDkuOTg3MyIgeD0iMjA1LjAxIiB5PSIyNzYuNDEwNyI+Sm91cm5hbFZhbGlkYXRpb25SdWxlPC90ZXh0PjxsaW5lIHN0eWxlPSJzdHJva2U6IzE4MTgxODtzdHJva2Utd2lkdGg6MC41OyIgeDE9IjE3Ny4wMSIgeDI9IjM1Ni45OTczIiB5MT0iMjg0LjcxMjUiIHkyPSIyODQuNzEyNSIvPjxsaW5lIHN0eWxlPSJzdHJva2U6IzE4MTgxODtzdHJva2Utd2lkdGg6MC41OyIgeDE9IjE3Ny4wMSIgeDI9IjM1Ni45OTczIiB5MT0iMjkyLjcxMjUiIHkyPSIyOTIuNzEyNSIvPjxlbGxpcHNlIGN4PSIxODcuMDEiIGN5PSIzMDYuMzYwOSIgZmlsbD0iIzg0QkU4NCIgcng9IjMiIHJ5PSIzIiBzdHlsZT0ic3Ryb2tlOiMwMzgwNDg7c3Ryb2tlLXdpZHRoOjE7Ii8+PHRleHQgZmlsbD0iIzAwMDAwMCIgZm9udC1mYW1pbHk9InNhbnMtc2VyaWYiIGZvbnQtc2l6ZT0iMTQiIGxlbmd0aEFkanVzdD0ic3BhY2luZyIgdGV4dExlbmd0aD0iMTM3LjQ3MDciIHg9IjE5Ni4wMSIgeT0iMzA5LjcwNzYiPmlzU2F0aXNmaWVkQnkoZW50cnkpPC90ZXh0PjwvZz48ZyBjbGFzcz0iZW50aXR5IiBkYXRhLWVudGl0eT0iR01OMTAiIGRhdGEtc291cmNlLWxpbmU9IjMxIiBkYXRhLXVpZD0iZW50MDAxMSIgaWQ9ImVudGl0eV9HTU4xMCI+PHBhdGggZD0iTTM5MywyNjAuNTk2OSBMMzkzLDMwMC44NjI1IEEwLDAgMCAwIDAgMzkzLDMwMC44NjI1IEw2MDkuMDAwMiwzMDAuODYyNSBBMCwwIDAgMCAwIDYwOS4wMDAyLDMwMC44NjI1IEw2MDkuMDAwMiwyNzAuNTk2OSBMNTk5LjAwMDIsMjYwLjU5NjkgTDQ3MS44OCwyNjAuNTk2OSBMMzEyLjMxLDE2OC41MjY5IEw0NjMuODgsMjYwLjU5NjkgTDM5MywyNjAuNTk2OSBBMCwwIDAgMCAwIDM5MywyNjAuNTk2OSIgZmlsbD0iI0ZFRkZERCIgc3R5bGU9InN0cm9rZTojMTgxODE4O3N0cm9rZS13aWR0aDowLjU7Ii8+PHBhdGggZD0iTTU5OS4wMDAyLDI2MC41OTY5IEw1OTkuMDAwMiwyNzAuNTk2OSBMNjA5LjAwMDIsMjcwLjU5NjkgTDU5OS4wMDAyLDI2MC41OTY5IiBmaWxsPSIjRkVGRkREIiBzdHlsZT0ic3Ryb2tlOiMxODE4MTg7c3Ryb2tlLXdpZHRoOjAuNTsiLz48dGV4dCBmaWxsPSIjMDAwMDAwIiBmb250LWZhbWlseT0ic2Fucy1zZXJpZiIgZm9udC1zaXplPSIxMyIgbGVuZ3RoQWRqdXN0PSJzcGFjaW5nIiB0ZXh0TGVuZ3RoPSIxODIuMDAwMiIgeD0iMzk5IiB5PSIyNzcuNjYzOCI+JiMzNTA3OTsmIzI1OTY4OyYjMTIzOTg7JiMxMjQ1NjsmIzEyNTMxOyYjMTI0ODY7JiMxMjQ1MTsmIzEyNDg2OyYjMTI0NTE7JiMxMjM5NTsmIzEyNDE0OyYjMTIzODM7JiMxMjM2NDsmIzEyNDI3OzwvdGV4dD48dGV4dCBmaWxsPSIjMDAwMDAwIiBmb250LWZhbWlseT0ic2Fucy1zZXJpZiIgZm9udC1zaXplPSIxMyIgbGVuZ3RoQWRqdXN0PSJzcGFjaW5nIiB0ZXh0TGVuZ3RoPSIxOTUuMDAwMiIgeD0iMzk5IiB5PSIyOTIuNzk2NiI+JiMxMjQ5OTsmIzEyNDcyOyYjMTI0OTM7JiMxMjQ3MzsmIzEyNTIzOyYjMTI1NDA7JiMxMjUyMzsmIzEyMzk4OyYjMTI0ODE7JiMxMjQ1NTsmIzEyNDgzOyYjMTI0NjM7JiMxMjQzNDsmIzI1Mjg1OyYjMjQ0MDM7PC90ZXh0PjwvZz48IS0tcmV2ZXJzZSBsaW5rIEpvdXJuYWxFbnRyeSB0byBKb3VybmFsTGluZS0tPjxnIGNsYXNzPSJsaW5rIiBkYXRhLWVudGl0eS0xPSJKb3VybmFsRW50cnkiIGRhdGEtZW50aXR5LTI9IkpvdXJuYWxMaW5lIiBkYXRhLXNvdXJjZS1saW5lPSIyNSIgZGF0YS11aWQ9ImxuazciIGlkPSJsaW5rX0pvdXJuYWxFbnRyeV9Kb3VybmFsTGluZSI+PHBhdGggY29kZUxpbmU9IjI1IiBkPSJNODIsMzQ1LjgwNjkgQzgyLDM2NC43MzY5IDgyLDM3NC4xMTY5IDgyLDM5My4wMjY5IiBmaWxsPSJub25lIiBpZD0iSm91cm5hbEVudHJ5LWJhY2t0by1Kb3VybmFsTGluZSIgc3R5bGU9InN0cm9rZTojMTgxODE4O3N0cm9rZS13aWR0aDoxOyIvPjxwb2x5Z29uIGZpbGw9IiMxODE4MTgiIHBvaW50cz0iODIsMzMzLjgwNjksNzgsMzM5LjgwNjksODIsMzQ1LjgwNjksODYsMzM5LjgwNjksODIsMzMzLjgwNjkiIHN0eWxlPSJzdHJva2U6IzE4MTgxODtzdHJva2Utd2lkdGg6MTsiLz48dGV4dCBmaWxsPSIjMDAwMDAwIiBmb250LWZhbWlseT0ic2Fucy1zZXJpZiIgZm9udC1zaXplPSIxMyIgbGVuZ3RoQWRqdXN0PSJzcGFjaW5nIiB0ZXh0TGVuZ3RoPSI4LjI3MSIgeD0iNzMuNTI5NCIgeT0iMzUzLjI2NDEiPjE8L3RleHQ+PHRleHQgZmlsbD0iIzAwMDAwMCIgZm9udC1mYW1pbHk9InNhbnMtc2VyaWYiIGZvbnQtc2l6ZT0iMTMiIGxlbmd0aEFkanVzdD0ic3BhY2luZyIgdGV4dExlbmd0aD0iNi41IiB4PSI3NS42NDcxIiB5PSIzODIuMzY4OSI+KjwvdGV4dD48L2c+PCEtLWxpbmsgSm91cm5hbERvbWFpblNlcnZpY2UgdG8gSm91cm5hbEVudHJ5LS0+PGcgY2xhc3M9ImxpbmsiIGRhdGEtZW50aXR5LTE9IkpvdXJuYWxEb21haW5TZXJ2aWNlIiBkYXRhLWVudGl0eS0yPSJKb3VybmFsRW50cnkiIGRhdGEtc291cmNlLWxpbmU9IjI2IiBkYXRhLXVpZD0ibG5rOCIgaWQ9ImxpbmtfSm91cm5hbERvbWFpblNlcnZpY2VfSm91cm5hbEVudHJ5Ij48cGF0aCBjb2RlTGluZT0iMjYiIGQ9Ik0xOTQuMTMsMTY4LjMxNjkgQzE3NS41NywxODYuNzY2OSAxNTguMDQ1OCwyMDQuMTY3NCAxMzguNjQ1OCwyMjMuNDQ3NCIgZmlsbD0ibm9uZSIgaWQ9IkpvdXJuYWxEb21haW5TZXJ2aWNlLXRvLUpvdXJuYWxFbnRyeSIgc3R5bGU9InN0cm9rZTojMTgxODE4O3N0cm9rZS13aWR0aDoxOyIvPjxwb2x5Z29uIGZpbGw9IiMxODE4MTgiIHBvaW50cz0iMTM0LjM5LDIyNy42NzY5LDE0My41OTMzLDIyNC4xNjk5LDEzNy45MzY1LDIyNC4xNTIzLDEzNy45NTQsMjE4LjQ5NTUsMTM0LjM5LDIyNy42NzY5IiBzdHlsZT0ic3Ryb2tlOiMxODE4MTg7c3Ryb2tlLXdpZHRoOjE7Ii8+PC9nPjwhLS1saW5rIEpvdXJuYWxEb21haW5TZXJ2aWNlIHRvIEpvdXJuYWxWYWxpZGF0aW9uUnVsZS0tPjxnIGNsYXNzPSJsaW5rIiBkYXRhLWVudGl0eS0xPSJKb3VybmFsRG9tYWluU2VydmljZSIgZGF0YS1lbnRpdHktMj0iSm91cm5hbFZhbGlkYXRpb25SdWxlIiBkYXRhLXNvdXJjZS1saW5lPSIyNyIgZGF0YS11aWQ9ImxuazkiIGlkPSJsaW5rX0pvdXJuYWxEb21haW5TZXJ2aWNlX0pvdXJuYWxWYWxpZGF0aW9uUnVsZSI+PHBhdGggY29kZUxpbmU9IjI3IiBkPSJNMjQ2LjE2LDE2OC4zMTY5IEMyNTAuNjMsMTkyLjIyNjkgMjU0Ljk5NTgsMjE1LjU5OTMgMjU5LjIxNTgsMjM4LjEzOTMiIGZpbGw9Im5vbmUiIGlkPSJKb3VybmFsRG9tYWluU2VydmljZS10by1Kb3VybmFsVmFsaWRhdGlvblJ1bGUiIHN0eWxlPSJzdHJva2U6IzE4MTgxODtzdHJva2Utd2lkdGg6MTsiLz48cG9seWdvbiBmaWxsPSIjMTgxODE4IiBwb2ludHM9IjI2MC4zMiwyNDQuMDM2OSwyNjIuNTk1NSwyMzQuNDU0NSwyNTkuMzk5OSwyMzkuMTIyMywyNTQuNzMyMSwyMzUuOTI2NywyNjAuMzIsMjQ0LjAzNjkiIHN0eWxlPSJzdHJva2U6IzE4MTgxODtzdHJva2Utd2lkdGg6MTsiLz48L2c+PCEtLVNSQz1bWEw5REltQ240QnRsaG1YeHFrZVVsNGoxaEhWbjgwaFVxenJmM013SmFhcUJZdFpPWDJmSVV4NXU1aDZXS0YwMzRISktGcERPekwtT1pJdFFNbDJJcDkwdFJydVVKcDRMMHE1cFhFT1NUR19ERlVlN0RDemVrZ1lWQ0JsLVI3TlVOd3V6SnFBZUFBelFpRnlSX05STnl5Y1U1eU9xSVNZUVE0WEV1ck1rUDRlTTUtdERMNWVpc2xTdm1mOWI2YkNVR1pHcFFyalFocWxIMTVVN1diVU9oRGJ3dG5qZE1jU1M5ZWNnZTlQZ2VpNkxjc0w5MlNmaUxBejhZNW1wSUxHSURTaHU1aVdjMnRGNk9KTWFSREFPSExKMTFhV2NlWGNtLVhhYXl3SmtVWVRuMXlCVEtnQ1VpejNZYVg3YXh3QmpSb2VjLTZPWlRma0tqMUZMN25rc3g2aklPSDBqZnV1Y1RJSFpybGFCRllhNDBWNEJfY3lkbEFjVjJPQlljRjdfZWlPYnZpa3ZLNDNBR1liSDh3OG9ySkZsZXRTdUVCc3JXSzF6YlFWNDdBMi02OXZQN3hETnBDdW1FcVJUemJuczdqNXF5V0lQbGFqSkZ2eXE2VWZCRDBScjNVZ0pHUmxyempCclc0U2E1XzA1XS0tPjwvZz48L3N2Zz4=" class="uml" alt="uml diagram" title="" /></p>
<h3 id="_13">仕訳ドメインサービス<a class="headerlink" href="#_13" title="Permanent link">&para;</a></h3>
<div class="highlight"><pre><span></span><code><span class="kn">package</span><span class="w"> </span><span class="nn">com.example.accounting.domain.service</span><span class="p">;</span>

<span class="kn">import</span><span class="w"> </span><span class="nn">com.example.accounting.domain.model.journal.*</span><span class="p">;</span>
<span class="kn">import</span><span class="w"> </span><span class="nn">lombok.RequiredArgsConstructor</span><span class="p">;</span>
<span class="kn">import</span><span class="w"> </span><span class="nn">org.springframework.stereotype.Service</span><span class="p">;</span>

<span class="kn">import</span><span class="w"> </span><span class="nn">java.time.LocalDate</span><span class="p">;</span>
<span class="kn">import</span><span class="w"> </span><span class="nn">java.util.*</span><span class="p">;</span>
<span class="kn">import</span><span class="w"> </span><span class="nn">java.util.stream.Collectors</span><span class="p">;</span>

<span class="cm">/**</span>
<span class="cm"> * 仕訳ドメインサービス</span>
<span class="cm"> */</span>
<span class="nd">@Service</span>
<span class="nd">@RequiredArgsConstructor</span>
<span class="kd">public</span><span class="w"> </span><span class="kd">class</span> <span class="nc">JournalDomainService</span><span class="w"> </span><span class="p">{</span>

<span class="w">    </span><span class="cm">/**</span>
<span class="cm">     * 仕訳ルールチェック</span>
<span class="cm">     * 複数の仕訳に対して、複数のルールを適用</span>
<span class="cm">     */</span>
<span class="w">    </span><span class="kd">public</span><span class="w"> </span><span class="n">JournalValidationResult</span><span class="w"> </span><span class="nf">checkRules</span><span class="p">(</span><span class="n">List</span><span class="o">&lt;</span><span class="n">JournalEntry</span><span class="o">&gt;</span><span class="w"> </span><span class="n">entries</span><span class="p">)</span><span class="w"> </span><span class="p">{</span>
<span class="w">        </span><span class="n">List</span><span class="o">&lt;</span><span class="n">ValidationError</span><span class="o">&gt;</span><span class="w"> </span><span class="n">errors</span><span class="w"> </span><span class="o">=</span><span class="w"> </span><span class="k">new</span><span class="w"> </span><span class="n">ArrayList</span><span class="o">&lt;&gt;</span><span class="p">();</span>

<span class="w">        </span><span class="c1">// ルールのインスタンス化</span>
<span class="w">        </span><span class="n">List</span><span class="o">&lt;</span><span class="n">JournalValidationRule</span><span class="o">&gt;</span><span class="w"> </span><span class="n">rules</span><span class="w"> </span><span class="o">=</span><span class="w"> </span><span class="n">List</span><span class="p">.</span><span class="na">of</span><span class="p">(</span>
<span class="w">            </span><span class="k">new</span><span class="w"> </span><span class="n">BalanceRule</span><span class="p">(),</span>
<span class="w">            </span><span class="k">new</span><span class="w"> </span><span class="n">FutureDateRule</span><span class="p">(),</span>
<span class="w">            </span><span class="k">new</span><span class="w"> </span><span class="n">DuplicateEntryRule</span><span class="p">()</span>
<span class="w">        </span><span class="p">);</span>

<span class="w">        </span><span class="c1">// 各仕訳に対してルールをチェック</span>
<span class="w">        </span><span class="k">for</span><span class="w"> </span><span class="p">(</span><span class="n">JournalEntry</span><span class="w"> </span><span class="n">entry</span><span class="w"> </span><span class="p">:</span><span class="w"> </span><span class="n">entries</span><span class="p">)</span><span class="w"> </span><span class="p">{</span>
<span class="w">            </span><span class="k">for</span><span class="w"> </span><span class="p">(</span><span class="n">JournalValidationRule</span><span class="w"> </span><span class="n">rule</span><span class="w"> </span><span class="p">:</span><span class="w"> </span><span class="n">rules</span><span class="p">)</span><span class="w"> </span><span class="p">{</span>
<span class="w">                </span><span class="k">if</span><span class="w"> </span><span class="p">(</span><span class="o">!</span><span class="n">rule</span><span class="p">.</span><span class="na">isSatisfiedBy</span><span class="p">(</span><span class="n">entry</span><span class="p">))</span><span class="w"> </span><span class="p">{</span>
<span class="w">                    </span><span class="n">errors</span><span class="p">.</span><span class="na">add</span><span class="p">(</span><span class="k">new</span><span class="w"> </span><span class="n">ValidationError</span><span class="p">(</span>
<span class="w">                        </span><span class="n">entry</span><span class="p">.</span><span class="na">getJournalNumber</span><span class="p">().</span><span class="na">getValue</span><span class="p">(),</span>
<span class="w">                        </span><span class="n">rule</span><span class="p">.</span><span class="na">getErrorMessage</span><span class="p">()</span>
<span class="w">                    </span><span class="p">));</span>
<span class="w">                </span><span class="p">}</span>
<span class="w">            </span><span class="p">}</span>
<span class="w">        </span><span class="p">}</span>

<span class="w">        </span><span class="k">return</span><span class="w"> </span><span class="k">new</span><span class="w"> </span><span class="n">JournalValidationResult</span><span class="p">(</span><span class="n">errors</span><span class="p">);</span>
<span class="w">    </span><span class="p">}</span>

<span class="w">    </span><span class="cm">/**</span>
<span class="cm">     * 期間内の仕訳を検証</span>
<span class="cm">     */</span>
<span class="w">    </span><span class="kd">public</span><span class="w"> </span><span class="n">JournalValidationResult</span><span class="w"> </span><span class="nf">validatePeriod</span><span class="p">(</span>
<span class="w">            </span><span class="n">List</span><span class="o">&lt;</span><span class="n">JournalEntry</span><span class="o">&gt;</span><span class="w"> </span><span class="n">entries</span><span class="p">,</span>
<span class="w">            </span><span class="n">LocalDate</span><span class="w"> </span><span class="n">startDate</span><span class="p">,</span>
<span class="w">            </span><span class="n">LocalDate</span><span class="w"> </span><span class="n">endDate</span>
<span class="w">    </span><span class="p">)</span><span class="w"> </span><span class="p">{</span>
<span class="w">        </span><span class="n">List</span><span class="o">&lt;</span><span class="n">ValidationError</span><span class="o">&gt;</span><span class="w"> </span><span class="n">errors</span><span class="w"> </span><span class="o">=</span><span class="w"> </span><span class="k">new</span><span class="w"> </span><span class="n">ArrayList</span><span class="o">&lt;&gt;</span><span class="p">();</span>

<span class="w">        </span><span class="c1">// 期間外の仕訳をチェック</span>
<span class="w">        </span><span class="k">for</span><span class="w"> </span><span class="p">(</span><span class="n">JournalEntry</span><span class="w"> </span><span class="n">entry</span><span class="w"> </span><span class="p">:</span><span class="w"> </span><span class="n">entries</span><span class="p">)</span><span class="w"> </span><span class="p">{</span>
<span class="w">            </span><span class="n">LocalDate</span><span class="w"> </span><span class="n">journalDate</span><span class="w"> </span><span class="o">=</span><span class="w"> </span><span class="n">entry</span><span class="p">.</span><span class="na">getJournalDate</span><span class="p">().</span><span class="na">getValue</span><span class="p">();</span>
<span class="w">            </span><span class="k">if</span><span class="w"> </span><span class="p">(</span><span class="n">journalDate</span><span class="p">.</span><span class="na">isBefore</span><span class="p">(</span><span class="n">startDate</span><span class="p">)</span><span class="w"> </span><span class="o">||</span>
<span class="w">                </span><span class="n">journalDate</span><span class="p">.</span><span class="na">isAfter</span><span class="p">(</span><span class="n">endDate</span><span class="p">))</span><span class="w"> </span><span class="p">{</span>
<span class="w">                </span><span class="n">errors</span><span class="p">.</span><span class="na">add</span><span class="p">(</span><span class="k">new</span><span class="w"> </span><span class="n">ValidationError</span><span class="p">(</span>
<span class="w">                    </span><span class="n">entry</span><span class="p">.</span><span class="na">getJournalNumber</span><span class="p">().</span><span class="na">getValue</span><span class="p">(),</span>
<span class="w">                    </span><span class="s">&quot;仕訳日が指定期間外です&quot;</span>
<span class="w">                </span><span class="p">));</span>
<span class="w">            </span><span class="p">}</span>
<span class="w">        </span><span class="p">}</span>

<span class="w">        </span><span class="k">return</span><span class="w"> </span><span class="k">new</span><span class="w"> </span><span class="n">JournalValidationResult</span><span class="p">(</span><span class="n">errors</span><span class="p">);</span>
<span class="w">    </span><span class="p">}</span>

<span class="w">    </span><span class="cm">/**</span>
<span class="cm">     * 重複仕訳のチェック</span>
<span class="cm">     */</span>
<span class="w">    </span><span class="kd">public</span><span class="w"> </span><span class="n">List</span><span class="o">&lt;</span><span class="n">DuplicateGroup</span><span class="o">&gt;</span><span class="w"> </span><span class="nf">findDuplicates</span><span class="p">(</span><span class="n">List</span><span class="o">&lt;</span><span class="n">JournalEntry</span><span class="o">&gt;</span><span class="w"> </span><span class="n">entries</span><span class="p">)</span><span class="w"> </span><span class="p">{</span>
<span class="w">        </span><span class="c1">// 同一日・同一金額・同一勘定科目の仕訳をグループ化</span>
<span class="w">        </span><span class="n">Map</span><span class="o">&lt;</span><span class="n">String</span><span class="p">,</span><span class="w"> </span><span class="n">List</span><span class="o">&lt;</span><span class="n">JournalEntry</span><span class="o">&gt;&gt;</span><span class="w"> </span><span class="n">groups</span><span class="w"> </span><span class="o">=</span><span class="w"> </span><span class="n">entries</span><span class="p">.</span><span class="na">stream</span><span class="p">()</span>
<span class="w">            </span><span class="p">.</span><span class="na">collect</span><span class="p">(</span><span class="n">Collectors</span><span class="p">.</span><span class="na">groupingBy</span><span class="p">(</span><span class="k">this</span><span class="p">::</span><span class="n">createDuplicateKey</span><span class="p">));</span>

<span class="w">        </span><span class="c1">// 重複グループのみを抽出</span>
<span class="w">        </span><span class="k">return</span><span class="w"> </span><span class="n">groups</span><span class="p">.</span><span class="na">entrySet</span><span class="p">().</span><span class="na">stream</span><span class="p">()</span>
<span class="w">            </span><span class="p">.</span><span class="na">filter</span><span class="p">(</span><span class="n">e</span><span class="w"> </span><span class="o">-&gt;</span><span class="w"> </span><span class="n">e</span><span class="p">.</span><span class="na">getValue</span><span class="p">().</span><span class="na">size</span><span class="p">()</span><span class="w"> </span><span class="o">&gt;</span><span class="w"> </span><span class="mi">1</span><span class="p">)</span>
<span class="w">            </span><span class="p">.</span><span class="na">map</span><span class="p">(</span><span class="n">e</span><span class="w"> </span><span class="o">-&gt;</span><span class="w"> </span><span class="k">new</span><span class="w"> </span><span class="n">DuplicateGroup</span><span class="p">(</span><span class="n">e</span><span class="p">.</span><span class="na">getValue</span><span class="p">()))</span>
<span class="w">            </span><span class="p">.</span><span class="na">collect</span><span class="p">(</span><span class="n">Collectors</span><span class="p">.</span><span class="na">toList</span><span class="p">());</span>
<span class="w">    </span><span class="p">}</span>

<span class="w">    </span><span class="kd">private</span><span class="w"> </span><span class="n">String</span><span class="w"> </span><span class="nf">createDuplicateKey</span><span class="p">(</span><span class="n">JournalEntry</span><span class="w"> </span><span class="n">entry</span><span class="p">)</span><span class="w"> </span><span class="p">{</span>
<span class="w">        </span><span class="k">return</span><span class="w"> </span><span class="n">entry</span><span class="p">.</span><span class="na">getJournalDate</span><span class="p">().</span><span class="na">getValue</span><span class="p">().</span><span class="na">toString</span><span class="p">()</span><span class="w"> </span><span class="o">+</span><span class="w"> </span><span class="s">&quot;-&quot;</span><span class="w"> </span><span class="o">+</span>
<span class="w">               </span><span class="n">entry</span><span class="p">.</span><span class="na">getTotalDebit</span><span class="p">().</span><span class="na">toString</span><span class="p">()</span><span class="w"> </span><span class="o">+</span><span class="w"> </span><span class="s">&quot;-&quot;</span><span class="w"> </span><span class="o">+</span>
<span class="w">               </span><span class="n">entry</span><span class="p">.</span><span class="na">getLines</span><span class="p">().</span><span class="na">stream</span><span class="p">()</span>
<span class="w">                   </span><span class="p">.</span><span class="na">map</span><span class="p">(</span><span class="n">l</span><span class="w"> </span><span class="o">-&gt;</span><span class="w"> </span><span class="n">l</span><span class="p">.</span><span class="na">getAccountCode</span><span class="p">())</span>
<span class="w">                   </span><span class="p">.</span><span class="na">sorted</span><span class="p">()</span>
<span class="w">                   </span><span class="p">.</span><span class="na">collect</span><span class="p">(</span><span class="n">Collectors</span><span class="p">.</span><span class="na">joining</span><span class="p">(</span><span class="s">&quot;,&quot;</span><span class="p">));</span>
<span class="w">    </span><span class="p">}</span>

<span class="w">    </span><span class="cm">/**</span>
<span class="cm">     * 月次締め処理の検証</span>
<span class="cm">     */</span>
<span class="w">    </span><span class="kd">public</span><span class="w"> </span><span class="n">MonthlyCloseValidationResult</span><span class="w"> </span><span class="nf">validateMonthlyClose</span><span class="p">(</span>
<span class="w">            </span><span class="kt">int</span><span class="w"> </span><span class="n">year</span><span class="p">,</span><span class="w"> </span><span class="kt">int</span><span class="w"> </span><span class="n">month</span><span class="p">)</span><span class="w"> </span><span class="p">{</span>
<span class="w">        </span><span class="n">List</span><span class="o">&lt;</span><span class="n">String</span><span class="o">&gt;</span><span class="w"> </span><span class="n">errors</span><span class="w"> </span><span class="o">=</span><span class="w"> </span><span class="k">new</span><span class="w"> </span><span class="n">ArrayList</span><span class="o">&lt;&gt;</span><span class="p">();</span>
<span class="w">        </span><span class="n">List</span><span class="o">&lt;</span><span class="n">String</span><span class="o">&gt;</span><span class="w"> </span><span class="n">warnings</span><span class="w"> </span><span class="o">=</span><span class="w"> </span><span class="k">new</span><span class="w"> </span><span class="n">ArrayList</span><span class="o">&lt;&gt;</span><span class="p">();</span>

<span class="w">        </span><span class="c1">// 未承認仕訳のチェック</span>
<span class="w">        </span><span class="c1">// 貸借不一致のチェック</span>
<span class="w">        </span><span class="c1">// 勘定科目残高の検証</span>
<span class="w">        </span><span class="c1">// etc.</span>

<span class="w">        </span><span class="k">return</span><span class="w"> </span><span class="k">new</span><span class="w"> </span><span class="n">MonthlyCloseValidationResult</span><span class="p">(</span><span class="n">errors</span><span class="p">,</span><span class="w"> </span><span class="n">warnings</span><span class="p">);</span>
<span class="w">    </span><span class="p">}</span>
<span class="p">}</span>

<span class="cm">/**</span>
<span class="cm"> * 仕訳検証ルールのインターフェース</span>
<span class="cm"> */</span>
<span class="kd">interface</span> <span class="nc">JournalValidationRule</span><span class="w"> </span><span class="p">{</span>
<span class="w">    </span><span class="kt">boolean</span><span class="w"> </span><span class="nf">isSatisfiedBy</span><span class="p">(</span><span class="n">JournalEntry</span><span class="w"> </span><span class="n">entry</span><span class="p">);</span>
<span class="w">    </span><span class="n">String</span><span class="w"> </span><span class="nf">getErrorMessage</span><span class="p">();</span>
<span class="p">}</span>

<span class="cm">/**</span>
<span class="cm"> * 貸借バランスルール</span>
<span class="cm"> */</span>
<span class="kd">class</span> <span class="nc">BalanceRule</span><span class="w"> </span><span class="kd">implements</span><span class="w"> </span><span class="n">JournalValidationRule</span><span class="w"> </span><span class="p">{</span>
<span class="w">    </span><span class="nd">@Override</span>
<span class="w">    </span><span class="kd">public</span><span class="w"> </span><span class="kt">boolean</span><span class="w"> </span><span class="nf">isSatisfiedBy</span><span class="p">(</span><span class="n">JournalEntry</span><span class="w"> </span><span class="n">entry</span><span class="p">)</span><span class="w"> </span><span class="p">{</span>
<span class="w">        </span><span class="k">return</span><span class="w"> </span><span class="n">entry</span><span class="p">.</span><span class="na">isBalanced</span><span class="p">();</span>
<span class="w">    </span><span class="p">}</span>

<span class="w">    </span><span class="nd">@Override</span>
<span class="w">    </span><span class="kd">public</span><span class="w"> </span><span class="n">String</span><span class="w"> </span><span class="nf">getErrorMessage</span><span class="p">()</span><span class="w"> </span><span class="p">{</span>
<span class="w">        </span><span class="k">return</span><span class="w"> </span><span class="s">&quot;借方と貸方が一致しません&quot;</span><span class="p">;</span>
<span class="w">    </span><span class="p">}</span>
<span class="p">}</span>

<span class="cm">/**</span>
<span class="cm"> * 未来日ルール</span>
<span class="cm"> */</span>
<span class="kd">class</span> <span class="nc">FutureDateRule</span><span class="w"> </span><span class="kd">implements</span><span class="w"> </span><span class="n">JournalValidationRule</span><span class="w"> </span><span class="p">{</span>
<span class="w">    </span><span class="nd">@Override</span>
<span class="w">    </span><span class="kd">public</span><span class="w"> </span><span class="kt">boolean</span><span class="w"> </span><span class="nf">isSatisfiedBy</span><span class="p">(</span><span class="n">JournalEntry</span><span class="w"> </span><span class="n">entry</span><span class="p">)</span><span class="w"> </span><span class="p">{</span>
<span class="w">        </span><span class="k">return</span><span class="w"> </span><span class="o">!</span><span class="n">entry</span><span class="p">.</span><span class="na">getJournalDate</span><span class="p">().</span><span class="na">getValue</span><span class="p">().</span><span class="na">isAfter</span><span class="p">(</span><span class="n">LocalDate</span><span class="p">.</span><span class="na">now</span><span class="p">());</span>
<span class="w">    </span><span class="p">}</span>

<span class="w">    </span><span class="nd">@Override</span>
<span class="w">    </span><span class="kd">public</span><span class="w"> </span><span class="n">String</span><span class="w"> </span><span class="nf">getErrorMessage</span><span class="p">()</span><span class="w"> </span><span class="p">{</span>
<span class="w">        </span><span class="k">return</span><span class="w"> </span><span class="s">&quot;未来日の仕訳は登録できません&quot;</span><span class="p">;</span>
<span class="w">    </span><span class="p">}</span>
<span class="p">}</span>

<span class="cm">/**</span>
<span class="cm"> * 重複エントリルール</span>
<span class="cm"> */</span>
<span class="kd">class</span> <span class="nc">DuplicateEntryRule</span><span class="w"> </span><span class="kd">implements</span><span class="w"> </span><span class="n">JournalValidationRule</span><span class="w"> </span><span class="p">{</span>
<span class="w">    </span><span class="nd">@Override</span>
<span class="w">    </span><span class="kd">public</span><span class="w"> </span><span class="kt">boolean</span><span class="w"> </span><span class="nf">isSatisfiedBy</span><span class="p">(</span><span class="n">JournalEntry</span><span class="w"> </span><span class="n">entry</span><span class="p">)</span><span class="w"> </span><span class="p">{</span>
<span class="w">        </span><span class="c1">// 重複チェックロジック</span>
<span class="w">        </span><span class="k">return</span><span class="w"> </span><span class="kc">true</span><span class="p">;</span>
<span class="w">    </span><span class="p">}</span>

<span class="w">    </span><span class="nd">@Override</span>
<span class="w">    </span><span class="kd">public</span><span class="w"> </span><span class="n">String</span><span class="w"> </span><span class="nf">getErrorMessage</span><span class="p">()</span><span class="w"> </span><span class="p">{</span>
<span class="w">        </span><span class="k">return</span><span class="w"> </span><span class="s">&quot;重複する仕訳が存在します&quot;</span><span class="p">;</span>
<span class="w">    </span><span class="p">}</span>
<span class="p">}</span>
</code></pre></div>
<h3 id="_14">財務分析ドメインサービス<a class="headerlink" href="#_14" title="Permanent link">&para;</a></h3>
<div class="highlight"><pre><span></span><code><span class="kn">package</span><span class="w"> </span><span class="nn">com.example.accounting.domain.service</span><span class="p">;</span>

<span class="kn">import</span><span class="w"> </span><span class="nn">com.example.accounting.domain.model.financial.*</span><span class="p">;</span>
<span class="kn">import</span><span class="w"> </span><span class="nn">lombok.RequiredArgsConstructor</span><span class="p">;</span>
<span class="kn">import</span><span class="w"> </span><span class="nn">org.springframework.stereotype.Service</span><span class="p">;</span>

<span class="kn">import</span><span class="w"> </span><span class="nn">java.math.BigDecimal</span><span class="p">;</span>
<span class="kn">import</span><span class="w"> </span><span class="nn">java.util.List</span><span class="p">;</span>

<span class="cm">/**</span>
<span class="cm"> * 財務分析ドメインサービス</span>
<span class="cm"> */</span>
<span class="nd">@Service</span>
<span class="nd">@RequiredArgsConstructor</span>
<span class="kd">public</span><span class="w"> </span><span class="kd">class</span> <span class="nc">FinancialAnalysisDomainService</span><span class="w"> </span><span class="p">{</span>

<span class="w">    </span><span class="kd">private</span><span class="w"> </span><span class="kd">final</span><span class="w"> </span><span class="n">FinancialRatioAnalyzer</span><span class="w"> </span><span class="n">analyzer</span><span class="p">;</span>

<span class="w">    </span><span class="cm">/**</span>
<span class="cm">     * 複数期間の財務トレンドを分析</span>
<span class="cm">     */</span>
<span class="w">    </span><span class="kd">public</span><span class="w"> </span><span class="n">TrendAnalysis</span><span class="w"> </span><span class="nf">analyzeTrend</span><span class="p">(</span><span class="n">List</span><span class="o">&lt;</span><span class="n">FinancialData</span><span class="o">&gt;</span><span class="w"> </span><span class="n">periodData</span><span class="p">)</span><span class="w"> </span><span class="p">{</span>
<span class="w">        </span><span class="k">if</span><span class="w"> </span><span class="p">(</span><span class="n">periodData</span><span class="p">.</span><span class="na">size</span><span class="p">()</span><span class="w"> </span><span class="o">&lt;</span><span class="w"> </span><span class="mi">2</span><span class="p">)</span><span class="w"> </span><span class="p">{</span>
<span class="w">            </span><span class="k">throw</span><span class="w"> </span><span class="k">new</span><span class="w"> </span><span class="n">IllegalArgumentException</span><span class="p">(</span>
<span class="w">                </span><span class="s">&quot;トレンド分析には2期間以上のデータが必要です&quot;</span>
<span class="w">            </span><span class="p">);</span>
<span class="w">        </span><span class="p">}</span>

<span class="w">        </span><span class="c1">// 各期間の分析結果を取得</span>
<span class="w">        </span><span class="n">List</span><span class="o">&lt;</span><span class="n">AnalysisResult</span><span class="o">&gt;</span><span class="w"> </span><span class="n">results</span><span class="w"> </span><span class="o">=</span><span class="w"> </span><span class="n">periodData</span><span class="p">.</span><span class="na">stream</span><span class="p">()</span>
<span class="w">            </span><span class="p">.</span><span class="na">map</span><span class="p">(</span><span class="n">analyzer</span><span class="p">::</span><span class="n">analyze</span><span class="p">)</span>
<span class="w">            </span><span class="p">.</span><span class="na">toList</span><span class="p">();</span>

<span class="w">        </span><span class="c1">// トレンドを計算</span>
<span class="w">        </span><span class="k">return</span><span class="w"> </span><span class="n">calculateTrend</span><span class="p">(</span><span class="n">results</span><span class="p">);</span>
<span class="w">    </span><span class="p">}</span>

<span class="w">    </span><span class="kd">private</span><span class="w"> </span><span class="n">TrendAnalysis</span><span class="w"> </span><span class="nf">calculateTrend</span><span class="p">(</span><span class="n">List</span><span class="o">&lt;</span><span class="n">AnalysisResult</span><span class="o">&gt;</span><span class="w"> </span><span class="n">results</span><span class="p">)</span><span class="w"> </span><span class="p">{</span>
<span class="w">        </span><span class="n">AnalysisResult</span><span class="w"> </span><span class="n">first</span><span class="w"> </span><span class="o">=</span><span class="w"> </span><span class="n">results</span><span class="p">.</span><span class="na">get</span><span class="p">(</span><span class="mi">0</span><span class="p">);</span>
<span class="w">        </span><span class="n">AnalysisResult</span><span class="w"> </span><span class="n">last</span><span class="w"> </span><span class="o">=</span><span class="w"> </span><span class="n">results</span><span class="p">.</span><span class="na">get</span><span class="p">(</span><span class="n">results</span><span class="p">.</span><span class="na">size</span><span class="p">()</span><span class="w"> </span><span class="o">-</span><span class="w"> </span><span class="mi">1</span><span class="p">);</span>

<span class="w">        </span><span class="c1">// 各指標の変化率を計算</span>
<span class="w">        </span><span class="n">BigDecimal</span><span class="w"> </span><span class="n">profitabilityChange</span><span class="w"> </span><span class="o">=</span><span class="w"> </span><span class="n">calculateChange</span><span class="p">(</span>
<span class="w">            </span><span class="n">first</span><span class="p">.</span><span class="na">profitability</span><span class="p">().</span><span class="na">operatingProfitMargin</span><span class="p">(),</span>
<span class="w">            </span><span class="n">last</span><span class="p">.</span><span class="na">profitability</span><span class="p">().</span><span class="na">operatingProfitMargin</span><span class="p">()</span>
<span class="w">        </span><span class="p">);</span>

<span class="w">        </span><span class="n">BigDecimal</span><span class="w"> </span><span class="n">efficiencyChange</span><span class="w"> </span><span class="o">=</span><span class="w"> </span><span class="n">calculateChange</span><span class="p">(</span>
<span class="w">            </span><span class="n">first</span><span class="p">.</span><span class="na">efficiency</span><span class="p">().</span><span class="na">totalAssetTurnover</span><span class="p">(),</span>
<span class="w">            </span><span class="n">last</span><span class="p">.</span><span class="na">efficiency</span><span class="p">().</span><span class="na">totalAssetTurnover</span><span class="p">()</span>
<span class="w">        </span><span class="p">);</span>

<span class="w">        </span><span class="n">BigDecimal</span><span class="w"> </span><span class="n">safetyChange</span><span class="w"> </span><span class="o">=</span><span class="w"> </span><span class="n">calculateChange</span><span class="p">(</span>
<span class="w">            </span><span class="n">first</span><span class="p">.</span><span class="na">safety</span><span class="p">().</span><span class="na">equityRatio</span><span class="p">(),</span>
<span class="w">            </span><span class="n">last</span><span class="p">.</span><span class="na">safety</span><span class="p">().</span><span class="na">equityRatio</span><span class="p">()</span>
<span class="w">        </span><span class="p">);</span>

<span class="w">        </span><span class="c1">// トレンド判定</span>
<span class="w">        </span><span class="n">TrendDirection</span><span class="w"> </span><span class="n">profitabilityTrend</span><span class="w"> </span><span class="o">=</span>
<span class="w">            </span><span class="n">determineTrend</span><span class="p">(</span><span class="n">profitabilityChange</span><span class="p">);</span>
<span class="w">        </span><span class="n">TrendDirection</span><span class="w"> </span><span class="n">efficiencyTrend</span><span class="w"> </span><span class="o">=</span>
<span class="w">            </span><span class="n">determineTrend</span><span class="p">(</span><span class="n">efficiencyChange</span><span class="p">);</span>
<span class="w">        </span><span class="n">TrendDirection</span><span class="w"> </span><span class="n">safetyTrend</span><span class="w"> </span><span class="o">=</span>
<span class="w">            </span><span class="n">determineTrend</span><span class="p">(</span><span class="n">safetyChange</span><span class="p">);</span>

<span class="w">        </span><span class="k">return</span><span class="w"> </span><span class="k">new</span><span class="w"> </span><span class="n">TrendAnalysis</span><span class="p">(</span>
<span class="w">            </span><span class="n">results</span><span class="p">,</span>
<span class="w">            </span><span class="n">profitabilityTrend</span><span class="p">,</span>
<span class="w">            </span><span class="n">efficiencyTrend</span><span class="p">,</span>
<span class="w">            </span><span class="n">safetyTrend</span><span class="p">,</span>
<span class="w">            </span><span class="n">profitabilityChange</span><span class="p">,</span>
<span class="w">            </span><span class="n">efficiencyChange</span><span class="p">,</span>
<span class="w">            </span><span class="n">safetyChange</span>
<span class="w">        </span><span class="p">);</span>
<span class="w">    </span><span class="p">}</span>

<span class="w">    </span><span class="kd">private</span><span class="w"> </span><span class="n">BigDecimal</span><span class="w"> </span><span class="nf">calculateChange</span><span class="p">(</span><span class="n">BigDecimal</span><span class="w"> </span><span class="n">start</span><span class="p">,</span><span class="w"> </span><span class="n">BigDecimal</span><span class="w"> </span><span class="n">end</span><span class="p">)</span><span class="w"> </span><span class="p">{</span>
<span class="w">        </span><span class="k">return</span><span class="w"> </span><span class="n">end</span><span class="p">.</span><span class="na">subtract</span><span class="p">(</span><span class="n">start</span><span class="p">);</span>
<span class="w">    </span><span class="p">}</span>

<span class="w">    </span><span class="kd">private</span><span class="w"> </span><span class="n">TrendDirection</span><span class="w"> </span><span class="nf">determineTrend</span><span class="p">(</span><span class="n">BigDecimal</span><span class="w"> </span><span class="n">change</span><span class="p">)</span><span class="w"> </span><span class="p">{</span>
<span class="w">        </span><span class="kt">int</span><span class="w"> </span><span class="n">comparison</span><span class="w"> </span><span class="o">=</span><span class="w"> </span><span class="n">change</span><span class="p">.</span><span class="na">compareTo</span><span class="p">(</span><span class="n">BigDecimal</span><span class="p">.</span><span class="na">ZERO</span><span class="p">);</span>
<span class="w">        </span><span class="k">if</span><span class="w"> </span><span class="p">(</span><span class="n">comparison</span><span class="w"> </span><span class="o">&gt;</span><span class="w"> </span><span class="mi">0</span><span class="p">)</span><span class="w"> </span><span class="p">{</span>
<span class="w">            </span><span class="k">return</span><span class="w"> </span><span class="n">TrendDirection</span><span class="p">.</span><span class="na">IMPROVING</span><span class="p">;</span>
<span class="w">        </span><span class="p">}</span><span class="w"> </span><span class="k">else</span><span class="w"> </span><span class="k">if</span><span class="w"> </span><span class="p">(</span><span class="n">comparison</span><span class="w"> </span><span class="o">&lt;</span><span class="w"> </span><span class="mi">0</span><span class="p">)</span><span class="w"> </span><span class="p">{</span>
<span class="w">            </span><span class="k">return</span><span class="w"> </span><span class="n">TrendDirection</span><span class="p">.</span><span class="na">DECLINING</span><span class="p">;</span>
<span class="w">        </span><span class="p">}</span><span class="w"> </span><span class="k">else</span><span class="w"> </span><span class="p">{</span>
<span class="w">            </span><span class="k">return</span><span class="w"> </span><span class="n">TrendDirection</span><span class="p">.</span><span class="na">STABLE</span><span class="p">;</span>
<span class="w">        </span><span class="p">}</span>
<span class="w">    </span><span class="p">}</span>

<span class="w">    </span><span class="cm">/**</span>
<span class="cm">     * 業界平均との比較分析</span>
<span class="cm">     */</span>
<span class="w">    </span><span class="kd">public</span><span class="w"> </span><span class="n">BenchmarkComparison</span><span class="w"> </span><span class="nf">compareWithIndustry</span><span class="p">(</span>
<span class="w">            </span><span class="n">FinancialData</span><span class="w"> </span><span class="n">companyData</span><span class="p">,</span>
<span class="w">            </span><span class="n">FinancialData</span><span class="w"> </span><span class="n">industryAverage</span>
<span class="w">    </span><span class="p">)</span><span class="w"> </span><span class="p">{</span>
<span class="w">        </span><span class="n">AnalysisResult</span><span class="w"> </span><span class="n">companyResult</span><span class="w"> </span><span class="o">=</span><span class="w"> </span><span class="n">analyzer</span><span class="p">.</span><span class="na">analyze</span><span class="p">(</span><span class="n">companyData</span><span class="p">);</span>
<span class="w">        </span><span class="n">AnalysisResult</span><span class="w"> </span><span class="n">industryResult</span><span class="w"> </span><span class="o">=</span><span class="w"> </span><span class="n">analyzer</span><span class="p">.</span><span class="na">analyze</span><span class="p">(</span><span class="n">industryAverage</span><span class="p">);</span>

<span class="w">        </span><span class="k">return</span><span class="w"> </span><span class="k">new</span><span class="w"> </span><span class="n">BenchmarkComparison</span><span class="p">(</span>
<span class="w">            </span><span class="n">companyResult</span><span class="p">,</span>
<span class="w">            </span><span class="n">industryResult</span><span class="p">,</span>
<span class="w">            </span><span class="n">calculateDifferences</span><span class="p">(</span><span class="n">companyResult</span><span class="p">,</span><span class="w"> </span><span class="n">industryResult</span><span class="p">)</span>
<span class="w">        </span><span class="p">);</span>
<span class="w">    </span><span class="p">}</span>

<span class="w">    </span><span class="kd">private</span><span class="w"> </span><span class="n">Differences</span><span class="w"> </span><span class="nf">calculateDifferences</span><span class="p">(</span>
<span class="w">            </span><span class="n">AnalysisResult</span><span class="w"> </span><span class="n">company</span><span class="p">,</span>
<span class="w">            </span><span class="n">AnalysisResult</span><span class="w"> </span><span class="n">industry</span>
<span class="w">    </span><span class="p">)</span><span class="w"> </span><span class="p">{</span>
<span class="w">        </span><span class="k">return</span><span class="w"> </span><span class="k">new</span><span class="w"> </span><span class="n">Differences</span><span class="p">(</span>
<span class="w">            </span><span class="n">company</span><span class="p">.</span><span class="na">profitability</span><span class="p">().</span><span class="na">operatingProfitMargin</span><span class="p">()</span>
<span class="w">                </span><span class="p">.</span><span class="na">subtract</span><span class="p">(</span><span class="n">industry</span><span class="p">.</span><span class="na">profitability</span><span class="p">().</span><span class="na">operatingProfitMargin</span><span class="p">()),</span>
<span class="w">            </span><span class="n">company</span><span class="p">.</span><span class="na">efficiency</span><span class="p">().</span><span class="na">totalAssetTurnover</span><span class="p">()</span>
<span class="w">                </span><span class="p">.</span><span class="na">subtract</span><span class="p">(</span><span class="n">industry</span><span class="p">.</span><span class="na">efficiency</span><span class="p">().</span><span class="na">totalAssetTurnover</span><span class="p">()),</span>
<span class="w">            </span><span class="n">company</span><span class="p">.</span><span class="na">safety</span><span class="p">().</span><span class="na">equityRatio</span><span class="p">()</span>
<span class="w">                </span><span class="p">.</span><span class="na">subtract</span><span class="p">(</span><span class="n">industry</span><span class="p">.</span><span class="na">safety</span><span class="p">().</span><span class="na">equityRatio</span><span class="p">())</span>
<span class="w">        </span><span class="p">);</span>
<span class="w">    </span><span class="p">}</span>
<span class="p">}</span>

<span class="kd">enum</span><span class="w"> </span><span class="n">TrendDirection</span><span class="w"> </span><span class="p">{</span>
<span class="w">    </span><span class="n">IMPROVING</span><span class="p">(</span><span class="s">&quot;改善&quot;</span><span class="p">),</span>
<span class="w">    </span><span class="n">STABLE</span><span class="p">(</span><span class="s">&quot;横ばい&quot;</span><span class="p">),</span>
<span class="w">    </span><span class="n">DECLINING</span><span class="p">(</span><span class="s">&quot;悪化&quot;</span><span class="p">);</span>

<span class="w">    </span><span class="kd">private</span><span class="w"> </span><span class="kd">final</span><span class="w"> </span><span class="n">String</span><span class="w"> </span><span class="n">displayName</span><span class="p">;</span>

<span class="w">    </span><span class="n">TrendDirection</span><span class="p">(</span><span class="n">String</span><span class="w"> </span><span class="n">displayName</span><span class="p">)</span><span class="w"> </span><span class="p">{</span>
<span class="w">        </span><span class="k">this</span><span class="p">.</span><span class="na">displayName</span><span class="w"> </span><span class="o">=</span><span class="w"> </span><span class="n">displayName</span><span class="p">;</span>
<span class="w">    </span><span class="p">}</span>

<span class="w">    </span><span class="kd">public</span><span class="w"> </span><span class="n">String</span><span class="w"> </span><span class="nf">getDisplayName</span><span class="p">()</span><span class="w"> </span><span class="p">{</span>
<span class="w">        </span><span class="k">return</span><span class="w"> </span><span class="n">displayName</span><span class="p">;</span>
<span class="w">    </span><span class="p">}</span>
<span class="p">}</span>
</code></pre></div>
<h3 id="_15">エンティティとドメインサービスの使い分け<a class="headerlink" href="#_15" title="Permanent link">&para;</a></h3>
<p><img src="data:image/svg+xml;base64,PHN2ZyB4bWxucz0iaHR0cDovL3d3dy53My5vcmcvMjAwMC9zdmciIHhtbG5zOnhsaW5rPSJodHRwOi8vd3d3LnczLm9yZy8xOTk5L3hsaW5rIiBjb250ZW50U3R5bGVUeXBlPSJ0ZXh0L2NzcyIgZGF0YS1kaWFncmFtLXR5cGU9IkRFU0NSSVBUSU9OIiBoZWlnaHQ9IjE4MXB4IiBwcmVzZXJ2ZUFzcGVjdFJhdGlvPSJub25lIiBzdHlsZT0id2lkdGg6OTc1cHg7aGVpZ2h0OjE4MXB4O2JhY2tncm91bmQ6I0ZGRkZGRjsiIHZlcnNpb249IjEuMSIgdmlld0JveD0iMCAwIDk3NSAxODEiIHdpZHRoPSI5NzVweCIgem9vbUFuZFBhbj0ibWFnbmlmeSI+PHRpdGxlPiYjMTI0NTY7JiMxMjUzMTsmIzEyNDg2OyYjMTI0NTE7JiMxMjQ4NjsmIzEyNDUxOyB2cyAmIzEyNDg5OyYjMTI1MTM7JiMxMjQ1MjsmIzEyNTMxOyYjMTI0Njk7JiMxMjU0MDsmIzEyNDk5OyYjMTI0NzM7PC90aXRsZT48ZGVmcy8+PGc+PGcgY2xhc3M9InRpdGxlIiBkYXRhLXNvdXJjZS1saW5lPSIxIj48dGV4dCBmaWxsPSIjMDAwMDAwIiBmb250LWZhbWlseT0ic2Fucy1zZXJpZiIgZm9udC1zaXplPSIxNCIgZm9udC13ZWlnaHQ9ImJvbGQiIGxlbmd0aEFkanVzdD0ic3BhY2luZyIgdGV4dExlbmd0aD0iMjIzLjIwNjIiIHg9IjM2OC45MiIgeT0iMjIuOTk1MSI+JiMxMjQ1NjsmIzEyNTMxOyYjMTI0ODY7JiMxMjQ1MTsmIzEyNDg2OyYjMTI0NTE7IHZzICYjMTI0ODk7JiMxMjUxMzsmIzEyNDUyOyYjMTI1MzE7JiMxMjQ2OTsmIzEyNTQwOyYjMTI0OTk7JiMxMjQ3Mzs8L3RleHQ+PC9nPjwhLS1lbnRpdHkgZW50aXR5LS0+PGcgY2xhc3M9ImVudGl0eSIgZGF0YS1lbnRpdHk9ImVudGl0eSIgZGF0YS1zb3VyY2UtbGluZT0iMyIgZGF0YS11aWQ9ImVudDAwMDIiIGlkPSJlbnRpdHlfZW50aXR5Ij48cmVjdCBmaWxsPSIjQUREOEU2IiBoZWlnaHQ9IjM2LjI5NjkiIHJ4PSIyLjUiIHJ5PSIyLjUiIHN0eWxlPSJzdHJva2U6IzE4MTgxODtzdHJva2Utd2lkdGg6MC41OyIgd2lkdGg9IjE0NS45OTk1IiB4PSI3IiB5PSI5MC42NzY5Ii8+PHRleHQgZmlsbD0iIzAwMDAwMCIgZm9udC1mYW1pbHk9InNhbnMtc2VyaWYiIGZvbnQtc2l6ZT0iMTQiIGxlbmd0aEFkanVzdD0ic3BhY2luZyIgdGV4dExlbmd0aD0iMTI1Ljk5OTUiIHg9IjE3IiB5PSIxMTMuNjcyIj4mIzEyNDU2OyYjMTI1MzE7JiMxMjQ4NjsmIzEyNDUxOyYjMTI0ODY7JiMxMjQ1MTsmIzEyMzk1OyYjMzcxOTc7JiMzMjYyMjs8L3RleHQ+PC9nPjxnIGNsYXNzPSJlbnRpdHkiIGRhdGEtZW50aXR5PSJHTU4zIiBkYXRhLXNvdXJjZS1saW5lPSI1IiBkYXRhLXVpZD0iZW50MDAwNCIgaWQ9ImVudGl0eV9HTU4zIj48cGF0aCBkPSJNMTg3LjgyLDQzLjI5NjkgTDE4Ny44MiwxMDQuODI2OSBMMTUzLjI3LDEwOC44MjY5IEwxODcuODIsMTEyLjgyNjkgTDE4Ny44MiwxNzQuMzU5NCBBMCwwIDAgMCAwIDE4Ny44MiwxNzQuMzU5NCBMMzgyLjE4MDgsMTc0LjM1OTQgQTAsMCAwIDAgMCAzODIuMTgwOCwxNzQuMzU5NCBMMzgyLjE4MDgsNTMuMjk2OSBMMzcyLjE4MDgsNDMuMjk2OSBMMTg3LjgyLDQzLjI5NjkgQTAsMCAwIDAgMCAxODcuODIsNDMuMjk2OSIgZmlsbD0iI0ZFRkZERCIgc3R5bGU9InN0cm9rZTojMTgxODE4O3N0cm9rZS13aWR0aDowLjU7Ii8+PHBhdGggZD0iTTM3Mi4xODA4LDQzLjI5NjkgTDM3Mi4xODA4LDUzLjI5NjkgTDM4Mi4xODA4LDUzLjI5NjkgTDM3Mi4xODA4LDQzLjI5NjkiIGZpbGw9IiNGRUZGREQiIHN0eWxlPSJzdHJva2U6IzE4MTgxODtzdHJva2Utd2lkdGg6MC41OyIvPjx0ZXh0IGZpbGw9IiMwMDAwMDAiIGZvbnQtZmFtaWx5PSJzYW5zLXNlcmlmIiBmb250LXNpemU9IjEzIiBsZW5ndGhBZGp1c3Q9InNwYWNpbmciIHRleHRMZW5ndGg9IjE1MS44MjM0IiB4PSIxOTMuODIiIHk9IjYwLjM2MzgiPi0gJiMyMTMzNjsmIzE5OTY4OyYjMTI0NTY7JiMxMjUzMTsmIzEyNDg2OyYjMTI0NTE7JiMxMjQ4NjsmIzEyNDUxOyYjMTIzOTg7JiMyNTgwNTsmIzIwMzE2OzwvdGV4dD48dGV4dCBmaWxsPSIjMDAwMDAwIiBmb250LWZhbWlseT0ic2Fucy1zZXJpZiIgZm9udC1zaXplPSIxMyIgbGVuZ3RoQWRqdXN0PSJzcGFjaW5nIiB0ZXh0TGVuZ3RoPSIxNTEuODIzNCIgeD0iMTkzLjgyIiB5PSI3NS40OTY2Ij4tICYjMzMyNTg7JiMzNjUyMzsmIzEyMzk4OyYjMjkzNjY7JiMyNDkwNzsmIzEyMzk1OyYjMjI1MjI7JiMxMjM4OTsmIzEyMzY3OyYjMzUzMzY7JiMzMTYzOTs8L3RleHQ+PHRleHQgZmlsbD0iIzAwMDAwMCIgZm9udC1mYW1pbHk9InNhbnMtc2VyaWYiIGZvbnQtc2l6ZT0iMTMiIGxlbmd0aEFkanVzdD0ic3BhY2luZyIgdGV4dExlbmd0aD0iMTM4LjgyMzQiIHg9IjE5My44MiIgeT0iOTAuNjI5NCI+LSAmIzMzMjU4OyYjMzY1MjM7JiMxMjM5ODsmIzI1OTcyOyYjMjE1MTI7JiMyNDYxNTsmIzEyNDgxOyYjMTI0NTU7JiMxMjQ4MzsmIzEyNDYzOzwvdGV4dD48dGV4dCBmaWxsPSIjMDAwMDAwIiBmb250LWZhbWlseT0ic2Fucy1zZXJpZiIgZm9udC1zaXplPSIxMyIgbGVuZ3RoQWRqdXN0PSJzcGFjaW5nIiB0ZXh0TGVuZ3RoPSI0LjEzMjMiIHg9IjE5My44MiIgeT0iMTA1Ljc2MjIiPiYjMTYwOzwvdGV4dD48dGV4dCBmaWxsPSIjMDAwMDAwIiBmb250LWZhbWlseT0ic2Fucy1zZXJpZiIgZm9udC1zaXplPSIxMyIgbGVuZ3RoQWRqdXN0PSJzcGFjaW5nIiB0ZXh0TGVuZ3RoPSIxNy4zNzk5IiB4PSIxOTMuODIiIHk9IjEyMC44OTUiPiYjMjAzNjM7OjwvdGV4dD48dGV4dCBmaWxsPSIjMDAwMDAwIiBmb250LWZhbWlseT0ic2Fucy1zZXJpZiIgZm9udC1zaXplPSIxMyIgbGVuZ3RoQWRqdXN0PSJzcGFjaW5nIiB0ZXh0TGVuZ3RoPSIxNzMuMzYwOCIgeD0iMTkzLjgyIiB5PSIxMzYuMDI3OCI+LSBKb3VybmFsRW50cnkuaXNCYWxhbmNlZCgpPC90ZXh0Pjx0ZXh0IGZpbGw9IiMwMDAwMDAiIGZvbnQtZmFtaWx5PSJzYW5zLXNlcmlmIiBmb250LXNpemU9IjEzIiBsZW5ndGhBZGp1c3Q9InNwYWNpbmciIHRleHRMZW5ndGg9IjE1Ni4zMzY0IiB4PSIxOTMuODIiIHk9IjE1MS4xNjA2Ij4tIEpvdXJuYWxFbnRyeS5hcHByb3ZlKCk8L3RleHQ+PHRleHQgZmlsbD0iIzAwMDAwMCIgZm9udC1mYW1pbHk9InNhbnMtc2VyaWYiIGZvbnQtc2l6ZT0iMTMiIGxlbmd0aEFkanVzdD0ic3BhY2luZyIgdGV4dExlbmd0aD0iOTAuNjY5OSIgeD0iMTkzLjgyIiB5PSIxNjYuMjkzNSI+LSBNb25leS5hZGQoKTwvdGV4dD48L2c+PCEtLWVudGl0eSBzZXJ2aWNlLS0+PGcgY2xhc3M9ImVudGl0eSIgZGF0YS1lbnRpdHk9InNlcnZpY2UiIGRhdGEtc291cmNlLWxpbmU9IjE1IiBkYXRhLXVpZD0iZW50MDAwNiIgaWQ9ImVudGl0eV9zZXJ2aWNlIj48cmVjdCBmaWxsPSIjOTBFRTkwIiBoZWlnaHQ9IjM2LjI5NjkiIHJ4PSIyLjUiIHJ5PSIyLjUiIHN0eWxlPSJzdHJva2U6IzE4MTgxODtzdHJva2Utd2lkdGg6MC41OyIgd2lkdGg9IjE3My45OTkzIiB4PSI0MTciIHk9IjkwLjY3NjkiLz48dGV4dCBmaWxsPSIjMDAwMDAwIiBmb250LWZhbWlseT0ic2Fucy1zZXJpZiIgZm9udC1zaXplPSIxNCIgbGVuZ3RoQWRqdXN0PSJzcGFjaW5nIiB0ZXh0TGVuZ3RoPSIxNTMuOTk5MyIgeD0iNDI3IiB5PSIxMTMuNjcyIj4mIzEyNDg5OyYjMTI1MTM7JiMxMjQ1MjsmIzEyNTMxOyYjMTI0Njk7JiMxMjU0MDsmIzEyNDk5OyYjMTI0NzM7JiMxMjM5NTsmIzM3MTk3OyYjMzI2MjI7PC90ZXh0PjwvZz48ZyBjbGFzcz0iZW50aXR5IiBkYXRhLWVudGl0eT0iR01ONyIgZGF0YS1zb3VyY2UtbGluZT0iMTciIGRhdGEtdWlkPSJlbnQwMDA4IiBpZD0iZW50aXR5X0dNTjciPjxwYXRoIGQ9Ik02MjUuOTUsNDMuMjk2OSBMNjI1Ljk1LDEwNC44MjY5IEw1OTEuMjcsMTA4LjgyNjkgTDYyNS45NSwxMTIuODI2OSBMNjI1Ljk1LDE3NC4zNTk0IEEwLDAgMCAwIDAgNjI1Ljk1LDE3NC4zNTk0IEw5NjguMDQ2MiwxNzQuMzU5NCBBMCwwIDAgMCAwIDk2OC4wNDYyLDE3NC4zNTk0IEw5NjguMDQ2Miw1My4yOTY5IEw5NTguMDQ2Miw0My4yOTY5IEw2MjUuOTUsNDMuMjk2OSBBMCwwIDAgMCAwIDYyNS45NSw0My4yOTY5IiBmaWxsPSIjRkVGRkREIiBzdHlsZT0ic3Ryb2tlOiMxODE4MTg7c3Ryb2tlLXdpZHRoOjAuNTsiLz48cGF0aCBkPSJNOTU4LjA0NjIsNDMuMjk2OSBMOTU4LjA0NjIsNTMuMjk2OSBMOTY4LjA0NjIsNTMuMjk2OSBMOTU4LjA0NjIsNDMuMjk2OSIgZmlsbD0iI0ZFRkZERCIgc3R5bGU9InN0cm9rZTojMTgxODE4O3N0cm9rZS13aWR0aDowLjU7Ii8+PHRleHQgZmlsbD0iIzAwMDAwMCIgZm9udC1mYW1pbHk9InNhbnMtc2VyaWYiIGZvbnQtc2l6ZT0iMTMiIGxlbmd0aEFkanVzdD0ic3BhY2luZyIgdGV4dExlbmd0aD0iMjAzLjgyMzUiIHg9IjYzMS45NSIgeT0iNjAuMzYzOCI+LSAmIzM1MDc5OyYjMjU5Njg7JiMxMjQ1NjsmIzEyNTMxOyYjMTI0ODY7JiMxMjQ1MTsmIzEyNDg2OyYjMTI0NTE7JiMxMjM5NTsmIzEyNDE0OyYjMTIzODM7JiMxMjM2NDsmIzEyNDI3OyYjMjU4MDU7JiMyMDMxNjs8L3RleHQ+PHRleHQgZmlsbD0iIzAwMDAwMCIgZm9udC1mYW1pbHk9InNhbnMtc2VyaWYiIGZvbnQtc2l6ZT0iMTMiIGxlbmd0aEFkanVzdD0ic3BhY2luZyIgdGV4dExlbmd0aD0iMTM4LjgyMzQiIHg9IjYzMS45NSIgeT0iNzUuNDk2NiI+LSAmIzIyODA2OyYjMzcwOTY7JiMyNDc3MzsmIzIyNTc3OyYjMTIzNjQ7JiMyNDUxNzsmIzM1MjAxOyYjMTIzOTQ7JiMzNTMzNjsmIzMxNjM5OzwvdGV4dD48dGV4dCBmaWxsPSIjMDAwMDAwIiBmb250LWZhbWlseT0ic2Fucy1zZXJpZiIgZm9udC1zaXplPSIxMyIgbGVuZ3RoQWRqdXN0PSJzcGFjaW5nIiB0ZXh0TGVuZ3RoPSIyMTYuODIzNSIgeD0iNjMxLjk1IiB5PSI5MC42Mjk0Ij4tICYjMzUwNzk7JiMyNTk2ODsmIzEyNDU2OyYjMTI1MzE7JiMxMjQ4NjsmIzEyNDUxOyYjMTI0ODY7JiMxMjQ1MTsmIzEyMzk4OyYjMjU5NzI7JiMyMTUxMjsmIzI0NjE1OyYjMTI0ODE7JiMxMjQ1NTsmIzEyNDgzOyYjMTI0NjM7PC90ZXh0Pjx0ZXh0IGZpbGw9IiMwMDAwMDAiIGZvbnQtZmFtaWx5PSJzYW5zLXNlcmlmIiBmb250LXNpemU9IjEzIiBsZW5ndGhBZGp1c3Q9InNwYWNpbmciIHRleHRMZW5ndGg9IjQuMTMyMyIgeD0iNjMxLjk1IiB5PSIxMDUuNzYyMiI+JiMxNjA7PC90ZXh0Pjx0ZXh0IGZpbGw9IiMwMDAwMDAiIGZvbnQtZmFtaWx5PSJzYW5zLXNlcmlmIiBmb250LXNpemU9IjEzIiBsZW5ndGhBZGp1c3Q9InNwYWNpbmciIHRleHRMZW5ndGg9IjE3LjM3OTkiIHg9IjYzMS45NSIgeT0iMTIwLjg5NSI+JiMyMDM2Mzs6PC90ZXh0Pjx0ZXh0IGZpbGw9IiMwMDAwMDAiIGZvbnQtZmFtaWx5PSJzYW5zLXNlcmlmIiBmb250LXNpemU9IjEzIiBsZW5ndGhBZGp1c3Q9InNwYWNpbmciIHRleHRMZW5ndGg9IjI0MC40OTM3IiB4PSI2MzEuOTUiIHk9IjEzNi4wMjc4Ij4tIEpvdXJuYWxEb21haW5TZXJ2aWNlLmNoZWNrUnVsZXMoKTwvdGV4dD48dGV4dCBmaWxsPSIjMDAwMDAwIiBmb250LWZhbWlseT0ic2Fucy1zZXJpZiIgZm9udC1zaXplPSIxMyIgbGVuZ3RoQWRqdXN0PSJzcGFjaW5nIiB0ZXh0TGVuZ3RoPSIyNjAuMTY1IiB4PSI2MzEuOTUiIHk9IjE1MS4xNjA2Ij4tIEpvdXJuYWxEb21haW5TZXJ2aWNlLmZpbmREdXBsaWNhdGVzKCk8L3RleHQ+PHRleHQgZmlsbD0iIzAwMDAwMCIgZm9udC1mYW1pbHk9InNhbnMtc2VyaWYiIGZvbnQtc2l6ZT0iMTMiIGxlbmd0aEFkanVzdD0ic3BhY2luZyIgdGV4dExlbmd0aD0iMzIxLjA5NjIiIHg9IjYzMS45NSIgeT0iMTY2LjI5MzUiPi0gRmluYW5jaWFsQW5hbHlzaXNEb21haW5TZXJ2aWNlLmFuYWx5emVUcmVuZCgpPC90ZXh0PjwvZz48IS0tU1JDPVtaUDNCSVdDbjU4UnR5bkgxRHhnbTMtM0VLWEw0RC1lQlg2Y3FtSjVKUFpBNWtaODl6TFFCR2djdzRBZk9qSVhLbkdpZ2paeEN3S29kUnM3NjVjdExXZmkzRVZ6dGFmb0ZLc3VIMUI4QXdYeEsxaVlwSmFLUDV1N1ExZEtBaVg5YnlYN0s2d1dZbzFWM1M4WjlDTGxNYXFFX0hxNVNqdEU1TGhxc1hCMkIyRUVLUHo3bUI1ckV5UlpiNE9GUGQyMGRFWTl4Z1BpUk95V2w3M01Wcl8td2hYT0syeXR3aU1SMnBRbG16TGZ0TVpqRkdJd2xOX0JCaG8zRUdVbzVyUXJNeFIyTjJLZUZfbHZNaTd1OUllM0tMTzZ5Q09uYzhwLWtpSGRSU25ZczlYYnRpWjdnbmg2NWNLY0k4d0NfQ3ZuRUV0UTZWMFBwRFlFd2F1bW1tZjhlTWdOVm5XMWJfS3ZTdWNJZUlSZklmWHIyczB5aE5JOVFmeDhQYjZ4X2owb1kwUThDT1hUYV9ha0hOcGJlZ3NnV1NseDlkT3h5enJudThLMVNWVmlQVUU3X1oyTmlMS3BQR2tVM0NKRDVwOUx2cG85a2h4Yi1QZWNvUEM5Qk16SjRsQ2pES1FQcktzbkRRM2hoS2hUXzBhVlREUkJlUUNhemdaeTBdLS0+PC9nPjwvc3ZnPg==" class="uml" alt="uml diagram" title="" /></p>
<hr />
<h2 id="235">23.5 リファクタリングのサイクル<a class="headerlink" href="#235" title="Permanent link">&para;</a></h2>
<h3 id="_16">継続的改善のプロセス<a class="headerlink" href="#_16" title="Permanent link">&para;</a></h3>
<p><img src="data:image/svg+xml;base64,PHN2ZyB4bWxucz0iaHR0cDovL3d3dy53My5vcmcvMjAwMC9zdmciIHhtbG5zOnhsaW5rPSJodHRwOi8vd3d3LnczLm9yZy8xOTk5L3hsaW5rIiBjb250ZW50U3R5bGVUeXBlPSJ0ZXh0L2NzcyIgZGF0YS1kaWFncmFtLXR5cGU9IkFDVElWSVRZIiBoZWlnaHQ9IjU0MHB4IiBwcmVzZXJ2ZUFzcGVjdFJhdGlvPSJub25lIiBzdHlsZT0id2lkdGg6NDI5cHg7aGVpZ2h0OjU0MHB4O2JhY2tncm91bmQ6I0ZGRkZGRjsiIHZlcnNpb249IjEuMSIgdmlld0JveD0iMCAwIDQyOSA1NDAiIHdpZHRoPSI0MjlweCIgem9vbUFuZFBhbj0ibWFnbmlmeSI+PHRpdGxlPiYjMTI1MjI7JiMxMjUwMTsmIzEyNDQ5OyYjMTI0NjM7JiMxMjQ3OTsmIzEyNTIyOyYjMTI1MzE7JiMxMjQ2NDsmIzEyMzk4OyYjMTI0Njk7JiMxMjQ1MjsmIzEyNDYzOyYjMTI1MjM7PC90aXRsZT48ZGVmcy8+PGc+PGcgY2xhc3M9InRpdGxlIiBkYXRhLXNvdXJjZS1saW5lPSIxIj48dGV4dCBmaWxsPSIjMDAwMDAwIiBmb250LWZhbWlseT0ic2Fucy1zZXJpZiIgZm9udC1zaXplPSIxNCIgZm9udC13ZWlnaHQ9ImJvbGQiIGxlbmd0aEFkanVzdD0ic3BhY2luZyIgdGV4dExlbmd0aD0iMTgxLjk5OTIiIHg9IjEyMi40MTI2IiB5PSIzMi45OTUxIj4mIzEyNTIyOyYjMTI1MDE7JiMxMjQ0OTsmIzEyNDYzOyYjMTI0Nzk7JiMxMjUyMjsmIzEyNTMxOyYjMTI0NjQ7JiMxMjM5ODsmIzEyNDY5OyYjMTI0NTI7JiMxMjQ2MzsmIzEyNTIzOzwvdGV4dD48L2c+PGVsbGlwc2UgY3g9IjExNi4wMDA2IiBjeT0iNTcuMjk2OSIgZmlsbD0iIzIyMjIyMiIgcng9IjEwIiByeT0iMTAiIHN0eWxlPSJzdHJva2U6IzIyMjIyMjtzdHJva2Utd2lkdGg6MTsiLz48cmVjdCBmaWxsPSIjRjFGMUYxIiBoZWlnaHQ9IjMzLjk2ODgiIHJ4PSIxMi41IiByeT0iMTIuNSIgc3R5bGU9InN0cm9rZTojMTgxODE4O3N0cm9rZS13aWR0aDowLjU7IiB3aWR0aD0iMTI4LjAwMDgiIHg9IjUyLjAwMDIiIHk9Ijg3LjI5NjkiLz48dGV4dCBmaWxsPSIjMDAwMDAwIiBmb250LWZhbWlseT0ic2Fucy1zZXJpZiIgZm9udC1zaXplPSIxMiIgbGVuZ3RoQWRqdXN0PSJzcGFjaW5nIiB0ZXh0TGVuZ3RoPSIxMDguMDAwOCIgeD0iNjIuMDAwMiIgeT0iMTA4LjQzNTUiPiYjMTI0ODY7JiMxMjQ3MzsmIzEyNDg4OyYjMTIzNjQ7JiMxMjM3NzsmIzEyNDA5OyYjMTIzOTA7JiMxMjQ5NzsmIzEyNDczOzwvdGV4dD48cGF0aCBkPSJNMjAwLjAwMSwxMzEuMjY1NiBMMjAwLjAwMSwxNzAuMDk3NyBMMTgwLjAwMSwxNzQuMDk3NyBMMjAwLjAwMSwxNzguMDk3NyBMMjAwLjAwMSwyMTYuOTI5NyBBMCwwIDAgMCAwIDIwMC4wMDEsMjE2LjkyOTcgTDM1OS44MjQ0LDIxNi45Mjk3IEEwLDAgMCAwIDAgMzU5LjgyNDQsMjE2LjkyOTcgTDM1OS44MjQ0LDE0MS4yNjU2IEwzNDkuODI0NCwxMzEuMjY1NiBMMjAwLjAwMSwxMzEuMjY1NiBBMCwwIDAgMCAwIDIwMC4wMDEsMTMxLjI2NTYiIGZpbGw9IiNGRUZGREQiIHN0eWxlPSJzdHJva2U6IzE4MTgxODtzdHJva2Utd2lkdGg6MC41OyIvPjxwYXRoIGQ9Ik0zNDkuODI0NCwxMzEuMjY1NiBMMzQ5LjgyNDQsMTQxLjI2NTYgTDM1OS44MjQ0LDE0MS4yNjU2IEwzNDkuODI0NCwxMzEuMjY1NiIgZmlsbD0iI0ZFRkZERCIgc3R5bGU9InN0cm9rZTojMTgxODE4O3N0cm9rZS13aWR0aDowLjU7Ii8+PHRleHQgZmlsbD0iIzAwMDAwMCIgZm9udC1mYW1pbHk9InNhbnMtc2VyaWYiIGZvbnQtc2l6ZT0iMTMiIGxlbmd0aEFkanVzdD0ic3BhY2luZyIgdGV4dExlbmd0aD0iODYuODIzMyIgeD0iMjA2LjAwMSIgeT0iMTQ4LjMzMjUiPi0gJiMzODI2MzsmIzEyMzU2OyYjMTI1MTM7JiMxMjQ3NzsmIzEyNDgzOyYjMTI0ODk7PC90ZXh0Pjx0ZXh0IGZpbGw9IiMwMDAwMDAiIGZvbnQtZmFtaWx5PSJzYW5zLXNlcmlmIiBmb250LXNpemU9IjEzIiBsZW5ndGhBZGp1c3Q9InNwYWNpbmciIHRleHRMZW5ndGg9IjczLjgyMzMiIHg9IjIwNi4wMDEiIHk9IjE2My40NjUzIj4tICYjMzczMjU7JiMzNTA3OTsmIzEyNDY3OyYjMTI1NDA7JiMxMjQ4OTs8L3RleHQ+PHRleHQgZmlsbD0iIzAwMDAwMCIgZm9udC1mYW1pbHk9InNhbnMtc2VyaWYiIGZvbnQtc2l6ZT0iMTMiIGxlbmd0aEFkanVzdD0ic3BhY2luZyIgdGV4dExlbmd0aD0iMTM4LjgyMzQiIHg9IjIwNi4wMDEiIHk9IjE3OC41OTgxIj4tICYjMTI1MDM7JiMxMjUyMjsmIzEyNTExOyYjMTI0ODY7JiMxMjQ1MTsmIzEyNTAyOyYjMjI0MTE7JiMxMjM5ODsmIzIyODEwOyYjMjk5OTI7PC90ZXh0Pjx0ZXh0IGZpbGw9IiMwMDAwMDAiIGZvbnQtZmFtaWx5PSJzYW5zLXNlcmlmIiBmb250LXNpemU9IjEzIiBsZW5ndGhBZGp1c3Q9InNwYWNpbmciIHRleHRMZW5ndGg9IjczLjgyMzMiIHg9IjIwNi4wMDEiIHk9IjE5My43MzEiPi0gJiMzNjAwNzsmIzM0ODgwOyYjMTI1MTQ7JiMxMjQ4NzsmIzEyNTIzOzwvdGV4dD48dGV4dCBmaWxsPSIjMDAwMDAwIiBmb250LWZhbWlseT0ic2Fucy1zZXJpZiIgZm9udC1zaXplPSIxMyIgbGVuZ3RoQWRqdXN0PSJzcGFjaW5nIiB0ZXh0TGVuZ3RoPSI5OS44MjMzIiB4PSIyMDYuMDAxIiB5PSIyMDguODYzOCI+LSAmIzM1MDc5OyYjMzg2MDk7JiMxMjM5NDsmIzI2NDY1OyYjMjAyMTQ7JiMyMDk5ODsmIzIzNjk2OzwvdGV4dD48cmVjdCBmaWxsPSIjRjFGMUYxIiBoZWlnaHQ9IjMzLjk2ODgiIHJ4PSIxMi41IiByeT0iMTIuNSIgc3R5bGU9InN0cm9rZTojMTgxODE4O3N0cm9rZS13aWR0aDowLjU7IiB3aWR0aD0iMTI4LjAwMDgiIHg9IjUyLjAwMDIiIHk9IjE1Ny4xMTMzIi8+PHRleHQgZmlsbD0iIzAwMDAwMCIgZm9udC1mYW1pbHk9InNhbnMtc2VyaWYiIGZvbnQtc2l6ZT0iMTIiIGxlbmd0aEFkanVzdD0ic3BhY2luZyIgdGV4dExlbmd0aD0iMTA4LjAwMDgiIHg9IjYyLjAwMDIiIHk9IjE3OC4yNTIiPiYjMTI0Njc7JiMxMjU0MDsmIzEyNDg5OyYjMTI0NzM7JiMxMjUxMzsmIzEyNTIzOyYjMTI0MzQ7JiMzMDMzMDsmIzM1MjExOzwvdGV4dD48cGF0aCBkPSJNMjA2LjAwMSwyMjYuOTI5NyBMMjA2LjAwMSwyNTguMTk1MyBMMTg2LjAwMSwyNjIuMTk1MyBMMjA2LjAwMSwyNjYuMTk1MyBMMjA2LjAwMSwyOTcuNDYwOSBBMCwwIDAgMCAwIDIwNi4wMDEsMjk3LjQ2MDkgTDQxNy44MjQ1LDI5Ny40NjA5IEEwLDAgMCAwIDAgNDE3LjgyNDUsMjk3LjQ2MDkgTDQxNy44MjQ1LDIzNi45Mjk3IEw0MDcuODI0NSwyMjYuOTI5NyBMMjA2LjAwMSwyMjYuOTI5NyBBMCwwIDAgMCAwIDIwNi4wMDEsMjI2LjkyOTciIGZpbGw9IiNGRUZGREQiIHN0eWxlPSJzdHJva2U6IzE4MTgxODtzdHJva2Utd2lkdGg6MC41OyIvPjxwYXRoIGQ9Ik00MDcuODI0NSwyMjYuOTI5NyBMNDA3LjgyNDUsMjM2LjkyOTcgTDQxNy44MjQ1LDIzNi45Mjk3IEw0MDcuODI0NSwyMjYuOTI5NyIgZmlsbD0iI0ZFRkZERCIgc3R5bGU9InN0cm9rZTojMTgxODE4O3N0cm9rZS13aWR0aDowLjU7Ii8+PHRleHQgZmlsbD0iIzAwMDAwMCIgZm9udC1mYW1pbHk9InNhbnMtc2VyaWYiIGZvbnQtc2l6ZT0iMTMiIGxlbmd0aEFkanVzdD0ic3BhY2luZyIgdGV4dExlbmd0aD0iODYuODIzMyIgeD0iMjEyLjAwMSIgeT0iMjQzLjk5NjYiPi0gJiMxMjUxMzsmIzEyNDc3OyYjMTI0ODM7JiMxMjQ4OTsmIzI1Mjc3OyYjMjA5ODY7PC90ZXh0Pjx0ZXh0IGZpbGw9IiMwMDAwMDAiIGZvbnQtZmFtaWx5PSJzYW5zLXNlcmlmIiBmb250LXNpemU9IjEzIiBsZW5ndGhBZGp1c3Q9InNwYWNpbmciIHRleHRMZW5ndGg9IjEyNS44MjM0IiB4PSIyMTIuMDAxIiB5PSIyNTkuMTI5NCI+LSAmIzIwNTE2OyYjMTI0NTg7JiMxMjUwMjsmIzEyNDcyOyYjMTI0NTU7JiMxMjQ2MzsmIzEyNDg4OyYjMjM1NjY7JiMyMDgzNzs8L3RleHQ+PHRleHQgZmlsbD0iIzAwMDAwMCIgZm9udC1mYW1pbHk9InNhbnMtc2VyaWYiIGZvbnQtc2l6ZT0iMTMiIGxlbmd0aEFkanVzdD0ic3BhY2luZyIgdGV4dExlbmd0aD0iOTkuODIzMyIgeD0iMjEyLjAwMSIgeT0iMjc0LjI2MjIiPi0gJiMxMjUyNTsmIzEyNDcyOyYjMTI0ODM7JiMxMjQ2MzsmIzEyMzk4OyYjMzEyMjc7JiMyMTIwNTs8L3RleHQ+PHRleHQgZmlsbD0iIzAwMDAwMCIgZm9udC1mYW1pbHk9InNhbnMtc2VyaWYiIGZvbnQtc2l6ZT0iMTMiIGxlbmd0aEFkanVzdD0ic3BhY2luZyIgdGV4dExlbmd0aD0iMTkwLjgyMzUiIHg9IjIxMi4wMDEiIHk9IjI4OS4zOTUiPi0gJiMyNjQ2NTsmIzIwMjE0OyYjMjA5OTg7JiMyMzY5NjsmIzEyMzk4OyYjMTI1MDk7JiMxMjUyMjsmIzEyNTE0OyYjMTI1NDA7JiMxMjUwMTsmIzEyNDUxOyYjMTI0NzQ7JiMxMjUxMjsmIzIxMjcwOzwvdGV4dD48cmVjdCBmaWxsPSIjRjFGMUYxIiBoZWlnaHQ9IjMzLjk2ODgiIHJ4PSIxMi41IiByeT0iMTIuNSIgc3R5bGU9InN0cm9rZTojMTgxODE4O3N0cm9rZS13aWR0aDowLjU7IiB3aWR0aD0iMTQwLjAwMDkiIHg9IjQ2LjAwMDEiIHk9IjI0NS4yMTA5Ii8+PHRleHQgZmlsbD0iIzAwMDAwMCIgZm9udC1mYW1pbHk9InNhbnMtc2VyaWYiIGZvbnQtc2l6ZT0iMTIiIGxlbmd0aEFkanVzdD0ic3BhY2luZyIgdGV4dExlbmd0aD0iMTIwLjAwMDkiIHg9IjU2LjAwMDEiIHk9IjI2Ni4zNDk2Ij4mIzEyNTIyOyYjMTI1MDE7JiMxMjQ0OTsmIzEyNDYzOyYjMTI0Nzk7JiMxMjUyMjsmIzEyNTMxOyYjMTI0NjQ7JiMyMzQ1NTsmIzM0ODkyOzwvdGV4dD48cmVjdCBmaWxsPSIjRjFGMUYxIiBoZWlnaHQ9IjMzLjk2ODgiIHJ4PSIxMi41IiByeT0iMTIuNSIgc3R5bGU9InN0cm9rZTojMTgxODE4O3N0cm9rZS13aWR0aDowLjU7IiB3aWR0aD0iODAuMDAwNSIgeD0iNzYuMDAwMyIgeT0iMzE3LjQ2MDkiLz48dGV4dCBmaWxsPSIjMDAwMDAwIiBmb250LWZhbWlseT0ic2Fucy1zZXJpZiIgZm9udC1zaXplPSIxMiIgbGVuZ3RoQWRqdXN0PSJzcGFjaW5nIiB0ZXh0TGVuZ3RoPSI2MC4wMDA1IiB4PSI4Ni4wMDAzIiB5PSIzMzguNTk5NiI+JiMxMjQ4NjsmIzEyNDczOyYjMTI0ODg7JiMyMzQ1NTsmIzM0ODkyOzwvdGV4dD48cG9seWdvbiBmaWxsPSIjRjFGMUYxIiBwb2ludHM9Ijg1LjU4MTYsMzcxLjQyOTcsMTQ2LjQxOTYsMzcxLjQyOTcsMTU4LjQxOTYsMzgzLjQyOTcsMTQ2LjQxOTYsMzk1LjQyOTcsODUuNTgxNiwzOTUuNDI5Nyw3My41ODE2LDM4My40Mjk3LDg1LjU4MTYsMzcxLjQyOTciIHN0eWxlPSJzdHJva2U6IzE4MTgxODtzdHJva2Utd2lkdGg6MC41OyIvPjx0ZXh0IGZpbGw9IiMwMDAwMDAiIGZvbnQtZmFtaWx5PSJzYW5zLXNlcmlmIiBmb250LXNpemU9IjExIiBsZW5ndGhBZGp1c3Q9InNwYWNpbmciIHRleHRMZW5ndGg9IjYwLjgzOCIgeD0iODUuNTgxNiIgeT0iMzg3LjIzNzgiPiYjMTI0ODY7JiMxMjQ3MzsmIzEyNDg4OyYjMjUxMDQ7JiMyMTE1MTs/PC90ZXh0Pjx0ZXh0IGZpbGw9IiMwMDAwMDAiIGZvbnQtZmFtaWx5PSJzYW5zLXNlcmlmIiBmb250LXNpemU9IjExIiBsZW5ndGhBZGp1c3Q9InNwYWNpbmciIHRleHRMZW5ndGg9IjE5LjAwODMiIHg9IjU0LjU3MzMiIHk9IjM4MC44MzU0Ij55ZXM8L3RleHQ+PHRleHQgZmlsbD0iIzAwMDAwMCIgZm9udC1mYW1pbHk9InNhbnMtc2VyaWYiIGZvbnQtc2l6ZT0iMTEiIGxlbmd0aEFkanVzdD0ic3BhY2luZyIgdGV4dExlbmd0aD0iMTMuNzAxNyIgeD0iMTU4LjQxOTYiIHk9IjM4MC44MzU0Ij5ubzwvdGV4dD48cmVjdCBmaWxsPSIjRjFGMUYxIiBoZWlnaHQ9IjMzLjk2ODgiIHJ4PSIxMi41IiByeT0iMTIuNSIgc3R5bGU9InN0cm9rZTojMTgxODE4O3N0cm9rZS13aWR0aDowLjU7IiB3aWR0aD0iNjguMDAwNCIgeD0iMTEiIHk9IjQwNS40Mjk3Ii8+PHRleHQgZmlsbD0iIzAwMDAwMCIgZm9udC1mYW1pbHk9InNhbnMtc2VyaWYiIGZvbnQtc2l6ZT0iMTIiIGxlbmd0aEFkanVzdD0ic3BhY2luZyIgdGV4dExlbmd0aD0iNDguMDAwNCIgeD0iMjEiIHk9IjQyNi41Njg0Ij4mIzEyNDY3OyYjMTI1MTE7JiMxMjQ4MzsmIzEyNDg4OzwvdGV4dD48cmVjdCBmaWxsPSIjRjFGMUYxIiBoZWlnaHQ9IjMzLjk2ODgiIHJ4PSIxMi41IiByeT0iMTIuNSIgc3R5bGU9InN0cm9rZTojMTgxODE4O3N0cm9rZS13aWR0aDowLjU7IiB3aWR0aD0iMTc2LjAwMTIiIHg9Ijk5LjAwMDQiIHk9IjQwNS40Mjk3Ii8+PHRleHQgZmlsbD0iIzAwMDAwMCIgZm9udC1mYW1pbHk9InNhbnMtc2VyaWYiIGZvbnQtc2l6ZT0iMTIiIGxlbmd0aEFkanVzdD0ic3BhY2luZyIgdGV4dExlbmd0aD0iMTU2LjAwMTIiIHg9IjEwOS4wMDA0IiB5PSI0MjYuNTY4NCI+JiMxMjUyMjsmIzEyNTAxOyYjMTI0NDk7JiMxMjQ2MzsmIzEyNDc5OyYjMTI1MjI7JiMxMjUzMTsmIzEyNDY0OyYjMTI0MzQ7JiMyMDgwMzsmIzEyMzk1OyYjMjUxNDc7JiMxMjM3Nzs8L3RleHQ+PHBvbHlnb24gZmlsbD0iI0YxRjFGMSIgcG9pbnRzPSIxMTYuMDAwNiw0NTEuMjk3NCwxMjguMDAwNiw0NjMuMjk3NCwxMTYuMDAwNiw0NzUuMjk3NCwxMDQuMDAwNiw0NjMuMjk3NCwxMTYuMDAwNiw0NTEuMjk3NCIgc3R5bGU9InN0cm9rZTojMTgxODE4O3N0cm9rZS13aWR0aDowLjU7Ii8+PHRleHQgZmlsbD0iIzAwMDAwMCIgZm9udC1mYW1pbHk9InNhbnMtc2VyaWYiIGZvbnQtc2l6ZT0iMTEiIGxlbmd0aEFkanVzdD0ic3BhY2luZyIgdGV4dExlbmd0aD0iOTguOTk5MyIgeD0iMTI4LjAwMDYiIHk9IjQ2MC43MDMxIj4mIzEyNDY3OyYjMTI1NDA7JiMxMjQ4OTsmIzEyNDczOyYjMTI1MTM7JiMxMjUyMzsmIzEyNDM0OyYjMzAzMzA7JiMzNTIxMTs8L3RleHQ+PHJlY3QgZmlsbD0iI0YxRjFGMSIgaGVpZ2h0PSIzMy45Njg4IiByeD0iMTIuNSIgcnk9IjEyLjUiIHN0eWxlPSJzdHJva2U6IzE4MTgxODtzdHJva2Utd2lkdGg6MC41OyIgd2lkdGg9IjExNi4wMDA3IiB4PSI1OC4wMDAyIiB5PSI0OTUuMjk3NCIvPjx0ZXh0IGZpbGw9IiMwMDAwMDAiIGZvbnQtZmFtaWx5PSJzYW5zLXNlcmlmIiBmb250LXNpemU9IjEyIiBsZW5ndGhBZGp1c3Q9InNwYWNpbmciIHRleHRMZW5ndGg9Ijk2LjAwMDciIHg9IjY4LjAwMDIiIHk9IjUxNi40MzYiPiYjMjc0MjU7JiMxMjM5ODsmIzEyNDczOyYjMTI1MTM7JiMxMjUyMzsmIzEyNDM0OyYjMjU1MDY7JiMxMjM3Nzs8L3RleHQ+PGxpbmUgc3R5bGU9InN0cm9rZTojMTgxODE4O3N0cm9rZS13aWR0aDoxOyIgeDE9IjExNi4wMDA2IiB4Mj0iMTE2LjAwMDYiIHkxPSI2Ny4yOTY5IiB5Mj0iODcuMjk2OSIvPjxwb2x5Z29uIGZpbGw9IiMxODE4MTgiIHBvaW50cz0iMTEyLjAwMDYsNzcuMjk2OSwxMTYuMDAwNiw4Ny4yOTY5LDEyMC4wMDA2LDc3LjI5NjksMTE2LjAwMDYsODEuMjk2OSIgc3R5bGU9InN0cm9rZTojMTgxODE4O3N0cm9rZS13aWR0aDoxOyIvPjxsaW5lIHN0eWxlPSJzdHJva2U6IzE4MTgxODtzdHJva2Utd2lkdGg6MTsiIHgxPSIxMTYuMDAwNiIgeDI9IjExNi4wMDA2IiB5MT0iMTIxLjI2NTYiIHkyPSIxNTcuMTEzMyIvPjxwb2x5Z29uIGZpbGw9IiMxODE4MTgiIHBvaW50cz0iMTEyLjAwMDYsMTQ3LjExMzMsMTE2LjAwMDYsMTU3LjExMzMsMTIwLjAwMDYsMTQ3LjExMzMsMTE2LjAwMDYsMTUxLjExMzMiIHN0eWxlPSJzdHJva2U6IzE4MTgxODtzdHJva2Utd2lkdGg6MTsiLz48bGluZSBzdHlsZT0ic3Ryb2tlOiMxODE4MTg7c3Ryb2tlLXdpZHRoOjE7IiB4MT0iMTE2LjAwMDYiIHgyPSIxMTYuMDAwNiIgeTE9IjE5MS4wODIiIHkyPSIyNDUuMjEwOSIvPjxwb2x5Z29uIGZpbGw9IiMxODE4MTgiIHBvaW50cz0iMTEyLjAwMDYsMjM1LjIxMDksMTE2LjAwMDYsMjQ1LjIxMDksMTIwLjAwMDYsMjM1LjIxMDksMTE2LjAwMDYsMjM5LjIxMDkiIHN0eWxlPSJzdHJva2U6IzE4MTgxODtzdHJva2Utd2lkdGg6MTsiLz48bGluZSBzdHlsZT0ic3Ryb2tlOiMxODE4MTg7c3Ryb2tlLXdpZHRoOjE7IiB4MT0iMTE2LjAwMDYiIHgyPSIxMTYuMDAwNiIgeTE9IjI3OS4xNzk3IiB5Mj0iMzE3LjQ2MDkiLz48cG9seWdvbiBmaWxsPSIjMTgxODE4IiBwb2ludHM9IjExMi4wMDA2LDMwNy40NjA5LDExNi4wMDA2LDMxNy40NjA5LDEyMC4wMDA2LDMwNy40NjA5LDExNi4wMDA2LDMxMS40NjA5IiBzdHlsZT0ic3Ryb2tlOiMxODE4MTg7c3Ryb2tlLXdpZHRoOjE7Ii8+PGxpbmUgc3R5bGU9InN0cm9rZTojMTgxODE4O3N0cm9rZS13aWR0aDoxOyIgeDE9IjczLjU4MTYiIHgyPSI0NS4wMDAyIiB5MT0iMzgzLjQyOTciIHkyPSIzODMuNDI5NyIvPjxsaW5lIHN0eWxlPSJzdHJva2U6IzE4MTgxODtzdHJva2Utd2lkdGg6MTsiIHgxPSI0NS4wMDAyIiB4Mj0iNDUuMDAwMiIgeTE9IjM4My40Mjk3IiB5Mj0iNDA1LjQyOTciLz48cG9seWdvbiBmaWxsPSIjMTgxODE4IiBwb2ludHM9IjQxLjAwMDIsMzk1LjQyOTcsNDUuMDAwMiw0MDUuNDI5Nyw0OS4wMDAyLDM5NS40Mjk3LDQ1LjAwMDIsMzk5LjQyOTciIHN0eWxlPSJzdHJva2U6IzE4MTgxODtzdHJva2Utd2lkdGg6MTsiLz48bGluZSBzdHlsZT0ic3Ryb2tlOiMxODE4MTg7c3Ryb2tlLXdpZHRoOjE7IiB4MT0iMTU4LjQxOTYiIHgyPSIxODcuMDAxIiB5MT0iMzgzLjQyOTciIHkyPSIzODMuNDI5NyIvPjxsaW5lIHN0eWxlPSJzdHJva2U6IzE4MTgxODtzdHJva2Utd2lkdGg6MTsiIHgxPSIxODcuMDAxIiB4Mj0iMTg3LjAwMSIgeTE9IjM4My40Mjk3IiB5Mj0iNDA1LjQyOTciLz48cG9seWdvbiBmaWxsPSIjMTgxODE4IiBwb2ludHM9IjE4My4wMDEsMzk1LjQyOTcsMTg3LjAwMSw0MDUuNDI5NywxOTEuMDAxLDM5NS40Mjk3LDE4Ny4wMDEsMzk5LjQyOTciIHN0eWxlPSJzdHJva2U6IzE4MTgxODtzdHJva2Utd2lkdGg6MTsiLz48bGluZSBzdHlsZT0ic3Ryb2tlOiMxODE4MTg7c3Ryb2tlLXdpZHRoOjE7IiB4MT0iNDUuMDAwMiIgeDI9IjQ1LjAwMDIiIHkxPSI0MzkuMzk4NCIgeTI9IjQ2My4yOTc0Ii8+PGxpbmUgc3R5bGU9InN0cm9rZTojMTgxODE4O3N0cm9rZS13aWR0aDoxOyIgeDE9IjQ1LjAwMDIiIHgyPSIxMDQuMDAwNiIgeTE9IjQ2My4yOTc0IiB5Mj0iNDYzLjI5NzQiLz48cG9seWdvbiBmaWxsPSIjMTgxODE4IiBwb2ludHM9Ijk0LjAwMDYsNDU5LjI5NzQsMTA0LjAwMDYsNDYzLjI5NzQsOTQuMDAwNiw0NjcuMjk3NCw5OC4wMDA2LDQ2My4yOTc0IiBzdHlsZT0ic3Ryb2tlOiMxODE4MTg7c3Ryb2tlLXdpZHRoOjE7Ii8+PGxpbmUgc3R5bGU9InN0cm9rZTojMTgxODE4O3N0cm9rZS13aWR0aDoxOyIgeDE9IjE4Ny4wMDEiIHgyPSIxODcuMDAxIiB5MT0iNDM5LjM5ODQiIHkyPSI0NjMuMjk3NCIvPjxsaW5lIHN0eWxlPSJzdHJva2U6IzE4MTgxODtzdHJva2Utd2lkdGg6MTsiIHgxPSIxODcuMDAxIiB4Mj0iMTI4LjAwMDYiIHkxPSI0NjMuMjk3NCIgeTI9IjQ2My4yOTc0Ii8+PHBvbHlnb24gZmlsbD0iIzE4MTgxOCIgcG9pbnRzPSIxMzguMDAwNiw0NTkuMjk3NCwxMjguMDAwNiw0NjMuMjk3NCwxMzguMDAwNiw0NjcuMjk3NCwxMzQuMDAwNiw0NjMuMjk3NCIgc3R5bGU9InN0cm9rZTojMTgxODE4O3N0cm9rZS13aWR0aDoxOyIvPjxsaW5lIHN0eWxlPSJzdHJva2U6IzE4MTgxODtzdHJva2Utd2lkdGg6MTsiIHgxPSIxMTYuMDAwNiIgeDI9IjExNi4wMDA2IiB5MT0iMzUxLjQyOTciIHkyPSIzNzEuNDI5NyIvPjxwb2x5Z29uIGZpbGw9IiMxODE4MTgiIHBvaW50cz0iMTEyLjAwMDYsMzYxLjQyOTcsMTE2LjAwMDYsMzcxLjQyOTcsMTIwLjAwMDYsMzYxLjQyOTcsMTE2LjAwMDYsMzY1LjQyOTciIHN0eWxlPSJzdHJva2U6IzE4MTgxODtzdHJva2Utd2lkdGg6MTsiLz48bGluZSBzdHlsZT0ic3Ryb2tlOiMxODE4MTg7c3Ryb2tlLXdpZHRoOjE7IiB4MT0iMTE2LjAwMDYiIHgyPSIxMTYuMDAwNiIgeTE9IjQ3NS4yOTc0IiB5Mj0iNDk1LjI5NzQiLz48cG9seWdvbiBmaWxsPSIjMTgxODE4IiBwb2ludHM9IjExMi4wMDA2LDQ4NS4yOTc0LDExNi4wMDA2LDQ5NS4yOTc0LDEyMC4wMDA2LDQ4NS4yOTc0LDExNi4wMDA2LDQ4OS4yOTc0IiBzdHlsZT0ic3Ryb2tlOiMxODE4MTg7c3Ryb2tlLXdpZHRoOjE7Ii8+PCEtLVNSQz1bWlBCREppOTA0Q1ZsLW5IeFg4Q2xPMUR6NVhFaEQyNHJhTHd5a0pqMkF3MTFPcDVnaTFRaDY1MGE2aHowdWlFQ00tZlJFQmxuRXo1dXhBX3B0X3REcDdnRUx4R3ZHWFNYSDFjWmw0SnZQM3dsS0d2R3o1N1VlNG1xWG52WjlNemtzTUZKMjFNSzNtVzFZWmdBRkhHRkE0dUhqV1hRWjd4QlF1SDdYN0xKNTVDSXZWUGFSdllUcllwY0JkYXNOdE9NMm53UnVZX1g3T2VyTklGNzI0MEgzVnNEQkY0XzNZNjJpNmtTOGRGbkNLOUo3VFA4SllOeGF2cXBBaVlrRWJjeVlqMTZ5QktlYVNIX0VUWDJxS3JSeVZGZUxXS0xUVExXalpsRmpPMk1fQUxkck8tb2tGeDN5d2pYTVhxaFZxWEdoVDlTQURMNFVPLW9Pc09LZ0M2Y0FmLU9vOE5jNTI0ay1mRkVJREwydWJ6eno3b1hQUXZrY3NQM3RQcVM4WG9mVWxFeHhUbDR0X01PaXkxcDdwR0Q2Z2VRcFVRdkx4MVRkYmtuSV9jdERLSDZFaDJPTklwUEZFU2t2TnpsZFJRYW9lMllibU9aTWdsNWZjUnVkeGlhR01VMXhEQnBzM29McHVmcWlfc1Y0cnUxXS0tPjwvZz48L3N2Zz4=" class="uml" alt="uml diagram" title="" /></p>
<h3 id="_17">コードスメルの例と対処法<a class="headerlink" href="#_17" title="Permanent link">&para;</a></h3>
<table>
<thead>
<tr>
<th>コードスメル</th>
<th>症状</th>
<th>対処法</th>
</tr>
</thead>
<tbody>
<tr>
<td>長いメソッド</td>
<td>20行以上</td>
<td>メソッド抽出</td>
</tr>
<tr>
<td>重複コード</td>
<td>同じ処理が複数箇所</td>
<td>メソッド抽出、テンプレートメソッド</td>
</tr>
<tr>
<td>プリミティブ型の多用</td>
<td>String, int の乱用</td>
<td>値オブジェクト導入</td>
</tr>
<tr>
<td>貧血モデル</td>
<td>getter/setter のみ</td>
<td>ロジックをエンティティに移動</td>
</tr>
<tr>
<td>複雑な条件分岐</td>
<td>if-else の連鎖</td>
<td>ポリモーフィズム、Strategy パターン</td>
</tr>
<tr>
<td>長いパラメータリスト</td>
<td>4つ以上のパラメータ</td>
<td>パラメータオブジェクト導入</td>
</tr>
<tr>
<td>特性の横恋慕</td>
<td>他クラスのデータを頻繁に使用</td>
<td>メソッドの移動</td>
</tr>
</tbody>
</table>
<hr />
<h2 id="_18">まとめ<a class="headerlink" href="#_18" title="Permanent link">&para;</a></h2>
<p>本章では、継続的リファクタリングについて解説しました。</p>
<h3 id="_19">重要なポイント<a class="headerlink" href="#_19" title="Permanent link">&para;</a></h3>
<ol>
<li>
<p><strong>貧血モデルからリッチモデルへ</strong>: ビジネスロジックをサービス層からエンティティに移動し、ドメインの知識を集約します。段階的に移行することで、リスクを最小化できます。</p>
</li>
<li>
<p><strong>値オブジェクトの導入</strong>: プリミティブ型を値オブジェクトに置き換えることで、型安全性とドメイン知識の表現が向上します。不変性により、副作用のないコードが実現できます。</p>
</li>
<li>
<p><strong>メソッド抽出</strong>: 複雑なメソッドを小さなメソッドに分割し、可読性と保守性を向上させます。コメントの代わりに意図を表すメソッド名を使用します。</p>
</li>
<li>
<p><strong>ドメインサービス</strong>: 複数のエンティティにまたがるビジネスロジックは、ドメインサービスに配置します。エンティティとドメインサービスの責務を明確に分けることが重要です。</p>
</li>
</ol>
<h3 id="_20">財務会計システムでの値オブジェクト例<a class="headerlink" href="#_20" title="Permanent link">&para;</a></h3>
<table>
<thead>
<tr>
<th>値オブジェクト</th>
<th>責務</th>
</tr>
</thead>
<tbody>
<tr>
<td>Money</td>
<td>金額の表現、加減算、等価性</td>
</tr>
<tr>
<td>AccountCode</td>
<td>勘定科目コード、カテゴリ判定</td>
</tr>
<tr>
<td>JournalNumber</td>
<td>仕訳番号、採番ルール</td>
</tr>
<tr>
<td>JournalDate</td>
<td>仕訳日、期間判定</td>
</tr>
<tr>
<td>FiscalYear</td>
<td>会計年度、期首・期末計算</td>
</tr>
</tbody>
</table>
<h3 id="_21">リファクタリングの原則<a class="headerlink" href="#_21" title="Permanent link">&para;</a></h3>
<ol>
<li><strong>テストファースト</strong>: リファクタリング前にテストがあることを確認</li>
<li><strong>小さなステップ</strong>: 一度に大きな変更をしない</li>
<li><strong>頻繁なコミット</strong>: 動作する状態でこまめにコミット</li>
<li><strong>継続的改善</strong>: 完璧を目指さず、少しずつ改善</li>
</ol>
<p>次章では、アーキテクチャの検証について解説します。ArchUnit によるルール強制、JIG によるドキュメント生成を学びます。</p>












                
              </article>
            </div>
          
          
<script>var target=document.getElementById(location.hash.slice(1));target&&target.name&&(target.checked=target.name.startsWith("__tabbed_"))</script>
        </div>
        
      </main>
      
        <footer class="md-footer">
  
  <div class="md-footer-meta md-typeset">
    <div class="md-footer-meta__inner md-grid">
      <div class="md-copyright">
  
  
    Made with
    <a href="https://squidfunk.github.io/mkdocs-material/" target="_blank" rel="noopener">
      Material for MkDocs
    </a>
  
</div>
      
        
<div class="md-social">
  
    
    
    
    
    <a href="https://github.com/k2works/case-study-accounting" target="_blank" rel="noopener" title="財務会計システム ケーススタディ" class="md-social__link">
      <svg xmlns="http://www.w3.org/2000/svg" viewBox="0 0 512 512"><!--! Font Awesome Free 7.1.0 by @fontawesome - https://fontawesome.com License - https://fontawesome.com/license/free (Icons: CC BY 4.0, Fonts: SIL OFL 1.1, Code: MIT License) Copyright 2025 Fonticons, Inc.--><path d="M173.9 397.4c0 2-2.3 3.6-5.2 3.6-3.3.3-5.6-1.3-5.6-3.6 0-2 2.3-3.6 5.2-3.6 3-.3 5.6 1.3 5.6 3.6m-31.1-4.5c-.7 2 1.3 4.3 4.3 4.9 2.6 1 5.6 0 6.2-2s-1.3-4.3-4.3-5.2c-2.6-.7-5.5.3-6.2 2.3m44.2-1.7c-2.9.7-4.9 2.6-4.6 4.9.3 2 2.9 3.3 5.9 2.6 2.9-.7 4.9-2.6 4.6-4.6-.3-1.9-3-3.2-5.9-2.9M252.8 8C114.1 8 8 113.3 8 252c0 110.9 69.8 205.8 169.5 239.2 12.8 2.3 17.3-5.6 17.3-12.1 0-6.2-.3-40.4-.3-61.4 0 0-70 15-84.7-29.8 0 0-11.4-29.1-27.8-36.6 0 0-22.9-15.7 1.6-15.4 0 0 24.9 2 38.6 25.8 21.9 38.6 58.6 27.5 72.9 20.9 2.3-16 8.8-27.1 16-33.7-55.9-6.2-112.3-14.3-112.3-110.5 0-27.5 7.6-41.3 23.6-58.9-2.6-6.5-11.1-33.3 2.6-67.9 20.9-6.5 69 27 69 27 20-5.6 41.5-8.5 62.8-8.5s42.8 2.9 62.8 8.5c0 0 48.1-33.6 69-27 13.7 34.7 5.2 61.4 2.6 67.9 16 17.7 25.8 31.5 25.8 58.9 0 96.5-58.9 104.2-114.8 110.5 9.2 7.9 17 22.9 17 46.4 0 33.7-.3 75.4-.3 83.6 0 6.5 4.6 14.4 17.3 12.1C436.2 457.8 504 362.9 504 252 504 113.3 391.5 8 252.8 8M105.2 352.9c-1.3 1-1 3.3.7 5.2 1.6 1.6 3.9 2.3 5.2 1 1.3-1 1-3.3-.7-5.2-1.6-1.6-3.9-2.3-5.2-1m-10.8-8.1c-.7 1.3.3 2.9 2.3 3.9 1.6 1 3.6.7 4.3-.7.7-1.3-.3-2.9-2.3-3.9-2-.6-3.6-.3-4.3.7m32.4 35.6c-1.6 1.3-1 4.3 1.3 6.2 2.3 2.3 5.2 2.6 6.5 1 1.3-1.3.7-4.3-1.3-6.2-2.2-2.3-5.2-2.6-6.5-1m-11.4-14.7c-1.6 1-1.6 3.6 0 5.9s4.3 3.3 5.6 2.3c1.6-1.3 1.6-3.9 0-6.2-1.4-2.3-4-3.3-5.6-2"/></svg>
    </a>
  
</div>
      
    </div>
  </div>
</footer>
      
    </div>
    <div class="md-dialog" data-md-component="dialog">
      <div class="md-dialog__inner md-typeset"></div>
    </div>
    
    
    
      
      
      <script id="__config" type="application/json">{"annotate": null, "base": "../../..", "features": ["navigation.tabs", "navigation.sections", "toc.integrate", "search.suggest", "search.highlight"], "search": "../../../assets/javascripts/workers/search.2c215733.min.js", "tags": null, "translations": {"clipboard.copied": "Copied to clipboard", "clipboard.copy": "Copy to clipboard", "search.result.more.one": "1 more on this page", "search.result.more.other": "# more on this page", "search.result.none": "No matching documents", "search.result.one": "1 matching document", "search.result.other": "# matching documents", "search.result.placeholder": "Type to start searching", "search.result.term.missing": "Missing", "select.version": "Select version"}, "version": null}</script>
    
    
      <script src="../../../assets/javascripts/bundle.79ae519e.min.js"></script>
      
        <script src="https://cdn.jsdelivr.net/npm/mermaid@10.6.1/dist/mermaid.min.js"></script>
      
        <script src="../../../assets/js/extra.js"></script>
      
    
  </body>
</html>