
<!doctype html>
<html lang="en" class="no-js">
  <head>
    
      <meta charset="utf-8">
      <meta name="viewport" content="width=device-width,initial-scale=1">
      
        <meta name="description" content="財務会計システムの設計・開発ドキュメント">
      
      
        <meta name="author" content="Project Team">
      
      
      
        <link rel="prev" href="../chapter24/">
      
      
        <link rel="next" href="../chapter26/">
      
      
        
      
      
      <link rel="icon" href="../../../assets/images/favicon.png">
      <meta name="generator" content="mkdocs-1.6.1, mkdocs-material-9.7.1">
    
    
      
        <title>第25章 - 財務会計システム ケーススタディ</title>
      
    
    
      <link rel="stylesheet" href="../../../assets/stylesheets/main.484c7ddc.min.css">
      
        
        <link rel="stylesheet" href="../../../assets/stylesheets/palette.ab4e12ef.min.css">
      
      


    
    
      
    
    
      
        
        
        <link rel="preconnect" href="https://fonts.gstatic.com" crossorigin>
        <link rel="stylesheet" href="https://fonts.googleapis.com/css?family=Roboto:300,300i,400,400i,700,700i%7CRoboto+Mono:400,400i,700,700i&display=fallback">
        <style>:root{--md-text-font:"Roboto";--md-code-font:"Roboto Mono"}</style>
      
    
    
      <link rel="stylesheet" href="../../../assets/css/extra.css">
    
    <script>__md_scope=new URL("../../..",location),__md_hash=e=>[...e].reduce(((e,_)=>(e<<5)-e+_.charCodeAt(0)),0),__md_get=(e,_=localStorage,t=__md_scope)=>JSON.parse(_.getItem(t.pathname+"."+e)),__md_set=(e,_,t=localStorage,a=__md_scope)=>{try{t.setItem(a.pathname+"."+e,JSON.stringify(_))}catch(e){}}</script>
    
      

    
    
  </head>
  
  
    
    
    
    
    
    <body dir="ltr" data-md-color-scheme="default" data-md-color-primary="indigo" data-md-color-accent="indigo">
  
    
    <input class="md-toggle" data-md-toggle="drawer" type="checkbox" id="__drawer" autocomplete="off">
    <input class="md-toggle" data-md-toggle="search" type="checkbox" id="__search" autocomplete="off">
    <label class="md-overlay" for="__drawer"></label>
    <div data-md-component="skip">
      
        
        <a href="#25-1-" class="md-skip">
          Skip to content
        </a>
      
    </div>
    <div data-md-component="announce">
      
    </div>
    
    
      

<header class="md-header" data-md-component="header">
  <nav class="md-header__inner md-grid" aria-label="Header">
    <a href="../../.." title="財務会計システム ケーススタディ" class="md-header__button md-logo" aria-label="財務会計システム ケーススタディ" data-md-component="logo">
      
  
  <svg xmlns="http://www.w3.org/2000/svg" viewBox="0 0 24 24"><path d="M12 8a3 3 0 0 0 3-3 3 3 0 0 0-3-3 3 3 0 0 0-3 3 3 3 0 0 0 3 3m0 3.54C9.64 9.35 6.5 8 3 8v11c3.5 0 6.64 1.35 9 3.54 2.36-2.19 5.5-3.54 9-3.54V8c-3.5 0-6.64 1.35-9 3.54"/></svg>

    </a>
    <label class="md-header__button md-icon" for="__drawer">
      
      <svg xmlns="http://www.w3.org/2000/svg" viewBox="0 0 24 24"><path d="M3 6h18v2H3zm0 5h18v2H3zm0 5h18v2H3z"/></svg>
    </label>
    <div class="md-header__title" data-md-component="header-title">
      <div class="md-header__ellipsis">
        <div class="md-header__topic">
          <span class="md-ellipsis">
            財務会計システム ケーススタディ
          </span>
        </div>
        <div class="md-header__topic" data-md-component="header-topic">
          <span class="md-ellipsis">
            
              第25章
            
          </span>
        </div>
      </div>
    </div>
    
      
    
    
    
    
      
      
        <label class="md-header__button md-icon" for="__search">
          
          <svg xmlns="http://www.w3.org/2000/svg" viewBox="0 0 24 24"><path d="M9.5 3A6.5 6.5 0 0 1 16 9.5c0 1.61-.59 3.09-1.56 4.23l.27.27h.79l5 5-1.5 1.5-5-5v-.79l-.27-.27A6.52 6.52 0 0 1 9.5 16 6.5 6.5 0 0 1 3 9.5 6.5 6.5 0 0 1 9.5 3m0 2C7 5 5 7 5 9.5S7 14 9.5 14 14 12 14 9.5 12 5 9.5 5"/></svg>
        </label>
        <div class="md-search" data-md-component="search" role="dialog">
  <label class="md-search__overlay" for="__search"></label>
  <div class="md-search__inner" role="search">
    <form class="md-search__form" name="search">
      <input type="text" class="md-search__input" name="query" aria-label="Search" placeholder="Search" autocapitalize="off" autocorrect="off" autocomplete="off" spellcheck="false" data-md-component="search-query" required>
      <label class="md-search__icon md-icon" for="__search">
        
        <svg xmlns="http://www.w3.org/2000/svg" viewBox="0 0 24 24"><path d="M9.5 3A6.5 6.5 0 0 1 16 9.5c0 1.61-.59 3.09-1.56 4.23l.27.27h.79l5 5-1.5 1.5-5-5v-.79l-.27-.27A6.52 6.52 0 0 1 9.5 16 6.5 6.5 0 0 1 3 9.5 6.5 6.5 0 0 1 9.5 3m0 2C7 5 5 7 5 9.5S7 14 9.5 14 14 12 14 9.5 12 5 9.5 5"/></svg>
        
        <svg xmlns="http://www.w3.org/2000/svg" viewBox="0 0 24 24"><path d="M20 11v2H8l5.5 5.5-1.42 1.42L4.16 12l7.92-7.92L13.5 5.5 8 11z"/></svg>
      </label>
      <nav class="md-search__options" aria-label="Search">
        
        <button type="reset" class="md-search__icon md-icon" title="Clear" aria-label="Clear" tabindex="-1">
          
          <svg xmlns="http://www.w3.org/2000/svg" viewBox="0 0 24 24"><path d="M19 6.41 17.59 5 12 10.59 6.41 5 5 6.41 10.59 12 5 17.59 6.41 19 12 13.41 17.59 19 19 17.59 13.41 12z"/></svg>
        </button>
      </nav>
      
        <div class="md-search__suggest" data-md-component="search-suggest"></div>
      
    </form>
    <div class="md-search__output">
      <div class="md-search__scrollwrap" tabindex="0" data-md-scrollfix>
        <div class="md-search-result" data-md-component="search-result">
          <div class="md-search-result__meta">
            Initializing search
          </div>
          <ol class="md-search-result__list" role="presentation"></ol>
        </div>
      </div>
    </div>
  </div>
</div>
      
    
    
      <div class="md-header__source">
        <a href="https://github.com/k2works/case-study-accounting" title="Go to repository" class="md-source" data-md-component="source">
  <div class="md-source__icon md-icon">
    
    <svg xmlns="http://www.w3.org/2000/svg" viewBox="0 0 448 512"><!--! Font Awesome Free 7.1.0 by @fontawesome - https://fontawesome.com License - https://fontawesome.com/license/free (Icons: CC BY 4.0, Fonts: SIL OFL 1.1, Code: MIT License) Copyright 2025 Fonticons, Inc.--><path d="M439.6 236.1 244 40.5c-5.4-5.5-12.8-8.5-20.4-8.5s-15 3-20.4 8.4L162.5 81l51.5 51.5c27.1-9.1 52.7 16.8 43.4 43.7l49.7 49.7c34.2-11.8 61.2 31 35.5 56.7-26.5 26.5-70.2-2.9-56-37.3L240.3 199v121.9c25.3 12.5 22.3 41.8 9.1 55-6.4 6.4-15.2 10.1-24.3 10.1s-17.8-3.6-24.3-10.1c-17.6-17.6-11.1-46.9 11.2-56v-123c-20.8-8.5-24.6-30.7-18.6-45L142.6 101 8.5 235.1C3 240.6 0 247.9 0 255.5s3 15 8.5 20.4l195.6 195.7c5.4 5.4 12.7 8.4 20.4 8.4s15-3 20.4-8.4l194.7-194.7c5.4-5.4 8.4-12.8 8.4-20.4s-3-15-8.4-20.4"/></svg>
  </div>
  <div class="md-source__repository">
    case-study-accounting
  </div>
</a>
      </div>
    
  </nav>
  
</header>
    
    <div class="md-container" data-md-component="container">
      
      
        
          
            
<nav class="md-tabs" aria-label="Tabs" data-md-component="tabs">
  <div class="md-grid">
    <ul class="md-tabs__list">
      
        
  
  
  
  
    <li class="md-tabs__item">
      <a href="../../.." class="md-tabs__link">
        
  
  
    
  
  Home

      </a>
    </li>
  

      
        
  
  
  
  
    
    
      <li class="md-tabs__item">
        <a href="../../../requirements/requirements_definition/" class="md-tabs__link">
          
  
  
  要件定義

        </a>
      </li>
    
  

      
        
  
  
  
  
    
    
      
  
  
  
  
    
    
      <li class="md-tabs__item">
        <a href="../../../design/architecture_backend/" class="md-tabs__link">
          
  
  
  設計

        </a>
      </li>
    
  

    
  

      
        
  
  
  
  
    
    
      <li class="md-tabs__item">
        <a href="../../../development/release_plan/" class="md-tabs__link">
          
  
  
  開発

        </a>
      </li>
    
  

      
        
  
  
  
  
    
    
      <li class="md-tabs__item">
        <a href="../../../operation/dev_container/" class="md-tabs__link">
          
  
  
  運用

        </a>
      </li>
    
  

      
        
  
  
  
  
    
    
      <li class="md-tabs__item">
        <a href="../../../reference/%E9%96%8B%E7%99%BA%E3%82%AC%E3%82%A4%E3%83%89/" class="md-tabs__link">
          
  
  
  リファレンス

        </a>
      </li>
    
  

      
        
  
  
  
  
    
    
      <li class="md-tabs__item">
        <a href="../../../template/ADR/" class="md-tabs__link">
          
  
  
  テンプレート

        </a>
      </li>
    
  

      
        
  
  
  
    
  
  
    
    
      <li class="md-tabs__item md-tabs__item--active">
        <a href="../../" class="md-tabs__link">
          
  
  
  実践ガイド

        </a>
      </li>
    
  

      
    </ul>
  </div>
</nav>
          
        
      
      <main class="md-main" data-md-component="main">
        <div class="md-main__inner md-grid">
          
            
              
              <div class="md-sidebar md-sidebar--primary" data-md-component="sidebar" data-md-type="navigation" >
                <div class="md-sidebar__scrollwrap">
                  <div class="md-sidebar__inner">
                    


  


  

<nav class="md-nav md-nav--primary md-nav--lifted md-nav--integrated" aria-label="Navigation" data-md-level="0">
  <label class="md-nav__title" for="__drawer">
    <a href="../../.." title="財務会計システム ケーススタディ" class="md-nav__button md-logo" aria-label="財務会計システム ケーススタディ" data-md-component="logo">
      
  
  <svg xmlns="http://www.w3.org/2000/svg" viewBox="0 0 24 24"><path d="M12 8a3 3 0 0 0 3-3 3 3 0 0 0-3-3 3 3 0 0 0-3 3 3 3 0 0 0 3 3m0 3.54C9.64 9.35 6.5 8 3 8v11c3.5 0 6.64 1.35 9 3.54 2.36-2.19 5.5-3.54 9-3.54V8c-3.5 0-6.64 1.35-9 3.54"/></svg>

    </a>
    財務会計システム ケーススタディ
  </label>
  
    <div class="md-nav__source">
      <a href="https://github.com/k2works/case-study-accounting" title="Go to repository" class="md-source" data-md-component="source">
  <div class="md-source__icon md-icon">
    
    <svg xmlns="http://www.w3.org/2000/svg" viewBox="0 0 448 512"><!--! Font Awesome Free 7.1.0 by @fontawesome - https://fontawesome.com License - https://fontawesome.com/license/free (Icons: CC BY 4.0, Fonts: SIL OFL 1.1, Code: MIT License) Copyright 2025 Fonticons, Inc.--><path d="M439.6 236.1 244 40.5c-5.4-5.5-12.8-8.5-20.4-8.5s-15 3-20.4 8.4L162.5 81l51.5 51.5c27.1-9.1 52.7 16.8 43.4 43.7l49.7 49.7c34.2-11.8 61.2 31 35.5 56.7-26.5 26.5-70.2-2.9-56-37.3L240.3 199v121.9c25.3 12.5 22.3 41.8 9.1 55-6.4 6.4-15.2 10.1-24.3 10.1s-17.8-3.6-24.3-10.1c-17.6-17.6-11.1-46.9 11.2-56v-123c-20.8-8.5-24.6-30.7-18.6-45L142.6 101 8.5 235.1C3 240.6 0 247.9 0 255.5s3 15 8.5 20.4l195.6 195.7c5.4 5.4 12.7 8.4 20.4 8.4s15-3 20.4-8.4l194.7-194.7c5.4-5.4 8.4-12.8 8.4-20.4s-3-15-8.4-20.4"/></svg>
  </div>
  <div class="md-source__repository">
    case-study-accounting
  </div>
</a>
    </div>
  
  <ul class="md-nav__list" data-md-scrollfix>
    
      
      
  
  
  
  
    <li class="md-nav__item">
      <a href="../../.." class="md-nav__link">
        
  
  
  <span class="md-ellipsis">
    
  
    Home
  

    
  </span>
  
  

      </a>
    </li>
  

    
      
      
  
  
  
  
    
    
    
    
      
      
        
      
    
    
    <li class="md-nav__item md-nav__item--nested">
      
        
        
        <input class="md-nav__toggle md-toggle " type="checkbox" id="__nav_2" >
        
          
          <label class="md-nav__link" for="__nav_2" id="__nav_2_label" tabindex="0">
            
  
  
  <span class="md-ellipsis">
    
  
    要件定義
  

    
  </span>
  
  

            <span class="md-nav__icon md-icon"></span>
          </label>
        
        <nav class="md-nav" data-md-level="1" aria-labelledby="__nav_2_label" aria-expanded="false">
          <label class="md-nav__title" for="__nav_2">
            <span class="md-nav__icon md-icon"></span>
            
  
    要件定義
  

          </label>
          <ul class="md-nav__list" data-md-scrollfix>
            
              
                
  
  
  
  
    <li class="md-nav__item">
      <a href="../../../requirements/requirements_definition/" class="md-nav__link">
        
  
  
  <span class="md-ellipsis">
    
  
    要件定義書
  

    
  </span>
  
  

      </a>
    </li>
  

              
            
              
                
  
  
  
  
    <li class="md-nav__item">
      <a href="../../../requirements/business_usecase/" class="md-nav__link">
        
  
  
  <span class="md-ellipsis">
    
  
    ビジネスユースケース
  

    
  </span>
  
  

      </a>
    </li>
  

              
            
              
                
  
  
  
  
    <li class="md-nav__item">
      <a href="../../../requirements/system_usecase/" class="md-nav__link">
        
  
  
  <span class="md-ellipsis">
    
  
    システムユースケース
  

    
  </span>
  
  

      </a>
    </li>
  

              
            
              
                
  
  
  
  
    <li class="md-nav__item">
      <a href="../../../requirements/user_story/" class="md-nav__link">
        
  
  
  <span class="md-ellipsis">
    
  
    ユーザーストーリー
  

    
  </span>
  
  

      </a>
    </li>
  

              
            
          </ul>
        </nav>
      
    </li>
  

    
      
      
  
  
  
  
    
    
    
    
      
      
        
      
    
    
    <li class="md-nav__item md-nav__item--nested">
      
        
        
        <input class="md-nav__toggle md-toggle " type="checkbox" id="__nav_3" >
        
          
          <label class="md-nav__link" for="__nav_3" id="__nav_3_label" tabindex="0">
            
  
  
  <span class="md-ellipsis">
    
  
    設計
  

    
  </span>
  
  

            <span class="md-nav__icon md-icon"></span>
          </label>
        
        <nav class="md-nav" data-md-level="1" aria-labelledby="__nav_3_label" aria-expanded="false">
          <label class="md-nav__title" for="__nav_3">
            <span class="md-nav__icon md-icon"></span>
            
  
    設計
  

          </label>
          <ul class="md-nav__list" data-md-scrollfix>
            
              
                
  
  
  
  
    
    
    
    
      
      
        
      
    
    
    <li class="md-nav__item md-nav__item--nested">
      
        
        
        <input class="md-nav__toggle md-toggle " type="checkbox" id="__nav_3_1" >
        
          
          <label class="md-nav__link" for="__nav_3_1" id="__nav_3_1_label" tabindex="0">
            
  
  
  <span class="md-ellipsis">
    
  
    アーキテクチャ
  

    
  </span>
  
  

            <span class="md-nav__icon md-icon"></span>
          </label>
        
        <nav class="md-nav" data-md-level="2" aria-labelledby="__nav_3_1_label" aria-expanded="false">
          <label class="md-nav__title" for="__nav_3_1">
            <span class="md-nav__icon md-icon"></span>
            
  
    アーキテクチャ
  

          </label>
          <ul class="md-nav__list" data-md-scrollfix>
            
              
                
  
  
  
  
    <li class="md-nav__item">
      <a href="../../../design/architecture_backend/" class="md-nav__link">
        
  
  
  <span class="md-ellipsis">
    
  
    バックエンド
  

    
  </span>
  
  

      </a>
    </li>
  

              
            
              
                
  
  
  
  
    <li class="md-nav__item">
      <a href="../../../design/architecture_frontend/" class="md-nav__link">
        
  
  
  <span class="md-ellipsis">
    
  
    フロントエンド
  

    
  </span>
  
  

      </a>
    </li>
  

              
            
              
                
  
  
  
  
    <li class="md-nav__item">
      <a href="../../../design/architecture_infrastructure/" class="md-nav__link">
        
  
  
  <span class="md-ellipsis">
    
  
    インフラストラクチャ
  

    
  </span>
  
  

      </a>
    </li>
  

              
            
          </ul>
        </nav>
      
    </li>
  

              
            
              
                
  
  
  
  
    
    
    
    
      
      
        
      
    
    
    <li class="md-nav__item md-nav__item--nested">
      
        
        
        <input class="md-nav__toggle md-toggle " type="checkbox" id="__nav_3_2" >
        
          
          <label class="md-nav__link" for="__nav_3_2" id="__nav_3_2_label" tabindex="0">
            
  
  
  <span class="md-ellipsis">
    
  
    モデル設計
  

    
  </span>
  
  

            <span class="md-nav__icon md-icon"></span>
          </label>
        
        <nav class="md-nav" data-md-level="2" aria-labelledby="__nav_3_2_label" aria-expanded="false">
          <label class="md-nav__title" for="__nav_3_2">
            <span class="md-nav__icon md-icon"></span>
            
  
    モデル設計
  

          </label>
          <ul class="md-nav__list" data-md-scrollfix>
            
              
                
  
  
  
  
    <li class="md-nav__item">
      <a href="../../../design/data-model/" class="md-nav__link">
        
  
  
  <span class="md-ellipsis">
    
  
    データモデル
  

    
  </span>
  
  

      </a>
    </li>
  

              
            
              
                
  
  
  
  
    <li class="md-nav__item">
      <a href="../../../design/domain-model/" class="md-nav__link">
        
  
  
  <span class="md-ellipsis">
    
  
    ドメインモデル
  

    
  </span>
  
  

      </a>
    </li>
  

              
            
          </ul>
        </nav>
      
    </li>
  

              
            
              
                
  
  
  
  
    <li class="md-nav__item">
      <a href="../../../design/ui-design/" class="md-nav__link">
        
  
  
  <span class="md-ellipsis">
    
  
    UI 設計
  

    
  </span>
  
  

      </a>
    </li>
  

              
            
              
                
  
  
  
  
    <li class="md-nav__item">
      <a href="../../../design/test_strategy/" class="md-nav__link">
        
  
  
  <span class="md-ellipsis">
    
  
    テスト戦略
  

    
  </span>
  
  

      </a>
    </li>
  

              
            
              
                
  
  
  
  
    <li class="md-nav__item">
      <a href="../../../design/non_functional/" class="md-nav__link">
        
  
  
  <span class="md-ellipsis">
    
  
    非機能要件
  

    
  </span>
  
  

      </a>
    </li>
  

              
            
              
                
  
  
  
  
    <li class="md-nav__item">
      <a href="../../../design/operation/" class="md-nav__link">
        
  
  
  <span class="md-ellipsis">
    
  
    運用要件
  

    
  </span>
  
  

      </a>
    </li>
  

              
            
              
                
  
  
  
  
    <li class="md-nav__item">
      <a href="../../../design/tech_stack/" class="md-nav__link">
        
  
  
  <span class="md-ellipsis">
    
  
    技術スタック選定
  

    
  </span>
  
  

      </a>
    </li>
  

              
            
          </ul>
        </nav>
      
    </li>
  

    
      
      
  
  
  
  
    
    
    
    
      
      
        
      
    
    
    <li class="md-nav__item md-nav__item--nested">
      
        
        
        <input class="md-nav__toggle md-toggle " type="checkbox" id="__nav_4" >
        
          
          <label class="md-nav__link" for="__nav_4" id="__nav_4_label" tabindex="0">
            
  
  
  <span class="md-ellipsis">
    
  
    開発
  

    
  </span>
  
  

            <span class="md-nav__icon md-icon"></span>
          </label>
        
        <nav class="md-nav" data-md-level="1" aria-labelledby="__nav_4_label" aria-expanded="false">
          <label class="md-nav__title" for="__nav_4">
            <span class="md-nav__icon md-icon"></span>
            
  
    開発
  

          </label>
          <ul class="md-nav__list" data-md-scrollfix>
            
              
                
  
  
  
  
    <li class="md-nav__item">
      <a href="../../../development/release_plan/" class="md-nav__link">
        
  
  
  <span class="md-ellipsis">
    
  
    リリース計画
  

    
  </span>
  
  

      </a>
    </li>
  

              
            
              
                
  
  
  
  
    
    
    
    
      
      
        
      
    
    
    <li class="md-nav__item md-nav__item--nested">
      
        
        
        <input class="md-nav__toggle md-toggle " type="checkbox" id="__nav_4_2" >
        
          
          <label class="md-nav__link" for="__nav_4_2" id="__nav_4_2_label" tabindex="0">
            
  
  
  <span class="md-ellipsis">
    
  
    イテレーション計画
  

    
  </span>
  
  

            <span class="md-nav__icon md-icon"></span>
          </label>
        
        <nav class="md-nav" data-md-level="2" aria-labelledby="__nav_4_2_label" aria-expanded="false">
          <label class="md-nav__title" for="__nav_4_2">
            <span class="md-nav__icon md-icon"></span>
            
  
    イテレーション計画
  

          </label>
          <ul class="md-nav__list" data-md-scrollfix>
            
              
                
  
  
  
  
    <li class="md-nav__item">
      <a href="../../../development/iteration_plan-1/" class="md-nav__link">
        
  
  
  <span class="md-ellipsis">
    
  
    イテレーション1
  

    
  </span>
  
  

      </a>
    </li>
  

              
            
          </ul>
        </nav>
      
    </li>
  

              
            
          </ul>
        </nav>
      
    </li>
  

    
      
      
  
  
  
  
    
    
    
    
      
      
        
      
    
    
    <li class="md-nav__item md-nav__item--nested">
      
        
        
        <input class="md-nav__toggle md-toggle " type="checkbox" id="__nav_5" >
        
          
          <label class="md-nav__link" for="__nav_5" id="__nav_5_label" tabindex="0">
            
  
  
  <span class="md-ellipsis">
    
  
    運用
  

    
  </span>
  
  

            <span class="md-nav__icon md-icon"></span>
          </label>
        
        <nav class="md-nav" data-md-level="1" aria-labelledby="__nav_5_label" aria-expanded="false">
          <label class="md-nav__title" for="__nav_5">
            <span class="md-nav__icon md-icon"></span>
            
  
    運用
  

          </label>
          <ul class="md-nav__list" data-md-scrollfix>
            
              
                
  
  
  
  
    <li class="md-nav__item">
      <a href="../../../operation/dev_container/" class="md-nav__link">
        
  
  
  <span class="md-ellipsis">
    
  
    開発コンテナ構築手順書
  

    
  </span>
  
  

      </a>
    </li>
  

              
            
              
                
  
  
  
  
    <li class="md-nav__item">
      <a href="../../../operation/backend_setup/" class="md-nav__link">
        
  
  
  <span class="md-ellipsis">
    
  
    バックエンド構築手順書
  

    
  </span>
  
  

      </a>
    </li>
  

              
            
              
                
  
  
  
  
    <li class="md-nav__item">
      <a href="../../../operation/backend_demo_env/" class="md-nav__link">
        
  
  
  <span class="md-ellipsis">
    
  
    バックエンドデモ環境
  

    
  </span>
  
  

      </a>
    </li>
  

              
            
              
                
  
  
  
  
    <li class="md-nav__item">
      <a href="../../../operation/frontend_setup/" class="md-nav__link">
        
  
  
  <span class="md-ellipsis">
    
  
    フロントエンド構築手順書
  

    
  </span>
  
  

      </a>
    </li>
  

              
            
              
                
  
  
  
  
    <li class="md-nav__item">
      <a href="../../../operation/frontend_demo_env/" class="md-nav__link">
        
  
  
  <span class="md-ellipsis">
    
  
    フロントエンドデモ環境
  

    
  </span>
  
  

      </a>
    </li>
  

              
            
              
                
  
  
  
  
    <li class="md-nav__item">
      <a href="../../../operation/deploy_demo/" class="md-nav__link">
        
  
  
  <span class="md-ellipsis">
    
  
    デモ環境デプロイ
  

    
  </span>
  
  

      </a>
    </li>
  

              
            
              
                
  
  
  
  
    <li class="md-nav__item">
      <a href="../../../operation/sonarqube_setup/" class="md-nav__link">
        
  
  
  <span class="md-ellipsis">
    
  
    SonarQube セットアップガイド
  

    
  </span>
  
  

      </a>
    </li>
  

              
            
          </ul>
        </nav>
      
    </li>
  

    
      
      
  
  
  
  
    
    
    
    
      
      
        
      
    
    
    <li class="md-nav__item md-nav__item--nested">
      
        
        
        <input class="md-nav__toggle md-toggle " type="checkbox" id="__nav_6" >
        
          
          <label class="md-nav__link" for="__nav_6" id="__nav_6_label" tabindex="0">
            
  
  
  <span class="md-ellipsis">
    
  
    リファレンス
  

    
  </span>
  
  

            <span class="md-nav__icon md-icon"></span>
          </label>
        
        <nav class="md-nav" data-md-level="1" aria-labelledby="__nav_6_label" aria-expanded="false">
          <label class="md-nav__title" for="__nav_6">
            <span class="md-nav__icon md-icon"></span>
            
  
    リファレンス
  

          </label>
          <ul class="md-nav__list" data-md-scrollfix>
            
              
                
  
  
  
  
    <li class="md-nav__item">
      <a href="../../../reference/%E9%96%8B%E7%99%BA%E3%82%AC%E3%82%A4%E3%83%89/" class="md-nav__link">
        
  
  
  <span class="md-ellipsis">
    
  
    開発ガイド
  

    
  </span>
  
  

      </a>
    </li>
  

              
            
              
                
  
  
  
  
    <li class="md-nav__item">
      <a href="../../../reference/%E3%82%88%E3%81%84%E3%82%BD%E3%83%95%E3%83%88%E3%82%A6%E3%82%A7%E3%82%A2%E3%81%A8%E3%81%AF/" class="md-nav__link">
        
  
  
  <span class="md-ellipsis">
    
  
    よいソフトウェアとは
  

    
  </span>
  
  

      </a>
    </li>
  

              
            
              
                
  
  
  
  
    <li class="md-nav__item">
      <a href="../../../reference/%E3%82%B3%E3%83%BC%E3%83%87%E3%82%A3%E3%83%B3%E3%82%B0%E3%81%A8%E3%83%86%E3%82%B9%E3%83%88%E3%82%AC%E3%82%A4%E3%83%89/" class="md-nav__link">
        
  
  
  <span class="md-ellipsis">
    
  
    コーディングとテストガイド
  

    
  </span>
  
  

      </a>
    </li>
  

              
            
              
                
  
  
  
  
    <li class="md-nav__item">
      <a href="../../../reference/%E3%82%A2%E3%83%BC%E3%82%AD%E3%83%86%E3%82%AF%E3%83%81%E3%83%A3%E8%A8%AD%E8%A8%88%E3%82%AC%E3%82%A4%E3%83%89/" class="md-nav__link">
        
  
  
  <span class="md-ellipsis">
    
  
    アーキテクチャ設計ガイド
  

    
  </span>
  
  

      </a>
    </li>
  

              
            
              
                
  
  
  
  
    <li class="md-nav__item">
      <a href="../../../reference/%E3%83%87%E3%83%BC%E3%82%BF%E3%83%A2%E3%83%87%E3%83%AB%E8%A8%AD%E8%A8%88%E3%82%AC%E3%82%A4%E3%83%89/" class="md-nav__link">
        
  
  
  <span class="md-ellipsis">
    
  
    データモデル設計ガイド
  

    
  </span>
  
  

      </a>
    </li>
  

              
            
              
                
  
  
  
  
    <li class="md-nav__item">
      <a href="../../../reference/%E3%83%89%E3%83%A1%E3%82%A4%E3%83%B3%E3%83%A2%E3%83%87%E3%83%AB%E8%A8%AD%E8%A8%88%E3%82%AC%E3%82%A4%E3%83%89/" class="md-nav__link">
        
  
  
  <span class="md-ellipsis">
    
  
    ドメインモデル設計ガイド
  

    
  </span>
  
  

      </a>
    </li>
  

              
            
              
                
  
  
  
  
    <li class="md-nav__item">
      <a href="../../../reference/UI%E8%A8%AD%E8%A8%88%E3%82%AC%E3%82%A4%E3%83%89/" class="md-nav__link">
        
  
  
  <span class="md-ellipsis">
    
  
    UI設計ガイド
  

    
  </span>
  
  

      </a>
    </li>
  

              
            
              
                
  
  
  
  
    <li class="md-nav__item">
      <a href="../../../reference/%E3%83%86%E3%82%B9%E3%83%88%E6%88%A6%E7%95%A5%E3%82%AC%E3%82%A4%E3%83%89/" class="md-nav__link">
        
  
  
  <span class="md-ellipsis">
    
  
    テスト戦略ガイド
  

    
  </span>
  
  

      </a>
    </li>
  

              
            
              
                
  
  
  
  
    <li class="md-nav__item">
      <a href="../../../reference/%E9%9D%9E%E6%A9%9F%E8%83%BD%E8%A6%81%E4%BB%B6%E5%AE%9A%E7%BE%A9%E3%82%AC%E3%82%A4%E3%83%89/" class="md-nav__link">
        
  
  
  <span class="md-ellipsis">
    
  
    非機能要件定義ガイド
  

    
  </span>
  
  

      </a>
    </li>
  

              
            
              
                
  
  
  
  
    <li class="md-nav__item">
      <a href="../../../reference/%E9%81%8B%E7%94%A8%E8%A6%81%E4%BB%B6%E5%AE%9A%E7%BE%A9%E3%82%AC%E3%82%A4%E3%83%89/" class="md-nav__link">
        
  
  
  <span class="md-ellipsis">
    
  
    運用要件定義ガイド
  

    
  </span>
  
  

      </a>
    </li>
  

              
            
              
                
  
  
  
  
    <li class="md-nav__item">
      <a href="../../../reference/%E8%A6%81%E4%BB%B6%E5%AE%9A%E7%BE%A9%E3%82%AC%E3%82%A4%E3%83%89/" class="md-nav__link">
        
  
  
  <span class="md-ellipsis">
    
  
    要件定義ガイド
  

    
  </span>
  
  

      </a>
    </li>
  

              
            
              
                
  
  
  
  
    <li class="md-nav__item">
      <a href="../../../reference/%E3%83%A6%E3%83%BC%E3%82%B9%E3%82%B1%E3%83%BC%E3%82%B9%E4%BD%9C%E6%88%90%E3%82%AC%E3%82%A4%E3%83%89/" class="md-nav__link">
        
  
  
  <span class="md-ellipsis">
    
  
    ユースケース作成ガイド
  

    
  </span>
  
  

      </a>
    </li>
  

              
            
              
                
  
  
  
  
    <li class="md-nav__item">
      <a href="../../../reference/%E3%83%AA%E3%83%AA%E3%83%BC%E3%82%B9%E3%83%BB%E3%82%A4%E3%83%86%E3%83%AC%E3%83%BC%E3%82%B7%E3%83%A7%E3%83%B3%E8%A8%88%E7%94%BB%E3%82%AC%E3%82%A4%E3%83%89/" class="md-nav__link">
        
  
  
  <span class="md-ellipsis">
    
  
    リリース・イテレーション計画ガイド
  

    
  </span>
  
  

      </a>
    </li>
  

              
            
              
                
  
  
  
  
    <li class="md-nav__item">
      <a href="../../../reference/%E3%82%A8%E3%82%AF%E3%82%B9%E3%83%88%E3%83%AA%E3%83%BC%E3%83%A0%E3%83%97%E3%83%AD%E3%82%B0%E3%83%A9%E3%83%9F%E3%83%B3%E3%82%B0/" class="md-nav__link">
        
  
  
  <span class="md-ellipsis">
    
  
    エクストリームプログラミング
  

    
  </span>
  
  

      </a>
    </li>
  

              
            
              
                
  
  
  
  
    <li class="md-nav__item">
      <a href="../../../reference/%E3%82%A4%E3%83%B3%E3%83%95%E3%83%A9%E8%A8%AD%E8%A8%88%E3%82%AC%E3%82%A4%E3%83%89/" class="md-nav__link">
        
  
  
  <span class="md-ellipsis">
    
  
    インフラ設計ガイド
  

    
  </span>
  
  

      </a>
    </li>
  

              
            
              
                
  
  
  
  
    <li class="md-nav__item">
      <a href="../../../reference/Java%E3%82%A2%E3%83%97%E3%83%AA%E3%82%B1%E3%83%BC%E3%82%B7%E3%83%A7%E3%83%B3%E7%92%B0%E5%A2%83%E6%A7%8B%E7%AF%89%E3%82%AC%E3%82%A4%E3%83%89/" class="md-nav__link">
        
  
  
  <span class="md-ellipsis">
    
  
    Javaアプリケーション環境構築ガイド
  

    
  </span>
  
  

      </a>
    </li>
  

              
            
              
                
  
  
  
  
    <li class="md-nav__item">
      <a href="../../../reference/TypeScript%E3%82%A2%E3%83%97%E3%83%AA%E3%82%B1%E3%83%BC%E3%82%B7%E3%83%A7%E3%83%B3%E7%92%B0%E5%A2%83%E6%A7%8B%E7%AF%89%E3%82%AC%E3%82%A4%E3%83%89/" class="md-nav__link">
        
  
  
  <span class="md-ellipsis">
    
  
    TypeScriptアプリケーション環境構築ガイド
  

    
  </span>
  
  

      </a>
    </li>
  

              
            
          </ul>
        </nav>
      
    </li>
  

    
      
      
  
  
  
  
    
    
    
    
      
      
        
      
    
    
    <li class="md-nav__item md-nav__item--nested">
      
        
        
        <input class="md-nav__toggle md-toggle " type="checkbox" id="__nav_7" >
        
          
          <label class="md-nav__link" for="__nav_7" id="__nav_7_label" tabindex="0">
            
  
  
  <span class="md-ellipsis">
    
  
    テンプレート
  

    
  </span>
  
  

            <span class="md-nav__icon md-icon"></span>
          </label>
        
        <nav class="md-nav" data-md-level="1" aria-labelledby="__nav_7_label" aria-expanded="false">
          <label class="md-nav__title" for="__nav_7">
            <span class="md-nav__icon md-icon"></span>
            
  
    テンプレート
  

          </label>
          <ul class="md-nav__list" data-md-scrollfix>
            
              
                
  
  
  
  
    <li class="md-nav__item">
      <a href="../../../template/ADR/" class="md-nav__link">
        
  
  
  <span class="md-ellipsis">
    
  
    ADR
  

    
  </span>
  
  

      </a>
    </li>
  

              
            
              
                
  
  
  
  
    <li class="md-nav__item">
      <a href="../../../template/%E3%82%A4%E3%83%86%E3%83%AC%E3%83%BC%E3%82%B7%E3%83%A7%E3%83%B3%E5%AE%8C%E4%BA%86%E5%A0%B1%E5%91%8A%E6%9B%B8/" class="md-nav__link">
        
  
  
  <span class="md-ellipsis">
    
  
    イテレーション完了報告書
  

    
  </span>
  
  

      </a>
    </li>
  

              
            
              
                
  
  
  
  
    <li class="md-nav__item">
      <a href="../../../template/%E3%82%A4%E3%83%B3%E3%82%BB%E3%83%97%E3%82%B7%E3%83%A7%E3%83%B3%E3%83%87%E3%83%83%E3%82%AD/" class="md-nav__link">
        
  
  
  <span class="md-ellipsis">
    
  
    インセプションデッキ
  

    
  </span>
  
  

      </a>
    </li>
  

              
            
              
                
  
  
  
  
    <li class="md-nav__item">
      <a href="../../../template/%E3%81%BE%E3%81%9A%E3%81%93%E3%82%8C%E3%82%92%E8%AA%AD%E3%82%82%E3%81%86%E3%83%AA%E3%82%B9%E3%83%88/" class="md-nav__link">
        
  
  
  <span class="md-ellipsis">
    
  
    まずこれを読もうリスト
  

    
  </span>
  
  

      </a>
    </li>
  

              
            
              
                
  
  
  
  
    <li class="md-nav__item">
      <a href="../../../template/%E5%AE%8C%E5%85%A8%E5%BD%A2%E5%BC%8F%E3%81%AE%E3%83%A6%E3%83%BC%E3%82%B9%E3%82%B1%E3%83%BC%E3%82%B9/" class="md-nav__link">
        
  
  
  <span class="md-ellipsis">
    
  
    完全形式のユースケース
  

    
  </span>
  
  

      </a>
    </li>
  

              
            
              
                
  
  
  
  
    <li class="md-nav__item">
      <a href="../../../template/%E8%A6%81%E4%BB%B6%E5%AE%9A%E7%BE%A9/" class="md-nav__link">
        
  
  
  <span class="md-ellipsis">
    
  
    要件定義
  

    
  </span>
  
  

      </a>
    </li>
  

              
            
              
                
  
  
  
  
    <li class="md-nav__item">
      <a href="../../../template/%E8%A8%AD%E8%A8%88/" class="md-nav__link">
        
  
  
  <span class="md-ellipsis">
    
  
    設計
  

    
  </span>
  
  

      </a>
    </li>
  

              
            
          </ul>
        </nav>
      
    </li>
  

    
      
      
  
  
    
  
  
  
    
    
    
    
      
        
        
      
      
        
      
    
    
    <li class="md-nav__item md-nav__item--active md-nav__item--section md-nav__item--nested">
      
        
        
        <input class="md-nav__toggle md-toggle " type="checkbox" id="__nav_8" checked>
        
          
          <label class="md-nav__link" for="__nav_8" id="__nav_8_label" tabindex="">
            
  
  
  <span class="md-ellipsis">
    
  
    実践ガイド
  

    
  </span>
  
  

            <span class="md-nav__icon md-icon"></span>
          </label>
        
        <nav class="md-nav" data-md-level="1" aria-labelledby="__nav_8_label" aria-expanded="true">
          <label class="md-nav__title" for="__nav_8">
            <span class="md-nav__icon md-icon"></span>
            
  
    実践ガイド
  

          </label>
          <ul class="md-nav__list" data-md-scrollfix>
            
              
                
  
  
  
  
    <li class="md-nav__item">
      <a href="../../" class="md-nav__link">
        
  
  
  <span class="md-ellipsis">
    
  
    概要
  

    
  </span>
  
  

      </a>
    </li>
  

              
            
              
                
  
  
    
  
  
  
    
    
    
    
      
      
        
          
          
        
      
    
    
    <li class="md-nav__item md-nav__item--active md-nav__item--section md-nav__item--nested">
      
        
        
        <input class="md-nav__toggle md-toggle " type="checkbox" id="__nav_8_2" checked>
        
          
          <label class="md-nav__link" for="__nav_8_2" id="__nav_8_2_label" tabindex="">
            
  
  
  <span class="md-ellipsis">
    
  
    バックエンド編（Java版）
  

    
  </span>
  
  

            <span class="md-nav__icon md-icon"></span>
          </label>
        
        <nav class="md-nav" data-md-level="2" aria-labelledby="__nav_8_2_label" aria-expanded="true">
          <label class="md-nav__title" for="__nav_8_2">
            <span class="md-nav__icon md-icon"></span>
            
  
    バックエンド編（Java版）
  

          </label>
          <ul class="md-nav__list" data-md-scrollfix>
            
              
                
  
  
  
  
    <li class="md-nav__item">
      <a href="../chapter00/" class="md-nav__link">
        
  
  
  <span class="md-ellipsis">
    
  
    はじめに
  

    
  </span>
  
  

      </a>
    </li>
  

              
            
              
                
  
  
  
  
    <li class="md-nav__item">
      <a href="../chapter01/" class="md-nav__link">
        
  
  
  <span class="md-ellipsis">
    
  
    第1章
  

    
  </span>
  
  

      </a>
    </li>
  

              
            
              
                
  
  
  
  
    <li class="md-nav__item">
      <a href="../chapter02/" class="md-nav__link">
        
  
  
  <span class="md-ellipsis">
    
  
    第2章
  

    
  </span>
  
  

      </a>
    </li>
  

              
            
              
                
  
  
  
  
    <li class="md-nav__item">
      <a href="../chapter03/" class="md-nav__link">
        
  
  
  <span class="md-ellipsis">
    
  
    第3章
  

    
  </span>
  
  

      </a>
    </li>
  

              
            
              
                
  
  
  
  
    <li class="md-nav__item">
      <a href="../chapter04/" class="md-nav__link">
        
  
  
  <span class="md-ellipsis">
    
  
    第4章
  

    
  </span>
  
  

      </a>
    </li>
  

              
            
              
                
  
  
  
  
    <li class="md-nav__item">
      <a href="../chapter05/" class="md-nav__link">
        
  
  
  <span class="md-ellipsis">
    
  
    第5章
  

    
  </span>
  
  

      </a>
    </li>
  

              
            
              
                
  
  
  
  
    <li class="md-nav__item">
      <a href="../chapter06/" class="md-nav__link">
        
  
  
  <span class="md-ellipsis">
    
  
    第6章
  

    
  </span>
  
  

      </a>
    </li>
  

              
            
              
                
  
  
  
  
    <li class="md-nav__item">
      <a href="../chapter07/" class="md-nav__link">
        
  
  
  <span class="md-ellipsis">
    
  
    第7章
  

    
  </span>
  
  

      </a>
    </li>
  

              
            
              
                
  
  
  
  
    <li class="md-nav__item">
      <a href="../chapter08/" class="md-nav__link">
        
  
  
  <span class="md-ellipsis">
    
  
    第8章
  

    
  </span>
  
  

      </a>
    </li>
  

              
            
              
                
  
  
  
  
    <li class="md-nav__item">
      <a href="../chapter09/" class="md-nav__link">
        
  
  
  <span class="md-ellipsis">
    
  
    第9章
  

    
  </span>
  
  

      </a>
    </li>
  

              
            
              
                
  
  
  
  
    <li class="md-nav__item">
      <a href="../chapter10/" class="md-nav__link">
        
  
  
  <span class="md-ellipsis">
    
  
    第10章
  

    
  </span>
  
  

      </a>
    </li>
  

              
            
              
                
  
  
  
  
    <li class="md-nav__item">
      <a href="../chapter11/" class="md-nav__link">
        
  
  
  <span class="md-ellipsis">
    
  
    第11章
  

    
  </span>
  
  

      </a>
    </li>
  

              
            
              
                
  
  
  
  
    <li class="md-nav__item">
      <a href="../chapter12/" class="md-nav__link">
        
  
  
  <span class="md-ellipsis">
    
  
    第12章
  

    
  </span>
  
  

      </a>
    </li>
  

              
            
              
                
  
  
  
  
    <li class="md-nav__item">
      <a href="../chapter13/" class="md-nav__link">
        
  
  
  <span class="md-ellipsis">
    
  
    第13章
  

    
  </span>
  
  

      </a>
    </li>
  

              
            
              
                
  
  
  
  
    <li class="md-nav__item">
      <a href="../chapter14/" class="md-nav__link">
        
  
  
  <span class="md-ellipsis">
    
  
    第14章
  

    
  </span>
  
  

      </a>
    </li>
  

              
            
              
                
  
  
  
  
    <li class="md-nav__item">
      <a href="../chapter15/" class="md-nav__link">
        
  
  
  <span class="md-ellipsis">
    
  
    第15章
  

    
  </span>
  
  

      </a>
    </li>
  

              
            
              
                
  
  
  
  
    <li class="md-nav__item">
      <a href="../chapter16/" class="md-nav__link">
        
  
  
  <span class="md-ellipsis">
    
  
    第16章
  

    
  </span>
  
  

      </a>
    </li>
  

              
            
              
                
  
  
  
  
    <li class="md-nav__item">
      <a href="../chapter17/" class="md-nav__link">
        
  
  
  <span class="md-ellipsis">
    
  
    第17章
  

    
  </span>
  
  

      </a>
    </li>
  

              
            
              
                
  
  
  
  
    <li class="md-nav__item">
      <a href="../chapter18/" class="md-nav__link">
        
  
  
  <span class="md-ellipsis">
    
  
    第18章
  

    
  </span>
  
  

      </a>
    </li>
  

              
            
              
                
  
  
  
  
    <li class="md-nav__item">
      <a href="../chapter19/" class="md-nav__link">
        
  
  
  <span class="md-ellipsis">
    
  
    第19章
  

    
  </span>
  
  

      </a>
    </li>
  

              
            
              
                
  
  
  
  
    <li class="md-nav__item">
      <a href="../chapter20/" class="md-nav__link">
        
  
  
  <span class="md-ellipsis">
    
  
    第20章
  

    
  </span>
  
  

      </a>
    </li>
  

              
            
              
                
  
  
  
  
    <li class="md-nav__item">
      <a href="../chapter21/" class="md-nav__link">
        
  
  
  <span class="md-ellipsis">
    
  
    第21章
  

    
  </span>
  
  

      </a>
    </li>
  

              
            
              
                
  
  
  
  
    <li class="md-nav__item">
      <a href="../chapter22/" class="md-nav__link">
        
  
  
  <span class="md-ellipsis">
    
  
    第22章
  

    
  </span>
  
  

      </a>
    </li>
  

              
            
              
                
  
  
  
  
    <li class="md-nav__item">
      <a href="../chapter23/" class="md-nav__link">
        
  
  
  <span class="md-ellipsis">
    
  
    第23章
  

    
  </span>
  
  

      </a>
    </li>
  

              
            
              
                
  
  
  
  
    <li class="md-nav__item">
      <a href="../chapter24/" class="md-nav__link">
        
  
  
  <span class="md-ellipsis">
    
  
    第24章
  

    
  </span>
  
  

      </a>
    </li>
  

              
            
              
                
  
  
    
  
  
  
    <li class="md-nav__item md-nav__item--active">
      
      <input class="md-nav__toggle md-toggle" type="checkbox" id="__toc">
      
      
        
      
      
        <label class="md-nav__link md-nav__link--active" for="__toc">
          
  
  
  <span class="md-ellipsis">
    
  
    第25章
  

    
  </span>
  
  

          <span class="md-nav__icon md-icon"></span>
        </label>
      
      <a href="./" class="md-nav__link md-nav__link--active">
        
  
  
  <span class="md-ellipsis">
    
  
    第25章
  

    
  </span>
  
  

      </a>
      
        

<nav class="md-nav md-nav--secondary" aria-label="Table of contents">
  
  
  
    
  
  
    <label class="md-nav__title" for="__toc">
      <span class="md-nav__icon md-icon"></span>
      Table of contents
    </label>
    <ul class="md-nav__list" data-md-component="toc" data-md-scrollfix>
      
        <li class="md-nav__item">
  <a href="#251" class="md-nav__link">
    <span class="md-ellipsis">
      
        25.1 要件定義
      
    </span>
  </a>
  
    <nav class="md-nav" aria-label="25.1 要件定義">
      <ul class="md-nav__list">
        
          <li class="md-nav__item">
  <a href="#_1" class="md-nav__link">
    <span class="md-ellipsis">
      
        認証ユースケース
      
    </span>
  </a>
  
</li>
        
          <li class="md-nav__item">
  <a href="#_2" class="md-nav__link">
    <span class="md-ellipsis">
      
        ユーザーロールと権限
      
    </span>
  </a>
  
</li>
        
          <li class="md-nav__item">
  <a href="#_3" class="md-nav__link">
    <span class="md-ellipsis">
      
        権限マトリクス
      
    </span>
  </a>
  
</li>
        
      </ul>
    </nav>
  
</li>
      
        <li class="md-nav__item">
  <a href="#252" class="md-nav__link">
    <span class="md-ellipsis">
      
        25.2 ドメインモデル設計
      
    </span>
  </a>
  
    <nav class="md-nav" aria-label="25.2 ドメインモデル設計">
      <ul class="md-nav__list">
        
          <li class="md-nav__item">
  <a href="#_4" class="md-nav__link">
    <span class="md-ellipsis">
      
        ユーザーエンティティ
      
    </span>
  </a>
  
</li>
        
          <li class="md-nav__item">
  <a href="#_5" class="md-nav__link">
    <span class="md-ellipsis">
      
        ユーザーエンティティの実装
      
    </span>
  </a>
  
</li>
        
          <li class="md-nav__item">
  <a href="#_6" class="md-nav__link">
    <span class="md-ellipsis">
      
        パスワードの値オブジェクト
      
    </span>
  </a>
  
    <nav class="md-nav" aria-label="パスワードの値オブジェクト">
      <ul class="md-nav__list">
        
          <li class="md-nav__item">
  <a href="#_7" class="md-nav__link">
    <span class="md-ellipsis">
      
        パスワードの実装
      
    </span>
  </a>
  
</li>
        
      </ul>
    </nav>
  
</li>
        
          <li class="md-nav__item">
  <a href="#id" class="md-nav__link">
    <span class="md-ellipsis">
      
        ユーザーIDの値オブジェクト
      
    </span>
  </a>
  
</li>
        
          <li class="md-nav__item">
  <a href="#_8" class="md-nav__link">
    <span class="md-ellipsis">
      
        ロールと権限の実装
      
    </span>
  </a>
  
</li>
        
      </ul>
    </nav>
  
</li>
      
        <li class="md-nav__item">
  <a href="#253-tdd" class="md-nav__link">
    <span class="md-ellipsis">
      
        25.3 TDD による実装
      
    </span>
  </a>
  
    <nav class="md-nav" aria-label="25.3 TDD による実装">
      <ul class="md-nav__list">
        
          <li class="md-nav__item">
  <a href="#_9" class="md-nav__link">
    <span class="md-ellipsis">
      
        テストファーストアプローチ
      
    </span>
  </a>
  
</li>
        
          <li class="md-nav__item">
  <a href="#_10" class="md-nav__link">
    <span class="md-ellipsis">
      
        ユーザー登録のテスト
      
    </span>
  </a>
  
</li>
        
          <li class="md-nav__item">
  <a href="#_11" class="md-nav__link">
    <span class="md-ellipsis">
      
        パスワード検証のテスト
      
    </span>
  </a>
  
</li>
        
          <li class="md-nav__item">
  <a href="#_12" class="md-nav__link">
    <span class="md-ellipsis">
      
        認証処理のテスト
      
    </span>
  </a>
  
</li>
        
      </ul>
    </nav>
  
</li>
      
        <li class="md-nav__item">
  <a href="#254-spring-security" class="md-nav__link">
    <span class="md-ellipsis">
      
        25.4 Spring Security 統合
      
    </span>
  </a>
  
    <nav class="md-nav" aria-label="25.4 Spring Security 統合">
      <ul class="md-nav__list">
        
          <li class="md-nav__item">
  <a href="#_13" class="md-nav__link">
    <span class="md-ellipsis">
      
        認証フィルタの設定
      
    </span>
  </a>
  
</li>
        
          <li class="md-nav__item">
  <a href="#securityconfig" class="md-nav__link">
    <span class="md-ellipsis">
      
        SecurityConfig の実装
      
    </span>
  </a>
  
</li>
        
          <li class="md-nav__item">
  <a href="#jwt" class="md-nav__link">
    <span class="md-ellipsis">
      
        JWT トークン管理
      
    </span>
  </a>
  
    <nav class="md-nav" aria-label="JWT トークン管理">
      <ul class="md-nav__list">
        
          <li class="md-nav__item">
  <a href="#jwttokenprovider" class="md-nav__link">
    <span class="md-ellipsis">
      
        JwtTokenProvider の実装
      
    </span>
  </a>
  
</li>
        
      </ul>
    </nav>
  
</li>
        
          <li class="md-nav__item">
  <a href="#jwt_1" class="md-nav__link">
    <span class="md-ellipsis">
      
        JWT認証フィルタ
      
    </span>
  </a>
  
</li>
        
          <li class="md-nav__item">
  <a href="#_14" class="md-nav__link">
    <span class="md-ellipsis">
      
        セッション管理
      
    </span>
  </a>
  
</li>
        
      </ul>
    </nav>
  
</li>
      
        <li class="md-nav__item">
  <a href="#255" class="md-nav__link">
    <span class="md-ellipsis">
      
        25.5 認証コントローラの実装
      
    </span>
  </a>
  
    <nav class="md-nav" aria-label="25.5 認証コントローラの実装">
      <ul class="md-nav__list">
        
          <li class="md-nav__item">
  <a href="#api" class="md-nav__link">
    <span class="md-ellipsis">
      
        認証API
      
    </span>
  </a>
  
</li>
        
          <li class="md-nav__item">
  <a href="#_15" class="md-nav__link">
    <span class="md-ellipsis">
      
        認証サービス
      
    </span>
  </a>
  
</li>
        
      </ul>
    </nav>
  
</li>
      
        <li class="md-nav__item">
  <a href="#256" class="md-nav__link">
    <span class="md-ellipsis">
      
        25.6 ドメインモデルの例外設計
      
    </span>
  </a>
  
    <nav class="md-nav" aria-label="25.6 ドメインモデルの例外設計">
      <ul class="md-nav__list">
        
          <li class="md-nav__item">
  <a href="#_16" class="md-nav__link">
    <span class="md-ellipsis">
      
        例外の使い分け
      
    </span>
  </a>
  
</li>
        
      </ul>
    </nav>
  
</li>
      
        <li class="md-nav__item">
  <a href="#_17" class="md-nav__link">
    <span class="md-ellipsis">
      
        まとめ
      
    </span>
  </a>
  
    <nav class="md-nav" aria-label="まとめ">
      <ul class="md-nav__list">
        
          <li class="md-nav__item">
  <a href="#_18" class="md-nav__link">
    <span class="md-ellipsis">
      
        重要なポイント
      
    </span>
  </a>
  
</li>
        
          <li class="md-nav__item">
  <a href="#_19" class="md-nav__link">
    <span class="md-ellipsis">
      
        財務会計システム固有の考慮点
      
    </span>
  </a>
  
</li>
        
      </ul>
    </nav>
  
</li>
      
    </ul>
  
</nav>
      
    </li>
  

              
            
              
                
  
  
  
  
    <li class="md-nav__item">
      <a href="../chapter26/" class="md-nav__link">
        
  
  
  <span class="md-ellipsis">
    
  
    第26章
  

    
  </span>
  
  

      </a>
    </li>
  

              
            
              
                
  
  
  
  
    <li class="md-nav__item">
      <a href="../chapter27/" class="md-nav__link">
        
  
  
  <span class="md-ellipsis">
    
  
    第27章
  

    
  </span>
  
  

      </a>
    </li>
  

              
            
              
                
  
  
  
  
    <li class="md-nav__item">
      <a href="../chapter28/" class="md-nav__link">
        
  
  
  <span class="md-ellipsis">
    
  
    第28章
  

    
  </span>
  
  

      </a>
    </li>
  

              
            
              
                
  
  
  
  
    <li class="md-nav__item">
      <a href="../chapter29/" class="md-nav__link">
        
  
  
  <span class="md-ellipsis">
    
  
    第29章
  

    
  </span>
  
  

      </a>
    </li>
  

              
            
              
                
  
  
  
  
    <li class="md-nav__item">
      <a href="../chapter30/" class="md-nav__link">
        
  
  
  <span class="md-ellipsis">
    
  
    第30章
  

    
  </span>
  
  

      </a>
    </li>
  

              
            
              
                
  
  
  
  
    <li class="md-nav__item">
      <a href="../chapter31/" class="md-nav__link">
        
  
  
  <span class="md-ellipsis">
    
  
    第31章
  

    
  </span>
  
  

      </a>
    </li>
  

              
            
              
                
  
  
  
  
    <li class="md-nav__item">
      <a href="../chapter32/" class="md-nav__link">
        
  
  
  <span class="md-ellipsis">
    
  
    第32章
  

    
  </span>
  
  

      </a>
    </li>
  

              
            
          </ul>
        </nav>
      
    </li>
  

              
            
              
                
  
  
  
  
    
    
    
    
      
      
        
          
          
        
      
    
    
    <li class="md-nav__item md-nav__item--section md-nav__item--nested">
      
        
        
        <input class="md-nav__toggle md-toggle " type="checkbox" id="__nav_8_3" >
        
          
          <label class="md-nav__link" for="__nav_8_3" id="__nav_8_3_label" tabindex="">
            
  
  
  <span class="md-ellipsis">
    
  
    フロントエンド編（React版）
  

    
  </span>
  
  

            <span class="md-nav__icon md-icon"></span>
          </label>
        
        <nav class="md-nav" data-md-level="2" aria-labelledby="__nav_8_3_label" aria-expanded="false">
          <label class="md-nav__title" for="__nav_8_3">
            <span class="md-nav__icon md-icon"></span>
            
  
    フロントエンド編（React版）
  

          </label>
          <ul class="md-nav__list" data-md-scrollfix>
            
              
                
  
  
  
  
    <li class="md-nav__item">
      <a href="../../frontend/chapter00/" class="md-nav__link">
        
  
  
  <span class="md-ellipsis">
    
  
    はじめに
  

    
  </span>
  
  

      </a>
    </li>
  

              
            
              
                
  
  
  
  
    <li class="md-nav__item">
      <a href="../../frontend/chapter01/" class="md-nav__link">
        
  
  
  <span class="md-ellipsis">
    
  
    第1章
  

    
  </span>
  
  

      </a>
    </li>
  

              
            
              
                
  
  
  
  
    <li class="md-nav__item">
      <a href="../../frontend/chapter02/" class="md-nav__link">
        
  
  
  <span class="md-ellipsis">
    
  
    第2章
  

    
  </span>
  
  

      </a>
    </li>
  

              
            
              
                
  
  
  
  
    <li class="md-nav__item">
      <a href="../../frontend/chapter03/" class="md-nav__link">
        
  
  
  <span class="md-ellipsis">
    
  
    第3章
  

    
  </span>
  
  

      </a>
    </li>
  

              
            
              
                
  
  
  
  
    <li class="md-nav__item">
      <a href="../../frontend/chapter04/" class="md-nav__link">
        
  
  
  <span class="md-ellipsis">
    
  
    第4章
  

    
  </span>
  
  

      </a>
    </li>
  

              
            
              
                
  
  
  
  
    <li class="md-nav__item">
      <a href="../../frontend/chapter05/" class="md-nav__link">
        
  
  
  <span class="md-ellipsis">
    
  
    第5章
  

    
  </span>
  
  

      </a>
    </li>
  

              
            
              
                
  
  
  
  
    <li class="md-nav__item">
      <a href="../../frontend/chapter06/" class="md-nav__link">
        
  
  
  <span class="md-ellipsis">
    
  
    第6章
  

    
  </span>
  
  

      </a>
    </li>
  

              
            
              
                
  
  
  
  
    <li class="md-nav__item">
      <a href="../../frontend/chapter07/" class="md-nav__link">
        
  
  
  <span class="md-ellipsis">
    
  
    第7章
  

    
  </span>
  
  

      </a>
    </li>
  

              
            
              
                
  
  
  
  
    <li class="md-nav__item">
      <a href="../../frontend/chapter08/" class="md-nav__link">
        
  
  
  <span class="md-ellipsis">
    
  
    第8章
  

    
  </span>
  
  

      </a>
    </li>
  

              
            
              
                
  
  
  
  
    <li class="md-nav__item">
      <a href="../../frontend/chapter09/" class="md-nav__link">
        
  
  
  <span class="md-ellipsis">
    
  
    第9章
  

    
  </span>
  
  

      </a>
    </li>
  

              
            
              
                
  
  
  
  
    <li class="md-nav__item">
      <a href="../../frontend/chapter10/" class="md-nav__link">
        
  
  
  <span class="md-ellipsis">
    
  
    第10章
  

    
  </span>
  
  

      </a>
    </li>
  

              
            
              
                
  
  
  
  
    <li class="md-nav__item">
      <a href="../../frontend/chapter11/" class="md-nav__link">
        
  
  
  <span class="md-ellipsis">
    
  
    第11章
  

    
  </span>
  
  

      </a>
    </li>
  

              
            
              
                
  
  
  
  
    <li class="md-nav__item">
      <a href="../../frontend/chapter12/" class="md-nav__link">
        
  
  
  <span class="md-ellipsis">
    
  
    第12章
  

    
  </span>
  
  

      </a>
    </li>
  

              
            
              
                
  
  
  
  
    <li class="md-nav__item">
      <a href="../../frontend/chapter13/" class="md-nav__link">
        
  
  
  <span class="md-ellipsis">
    
  
    第13章
  

    
  </span>
  
  

      </a>
    </li>
  

              
            
              
                
  
  
  
  
    <li class="md-nav__item">
      <a href="../../frontend/chapter14/" class="md-nav__link">
        
  
  
  <span class="md-ellipsis">
    
  
    第14章
  

    
  </span>
  
  

      </a>
    </li>
  

              
            
              
                
  
  
  
  
    <li class="md-nav__item">
      <a href="../../frontend/chapter15/" class="md-nav__link">
        
  
  
  <span class="md-ellipsis">
    
  
    第15章
  

    
  </span>
  
  

      </a>
    </li>
  

              
            
              
                
  
  
  
  
    <li class="md-nav__item">
      <a href="../../frontend/chapter16/" class="md-nav__link">
        
  
  
  <span class="md-ellipsis">
    
  
    第16章
  

    
  </span>
  
  

      </a>
    </li>
  

              
            
              
                
  
  
  
  
    <li class="md-nav__item">
      <a href="../../frontend/chapter17/" class="md-nav__link">
        
  
  
  <span class="md-ellipsis">
    
  
    第17章
  

    
  </span>
  
  

      </a>
    </li>
  

              
            
              
                
  
  
  
  
    <li class="md-nav__item">
      <a href="../../frontend/chapter18/" class="md-nav__link">
        
  
  
  <span class="md-ellipsis">
    
  
    第18章
  

    
  </span>
  
  

      </a>
    </li>
  

              
            
              
                
  
  
  
  
    <li class="md-nav__item">
      <a href="../../frontend/chapter19/" class="md-nav__link">
        
  
  
  <span class="md-ellipsis">
    
  
    第19章
  

    
  </span>
  
  

      </a>
    </li>
  

              
            
              
                
  
  
  
  
    <li class="md-nav__item">
      <a href="../../frontend/chapter20/" class="md-nav__link">
        
  
  
  <span class="md-ellipsis">
    
  
    第20章
  

    
  </span>
  
  

      </a>
    </li>
  

              
            
              
                
  
  
  
  
    <li class="md-nav__item">
      <a href="../../frontend/chapter21/" class="md-nav__link">
        
  
  
  <span class="md-ellipsis">
    
  
    第21章
  

    
  </span>
  
  

      </a>
    </li>
  

              
            
              
                
  
  
  
  
    <li class="md-nav__item">
      <a href="../../frontend/chapter22/" class="md-nav__link">
        
  
  
  <span class="md-ellipsis">
    
  
    第22章
  

    
  </span>
  
  

      </a>
    </li>
  

              
            
              
                
  
  
  
  
    <li class="md-nav__item">
      <a href="../../frontend/chapter23/" class="md-nav__link">
        
  
  
  <span class="md-ellipsis">
    
  
    第23章
  

    
  </span>
  
  

      </a>
    </li>
  

              
            
              
                
  
  
  
  
    <li class="md-nav__item">
      <a href="../../frontend/chapter24/" class="md-nav__link">
        
  
  
  <span class="md-ellipsis">
    
  
    第24章
  

    
  </span>
  
  

      </a>
    </li>
  

              
            
          </ul>
        </nav>
      
    </li>
  

              
            
          </ul>
        </nav>
      
    </li>
  

    
  </ul>
</nav>
                  </div>
                </div>
              </div>
            
            
          
          
            <div class="md-content" data-md-component="content">
              
              <article class="md-content__inner md-typeset">
                
                  


  
  


<h1 id="25-1-">第25章: 非機能要件 1 - 認証・ユーザー管理<a class="headerlink" href="#25-1-" title="Permanent link">&para;</a></h1>
<h2 id="251">25.1 要件定義<a class="headerlink" href="#251" title="Permanent link">&para;</a></h2>
<h3 id="_1">認証ユースケース<a class="headerlink" href="#_1" title="Permanent link">&para;</a></h3>
<p>財務会計システムへのアクセスを制御するため、認証機能を実装します。財務データは機密性が高いため、適切なアクセス制御が必須です。</p>
<p><img src="data:image/svg+xml;base64,PHN2ZyB4bWxucz0iaHR0cDovL3d3dy53My5vcmcvMjAwMC9zdmciIHhtbG5zOnhsaW5rPSJodHRwOi8vd3d3LnczLm9yZy8xOTk5L3hsaW5rIiBjb250ZW50U3R5bGVUeXBlPSJ0ZXh0L2NzcyIgZGF0YS1kaWFncmFtLXR5cGU9IkRFU0NSSVBUSU9OIiBoZWlnaHQ9IjY0MnB4IiBwcmVzZXJ2ZUFzcGVjdFJhdGlvPSJub25lIiBzdHlsZT0id2lkdGg6MzMzcHg7aGVpZ2h0OjY0MnB4O2JhY2tncm91bmQ6I0ZGRkZGRjsiIHZlcnNpb249IjEuMSIgdmlld0JveD0iMCAwIDMzMyA2NDIiIHdpZHRoPSIzMzNweCIgem9vbUFuZFBhbj0ibWFnbmlmeSI+PHRpdGxlPiYjMzU0Njk7JiMzNTM4ODsmIzEyNTE4OyYjMTI1NDA7JiMxMjQ3MzsmIzEyNDY1OyYjMTI1NDA7JiMxMjQ3Mzs8L3RpdGxlPjxkZWZzLz48Zz48ZyBjbGFzcz0idGl0bGUiIGRhdGEtc291cmNlLWxpbmU9IjEiPjx0ZXh0IGZpbGw9IiMwMDAwMDAiIGZvbnQtZmFtaWx5PSJzYW5zLXNlcmlmIiBmb250LXNpemU9IjE0IiBmb250LXdlaWdodD0iYm9sZCIgbGVuZ3RoQWRqdXN0PSJzcGFjaW5nIiB0ZXh0TGVuZ3RoPSIxMTEuOTk5NSIgeD0iMTAzLjcyNTIiIHk9IjIyLjk5NTEiPiYjMzU0Njk7JiMzNTM4ODsmIzEyNTE4OyYjMTI1NDA7JiMxMjQ3MzsmIzEyNDY1OyYjMTI1NDA7JiMxMjQ3Mzs8L3RleHQ+PC9nPjwhLS1jbHVzdGVyID8/Pz8/Pz8/Py0tPjxnIGNsYXNzPSJjbHVzdGVyIiBkYXRhLWVudGl0eT0iLi4uLi4uLi4uIiBkYXRhLXNvdXJjZS1saW5lPSI5IiBkYXRhLXVpZD0iZW50MDAwNiIgaWQ9ImNsdXN0ZXJfLi4uLi4uLi4uIj48cmVjdCBmaWxsPSJub25lIiBoZWlnaHQ9IjUzMSIgcng9IjIuNSIgcnk9IjIuNSIgc3R5bGU9InN0cm9rZTojMTgxODE4O3N0cm9rZS13aWR0aDoxOyIgd2lkdGg9IjE2NS40NSIgeD0iMTYyIiB5PSIxMDUuOTQ2OSIvPjx0ZXh0IGZpbGw9IiMwMDAwMDAiIGZvbnQtZmFtaWx5PSJzYW5zLXNlcmlmIiBmb250LXNpemU9IjE0IiBmb250LXdlaWdodD0iYm9sZCIgbGVuZ3RoQWRqdXN0PSJzcGFjaW5nIiB0ZXh0TGVuZ3RoPSIxMjUuOTk5NSIgeD0iMTgxLjcyNTMiIHk9IjEyMC45NDIiPiYjMzU0Njk7JiMzNTM4ODsmIzEyNTM5OyYjMTI1MTg7JiMxMjU0MDsmIzEyNDcwOyYjMTI1NDA7JiMzMTY0OTsmIzI5NzAyOzwvdGV4dD48L2c+PCEtLWVudGl0eSA/Pz8/LS0+PGcgY2xhc3M9ImVudGl0eSIgZGF0YS1lbnRpdHk9Ii4uLi4iIGRhdGEtc291cmNlLWxpbmU9IjEwIiBkYXRhLXVpZD0iZW50MDAwNyIgaWQ9ImVudGl0eV8uLi4uIj48ZWxsaXBzZSBjeD0iMjQ0LjcxNzgiIGN5PSIyODUuOTUwNSIgZmlsbD0iI0YxRjFGMSIgcng9IjQyLjU5NzgiIHJ5PSIxNC41MjM2IiBzdHlsZT0ic3Ryb2tlOiMxODE4MTg7c3Ryb2tlLXdpZHRoOjAuNTsiLz48dGV4dCBmaWxsPSIjMDAwMDAwIiBmb250LWZhbWlseT0ic2Fucy1zZXJpZiIgZm9udC1zaXplPSIxNCIgbGVuZ3RoQWRqdXN0PSJzcGFjaW5nIiB0ZXh0TGVuZ3RoPSI1NS45OTk4IiB4PSIyMTYuNzE3OSIgeT0iMjkwLjU5ODkiPiYjMTI1MjU7JiMxMjQ2NDsmIzEyNDUyOyYjMTI1MzE7PC90ZXh0PjwvZz48IS0tZW50aXR5ID8/Pz8/LS0+PGcgY2xhc3M9ImVudGl0eSIgZGF0YS1lbnRpdHk9Ii4uLi4uIiBkYXRhLXNvdXJjZS1saW5lPSIxMSIgZGF0YS11aWQ9ImVudDAwMDgiIGlkPSJlbnRpdHlfLi4uLi4iPjxlbGxpcHNlIGN4PSIyNDQuNzE3MyIgY3k9IjIyMS45NTA1IiBmaWxsPSIjRjFGMUYxIiByeD0iNTIuNDk3MyIgcnk9IjE0LjUyMzYiIHN0eWxlPSJzdHJva2U6IzE4MTgxODtzdHJva2Utd2lkdGg6MC41OyIvPjx0ZXh0IGZpbGw9IiMwMDAwMDAiIGZvbnQtZmFtaWx5PSJzYW5zLXNlcmlmIiBmb250LXNpemU9IjE0IiBsZW5ndGhBZGp1c3Q9InNwYWNpbmciIHRleHRMZW5ndGg9IjY5Ljk5OTciIHg9IjIwOS43MTc0IiB5PSIyMjYuNTk4OSI+JiMxMjUyNTsmIzEyNDY0OyYjMTI0NTA7JiMxMjQ1NDsmIzEyNDg4OzwvdGV4dD48L2c+PCEtLWVudGl0eSA/Pz8/Pz8/LS0+PGcgY2xhc3M9ImVudGl0eSIgZGF0YS1lbnRpdHk9Ii4uLi4uLi4iIGRhdGEtc291cmNlLWxpbmU9IjEyIiBkYXRhLXVpZD0iZW50MDAwOSIgaWQ9ImVudGl0eV8uLi4uLi4uIj48ZWxsaXBzZSBjeD0iMjQ0LjcxNTIiIGN5PSIxNTYuOTQxOSIgZmlsbD0iI0YxRjFGMSIgcng9IjY2LjcyNTIiIHJ5PSIxNS43NDUiIHN0eWxlPSJzdHJva2U6IzE4MTgxODtzdHJva2Utd2lkdGg6MC41OyIvPjx0ZXh0IGZpbGw9IiMwMDAwMDAiIGZvbnQtZmFtaWx5PSJzYW5zLXNlcmlmIiBmb250LXNpemU9IjE0IiBsZW5ndGhBZGp1c3Q9InNwYWNpbmciIHRleHRMZW5ndGg9Ijk3Ljk5OTYiIHg9IjE5NS43MTU0IiB5PSIxNjEuNTkwNCI+JiMxMjQ5NzsmIzEyNDczOyYjMTI1Mjc7JiMxMjU0MDsmIzEyNDg5OyYjMjI3OTM7JiMyNjM1Njs8L3RleHQ+PC9nPjwhLS1lbnRpdHkgPz8/Pz8/LS0+PGcgY2xhc3M9ImVudGl0eSIgZGF0YS1lbnRpdHk9Ii4uLi4uLiIgZGF0YS1zb3VyY2UtbGluZT0iMTMiIGRhdGEtdWlkPSJlbnQwMDEwIiBpZD0iZW50aXR5Xy4uLi4uLiI+PGVsbGlwc2UgY3g9IjI0NC43MjQyIiBjeT0iNDEzLjk0OTciIGZpbGw9IiNGMUYxRjEiIHJ4PSI2MS41MTQyIiByeT0iMTQuNzAyOCIgc3R5bGU9InN0cm9rZTojMTgxODE4O3N0cm9rZS13aWR0aDowLjU7Ii8+PHRleHQgZmlsbD0iIzAwMDAwMCIgZm9udC1mYW1pbHk9InNhbnMtc2VyaWYiIGZvbnQtc2l6ZT0iMTQiIGxlbmd0aEFkanVzdD0ic3BhY2luZyIgdGV4dExlbmd0aD0iODMuOTk5NiIgeD0iMjAyLjcyNDQiIHk9IjQxOC41OTgyIj4mIzEyNTE4OyYjMTI1NDA7JiMxMjQ3MDsmIzEyNTQwOyYjMTk5Njg7JiMzNTIzOTs8L3RleHQ+PC9nPjwhLS1lbnRpdHkgPz8/Pz8/LS0+PGcgY2xhc3M9ImVudGl0eSIgZGF0YS1lbnRpdHk9Ii4uLi4uLiIgZGF0YS1zb3VyY2UtbGluZT0iMTQiIGRhdGEtdWlkPSJlbnQwMDExIiBpZD0iZW50aXR5Xy4uLi4uLiI+PGVsbGlwc2UgY3g9IjI0NC43MjQyIiBjeT0iMzQ5Ljk0OTciIGZpbGw9IiNGMUYxRjEiIHJ4PSI2MS41MTQyIiByeT0iMTQuNzAyOCIgc3R5bGU9InN0cm9rZTojMTgxODE4O3N0cm9rZS13aWR0aDowLjU7Ii8+PHRleHQgZmlsbD0iIzAwMDAwMCIgZm9udC1mYW1pbHk9InNhbnMtc2VyaWYiIGZvbnQtc2l6ZT0iMTQiIGxlbmd0aEFkanVzdD0ic3BhY2luZyIgdGV4dExlbmd0aD0iODMuOTk5NiIgeD0iMjAyLjcyNDQiIHk9IjM1NC41OTgyIj4mIzEyNTE4OyYjMTI1NDA7JiMxMjQ3MDsmIzEyNTQwOyYjMzAzMzE7JiMzNzY4Mjs8L3RleHQ+PC9nPjwhLS1lbnRpdHkgPz8/Pz8/LS0+PGcgY2xhc3M9ImVudGl0eSIgZGF0YS1lbnRpdHk9Ii4uLi4uLiIgZGF0YS1zb3VyY2UtbGluZT0iMTUiIGRhdGEtdWlkPSJlbnQwMDEyIiBpZD0iZW50aXR5Xy4uLi4uLiI+PGVsbGlwc2UgY3g9IjI0NC43MjQyIiBjeT0iNjA1Ljk0OTciIGZpbGw9IiNGMUYxRjEiIHJ4PSI2MS41MTQyIiByeT0iMTQuNzAyOCIgc3R5bGU9InN0cm9rZTojMTgxODE4O3N0cm9rZS13aWR0aDowLjU7Ii8+PHRleHQgZmlsbD0iIzAwMDAwMCIgZm9udC1mYW1pbHk9InNhbnMtc2VyaWYiIGZvbnQtc2l6ZT0iMTQiIGxlbmd0aEFkanVzdD0ic3BhY2luZyIgdGV4dExlbmd0aD0iODMuOTk5NiIgeD0iMjAyLjcyNDQiIHk9IjYxMC41OTgyIj4mIzEyNTE4OyYjMTI1NDA7JiMxMjQ3MDsmIzEyNTQwOyYjMzIyMzI7JiMzODU5ODs8L3RleHQ+PC9nPjwhLS1lbnRpdHkgPz8/Pz8/LS0+PGcgY2xhc3M9ImVudGl0eSIgZGF0YS1lbnRpdHk9Ii4uLi4uLiIgZGF0YS1zb3VyY2UtbGluZT0iMTYiIGRhdGEtdWlkPSJlbnQwMDEzIiBpZD0iZW50aXR5Xy4uLi4uLiI+PGVsbGlwc2UgY3g9IjI0NC43MjQyIiBjeT0iNTQxLjk0OTciIGZpbGw9IiNGMUYxRjEiIHJ4PSI2MS41MTQyIiByeT0iMTQuNzAyOCIgc3R5bGU9InN0cm9rZTojMTgxODE4O3N0cm9rZS13aWR0aDowLjU7Ii8+PHRleHQgZmlsbD0iIzAwMDAwMCIgZm9udC1mYW1pbHk9InNhbnMtc2VyaWYiIGZvbnQtc2l6ZT0iMTQiIGxlbmd0aEFkanVzdD0ic3BhY2luZyIgdGV4dExlbmd0aD0iODMuOTk5NiIgeD0iMjAyLjcyNDQiIHk9IjU0Ni41OTgyIj4mIzEyNTE4OyYjMTI1NDA7JiMxMjQ3MDsmIzEyNTQwOyYjMjEwNjY7JiMzODUwMDs8L3RleHQ+PC9nPjwhLS1lbnRpdHkgPz8/Py0tPjxnIGNsYXNzPSJlbnRpdHkiIGRhdGEtZW50aXR5PSIuLi4uIiBkYXRhLXNvdXJjZS1saW5lPSIxNyIgZGF0YS11aWQ9ImVudDAwMTQiIGlkPSJlbnRpdHlfLi4uLiI+PGVsbGlwc2UgY3g9IjI0NC43MTc4IiBjeT0iNDc3Ljk1MDUiIGZpbGw9IiNGMUYxRjEiIHJ4PSI0Mi41OTc4IiByeT0iMTQuNTIzNiIgc3R5bGU9InN0cm9rZTojMTgxODE4O3N0cm9rZS13aWR0aDowLjU7Ii8+PHRleHQgZmlsbD0iIzAwMDAwMCIgZm9udC1mYW1pbHk9InNhbnMtc2VyaWYiIGZvbnQtc2l6ZT0iMTQiIGxlbmd0aEFkanVzdD0ic3BhY2luZyIgdGV4dExlbmd0aD0iNTUuOTk5OCIgeD0iMjE2LjcxNzkiIHk9IjQ4Mi41OTg5Ij4mIzI3MTc3OyYjMzg0ODA7JiMzNTM3MzsmIzIzNDUwOzwvdGV4dD48L2c+PCEtLWVudGl0eSBhY2NvdW50YW50LS0+PGcgY2xhc3M9ImVudGl0eSIgZGF0YS1lbnRpdHk9ImFjY291bnRhbnQiIGRhdGEtc291cmNlLWxpbmU9IjQiIGRhdGEtdWlkPSJlbnQwMDAyIiBpZD0iZW50aXR5X2FjY291bnRhbnQiPjxlbGxpcHNlIGN4PSI2MS45OTk4IiBjeT0iNTEuMjk2OSIgZmlsbD0iI0YxRjFGMSIgcng9IjgiIHJ5PSI4IiBzdHlsZT0ic3Ryb2tlOiMxODE4MTg7c3Ryb2tlLXdpZHRoOjAuNTsiLz48cGF0aCBkPSJNNjEuOTk5OCw1OS4yOTY5IEw2MS45OTk4LDg2LjI5NjkgTTQ4Ljk5OTgsNjcuMjk2OSBMNzQuOTk5OCw2Ny4yOTY5IE02MS45OTk4LDg2LjI5NjkgTDQ4Ljk5OTgsMTAxLjI5NjkgTTYxLjk5OTgsODYuMjk2OSBMNzQuOTk5OCwxMDEuMjk2OSIgZmlsbD0ibm9uZSIgc3R5bGU9InN0cm9rZTojMTgxODE4O3N0cm9rZS13aWR0aDowLjU7Ii8+PHRleHQgZmlsbD0iIzAwMDAwMCIgZm9udC1mYW1pbHk9InNhbnMtc2VyaWYiIGZvbnQtc2l6ZT0iMTQiIGxlbmd0aEFkanVzdD0ic3BhY2luZyIgdGV4dExlbmd0aD0iNjkuOTk5NyIgeD0iMjciIHk9IjExNS43OTIiPiYjMzIwNzY7JiMyOTcwMjsmIzI1Mjg1OyYjMjQ0MDM7JiMzMjc3Mzs8L3RleHQ+PC9nPjwhLS1lbnRpdHkgbWFuYWdlci0tPjxnIGNsYXNzPSJlbnRpdHkiIGRhdGEtZW50aXR5PSJtYW5hZ2VyIiBkYXRhLXNvdXJjZS1saW5lPSI1IiBkYXRhLXVpZD0iZW50MDAwMyIgaWQ9ImVudGl0eV9tYW5hZ2VyIj48ZWxsaXBzZSBjeD0iNjEuOTk5OCIgY3k9IjE2Mi4yOTY5IiBmaWxsPSIjRjFGMUYxIiByeD0iOCIgcnk9IjgiIHN0eWxlPSJzdHJva2U6IzE4MTgxODtzdHJva2Utd2lkdGg6MC41OyIvPjxwYXRoIGQ9Ik02MS45OTk4LDE3MC4yOTY5IEw2MS45OTk4LDE5Ny4yOTY5IE00OC45OTk4LDE3OC4yOTY5IEw3NC45OTk4LDE3OC4yOTY5IE02MS45OTk4LDE5Ny4yOTY5IEw0OC45OTk4LDIxMi4yOTY5IE02MS45OTk4LDE5Ny4yOTY5IEw3NC45OTk4LDIxMi4yOTY5IiBmaWxsPSJub25lIiBzdHlsZT0ic3Ryb2tlOiMxODE4MTg7c3Ryb2tlLXdpZHRoOjAuNTsiLz48dGV4dCBmaWxsPSIjMDAwMDAwIiBmb250LWZhbWlseT0ic2Fucy1zZXJpZiIgZm9udC1zaXplPSIxNCIgbGVuZ3RoQWRqdXN0PSJzcGFjaW5nIiB0ZXh0TGVuZ3RoPSIxMTEuOTk5NSIgeD0iNiIgeT0iMjI2Ljc5MiI+JiMzMjA3NjsmIzI5NzAyOyYjMTI1MTA7JiMxMjQ5MzsmIzEyNTQwOyYjMTI0NzI7JiMxMjUxNTsmIzEyNTQwOzwvdGV4dD48L2c+PCEtLWVudGl0eSBleGVjdXRpdmUtLT48ZyBjbGFzcz0iZW50aXR5IiBkYXRhLWVudGl0eT0iZXhlY3V0aXZlIiBkYXRhLXNvdXJjZS1saW5lPSI2IiBkYXRhLXVpZD0iZW50MDAwNCIgaWQ9ImVudGl0eV9leGVjdXRpdmUiPjxlbGxpcHNlIGN4PSI2MS45OTk5IiBjeT0iMjczLjI5NjkiIGZpbGw9IiNGMUYxRjEiIHJ4PSI4IiByeT0iOCIgc3R5bGU9InN0cm9rZTojMTgxODE4O3N0cm9rZS13aWR0aDowLjU7Ii8+PHBhdGggZD0iTTYxLjk5OTksMjgxLjI5NjkgTDYxLjk5OTksMzA4LjI5NjkgTTQ4Ljk5OTksMjg5LjI5NjkgTDc0Ljk5OTksMjg5LjI5NjkgTTYxLjk5OTksMzA4LjI5NjkgTDQ4Ljk5OTksMzIzLjI5NjkgTTYxLjk5OTksMzA4LjI5NjkgTDc0Ljk5OTksMzIzLjI5NjkiIGZpbGw9Im5vbmUiIHN0eWxlPSJzdHJva2U6IzE4MTgxODtzdHJva2Utd2lkdGg6MC41OyIvPjx0ZXh0IGZpbGw9IiMwMDAwMDAiIGZvbnQtZmFtaWx5PSJzYW5zLXNlcmlmIiBmb250LXNpemU9IjE0IiBsZW5ndGhBZGp1c3Q9InNwYWNpbmciIHRleHRMZW5ndGg9IjQxLjk5OTgiIHg9IjQxIiB5PSIzMzcuNzkyIj4mIzMyMDc2OyYjMjE5NDI7JiMzMjc3Mzs8L3RleHQ+PC9nPjwhLS1lbnRpdHkgYWRtaW4tLT48ZyBjbGFzcz0iZW50aXR5IiBkYXRhLWVudGl0eT0iYWRtaW4iIGRhdGEtc291cmNlLWxpbmU9IjciIGRhdGEtdWlkPSJlbnQwMDA1IiBpZD0iZW50aXR5X2FkbWluIj48ZWxsaXBzZSBjeD0iNjEuOTk5OCIgY3k9IjM4NC4yOTY5IiBmaWxsPSIjRjFGMUYxIiByeD0iOCIgcnk9IjgiIHN0eWxlPSJzdHJva2U6IzE4MTgxODtzdHJva2Utd2lkdGg6MC41OyIvPjxwYXRoIGQ9Ik02MS45OTk4LDM5Mi4yOTY5IEw2MS45OTk4LDQxOS4yOTY5IE00OC45OTk4LDQwMC4yOTY5IEw3NC45OTk4LDQwMC4yOTY5IE02MS45OTk4LDQxOS4yOTY5IEw0OC45OTk4LDQzNC4yOTY5IE02MS45OTk4LDQxOS4yOTY5IEw3NC45OTk4LDQzNC4yOTY5IiBmaWxsPSJub25lIiBzdHlsZT0ic3Ryb2tlOiMxODE4MTg7c3Ryb2tlLXdpZHRoOjAuNTsiLz48dGV4dCBmaWxsPSIjMDAwMDAwIiBmb250LWZhbWlseT0ic2Fucy1zZXJpZiIgZm9udC1zaXplPSIxNCIgbGVuZ3RoQWRqdXN0PSJzcGFjaW5nIiB0ZXh0TGVuZ3RoPSI5Ny45OTk2IiB4PSIxMyIgeT0iNDQ4Ljc5MiI+JiMxMjQ3MTsmIzEyNDczOyYjMTI0ODY7JiMxMjUxMjsmIzMxNjQ5OyYjMjk3MDI7JiMzMjc3Mzs8L3RleHQ+PC9nPjwhLS1saW5rIGFjY291bnRhbnQgdG8gPz8/Py0tPjxnIGNsYXNzPSJsaW5rIiBkYXRhLWVudGl0eS0xPSJhY2NvdW50YW50IiBkYXRhLWVudGl0eS0yPSIuLi4uIiBkYXRhLXNvdXJjZS1saW5lPSIyMCIgZGF0YS11aWQ9ImxuazE1IiBpZD0ibGlua19hY2NvdW50YW50Xy4uLi4iPjxwYXRoIGQ9Ik05Ny4zNiwxMTAuMDU2OSBDMTA0Ljk4LDExNy44MzY5IDExMi40NCwxMjYuNjg2OSAxMTgsMTM1Ljk0NjkgQzE0Ni4yMywxODIuOTU2OSAxMTYuMTQsMjE0LjI4NjkgMTU0LDI1My45NDY5IEMxNjcuMzYsMjY3Ljk0NjkgMTgxLjQzMTEsMjc0LjM2MzkgMTk5LjA5MTEsMjc4LjgwMzkiIGZpbGw9Im5vbmUiIGlkPSJhY2NvdW50YW50LXRvLSYjMTI1MjU7JiMxMjQ2NDsmIzEyNDUyOyYjMTI1MzE7IiBzdHlsZT0ic3Ryb2tlOiMxODE4MTg7c3Ryb2tlLXdpZHRoOjE7Ii8+PHBvbHlnb24gZmlsbD0iIzE4MTgxOCIgcG9pbnRzPSIyMDQuOTEsMjgwLjI2NjksMTk3LjE1NjksMjc0LjE5MzIsMjAwLjA2MDksMjc5LjA0NzcsMTk1LjIwNjMsMjgxLjk1MTcsMjA0LjkxLDI4MC4yNjY5IiBzdHlsZT0ic3Ryb2tlOiMxODE4MTg7c3Ryb2tlLXdpZHRoOjE7Ii8+PC9nPjwhLS1saW5rIGFjY291bnRhbnQgdG8gPz8/Pz8tLT48ZyBjbGFzcz0ibGluayIgZGF0YS1lbnRpdHktMT0iYWNjb3VudGFudCIgZGF0YS1lbnRpdHktMj0iLi4uLi4iIGRhdGEtc291cmNlLWxpbmU9IjIxIiBkYXRhLXVpZD0ibG5rMTYiIGlkPSJsaW5rX2FjY291bnRhbnRfLi4uLi4iPjxwYXRoIGQ9Ik05Ny4yNiwxMTMuMDk2OSBDMTA0LjQsMTIwLjM2NjkgMTExLjY2LDEyOC4yMTY5IDExOCwxMzUuOTQ2OSBDMTM2LjI5LDE1OC4yNTY5IDEzMS4yNiwxNzIuMTk2OSAxNTQsMTg5Ljk0NjkgQzE2Ny45NSwyMDAuODM2OSAxODAuMTY3MywyMDYuNDY4OCAxOTYuMzU3MywyMTEuMzY4OCIgZmlsbD0ibm9uZSIgaWQ9ImFjY291bnRhbnQtdG8tJiMxMjUyNTsmIzEyNDY0OyYjMTI0NTA7JiMxMjQ1NDsmIzEyNDg4OyIgc3R5bGU9InN0cm9rZTojMTgxODE4O3N0cm9rZS13aWR0aDoxOyIvPjxwb2x5Z29uIGZpbGw9IiMxODE4MTgiIHBvaW50cz0iMjAyLjEsMjEzLjEwNjksMTk0LjY0NDYsMjA2LjY3MTMsMTk3LjMxNDQsMjExLjY1ODUsMTkyLjMyNzIsMjE0LjMyODMsMjAyLjEsMjEzLjEwNjkiIHN0eWxlPSJzdHJva2U6IzE4MTgxODtzdHJva2Utd2lkdGg6MTsiLz48L2c+PCEtLWxpbmsgYWNjb3VudGFudCB0byA/Pz8/Pz8/LS0+PGcgY2xhc3M9ImxpbmsiIGRhdGEtZW50aXR5LTE9ImFjY291bnRhbnQiIGRhdGEtZW50aXR5LTI9Ii4uLi4uLi4iIGRhdGEtc291cmNlLWxpbmU9IjIyIiBkYXRhLXVpZD0ibG5rMTciIGlkPSJsaW5rX2FjY291bnRhbnRfLi4uLi4uLiI+PHBhdGggZD0iTTk3LjQyLDk1LjQxNjkgQzEyOS45OSwxMDkuMTE2OSAxNzMuMDA5LDEyNy4yMTE1IDIwNS4xMTksMTQwLjcxMTUiIGZpbGw9Im5vbmUiIGlkPSJhY2NvdW50YW50LXRvLSYjMTI0OTc7JiMxMjQ3MzsmIzEyNTI3OyYjMTI1NDA7JiMxMjQ4OTsmIzIyNzkzOyYjMjYzNTY7IiBzdHlsZT0ic3Ryb2tlOiMxODE4MTg7c3Ryb2tlLXdpZHRoOjE7Ii8+PHBvbHlnb24gZmlsbD0iIzE4MTgxOCIgcG9pbnRzPSIyMTAuNjUsMTQzLjAzNjksMjAzLjkwMzcsMTM1Ljg2MTQsMjA2LjA0MDgsMTQxLjA5OSwyMDAuODAzMiwxNDMuMjM2MSwyMTAuNjUsMTQzLjAzNjkiIHN0eWxlPSJzdHJva2U6IzE4MTgxODtzdHJva2Utd2lkdGg6MTsiLz48L2c+PCEtLWxpbmsgbWFuYWdlciB0byA/Pz8/LS0+PGcgY2xhc3M9ImxpbmsiIGRhdGEtZW50aXR5LTE9Im1hbmFnZXIiIGRhdGEtZW50aXR5LTI9Ii4uLi4iIGRhdGEtc291cmNlLWxpbmU9IjI0IiBkYXRhLXVpZD0ibG5rMTgiIGlkPSJsaW5rX21hbmFnZXJfLi4uLiI+PHBhdGggZD0iTTExNC41MywyMzAuMzg2OSBDMTI3LjA3LDIzOC43OTY5IDE0MC43MSwyNDcuMTg2OSAxNTQsMjUzLjk0NjkgQzE3Mi4yOCwyNjMuMjM2OSAxODguMTg0NCwyNjkuMjExNCAyMDUuNjI0NCwyNzQuNzgxNCIgZmlsbD0ibm9uZSIgaWQ9Im1hbmFnZXItdG8tJiMxMjUyNTsmIzEyNDY0OyYjMTI0NTI7JiMxMjUzMTsiIHN0eWxlPSJzdHJva2U6IzE4MTgxODtzdHJva2Utd2lkdGg6MTsiLz48cG9seWdvbiBmaWxsPSIjMTgxODE4IiBwb2ludHM9IjIxMS4zNCwyNzYuNjA2OSwyMDMuOTgzNiwyNzAuMDU4MywyMDYuNTc3LDI3NS4wODU3LDIwMS41NDk3LDI3Ny42NzkxLDIxMS4zNCwyNzYuNjA2OSIgc3R5bGU9InN0cm9rZTojMTgxODE4O3N0cm9rZS13aWR0aDoxOyIvPjwvZz48IS0tbGluayBtYW5hZ2VyIHRvID8/Pz8/LS0+PGcgY2xhc3M9ImxpbmsiIGRhdGEtZW50aXR5LTE9Im1hbmFnZXIiIGRhdGEtZW50aXR5LTI9Ii4uLi4uIiBkYXRhLXNvdXJjZS1saW5lPSIyNSIgZGF0YS11aWQ9ImxuazE5IiBpZD0ibGlua19tYW5hZ2VyXy4uLi4uIj48cGF0aCBkPSJNMTE4LjIxLDIwMS4xMDY5IEMxNDQuMDUsMjA1LjM5NjkgMTY4LjUzMSwyMDkuNDY0NCAxOTIuOTMxLDIxMy41MTQ0IiBmaWxsPSJub25lIiBpZD0ibWFuYWdlci10by0mIzEyNTI1OyYjMTI0NjQ7JiMxMjQ1MDsmIzEyNDU0OyYjMTI0ODg7IiBzdHlsZT0ic3Ryb2tlOiMxODE4MTg7c3Ryb2tlLXdpZHRoOjE7Ii8+PHBvbHlnb24gZmlsbD0iIzE4MTgxOCIgcG9pbnRzPSIxOTguODUsMjE0LjQ5NjksMTkwLjYyNjQsMjA5LjA3NzIsMTkzLjkxNzUsMjEzLjY3ODIsMTg5LjMxNjUsMjE2Ljk2OTIsMTk4Ljg1LDIxNC40OTY5IiBzdHlsZT0ic3Ryb2tlOiMxODE4MTg7c3Ryb2tlLXdpZHRoOjE7Ii8+PC9nPjwhLS1saW5rIG1hbmFnZXIgdG8gPz8/Pz8/Py0tPjxnIGNsYXNzPSJsaW5rIiBkYXRhLWVudGl0eS0xPSJtYW5hZ2VyIiBkYXRhLWVudGl0eS0yPSIuLi4uLi4uIiBkYXRhLXNvdXJjZS1saW5lPSIyNiIgZGF0YS11aWQ9ImxuazIwIiBpZD0ibGlua19tYW5hZ2VyXy4uLi4uLi4iPjxwYXRoIGQ9Ik0xMTguMjEsMTgxLjI1NjkgQzE0MS42NywxNzYuNzE2OSAxNjIuOTc5NiwxNzIuNTg4MiAxODYuMDQ5NiwxNjguMTE4MiIgZmlsbD0ibm9uZSIgaWQ9Im1hbmFnZXItdG8tJiMxMjQ5NzsmIzEyNDczOyYjMTI1Mjc7JiMxMjU0MDsmIzEyNDg5OyYjMjI3OTM7JiMyNjM1NjsiIHN0eWxlPSJzdHJva2U6IzE4MTgxODtzdHJva2Utd2lkdGg6MTsiLz48cG9seWdvbiBmaWxsPSIjMTgxODE4IiBwb2ludHM9IjE5MS45NCwxNjYuOTc2OSwxODIuMzQzNCwxNjQuNzYxOSwxODcuMDMxMywxNjcuOTI4LDE4My44NjUyLDE3Mi42MTU4LDE5MS45NCwxNjYuOTc2OSIgc3R5bGU9InN0cm9rZTojMTgxODE4O3N0cm9rZS13aWR0aDoxOyIvPjwvZz48IS0tbGluayBleGVjdXRpdmUgdG8gPz8/Py0tPjxnIGNsYXNzPSJsaW5rIiBkYXRhLWVudGl0eS0xPSJleGVjdXRpdmUiIGRhdGEtZW50aXR5LTI9Ii4uLi4iIGRhdGEtc291cmNlLWxpbmU9IjI4IiBkYXRhLXVpZD0ibG5rMjEiIGlkPSJsaW5rX2V4ZWN1dGl2ZV8uLi4uIj48cGF0aCBkPSJNODMuMzgsMzAxLjAyNjkgQzExMi4zNywyOTguMzA2OSAxNjAuMTM2MywyOTMuODA4NSAxOTcuMzY2MywyOTAuMzA4NSIgZmlsbD0ibm9uZSIgaWQ9ImV4ZWN1dGl2ZS10by0mIzEyNTI1OyYjMTI0NjQ7JiMxMjQ1MjsmIzEyNTMxOyIgc3R5bGU9InN0cm9rZTojMTgxODE4O3N0cm9rZS13aWR0aDoxOyIvPjxwb2x5Z29uIGZpbGw9IiMxODE4MTgiIHBvaW50cz0iMjAzLjM0LDI4OS43NDY5LDE5NC4wMDUxLDI4Ni42MDY4LDE5OC4zNjE5LDI5MC4yMTQ5LDE5NC43NTM5LDI5NC41NzE3LDIwMy4zNCwyODkuNzQ2OSIgc3R5bGU9InN0cm9rZTojMTgxODE4O3N0cm9rZS13aWR0aDoxOyIvPjwvZz48IS0tbGluayBleGVjdXRpdmUgdG8gPz8/Pz8tLT48ZyBjbGFzcz0ibGluayIgZGF0YS1lbnRpdHktMT0iZXhlY3V0aXZlIiBkYXRhLWVudGl0eS0yPSIuLi4uLiIgZGF0YS1zb3VyY2UtbGluZT0iMjkiIGRhdGEtdWlkPSJsbmsyMiIgaWQ9ImxpbmtfZXhlY3V0aXZlXy4uLi4uIj48cGF0aCBkPSJNODMuMTYsMjkwLjk0NjkgQzEwMS4zMSwyODAuNDI2OSAxMjguOTEsMjY1LjA5NjkgMTU0LDI1My45NDY5IEMxNzEuODMsMjQ2LjAxNjkgMTg2LjYwNTcsMjQwLjUyNzUgMjAzLjQ3NTcsMjM0LjgyNzUiIGZpbGw9Im5vbmUiIGlkPSJleGVjdXRpdmUtdG8tJiMxMjUyNTsmIzEyNDY0OyYjMTI0NTA7JiMxMjQ1NDsmIzEyNDg4OyIgc3R5bGU9InN0cm9rZTojMTgxODE4O3N0cm9rZS13aWR0aDoxOyIvPjxwb2x5Z29uIGZpbGw9IiMxODE4MTgiIHBvaW50cz0iMjA5LjE2LDIzMi45MDY5LDE5OS4zNTMxLDIzMS45OTgyLDIwNC40MjMxLDIzNC41MDc0LDIwMS45MTM5LDIzOS41NzczLDIwOS4xNiwyMzIuOTA2OSIgc3R5bGU9InN0cm9rZTojMTgxODE4O3N0cm9rZS13aWR0aDoxOyIvPjwvZz48IS0tbGluayBleGVjdXRpdmUgdG8gPz8/Pz8/Py0tPjxnIGNsYXNzPSJsaW5rIiBkYXRhLWVudGl0eS0xPSJleGVjdXRpdmUiIGRhdGEtZW50aXR5LTI9Ii4uLi4uLi4iIGRhdGEtc291cmNlLWxpbmU9IjMwIiBkYXRhLXVpZD0ibG5rMjMiIGlkPSJsaW5rX2V4ZWN1dGl2ZV8uLi4uLi4uIj48cGF0aCBkPSJNODMuNDksMjg0LjYyNjkgQzk0LjM3LDI3NC4zNzY5IDEwNy42LDI2MS4wNjY5IDExOCwyNDcuOTQ2OSBDMTM2Ljg1LDIyNC4xNzY5IDEzMC40OCwyMDkuMTE2OSAxNTQsMTg5Ljk0NjkgQzE2Ni4wOSwxODAuMDg2OSAxNzUuNzI2MSwxNzQuOTc4IDE5MC4yNjYxLDE2OS45NzgiIGZpbGw9Im5vbmUiIGlkPSJleGVjdXRpdmUtdG8tJiMxMjQ5NzsmIzEyNDczOyYjMTI1Mjc7JiMxMjU0MDsmIzEyNDg5OyYjMjI3OTM7JiMyNjM1NjsiIHN0eWxlPSJzdHJva2U6IzE4MTgxODtzdHJva2Utd2lkdGg6MTsiLz48cG9seWdvbiBmaWxsPSIjMTgxODE4IiBwb2ludHM9IjE5NS45NCwxNjguMDI2OSwxODYuMTI4NCwxNjcuMTcxLDE5MS4yMTE4LDE2OS42NTI4LDE4OC43Mjk5LDE3NC43MzYyLDE5NS45NCwxNjguMDI2OSIgc3R5bGU9InN0cm9rZTojMTgxODE4O3N0cm9rZS13aWR0aDoxOyIvPjwvZz48IS0tbGluayBhZG1pbiB0byA/Pz8/LS0+PGcgY2xhc3M9ImxpbmsiIGRhdGEtZW50aXR5LTE9ImFkbWluIiBkYXRhLWVudGl0eS0yPSIuLi4uIiBkYXRhLXNvdXJjZS1saW5lPSIzMiIgZGF0YS11aWQ9ImxuazI0IiBpZD0ibGlua19hZG1pbl8uLi4uIj48cGF0aCBkPSJNMTAyLjA4LDM3NS40OTY5IEMxMDcuNDksMzY5Ljk5NjkgMTEyLjkyLDM2NC4zNjY5IDExOCwzNTguOTQ2OSBDMTM0LjU4LDM0MS4yNTY5IDEzMy45NCwzMzEuNTY2OSAxNTQsMzE3Ljk0NjkgQzE3MC40MiwzMDYuNzk2OSAxODUuMzk5NiwzMDAuNzU1MyAyMDIuNzk5NiwyOTUuNjg1MyIgZmlsbD0ibm9uZSIgaWQ9ImFkbWluLXRvLSYjMTI1MjU7JiMxMjQ2NDsmIzEyNDUyOyYjMTI1MzE7IiBzdHlsZT0ic3Ryb2tlOiMxODE4MTg7c3Ryb2tlLXdpZHRoOjE7Ii8+PHBvbHlnb24gZmlsbD0iIzE4MTgxOCIgcG9pbnRzPSIyMDguNTYsMjk0LjAwNjksMTk4LjgwMDMsMjkyLjY4NDMsMjAzLjc1OTYsMjk1LjQwNTYsMjAxLjAzODMsMzAwLjM2NDksMjA4LjU2LDI5NC4wMDY5IiBzdHlsZT0ic3Ryb2tlOiMxODE4MTg7c3Ryb2tlLXdpZHRoOjE7Ii8+PC9nPjwhLS1saW5rIGFkbWluIHRvID8/Pz8/LS0+PGcgY2xhc3M9ImxpbmsiIGRhdGEtZW50aXR5LTE9ImFkbWluIiBkYXRhLWVudGl0eS0yPSIuLi4uLiIgZGF0YS1zb3VyY2UtbGluZT0iMzMiIGRhdGEtdWlkPSJsbmsyNSIgaWQ9ImxpbmtfYWRtaW5fLi4uLi4iPjxwYXRoIGQ9Ik0xMDUuNTgsMzc1LjU0NjkgQzExMC4xNSwzNzAuMjY2OSAxMTQuNDMsMzY0LjY3NjkgMTE4LDM1OC45NDY5IEMxNDQuMTEsMzE3LjA5NjkgMTE5LjMzLDI4OS4wNDY5IDE1NCwyNTMuOTQ2OSBDMTY2LjA5LDI0MS43MDY5IDE3Ny40MDA3LDIzNS44MTk0IDE5My40MjA3LDIzMS4xMzk0IiBmaWxsPSJub25lIiBpZD0iYWRtaW4tdG8tJiMxMjUyNTsmIzEyNDY0OyYjMTI0NTA7JiMxMjQ1NDsmIzEyNDg4OyIgc3R5bGU9InN0cm9rZTojMTgxODE4O3N0cm9rZS13aWR0aDoxOyIvPjxwb2x5Z29uIGZpbGw9IiMxODE4MTgiIHBvaW50cz0iMTk5LjE4LDIyOS40NTY5LDE4OS40MTk0LDIyOC4xNDExLDE5NC4zODA2LDIzMC44NTg5LDE5MS42NjI3LDIzNS44MjAxLDE5OS4xOCwyMjkuNDU2OSIgc3R5bGU9InN0cm9rZTojMTgxODE4O3N0cm9rZS13aWR0aDoxOyIvPjwvZz48IS0tbGluayBhZG1pbiB0byA/Pz8/Pz8/LS0+PGcgY2xhc3M9ImxpbmsiIGRhdGEtZW50aXR5LTE9ImFkbWluIiBkYXRhLWVudGl0eS0yPSIuLi4uLi4uIiBkYXRhLXNvdXJjZS1saW5lPSIzNCIgZGF0YS11aWQ9ImxuazI2IiBpZD0ibGlua19hZG1pbl8uLi4uLi4uIj48cGF0aCBkPSJNMTA2LjgsMzc1LjMwNjkgQzExMS4wNCwzNzAuMTM2OSAxMTQuOTEsMzY0LjY0NjkgMTE4LDM1OC45NDY5IEMxNTQuNjYsMjkxLjQ2NjkgMTAzLjcsMjQ3Ljk3NjkgMTU0LDE4OS45NDY5IEMxNjMuNTcsMTc4LjkwNjkgMTcxLjUwODIsMTczLjU3MTIgMTg1LjIyODIsMTY4LjY4MTIiIGZpbGw9Im5vbmUiIGlkPSJhZG1pbi10by0mIzEyNDk3OyYjMTI0NzM7JiMxMjUyNzsmIzEyNTQwOyYjMTI0ODk7JiMyMjc5MzsmIzI2MzU2OyIgc3R5bGU9InN0cm9rZTojMTgxODE4O3N0cm9rZS13aWR0aDoxOyIvPjxwb2x5Z29uIGZpbGw9IiMxODE4MTgiIHBvaW50cz0iMTkwLjg4LDE2Ni42NjY5LDE4MS4wNTk1LDE2NS45MjA2LDE4Ni4xNzAyLDE2OC4zNDU1LDE4My43NDUzLDE3My40NTYzLDE5MC44OCwxNjYuNjY2OSIgc3R5bGU9InN0cm9rZTojMTgxODE4O3N0cm9rZS13aWR0aDoxOyIvPjwvZz48IS0tbGluayBhZG1pbiB0byA/Pz8/Pz8tLT48ZyBjbGFzcz0ibGluayIgZGF0YS1lbnRpdHktMT0iYWRtaW4iIGRhdGEtZW50aXR5LTI9Ii4uLi4uLiIgZGF0YS1zb3VyY2UtbGluZT0iMzUiIGRhdGEtdWlkPSJsbmsyNyIgaWQ9ImxpbmtfYWRtaW5fLi4uLi4uIj48cGF0aCBkPSJNMTExLjQzLDQxMy45NDY5IEMxMzMuMzksNDEzLjk0NjkgMTUzLjU5LDQxMy45NDY5IDE3Ni44Niw0MTMuOTQ2OSIgZmlsbD0ibm9uZSIgaWQ9ImFkbWluLXRvLSYjMTI1MTg7JiMxMjU0MDsmIzEyNDcwOyYjMTI1NDA7JiMxOTk2ODsmIzM1MjM5OyIgc3R5bGU9InN0cm9rZTojMTgxODE4O3N0cm9rZS13aWR0aDoxOyIvPjxwb2x5Z29uIGZpbGw9IiMxODE4MTgiIHBvaW50cz0iMTgyLjg2LDQxMy45NDY5LDE3My44Niw0MDkuOTQ2OSwxNzcuODYsNDEzLjk0NjksMTczLjg2LDQxNy45NDY5LDE4Mi44Niw0MTMuOTQ2OSIgc3R5bGU9InN0cm9rZTojMTgxODE4O3N0cm9rZS13aWR0aDoxOyIvPjwvZz48IS0tbGluayBhZG1pbiB0byA/Pz8/Pz8tLT48ZyBjbGFzcz0ibGluayIgZGF0YS1lbnRpdHktMT0iYWRtaW4iIGRhdGEtZW50aXR5LTI9Ii4uLi4uLiIgZGF0YS1zb3VyY2UtbGluZT0iMzYiIGRhdGEtdWlkPSJsbmsyOCIgaWQ9ImxpbmtfYWRtaW5fLi4uLi4uIj48cGF0aCBkPSJNMTExLjQzLDM5Ni43OTY5IEMxNDIuMTcsMzg1LjkwNjkgMTc1LjU3MzgsMzc0LjA3ODcgMjAzLjI2MzgsMzY0LjI3ODciIGZpbGw9Im5vbmUiIGlkPSJhZG1pbi10by0mIzEyNTE4OyYjMTI1NDA7JiMxMjQ3MDsmIzEyNTQwOyYjMzAzMzE7JiMzNzY4MjsiIHN0eWxlPSJzdHJva2U6IzE4MTgxODtzdHJva2Utd2lkdGg6MTsiLz48cG9seWdvbiBmaWxsPSIjMTgxODE4IiBwb2ludHM9IjIwOC45MiwzNjIuMjc2OSwxOTkuMTAxMSwzNjEuNTA4OCwyMDQuMjA2NSwzNjMuOTQ1MSwyMDEuNzcwMiwzNjkuMDUwNCwyMDguOTIsMzYyLjI3NjkiIHN0eWxlPSJzdHJva2U6IzE4MTgxODtzdHJva2Utd2lkdGg6MTsiLz48L2c+PCEtLWxpbmsgYWRtaW4gdG8gPz8/Pz8/LS0+PGcgY2xhc3M9ImxpbmsiIGRhdGEtZW50aXR5LTE9ImFkbWluIiBkYXRhLWVudGl0eS0yPSIuLi4uLi4iIGRhdGEtc291cmNlLWxpbmU9IjM3IiBkYXRhLXVpZD0ibG5rMjkiIGlkPSJsaW5rX2FkbWluXy4uLi4uLiI+PHBhdGggZD0iTTc1LjkyLDQ1Mi40MDY5IEM4OS44OCw0ODguNDg2OSAxMTUuNDQsNTQxLjU5NjkgMTU0LDU3My45NDY5IEMxNjYuNDIsNTg0LjM2NjkgMTc2Ljc1NTIsNTg5LjY2ODkgMTkxLjg1NTIsNTk0LjQ5ODkiIGZpbGw9Im5vbmUiIGlkPSJhZG1pbi10by0mIzEyNTE4OyYjMTI1NDA7JiMxMjQ3MDsmIzEyNTQwOyYjMzIyMzI7JiMzODU5ODsiIHN0eWxlPSJzdHJva2U6IzE4MTgxODtzdHJva2Utd2lkdGg6MTsiLz48cG9seWdvbiBmaWxsPSIjMTgxODE4IiBwb2ludHM9IjE5Ny41Nyw1OTYuMzI2OSwxOTAuMjE2NSw1ODkuNzc1MSwxOTIuODA3Nyw1OTQuODAzNiwxODcuNzc5Miw1OTcuMzk0OCwxOTcuNTcsNTk2LjMyNjkiIHN0eWxlPSJzdHJva2U6IzE4MTgxODtzdHJva2Utd2lkdGg6MTsiLz48L2c+PCEtLWxpbmsgYWRtaW4gdG8gPz8/Pz8/LS0+PGcgY2xhc3M9ImxpbmsiIGRhdGEtZW50aXR5LTE9ImFkbWluIiBkYXRhLWVudGl0eS0yPSIuLi4uLi4iIGRhdGEtc291cmNlLWxpbmU9IjM4IiBkYXRhLXVpZD0ibG5rMzAiIGlkPSJsaW5rX2FkbWluXy4uLi4uLiI+PHBhdGggZD0iTTkyLDQ1Mi4yNzY5IEMxMDguNCw0NzEuNzY2OSAxMzAuMzMsNDk0LjUyNjkgMTU0LDUwOS45NDY5IEMxNjguMjcsNTE5LjI0NjkgMTc5Ljg4Miw1MjQuMzg3OSAxOTUuNDcyLDUyOS40Mzc5IiBmaWxsPSJub25lIiBpZD0iYWRtaW4tdG8tJiMxMjUxODsmIzEyNTQwOyYjMTI0NzA7JiMxMjU0MDsmIzIxMDY2OyYjMzg1MDA7IiBzdHlsZT0ic3Ryb2tlOiMxODE4MTg7c3Ryb2tlLXdpZHRoOjE7Ii8+PHBvbHlnb24gZmlsbD0iIzE4MTgxOCIgcG9pbnRzPSIyMDEuMTgsNTMxLjI4NjksMTkzLjg1MDYsNTI0LjcwODEsMTk2LjQyMzMsNTI5Ljc0NjEsMTkxLjM4NTMsNTMyLjMxODgsMjAxLjE4LDUzMS4yODY5IiBzdHlsZT0ic3Ryb2tlOiMxODE4MTg7c3Ryb2tlLXdpZHRoOjE7Ii8+PC9nPjwhLS1saW5rIGFkbWluIHRvID8/Pz8tLT48ZyBjbGFzcz0ibGluayIgZGF0YS1lbnRpdHktMT0iYWRtaW4iIGRhdGEtZW50aXR5LTI9Ii4uLi4iIGRhdGEtc291cmNlLWxpbmU9IjM5IiBkYXRhLXVpZD0ibG5rMzEiIGlkPSJsaW5rX2FkbWluXy4uLi4iPjxwYXRoIGQ9Ik0xMTEuNDMsNDMxLjA5NjkgQzE0NC4xNiw0NDIuNjg2OSAxODAuNjUzOCw0NTUuNjE1IDIwOC40ODM4LDQ2NS40NjUiIGZpbGw9Im5vbmUiIGlkPSJhZG1pbi10by0mIzI3MTc3OyYjMzg0ODA7JiMzNTM3MzsmIzIzNDUwOyIgc3R5bGU9InN0cm9rZTojMTgxODE4O3N0cm9rZS13aWR0aDoxOyIvPjxwb2x5Z29uIGZpbGw9IiMxODE4MTgiIHBvaW50cz0iMjE0LjE0LDQ2Ny40NjY5LDIwNi45OTAzLDQ2MC42OTMyLDIwOS40MjY1LDQ2NS43OTg2LDIwNC4zMjExLDQ2OC4yMzQ4LDIxNC4xNCw0NjcuNDY2OSIgc3R5bGU9InN0cm9rZTojMTgxODE4O3N0cm9rZS13aWR0aDoxOyIvPjwvZz48IS0tU1JDPVtUUDdWUWk4bTVDUmx5bkoxZ3RkWEEtblRHaXJTR0xsZXVYWUNXSkdlU3JEbTMwUEU2RmlaaFhsZV9aYnJ3OXhjaEJQell6TktRY3BKY3Y5LWx2Q2x2dm9Gd1FuQ2lWX1F6ZnE1eTA3bTFUV19PN3o0MXVKQXo4MVhQYzlCQm5xb05ER2pnWjdURDEzSGM2ZFhkRlZUeVpnRHZNTlRfUnRzUV9LUzlhVU9ROWZQREhXbnM2dUx5M2xXUk00eTBfdUs3YUh2WEhZYUgyc2ZyaHNQbjV4cVg2ZkxmWF9KNjhDek5KTjhHeFR4Ul9HR3Njd1VCTFBxMHc1TFd5R2VJS0ZEdXhhY3VKVXdXcV9IN2wwWHNFeld6dTVfdlJVX1pzMjdyVVQya0g5RmxRcWt5d1JSUm92eE93NWx4VnZjRE5fbWQxMnp4Wm5lVklSNWdIRnE2V2RIUkx1NHROdWVCZnNOZURsbmRRNHhraXNaQ3VJc0l5STVtWndNY3lyWXd5eEpNMzQ2R2trcmZ6ckw4QlJVUEtoVkpNOWZQcE1BbFBES3dJdjJMY21hOU0tTThINkxleW9KaU1SMEFEdWlBNkJFVzU3UzRmSFpfbVMwXS0tPjwvZz48L3N2Zz4=" class="uml" alt="uml diagram" title="" /></p>
<h3 id="_2">ユーザーロールと権限<a class="headerlink" href="#_2" title="Permanent link">&para;</a></h3>
<p>財務会計システムでは、業務の責任範囲に応じた4種類のロールを定義しています。</p>
<table>
<thead>
<tr>
<th>ロール</th>
<th>説明</th>
<th>主な権限</th>
</tr>
</thead>
<tbody>
<tr>
<td>ADMIN</td>
<td>システム管理者</td>
<td>全機能にアクセス可能、ユーザー管理</td>
</tr>
<tr>
<td>EXECUTIVE</td>
<td>経営者</td>
<td>財務諸表閲覧、財務分析、承認</td>
</tr>
<tr>
<td>MANAGER</td>
<td>経理マネージャー</td>
<td>仕訳承認、マスタ管理、帳票閲覧</td>
</tr>
<tr>
<td>ACCOUNTANT</td>
<td>経理担当者</td>
<td>仕訳入力、マスタ参照、帳票閲覧</td>
</tr>
</tbody>
</table>
<p><img src="data:image/svg+xml;base64,PHN2ZyB4bWxucz0iaHR0cDovL3d3dy53My5vcmcvMjAwMC9zdmciIHhtbG5zOnhsaW5rPSJodHRwOi8vd3d3LnczLm9yZy8xOTk5L3hsaW5rIiBjb250ZW50U3R5bGVUeXBlPSJ0ZXh0L2NzcyIgZGF0YS1kaWFncmFtLXR5cGU9IkNMQVNTIiBoZWlnaHQ9IjQ4NXB4IiBwcmVzZXJ2ZUFzcGVjdFJhdGlvPSJub25lIiBzdHlsZT0id2lkdGg6MzgzcHg7aGVpZ2h0OjQ4NXB4O2JhY2tncm91bmQ6I0ZGRkZGRjsiIHZlcnNpb249IjEuMSIgdmlld0JveD0iMCAwIDM4MyA0ODUiIHdpZHRoPSIzODNweCIgem9vbUFuZFBhbj0ibWFnbmlmeSI+PHRpdGxlPiYjMTI1MjU7JiMxMjU0MDsmIzEyNTIzOyYjMTIzOTI7JiMyNzE3NzsmIzM4NDgwOyYjMTIzOTg7JiMzODMwNjsmIzIwNDE4OzwvdGl0bGU+PGRlZnMvPjxnPjxnIGNsYXNzPSJ0aXRsZSIgZGF0YS1zb3VyY2UtbGluZT0iMSI+PHRleHQgZmlsbD0iIzAwMDAwMCIgZm9udC1mYW1pbHk9InNhbnMtc2VyaWYiIGZvbnQtc2l6ZT0iMTQiIGZvbnQtd2VpZ2h0PSJib2xkIiBsZW5ndGhBZGp1c3Q9InNwYWNpbmciIHRleHRMZW5ndGg9IjEyNS45OTk1IiB4PSIxMjEuOTgwMiIgeT0iMjIuOTk1MSI+JiMxMjUyNTsmIzEyNTQwOyYjMTI1MjM7JiMxMjM5MjsmIzI3MTc3OyYjMzg0ODA7JiMxMjM5ODsmIzM4MzA2OyYjMjA0MTg7PC90ZXh0PjwvZz48IS0tY2xhc3MgUm9sZS0tPjxnIGNsYXNzPSJlbnRpdHkiIGRhdGEtZW50aXR5PSJSb2xlIiBkYXRhLXNvdXJjZS1saW5lPSIzIiBkYXRhLXVpZD0iZW50MDAwMiIgaWQ9ImVudGl0eV9Sb2xlIj48cmVjdCBmaWxsPSIjRjFGMUYxIiBoZWlnaHQ9IjExMy4xODc1IiByeD0iMi41IiByeT0iMi41IiBzdHlsZT0ic3Ryb2tlOiMxODE4MTg7c3Ryb2tlLXdpZHRoOjAuNTsiIHdpZHRoPSIxMTAuMDIwNSIgeD0iMjUuNzkiIHk9IjQ0LjI5NjkiLz48ZWxsaXBzZSBjeD0iNjIuMDQxMSIgY3k9IjYwLjI5NjkiIGZpbGw9IiNBREQxQjIiIHJ4PSIxMSIgcnk9IjExIiBzdHlsZT0ic3Ryb2tlOiMxODE4MTg7c3Ryb2tlLXdpZHRoOjE7Ii8+PHBhdGggZD0iTTY1LjAwOTgsNjUuOTM3NSBRNjQuNDMxNyw2Ni4yMzQ0IDYzLjc5MTEsNjYuMzc1IFE2My4xNTA0LDY2LjUzMTMgNjIuNDQ3Myw2Ni41MzEzIFE1OS45NDczLDY2LjUzMTMgNTguNjE5Miw2NC44OTA2IFE1Ny4zMDY3LDYzLjIzNDQgNTcuMzA2Nyw2MC4xMDk0IFE1Ny4zMDY3LDU2Ljk4NDQgNTguNjE5Miw1NS4zMjgxIFE1OS45NDczLDUzLjY3MTkgNjIuNDQ3Myw1My42NzE5IFE2My4xNTA0LDUzLjY3MTkgNjMuNzkxMSw1My44MjgxIFE2NC40NDczLDUzLjk4NDQgNjUuMDA5OCw1NC4yODEzIEw2NS4wMDk4LDU3IFE2NC4zODQ4LDU2LjQyMTkgNjMuNzkxMSw1Ni4xNTYzIFE2My4xOTczLDU1Ljg3NSA2Mi41NzIzLDU1Ljg3NSBRNjEuMjI4Niw1NS44NzUgNjAuNTQxMSw1Ni45NTMxIFE1OS44NTM2LDU4LjAxNTYgNTkuODUzNiw2MC4xMDk0IFE1OS44NTM2LDYyLjIwMzEgNjAuNTQxMSw2My4yODEzIFE2MS4yMjg2LDY0LjM0MzggNjIuNTcyMyw2NC4zNDM4IFE2My4xOTczLDY0LjM0MzggNjMuNzkxMSw2NC4wNzgxIFE2NC4zODQ4LDYzLjc5NjkgNjUuMDA5OCw2My4yMTg4IEw2NS4wMDk4LDY1LjkzNzUgWiAiIGZpbGw9IiMwMDAwMDAiLz48dGV4dCBmaWxsPSIjMDAwMDAwIiBmb250LWZhbWlseT0ic2Fucy1zZXJpZiIgZm9udC1zaXplPSIxNCIgbGVuZ3RoQWRqdXN0PSJzcGFjaW5nIiB0ZXh0TGVuZ3RoPSIzMC43OTU5IiB4PSI4MC43NjM1IiB5PSI2NS4xNDM2Ij5Sb2xlPC90ZXh0PjxsaW5lIHN0eWxlPSJzdHJva2U6IzE4MTgxODtzdHJva2Utd2lkdGg6MC41OyIgeDE9IjI2Ljc5IiB4Mj0iMTM0LjgxMDUiIHkxPSI3Ni4yOTY5IiB5Mj0iNzYuMjk2OSIvPjx0ZXh0IGZpbGw9IiMwMDAwMDAiIGZvbnQtZmFtaWx5PSJzYW5zLXNlcmlmIiBmb250LXNpemU9IjE0IiBsZW5ndGhBZGp1c3Q9InNwYWNpbmciIHRleHRMZW5ndGg9IjQ3LjAzODEiIHg9IjMxLjc5IiB5PSI5My4yOTIiPkFETUlOPC90ZXh0Pjx0ZXh0IGZpbGw9IiMwMDAwMDAiIGZvbnQtZmFtaWx5PSJzYW5zLXNlcmlmIiBmb250LXNpemU9IjE0IiBsZW5ndGhBZGp1c3Q9InNwYWNpbmciIHRleHRMZW5ndGg9Ijc4LjQwODIiIHg9IjMxLjc5IiB5PSIxMDkuNTg4OSI+RVhFQ1VUSVZFPC90ZXh0Pjx0ZXh0IGZpbGw9IiMwMDAwMDAiIGZvbnQtZmFtaWx5PSJzYW5zLXNlcmlmIiBmb250LXNpemU9IjE0IiBsZW5ndGhBZGp1c3Q9InNwYWNpbmciIHRleHRMZW5ndGg9IjcxLjEyNzkiIHg9IjMxLjc5IiB5PSIxMjUuODg1NyI+TUFOQUdFUjwvdGV4dD48dGV4dCBmaWxsPSIjMDAwMDAwIiBmb250LWZhbWlseT0ic2Fucy1zZXJpZiIgZm9udC1zaXplPSIxNCIgbGVuZ3RoQWRqdXN0PSJzcGFjaW5nIiB0ZXh0TGVuZ3RoPSI5OC4wMjA1IiB4PSIzMS43OSIgeT0iMTQyLjE4MjYiPkFDQ09VTlRBTlQ8L3RleHQ+PGxpbmUgc3R5bGU9InN0cm9rZTojMTgxODE4O3N0cm9rZS13aWR0aDowLjU7IiB4MT0iMjYuNzkiIHgyPSIxMzQuODEwNSIgeTE9IjE0OS40ODQ0IiB5Mj0iMTQ5LjQ4NDQiLz48L2c+PCEtLWNsYXNzIFBlcm1pc3Npb24tLT48ZyBjbGFzcz0iZW50aXR5IiBkYXRhLWVudGl0eT0iUGVybWlzc2lvbiIgZGF0YS1zb3VyY2UtbGluZT0iMTAiIGRhdGEtdWlkPSJlbnQwMDAzIiBpZD0iZW50aXR5X1Blcm1pc3Npb24iPjxyZWN0IGZpbGw9IiNGMUYxRjEiIGhlaWdodD0iMjQzLjU2MjUiIHJ4PSIyLjUiIHJ5PSIyLjUiIHN0eWxlPSJzdHJva2U6IzE4MTgxODtzdHJva2Utd2lkdGg6MC41OyIgd2lkdGg9IjE0Ny42MDQ1IiB4PSI3IiB5PSIyMzQuNDg2OSIvPjxlbGxpcHNlIGN4PSIzOS43MDczIiBjeT0iMjUwLjQ4NjkiIGZpbGw9IiNBREQxQjIiIHJ4PSIxMSIgcnk9IjExIiBzdHlsZT0ic3Ryb2tlOiMxODE4MTg7c3Ryb2tlLXdpZHRoOjE7Ii8+PHBhdGggZD0iTTQyLjY3NjEsMjU2LjEyNzUgUTQyLjA5NzksMjU2LjQyNDQgNDEuNDU3MywyNTYuNTY1IFE0MC44MTY3LDI1Ni43MjEzIDQwLjExMzYsMjU2LjcyMTMgUTM3LjYxMzYsMjU2LjcyMTMgMzYuMjg1NCwyNTUuMDgwNiBRMzQuOTcyOSwyNTMuNDI0NCAzNC45NzI5LDI1MC4yOTk0IFEzNC45NzI5LDI0Ny4xNzQ0IDM2LjI4NTQsMjQ1LjUxODEgUTM3LjYxMzYsMjQzLjg2MTkgNDAuMTEzNiwyNDMuODYxOSBRNDAuODE2NywyNDMuODYxOSA0MS40NTczLDI0NC4wMTgxIFE0Mi4xMTM2LDI0NC4xNzQ0IDQyLjY3NjEsMjQ0LjQ3MTMgTDQyLjY3NjEsMjQ3LjE5IFE0Mi4wNTExLDI0Ni42MTE5IDQxLjQ1NzMsMjQ2LjM0NjMgUTQwLjg2MzYsMjQ2LjA2NSA0MC4yMzg2LDI0Ni4wNjUgUTM4Ljg5NDgsMjQ2LjA2NSAzOC4yMDczLDI0Ny4xNDMxIFEzNy41MTk4LDI0OC4yMDU2IDM3LjUxOTgsMjUwLjI5OTQgUTM3LjUxOTgsMjUyLjM5MzEgMzguMjA3MywyNTMuNDcxMyBRMzguODk0OCwyNTQuNTMzOCA0MC4yMzg2LDI1NC41MzM4IFE0MC44NjM2LDI1NC41MzM4IDQxLjQ1NzMsMjU0LjI2ODEgUTQyLjA1MTEsMjUzLjk4NjkgNDIuNjc2MSwyNTMuNDA4OCBMNDIuNjc2MSwyNTYuMTI3NSBaICIgZmlsbD0iIzAwMDAwMCIvPjx0ZXh0IGZpbGw9IiMwMDAwMDAiIGZvbnQtZmFtaWx5PSJzYW5zLXNlcmlmIiBmb250LXNpemU9IjE0IiBsZW5ndGhBZGp1c3Q9InNwYWNpbmciIHRleHRMZW5ndGg9Ijc2LjI1NDkiIHg9IjU3LjY0MjMiIHk9IjI1NS4zMzM2Ij5QZXJtaXNzaW9uPC90ZXh0PjxsaW5lIHN0eWxlPSJzdHJva2U6IzE4MTgxODtzdHJva2Utd2lkdGg6MC41OyIgeDE9IjgiIHgyPSIxNTMuNjA0NSIgeTE9IjI2Ni40ODY5IiB5Mj0iMjY2LjQ4NjkiLz48dGV4dCBmaWxsPSIjMDAwMDAwIiBmb250LWZhbWlseT0ic2Fucy1zZXJpZiIgZm9udC1zaXplPSIxNCIgbGVuZ3RoQWRqdXN0PSJzcGFjaW5nIiB0ZXh0TGVuZ3RoPSI4My42Mzc3IiB4PSIxMyIgeT0iMjgzLjQ4MiI+VVNFUl9SRUFEPC90ZXh0Pjx0ZXh0IGZpbGw9IiMwMDAwMDAiIGZvbnQtZmFtaWx5PSJzYW5zLXNlcmlmIiBmb250LXNpemU9IjE0IiBsZW5ndGhBZGp1c3Q9InNwYWNpbmciIHRleHRMZW5ndGg9Ijg5LjgwMzciIHg9IjEzIiB5PSIyOTkuNzc4OSI+VVNFUl9XUklURTwvdGV4dD48dGV4dCBmaWxsPSIjMDAwMDAwIiBmb250LWZhbWlseT0ic2Fucy1zZXJpZiIgZm9udC1zaXplPSIxNCIgbGVuZ3RoQWRqdXN0PSJzcGFjaW5nIiB0ZXh0TGVuZ3RoPSI5OC4zNzYiIHg9IjEzIiB5PSIzMTYuMDc1NyI+VVNFUl9ERUxFVEU8L3RleHQ+PHRleHQgZmlsbD0iIzAwMDAwMCIgZm9udC1mYW1pbHk9InNhbnMtc2VyaWYiIGZvbnQtc2l6ZT0iMTQiIGxlbmd0aEFkanVzdD0ic3BhY2luZyIgdGV4dExlbmd0aD0iMTE1LjM0OTYiIHg9IjEzIiB5PSIzMzIuMzcyNiI+QUNDT1VOVF9SRUFEPC90ZXh0Pjx0ZXh0IGZpbGw9IiMwMDAwMDAiIGZvbnQtZmFtaWx5PSJzYW5zLXNlcmlmIiBmb250LXNpemU9IjE0IiBsZW5ndGhBZGp1c3Q9InNwYWNpbmciIHRleHRMZW5ndGg9IjEyMS41MTU2IiB4PSIxMyIgeT0iMzQ4LjY2OTUiPkFDQ09VTlRfV1JJVEU8L3RleHQ+PHRleHQgZmlsbD0iIzAwMDAwMCIgZm9udC1mYW1pbHk9InNhbnMtc2VyaWYiIGZvbnQtc2l6ZT0iMTQiIGxlbmd0aEFkanVzdD0ic3BhY2luZyIgdGV4dExlbmd0aD0iMTA4LjkwMzMiIHg9IjEzIiB5PSIzNjQuOTY2NCI+Sk9VUk5BTF9SRUFEPC90ZXh0Pjx0ZXh0IGZpbGw9IiMwMDAwMDAiIGZvbnQtZmFtaWx5PSJzYW5zLXNlcmlmIiBmb250LXNpemU9IjE0IiBsZW5ndGhBZGp1c3Q9InNwYWNpbmciIHRleHRMZW5ndGg9IjExNS4wNjkzIiB4PSIxMyIgeT0iMzgxLjI2MzIiPkpPVVJOQUxfV1JJVEU8L3RleHQ+PHRleHQgZmlsbD0iIzAwMDAwMCIgZm9udC1mYW1pbHk9InNhbnMtc2VyaWYiIGZvbnQtc2l6ZT0iMTQiIGxlbmd0aEFkanVzdD0ic3BhY2luZyIgdGV4dExlbmd0aD0iMTM1LjYwNDUiIHg9IjEzIiB5PSIzOTcuNTYwMSI+Sk9VUk5BTF9BUFBST1ZFPC90ZXh0Pjx0ZXh0IGZpbGw9IiMwMDAwMDAiIGZvbnQtZmFtaWx5PSJzYW5zLXNlcmlmIiBmb250LXNpemU9IjE0IiBsZW5ndGhBZGp1c3Q9InNwYWNpbmciIHRleHRMZW5ndGg9IjEzNS4yMjg1IiB4PSIxMyIgeT0iNDEzLjg1NyI+Sk9VUk5BTF9DT05GSVJNPC90ZXh0Pjx0ZXh0IGZpbGw9IiMwMDAwMDAiIGZvbnQtZmFtaWx5PSJzYW5zLXNlcmlmIiBmb250LXNpemU9IjE0IiBsZW5ndGhBZGp1c3Q9InNwYWNpbmciIHRleHRMZW5ndGg9IjEwMi43NzgzIiB4PSIxMyIgeT0iNDMwLjE1MzkiPkxFREdFUl9SRUFEPC90ZXh0Pjx0ZXh0IGZpbGw9IiMwMDAwMDAiIGZvbnQtZmFtaWx5PSJzYW5zLXNlcmlmIiBmb250LXNpemU9IjE0IiBsZW5ndGhBZGp1c3Q9InNwYWNpbmciIHRleHRMZW5ndGg9IjEzMC4yOTMiIHg9IjEzIiB5PSI0NDYuNDUwNyI+U1RBVEVNRU5UX1JFQUQ8L3RleHQ+PHRleHQgZmlsbD0iIzAwMDAwMCIgZm9udC1mYW1pbHk9InNhbnMtc2VyaWYiIGZvbnQtc2l6ZT0iMTQiIGxlbmd0aEFkanVzdD0ic3BhY2luZyIgdGV4dExlbmd0aD0iMTEzLjgxMTUiIHg9IjEzIiB5PSI0NjIuNzQ3NiI+QU5BTFlTSVNfUkVBRDwvdGV4dD48bGluZSBzdHlsZT0ic3Ryb2tlOiMxODE4MTg7c3Ryb2tlLXdpZHRoOjAuNTsiIHgxPSI4IiB4Mj0iMTUzLjYwNDUiIHkxPSI0NzAuMDQ5NCIgeTI9IjQ3MC4wNDk0Ii8+PC9nPjxnIGNsYXNzPSJlbnRpdHkiIGRhdGEtZW50aXR5PSJHTU41IiBkYXRhLXNvdXJjZS1saW5lPSIyOCIgZGF0YS11aWQ9ImVudDAwMDYiIGlkPSJlbnRpdHlfR01ONSI+PHBhdGggZD0iTTE3MC42NCw2NS42MjY5IEwxNzAuNjQsOTYuODg2OSBMMTM2LjIxLDEwMC44ODY5IEwxNzAuNjQsMTA0Ljg4NjkgTDE3MC42NCwxMzYuMTU4MSBBMCwwIDAgMCAwIDE3MC42NCwxMzYuMTU4MSBMMzc2Ljk1OTksMTM2LjE1ODEgQTAsMCAwIDAgMCAzNzYuOTU5OSwxMzYuMTU4MSBMMzc2Ljk1OTksNzUuNjI2OSBMMzY2Ljk1OTksNjUuNjI2OSBMMTcwLjY0LDY1LjYyNjkgQTAsMCAwIDAgMCAxNzAuNjQsNjUuNjI2OSIgZmlsbD0iI0ZFRkZERCIgc3R5bGU9InN0cm9rZTojMTgxODE4O3N0cm9rZS13aWR0aDowLjU7Ii8+PHBhdGggZD0iTTM2Ni45NTk5LDY1LjYyNjkgTDM2Ni45NTk5LDc1LjYyNjkgTDM3Ni45NTk5LDc1LjYyNjkgTDM2Ni45NTk5LDY1LjYyNjkiIGZpbGw9IiNGRUZGREQiIHN0eWxlPSJzdHJva2U6IzE4MTgxODtzdHJva2Utd2lkdGg6MC41OyIvPjx0ZXh0IGZpbGw9IiMwMDAwMDAiIGZvbnQtZmFtaWx5PSJzYW5zLXNlcmlmIiBmb250LXNpemU9IjEzIiBsZW5ndGhBZGp1c3Q9InNwYWNpbmciIHRleHRMZW5ndGg9IjkxLjE5MDUiIHg9IjE3Ni42NCIgeT0iODIuNjkzOCI+QURNSU46ICYjMjA4NDA7JiMyNzE3NzsmIzM4NDgwOzwvdGV4dD48dGV4dCBmaWxsPSIjMDAwMDAwIiBmb250LWZhbWlseT0ic2Fucy1zZXJpZiIgZm9udC1zaXplPSIxMyIgbGVuZ3RoQWRqdXN0PSJzcGFjaW5nIiB0ZXh0TGVuZ3RoPSIxODUuMzE5OSIgeD0iMTc2LjY0IiB5PSI5Ny44MjY2Ij5FWEVDVVRJVkU6ICYjMzgzMjI7JiMzNTIzOTsmIzEyNTM5OyYjMjA5OTg7JiMyNjUxMjsmIzEyNTM5OyYjMjUyMTU7JiMzNTQ2OTs8L3RleHQ+PHRleHQgZmlsbD0iIzAwMDAwMCIgZm9udC1mYW1pbHk9InNhbnMtc2VyaWYiIGZvbnQtc2l6ZT0iMTMiIGxlbmd0aEFkanVzdD0ic3BhY2luZyIgdGV4dExlbmd0aD0iMTM5LjU1OTYiIHg9IjE3Ni42NCIgeT0iMTEyLjk1OTQiPk1BTkFHRVI6ICYjMjUyMTU7JiMzNTQ2OTsmIzEyNTM5OyYjMzE2NDk7JiMyOTcwMjs8L3RleHQ+PHRleHQgZmlsbD0iIzAwMDAwMCIgZm9udC1mYW1pbHk9InNhbnMtc2VyaWYiIGZvbnQtc2l6ZT0iMTMiIGxlbmd0aEFkanVzdD0ic3BhY2luZyIgdGV4dExlbmd0aD0iMTY0LjUzMTMiIHg9IjE3Ni42NCIgeT0iMTI4LjA5MjIiPkFDQ09VTlRBTlQ6ICYjMjA4Mzc7JiMyMTE0NzsmIzEyNTM5OyYjMjE0NDI7JiMyOTAzMTs8L3RleHQ+PC9nPjwhLS1saW5rIFJvbGUgdG8gUGVybWlzc2lvbi0tPjxnIGNsYXNzPSJsaW5rIiBkYXRhLWVudGl0eS0xPSJSb2xlIiBkYXRhLWVudGl0eS0yPSJQZXJtaXNzaW9uIiBkYXRhLXNvdXJjZS1saW5lPSIyNSIgZGF0YS11aWQ9ImxuazQiIGlkPSJsaW5rX1JvbGVfUGVybWlzc2lvbiI+PHBhdGggY29kZUxpbmU9IjI1IiBkPSJNODAuOCwxNTcuODA2OSBDODAuOCwxODAuMzk2OSA4MC44LDIwMS40MDY5IDgwLjgsMjI4LjA4NjkiIGZpbGw9Im5vbmUiIGlkPSJSb2xlLXRvLVBlcm1pc3Npb24iIHN0eWxlPSJzdHJva2U6IzE4MTgxODtzdHJva2Utd2lkdGg6MTsiLz48cG9seWdvbiBmaWxsPSIjMTgxODE4IiBwb2ludHM9IjgwLjgsMjM0LjA4NjksODQuOCwyMjUuMDg2OSw4MC44LDIyOS4wODY5LDc2LjgsMjI1LjA4NjksODAuOCwyMzQuMDg2OSIgc3R5bGU9InN0cm9rZTojMTgxODE4O3N0cm9rZS13aWR0aDoxOyIvPjx0ZXh0IGZpbGw9IiMwMDAwMDAiIGZvbnQtZmFtaWx5PSJzYW5zLXNlcmlmIiBmb250LXNpemU9IjEzIiBsZW5ndGhBZGp1c3Q9InNwYWNpbmciIHRleHRMZW5ndGg9IjIyLjk3ODUiIHg9IjgxLjgiIHk9IjIwMC41NTM4Ij5oYXM8L3RleHQ+PHRleHQgZmlsbD0iIzAwMDAwMCIgZm9udC1mYW1pbHk9InNhbnMtc2VyaWYiIGZvbnQtc2l6ZT0iMTMiIGxlbmd0aEFkanVzdD0ic3BhY2luZyIgdGV4dExlbmd0aD0iOC4yNzEiIHg9IjcyLjMyOSIgeT0iMTc3LjczMjYiPjE8L3RleHQ+PHRleHQgZmlsbD0iIzAwMDAwMCIgZm9udC1mYW1pbHk9InNhbnMtc2VyaWYiIGZvbnQtc2l6ZT0iMTMiIGxlbmd0aEFkanVzdD0ic3BhY2luZyIgdGV4dExlbmd0aD0iNi41IiB4PSI3NC42MzIzIiB5PSIyMjMuMjU1NCI+KjwvdGV4dD48L2c+PCEtLVNSQz1bTEwwX0l5RDA3RHRsS25tUFhHd2s2T0daRUtpYWtPSEJLZE1JZWo0NlFXOUREZDVlR3VpQU9nVTIyODg1UkxOaXVBaEczdENjUVJ3NWJydlp3X09VeHh0VmRuVnhTVGszQkZiV29KVEJ0YmJ0Y2FyVllfaVh3eXdBcVZYZHRXRldrRHNDOGFYM3hoaTBJM0txMGwwMUxibjdRczFXODhCZ2MwQWFBQVBCNzRHU1M1YjVCQXpweGFVSDdtT3l3RGdPN2I2Q0w4N3NnVVBXMExNaU91dk40dUlkOGlBc1B4Z0s4NXI4NVZhbDhTa1lQY0ZENVBGaVFqRzBFYlJock1CUkdHdXN5RHlFeFprcURMaW1WbE5vSE1iUldoTlEzZklzZkNxN1BEWGdIVzA0T1VwMVpkX01ZYzV1a2tuNEQyQjNqQnpnUmJzRTM4bEh2LTlibWZBbHo2Z0dGR3V2b0F4ZFl4VlJnWk9QMml3NVZGUUszbVNSRlBPWmR6RVJYcDl6cnlseDQtMDU5eDB5dTFTMF0tLT48L2c+PC9zdmc+" class="uml" alt="uml diagram" title="" /></p>
<h3 id="_3">権限マトリクス<a class="headerlink" href="#_3" title="Permanent link">&para;</a></h3>
<table>
<thead>
<tr>
<th>機能</th>
<th style="text-align: center;">ADMIN</th>
<th style="text-align: center;">EXECUTIVE</th>
<th style="text-align: center;">MANAGER</th>
<th style="text-align: center;">ACCOUNTANT</th>
</tr>
</thead>
<tbody>
<tr>
<td>ユーザー管理</td>
<td style="text-align: center;">✓</td>
<td style="text-align: center;">-</td>
<td style="text-align: center;">-</td>
<td style="text-align: center;">-</td>
</tr>
<tr>
<td>勘定科目参照</td>
<td style="text-align: center;">✓</td>
<td style="text-align: center;">✓</td>
<td style="text-align: center;">✓</td>
<td style="text-align: center;">✓</td>
</tr>
<tr>
<td>勘定科目登録・編集</td>
<td style="text-align: center;">✓</td>
<td style="text-align: center;">-</td>
<td style="text-align: center;">✓</td>
<td style="text-align: center;">-</td>
</tr>
<tr>
<td>仕訳入力</td>
<td style="text-align: center;">✓</td>
<td style="text-align: center;">-</td>
<td style="text-align: center;">✓</td>
<td style="text-align: center;">✓</td>
</tr>
<tr>
<td>仕訳承認</td>
<td style="text-align: center;">✓</td>
<td style="text-align: center;">✓</td>
<td style="text-align: center;">✓</td>
<td style="text-align: center;">-</td>
</tr>
<tr>
<td>仕訳確定</td>
<td style="text-align: center;">✓</td>
<td style="text-align: center;">-</td>
<td style="text-align: center;">✓</td>
<td style="text-align: center;">-</td>
</tr>
<tr>
<td>元帳閲覧</td>
<td style="text-align: center;">✓</td>
<td style="text-align: center;">✓</td>
<td style="text-align: center;">✓</td>
<td style="text-align: center;">✓</td>
</tr>
<tr>
<td>財務諸表閲覧</td>
<td style="text-align: center;">✓</td>
<td style="text-align: center;">✓</td>
<td style="text-align: center;">✓</td>
<td style="text-align: center;">✓</td>
</tr>
<tr>
<td>財務分析</td>
<td style="text-align: center;">✓</td>
<td style="text-align: center;">✓</td>
<td style="text-align: center;">✓</td>
<td style="text-align: center;">-</td>
</tr>
<tr>
<td>監査ログ閲覧</td>
<td style="text-align: center;">✓</td>
<td style="text-align: center;">✓</td>
<td style="text-align: center;">-</td>
<td style="text-align: center;">-</td>
</tr>
</tbody>
</table>
<hr />
<h2 id="252">25.2 ドメインモデル設計<a class="headerlink" href="#252" title="Permanent link">&para;</a></h2>
<h3 id="_4">ユーザーエンティティ<a class="headerlink" href="#_4" title="Permanent link">&para;</a></h3>
<p>ユーザーは、認証と権限管理の中心となるエンティティです。</p>
<p><img src="data:image/svg+xml;base64,PHN2ZyB4bWxucz0iaHR0cDovL3d3dy53My5vcmcvMjAwMC9zdmciIHhtbG5zOnhsaW5rPSJodHRwOi8vd3d3LnczLm9yZy8xOTk5L3hsaW5rIiBjb250ZW50U3R5bGVUeXBlPSJ0ZXh0L2NzcyIgZGF0YS1kaWFncmFtLXR5cGU9IkNMQVNTIiBoZWlnaHQ9IjUwMHB4IiBwcmVzZXJ2ZUFzcGVjdFJhdGlvPSJub25lIiBzdHlsZT0id2lkdGg6MTQ2MHB4O2hlaWdodDo1MDBweDtiYWNrZ3JvdW5kOiNGRkZGRkY7IiB2ZXJzaW9uPSIxLjEiIHZpZXdCb3g9IjAgMCAxNDYwIDUwMCIgd2lkdGg9IjE0NjBweCIgem9vbUFuZFBhbj0ibWFnbmlmeSI+PHRpdGxlPiYjMTI1MTg7JiMxMjU0MDsmIzEyNDcwOyYjMTI1NDA7JiMxMjQ4OTsmIzEyNTEzOyYjMTI0NTI7JiMxMjUzMTsmIzEyNTE0OyYjMTI0ODc7JiMxMjUyMzs8L3RpdGxlPjxkZWZzLz48Zz48ZyBjbGFzcz0idGl0bGUiIGRhdGEtc291cmNlLWxpbmU9IjEiPjx0ZXh0IGZpbGw9IiMwMDAwMDAiIGZvbnQtZmFtaWx5PSJzYW5zLXNlcmlmIiBmb250LXNpemU9IjE0IiBmb250LXdlaWdodD0iYm9sZCIgbGVuZ3RoQWRqdXN0PSJzcGFjaW5nIiB0ZXh0TGVuZ3RoPSIxNTMuOTk5MyIgeD0iNjQ2LjM5MTEiIHk9IjIyLjk5NTEiPiYjMTI1MTg7JiMxMjU0MDsmIzEyNDcwOyYjMTI1NDA7JiMxMjQ4OTsmIzEyNTEzOyYjMTI0NTI7JiMxMjUzMTsmIzEyNTE0OyYjMTI0ODc7JiMxMjUyMzs8L3RleHQ+PC9nPjwhLS1jbGFzcyBVc2VyLS0+PGcgY2xhc3M9ImVudGl0eSIgZGF0YS1lbnRpdHk9IlVzZXIiIGRhdGEtc291cmNlLWxpbmU9IjMiIGRhdGEtdWlkPSJlbnQwMDAyIiBpZD0iZW50aXR5X1VzZXIiPjxyZWN0IGZpbGw9IiNGMUYxRjEiIGhlaWdodD0iMjUxLjgyODEiIHJ4PSIyLjUiIHJ5PSIyLjUiIHN0eWxlPSJzdHJva2U6IzE4MTgxODtzdHJva2Utd2lkdGg6MC41OyIgd2lkdGg9IjIxMy4xMzM4IiB4PSI2MjIuOTUiIHk9IjQ0LjI5NjkiLz48ZWxsaXBzZSBjeD0iNzAyLjQwODUiIGN5PSI2NC40Mjk3IiBmaWxsPSIjQUREMUIyIiByeD0iMTEiIHJ5PSIxMSIgc3R5bGU9InN0cm9rZTojMTgxODE4O3N0cm9rZS13aWR0aDoxOyIvPjxwYXRoIGQ9Ik03MDUuMzc3Miw3MC4wNzAzIFE3MDQuNzk5MSw3MC4zNjcyIDcwNC4xNTg1LDcwLjUwNzggUTcwMy41MTc5LDcwLjY2NDEgNzAyLjgxNDcsNzAuNjY0MSBRNzAwLjMxNDcsNzAuNjY0MSA2OTguOTg2Niw2OS4wMjM0IFE2OTcuNjc0MSw2Ny4zNjcyIDY5Ny42NzQxLDY0LjI0MjIgUTY5Ny42NzQxLDYxLjExNzIgNjk4Ljk4NjYsNTkuNDYwOSBRNzAwLjMxNDcsNTcuODA0NyA3MDIuODE0Nyw1Ny44MDQ3IFE3MDMuNTE3OSw1Ny44MDQ3IDcwNC4xNTg1LDU3Ljk2MDkgUTcwNC44MTQ3LDU4LjExNzIgNzA1LjM3NzIsNTguNDE0MSBMNzA1LjM3NzIsNjEuMTMyOCBRNzA0Ljc1MjIsNjAuNTU0NyA3MDQuMTU4NSw2MC4yODkxIFE3MDMuNTY0Nyw2MC4wMDc4IDcwMi45Mzk3LDYwLjAwNzggUTcwMS41OTYsNjAuMDA3OCA3MDAuOTA4NSw2MS4wODU5IFE3MDAuMjIxLDYyLjE0ODQgNzAwLjIyMSw2NC4yNDIyIFE3MDAuMjIxLDY2LjMzNTkgNzAwLjkwODUsNjcuNDE0MSBRNzAxLjU5Niw2OC40NzY2IDcwMi45Mzk3LDY4LjQ3NjYgUTcwMy41NjQ3LDY4LjQ3NjYgNzA0LjE1ODUsNjguMjEwOSBRNzA0Ljc1MjIsNjcuOTI5NyA3MDUuMzc3Miw2Ny4zNTE2IEw3MDUuMzc3Miw3MC4wNzAzIFogIiBmaWxsPSIjMDAwMDAwIi8+PHRleHQgZmlsbD0iIzAwMDAwMCIgZm9udC1mYW1pbHk9InNhbnMtc2VyaWYiIGZvbnQtc2l6ZT0iMTIiIGZvbnQtc3R5bGU9Iml0YWxpYyIgbGVuZ3RoQWRqdXN0PSJzcGFjaW5nIiB0ZXh0TGVuZ3RoPSI0OS43MTY4IiB4PSI3MjAuOTA4NSIgeT0iNjAuNDM1NSI+JiMxNzE7RW50aXR5JiMxODc7PC90ZXh0Pjx0ZXh0IGZpbGw9IiMwMDAwMDAiIGZvbnQtZmFtaWx5PSJzYW5zLXNlcmlmIiBmb250LXNpemU9IjE0IiBsZW5ndGhBZGp1c3Q9InNwYWNpbmciIHRleHRMZW5ndGg9IjMxLjkxMDIiIHg9IjcyOS44MTE4IiB5PSI3Ni4yNjA3Ij5Vc2VyPC90ZXh0PjxsaW5lIHN0eWxlPSJzdHJva2U6IzE4MTgxODtzdHJva2Utd2lkdGg6MC41OyIgeDE9IjYyMy45NSIgeDI9IjgzNS4wODM4IiB5MT0iODQuNTYyNSIgeTI9Ijg0LjU2MjUiLz48cmVjdCBmaWxsPSJub25lIiBoZWlnaHQ9IjYiIHN0eWxlPSJzdHJva2U6I0M4MjkzMDtzdHJva2Utd2lkdGg6MTsiIHdpZHRoPSI2IiB4PSI2MzAuOTUiIHk9Ijk1LjIxMDkiLz48dGV4dCBmaWxsPSIjMDAwMDAwIiBmb250LWZhbWlseT0ic2Fucy1zZXJpZiIgZm9udC1zaXplPSIxNCIgbGVuZ3RoQWRqdXN0PSJzcGFjaW5nIiB0ZXh0TGVuZ3RoPSI5Ny42NDQ1IiB4PSI2NDIuOTUiIHk9IjEwMS41NTc2Ij51c2VySWQ6IFVzZXJJZDwvdGV4dD48cmVjdCBmaWxsPSJub25lIiBoZWlnaHQ9IjYiIHN0eWxlPSJzdHJva2U6I0M4MjkzMDtzdHJva2Utd2lkdGg6MTsiIHdpZHRoPSI2IiB4PSI2MzAuOTUiIHk9IjExMS41MDc4Ii8+PHRleHQgZmlsbD0iIzAwMDAwMCIgZm9udC1mYW1pbHk9InNhbnMtc2VyaWYiIGZvbnQtc2l6ZT0iMTQiIGxlbmd0aEFkanVzdD0ic3BhY2luZyIgdGV4dExlbmd0aD0iMTQyLjE0NjUiIHg9IjY0Mi45NSIgeT0iMTE3Ljg1NDUiPnBhc3N3b3JkOiBQYXNzd29yZDwvdGV4dD48cmVjdCBmaWxsPSJub25lIiBoZWlnaHQ9IjYiIHN0eWxlPSJzdHJva2U6I0M4MjkzMDtzdHJva2Utd2lkdGg6MTsiIHdpZHRoPSI2IiB4PSI2MzAuOTUiIHk9IjEyNy44MDQ3Ii8+PHRleHQgZmlsbD0iIzAwMDAwMCIgZm9udC1mYW1pbHk9InNhbnMtc2VyaWYiIGZvbnQtc2l6ZT0iMTQiIGxlbmd0aEFkanVzdD0ic3BhY2luZyIgdGV4dExlbmd0aD0iMTIyLjA4MyIgeD0iNjQyLjk1IiB5PSIxMzQuMTUxNCI+bmFtZTogVXNlck5hbWU8L3RleHQ+PHJlY3QgZmlsbD0ibm9uZSIgaGVpZ2h0PSI2IiBzdHlsZT0ic3Ryb2tlOiNDODI5MzA7c3Ryb2tlLXdpZHRoOjE7IiB3aWR0aD0iNiIgeD0iNjMwLjk1IiB5PSIxNDQuMTAxNiIvPjx0ZXh0IGZpbGw9IiMwMDAwMDAiIGZvbnQtZmFtaWx5PSJzYW5zLXNlcmlmIiBmb250LXNpemU9IjE0IiBsZW5ndGhBZGp1c3Q9InNwYWNpbmciIHRleHRMZW5ndGg9Ijg2LjYxODIiIHg9IjY0Mi45NSIgeT0iMTUwLjQ0ODIiPmVtYWlsOiBFbWFpbDwvdGV4dD48cmVjdCBmaWxsPSJub25lIiBoZWlnaHQ9IjYiIHN0eWxlPSJzdHJva2U6I0M4MjkzMDtzdHJva2Utd2lkdGg6MTsiIHdpZHRoPSI2IiB4PSI2MzAuOTUiIHk9IjE2MC4zOTg0Ii8+PHRleHQgZmlsbD0iIzAwMDAwMCIgZm9udC1mYW1pbHk9InNhbnMtc2VyaWYiIGZvbnQtc2l6ZT0iMTQiIGxlbmd0aEFkanVzdD0ic3BhY2luZyIgdGV4dExlbmd0aD0iNjYuNzg3MSIgeD0iNjQyLjk1IiB5PSIxNjYuNzQ1MSI+cm9sZTogUm9sZTwvdGV4dD48cmVjdCBmaWxsPSJub25lIiBoZWlnaHQ9IjYiIHN0eWxlPSJzdHJva2U6I0M4MjkzMDtzdHJva2Utd2lkdGg6MTsiIHdpZHRoPSI2IiB4PSI2MzAuOTUiIHk9IjE3Ni42OTUzIi8+PHRleHQgZmlsbD0iIzAwMDAwMCIgZm9udC1mYW1pbHk9InNhbnMtc2VyaWYiIGZvbnQtc2l6ZT0iMTQiIGxlbmd0aEFkanVzdD0ic3BhY2luZyIgdGV4dExlbmd0aD0iMTI4LjcwNyIgeD0iNjQyLjk1IiB5PSIxODMuMDQyIj5zdGF0dXM6IFVzZXJTdGF0dXM8L3RleHQ+PHJlY3QgZmlsbD0ibm9uZSIgaGVpZ2h0PSI2IiBzdHlsZT0ic3Ryb2tlOiNDODI5MzA7c3Ryb2tlLXdpZHRoOjE7IiB3aWR0aD0iNiIgeD0iNjMwLjk1IiB5PSIxOTIuOTkyMiIvPjx0ZXh0IGZpbGw9IiMwMDAwMDAiIGZvbnQtZmFtaWx5PSJzYW5zLXNlcmlmIiBmb250LXNpemU9IjE0IiBsZW5ndGhBZGp1c3Q9InNwYWNpbmciIHRleHRMZW5ndGg9IjE4Mi41NTM3IiB4PSI2NDIuOTUiIHk9IjE5OS4zMzg5Ij5jcmVhdGVkQXQ6IExvY2FsRGF0ZVRpbWU8L3RleHQ+PHJlY3QgZmlsbD0ibm9uZSIgaGVpZ2h0PSI2IiBzdHlsZT0ic3Ryb2tlOiNDODI5MzA7c3Ryb2tlLXdpZHRoOjE7IiB3aWR0aD0iNiIgeD0iNjMwLjk1IiB5PSIyMDkuMjg5MSIvPjx0ZXh0IGZpbGw9IiMwMDAwMDAiIGZvbnQtZmFtaWx5PSJzYW5zLXNlcmlmIiBmb250LXNpemU9IjE0IiBsZW5ndGhBZGp1c3Q9InNwYWNpbmciIHRleHRMZW5ndGg9IjE4Ny4xMzM4IiB4PSI2NDIuOTUiIHk9IjIxNS42MzU3Ij51cGRhdGVkQXQ6IExvY2FsRGF0ZVRpbWU8L3RleHQ+PGxpbmUgc3R5bGU9InN0cm9rZTojMTgxODE4O3N0cm9rZS13aWR0aDowLjU7IiB4MT0iNjIzLjk1IiB4Mj0iODM1LjA4MzgiIHkxPSIyMjIuOTM3NSIgeTI9IjIyMi45Mzc1Ii8+PGVsbGlwc2UgY3g9IjYzMy45NSIgY3k9IjIzNi41ODU5IiBmaWxsPSIjODRCRTg0IiByeD0iMyIgcnk9IjMiIHN0eWxlPSJzdHJva2U6IzAzODA0ODtzdHJva2Utd2lkdGg6MTsiLz48dGV4dCBmaWxsPSIjMDAwMDAwIiBmb250LWZhbWlseT0ic2Fucy1zZXJpZiIgZm9udC1zaXplPSIxNCIgbGVuZ3RoQWRqdXN0PSJzcGFjaW5nIiB0ZXh0TGVuZ3RoPSI2NS40OTUxIiB4PSI2NDIuOTUiIHk9IjIzOS45MzI2Ij5vZigpOiBVc2VyPC90ZXh0PjxlbGxpcHNlIGN4PSI2MzMuOTUiIGN5PSIyNTIuODgyOCIgZmlsbD0iIzg0QkU4NCIgcng9IjMiIHJ5PSIzIiBzdHlsZT0ic3Ryb2tlOiMwMzgwNDg7c3Ryb2tlLXdpZHRoOjE7Ii8+PHRleHQgZmlsbD0iIzAwMDAwMCIgZm9udC1mYW1pbHk9InNhbnMtc2VyaWYiIGZvbnQtc2l6ZT0iMTQiIGxlbmd0aEFkanVzdD0ic3BhY2luZyIgdGV4dExlbmd0aD0iMTY5Ljc5MSIgeD0iNjQyLjk1IiB5PSIyNTYuMjI5NSI+Y2hhbmdlUGFzc3dvcmQoKTogVXNlcjwvdGV4dD48ZWxsaXBzZSBjeD0iNjMzLjk1IiBjeT0iMjY5LjE3OTciIGZpbGw9IiM4NEJFODQiIHJ4PSIzIiByeT0iMyIgc3R5bGU9InN0cm9rZTojMDM4MDQ4O3N0cm9rZS13aWR0aDoxOyIvPjx0ZXh0IGZpbGw9IiMwMDAwMDAiIGZvbnQtZmFtaWx5PSJzYW5zLXNlcmlmIiBmb250LXNpemU9IjE0IiBsZW5ndGhBZGp1c3Q9InNwYWNpbmciIHRleHRMZW5ndGg9IjEwOC42MjMiIHg9IjY0Mi45NSIgeT0iMjcyLjUyNjQiPmFjdGl2YXRlKCk6IFVzZXI8L3RleHQ+PGVsbGlwc2UgY3g9IjYzMy45NSIgY3k9IjI4NS40NzY2IiBmaWxsPSIjODRCRTg0IiByeD0iMyIgcnk9IjMiIHN0eWxlPSJzdHJva2U6IzAzODA0ODtzdHJva2Utd2lkdGg6MTsiLz48dGV4dCBmaWxsPSIjMDAwMDAwIiBmb250LWZhbWlseT0ic2Fucy1zZXJpZiIgZm9udC1zaXplPSIxNCIgbGVuZ3RoQWRqdXN0PSJzcGFjaW5nIiB0ZXh0TGVuZ3RoPSIxMjYuMTIzIiB4PSI2NDIuOTUiIHk9IjI4OC44MjMyIj5kZWFjdGl2YXRlKCk6IFVzZXI8L3RleHQ+PC9nPjwhLS1jbGFzcyBVc2VySWQtLT48ZyBjbGFzcz0iZW50aXR5IiBkYXRhLWVudGl0eT0iVXNlcklkIiBkYXRhLXNvdXJjZS1saW5lPSIxOCIgZGF0YS11aWQ9ImVudDAwMDMiIGlkPSJlbnRpdHlfVXNlcklkIj48cmVjdCBmaWxsPSIjRjFGMUYxIiBoZWlnaHQ9Ijg4Ljg1OTQiIHJ4PSIyLjUiIHJ5PSIyLjUiIHN0eWxlPSJzdHJva2U6IzE4MTgxODtzdHJva2Utd2lkdGg6MC41OyIgd2lkdGg9IjE3MS4wMzgxIiB4PSI3IiB5PSIzODAuNTc2OSIvPjxlbGxpcHNlIGN4PSI0NS4yMDgiIGN5PSI0MDAuNzA5NyIgZmlsbD0iI0FERDFCMiIgcng9IjExIiByeT0iMTEiIHN0eWxlPSJzdHJva2U6IzE4MTgxODtzdHJva2Utd2lkdGg6MTsiLz48cGF0aCBkPSJNNDguMTc2Nyw0MDYuMzUwMyBRNDcuNTk4Niw0MDYuNjQ3MiA0Ni45NTgsNDA2Ljc4NzggUTQ2LjMxNzMsNDA2Ljk0NDEgNDUuNjE0Miw0MDYuOTQ0MSBRNDMuMTE0Miw0MDYuOTQ0MSA0MS43ODYxLDQwNS4zMDM0IFE0MC40NzM2LDQwMy42NDcyIDQwLjQ3MzYsNDAwLjUyMjIgUTQwLjQ3MzYsMzk3LjM5NzIgNDEuNzg2MSwzOTUuNzQwOSBRNDMuMTE0MiwzOTQuMDg0NyA0NS42MTQyLDM5NC4wODQ3IFE0Ni4zMTczLDM5NC4wODQ3IDQ2Ljk1OCwzOTQuMjQwOSBRNDcuNjE0MiwzOTQuMzk3MiA0OC4xNzY3LDM5NC42OTQxIEw0OC4xNzY3LDM5Ny40MTI4IFE0Ny41NTE3LDM5Ni44MzQ3IDQ2Ljk1OCwzOTYuNTY5MSBRNDYuMzY0MiwzOTYuMjg3OCA0NS43MzkyLDM5Ni4yODc4IFE0NC4zOTU1LDM5Ni4yODc4IDQzLjcwOCwzOTcuMzY1OSBRNDMuMDIwNSwzOTguNDI4NCA0My4wMjA1LDQwMC41MjIyIFE0My4wMjA1LDQwMi42MTU5IDQzLjcwOCw0MDMuNjk0MSBRNDQuMzk1NSw0MDQuNzU2NiA0NS43MzkyLDQwNC43NTY2IFE0Ni4zNjQyLDQwNC43NTY2IDQ2Ljk1OCw0MDQuNDkwOSBRNDcuNTUxNyw0MDQuMjA5NyA0OC4xNzY3LDQwMy42MzE2IEw0OC4xNzY3LDQwNi4zNTAzIFogIiBmaWxsPSIjMDAwMDAwIi8+PHRleHQgZmlsbD0iIzAwMDAwMCIgZm9udC1mYW1pbHk9InNhbnMtc2VyaWYiIGZvbnQtc2l6ZT0iMTIiIGZvbnQtc3R5bGU9Iml0YWxpYyIgbGVuZ3RoQWRqdXN0PSJzcGFjaW5nIiB0ZXh0TGVuZ3RoPSI5MS40NjQ4IiB4PSI2Mi4zNjUzIiB5PSIzOTYuNzE1NSI+JiMxNzE7VmFsdWUgT2JqZWN0JiMxODc7PC90ZXh0Pjx0ZXh0IGZpbGw9IiMwMDAwMDAiIGZvbnQtZmFtaWx5PSJzYW5zLXNlcmlmIiBmb250LXNpemU9IjE0IiBsZW5ndGhBZGp1c3Q9InNwYWNpbmciIHRleHRMZW5ndGg9IjQ0LjkyNTgiIHg9Ijg1LjYzNDgiIHk9IjQxMi41NDA3Ij5Vc2VySWQ8L3RleHQ+PGxpbmUgc3R5bGU9InN0cm9rZTojMTgxODE4O3N0cm9rZS13aWR0aDowLjU7IiB4MT0iOCIgeDI9IjE3Ny4wMzgxIiB5MT0iNDIwLjg0MjUiIHkyPSI0MjAuODQyNSIvPjxyZWN0IGZpbGw9Im5vbmUiIGhlaWdodD0iNiIgc3R5bGU9InN0cm9rZTojQzgyOTMwO3N0cm9rZS13aWR0aDoxOyIgd2lkdGg9IjYiIHg9IjE1IiB5PSI0MzEuNDkwOSIvPjx0ZXh0IGZpbGw9IiMwMDAwMDAiIGZvbnQtZmFtaWx5PSJzYW5zLXNlcmlmIiBmb250LXNpemU9IjE0IiBsZW5ndGhBZGp1c3Q9InNwYWNpbmciIHRleHRMZW5ndGg9Ijg5LjE4ODUiIHg9IjI3IiB5PSI0MzcuODM3NiI+dmFsdWU6IFN0cmluZzwvdGV4dD48bGluZSBzdHlsZT0ic3Ryb2tlOiMxODE4MTg7c3Ryb2tlLXdpZHRoOjAuNTsiIHgxPSI4IiB4Mj0iMTc3LjAzODEiIHkxPSI0NDUuMTM5NCIgeTI9IjQ0NS4xMzk0Ii8+PGVsbGlwc2UgY3g9IjE4IiBjeT0iNDU4Ljc4NzgiIGZpbGw9IiM4NEJFODQiIHJ4PSIzIiByeT0iMyIgc3R5bGU9InN0cm9rZTojMDM4MDQ4O3N0cm9rZS13aWR0aDoxOyIvPjx0ZXh0IGZpbGw9IiMwMDAwMDAiIGZvbnQtZmFtaWx5PSJzYW5zLXNlcmlmIiBmb250LXNpemU9IjE0IiBsZW5ndGhBZGp1c3Q9InNwYWNpbmciIHRleHRMZW5ndGg9IjE0NS4wMzgxIiB4PSIyNyIgeT0iNDYyLjEzNDUiPlVzZXJJZCh2YWx1ZTogU3RyaW5nKTwvdGV4dD48L2c+PCEtLWNsYXNzIFBhc3N3b3JkLS0+PGcgY2xhc3M9ImVudGl0eSIgZGF0YS1lbnRpdHk9IlBhc3N3b3JkIiBkYXRhLXNvdXJjZS1saW5lPSIyMyIgZGF0YS11aWQ9ImVudDAwMDQiIGlkPSJlbnRpdHlfUGFzc3dvcmQiPjxyZWN0IGZpbGw9IiNGMUYxRjEiIGhlaWdodD0iMTIxLjQ1MzEiIHJ4PSIyLjUiIHJ5PSIyLjUiIHN0eWxlPSJzdHJva2U6IzE4MTgxODtzdHJva2Utd2lkdGg6MC41OyIgd2lkdGg9IjMwNS4yNDgiIHg9IjIxMi45IiB5PSIzNjQuMjc2OSIvPjxlbGxpcHNlIGN4PSIzMTcuNTQxNiIgY3k9IjM4NC40MDk3IiBmaWxsPSIjQUREMUIyIiByeD0iMTEiIHJ5PSIxMSIgc3R5bGU9InN0cm9rZTojMTgxODE4O3N0cm9rZS13aWR0aDoxOyIvPjxwYXRoIGQ9Ik0zMjAuNTEwNCwzOTAuMDUwMyBRMzE5LjkzMjIsMzkwLjM0NzIgMzE5LjI5MTYsMzkwLjQ4NzggUTMxOC42NTEsMzkwLjY0NDEgMzE3Ljk0NzksMzkwLjY0NDEgUTMxNS40NDc5LDM5MC42NDQxIDMxNC4xMTk3LDM4OS4wMDM0IFEzMTIuODA3MiwzODcuMzQ3MiAzMTIuODA3MiwzODQuMjIyMiBRMzEyLjgwNzIsMzgxLjA5NzIgMzE0LjExOTcsMzc5LjQ0MDkgUTMxNS40NDc5LDM3Ny43ODQ3IDMxNy45NDc5LDM3Ny43ODQ3IFEzMTguNjUxLDM3Ny43ODQ3IDMxOS4yOTE2LDM3Ny45NDA5IFEzMTkuOTQ3OSwzNzguMDk3MiAzMjAuNTEwNCwzNzguMzk0MSBMMzIwLjUxMDQsMzgxLjExMjggUTMxOS44ODU0LDM4MC41MzQ3IDMxOS4yOTE2LDM4MC4yNjkxIFEzMTguNjk3OSwzNzkuOTg3OCAzMTguMDcyOSwzNzkuOTg3OCBRMzE2LjcyOTEsMzc5Ljk4NzggMzE2LjA0MTYsMzgxLjA2NTkgUTMxNS4zNTQxLDM4Mi4xMjg0IDMxNS4zNTQxLDM4NC4yMjIyIFEzMTUuMzU0MSwzODYuMzE1OSAzMTYuMDQxNiwzODcuMzk0MSBRMzE2LjcyOTEsMzg4LjQ1NjYgMzE4LjA3MjksMzg4LjQ1NjYgUTMxOC42OTc5LDM4OC40NTY2IDMxOS4yOTE2LDM4OC4xOTA5IFEzMTkuODg1NCwzODcuOTA5NyAzMjAuNTEwNCwzODcuMzMxNiBMMzIwLjUxMDQsMzkwLjA1MDMgWiAiIGZpbGw9IiMwMDAwMDAiLz48dGV4dCBmaWxsPSIjMDAwMDAwIiBmb250LWZhbWlseT0ic2Fucy1zZXJpZiIgZm9udC1zaXplPSIxMiIgZm9udC1zdHlsZT0iaXRhbGljIiBsZW5ndGhBZGp1c3Q9InNwYWNpbmciIHRleHRMZW5ndGg9IjkxLjQ2NDgiIHg9IjMzNi4wNDE2IiB5PSIzODAuNDE1NSI+JiMxNzE7VmFsdWUgT2JqZWN0JiMxODc7PC90ZXh0Pjx0ZXh0IGZpbGw9IiMwMDAwMDAiIGZvbnQtZmFtaWx5PSJzYW5zLXNlcmlmIiBmb250LXNpemU9IjE0IiBsZW5ndGhBZGp1c3Q9InNwYWNpbmciIHRleHRMZW5ndGg9IjY2LjI2NzYiIHg9IjM0OC42NDAyIiB5PSIzOTYuMjQwNyI+UGFzc3dvcmQ8L3RleHQ+PGxpbmUgc3R5bGU9InN0cm9rZTojMTgxODE4O3N0cm9rZS13aWR0aDowLjU7IiB4MT0iMjEzLjkiIHgyPSI1MTcuMTQ4IiB5MT0iNDA0LjU0MjUiIHkyPSI0MDQuNTQyNSIvPjxyZWN0IGZpbGw9Im5vbmUiIGhlaWdodD0iNiIgc3R5bGU9InN0cm9rZTojQzgyOTMwO3N0cm9rZS13aWR0aDoxOyIgd2lkdGg9IjYiIHg9IjIyMC45IiB5PSI0MTUuMTkwOSIvPjx0ZXh0IGZpbGw9IiMwMDAwMDAiIGZvbnQtZmFtaWx5PSJzYW5zLXNlcmlmIiBmb250LXNpemU9IjE0IiBsZW5ndGhBZGp1c3Q9InNwYWNpbmciIHRleHRMZW5ndGg9Ijg5LjE4ODUiIHg9IjIzMi45IiB5PSI0MjEuNTM3NiI+dmFsdWU6IFN0cmluZzwvdGV4dD48bGluZSBzdHlsZT0ic3Ryb2tlOiMxODE4MTg7c3Ryb2tlLXdpZHRoOjAuNTsiIHgxPSIyMTMuOSIgeDI9IjUxNy4xNDgiIHkxPSI0MjguODM5NCIgeTI9IjQyOC44Mzk0Ii8+PGVsbGlwc2UgY3g9IjIyMy45IiBjeT0iNDQyLjQ4NzgiIGZpbGw9IiM4NEJFODQiIHJ4PSIzIiByeT0iMyIgc3R5bGU9InN0cm9rZTojMDM4MDQ4O3N0cm9rZS13aWR0aDoxOyIvPjx0ZXh0IGZpbGw9IiMwMDAwMDAiIGZvbnQtZmFtaWx5PSJzYW5zLXNlcmlmIiBmb250LXNpemU9IjE0IiBsZW5ndGhBZGp1c3Q9InNwYWNpbmciIHRleHRMZW5ndGg9IjE2Ni4zNzk5IiB4PSIyMzIuOSIgeT0iNDQ1LjgzNDUiPlBhc3N3b3JkKHZhbHVlOiBTdHJpbmcpPC90ZXh0PjxyZWN0IGZpbGw9IiNGMjRENUMiIGhlaWdodD0iNiIgc3R5bGU9InN0cm9rZTojQzgyOTMwO3N0cm9rZS13aWR0aDoxOyIgd2lkdGg9IjYiIHg9IjIyMC45IiB5PSI0NTUuNzg0NyIvPjx0ZXh0IGZpbGw9IiMwMDAwMDAiIGZvbnQtZmFtaWx5PSJzYW5zLXNlcmlmIiBmb250LXNpemU9IjE0IiBsZW5ndGhBZGp1c3Q9InNwYWNpbmciIHRleHRMZW5ndGg9IjE4MS44NzAxIiB4PSIyMzIuOSIgeT0iNDYyLjEzMTQiPmNoZWNrUG9saWN5KHZhbHVlOiBTdHJpbmcpPC90ZXh0PjxlbGxpcHNlIGN4PSIyMjMuOSIgY3k9IjQ3NS4wODE2IiBmaWxsPSIjODRCRTg0IiByeD0iMyIgcnk9IjMiIHN0eWxlPSJzdHJva2U6IzAzODA0ODtzdHJva2Utd2lkdGg6MTsiLz48dGV4dCBmaWxsPSIjMDAwMDAwIiBmb250LWZhbWlseT0ic2Fucy1zZXJpZiIgZm9udC1zaXplPSIxNCIgbGVuZ3RoQWRqdXN0PSJzcGFjaW5nIiB0ZXh0TGVuZ3RoPSIyNzkuMjQ4IiB4PSIyMzIuOSIgeT0iNDc4LjQyODIiPm1hdGNoZXMocmF3UGFzc3dvcmQ6IFN0cmluZyk6IGJvb2xlYW48L3RleHQ+PC9nPjwhLS1jbGFzcyBVc2VyTmFtZS0tPjxnIGNsYXNzPSJlbnRpdHkiIGRhdGEtZW50aXR5PSJVc2VyTmFtZSIgZGF0YS1zb3VyY2UtbGluZT0iMzAiIGRhdGEtdWlkPSJlbnQwMDA1IiBpZD0iZW50aXR5X1VzZXJOYW1lIj48cmVjdCBmaWxsPSIjRjFGMUYxIiBoZWlnaHQ9IjEzNy43NSIgcng9IjIuNSIgcnk9IjIuNSIgc3R5bGU9InN0cm9rZTojMTgxODE4O3N0cm9rZS13aWR0aDowLjU7IiB3aWR0aD0iMTU2LjUzMjIiIHg9IjU1My4yNSIgeT0iMzU2LjEyNjkiLz48ZWxsaXBzZSBjeD0iNTg0LjkzMDMiIGN5PSIzNzYuMjU5NyIgZmlsbD0iI0FERDFCMiIgcng9IjExIiByeT0iMTEiIHN0eWxlPSJzdHJva2U6IzE4MTgxODtzdHJva2Utd2lkdGg6MTsiLz48cGF0aCBkPSJNNTg3Ljg5OTEsMzgxLjkwMDMgUTU4Ny4zMjA5LDM4Mi4xOTcyIDU4Ni42ODAzLDM4Mi4zMzc4IFE1ODYuMDM5NywzODIuNDk0MSA1ODUuMzM2NiwzODIuNDk0MSBRNTgyLjgzNjYsMzgyLjQ5NDEgNTgxLjUwODQsMzgwLjg1MzQgUTU4MC4xOTU5LDM3OS4xOTcyIDU4MC4xOTU5LDM3Ni4wNzIyIFE1ODAuMTk1OSwzNzIuOTQ3MiA1ODEuNTA4NCwzNzEuMjkwOSBRNTgyLjgzNjYsMzY5LjYzNDcgNTg1LjMzNjYsMzY5LjYzNDcgUTU4Ni4wMzk3LDM2OS42MzQ3IDU4Ni42ODAzLDM2OS43OTA5IFE1ODcuMzM2NiwzNjkuOTQ3MiA1ODcuODk5MSwzNzAuMjQ0MSBMNTg3Ljg5OTEsMzcyLjk2MjggUTU4Ny4yNzQxLDM3Mi4zODQ3IDU4Ni42ODAzLDM3Mi4xMTkxIFE1ODYuMDg2NiwzNzEuODM3OCA1ODUuNDYxNiwzNzEuODM3OCBRNTg0LjExNzgsMzcxLjgzNzggNTgzLjQzMDMsMzcyLjkxNTkgUTU4Mi43NDI4LDM3My45Nzg0IDU4Mi43NDI4LDM3Ni4wNzIyIFE1ODIuNzQyOCwzNzguMTY1OSA1ODMuNDMwMywzNzkuMjQ0MSBRNTg0LjExNzgsMzgwLjMwNjYgNTg1LjQ2MTYsMzgwLjMwNjYgUTU4Ni4wODY2LDM4MC4zMDY2IDU4Ni42ODAzLDM4MC4wNDA5IFE1ODcuMjc0MSwzNzkuNzU5NyA1ODcuODk5MSwzNzkuMTgxNiBMNTg3Ljg5OTEsMzgxLjkwMDMgWiAiIGZpbGw9IiMwMDAwMDAiLz48dGV4dCBmaWxsPSIjMDAwMDAwIiBmb250LWZhbWlseT0ic2Fucy1zZXJpZiIgZm9udC1zaXplPSIxMiIgZm9udC1zdHlsZT0iaXRhbGljIiBsZW5ndGhBZGp1c3Q9InNwYWNpbmciIHRleHRMZW5ndGg9IjkxLjQ2NDgiIHg9IjYwMC42MzcxIiB5PSIzNzIuMjY1NSI+JiMxNzE7VmFsdWUgT2JqZWN0JiMxODc7PC90ZXh0Pjx0ZXh0IGZpbGw9IiMwMDAwMDAiIGZvbnQtZmFtaWx5PSJzYW5zLXNlcmlmIiBmb250LXNpemU9IjE0IiBsZW5ndGhBZGp1c3Q9InNwYWNpbmciIHRleHRMZW5ndGg9IjczLjIxMjkiIHg9IjYwOS43NjMiIHk9IjM4OC4wOTA3Ij5Vc2VyTmFtZTwvdGV4dD48bGluZSBzdHlsZT0ic3Ryb2tlOiMxODE4MTg7c3Ryb2tlLXdpZHRoOjAuNTsiIHgxPSI1NTQuMjUiIHgyPSI3MDguNzgyMiIgeTE9IjM5Ni4zOTI1IiB5Mj0iMzk2LjM5MjUiLz48cmVjdCBmaWxsPSJub25lIiBoZWlnaHQ9IjYiIHN0eWxlPSJzdHJva2U6I0M4MjkzMDtzdHJva2Utd2lkdGg6MTsiIHdpZHRoPSI2IiB4PSI1NjEuMjUiIHk9IjQwNy4wNDA5Ii8+PHRleHQgZmlsbD0iIzAwMDAwMCIgZm9udC1mYW1pbHk9InNhbnMtc2VyaWYiIGZvbnQtc2l6ZT0iMTQiIGxlbmd0aEFkanVzdD0ic3BhY2luZyIgdGV4dExlbmd0aD0iMTE5LjYwODQiIHg9IjU3My4yNSIgeT0iNDEzLjM4NzYiPmZpcnN0TmFtZTogU3RyaW5nPC90ZXh0PjxyZWN0IGZpbGw9Im5vbmUiIGhlaWdodD0iNiIgc3R5bGU9InN0cm9rZTojQzgyOTMwO3N0cm9rZS13aWR0aDoxOyIgd2lkdGg9IjYiIHg9IjU2MS4yNSIgeT0iNDIzLjMzNzgiLz48dGV4dCBmaWxsPSIjMDAwMDAwIiBmb250LWZhbWlseT0ic2Fucy1zZXJpZiIgZm9udC1zaXplPSIxNCIgbGVuZ3RoQWRqdXN0PSJzcGFjaW5nIiB0ZXh0TGVuZ3RoPSIxMTcuNTAyOSIgeD0iNTczLjI1IiB5PSI0MjkuNjg0NSI+bGFzdE5hbWU6IFN0cmluZzwvdGV4dD48bGluZSBzdHlsZT0ic3Ryb2tlOiMxODE4MTg7c3Ryb2tlLXdpZHRoOjAuNTsiIHgxPSI1NTQuMjUiIHgyPSI3MDguNzgyMiIgeTE9IjQzNi45ODYzIiB5Mj0iNDM2Ljk4NjMiLz48ZWxsaXBzZSBjeD0iNTY0LjI1IiBjeT0iNDUwLjYzNDciIGZpbGw9IiM4NEJFODQiIHJ4PSIzIiByeT0iMyIgc3R5bGU9InN0cm9rZTojMDM4MDQ4O3N0cm9rZS13aWR0aDoxOyIvPjx0ZXh0IGZpbGw9IiMwMDAwMDAiIGZvbnQtZmFtaWx5PSJzYW5zLXNlcmlmIiBmb250LXNpemU9IjE0IiBsZW5ndGhBZGp1c3Q9InNwYWNpbmciIHRleHRMZW5ndGg9IjEzMC41MzIyIiB4PSI1NzMuMjUiIHk9IjQ1My45ODE0Ij5maXJzdE5hbWUoKTogU3RyaW5nPC90ZXh0PjxlbGxpcHNlIGN4PSI1NjQuMjUiIGN5PSI0NjYuOTMxNiIgZmlsbD0iIzg0QkU4NCIgcng9IjMiIHJ5PSIzIiBzdHlsZT0ic3Ryb2tlOiMwMzgwNDg7c3Ryb2tlLXdpZHRoOjE7Ii8+PHRleHQgZmlsbD0iIzAwMDAwMCIgZm9udC1mYW1pbHk9InNhbnMtc2VyaWYiIGZvbnQtc2l6ZT0iMTQiIGxlbmd0aEFkanVzdD0ic3BhY2luZyIgdGV4dExlbmd0aD0iMTI4LjQyNjgiIHg9IjU3My4yNSIgeT0iNDcwLjI3ODIiPmxhc3ROYW1lKCk6IFN0cmluZzwvdGV4dD48ZWxsaXBzZSBjeD0iNTY0LjI1IiBjeT0iNDgzLjIyODQiIGZpbGw9IiM4NEJFODQiIHJ4PSIzIiByeT0iMyIgc3R5bGU9InN0cm9rZTojMDM4MDQ4O3N0cm9rZS13aWR0aDoxOyIvPjx0ZXh0IGZpbGw9IiMwMDAwMDAiIGZvbnQtZmFtaWx5PSJzYW5zLXNlcmlmIiBmb250LXNpemU9IjE0IiBsZW5ndGhBZGp1c3Q9InNwYWNpbmciIHRleHRMZW5ndGg9IjEyNC43NTU5IiB4PSI1NzMuMjUiIHk9IjQ4Ni41NzUxIj5mdWxsTmFtZSgpOiBTdHJpbmc8L3RleHQ+PC9nPjwhLS1jbGFzcyBFbWFpbC0tPjxnIGNsYXNzPSJlbnRpdHkiIGRhdGEtZW50aXR5PSJFbWFpbCIgZGF0YS1zb3VyY2UtbGluZT0iMzgiIGRhdGEtdWlkPSJlbnQwMDA2IiBpZD0iZW50aXR5X0VtYWlsIj48cmVjdCBmaWxsPSIjRjFGMUYxIiBoZWlnaHQ9Ijg4Ljg1OTQiIHJ4PSIyLjUiIHJ5PSIyLjUiIHN0eWxlPSJzdHJva2U6IzE4MTgxODtzdHJva2Utd2lkdGg6MC41OyIgd2lkdGg9IjE2NC45NTQxIiB4PSI3NDUuMDQiIHk9IjM4MC41NzY5Ii8+PGVsbGlwc2UgY3g9Ijc4MC41MTAyIiBjeT0iNDAwLjcwOTciIGZpbGw9IiNBREQxQjIiIHJ4PSIxMSIgcnk9IjExIiBzdHlsZT0ic3Ryb2tlOiMxODE4MTg7c3Ryb2tlLXdpZHRoOjE7Ii8+PHBhdGggZD0iTTc4My40Nzg5LDQwNi4zNTAzIFE3ODIuOTAwOCw0MDYuNjQ3MiA3ODIuMjYwMiw0MDYuNzg3OCBRNzgxLjYxOTUsNDA2Ljk0NDEgNzgwLjkxNjQsNDA2Ljk0NDEgUTc3OC40MTY0LDQwNi45NDQxIDc3Ny4wODgzLDQwNS4zMDM0IFE3NzUuNzc1OCw0MDMuNjQ3MiA3NzUuNzc1OCw0MDAuNTIyMiBRNzc1Ljc3NTgsMzk3LjM5NzIgNzc3LjA4ODMsMzk1Ljc0MDkgUTc3OC40MTY0LDM5NC4wODQ3IDc4MC45MTY0LDM5NC4wODQ3IFE3ODEuNjE5NSwzOTQuMDg0NyA3ODIuMjYwMiwzOTQuMjQwOSBRNzgyLjkxNjQsMzk0LjM5NzIgNzgzLjQ3ODksMzk0LjY5NDEgTDc4My40Nzg5LDM5Ny40MTI4IFE3ODIuODUzOSwzOTYuODM0NyA3ODIuMjYwMiwzOTYuNTY5MSBRNzgxLjY2NjQsMzk2LjI4NzggNzgxLjA0MTQsMzk2LjI4NzggUTc3OS42OTc3LDM5Ni4yODc4IDc3OS4wMTAyLDM5Ny4zNjU5IFE3NzguMzIyNywzOTguNDI4NCA3NzguMzIyNyw0MDAuNTIyMiBRNzc4LjMyMjcsNDAyLjYxNTkgNzc5LjAxMDIsNDAzLjY5NDEgUTc3OS42OTc3LDQwNC43NTY2IDc4MS4wNDE0LDQwNC43NTY2IFE3ODEuNjY2NCw0MDQuNzU2NiA3ODIuMjYwMiw0MDQuNDkwOSBRNzgyLjg1MzksNDA0LjIwOTcgNzgzLjQ3ODksNDAzLjYzMTYgTDc4My40Nzg5LDQwNi4zNTAzIFogIiBmaWxsPSIjMDAwMDAwIi8+PHRleHQgZmlsbD0iIzAwMDAwMCIgZm9udC1mYW1pbHk9InNhbnMtc2VyaWYiIGZvbnQtc2l6ZT0iMTIiIGZvbnQtc3R5bGU9Iml0YWxpYyIgbGVuZ3RoQWRqdXN0PSJzcGFjaW5nIiB0ZXh0TGVuZ3RoPSI5MS40NjQ4IiB4PSI3OTcuMDU5MSIgeT0iMzk2LjcxNTUiPiYjMTcxO1ZhbHVlIE9iamVjdCYjMTg3OzwvdGV4dD48dGV4dCBmaWxsPSIjMDAwMDAwIiBmb250LWZhbWlseT0ic2Fucy1zZXJpZiIgZm9udC1zaXplPSIxNCIgbGVuZ3RoQWRqdXN0PSJzcGFjaW5nIiB0ZXh0TGVuZ3RoPSIzOC44NDE4IiB4PSI4MjMuMzcwNiIgeT0iNDEyLjU0MDciPkVtYWlsPC90ZXh0PjxsaW5lIHN0eWxlPSJzdHJva2U6IzE4MTgxODtzdHJva2Utd2lkdGg6MC41OyIgeDE9Ijc0Ni4wNCIgeDI9IjkwOC45OTQxIiB5MT0iNDIwLjg0MjUiIHkyPSI0MjAuODQyNSIvPjxyZWN0IGZpbGw9Im5vbmUiIGhlaWdodD0iNiIgc3R5bGU9InN0cm9rZTojQzgyOTMwO3N0cm9rZS13aWR0aDoxOyIgd2lkdGg9IjYiIHg9Ijc1My4wNCIgeT0iNDMxLjQ5MDkiLz48dGV4dCBmaWxsPSIjMDAwMDAwIiBmb250LWZhbWlseT0ic2Fucy1zZXJpZiIgZm9udC1zaXplPSIxNCIgbGVuZ3RoQWRqdXN0PSJzcGFjaW5nIiB0ZXh0TGVuZ3RoPSI4OS4xODg1IiB4PSI3NjUuMDQiIHk9IjQzNy44Mzc2Ij52YWx1ZTogU3RyaW5nPC90ZXh0PjxsaW5lIHN0eWxlPSJzdHJva2U6IzE4MTgxODtzdHJva2Utd2lkdGg6MC41OyIgeDE9Ijc0Ni4wNCIgeDI9IjkwOC45OTQxIiB5MT0iNDQ1LjEzOTQiIHkyPSI0NDUuMTM5NCIvPjxlbGxpcHNlIGN4PSI3NTYuMDQiIGN5PSI0NTguNzg3OCIgZmlsbD0iIzg0QkU4NCIgcng9IjMiIHJ5PSIzIiBzdHlsZT0ic3Ryb2tlOiMwMzgwNDg7c3Ryb2tlLXdpZHRoOjE7Ii8+PHRleHQgZmlsbD0iIzAwMDAwMCIgZm9udC1mYW1pbHk9InNhbnMtc2VyaWYiIGZvbnQtc2l6ZT0iMTQiIGxlbmd0aEFkanVzdD0ic3BhY2luZyIgdGV4dExlbmd0aD0iMTM4Ljk1NDEiIHg9Ijc2NS4wNCIgeT0iNDYyLjEzNDUiPkVtYWlsKHZhbHVlOiBTdHJpbmcpPC90ZXh0PjwvZz48IS0tY2xhc3MgUm9sZS0tPjxnIGNsYXNzPSJlbnRpdHkiIGRhdGEtZW50aXR5PSJSb2xlIiBkYXRhLXNvdXJjZS1saW5lPSI0MyIgZGF0YS11aWQ9ImVudDAwMDciIGlkPSJlbnRpdHlfUm9sZSI+PHJlY3QgZmlsbD0iI0YxRjFGMSIgaGVpZ2h0PSIxMzcuNzUiIHJ4PSIyLjUiIHJ5PSIyLjUiIHN0eWxlPSJzdHJva2U6IzE4MTgxODtzdHJva2Utd2lkdGg6MC41OyIgd2lkdGg9IjM2NS4xODU1IiB4PSI5NDQuOTMiIHk9IjM1Ni4xMjY5Ii8+PGVsbGlwc2UgY3g9IjExMDAuNjg5OCIgY3k9IjM3Ni4yNTk3IiBmaWxsPSIjQUREMUIyIiByeD0iMTEiIHJ5PSIxMSIgc3R5bGU9InN0cm9rZTojMTgxODE4O3N0cm9rZS13aWR0aDoxOyIvPjxwYXRoIGQ9Ik0xMTAzLjY1ODUsMzgxLjkwMDMgUTExMDMuMDgwNCwzODIuMTk3MiAxMTAyLjQzOTgsMzgyLjMzNzggUTExMDEuNzk5MSwzODIuNDk0MSAxMTAxLjA5NiwzODIuNDk0MSBRMTA5OC41OTYsMzgyLjQ5NDEgMTA5Ny4yNjc5LDM4MC44NTM0IFExMDk1Ljk1NTQsMzc5LjE5NzIgMTA5NS45NTU0LDM3Ni4wNzIyIFExMDk1Ljk1NTQsMzcyLjk0NzIgMTA5Ny4yNjc5LDM3MS4yOTA5IFExMDk4LjU5NiwzNjkuNjM0NyAxMTAxLjA5NiwzNjkuNjM0NyBRMTEwMS43OTkxLDM2OS42MzQ3IDExMDIuNDM5OCwzNjkuNzkwOSBRMTEwMy4wOTYsMzY5Ljk0NzIgMTEwMy42NTg1LDM3MC4yNDQxIEwxMTAzLjY1ODUsMzcyLjk2MjggUTExMDMuMDMzNSwzNzIuMzg0NyAxMTAyLjQzOTgsMzcyLjExOTEgUTExMDEuODQ2LDM3MS44Mzc4IDExMDEuMjIxLDM3MS44Mzc4IFExMDk5Ljg3NzMsMzcxLjgzNzggMTA5OS4xODk4LDM3Mi45MTU5IFExMDk4LjUwMjMsMzczLjk3ODQgMTA5OC41MDIzLDM3Ni4wNzIyIFExMDk4LjUwMjMsMzc4LjE2NTkgMTA5OS4xODk4LDM3OS4yNDQxIFExMDk5Ljg3NzMsMzgwLjMwNjYgMTEwMS4yMjEsMzgwLjMwNjYgUTExMDEuODQ2LDM4MC4zMDY2IDExMDIuNDM5OCwzODAuMDQwOSBRMTEwMy4wMzM1LDM3OS43NTk3IDExMDMuNjU4NSwzNzkuMTgxNiBMMTEwMy42NTg1LDM4MS45MDAzIFogIiBmaWxsPSIjMDAwMDAwIi8+PHRleHQgZmlsbD0iIzAwMDAwMCIgZm9udC1mYW1pbHk9InNhbnMtc2VyaWYiIGZvbnQtc2l6ZT0iMTIiIGZvbnQtc3R5bGU9Iml0YWxpYyIgbGVuZ3RoQWRqdXN0PSJzcGFjaW5nIiB0ZXh0TGVuZ3RoPSI0OS4xNjYiIHg9IjExMTkuMTg5OCIgeT0iMzcyLjI2NTUiPiYjMTcxO0VudW0mIzE4Nzs8L3RleHQ+PHRleHQgZmlsbD0iIzAwMDAwMCIgZm9udC1mYW1pbHk9InNhbnMtc2VyaWYiIGZvbnQtc2l6ZT0iMTQiIGxlbmd0aEFkanVzdD0ic3BhY2luZyIgdGV4dExlbmd0aD0iMzAuNzk1OSIgeD0iMTEyOC4zNzQ4IiB5PSIzODguMDkwNyI+Um9sZTwvdGV4dD48bGluZSBzdHlsZT0ic3Ryb2tlOiMxODE4MTg7c3Ryb2tlLXdpZHRoOjAuNTsiIHgxPSI5NDUuOTMiIHgyPSIxMzA5LjExNTUiIHkxPSIzOTYuMzkyNSIgeTI9IjM5Ni4zOTI1Ii8+PHRleHQgZmlsbD0iIzAwMDAwMCIgZm9udC1mYW1pbHk9InNhbnMtc2VyaWYiIGZvbnQtc2l6ZT0iMTQiIGxlbmd0aEFkanVzdD0ic3BhY2luZyIgdGV4dExlbmd0aD0iNDcuMDM4MSIgeD0iOTUwLjkzIiB5PSI0MTMuMzg3NiI+QURNSU48L3RleHQ+PHRleHQgZmlsbD0iIzAwMDAwMCIgZm9udC1mYW1pbHk9InNhbnMtc2VyaWYiIGZvbnQtc2l6ZT0iMTQiIGxlbmd0aEFkanVzdD0ic3BhY2luZyIgdGV4dExlbmd0aD0iNzguNDA4MiIgeD0iOTUwLjkzIiB5PSI0MjkuNjg0NSI+RVhFQ1VUSVZFPC90ZXh0Pjx0ZXh0IGZpbGw9IiMwMDAwMDAiIGZvbnQtZmFtaWx5PSJzYW5zLXNlcmlmIiBmb250LXNpemU9IjE0IiBsZW5ndGhBZGp1c3Q9InNwYWNpbmciIHRleHRMZW5ndGg9IjcxLjEyNzkiIHg9Ijk1MC45MyIgeT0iNDQ1Ljk4MTQiPk1BTkFHRVI8L3RleHQ+PHRleHQgZmlsbD0iIzAwMDAwMCIgZm9udC1mYW1pbHk9InNhbnMtc2VyaWYiIGZvbnQtc2l6ZT0iMTQiIGxlbmd0aEFkanVzdD0ic3BhY2luZyIgdGV4dExlbmd0aD0iOTguMDIwNSIgeD0iOTUwLjkzIiB5PSI0NjIuMjc4MiI+QUNDT1VOVEFOVDwvdGV4dD48bGluZSBzdHlsZT0ic3Ryb2tlOiMxODE4MTg7c3Ryb2tlLXdpZHRoOjAuNTsiIHgxPSI5NDUuOTMiIHgyPSIxMzA5LjExNTUiIHkxPSI0NjkuNTgiIHkyPSI0NjkuNTgiLz48ZWxsaXBzZSBjeD0iOTU1LjkzIiBjeT0iNDgzLjIyODQiIGZpbGw9IiM4NEJFODQiIHJ4PSIzIiByeT0iMyIgc3R5bGU9InN0cm9rZTojMDM4MDQ4O3N0cm9rZS13aWR0aDoxOyIvPjx0ZXh0IGZpbGw9IiMwMDAwMDAiIGZvbnQtZmFtaWx5PSJzYW5zLXNlcmlmIiBmb250LXNpemU9IjE0IiBsZW5ndGhBZGp1c3Q9InNwYWNpbmciIHRleHRMZW5ndGg9IjMzOS4xODU1IiB4PSI5NjQuOTMiIHk9IjQ4Ni41NzUxIj5oYXNQZXJtaXNzaW9uKHBlcm1pc3Npb246IFBlcm1pc3Npb24pOiBib29sZWFuPC90ZXh0PjwvZz48IS0tY2xhc3MgVXNlclN0YXR1cy0tPjxnIGNsYXNzPSJlbnRpdHkiIGRhdGEtZW50aXR5PSJVc2VyU3RhdHVzIiBkYXRhLXNvdXJjZS1saW5lPSI1MSIgZGF0YS11aWQ9ImVudDAwMDgiIGlkPSJlbnRpdHlfVXNlclN0YXR1cyI+PHJlY3QgZmlsbD0iI0YxRjFGMSIgaGVpZ2h0PSIxMDUuMTU2MyIgcng9IjIuNSIgcnk9IjIuNSIgc3R5bGU9InN0cm9rZTojMTgxODE4O3N0cm9rZS13aWR0aDowLjU7IiB3aWR0aD0iMTA4LjUyMTUiIHg9IjEzNDUuMjYiIHk9IjM3Mi40MjY5Ii8+PGVsbGlwc2UgY3g9IjEzNjAuMjYiIGN5PSIzOTIuNTU5NyIgZmlsbD0iI0FERDFCMiIgcng9IjExIiByeT0iMTEiIHN0eWxlPSJzdHJva2U6IzE4MTgxODtzdHJva2Utd2lkdGg6MTsiLz48cGF0aCBkPSJNMTM2My4yMjg4LDM5OC4yMDAzIFExMzYyLjY1MDYsMzk4LjQ5NzIgMTM2Mi4wMSwzOTguNjM3OCBRMTM2MS4zNjk0LDM5OC43OTQxIDEzNjAuNjY2MywzOTguNzk0MSBRMTM1OC4xNjYzLDM5OC43OTQxIDEzNTYuODM4MSwzOTcuMTUzNCBRMTM1NS41MjU2LDM5NS40OTcyIDEzNTUuNTI1NiwzOTIuMzcyMiBRMTM1NS41MjU2LDM4OS4yNDcyIDEzNTYuODM4MSwzODcuNTkwOSBRMTM1OC4xNjYzLDM4NS45MzQ3IDEzNjAuNjY2MywzODUuOTM0NyBRMTM2MS4zNjk0LDM4NS45MzQ3IDEzNjIuMDEsMzg2LjA5MDkgUTEzNjIuNjY2MywzODYuMjQ3MiAxMzYzLjIyODgsMzg2LjU0NDEgTDEzNjMuMjI4OCwzODkuMjYyOCBRMTM2Mi42MDM4LDM4OC42ODQ3IDEzNjIuMDEsMzg4LjQxOTEgUTEzNjEuNDE2MywzODguMTM3OCAxMzYwLjc5MTMsMzg4LjEzNzggUTEzNTkuNDQ3NSwzODguMTM3OCAxMzU4Ljc2LDM4OS4yMTU5IFExMzU4LjA3MjUsMzkwLjI3ODQgMTM1OC4wNzI1LDM5Mi4zNzIyIFExMzU4LjA3MjUsMzk0LjQ2NTkgMTM1OC43NiwzOTUuNTQ0MSBRMTM1OS40NDc1LDM5Ni42MDY2IDEzNjAuNzkxMywzOTYuNjA2NiBRMTM2MS40MTYzLDM5Ni42MDY2IDEzNjIuMDEsMzk2LjM0MDkgUTEzNjIuNjAzOCwzOTYuMDU5NyAxMzYzLjIyODgsMzk1LjQ4MTYgTDEzNjMuMjI4OCwzOTguMjAwMyBaICIgZmlsbD0iIzAwMDAwMCIvPjx0ZXh0IGZpbGw9IiMwMDAwMDAiIGZvbnQtZmFtaWx5PSJzYW5zLXNlcmlmIiBmb250LXNpemU9IjEyIiBmb250LXN0eWxlPSJpdGFsaWMiIGxlbmd0aEFkanVzdD0ic3BhY2luZyIgdGV4dExlbmd0aD0iNDkuMTY2IiB4PSIxMzg3LjkzNzciIHk9IjM4OC41NjU1Ij4mIzE3MTtFbnVtJiMxODc7PC90ZXh0Pjx0ZXh0IGZpbGw9IiMwMDAwMDAiIGZvbnQtZmFtaWx5PSJzYW5zLXNlcmlmIiBmb250LXNpemU9IjE0IiBsZW5ndGhBZGp1c3Q9InNwYWNpbmciIHRleHRMZW5ndGg9Ijc2LjUyMTUiIHg9IjEzNzQuMjYiIHk9IjQwNC4zOTA3Ij5Vc2VyU3RhdHVzPC90ZXh0PjxsaW5lIHN0eWxlPSJzdHJva2U6IzE4MTgxODtzdHJva2Utd2lkdGg6MC41OyIgeDE9IjEzNDYuMjYiIHgyPSIxNDUyLjc4MTUiIHkxPSI0MTIuNjkyNSIgeTI9IjQxMi42OTI1Ii8+PHRleHQgZmlsbD0iIzAwMDAwMCIgZm9udC1mYW1pbHk9InNhbnMtc2VyaWYiIGZvbnQtc2l6ZT0iMTQiIGxlbmd0aEFkanVzdD0ic3BhY2luZyIgdGV4dExlbmd0aD0iNTAuNDU2MSIgeD0iMTM1MS4yNiIgeT0iNDI5LjY4NzYiPkFDVElWRTwvdGV4dD48dGV4dCBmaWxsPSIjMDAwMDAwIiBmb250LWZhbWlseT0ic2Fucy1zZXJpZiIgZm9udC1zaXplPSIxNCIgbGVuZ3RoQWRqdXN0PSJzcGFjaW5nIiB0ZXh0TGVuZ3RoPSI2NS4wNTc2IiB4PSIxMzUxLjI2IiB5PSI0NDUuOTg0NSI+SU5BQ1RJVkU8L3RleHQ+PHRleHQgZmlsbD0iIzAwMDAwMCIgZm9udC1mYW1pbHk9InNhbnMtc2VyaWYiIGZvbnQtc2l6ZT0iMTQiIGxlbmd0aEFkanVzdD0ic3BhY2luZyIgdGV4dExlbmd0aD0iNTcuNDAxNCIgeD0iMTM1MS4yNiIgeT0iNDYyLjI4MTQiPkxPQ0tFRDwvdGV4dD48bGluZSBzdHlsZT0ic3Ryb2tlOiMxODE4MTg7c3Ryb2tlLXdpZHRoOjAuNTsiIHgxPSIxMzQ2LjI2IiB4Mj0iMTQ1Mi43ODE1IiB5MT0iNDY5LjU4MzEiIHkyPSI0NjkuNTgzMSIvPjwvZz48IS0tcmV2ZXJzZSBsaW5rIFVzZXIgdG8gVXNlcklkLS0+PGcgY2xhc3M9ImxpbmsiIGRhdGEtZW50aXR5LTE9IlVzZXIiIGRhdGEtZW50aXR5LTI9IlVzZXJJZCIgZGF0YS1zb3VyY2UtbGluZT0iNTciIGRhdGEtdWlkPSJsbms5IiBpZD0ibGlua19Vc2VyX1VzZXJJZCI+PHBhdGggY29kZUxpbmU9IjU3IiBkPSJNNjEwLjk4NjUsMjAyLjk4NTEgQzUwMC44NzY1LDIzNC4yNTUxIDMzNy40MiwyODYuMTc2OSAxOTUuNTIsMzU2LjEyNjkgQzE4MS41LDM2My4wMzY5IDE2Ny4xLDM3MS41MjY5IDE1My42NywzODAuMTM2OSIgZmlsbD0ibm9uZSIgaWQ9IlVzZXItYmFja3RvLVVzZXJJZCIgc3R5bGU9InN0cm9rZTojMTgxODE4O3N0cm9rZS13aWR0aDoxOyIvPjxwb2x5Z29uIGZpbGw9IiMxODE4MTgiIHBvaW50cz0iNjIyLjUzLDE5OS43MDY5LDYxNS42NjU1LDE5Ny40OTgxLDYxMC45ODY1LDIwMi45ODUxLDYxNy44NTEsMjA1LjE5MzgsNjIyLjUzLDE5OS43MDY5IiBzdHlsZT0ic3Ryb2tlOiMxODE4MTg7c3Ryb2tlLXdpZHRoOjE7Ii8+PC9nPjwhLS1yZXZlcnNlIGxpbmsgVXNlciB0byBQYXNzd29yZC0tPjxnIGNsYXNzPSJsaW5rIiBkYXRhLWVudGl0eS0xPSJVc2VyIiBkYXRhLWVudGl0eS0yPSJQYXNzd29yZCIgZGF0YS1zb3VyY2UtbGluZT0iNTgiIGRhdGEtdWlkPSJsbmsxMCIgaWQ9ImxpbmtfVXNlcl9QYXNzd29yZCI+PHBhdGggY29kZUxpbmU9IjU4IiBkPSJNNjEyLjkxMzksMjUyLjE5MjEgQzU1OC41NzM5LDI4OS45MzIxIDUwMy4yNCwzMjguMzU2OSA0NTIuMDgsMzYzLjg4NjkiIGZpbGw9Im5vbmUiIGlkPSJVc2VyLWJhY2t0by1QYXNzd29yZCIgc3R5bGU9InN0cm9rZTojMTgxODE4O3N0cm9rZS13aWR0aDoxOyIvPjxwb2x5Z29uIGZpbGw9IiMxODE4MTgiIHBvaW50cz0iNjIyLjc3LDI0NS4zNDY5LDYxNS41NjAyLDI0NS40ODQxLDYxMi45MTM5LDI1Mi4xOTIxLDYyMC4xMjM3LDI1Mi4wNTQ5LDYyMi43NywyNDUuMzQ2OSIgc3R5bGU9InN0cm9rZTojMTgxODE4O3N0cm9rZS13aWR0aDoxOyIvPjwvZz48IS0tcmV2ZXJzZSBsaW5rIFVzZXIgdG8gVXNlck5hbWUtLT48ZyBjbGFzcz0ibGluayIgZGF0YS1lbnRpdHktMT0iVXNlciIgZGF0YS1lbnRpdHktMj0iVXNlck5hbWUiIGRhdGEtc291cmNlLWxpbmU9IjU5IiBkYXRhLXVpZD0ibG5rMTEiIGlkPSJsaW5rX1VzZXJfVXNlck5hbWUiPjxwYXRoIGNvZGVMaW5lPSI1OSIgZD0iTTY3Ni42MTIyLDMwNy42ODU0IEM2NjguNjcyMiwzMjguMTY1NCA2NjUuMDUsMzM3LjUwNjkgNjU3LjkxLDM1NS45MTY5IiBmaWxsPSJub25lIiBpZD0iVXNlci1iYWNrdG8tVXNlck5hbWUiIHN0eWxlPSJzdHJva2U6IzE4MTgxODtzdHJva2Utd2lkdGg6MTsiLz48cG9seWdvbiBmaWxsPSIjMTgxODE4IiBwb2ludHM9IjY4MC45NSwyOTYuNDk2OSw2NzUuMDUxNiwzMDAuNjQ1Miw2NzYuNjEyMiwzMDcuNjg1NCw2ODIuNTEwNiwzMDMuNTM3MSw2ODAuOTUsMjk2LjQ5NjkiIHN0eWxlPSJzdHJva2U6IzE4MTgxODtzdHJva2Utd2lkdGg6MTsiLz48L2c+PCEtLXJldmVyc2UgbGluayBVc2VyIHRvIEVtYWlsLS0+PGcgY2xhc3M9ImxpbmsiIGRhdGEtZW50aXR5LTE9IlVzZXIiIGRhdGEtZW50aXR5LTI9IkVtYWlsIiBkYXRhLXNvdXJjZS1saW5lPSI2MCIgZGF0YS11aWQ9ImxuazEyIiBpZD0ibGlua19Vc2VyX0VtYWlsIj48cGF0aCBjb2RlTGluZT0iNjAiIGQ9Ik03ODIuNDI4OSwzMDcuNjg1IEM3OTQuMDc4OSwzMzcuNzI1IDgwMS40MiwzNTYuNjY2OSA4MTAuNSwzODAuMDg2OSIgZmlsbD0ibm9uZSIgaWQ9IlVzZXItYmFja3RvLUVtYWlsIiBzdHlsZT0ic3Ryb2tlOiMxODE4MTg7c3Ryb2tlLXdpZHRoOjE7Ii8+PHBvbHlnb24gZmlsbD0iIzE4MTgxOCIgcG9pbnRzPSI3NzguMDksMjk2LjQ5NjksNzc2LjUzMDEsMzAzLjUzNzIsNzgyLjQyODksMzA3LjY4NSw3ODMuOTg4OCwzMDAuNjQ0Niw3NzguMDksMjk2LjQ5NjkiIHN0eWxlPSJzdHJva2U6IzE4MTgxODtzdHJva2Utd2lkdGg6MTsiLz48L2c+PCEtLXJldmVyc2UgbGluayBVc2VyIHRvIFJvbGUtLT48ZyBjbGFzcz0ibGluayIgZGF0YS1lbnRpdHktMT0iVXNlciIgZGF0YS1lbnRpdHktMj0iUm9sZSIgZGF0YS1zb3VyY2UtbGluZT0iNjEiIGRhdGEtdWlkPSJsbmsxMyIgaWQ9ImxpbmtfVXNlcl9Sb2xlIj48cGF0aCBjb2RlTGluZT0iNjEiIGQ9Ik04NDYuNTY5NiwyNDUuNTYwNSBDOTAzLjQzOTYsMjgxLjY4MDUgOTYzLjA1LDMxOS41MzY5IDEwMjAuMDEsMzU1LjcxNjkiIGZpbGw9Im5vbmUiIGlkPSJVc2VyLWJhY2t0by1Sb2xlIiBzdHlsZT0ic3Ryb2tlOiMxODE4MTg7c3Ryb2tlLXdpZHRoOjE7Ii8+PHBvbHlnb24gZmlsbD0iIzE4MTgxOCIgcG9pbnRzPSI4MzYuNDQsMjM5LjEyNjksODM5LjM2MDIsMjQ1LjcyMDIsODQ2LjU2OTYsMjQ1LjU2MDUsODQzLjY0OTMsMjM4Ljk2NzIsODM2LjQ0LDIzOS4xMjY5IiBzdHlsZT0ic3Ryb2tlOiMxODE4MTg7c3Ryb2tlLXdpZHRoOjE7Ii8+PC9nPjwhLS1yZXZlcnNlIGxpbmsgVXNlciB0byBVc2VyU3RhdHVzLS0+PGcgY2xhc3M9ImxpbmsiIGRhdGEtZW50aXR5LTE9IlVzZXIiIGRhdGEtZW50aXR5LTI9IlVzZXJTdGF0dXMiIGRhdGEtc291cmNlLWxpbmU9IjYyIiBkYXRhLXVpZD0ibG5rMTQiIGlkPSJsaW5rX1VzZXJfVXNlclN0YXR1cyI+PHBhdGggY29kZUxpbmU9IjYyIiBkPSJNODQ4LjI0MTYsMTkxLjMxNiBDOTcyLjcyMTYsMjE1LjM5NiAxMTY5LjU3LDI2NC4wMjY5IDEzMjcuNTIsMzU2LjEyNjkgQzEzMzUuMjQsMzYwLjYyNjkgMTM0Mi43OSwzNjYuMDk2OSAxMzQ5LjkzLDM3MS45NjY5IiBmaWxsPSJub25lIiBpZD0iVXNlci1iYWNrdG8tVXNlclN0YXR1cyIgc3R5bGU9InN0cm9rZTojMTgxODE4O3N0cm9rZS13aWR0aDoxOyIvPjxwb2x5Z29uIGZpbGw9IiMxODE4MTgiIHBvaW50cz0iODM2LjQ2LDE4OS4wMzY5LDg0MS41OTExLDE5NC4xMDM2LDg0OC4yNDE2LDE5MS4zMTYsODQzLjExMDUsMTg2LjI0OTIsODM2LjQ2LDE4OS4wMzY5IiBzdHlsZT0ic3Ryb2tlOiMxODE4MTg7c3Ryb2tlLXdpZHRoOjE7Ii8+PC9nPjwhLS1TUkM9W1pMREJSaThtNER0ZDU1djI0SFU4NDU4S2VZZWcxQ0hGdFBoNFc1aWRHUjQzR2JLdFA1N3I2QXNnUmhnaXI1TGx1dWpxdVdIM0E0WGlkOWF0UnlRSnZuYjExSUQ4UGZ5by12TXhkX3BDTmNOczlkU1ZDbGtNc1JsQ05jSnNQSFctbXZvWjJJUzlRaE1TSTUyblJSVkhhejU0QU0xa09BZ082bTJtMGtPY0pXMFFiMVEwNEd2OW1WNzAwZTI0YzM4SkVWYTd0MkhjNDFfMjJHdU5NQUl5ZTgtSzNRMlY0Mm44TzBhSlRNQ1ZpbXZ1T3dmZ2ZRbFdWQVkxdWRjak5YRzJucl9ZUTQ3c05IcTVpMl9lNmZBRWU4M3kwdi1GUE4wMzQ2QUFNS2ZHVl9QMFY1N0FpU3VYNHVyNEdnQzVyMmN1akdmU0Z2SlFEdERUQ1R0d0lKYkdQcWR5bnE3Q2dCeXozSlBHWTBONFVJdDFjdTUtZDM5aWViYUNna0VlLWRsdkF2dGxRS3VKQlpwcmQ2TFZKR0hmTFFYbmVFTm9RTkhGaDgzcGJCNEpLRlVZdmtDd1NISnJlajN2UUFkSEpLRUxSdEx3aGNTdXp1dXo2UmpKbi1YUGRkTmgzMHRCamxpSlJzbnZPb1l2bjduMGFmMW9Ka0Vlamo4Y1pCUXNCb2JPMzZ4YklibFR2N2dicVV0UlRxdWRwcjl4VFREaXhmVDgtdGczQVdvckdYZWZMYVl4UWVTZ3pBQUpGbTAwXS0tPjwvZz48L3N2Zz4=" class="uml" alt="uml diagram" title="" /></p>
<h3 id="_5">ユーザーエンティティの実装<a class="headerlink" href="#_5" title="Permanent link">&para;</a></h3>
<div class="highlight"><pre><span></span><code><span class="kn">package</span><span class="w"> </span><span class="nn">com.example.accounting.domain.model.user</span><span class="p">;</span>

<span class="kn">import</span><span class="w"> </span><span class="nn">lombok.Value</span><span class="p">;</span>
<span class="kn">import</span><span class="w"> </span><span class="nn">lombok.With</span><span class="p">;</span>
<span class="kn">import</span><span class="w"> </span><span class="nn">java.time.LocalDateTime</span><span class="p">;</span>

<span class="cm">/**</span>
<span class="cm"> * ユーザーエンティティ</span>
<span class="cm"> *</span>
<span class="cm"> * 財務会計システムへのアクセスを行うユーザーを表現する。</span>
<span class="cm"> * パスワードポリシーとロールベースのアクセス制御を提供する。</span>
<span class="cm"> */</span>
<span class="nd">@Value</span>
<span class="nd">@With</span>
<span class="kd">public</span><span class="w"> </span><span class="kd">class</span> <span class="nc">User</span><span class="w"> </span><span class="p">{</span>

<span class="w">    </span><span class="n">UserId</span><span class="w"> </span><span class="n">userId</span><span class="p">;</span>
<span class="w">    </span><span class="n">Password</span><span class="w"> </span><span class="n">password</span><span class="p">;</span>
<span class="w">    </span><span class="n">UserName</span><span class="w"> </span><span class="n">name</span><span class="p">;</span>
<span class="w">    </span><span class="n">Email</span><span class="w"> </span><span class="n">email</span><span class="p">;</span>
<span class="w">    </span><span class="n">Role</span><span class="w"> </span><span class="n">role</span><span class="p">;</span>
<span class="w">    </span><span class="n">UserStatus</span><span class="w"> </span><span class="n">status</span><span class="p">;</span>
<span class="w">    </span><span class="n">LocalDateTime</span><span class="w"> </span><span class="n">createdAt</span><span class="p">;</span>
<span class="w">    </span><span class="n">LocalDateTime</span><span class="w"> </span><span class="n">updatedAt</span><span class="p">;</span>

<span class="w">    </span><span class="cm">/**</span>
<span class="cm">     * 新規ユーザーを作成</span>
<span class="cm">     */</span>
<span class="w">    </span><span class="kd">public</span><span class="w"> </span><span class="kd">static</span><span class="w"> </span><span class="n">User</span><span class="w"> </span><span class="nf">create</span><span class="p">(</span>
<span class="w">            </span><span class="n">String</span><span class="w"> </span><span class="n">userId</span><span class="p">,</span>
<span class="w">            </span><span class="n">String</span><span class="w"> </span><span class="n">rawPassword</span><span class="p">,</span>
<span class="w">            </span><span class="n">String</span><span class="w"> </span><span class="n">firstName</span><span class="p">,</span>
<span class="w">            </span><span class="n">String</span><span class="w"> </span><span class="n">lastName</span><span class="p">,</span>
<span class="w">            </span><span class="n">String</span><span class="w"> </span><span class="n">email</span><span class="p">,</span>
<span class="w">            </span><span class="n">Role</span><span class="w"> </span><span class="n">role</span>
<span class="w">    </span><span class="p">)</span><span class="w"> </span><span class="p">{</span>
<span class="w">        </span><span class="k">if</span><span class="w"> </span><span class="p">(</span><span class="n">userId</span><span class="w"> </span><span class="o">==</span><span class="w"> </span><span class="kc">null</span><span class="w"> </span><span class="o">||</span><span class="w"> </span><span class="n">userId</span><span class="p">.</span><span class="na">isBlank</span><span class="p">())</span><span class="w"> </span><span class="p">{</span>
<span class="w">            </span><span class="k">throw</span><span class="w"> </span><span class="k">new</span><span class="w"> </span><span class="n">UserException</span><span class="p">(</span><span class="s">&quot;ユーザーIDは必須です&quot;</span><span class="p">);</span>
<span class="w">        </span><span class="p">}</span>
<span class="w">        </span><span class="k">if</span><span class="w"> </span><span class="p">(</span><span class="n">firstName</span><span class="w"> </span><span class="o">==</span><span class="w"> </span><span class="kc">null</span><span class="w"> </span><span class="o">||</span><span class="w"> </span><span class="n">firstName</span><span class="p">.</span><span class="na">isBlank</span><span class="p">())</span><span class="w"> </span><span class="p">{</span>
<span class="w">            </span><span class="k">throw</span><span class="w"> </span><span class="k">new</span><span class="w"> </span><span class="n">UserException</span><span class="p">(</span><span class="s">&quot;名前（姓）は必須です&quot;</span><span class="p">);</span>
<span class="w">        </span><span class="p">}</span>
<span class="w">        </span><span class="k">if</span><span class="w"> </span><span class="p">(</span><span class="n">lastName</span><span class="w"> </span><span class="o">==</span><span class="w"> </span><span class="kc">null</span><span class="w"> </span><span class="o">||</span><span class="w"> </span><span class="n">lastName</span><span class="p">.</span><span class="na">isBlank</span><span class="p">())</span><span class="w"> </span><span class="p">{</span>
<span class="w">            </span><span class="k">throw</span><span class="w"> </span><span class="k">new</span><span class="w"> </span><span class="n">UserException</span><span class="p">(</span><span class="s">&quot;名前（名）は必須です&quot;</span><span class="p">);</span>
<span class="w">        </span><span class="p">}</span>
<span class="w">        </span><span class="k">if</span><span class="w"> </span><span class="p">(</span><span class="n">email</span><span class="w"> </span><span class="o">==</span><span class="w"> </span><span class="kc">null</span><span class="w"> </span><span class="o">||</span><span class="w"> </span><span class="n">email</span><span class="p">.</span><span class="na">isBlank</span><span class="p">())</span><span class="w"> </span><span class="p">{</span>
<span class="w">            </span><span class="k">throw</span><span class="w"> </span><span class="k">new</span><span class="w"> </span><span class="n">UserException</span><span class="p">(</span><span class="s">&quot;メールアドレスは必須です&quot;</span><span class="p">);</span>
<span class="w">        </span><span class="p">}</span>
<span class="w">        </span><span class="k">if</span><span class="w"> </span><span class="p">(</span><span class="n">role</span><span class="w"> </span><span class="o">==</span><span class="w"> </span><span class="kc">null</span><span class="p">)</span><span class="w"> </span><span class="p">{</span>
<span class="w">            </span><span class="k">throw</span><span class="w"> </span><span class="k">new</span><span class="w"> </span><span class="n">UserException</span><span class="p">(</span><span class="s">&quot;ロールは必須です&quot;</span><span class="p">);</span>
<span class="w">        </span><span class="p">}</span>

<span class="w">        </span><span class="n">LocalDateTime</span><span class="w"> </span><span class="n">now</span><span class="w"> </span><span class="o">=</span><span class="w"> </span><span class="n">LocalDateTime</span><span class="p">.</span><span class="na">now</span><span class="p">();</span>
<span class="w">        </span><span class="k">return</span><span class="w"> </span><span class="k">new</span><span class="w"> </span><span class="n">User</span><span class="p">(</span>
<span class="w">            </span><span class="n">UserId</span><span class="p">.</span><span class="na">of</span><span class="p">(</span><span class="n">userId</span><span class="p">),</span>
<span class="w">            </span><span class="n">Password</span><span class="p">.</span><span class="na">of</span><span class="p">(</span><span class="n">rawPassword</span><span class="p">),</span>
<span class="w">            </span><span class="n">UserName</span><span class="p">.</span><span class="na">of</span><span class="p">(</span><span class="n">firstName</span><span class="p">,</span><span class="w"> </span><span class="n">lastName</span><span class="p">),</span>
<span class="w">            </span><span class="n">Email</span><span class="p">.</span><span class="na">of</span><span class="p">(</span><span class="n">email</span><span class="p">),</span>
<span class="w">            </span><span class="n">role</span><span class="p">,</span>
<span class="w">            </span><span class="n">UserStatus</span><span class="p">.</span><span class="na">ACTIVE</span><span class="p">,</span>
<span class="w">            </span><span class="n">now</span><span class="p">,</span>
<span class="w">            </span><span class="n">now</span>
<span class="w">        </span><span class="p">);</span>
<span class="w">    </span><span class="p">}</span>

<span class="w">    </span><span class="cm">/**</span>
<span class="cm">     * パスワードを変更</span>
<span class="cm">     */</span>
<span class="w">    </span><span class="kd">public</span><span class="w"> </span><span class="n">User</span><span class="w"> </span><span class="nf">changePassword</span><span class="p">(</span><span class="n">String</span><span class="w"> </span><span class="n">newPassword</span><span class="p">)</span><span class="w"> </span><span class="p">{</span>
<span class="w">        </span><span class="k">return</span><span class="w"> </span><span class="k">this</span>
<span class="w">            </span><span class="p">.</span><span class="na">withPassword</span><span class="p">(</span><span class="n">Password</span><span class="p">.</span><span class="na">of</span><span class="p">(</span><span class="n">newPassword</span><span class="p">))</span>
<span class="w">            </span><span class="p">.</span><span class="na">withUpdatedAt</span><span class="p">(</span><span class="n">LocalDateTime</span><span class="p">.</span><span class="na">now</span><span class="p">());</span>
<span class="w">    </span><span class="p">}</span>

<span class="w">    </span><span class="cm">/**</span>
<span class="cm">     * ユーザーをアクティブ化</span>
<span class="cm">     */</span>
<span class="w">    </span><span class="kd">public</span><span class="w"> </span><span class="n">User</span><span class="w"> </span><span class="nf">activate</span><span class="p">()</span><span class="w"> </span><span class="p">{</span>
<span class="w">        </span><span class="k">if</span><span class="w"> </span><span class="p">(</span><span class="k">this</span><span class="p">.</span><span class="na">status</span><span class="w"> </span><span class="o">==</span><span class="w"> </span><span class="n">UserStatus</span><span class="p">.</span><span class="na">ACTIVE</span><span class="p">)</span><span class="w"> </span><span class="p">{</span>
<span class="w">            </span><span class="k">throw</span><span class="w"> </span><span class="k">new</span><span class="w"> </span><span class="n">UserException</span><span class="p">(</span><span class="s">&quot;既にアクティブ状態です&quot;</span><span class="p">);</span>
<span class="w">        </span><span class="p">}</span>
<span class="w">        </span><span class="k">return</span><span class="w"> </span><span class="k">this</span>
<span class="w">            </span><span class="p">.</span><span class="na">withStatus</span><span class="p">(</span><span class="n">UserStatus</span><span class="p">.</span><span class="na">ACTIVE</span><span class="p">)</span>
<span class="w">            </span><span class="p">.</span><span class="na">withUpdatedAt</span><span class="p">(</span><span class="n">LocalDateTime</span><span class="p">.</span><span class="na">now</span><span class="p">());</span>
<span class="w">    </span><span class="p">}</span>

<span class="w">    </span><span class="cm">/**</span>
<span class="cm">     * ユーザーを非アクティブ化</span>
<span class="cm">     */</span>
<span class="w">    </span><span class="kd">public</span><span class="w"> </span><span class="n">User</span><span class="w"> </span><span class="nf">deactivate</span><span class="p">()</span><span class="w"> </span><span class="p">{</span>
<span class="w">        </span><span class="k">if</span><span class="w"> </span><span class="p">(</span><span class="k">this</span><span class="p">.</span><span class="na">status</span><span class="w"> </span><span class="o">==</span><span class="w"> </span><span class="n">UserStatus</span><span class="p">.</span><span class="na">INACTIVE</span><span class="p">)</span><span class="w"> </span><span class="p">{</span>
<span class="w">            </span><span class="k">throw</span><span class="w"> </span><span class="k">new</span><span class="w"> </span><span class="n">UserException</span><span class="p">(</span><span class="s">&quot;既に非アクティブ状態です&quot;</span><span class="p">);</span>
<span class="w">        </span><span class="p">}</span>
<span class="w">        </span><span class="k">return</span><span class="w"> </span><span class="k">this</span>
<span class="w">            </span><span class="p">.</span><span class="na">withStatus</span><span class="p">(</span><span class="n">UserStatus</span><span class="p">.</span><span class="na">INACTIVE</span><span class="p">)</span>
<span class="w">            </span><span class="p">.</span><span class="na">withUpdatedAt</span><span class="p">(</span><span class="n">LocalDateTime</span><span class="p">.</span><span class="na">now</span><span class="p">());</span>
<span class="w">    </span><span class="p">}</span>

<span class="w">    </span><span class="cm">/**</span>
<span class="cm">     * アカウントをロック</span>
<span class="cm">     */</span>
<span class="w">    </span><span class="kd">public</span><span class="w"> </span><span class="n">User</span><span class="w"> </span><span class="nf">lock</span><span class="p">()</span><span class="w"> </span><span class="p">{</span>
<span class="w">        </span><span class="k">return</span><span class="w"> </span><span class="k">this</span>
<span class="w">            </span><span class="p">.</span><span class="na">withStatus</span><span class="p">(</span><span class="n">UserStatus</span><span class="p">.</span><span class="na">LOCKED</span><span class="p">)</span>
<span class="w">            </span><span class="p">.</span><span class="na">withUpdatedAt</span><span class="p">(</span><span class="n">LocalDateTime</span><span class="p">.</span><span class="na">now</span><span class="p">());</span>
<span class="w">    </span><span class="p">}</span>

<span class="w">    </span><span class="cm">/**</span>
<span class="cm">     * 特定の権限を持っているか確認</span>
<span class="cm">     */</span>
<span class="w">    </span><span class="kd">public</span><span class="w"> </span><span class="kt">boolean</span><span class="w"> </span><span class="nf">hasPermission</span><span class="p">(</span><span class="n">Permission</span><span class="w"> </span><span class="n">permission</span><span class="p">)</span><span class="w"> </span><span class="p">{</span>
<span class="w">        </span><span class="k">return</span><span class="w"> </span><span class="k">this</span><span class="p">.</span><span class="na">role</span><span class="p">.</span><span class="na">hasPermission</span><span class="p">(</span><span class="n">permission</span><span class="p">);</span>
<span class="w">    </span><span class="p">}</span>

<span class="w">    </span><span class="cm">/**</span>
<span class="cm">     * ログイン可能か確認</span>
<span class="cm">     */</span>
<span class="w">    </span><span class="kd">public</span><span class="w"> </span><span class="kt">boolean</span><span class="w"> </span><span class="nf">canLogin</span><span class="p">()</span><span class="w"> </span><span class="p">{</span>
<span class="w">        </span><span class="k">return</span><span class="w"> </span><span class="k">this</span><span class="p">.</span><span class="na">status</span><span class="w"> </span><span class="o">==</span><span class="w"> </span><span class="n">UserStatus</span><span class="p">.</span><span class="na">ACTIVE</span><span class="p">;</span>
<span class="w">    </span><span class="p">}</span>
<span class="p">}</span>
</code></pre></div>
<h3 id="_6">パスワードの値オブジェクト<a class="headerlink" href="#_6" title="Permanent link">&para;</a></h3>
<p>パスワードは、財務システムにふさわしい強力なセキュリティポリシーを満たす必要があります。</p>
<p><img src="data:image/svg+xml;base64,PHN2ZyB4bWxucz0iaHR0cDovL3d3dy53My5vcmcvMjAwMC9zdmciIHhtbG5zOnhsaW5rPSJodHRwOi8vd3d3LnczLm9yZy8xOTk5L3hsaW5rIiBjb250ZW50U3R5bGVUeXBlPSJ0ZXh0L2NzcyIgZGF0YS1kaWFncmFtLXR5cGU9IkRFU0NSSVBUSU9OIiBoZWlnaHQ9IjI1N3B4IiBwcmVzZXJ2ZUFzcGVjdFJhdGlvPSJub25lIiBzdHlsZT0id2lkdGg6ODQzcHg7aGVpZ2h0OjI1N3B4O2JhY2tncm91bmQ6I0ZGRkZGRjsiIHZlcnNpb249IjEuMSIgdmlld0JveD0iMCAwIDg0MyAyNTciIHdpZHRoPSI4NDNweCIgem9vbUFuZFBhbj0ibWFnbmlmeSI+PHRpdGxlPiYjMTI0OTc7JiMxMjQ3MzsmIzEyNTI3OyYjMTI1NDA7JiMxMjQ4OTsmIzEyNTA5OyYjMTI1MjI7JiMxMjQ3MTsmIzEyNTQwOzwvdGl0bGU+PGRlZnMvPjxnPjxnIGNsYXNzPSJ0aXRsZSIgZGF0YS1zb3VyY2UtbGluZT0iMSI+PHRleHQgZmlsbD0iIzAwMDAwMCIgZm9udC1mYW1pbHk9InNhbnMtc2VyaWYiIGZvbnQtc2l6ZT0iMTQiIGZvbnQtd2VpZ2h0PSJib2xkIiBsZW5ndGhBZGp1c3Q9InNwYWNpbmciIHRleHRMZW5ndGg9IjEyNS45OTk1IiB4PSIzNTEuNjE2NiIgeT0iMjIuOTk1MSI+JiMxMjQ5NzsmIzEyNDczOyYjMTI1Mjc7JiMxMjU0MDsmIzEyNDg5OyYjMTI1MDk7JiMxMjUyMjsmIzEyNDcxOyYjMTI1NDA7PC90ZXh0PjwvZz48IS0tY2x1c3RlciBwb2xpY3ktLT48ZyBjbGFzcz0iY2x1c3RlciIgZGF0YS1lbnRpdHk9InBvbGljeSIgZGF0YS1zb3VyY2UtbGluZT0iMyIgZGF0YS11aWQ9ImVudDAwMDIiIGlkPSJjbHVzdGVyX3BvbGljeSI+PHJlY3QgZmlsbD0ibm9uZSIgaGVpZ2h0PSIyMDcuNDIiIHJ4PSIyLjUiIHJ5PSIyLjUiIHN0eWxlPSJzdHJva2U6IzE4MTgxODtzdHJva2Utd2lkdGg6MTsiIHdpZHRoPSI0ODEiIHg9IjciIHk9IjQ0LjI5NjkiLz48dGV4dCBmaWxsPSIjMDAwMDAwIiBmb250LWZhbWlseT0ic2Fucy1zZXJpZiIgZm9udC1zaXplPSIxNCIgZm9udC13ZWlnaHQ9ImJvbGQiIGxlbmd0aEFkanVzdD0ic3BhY2luZyIgdGV4dExlbmd0aD0iOTcuOTk5NiIgeD0iMTk4LjUwMDIiIHk9IjU5LjI5MiI+JiMxMjQ5NzsmIzEyNDczOyYjMTI1Mjc7JiMxMjU0MDsmIzEyNDg5OyYjMzUyMDE7JiMyMDIxNDs8L3RleHQ+PC9nPjwhLS1lbnRpdHkgOD8/Pz8tLT48ZyBjbGFzcz0iZW50aXR5IiBkYXRhLWVudGl0eT0iOC4uLi4iIGRhdGEtc291cmNlLWxpbmU9IjQiIGRhdGEtdWlkPSJlbnQwMDAzIiBpZD0iZW50aXR5XzguLi4uIj48ZWxsaXBzZSBjeD0iNzkuOTk2MiIgY3k9IjEwMi4wMTA1IiBmaWxsPSIjRjFGMUYxIiByeD0iNDguODk2MiIgcnk9IjE0LjUyMzYiIHN0eWxlPSJzdHJva2U6IzE4MTgxODtzdHJva2Utd2lkdGg6MC41OyIvPjx0ZXh0IGZpbGw9IiMwMDAwMDAiIGZvbnQtZmFtaWx5PSJzYW5zLXNlcmlmIiBmb250LXNpemU9IjE0IiBsZW5ndGhBZGp1c3Q9InNwYWNpbmciIHRleHRMZW5ndGg9IjY0LjkwNyIgeD0iNDcuNTQyNyIgeT0iMTA2LjY1ODkiPjgmIzI1OTkxOyYjMjMzODM7JiMyMDE5NzsmIzE5OTc4OzwvdGV4dD48L2c+PCEtLWVudGl0eSA/Pz8/Pz8tLT48ZyBjbGFzcz0iZW50aXR5IiBkYXRhLWVudGl0eT0iLi4uLi4uIiBkYXRhLXNvdXJjZS1saW5lPSI1IiBkYXRhLXVpZD0iZW50MDAwNCIgaWQ9ImVudGl0eV8uLi4uLi4iPjxlbGxpcHNlIGN4PSIyMjUuMDA0MiIgY3k9IjEwMi4wMDk3IiBmaWxsPSIjRjFGMUYxIiByeD0iNjEuNTE0MiIgcnk9IjE0LjcwMjgiIHN0eWxlPSJzdHJva2U6IzE4MTgxODtzdHJva2Utd2lkdGg6MC41OyIvPjx0ZXh0IGZpbGw9IiMwMDAwMDAiIGZvbnQtZmFtaWx5PSJzYW5zLXNlcmlmIiBmb250LXNpemU9IjE0IiBsZW5ndGhBZGp1c3Q9InNwYWNpbmciIHRleHRMZW5ndGg9IjgzLjk5OTYiIHg9IjE4My4wMDQ0IiB5PSIxMDYuNjU4MiI+JiMyMzU2NzsmIzI1OTkxOyYjMjMzODM7JiMxMjQzNDsmIzIxNTQ3OyYjMTI0MTY7PC90ZXh0PjwvZz48IS0tZW50aXR5ID8/Pz8/Py0tPjxnIGNsYXNzPSJlbnRpdHkiIGRhdGEtZW50aXR5PSIuLi4uLi4iIGRhdGEtc291cmNlLWxpbmU9IjYiIGRhdGEtdWlkPSJlbnQwMDA1IiBpZD0iZW50aXR5Xy4uLi4uLiI+PGVsbGlwc2UgY3g9IjM4My4wMDQyIiBjeT0iMTAyLjAwOTciIGZpbGw9IiNGMUYxRjEiIHJ4PSI2MS41MTQyIiByeT0iMTQuNzAyOCIgc3R5bGU9InN0cm9rZTojMTgxODE4O3N0cm9rZS13aWR0aDowLjU7Ii8+PHRleHQgZmlsbD0iIzAwMDAwMCIgZm9udC1mYW1pbHk9InNhbnMtc2VyaWYiIGZvbnQtc2l6ZT0iMTQiIGxlbmd0aEFkanVzdD0ic3BhY2luZyIgdGV4dExlbmd0aD0iODMuOTk5NiIgeD0iMzQxLjAwNDQiIHk9IjEwNi42NTgyIj4mIzIyODIzOyYjMjU5OTE7JiMyMzM4MzsmIzEyNDM0OyYjMjE1NDc7JiMxMjQxNjs8L3RleHQ+PC9nPjwhLS1lbnRpdHkgPz8/Pz8tLT48ZyBjbGFzcz0iZW50aXR5IiBkYXRhLWVudGl0eT0iLi4uLi4iIGRhdGEtc291cmNlLWxpbmU9IjciIGRhdGEtdWlkPSJlbnQwMDA2IiBpZD0iZW50aXR5Xy4uLi4uIj48ZWxsaXBzZSBjeD0iODIuOTk3MyIgY3k9IjIxMS45NzA1IiBmaWxsPSIjRjFGMUYxIiByeD0iNTIuNDk3MyIgcnk9IjE0LjUyMzYiIHN0eWxlPSJzdHJva2U6IzE4MTgxODtzdHJva2Utd2lkdGg6MC41OyIvPjx0ZXh0IGZpbGw9IiMwMDAwMDAiIGZvbnQtZmFtaWx5PSJzYW5zLXNlcmlmIiBmb250LXNpemU9IjE0IiBsZW5ndGhBZGp1c3Q9InNwYWNpbmciIHRleHRMZW5ndGg9IjY5Ljk5OTciIHg9IjQ3Ljk5NzQiIHk9IjIxNi42MTg5Ij4mIzI1OTY4OyYjMjMzODM7JiMxMjQzNDsmIzIxNTQ3OyYjMTI0MTY7PC90ZXh0PjwvZz48IS0tZW50aXR5ID8/Pz8/Pz8tLT48ZyBjbGFzcz0iZW50aXR5IiBkYXRhLWVudGl0eT0iLi4uLi4uLiIgZGF0YS1zb3VyY2UtbGluZT0iOCIgZGF0YS11aWQ9ImVudDAwMDciIGlkPSJlbnRpdHlfLi4uLi4uLiI+PGVsbGlwc2UgY3g9IjIzNi45OTUyIiBjeT0iMjExLjk2MTkiIGZpbGw9IiNGMUYxRjEiIHJ4PSI2Ni43MjUyIiByeT0iMTUuNzQ1IiBzdHlsZT0ic3Ryb2tlOiMxODE4MTg7c3Ryb2tlLXdpZHRoOjAuNTsiLz48dGV4dCBmaWxsPSIjMDAwMDAwIiBmb250LWZhbWlseT0ic2Fucy1zZXJpZiIgZm9udC1zaXplPSIxNCIgbGVuZ3RoQWRqdXN0PSJzcGFjaW5nIiB0ZXh0TGVuZ3RoPSI5Ny45OTk2IiB4PSIxODcuOTk1NCIgeT0iMjE2LjYxMDQiPiYjMjkzMDU7JiMyNzUzMDsmIzI1OTkxOyYjMjMzODM7JiMxMjQzNDsmIzIxNTQ3OyYjMTI0MTY7PC90ZXh0PjwvZz48ZyBjbGFzcz0iZW50aXR5IiBkYXRhLWVudGl0eT0iR01OOCIgZGF0YS1zb3VyY2UtbGluZT0iMTIiIGRhdGEtdWlkPSJlbnQwMDA5IiBpZD0iZW50aXR5X0dNTjgiPjxwYXRoIGQ9Ik01MTEuNzcsMTc2LjcwNjkgTDUxMS43NywyNDcuMjM4MSBMODM2LjIzMjYsMjQ3LjIzODEgTDgzNi4yMzI2LDE4Ni43MDY5IEw4MjYuMjMyNiwxNzYuNzA2OSBMNTExLjc3LDE3Ni43MDY5IiBmaWxsPSIjRkVGRkREIiBzdHlsZT0ic3Ryb2tlOiMxODE4MTg7c3Ryb2tlLXdpZHRoOjAuNTsiLz48cGF0aCBkPSJNODI2LjIzMjYsMTc2LjcwNjkgTDgyNi4yMzI2LDE4Ni43MDY5IEw4MzYuMjMyNiwxODYuNzA2OSBMODI2LjIzMjYsMTc2LjcwNjkiIGZpbGw9IiNGRUZGREQiIHN0eWxlPSJzdHJva2U6IzE4MTgxODtzdHJva2Utd2lkdGg6MTsiLz48dGV4dCBmaWxsPSIjMDAwMDAwIiBmb250LWZhbWlseT0ic2Fucy1zZXJpZiIgZm9udC1zaXplPSIxMyIgbGVuZ3RoQWRqdXN0PSJzcGFjaW5nIiB0ZXh0TGVuZ3RoPSIxNTYuMDAwMiIgeD0iNTE3Ljc3IiB5PSIxOTMuNzczOCI+JiMzNjAwMTsmIzIxMjA5OyYjMTI0ODc7JiMxMjU0MDsmIzEyNDc5OyYjMTI0MzQ7JiMyMDQ0NTsmIzM1NzAzOyYjMTIzNzc7JiMxMjQyNzsmIzEyMzgzOyYjMTI0MTc7PC90ZXh0Pjx0ZXh0IGZpbGw9IiMwMDAwMDAiIGZvbnQtZmFtaWx5PSJzYW5zLXNlcmlmIiBmb250LXNpemU9IjEzIiBsZW5ndGhBZGp1c3Q9InNwYWNpbmciIHRleHRMZW5ndGg9IjE5NS4wMDAyIiB4PSI1MTcuNzciIHk9IjIwOC45MDY2Ij4mIzEyMzc3OyYjMTI0MDk7JiMxMjM5MDsmIzEyMzk4OyYjMjY0NjU7JiMyMDIxNDsmIzEyNDM0OyYjMjgyODg7JiMxMjM4MzsmIzEyMzc3OyYjMjQ1MTc7JiMzNTIwMTsmIzEyMzY0OyYjMTIzNTQ7JiMxMjQyNzs8L3RleHQ+PHRleHQgZmlsbD0iIzAwMDAwMCIgZm9udC1mYW1pbHk9InNhbnMtc2VyaWYiIGZvbnQtc2l6ZT0iMTMiIGxlbmd0aEFkanVzdD0ic3BhY2luZyIgdGV4dExlbmd0aD0iMTQ4LjQ4NDQiIHg9IjUxNy43NyIgeT0iMjI0LjAzOTQiPiYjMjAzNjM7OiAiQWNjMHVudCFuZyIgKCYjMjYzNzc7JiMyMTE3NzspPC90ZXh0Pjx0ZXh0IGZpbGw9IiMwMDAwMDAiIGZvbnQtZmFtaWx5PSJzYW5zLXNlcmlmIiBmb250LXNpemU9IjEzIiBsZW5ndGhBZGp1c3Q9InNwYWNpbmciIHRleHRMZW5ndGg9IjMwMy40NjI2IiB4PSI1MTcuNzciIHk9IjIzOS4xNzIyIj4mIzIwMzYzOzogInBhc3N3b3JkMTIzIiAoJiMyODk2MTsmIzIxMTc3OyAtICYjMjI4MjM7JiMyNTk5MTsmIzIzMzgzOyYjMTI1Mzk7JiMyOTMwNTsmIzI3NTMwOyYjMjU5OTE7JiMyMzM4MzsmIzEyMzk0OyYjMTIzNzU7KTwvdGV4dD48L2c+PCEtLWxpbmsgcG9saWN5IHRvIEdNTjgtLT48ZyBjbGFzcz0ibGluayIgZGF0YS1lbnRpdHktMT0icG9saWN5IiBkYXRhLWVudGl0eS0yPSJHTU44IiBkYXRhLXNvdXJjZS1saW5lPSIxMiIgZGF0YS11aWQ9ImxuazEwIiBpZD0ibGlua19wb2xpY3lfR01OOCI+PHBhdGggZD0iTTQ4OC4yNjM2LDEwNy42MDIzIEM0ODguNDYzNiwxMDcuNzEzNiA0ODguNjY2OSwxMDcuODI2OCA0ODguODczNCwxMDcuOTQxOCBDNDkwLjUyNTQsMTA4Ljg2MTUgNDkyLjM4MzYsMTA5Ljg5NTkgNDk0LjQyNjksMTExLjAzMzMgQzUwMi42LDExNS41ODI4IDUxMy43MzUsMTIxLjc4IDUyNi40ODUsMTI4Ljg3NTYgQzU1MS45ODUsMTQzLjA2NjkgNTgzLjk0NSwxNjAuODUxOSA2MTEuNTksMTc2LjIzNjkiIGZpbGw9Im5vbmUiIGlkPSJwb2xpY3ktR01OOCIgc3R5bGU9InN0cm9rZTojMTgxODE4O3N0cm9rZS13aWR0aDoxO3N0cm9rZS1kYXNoYXJyYXk6Nyw3OyIvPjwvZz48IS0tU1JDPVtQT19CSWlEMDU4UnR5bkhaTGliMnlCOEhUcHZBSk1DZnI0bmZIYUg0d0NtZTlPZFcxUkc0MzFCRzJZc2puT0tySGlwM2RDbXFaLTQ0MnNBeF82LVN5ejRjUkphT24wdG01Q0doWTJ5R0ZlV09uMTN1SjRrNEVldkRRc3YzcnVvYk5aYldIVlBrdTlnN3N3SkxqNF9tQUo5dHI3ckZabGo1emJueTExT292Vkpncm01LUF3ejdtQmtMLVZJb1FnZ3h3UDhwenJDcjJMUVFQbVl2WDNmdWRyMUEzWjR2TTluN3ZMaVltbVg0aF9nRnZ0Zkl2NzR2ZFc2Qlc4VjA3ZTRwTDBjTTBYaTBjd1d1cUdJd2Zwd3hMU21ZY0x6ZUI2Mk5tQlpVZUU4eHRDTjZkY3JsN0JicXBNcU9zNUdGbFduSVFuNnJRdnZ0SjNocnBRcmpkU3RGNHZ0WFRWbjdBQjlfNjZtOGg2eVhud3RaMms4N10tLT48L2c+PC9zdmc+" class="uml" alt="uml diagram" title="" /></p>
<h4 id="_7">パスワードの実装<a class="headerlink" href="#_7" title="Permanent link">&para;</a></h4>
<div class="highlight"><pre><span></span><code><span class="kn">package</span><span class="w"> </span><span class="nn">com.example.accounting.domain.model.user</span><span class="p">;</span>

<span class="kn">import</span><span class="w"> </span><span class="nn">lombok.Value</span><span class="p">;</span>
<span class="kn">import</span><span class="w"> </span><span class="nn">org.springframework.security.crypto.bcrypt.BCryptPasswordEncoder</span><span class="p">;</span>
<span class="kn">import</span><span class="w"> </span><span class="nn">org.springframework.security.crypto.password.PasswordEncoder</span><span class="p">;</span>

<span class="cm">/**</span>
<span class="cm"> * パスワード値オブジェクト</span>
<span class="cm"> *</span>
<span class="cm"> * 財務システム用の強力なパスワードポリシーを実装する。</span>
<span class="cm"> * パスワードはBCryptでハッシュ化して保存する。</span>
<span class="cm"> */</span>
<span class="nd">@Value</span>
<span class="kd">public</span><span class="w"> </span><span class="kd">class</span> <span class="nc">Password</span><span class="w"> </span><span class="p">{</span>

<span class="w">    </span><span class="kd">private</span><span class="w"> </span><span class="kd">static</span><span class="w"> </span><span class="kd">final</span><span class="w"> </span><span class="n">PasswordEncoder</span><span class="w"> </span><span class="n">ENCODER</span><span class="w"> </span><span class="o">=</span><span class="w"> </span><span class="k">new</span><span class="w"> </span><span class="n">BCryptPasswordEncoder</span><span class="p">();</span>
<span class="w">    </span><span class="kd">private</span><span class="w"> </span><span class="kd">static</span><span class="w"> </span><span class="kd">final</span><span class="w"> </span><span class="kt">int</span><span class="w"> </span><span class="n">MIN_LENGTH</span><span class="w"> </span><span class="o">=</span><span class="w"> </span><span class="mi">8</span><span class="p">;</span>

<span class="w">    </span><span class="n">String</span><span class="w"> </span><span class="n">value</span><span class="p">;</span>

<span class="w">    </span><span class="kd">private</span><span class="w"> </span><span class="nf">Password</span><span class="p">(</span><span class="n">String</span><span class="w"> </span><span class="n">hashedValue</span><span class="p">)</span><span class="w"> </span><span class="p">{</span>
<span class="w">        </span><span class="k">this</span><span class="p">.</span><span class="na">value</span><span class="w"> </span><span class="o">=</span><span class="w"> </span><span class="n">hashedValue</span><span class="p">;</span>
<span class="w">    </span><span class="p">}</span>

<span class="w">    </span><span class="cm">/**</span>
<span class="cm">     * 生パスワードからPasswordを生成（ポリシーチェック付き）</span>
<span class="cm">     */</span>
<span class="w">    </span><span class="kd">public</span><span class="w"> </span><span class="kd">static</span><span class="w"> </span><span class="n">Password</span><span class="w"> </span><span class="nf">of</span><span class="p">(</span><span class="n">String</span><span class="w"> </span><span class="n">rawPassword</span><span class="p">)</span><span class="w"> </span><span class="p">{</span>
<span class="w">        </span><span class="k">if</span><span class="w"> </span><span class="p">(</span><span class="n">rawPassword</span><span class="w"> </span><span class="o">==</span><span class="w"> </span><span class="kc">null</span><span class="w"> </span><span class="o">||</span><span class="w"> </span><span class="n">rawPassword</span><span class="p">.</span><span class="na">isEmpty</span><span class="p">())</span><span class="w"> </span><span class="p">{</span>
<span class="w">            </span><span class="k">return</span><span class="w"> </span><span class="k">new</span><span class="w"> </span><span class="n">Password</span><span class="p">(</span><span class="s">&quot;&quot;</span><span class="p">);</span>
<span class="w">        </span><span class="p">}</span>
<span class="w">        </span><span class="n">checkPolicy</span><span class="p">(</span><span class="n">rawPassword</span><span class="p">);</span>
<span class="w">        </span><span class="k">return</span><span class="w"> </span><span class="k">new</span><span class="w"> </span><span class="n">Password</span><span class="p">(</span><span class="n">ENCODER</span><span class="p">.</span><span class="na">encode</span><span class="p">(</span><span class="n">rawPassword</span><span class="p">));</span>
<span class="w">    </span><span class="p">}</span>

<span class="w">    </span><span class="cm">/**</span>
<span class="cm">     * ハッシュ済みパスワードからPasswordを復元</span>
<span class="cm">     */</span>
<span class="w">    </span><span class="kd">public</span><span class="w"> </span><span class="kd">static</span><span class="w"> </span><span class="n">Password</span><span class="w"> </span><span class="nf">fromHash</span><span class="p">(</span><span class="n">String</span><span class="w"> </span><span class="n">hashedPassword</span><span class="p">)</span><span class="w"> </span><span class="p">{</span>
<span class="w">        </span><span class="k">return</span><span class="w"> </span><span class="k">new</span><span class="w"> </span><span class="n">Password</span><span class="p">(</span><span class="n">hashedPassword</span><span class="p">);</span>
<span class="w">    </span><span class="p">}</span>

<span class="w">    </span><span class="cm">/**</span>
<span class="cm">     * パスワードポリシーをチェック</span>
<span class="cm">     */</span>
<span class="w">    </span><span class="kd">private</span><span class="w"> </span><span class="kd">static</span><span class="w"> </span><span class="kt">void</span><span class="w"> </span><span class="nf">checkPolicy</span><span class="p">(</span><span class="n">String</span><span class="w"> </span><span class="n">rawPassword</span><span class="p">)</span><span class="w"> </span><span class="p">{</span>
<span class="w">        </span><span class="k">if</span><span class="w"> </span><span class="p">(</span><span class="n">rawPassword</span><span class="p">.</span><span class="na">length</span><span class="p">()</span><span class="w"> </span><span class="o">&lt;</span><span class="w"> </span><span class="n">MIN_LENGTH</span><span class="p">)</span><span class="w"> </span><span class="p">{</span>
<span class="w">            </span><span class="k">throw</span><span class="w"> </span><span class="k">new</span><span class="w"> </span><span class="n">PasswordException</span><span class="p">(</span>
<span class="w">                </span><span class="s">&quot;パスワードは&quot;</span><span class="w"> </span><span class="o">+</span><span class="w"> </span><span class="n">MIN_LENGTH</span><span class="w"> </span><span class="o">+</span><span class="w"> </span><span class="s">&quot;文字以上である必要があります&quot;</span>
<span class="w">            </span><span class="p">);</span>
<span class="w">        </span><span class="p">}</span>

<span class="w">        </span><span class="kt">boolean</span><span class="w"> </span><span class="n">hasDigit</span><span class="w"> </span><span class="o">=</span><span class="w"> </span><span class="n">rawPassword</span><span class="p">.</span><span class="na">chars</span><span class="p">().</span><span class="na">anyMatch</span><span class="p">(</span><span class="n">Character</span><span class="p">::</span><span class="n">isDigit</span><span class="p">);</span>
<span class="w">        </span><span class="kt">boolean</span><span class="w"> </span><span class="n">hasLower</span><span class="w"> </span><span class="o">=</span><span class="w"> </span><span class="n">rawPassword</span><span class="p">.</span><span class="na">chars</span><span class="p">().</span><span class="na">anyMatch</span><span class="p">(</span><span class="n">Character</span><span class="p">::</span><span class="n">isLowerCase</span><span class="p">);</span>
<span class="w">        </span><span class="kt">boolean</span><span class="w"> </span><span class="n">hasUpper</span><span class="w"> </span><span class="o">=</span><span class="w"> </span><span class="n">rawPassword</span><span class="p">.</span><span class="na">chars</span><span class="p">().</span><span class="na">anyMatch</span><span class="p">(</span><span class="n">Character</span><span class="p">::</span><span class="n">isUpperCase</span><span class="p">);</span>
<span class="w">        </span><span class="kt">boolean</span><span class="w"> </span><span class="n">hasSpecial</span><span class="w"> </span><span class="o">=</span><span class="w"> </span><span class="n">rawPassword</span><span class="p">.</span><span class="na">chars</span><span class="p">()</span>
<span class="w">            </span><span class="p">.</span><span class="na">anyMatch</span><span class="p">(</span><span class="n">c</span><span class="w"> </span><span class="o">-&gt;</span><span class="w"> </span><span class="s">&quot;!@#$%^&amp;*()_+-=[]{}|;:,.&lt;&gt;?&quot;</span><span class="p">.</span><span class="na">indexOf</span><span class="p">(</span><span class="n">c</span><span class="p">)</span><span class="w"> </span><span class="o">&gt;=</span><span class="w"> </span><span class="mi">0</span><span class="p">);</span>

<span class="w">        </span><span class="k">if</span><span class="w"> </span><span class="p">(</span><span class="o">!</span><span class="n">hasDigit</span><span class="p">)</span><span class="w"> </span><span class="p">{</span>
<span class="w">            </span><span class="k">throw</span><span class="w"> </span><span class="k">new</span><span class="w"> </span><span class="n">PasswordException</span><span class="p">(</span><span class="s">&quot;パスワードは数字を含む必要があります&quot;</span><span class="p">);</span>
<span class="w">        </span><span class="p">}</span>
<span class="w">        </span><span class="k">if</span><span class="w"> </span><span class="p">(</span><span class="o">!</span><span class="n">hasLower</span><span class="p">)</span><span class="w"> </span><span class="p">{</span>
<span class="w">            </span><span class="k">throw</span><span class="w"> </span><span class="k">new</span><span class="w"> </span><span class="n">PasswordException</span><span class="p">(</span><span class="s">&quot;パスワードは小文字を含む必要があります&quot;</span><span class="p">);</span>
<span class="w">        </span><span class="p">}</span>
<span class="w">        </span><span class="k">if</span><span class="w"> </span><span class="p">(</span><span class="o">!</span><span class="n">hasUpper</span><span class="p">)</span><span class="w"> </span><span class="p">{</span>
<span class="w">            </span><span class="k">throw</span><span class="w"> </span><span class="k">new</span><span class="w"> </span><span class="n">PasswordException</span><span class="p">(</span><span class="s">&quot;パスワードは大文字を含む必要があります&quot;</span><span class="p">);</span>
<span class="w">        </span><span class="p">}</span>
<span class="w">        </span><span class="k">if</span><span class="w"> </span><span class="p">(</span><span class="o">!</span><span class="n">hasSpecial</span><span class="p">)</span><span class="w"> </span><span class="p">{</span>
<span class="w">            </span><span class="k">throw</span><span class="w"> </span><span class="k">new</span><span class="w"> </span><span class="n">PasswordException</span><span class="p">(</span><span class="s">&quot;パスワードは特殊文字を含む必要があります&quot;</span><span class="p">);</span>
<span class="w">        </span><span class="p">}</span>
<span class="w">    </span><span class="p">}</span>

<span class="w">    </span><span class="cm">/**</span>
<span class="cm">     * 生パスワードと一致するか確認</span>
<span class="cm">     */</span>
<span class="w">    </span><span class="kd">public</span><span class="w"> </span><span class="kt">boolean</span><span class="w"> </span><span class="nf">matches</span><span class="p">(</span><span class="n">String</span><span class="w"> </span><span class="n">rawPassword</span><span class="p">)</span><span class="w"> </span><span class="p">{</span>
<span class="w">        </span><span class="k">if</span><span class="w"> </span><span class="p">(</span><span class="n">rawPassword</span><span class="w"> </span><span class="o">==</span><span class="w"> </span><span class="kc">null</span><span class="w"> </span><span class="o">||</span><span class="w"> </span><span class="k">this</span><span class="p">.</span><span class="na">value</span><span class="p">.</span><span class="na">isEmpty</span><span class="p">())</span><span class="w"> </span><span class="p">{</span>
<span class="w">            </span><span class="k">return</span><span class="w"> </span><span class="kc">false</span><span class="p">;</span>
<span class="w">        </span><span class="p">}</span>
<span class="w">        </span><span class="k">return</span><span class="w"> </span><span class="n">ENCODER</span><span class="p">.</span><span class="na">matches</span><span class="p">(</span><span class="n">rawPassword</span><span class="p">,</span><span class="w"> </span><span class="k">this</span><span class="p">.</span><span class="na">value</span><span class="p">);</span>
<span class="w">    </span><span class="p">}</span>

<span class="w">    </span><span class="cm">/**</span>
<span class="cm">     * パスワードが設定されているか確認</span>
<span class="cm">     */</span>
<span class="w">    </span><span class="kd">public</span><span class="w"> </span><span class="kt">boolean</span><span class="w"> </span><span class="nf">isSet</span><span class="p">()</span><span class="w"> </span><span class="p">{</span>
<span class="w">        </span><span class="k">return</span><span class="w"> </span><span class="o">!</span><span class="k">this</span><span class="p">.</span><span class="na">value</span><span class="p">.</span><span class="na">isEmpty</span><span class="p">();</span>
<span class="w">    </span><span class="p">}</span>
<span class="p">}</span>
</code></pre></div>
<h3 id="id">ユーザーIDの値オブジェクト<a class="headerlink" href="#id" title="Permanent link">&para;</a></h3>
<p>ユーザーIDには、財務会計システム用の形式ルールがあります。</p>
<div class="highlight"><pre><span></span><code><span class="kn">package</span><span class="w"> </span><span class="nn">com.example.accounting.domain.model.user</span><span class="p">;</span>

<span class="kn">import</span><span class="w"> </span><span class="nn">lombok.Value</span><span class="p">;</span>

<span class="cm">/**</span>
<span class="cm"> * ユーザーID値オブジェクト</span>
<span class="cm"> *</span>
<span class="cm"> * 形式: ACCで始まる6桁の数字（例: ACC000001）</span>
<span class="cm"> */</span>
<span class="nd">@Value</span>
<span class="kd">public</span><span class="w"> </span><span class="kd">class</span> <span class="nc">UserId</span><span class="w"> </span><span class="p">{</span>

<span class="w">    </span><span class="kd">private</span><span class="w"> </span><span class="kd">static</span><span class="w"> </span><span class="kd">final</span><span class="w"> </span><span class="n">String</span><span class="w"> </span><span class="n">PATTERN</span><span class="w"> </span><span class="o">=</span><span class="w"> </span><span class="s">&quot;^ACC[0-9]{6}$&quot;</span><span class="p">;</span>

<span class="w">    </span><span class="n">String</span><span class="w"> </span><span class="n">value</span><span class="p">;</span>

<span class="w">    </span><span class="kd">private</span><span class="w"> </span><span class="nf">UserId</span><span class="p">(</span><span class="n">String</span><span class="w"> </span><span class="n">value</span><span class="p">)</span><span class="w"> </span><span class="p">{</span>
<span class="w">        </span><span class="k">this</span><span class="p">.</span><span class="na">value</span><span class="w"> </span><span class="o">=</span><span class="w"> </span><span class="n">value</span><span class="p">;</span>
<span class="w">    </span><span class="p">}</span>

<span class="w">    </span><span class="kd">public</span><span class="w"> </span><span class="kd">static</span><span class="w"> </span><span class="n">UserId</span><span class="w"> </span><span class="nf">of</span><span class="p">(</span><span class="n">String</span><span class="w"> </span><span class="n">userId</span><span class="p">)</span><span class="w"> </span><span class="p">{</span>
<span class="w">        </span><span class="k">if</span><span class="w"> </span><span class="p">(</span><span class="n">userId</span><span class="w"> </span><span class="o">==</span><span class="w"> </span><span class="kc">null</span><span class="w"> </span><span class="o">||</span><span class="w"> </span><span class="n">userId</span><span class="p">.</span><span class="na">isBlank</span><span class="p">())</span><span class="w"> </span><span class="p">{</span>
<span class="w">            </span><span class="k">throw</span><span class="w"> </span><span class="k">new</span><span class="w"> </span><span class="n">UserIdException</span><span class="p">(</span><span class="s">&quot;ユーザーIDは必須です&quot;</span><span class="p">);</span>
<span class="w">        </span><span class="p">}</span>
<span class="w">        </span><span class="k">if</span><span class="w"> </span><span class="p">(</span><span class="o">!</span><span class="n">userId</span><span class="p">.</span><span class="na">matches</span><span class="p">(</span><span class="n">PATTERN</span><span class="p">))</span><span class="w"> </span><span class="p">{</span>
<span class="w">            </span><span class="k">throw</span><span class="w"> </span><span class="k">new</span><span class="w"> </span><span class="n">UserIdException</span><span class="p">(</span>
<span class="w">                </span><span class="s">&quot;ユーザーIDはACCで始まる6桁の数字である必要があります: &quot;</span><span class="w"> </span><span class="o">+</span><span class="w"> </span><span class="n">userId</span>
<span class="w">            </span><span class="p">);</span>
<span class="w">        </span><span class="p">}</span>
<span class="w">        </span><span class="k">return</span><span class="w"> </span><span class="k">new</span><span class="w"> </span><span class="n">UserId</span><span class="p">(</span><span class="n">userId</span><span class="p">);</span>
<span class="w">    </span><span class="p">}</span>

<span class="w">    </span><span class="cm">/**</span>
<span class="cm">     * 次のユーザーIDを生成</span>
<span class="cm">     */</span>
<span class="w">    </span><span class="kd">public</span><span class="w"> </span><span class="kd">static</span><span class="w"> </span><span class="n">UserId</span><span class="w"> </span><span class="nf">generateNext</span><span class="p">(</span><span class="n">String</span><span class="w"> </span><span class="n">lastUserId</span><span class="p">)</span><span class="w"> </span><span class="p">{</span>
<span class="w">        </span><span class="k">if</span><span class="w"> </span><span class="p">(</span><span class="n">lastUserId</span><span class="w"> </span><span class="o">==</span><span class="w"> </span><span class="kc">null</span><span class="p">)</span><span class="w"> </span><span class="p">{</span>
<span class="w">            </span><span class="k">return</span><span class="w"> </span><span class="k">new</span><span class="w"> </span><span class="n">UserId</span><span class="p">(</span><span class="s">&quot;ACC000001&quot;</span><span class="p">);</span>
<span class="w">        </span><span class="p">}</span>
<span class="w">        </span><span class="kt">int</span><span class="w"> </span><span class="n">sequence</span><span class="w"> </span><span class="o">=</span><span class="w"> </span><span class="n">Integer</span><span class="p">.</span><span class="na">parseInt</span><span class="p">(</span><span class="n">lastUserId</span><span class="p">.</span><span class="na">substring</span><span class="p">(</span><span class="mi">3</span><span class="p">));</span>
<span class="w">        </span><span class="k">return</span><span class="w"> </span><span class="k">new</span><span class="w"> </span><span class="n">UserId</span><span class="p">(</span><span class="n">String</span><span class="p">.</span><span class="na">format</span><span class="p">(</span><span class="s">&quot;ACC%06d&quot;</span><span class="p">,</span><span class="w"> </span><span class="n">sequence</span><span class="w"> </span><span class="o">+</span><span class="w"> </span><span class="mi">1</span><span class="p">));</span>
<span class="w">    </span><span class="p">}</span>
<span class="p">}</span>
</code></pre></div>
<table>
<thead>
<tr>
<th>項目</th>
<th>ルール</th>
<th>例</th>
</tr>
</thead>
<tbody>
<tr>
<td>先頭文字</td>
<td>"ACC" で始まる</td>
<td>ACC000001</td>
</tr>
<tr>
<td>桁数</td>
<td>9桁（ACC + 6桁の数字）</td>
<td>ACC123456</td>
</tr>
<tr>
<td>形式</td>
<td>正規表現: <code>^ACC[0-9]{6}$</code></td>
<td>ACC999999</td>
</tr>
</tbody>
</table>
<h3 id="_8">ロールと権限の実装<a class="headerlink" href="#_8" title="Permanent link">&para;</a></h3>
<div class="highlight"><pre><span></span><code><span class="kn">package</span><span class="w"> </span><span class="nn">com.example.accounting.domain.model.user</span><span class="p">;</span>

<span class="kn">import</span><span class="w"> </span><span class="nn">java.util.EnumSet</span><span class="p">;</span>
<span class="kn">import</span><span class="w"> </span><span class="nn">java.util.Set</span><span class="p">;</span>

<span class="cm">/**</span>
<span class="cm"> * ユーザーロール</span>
<span class="cm"> */</span>
<span class="kd">public</span><span class="w"> </span><span class="kd">enum</span><span class="w"> </span><span class="n">Role</span><span class="w"> </span><span class="p">{</span>

<span class="w">    </span><span class="n">ADMIN</span><span class="p">(</span><span class="s">&quot;システム管理者&quot;</span><span class="p">,</span><span class="w"> </span><span class="n">EnumSet</span><span class="p">.</span><span class="na">allOf</span><span class="p">(</span><span class="n">Permission</span><span class="p">.</span><span class="na">class</span><span class="p">)),</span>

<span class="w">    </span><span class="n">EXECUTIVE</span><span class="p">(</span><span class="s">&quot;経営者&quot;</span><span class="p">,</span><span class="w"> </span><span class="n">EnumSet</span><span class="p">.</span><span class="na">of</span><span class="p">(</span>
<span class="w">        </span><span class="n">Permission</span><span class="p">.</span><span class="na">ACCOUNT_READ</span><span class="p">,</span>
<span class="w">        </span><span class="n">Permission</span><span class="p">.</span><span class="na">JOURNAL_READ</span><span class="p">,</span>
<span class="w">        </span><span class="n">Permission</span><span class="p">.</span><span class="na">JOURNAL_APPROVE</span><span class="p">,</span>
<span class="w">        </span><span class="n">Permission</span><span class="p">.</span><span class="na">LEDGER_READ</span><span class="p">,</span>
<span class="w">        </span><span class="n">Permission</span><span class="p">.</span><span class="na">STATEMENT_READ</span><span class="p">,</span>
<span class="w">        </span><span class="n">Permission</span><span class="p">.</span><span class="na">ANALYSIS_READ</span><span class="p">,</span>
<span class="w">        </span><span class="n">Permission</span><span class="p">.</span><span class="na">AUDIT_READ</span>
<span class="w">    </span><span class="p">)),</span>

<span class="w">    </span><span class="n">MANAGER</span><span class="p">(</span><span class="s">&quot;経理マネージャー&quot;</span><span class="p">,</span><span class="w"> </span><span class="n">EnumSet</span><span class="p">.</span><span class="na">of</span><span class="p">(</span>
<span class="w">        </span><span class="n">Permission</span><span class="p">.</span><span class="na">ACCOUNT_READ</span><span class="p">,</span>
<span class="w">        </span><span class="n">Permission</span><span class="p">.</span><span class="na">ACCOUNT_WRITE</span><span class="p">,</span>
<span class="w">        </span><span class="n">Permission</span><span class="p">.</span><span class="na">JOURNAL_READ</span><span class="p">,</span>
<span class="w">        </span><span class="n">Permission</span><span class="p">.</span><span class="na">JOURNAL_WRITE</span><span class="p">,</span>
<span class="w">        </span><span class="n">Permission</span><span class="p">.</span><span class="na">JOURNAL_APPROVE</span><span class="p">,</span>
<span class="w">        </span><span class="n">Permission</span><span class="p">.</span><span class="na">JOURNAL_CONFIRM</span><span class="p">,</span>
<span class="w">        </span><span class="n">Permission</span><span class="p">.</span><span class="na">LEDGER_READ</span><span class="p">,</span>
<span class="w">        </span><span class="n">Permission</span><span class="p">.</span><span class="na">STATEMENT_READ</span><span class="p">,</span>
<span class="w">        </span><span class="n">Permission</span><span class="p">.</span><span class="na">ANALYSIS_READ</span>
<span class="w">    </span><span class="p">)),</span>

<span class="w">    </span><span class="n">ACCOUNTANT</span><span class="p">(</span><span class="s">&quot;経理担当者&quot;</span><span class="p">,</span><span class="w"> </span><span class="n">EnumSet</span><span class="p">.</span><span class="na">of</span><span class="p">(</span>
<span class="w">        </span><span class="n">Permission</span><span class="p">.</span><span class="na">ACCOUNT_READ</span><span class="p">,</span>
<span class="w">        </span><span class="n">Permission</span><span class="p">.</span><span class="na">JOURNAL_READ</span><span class="p">,</span>
<span class="w">        </span><span class="n">Permission</span><span class="p">.</span><span class="na">JOURNAL_WRITE</span><span class="p">,</span>
<span class="w">        </span><span class="n">Permission</span><span class="p">.</span><span class="na">LEDGER_READ</span><span class="p">,</span>
<span class="w">        </span><span class="n">Permission</span><span class="p">.</span><span class="na">STATEMENT_READ</span>
<span class="w">    </span><span class="p">));</span>

<span class="w">    </span><span class="kd">private</span><span class="w"> </span><span class="kd">final</span><span class="w"> </span><span class="n">String</span><span class="w"> </span><span class="n">displayName</span><span class="p">;</span>
<span class="w">    </span><span class="kd">private</span><span class="w"> </span><span class="kd">final</span><span class="w"> </span><span class="n">Set</span><span class="o">&lt;</span><span class="n">Permission</span><span class="o">&gt;</span><span class="w"> </span><span class="n">permissions</span><span class="p">;</span>

<span class="w">    </span><span class="n">Role</span><span class="p">(</span><span class="n">String</span><span class="w"> </span><span class="n">displayName</span><span class="p">,</span><span class="w"> </span><span class="n">Set</span><span class="o">&lt;</span><span class="n">Permission</span><span class="o">&gt;</span><span class="w"> </span><span class="n">permissions</span><span class="p">)</span><span class="w"> </span><span class="p">{</span>
<span class="w">        </span><span class="k">this</span><span class="p">.</span><span class="na">displayName</span><span class="w"> </span><span class="o">=</span><span class="w"> </span><span class="n">displayName</span><span class="p">;</span>
<span class="w">        </span><span class="k">this</span><span class="p">.</span><span class="na">permissions</span><span class="w"> </span><span class="o">=</span><span class="w"> </span><span class="n">permissions</span><span class="p">;</span>
<span class="w">    </span><span class="p">}</span>

<span class="w">    </span><span class="kd">public</span><span class="w"> </span><span class="n">String</span><span class="w"> </span><span class="nf">getDisplayName</span><span class="p">()</span><span class="w"> </span><span class="p">{</span>
<span class="w">        </span><span class="k">return</span><span class="w"> </span><span class="n">displayName</span><span class="p">;</span>
<span class="w">    </span><span class="p">}</span>

<span class="w">    </span><span class="kd">public</span><span class="w"> </span><span class="kt">boolean</span><span class="w"> </span><span class="nf">hasPermission</span><span class="p">(</span><span class="n">Permission</span><span class="w"> </span><span class="n">permission</span><span class="p">)</span><span class="w"> </span><span class="p">{</span>
<span class="w">        </span><span class="k">return</span><span class="w"> </span><span class="n">permissions</span><span class="p">.</span><span class="na">contains</span><span class="p">(</span><span class="n">permission</span><span class="p">);</span>
<span class="w">    </span><span class="p">}</span>

<span class="w">    </span><span class="kd">public</span><span class="w"> </span><span class="n">Set</span><span class="o">&lt;</span><span class="n">Permission</span><span class="o">&gt;</span><span class="w"> </span><span class="nf">getPermissions</span><span class="p">()</span><span class="w"> </span><span class="p">{</span>
<span class="w">        </span><span class="k">return</span><span class="w"> </span><span class="n">EnumSet</span><span class="p">.</span><span class="na">copyOf</span><span class="p">(</span><span class="n">permissions</span><span class="p">);</span>
<span class="w">    </span><span class="p">}</span>
<span class="p">}</span>

<span class="cm">/**</span>
<span class="cm"> * 権限</span>
<span class="cm"> */</span>
<span class="kd">public</span><span class="w"> </span><span class="kd">enum</span><span class="w"> </span><span class="n">Permission</span><span class="w"> </span><span class="p">{</span>
<span class="w">    </span><span class="c1">// ユーザー管理</span>
<span class="w">    </span><span class="n">USER_READ</span><span class="p">(</span><span class="s">&quot;ユーザー参照&quot;</span><span class="p">),</span>
<span class="w">    </span><span class="n">USER_WRITE</span><span class="p">(</span><span class="s">&quot;ユーザー登録・編集&quot;</span><span class="p">),</span>
<span class="w">    </span><span class="n">USER_DELETE</span><span class="p">(</span><span class="s">&quot;ユーザー削除&quot;</span><span class="p">),</span>

<span class="w">    </span><span class="c1">// 勘定科目</span>
<span class="w">    </span><span class="n">ACCOUNT_READ</span><span class="p">(</span><span class="s">&quot;勘定科目参照&quot;</span><span class="p">),</span>
<span class="w">    </span><span class="n">ACCOUNT_WRITE</span><span class="p">(</span><span class="s">&quot;勘定科目登録・編集&quot;</span><span class="p">),</span>

<span class="w">    </span><span class="c1">// 仕訳</span>
<span class="w">    </span><span class="n">JOURNAL_READ</span><span class="p">(</span><span class="s">&quot;仕訳参照&quot;</span><span class="p">),</span>
<span class="w">    </span><span class="n">JOURNAL_WRITE</span><span class="p">(</span><span class="s">&quot;仕訳入力&quot;</span><span class="p">),</span>
<span class="w">    </span><span class="n">JOURNAL_APPROVE</span><span class="p">(</span><span class="s">&quot;仕訳承認&quot;</span><span class="p">),</span>
<span class="w">    </span><span class="n">JOURNAL_CONFIRM</span><span class="p">(</span><span class="s">&quot;仕訳確定&quot;</span><span class="p">),</span>

<span class="w">    </span><span class="c1">// 元帳・帳票</span>
<span class="w">    </span><span class="n">LEDGER_READ</span><span class="p">(</span><span class="s">&quot;元帳参照&quot;</span><span class="p">),</span>
<span class="w">    </span><span class="n">STATEMENT_READ</span><span class="p">(</span><span class="s">&quot;財務諸表参照&quot;</span><span class="p">),</span>

<span class="w">    </span><span class="c1">// 分析・監査</span>
<span class="w">    </span><span class="n">ANALYSIS_READ</span><span class="p">(</span><span class="s">&quot;財務分析&quot;</span><span class="p">),</span>
<span class="w">    </span><span class="n">AUDIT_READ</span><span class="p">(</span><span class="s">&quot;監査ログ参照&quot;</span><span class="p">);</span>

<span class="w">    </span><span class="kd">private</span><span class="w"> </span><span class="kd">final</span><span class="w"> </span><span class="n">String</span><span class="w"> </span><span class="n">displayName</span><span class="p">;</span>

<span class="w">    </span><span class="n">Permission</span><span class="p">(</span><span class="n">String</span><span class="w"> </span><span class="n">displayName</span><span class="p">)</span><span class="w"> </span><span class="p">{</span>
<span class="w">        </span><span class="k">this</span><span class="p">.</span><span class="na">displayName</span><span class="w"> </span><span class="o">=</span><span class="w"> </span><span class="n">displayName</span><span class="p">;</span>
<span class="w">    </span><span class="p">}</span>

<span class="w">    </span><span class="kd">public</span><span class="w"> </span><span class="n">String</span><span class="w"> </span><span class="nf">getDisplayName</span><span class="p">()</span><span class="w"> </span><span class="p">{</span>
<span class="w">        </span><span class="k">return</span><span class="w"> </span><span class="n">displayName</span><span class="p">;</span>
<span class="w">    </span><span class="p">}</span>
<span class="p">}</span>
</code></pre></div>
<hr />
<h2 id="253-tdd">25.3 TDD による実装<a class="headerlink" href="#253-tdd" title="Permanent link">&para;</a></h2>
<h3 id="_9">テストファーストアプローチ<a class="headerlink" href="#_9" title="Permanent link">&para;</a></h3>
<p>ユーザードメインモデルの実装は、テストファーストで進めます。</p>
<p><img src="data:image/svg+xml;base64,PHN2ZyB4bWxucz0iaHR0cDovL3d3dy53My5vcmcvMjAwMC9zdmciIHhtbG5zOnhsaW5rPSJodHRwOi8vd3d3LnczLm9yZy8xOTk5L3hsaW5rIiBjb250ZW50U3R5bGVUeXBlPSJ0ZXh0L2NzcyIgZGF0YS1kaWFncmFtLXR5cGU9IlNUQVRFIiBoZWlnaHQ9IjQ3N3B4IiBwcmVzZXJ2ZUFzcGVjdFJhdGlvPSJub25lIiBzdHlsZT0id2lkdGg6MjUycHg7aGVpZ2h0OjQ3N3B4O2JhY2tncm91bmQ6I0ZGRkZGRjsiIHZlcnNpb249IjEuMSIgdmlld0JveD0iMCAwIDI1MiA0NzciIHdpZHRoPSIyNTJweCIgem9vbUFuZFBhbj0ibWFnbmlmeSI+PHRpdGxlPlRERCAmIzEyNDY5OyYjMTI0NTI7JiMxMjQ2MzsmIzEyNTIzOzwvdGl0bGU+PGRlZnMvPjxnPjxnIGNsYXNzPSJ0aXRsZSIgZGF0YS1zb3VyY2UtbGluZT0iMSI+PHRleHQgZmlsbD0iIzAwMDAwMCIgZm9udC1mYW1pbHk9InNhbnMtc2VyaWYiIGZvbnQtc2l6ZT0iMTQiIGZvbnQtd2VpZ2h0PSJib2xkIiBsZW5ndGhBZGp1c3Q9InNwYWNpbmciIHRleHRMZW5ndGg9IjkzLjY2NTgiIHg9IjcyLjIyMjIiIHk9IjIyLjk5NTEiPlRERCAmIzEyNDY5OyYjMTI0NTI7JiMxMjQ2MzsmIzEyNTIzOzwvdGV4dD48L2c+PGcgaWQ9InJlZCI+PHJlY3QgZmlsbD0iI0YxRjFGMSIgaGVpZ2h0PSI2NC4yMzQ0IiByeD0iMTIuNSIgcnk9IjEyLjUiIHN0eWxlPSJzdHJva2U6IzE4MTgxODtzdHJva2Utd2lkdGg6MC41OyIgd2lkdGg9IjkyLjAwMDUiIHg9IjgzIiB5PSIxMjQuMjk2OSIvPjxsaW5lIHN0eWxlPSJzdHJva2U6IzE4MTgxODtzdHJva2Utd2lkdGg6MC41OyIgeDE9IjgzIiB4Mj0iMTc1LjAwMDUiIHkxPSIxNTAuNTkzOCIgeTI9IjE1MC41OTM4Ii8+PHRleHQgZmlsbD0iIzAwMDAwMCIgZm9udC1mYW1pbHk9InNhbnMtc2VyaWYiIGZvbnQtc2l6ZT0iMTQiIGxlbmd0aEFkanVzdD0ic3BhY2luZyIgdGV4dExlbmd0aD0iMjcuMjI3NSIgeD0iMTE1LjM4NjUiIHk9IjE0Mi4yOTIiPlJlZDwvdGV4dD48dGV4dCBmaWxsPSIjMDAwMDAwIiBmb250LWZhbWlseT0ic2Fucy1zZXJpZiIgZm9udC1zaXplPSIxMiIgbGVuZ3RoQWRqdXN0PSJzcGFjaW5nIiB0ZXh0TGVuZ3RoPSI3Mi4wMDA1IiB4PSI4OCIgeT0iMTY2LjczMjQiPiYjMTI0ODY7JiMxMjQ3MzsmIzEyNDg4OyYjMTI0MzQ7JiMyNjM2MDsmIzEyMzY3OzwvdGV4dD48dGV4dCBmaWxsPSIjMDAwMDAwIiBmb250LWZhbWlseT0ic2Fucy1zZXJpZiIgZm9udC1zaXplPSIxMiIgbGVuZ3RoQWRqdXN0PSJzcGFjaW5nIiB0ZXh0TGVuZ3RoPSI3Mi4wMDA1IiB4PSI4OCIgeT0iMTgwLjcwMTIiPiYjNjUyODg7JiMyMjgzMzsmIzI1OTQzOyYjMTIzNzc7JiMxMjQyNzsmIzY1Mjg5OzwvdGV4dD48L2c+PGcgaWQ9ImdyZWVuIj48cmVjdCBmaWxsPSIjRjFGMUYxIiBoZWlnaHQ9IjY0LjIzNDQiIHJ4PSIxMi41IiByeT0iMTIuNSIgc3R5bGU9InN0cm9rZTojMTgxODE4O3N0cm9rZS13aWR0aDowLjU7IiB3aWR0aD0iMTE2LjAwMDciIHg9IjciIHk9IjI2NS41MjY5Ii8+PGxpbmUgc3R5bGU9InN0cm9rZTojMTgxODE4O3N0cm9rZS13aWR0aDowLjU7IiB4MT0iNyIgeDI9IjEyMy4wMDA3IiB5MT0iMjkxLjgyMzgiIHkyPSIyOTEuODIzOCIvPjx0ZXh0IGZpbGw9IiMwMDAwMDAiIGZvbnQtZmFtaWx5PSJzYW5zLXNlcmlmIiBmb250LXNpemU9IjE0IiBsZW5ndGhBZGp1c3Q9InNwYWNpbmciIHRleHRMZW5ndGg9IjQyLjcwNDEiIHg9IjQzLjY0ODMiIHk9IjI4My41MjIiPkdyZWVuPC90ZXh0Pjx0ZXh0IGZpbGw9IiMwMDAwMDAiIGZvbnQtZmFtaWx5PSJzYW5zLXNlcmlmIiBmb250LXNpemU9IjEyIiBsZW5ndGhBZGp1c3Q9InNwYWNpbmciIHRleHRMZW5ndGg9Ijk2LjAwMDciIHg9IjEyIiB5PSIzMDcuOTYyNCI+JiMyNjM2ODsmIzIzNTY3OyYjMzg0ODA7JiMxMjM5ODsmIzEyNDY3OyYjMTI1NDA7JiMxMjQ4OTsmIzEyMzkxOzwvdGV4dD48dGV4dCBmaWxsPSIjMDAwMDAwIiBmb250LWZhbWlseT0ic2Fucy1zZXJpZiIgZm9udC1zaXplPSIxMiIgbGVuZ3RoQWRqdXN0PSJzcGFjaW5nIiB0ZXh0TGVuZ3RoPSI3Mi4wMDA1IiB4PSIxMiIgeT0iMzIxLjkzMTIiPiYjMTI0ODY7JiMxMjQ3MzsmIzEyNDg4OyYjMTI0MzQ7JiMzNjg5MDsmIzEyMzc3OzwvdGV4dD48L2c+PGcgaWQ9InJlZmFjdG9yIj48cmVjdCBmaWxsPSIjRjFGMUYxIiBoZWlnaHQ9IjY0LjIzNDQiIHJ4PSIxMi41IiByeT0iMTIuNSIgc3R5bGU9InN0cm9rZTojMTgxODE4O3N0cm9rZS13aWR0aDowLjU7IiB3aWR0aD0iNzkuMzU2NCIgeD0iODkuMzIiIHk9IjQwNi43NjY5Ii8+PGxpbmUgc3R5bGU9InN0cm9rZTojMTgxODE4O3N0cm9rZS13aWR0aDowLjU7IiB4MT0iODkuMzIiIHgyPSIxNjguNjc2NCIgeTE9IjQzMy4wNjM3IiB5Mj0iNDMzLjA2MzciLz48dGV4dCBmaWxsPSIjMDAwMDAwIiBmb250LWZhbWlseT0ic2Fucy1zZXJpZiIgZm9udC1zaXplPSIxNCIgbGVuZ3RoQWRqdXN0PSJzcGFjaW5nIiB0ZXh0TGVuZ3RoPSI1OS4zNTY0IiB4PSI5OS4zMiIgeT0iNDI0Ljc2MiI+UmVmYWN0b3I8L3RleHQ+PHRleHQgZmlsbD0iIzAwMDAwMCIgZm9udC1mYW1pbHk9InNhbnMtc2VyaWYiIGZvbnQtc2l6ZT0iMTIiIGxlbmd0aEFkanVzdD0ic3BhY2luZyIgdGV4dExlbmd0aD0iNDguMDAwNCIgeD0iOTQuMzIiIHk9IjQ0OS4yMDI0Ij4mIzEyNDY3OyYjMTI1NDA7JiMxMjQ4OTsmIzEyNDM0OzwvdGV4dD48dGV4dCBmaWxsPSIjMDAwMDAwIiBmb250LWZhbWlseT0ic2Fucy1zZXJpZiIgZm9udC1zaXplPSIxMiIgbGVuZ3RoQWRqdXN0PSJzcGFjaW5nIiB0ZXh0TGVuZ3RoPSI0OC4wMDA0IiB4PSI5NC4zMiIgeT0iNDYzLjE3MTIiPiYjMjU5MTM7JiMyMTg5MjsmIzEyMzc3OyYjMTI0Mjc7PC90ZXh0PjwvZz48ZWxsaXBzZSBjeD0iMTI5IiBjeT0iNTMuMjk2OSIgZmlsbD0iIzIyMjIyMiIgcng9IjEwIiByeT0iMTAiIHN0eWxlPSJzdHJva2U6IzIyMjIyMjtzdHJva2Utd2lkdGg6MTsiLz48IS0tbGluayAqc3RhcnQqIHRvIHJlZC0tPjxnIGNsYXNzPSJsaW5rIiBkYXRhLWVudGl0eS0xPSIuc3RhcnQuIiBkYXRhLWVudGl0eS0yPSJyZWQiIGRhdGEtc291cmNlLWxpbmU9IjciIGRhdGEtdWlkPSJsbmszIiBpZD0ibGlua18uc3RhcnQuX3JlZCI+PHBhdGggZD0iTTEyOSw2My42MjY5IEMxMjksNzcuMjE2OSAxMjksOTcuMTA2OSAxMjksMTE3LjkzNjkiIGZpbGw9Im5vbmUiIGlkPSIqc3RhcnQqLXRvLXJlZCIgc3R5bGU9InN0cm9rZTojMTgxODE4O3N0cm9rZS13aWR0aDoxOyIvPjxwb2x5Z29uIGZpbGw9IiMxODE4MTgiIHBvaW50cz0iMTI5LDEyMy45MzY5LDEzMywxMTQuOTM2OSwxMjksMTE4LjkzNjksMTI1LDExNC45MzY5LDEyOSwxMjMuOTM2OSIgc3R5bGU9InN0cm9rZTojMTgxODE4O3N0cm9rZS13aWR0aDoxOyIvPjwvZz48IS0tbGluayByZWQgdG8gZ3JlZW4tLT48ZyBjbGFzcz0ibGluayIgZGF0YS1lbnRpdHktMT0icmVkIiBkYXRhLWVudGl0eS0yPSJncmVlbiIgZGF0YS1zb3VyY2UtbGluZT0iOCIgZGF0YS11aWQ9ImxuazQiIGlkPSJsaW5rX3JlZF9ncmVlbiI+PHBhdGggZD0iTTExNC40OCwxODkuMDA2OSBDMTA0LDIxMS43OTY5IDkyLjQzNTUsMjM2Ljk2NTEgODEuOTc1NSwyNTkuNzI1MSIgZmlsbD0ibm9uZSIgaWQ9InJlZC10by1ncmVlbiIgc3R5bGU9InN0cm9rZTojMTgxODE4O3N0cm9rZS13aWR0aDoxOyIvPjxwb2x5Z29uIGZpbGw9IiMxODE4MTgiIHBvaW50cz0iNzkuNDcsMjY1LjE3NjksODYuODYyOCwyNTguNjY5NSw4MS41NTc5LDI2MC42MzM3LDc5LjU5MzgsMjU1LjMyODgsNzkuNDcsMjY1LjE3NjkiIHN0eWxlPSJzdHJva2U6IzE4MTgxODtzdHJva2Utd2lkdGg6MTsiLz48dGV4dCBmaWxsPSIjMDAwMDAwIiBmb250LWZhbWlseT0ic2Fucy1zZXJpZiIgZm9udC1zaXplPSIxMyIgbGVuZ3RoQWRqdXN0PSJzcGFjaW5nIiB0ZXh0TGVuZ3RoPSIyNiIgeD0iMTAxLjgzIiB5PSIyMzEuNTkzOCI+JiMyMzQ1NTsmIzM1MDEzOzwvdGV4dD48L2c+PCEtLWxpbmsgZ3JlZW4gdG8gcmVmYWN0b3ItLT48ZyBjbGFzcz0ibGluayIgZGF0YS1lbnRpdHktMT0iZ3JlZW4iIGRhdGEtZW50aXR5LTI9InJlZmFjdG9yIiBkYXRhLXNvdXJjZS1saW5lPSI5IiBkYXRhLXVpZD0ibG5rNSIgaWQ9ImxpbmtfZ3JlZW5fcmVmYWN0b3IiPjxwYXRoIGQ9Ik03MS4zMiwzMjkuOTA2OSBDNzQuOSwzNDQuNTM2OSA4MC4wNiwzNjEuOTY2OSA4NywzNzYuNzY2OSBDOTEuNzUsMzg2LjkwNjkgOTQuNzIyOCwzOTIuMjY4MSAxMDEuMDYyOCw0MDEuNDU4MSIgZmlsbD0ibm9uZSIgaWQ9ImdyZWVuLXRvLXJlZmFjdG9yIiBzdHlsZT0ic3Ryb2tlOiMxODE4MTg7c3Ryb2tlLXdpZHRoOjE7Ii8+PHBvbHlnb24gZmlsbD0iIzE4MTgxOCIgcG9pbnRzPSIxMDQuNDcsNDA2LjM5NjksMTAyLjY1MTgsMzk2LjcxNzMsMTAxLjYzMDcsNDAyLjI4MTIsOTYuMDY2OCw0MDEuMjYwMiwxMDQuNDcsNDA2LjM5NjkiIHN0eWxlPSJzdHJva2U6IzE4MTgxODtzdHJva2Utd2lkdGg6MTsiLz48dGV4dCBmaWxsPSIjMDAwMDAwIiBmb250LWZhbWlseT0ic2Fucy1zZXJpZiIgZm9udC1zaXplPSIxMyIgbGVuZ3RoQWRqdXN0PSJzcGFjaW5nIiB0ZXh0TGVuZ3RoPSI3OC4wMDAxIiB4PSI4OCIgeT0iMzcyLjgzMzgiPiYjMTI0ODY7JiMxMjQ3MzsmIzEyNDg4OyYjMTIzNjQ7JiMzNjg5MDsmIzEyNDI3OzwvdGV4dD48L2c+PCEtLWxpbmsgcmVmYWN0b3IgdG8gcmVkLS0+PGcgY2xhc3M9ImxpbmsiIGRhdGEtZW50aXR5LTE9InJlZmFjdG9yIiBkYXRhLWVudGl0eS0yPSJyZWQiIGRhdGEtc291cmNlLWxpbmU9IjEwIiBkYXRhLXVpZD0ibG5rNiIgaWQ9ImxpbmtfcmVmYWN0b3JfcmVkIj48cGF0aCBkPSJNMTU1Ljg0LDQwNi40ODY5IEMxNjIuMDQsMzk3LjQ2NjkgMTY3Ljc2LDM4Ny4yMTY5IDE3MSwzNzYuNzY2OSBDMTkxLjI5LDMxMS40MDY5IDE2Ni4wNzU1LDIzNy4zODAzIDE0Ni45NDU1LDE5NC4zMTAzIiBmaWxsPSJub25lIiBpZD0icmVmYWN0b3ItdG8tcmVkIiBzdHlsZT0ic3Ryb2tlOiMxODE4MTg7c3Ryb2tlLXdpZHRoOjE7Ii8+PHBvbHlnb24gZmlsbD0iIzE4MTgxOCIgcG9pbnRzPSIxNDQuNTEsMTg4LjgyNjksMTQ0LjUwNzcsMTk4LjY3NTcsMTQ2LjUzOTYsMTkzLjM5NjQsMTUxLjgxODksMTk1LjQyODQsMTQ0LjUxLDE4OC44MjY5IiBzdHlsZT0ic3Ryb2tlOiMxODE4MTg7c3Ryb2tlLXdpZHRoOjE7Ii8+PHRleHQgZmlsbD0iIzAwMDAwMCIgZm9udC1mYW1pbHk9InNhbnMtc2VyaWYiIGZvbnQtc2l6ZT0iMTMiIGxlbmd0aEFkanVzdD0ic3BhY2luZyIgdGV4dExlbmd0aD0iNjUuMDAwMSIgeD0iMTc5LjExIiB5PSIzMDIuMjEzOCI+JiMyNzQyNTsmIzEyMzk4OyYjMTI0ODY7JiMxMjQ3MzsmIzEyNDg4OzwvdGV4dD48L2c+PCEtLVNSQz1bQXlhaW9LYkwyNzVuS05aU2pGTG5xdkI3SlVpVkR3X2N1WWVrSUluOUxMMEFJYXJIS2FXaUxZWEFKTDZtS2RaU3RGUXVRVVZadmV4N0pQRVVwVHhua0I0XzlrX3pkZXdkSXBPLWNwaHpTVUZDbnF0VHhfVHFtbEl3NXdNY3ZlNXJmdURPR0Z0RnZaR3l0VDNfU2tRNG51dGg3WlRqVmpveXZ0NXB2LUY2dko1dm8yUV9SOVc1RDBsWFdoSjR2OUJ5OGdXcDgxb0dNLTN3Y29SNXYzc1JpbEZmajFRODR4WXVlaExZNU5IcnhLMmt2V0F2N0NJNmtVN2ZrbGFsNWhUb0dSV0dIR1dwdVF2ZXgwNnYwY1dNTjFQZzdpV05RblEydDB6SjJtMDBdLS0+PC9nPjwvc3ZnPg==" class="uml" alt="uml diagram" title="" /></p>
<h3 id="_10">ユーザー登録のテスト<a class="headerlink" href="#_10" title="Permanent link">&para;</a></h3>
<div class="highlight"><pre><span></span><code><span class="kn">package</span><span class="w"> </span><span class="nn">com.example.accounting.domain.model.user</span><span class="p">;</span>

<span class="kn">import</span><span class="w"> </span><span class="nn">org.junit.jupiter.api.DisplayName</span><span class="p">;</span>
<span class="kn">import</span><span class="w"> </span><span class="nn">org.junit.jupiter.api.Nested</span><span class="p">;</span>
<span class="kn">import</span><span class="w"> </span><span class="nn">org.junit.jupiter.api.Test</span><span class="p">;</span>

<span class="kn">import static</span><span class="w"> </span><span class="nn">org.junit.jupiter.api.Assertions.*</span><span class="p">;</span>

<span class="nd">@DisplayName</span><span class="p">(</span><span class="s">&quot;ユーザー&quot;</span><span class="p">)</span>
<span class="kd">class</span> <span class="nc">UserTest</span><span class="w"> </span><span class="p">{</span>

<span class="w">    </span><span class="nd">@Nested</span>
<span class="w">    </span><span class="nd">@DisplayName</span><span class="p">(</span><span class="s">&quot;ユーザー生成&quot;</span><span class="p">)</span>
<span class="w">    </span><span class="kd">class</span> <span class="nc">CreateTest</span><span class="w"> </span><span class="p">{</span>

<span class="w">        </span><span class="nd">@Test</span>
<span class="w">        </span><span class="nd">@DisplayName</span><span class="p">(</span><span class="s">&quot;有効な情報でユーザーを生成できる&quot;</span><span class="p">)</span>
<span class="w">        </span><span class="kt">void</span><span class="w"> </span><span class="nf">canCreateUserWithValidInfo</span><span class="p">()</span><span class="w"> </span><span class="p">{</span>
<span class="w">            </span><span class="n">User</span><span class="w"> </span><span class="n">user</span><span class="w"> </span><span class="o">=</span><span class="w"> </span><span class="n">User</span><span class="p">.</span><span class="na">create</span><span class="p">(</span>
<span class="w">                </span><span class="s">&quot;ACC000001&quot;</span><span class="p">,</span>
<span class="w">                </span><span class="s">&quot;Acc0unt!ng&quot;</span><span class="p">,</span>
<span class="w">                </span><span class="s">&quot;山田&quot;</span><span class="p">,</span>
<span class="w">                </span><span class="s">&quot;太郎&quot;</span><span class="p">,</span>
<span class="w">                </span><span class="s">&quot;yamada@example.com&quot;</span><span class="p">,</span>
<span class="w">                </span><span class="n">Role</span><span class="p">.</span><span class="na">ACCOUNTANT</span>
<span class="w">            </span><span class="p">);</span>

<span class="w">            </span><span class="n">assertEquals</span><span class="p">(</span><span class="n">UserId</span><span class="p">.</span><span class="na">of</span><span class="p">(</span><span class="s">&quot;ACC000001&quot;</span><span class="p">),</span><span class="w"> </span><span class="n">user</span><span class="p">.</span><span class="na">getUserId</span><span class="p">());</span>
<span class="w">            </span><span class="n">assertEquals</span><span class="p">(</span><span class="s">&quot;山田&quot;</span><span class="p">,</span><span class="w"> </span><span class="n">user</span><span class="p">.</span><span class="na">getName</span><span class="p">().</span><span class="na">getFirstName</span><span class="p">());</span>
<span class="w">            </span><span class="n">assertEquals</span><span class="p">(</span><span class="s">&quot;太郎&quot;</span><span class="p">,</span><span class="w"> </span><span class="n">user</span><span class="p">.</span><span class="na">getName</span><span class="p">().</span><span class="na">getLastName</span><span class="p">());</span>
<span class="w">            </span><span class="n">assertEquals</span><span class="p">(</span><span class="s">&quot;山田 太郎&quot;</span><span class="p">,</span><span class="w"> </span><span class="n">user</span><span class="p">.</span><span class="na">getName</span><span class="p">().</span><span class="na">getFullName</span><span class="p">());</span>
<span class="w">            </span><span class="n">assertEquals</span><span class="p">(</span><span class="n">Email</span><span class="p">.</span><span class="na">of</span><span class="p">(</span><span class="s">&quot;yamada@example.com&quot;</span><span class="p">),</span><span class="w"> </span><span class="n">user</span><span class="p">.</span><span class="na">getEmail</span><span class="p">());</span>
<span class="w">            </span><span class="n">assertEquals</span><span class="p">(</span><span class="n">Role</span><span class="p">.</span><span class="na">ACCOUNTANT</span><span class="p">,</span><span class="w"> </span><span class="n">user</span><span class="p">.</span><span class="na">getRole</span><span class="p">());</span>
<span class="w">            </span><span class="n">assertEquals</span><span class="p">(</span><span class="n">UserStatus</span><span class="p">.</span><span class="na">ACTIVE</span><span class="p">,</span><span class="w"> </span><span class="n">user</span><span class="p">.</span><span class="na">getStatus</span><span class="p">());</span>
<span class="w">        </span><span class="p">}</span>

<span class="w">        </span><span class="nd">@Test</span>
<span class="w">        </span><span class="nd">@DisplayName</span><span class="p">(</span><span class="s">&quot;ユーザーIDが未入力の場合は生成できない&quot;</span><span class="p">)</span>
<span class="w">        </span><span class="kt">void</span><span class="w"> </span><span class="nf">cannotCreateUserWhenUserIdIsMissing</span><span class="p">()</span><span class="w"> </span><span class="p">{</span>
<span class="w">            </span><span class="n">assertThrows</span><span class="p">(</span><span class="n">UserException</span><span class="p">.</span><span class="na">class</span><span class="p">,</span><span class="w"> </span><span class="p">()</span><span class="w"> </span><span class="o">-&gt;</span>
<span class="w">                </span><span class="n">User</span><span class="p">.</span><span class="na">create</span><span class="p">(</span><span class="kc">null</span><span class="p">,</span><span class="w"> </span><span class="s">&quot;Acc0unt!ng&quot;</span><span class="p">,</span><span class="w"> </span><span class="s">&quot;山田&quot;</span><span class="p">,</span><span class="w"> </span><span class="s">&quot;太郎&quot;</span><span class="p">,</span>
<span class="w">                    </span><span class="s">&quot;yamada@example.com&quot;</span><span class="p">,</span><span class="w"> </span><span class="n">Role</span><span class="p">.</span><span class="na">ACCOUNTANT</span><span class="p">)</span>
<span class="w">            </span><span class="p">);</span>
<span class="w">        </span><span class="p">}</span>

<span class="w">        </span><span class="nd">@Test</span>
<span class="w">        </span><span class="nd">@DisplayName</span><span class="p">(</span><span class="s">&quot;ロールが未入力の場合は生成できない&quot;</span><span class="p">)</span>
<span class="w">        </span><span class="kt">void</span><span class="w"> </span><span class="nf">cannotCreateUserWhenRoleIsMissing</span><span class="p">()</span><span class="w"> </span><span class="p">{</span>
<span class="w">            </span><span class="n">assertThrows</span><span class="p">(</span><span class="n">UserException</span><span class="p">.</span><span class="na">class</span><span class="p">,</span><span class="w"> </span><span class="p">()</span><span class="w"> </span><span class="o">-&gt;</span>
<span class="w">                </span><span class="n">User</span><span class="p">.</span><span class="na">create</span><span class="p">(</span><span class="s">&quot;ACC000001&quot;</span><span class="p">,</span><span class="w"> </span><span class="s">&quot;Acc0unt!ng&quot;</span><span class="p">,</span><span class="w"> </span><span class="s">&quot;山田&quot;</span><span class="p">,</span><span class="w"> </span><span class="s">&quot;太郎&quot;</span><span class="p">,</span>
<span class="w">                    </span><span class="s">&quot;yamada@example.com&quot;</span><span class="p">,</span><span class="w"> </span><span class="kc">null</span><span class="p">)</span>
<span class="w">            </span><span class="p">);</span>
<span class="w">        </span><span class="p">}</span>
<span class="w">    </span><span class="p">}</span>

<span class="w">    </span><span class="nd">@Nested</span>
<span class="w">    </span><span class="nd">@DisplayName</span><span class="p">(</span><span class="s">&quot;ユーザーID検証&quot;</span><span class="p">)</span>
<span class="w">    </span><span class="kd">class</span> <span class="nc">UserIdValidationTest</span><span class="w"> </span><span class="p">{</span>

<span class="w">        </span><span class="nd">@Test</span>
<span class="w">        </span><span class="nd">@DisplayName</span><span class="p">(</span><span class="s">&quot;ユーザーIDはACCで始まる6桁の数字である&quot;</span><span class="p">)</span>
<span class="w">        </span><span class="kt">void</span><span class="w"> </span><span class="nf">userIdMustStartWithACCAndBeSixDigitNumber</span><span class="p">()</span><span class="w"> </span><span class="p">{</span>
<span class="w">            </span><span class="n">assertThrows</span><span class="p">(</span><span class="n">UserIdException</span><span class="p">.</span><span class="na">class</span><span class="p">,</span><span class="w"> </span><span class="p">()</span><span class="w"> </span><span class="o">-&gt;</span>
<span class="w">                </span><span class="n">User</span><span class="p">.</span><span class="na">create</span><span class="p">(</span><span class="s">&quot;1&quot;</span><span class="p">,</span><span class="w"> </span><span class="s">&quot;Acc0unt!ng&quot;</span><span class="p">,</span><span class="w"> </span><span class="s">&quot;山田&quot;</span><span class="p">,</span><span class="w"> </span><span class="s">&quot;太郎&quot;</span><span class="p">,</span>
<span class="w">                    </span><span class="s">&quot;yamada@example.com&quot;</span><span class="p">,</span><span class="w"> </span><span class="n">Role</span><span class="p">.</span><span class="na">ACCOUNTANT</span><span class="p">)</span>
<span class="w">            </span><span class="p">);</span>

<span class="w">            </span><span class="n">assertThrows</span><span class="p">(</span><span class="n">UserIdException</span><span class="p">.</span><span class="na">class</span><span class="p">,</span><span class="w"> </span><span class="p">()</span><span class="w"> </span><span class="o">-&gt;</span>
<span class="w">                </span><span class="n">User</span><span class="p">.</span><span class="na">create</span><span class="p">(</span><span class="s">&quot;USR000001&quot;</span><span class="p">,</span><span class="w"> </span><span class="s">&quot;Acc0unt!ng&quot;</span><span class="p">,</span><span class="w"> </span><span class="s">&quot;山田&quot;</span><span class="p">,</span><span class="w"> </span><span class="s">&quot;太郎&quot;</span><span class="p">,</span>
<span class="w">                    </span><span class="s">&quot;yamada@example.com&quot;</span><span class="p">,</span><span class="w"> </span><span class="n">Role</span><span class="p">.</span><span class="na">ACCOUNTANT</span><span class="p">)</span>
<span class="w">            </span><span class="p">);</span>

<span class="w">            </span><span class="n">assertThrows</span><span class="p">(</span><span class="n">UserIdException</span><span class="p">.</span><span class="na">class</span><span class="p">,</span><span class="w"> </span><span class="p">()</span><span class="w"> </span><span class="o">-&gt;</span>
<span class="w">                </span><span class="n">User</span><span class="p">.</span><span class="na">create</span><span class="p">(</span><span class="s">&quot;ACC12345&quot;</span><span class="p">,</span><span class="w"> </span><span class="s">&quot;Acc0unt!ng&quot;</span><span class="p">,</span><span class="w"> </span><span class="s">&quot;山田&quot;</span><span class="p">,</span><span class="w"> </span><span class="s">&quot;太郎&quot;</span><span class="p">,</span>
<span class="w">                    </span><span class="s">&quot;yamada@example.com&quot;</span><span class="p">,</span><span class="w"> </span><span class="n">Role</span><span class="p">.</span><span class="na">ACCOUNTANT</span><span class="p">)</span>
<span class="w">            </span><span class="p">);</span>
<span class="w">        </span><span class="p">}</span>
<span class="w">    </span><span class="p">}</span>

<span class="w">    </span><span class="nd">@Nested</span>
<span class="w">    </span><span class="nd">@DisplayName</span><span class="p">(</span><span class="s">&quot;パスワード変更&quot;</span><span class="p">)</span>
<span class="w">    </span><span class="kd">class</span> <span class="nc">ChangePasswordTest</span><span class="w"> </span><span class="p">{</span>

<span class="w">        </span><span class="nd">@Test</span>
<span class="w">        </span><span class="nd">@DisplayName</span><span class="p">(</span><span class="s">&quot;パスワードを変更できる&quot;</span><span class="p">)</span>
<span class="w">        </span><span class="kt">void</span><span class="w"> </span><span class="nf">canChangePassword</span><span class="p">()</span><span class="w"> </span><span class="p">{</span>
<span class="w">            </span><span class="n">User</span><span class="w"> </span><span class="n">user</span><span class="w"> </span><span class="o">=</span><span class="w"> </span><span class="n">User</span><span class="p">.</span><span class="na">create</span><span class="p">(</span>
<span class="w">                </span><span class="s">&quot;ACC000001&quot;</span><span class="p">,</span><span class="w"> </span><span class="s">&quot;Acc0unt!ng&quot;</span><span class="p">,</span><span class="w"> </span><span class="s">&quot;山田&quot;</span><span class="p">,</span><span class="w"> </span><span class="s">&quot;太郎&quot;</span><span class="p">,</span>
<span class="w">                </span><span class="s">&quot;yamada@example.com&quot;</span><span class="p">,</span><span class="w"> </span><span class="n">Role</span><span class="p">.</span><span class="na">ACCOUNTANT</span>
<span class="w">            </span><span class="p">);</span>

<span class="w">            </span><span class="n">User</span><span class="w"> </span><span class="n">updated</span><span class="w"> </span><span class="o">=</span><span class="w"> </span><span class="n">user</span><span class="p">.</span><span class="na">changePassword</span><span class="p">(</span><span class="s">&quot;NewP@ss123&quot;</span><span class="p">);</span>

<span class="w">            </span><span class="n">assertTrue</span><span class="p">(</span><span class="n">updated</span><span class="p">.</span><span class="na">getPassword</span><span class="p">().</span><span class="na">matches</span><span class="p">(</span><span class="s">&quot;NewP@ss123&quot;</span><span class="p">));</span>
<span class="w">            </span><span class="n">assertFalse</span><span class="p">(</span><span class="n">updated</span><span class="p">.</span><span class="na">getPassword</span><span class="p">().</span><span class="na">matches</span><span class="p">(</span><span class="s">&quot;Acc0unt!ng&quot;</span><span class="p">));</span>
<span class="w">        </span><span class="p">}</span>
<span class="w">    </span><span class="p">}</span>

<span class="w">    </span><span class="nd">@Nested</span>
<span class="w">    </span><span class="nd">@DisplayName</span><span class="p">(</span><span class="s">&quot;権限チェック&quot;</span><span class="p">)</span>
<span class="w">    </span><span class="kd">class</span> <span class="nc">PermissionTest</span><span class="w"> </span><span class="p">{</span>

<span class="w">        </span><span class="nd">@Test</span>
<span class="w">        </span><span class="nd">@DisplayName</span><span class="p">(</span><span class="s">&quot;経理担当者は仕訳入力権限を持つ&quot;</span><span class="p">)</span>
<span class="w">        </span><span class="kt">void</span><span class="w"> </span><span class="nf">accountantHasJournalWritePermission</span><span class="p">()</span><span class="w"> </span><span class="p">{</span>
<span class="w">            </span><span class="n">User</span><span class="w"> </span><span class="n">user</span><span class="w"> </span><span class="o">=</span><span class="w"> </span><span class="n">User</span><span class="p">.</span><span class="na">create</span><span class="p">(</span>
<span class="w">                </span><span class="s">&quot;ACC000001&quot;</span><span class="p">,</span><span class="w"> </span><span class="s">&quot;Acc0unt!ng&quot;</span><span class="p">,</span><span class="w"> </span><span class="s">&quot;山田&quot;</span><span class="p">,</span><span class="w"> </span><span class="s">&quot;太郎&quot;</span><span class="p">,</span>
<span class="w">                </span><span class="s">&quot;yamada@example.com&quot;</span><span class="p">,</span><span class="w"> </span><span class="n">Role</span><span class="p">.</span><span class="na">ACCOUNTANT</span>
<span class="w">            </span><span class="p">);</span>

<span class="w">            </span><span class="n">assertTrue</span><span class="p">(</span><span class="n">user</span><span class="p">.</span><span class="na">hasPermission</span><span class="p">(</span><span class="n">Permission</span><span class="p">.</span><span class="na">JOURNAL_WRITE</span><span class="p">));</span>
<span class="w">            </span><span class="n">assertTrue</span><span class="p">(</span><span class="n">user</span><span class="p">.</span><span class="na">hasPermission</span><span class="p">(</span><span class="n">Permission</span><span class="p">.</span><span class="na">JOURNAL_READ</span><span class="p">));</span>
<span class="w">        </span><span class="p">}</span>

<span class="w">        </span><span class="nd">@Test</span>
<span class="w">        </span><span class="nd">@DisplayName</span><span class="p">(</span><span class="s">&quot;経理担当者は仕訳承認権限を持たない&quot;</span><span class="p">)</span>
<span class="w">        </span><span class="kt">void</span><span class="w"> </span><span class="nf">accountantDoesNotHaveJournalApprovePermission</span><span class="p">()</span><span class="w"> </span><span class="p">{</span>
<span class="w">            </span><span class="n">User</span><span class="w"> </span><span class="n">user</span><span class="w"> </span><span class="o">=</span><span class="w"> </span><span class="n">User</span><span class="p">.</span><span class="na">create</span><span class="p">(</span>
<span class="w">                </span><span class="s">&quot;ACC000001&quot;</span><span class="p">,</span><span class="w"> </span><span class="s">&quot;Acc0unt!ng&quot;</span><span class="p">,</span><span class="w"> </span><span class="s">&quot;山田&quot;</span><span class="p">,</span><span class="w"> </span><span class="s">&quot;太郎&quot;</span><span class="p">,</span>
<span class="w">                </span><span class="s">&quot;yamada@example.com&quot;</span><span class="p">,</span><span class="w"> </span><span class="n">Role</span><span class="p">.</span><span class="na">ACCOUNTANT</span>
<span class="w">            </span><span class="p">);</span>

<span class="w">            </span><span class="n">assertFalse</span><span class="p">(</span><span class="n">user</span><span class="p">.</span><span class="na">hasPermission</span><span class="p">(</span><span class="n">Permission</span><span class="p">.</span><span class="na">JOURNAL_APPROVE</span><span class="p">));</span>
<span class="w">        </span><span class="p">}</span>

<span class="w">        </span><span class="nd">@Test</span>
<span class="w">        </span><span class="nd">@DisplayName</span><span class="p">(</span><span class="s">&quot;経理マネージャーは仕訳承認権限を持つ&quot;</span><span class="p">)</span>
<span class="w">        </span><span class="kt">void</span><span class="w"> </span><span class="nf">managerHasJournalApprovePermission</span><span class="p">()</span><span class="w"> </span><span class="p">{</span>
<span class="w">            </span><span class="n">User</span><span class="w"> </span><span class="n">user</span><span class="w"> </span><span class="o">=</span><span class="w"> </span><span class="n">User</span><span class="p">.</span><span class="na">create</span><span class="p">(</span>
<span class="w">                </span><span class="s">&quot;ACC000002&quot;</span><span class="p">,</span><span class="w"> </span><span class="s">&quot;Manag3r!!&quot;</span><span class="p">,</span><span class="w"> </span><span class="s">&quot;田中&quot;</span><span class="p">,</span><span class="w"> </span><span class="s">&quot;花子&quot;</span><span class="p">,</span>
<span class="w">                </span><span class="s">&quot;tanaka@example.com&quot;</span><span class="p">,</span><span class="w"> </span><span class="n">Role</span><span class="p">.</span><span class="na">MANAGER</span>
<span class="w">            </span><span class="p">);</span>

<span class="w">            </span><span class="n">assertTrue</span><span class="p">(</span><span class="n">user</span><span class="p">.</span><span class="na">hasPermission</span><span class="p">(</span><span class="n">Permission</span><span class="p">.</span><span class="na">JOURNAL_APPROVE</span><span class="p">));</span>
<span class="w">            </span><span class="n">assertTrue</span><span class="p">(</span><span class="n">user</span><span class="p">.</span><span class="na">hasPermission</span><span class="p">(</span><span class="n">Permission</span><span class="p">.</span><span class="na">JOURNAL_CONFIRM</span><span class="p">));</span>
<span class="w">        </span><span class="p">}</span>
<span class="w">    </span><span class="p">}</span>
<span class="p">}</span>
</code></pre></div>
<h3 id="_11">パスワード検証のテスト<a class="headerlink" href="#_11" title="Permanent link">&para;</a></h3>
<div class="highlight"><pre><span></span><code><span class="nd">@DisplayName</span><span class="p">(</span><span class="s">&quot;パスワード&quot;</span><span class="p">)</span>
<span class="kd">class</span> <span class="nc">PasswordTest</span><span class="w"> </span><span class="p">{</span>

<span class="w">    </span><span class="nd">@Test</span>
<span class="w">    </span><span class="nd">@DisplayName</span><span class="p">(</span><span class="s">&quot;有効なパスワードを生成できる&quot;</span><span class="p">)</span>
<span class="w">    </span><span class="kt">void</span><span class="w"> </span><span class="nf">canCreateValidPassword</span><span class="p">()</span><span class="w"> </span><span class="p">{</span>
<span class="w">        </span><span class="n">Password</span><span class="w"> </span><span class="n">password</span><span class="w"> </span><span class="o">=</span><span class="w"> </span><span class="n">Password</span><span class="p">.</span><span class="na">of</span><span class="p">(</span><span class="s">&quot;Acc0unt!ng&quot;</span><span class="p">);</span>
<span class="w">        </span><span class="n">assertTrue</span><span class="p">(</span><span class="n">password</span><span class="p">.</span><span class="na">matches</span><span class="p">(</span><span class="s">&quot;Acc0unt!ng&quot;</span><span class="p">));</span>
<span class="w">    </span><span class="p">}</span>

<span class="w">    </span><span class="nd">@Test</span>
<span class="w">    </span><span class="nd">@DisplayName</span><span class="p">(</span><span class="s">&quot;パスワードは8文字以上であること&quot;</span><span class="p">)</span>
<span class="w">    </span><span class="kt">void</span><span class="w"> </span><span class="nf">passwordMustBeAtLeastEightCharacters</span><span class="p">()</span><span class="w"> </span><span class="p">{</span>
<span class="w">        </span><span class="n">assertThrows</span><span class="p">(</span><span class="n">PasswordException</span><span class="p">.</span><span class="na">class</span><span class="p">,</span>
<span class="w">            </span><span class="p">()</span><span class="w"> </span><span class="o">-&gt;</span><span class="w"> </span><span class="n">Password</span><span class="p">.</span><span class="na">of</span><span class="p">(</span><span class="s">&quot;Abc!23&quot;</span><span class="p">));</span>
<span class="w">    </span><span class="p">}</span>

<span class="w">    </span><span class="nd">@Test</span>
<span class="w">    </span><span class="nd">@DisplayName</span><span class="p">(</span><span class="s">&quot;パスワードは小文字を含むこと&quot;</span><span class="p">)</span>
<span class="w">    </span><span class="kt">void</span><span class="w"> </span><span class="nf">passwordMustContainLowercase</span><span class="p">()</span><span class="w"> </span><span class="p">{</span>
<span class="w">        </span><span class="n">assertThrows</span><span class="p">(</span><span class="n">PasswordException</span><span class="p">.</span><span class="na">class</span><span class="p">,</span>
<span class="w">            </span><span class="p">()</span><span class="w"> </span><span class="o">-&gt;</span><span class="w"> </span><span class="n">Password</span><span class="p">.</span><span class="na">of</span><span class="p">(</span><span class="s">&quot;ACCOUNT!123&quot;</span><span class="p">));</span>
<span class="w">    </span><span class="p">}</span>

<span class="w">    </span><span class="nd">@Test</span>
<span class="w">    </span><span class="nd">@DisplayName</span><span class="p">(</span><span class="s">&quot;パスワードは大文字を含むこと&quot;</span><span class="p">)</span>
<span class="w">    </span><span class="kt">void</span><span class="w"> </span><span class="nf">passwordMustContainUppercase</span><span class="p">()</span><span class="w"> </span><span class="p">{</span>
<span class="w">        </span><span class="n">assertThrows</span><span class="p">(</span><span class="n">PasswordException</span><span class="p">.</span><span class="na">class</span><span class="p">,</span>
<span class="w">            </span><span class="p">()</span><span class="w"> </span><span class="o">-&gt;</span><span class="w"> </span><span class="n">Password</span><span class="p">.</span><span class="na">of</span><span class="p">(</span><span class="s">&quot;account!123&quot;</span><span class="p">));</span>
<span class="w">    </span><span class="p">}</span>

<span class="w">    </span><span class="nd">@Test</span>
<span class="w">    </span><span class="nd">@DisplayName</span><span class="p">(</span><span class="s">&quot;パスワードは数字を含むこと&quot;</span><span class="p">)</span>
<span class="w">    </span><span class="kt">void</span><span class="w"> </span><span class="nf">passwordMustContainDigit</span><span class="p">()</span><span class="w"> </span><span class="p">{</span>
<span class="w">        </span><span class="n">assertThrows</span><span class="p">(</span><span class="n">PasswordException</span><span class="p">.</span><span class="na">class</span><span class="p">,</span>
<span class="w">            </span><span class="p">()</span><span class="w"> </span><span class="o">-&gt;</span><span class="w"> </span><span class="n">Password</span><span class="p">.</span><span class="na">of</span><span class="p">(</span><span class="s">&quot;Account!ng&quot;</span><span class="p">));</span>
<span class="w">    </span><span class="p">}</span>

<span class="w">    </span><span class="nd">@Test</span>
<span class="w">    </span><span class="nd">@DisplayName</span><span class="p">(</span><span class="s">&quot;パスワードは特殊文字を含むこと&quot;</span><span class="p">)</span>
<span class="w">    </span><span class="kt">void</span><span class="w"> </span><span class="nf">passwordMustContainSpecialCharacter</span><span class="p">()</span><span class="w"> </span><span class="p">{</span>
<span class="w">        </span><span class="n">assertThrows</span><span class="p">(</span><span class="n">PasswordException</span><span class="p">.</span><span class="na">class</span><span class="p">,</span>
<span class="w">            </span><span class="p">()</span><span class="w"> </span><span class="o">-&gt;</span><span class="w"> </span><span class="n">Password</span><span class="p">.</span><span class="na">of</span><span class="p">(</span><span class="s">&quot;Account123&quot;</span><span class="p">));</span>
<span class="w">    </span><span class="p">}</span>

<span class="w">    </span><span class="nd">@Test</span>
<span class="w">    </span><span class="nd">@DisplayName</span><span class="p">(</span><span class="s">&quot;パスワードが未入力の場合は空の値を設定する&quot;</span><span class="p">)</span>
<span class="w">    </span><span class="kt">void</span><span class="w"> </span><span class="nf">passwordIsEmptyWhenMissing</span><span class="p">()</span><span class="w"> </span><span class="p">{</span>
<span class="w">        </span><span class="n">Password</span><span class="w"> </span><span class="n">password</span><span class="w"> </span><span class="o">=</span><span class="w"> </span><span class="n">Password</span><span class="p">.</span><span class="na">of</span><span class="p">(</span><span class="kc">null</span><span class="p">);</span>
<span class="w">        </span><span class="n">assertFalse</span><span class="p">(</span><span class="n">password</span><span class="p">.</span><span class="na">isSet</span><span class="p">());</span>
<span class="w">    </span><span class="p">}</span>

<span class="w">    </span><span class="nd">@Test</span>
<span class="w">    </span><span class="nd">@DisplayName</span><span class="p">(</span><span class="s">&quot;ハッシュ化されたパスワードと生パスワードを照合できる&quot;</span><span class="p">)</span>
<span class="w">    </span><span class="kt">void</span><span class="w"> </span><span class="nf">canMatchHashedPassword</span><span class="p">()</span><span class="w"> </span><span class="p">{</span>
<span class="w">        </span><span class="n">Password</span><span class="w"> </span><span class="n">password</span><span class="w"> </span><span class="o">=</span><span class="w"> </span><span class="n">Password</span><span class="p">.</span><span class="na">of</span><span class="p">(</span><span class="s">&quot;Acc0unt!ng&quot;</span><span class="p">);</span>
<span class="w">        </span><span class="n">assertTrue</span><span class="p">(</span><span class="n">password</span><span class="p">.</span><span class="na">matches</span><span class="p">(</span><span class="s">&quot;Acc0unt!ng&quot;</span><span class="p">));</span>
<span class="w">        </span><span class="n">assertFalse</span><span class="p">(</span><span class="n">password</span><span class="p">.</span><span class="na">matches</span><span class="p">(</span><span class="s">&quot;WrongPassword1!&quot;</span><span class="p">));</span>
<span class="w">    </span><span class="p">}</span>
<span class="p">}</span>
</code></pre></div>
<h3 id="_12">認証処理のテスト<a class="headerlink" href="#_12" title="Permanent link">&para;</a></h3>
<div class="highlight"><pre><span></span><code><span class="nd">@SpringBootTest</span>
<span class="nd">@DisplayName</span><span class="p">(</span><span class="s">&quot;認証サービス&quot;</span><span class="p">)</span>
<span class="kd">class</span> <span class="nc">AuthServiceTest</span><span class="w"> </span><span class="p">{</span>

<span class="w">    </span><span class="nd">@Autowired</span>
<span class="w">    </span><span class="kd">private</span><span class="w"> </span><span class="n">AuthService</span><span class="w"> </span><span class="n">authService</span><span class="p">;</span>

<span class="w">    </span><span class="nd">@Autowired</span>
<span class="w">    </span><span class="kd">private</span><span class="w"> </span><span class="n">UserRepository</span><span class="w"> </span><span class="n">userRepository</span><span class="p">;</span>

<span class="w">    </span><span class="nd">@BeforeEach</span>
<span class="w">    </span><span class="kt">void</span><span class="w"> </span><span class="nf">setUp</span><span class="p">()</span><span class="w"> </span><span class="p">{</span>
<span class="w">        </span><span class="c1">// テストユーザーを登録</span>
<span class="w">        </span><span class="n">User</span><span class="w"> </span><span class="n">testUser</span><span class="w"> </span><span class="o">=</span><span class="w"> </span><span class="n">User</span><span class="p">.</span><span class="na">create</span><span class="p">(</span>
<span class="w">            </span><span class="s">&quot;ACC000001&quot;</span><span class="p">,</span><span class="w"> </span><span class="s">&quot;Acc0unt!ng&quot;</span><span class="p">,</span><span class="w"> </span><span class="s">&quot;テスト&quot;</span><span class="p">,</span><span class="w"> </span><span class="s">&quot;太郎&quot;</span><span class="p">,</span>
<span class="w">            </span><span class="s">&quot;test@example.com&quot;</span><span class="p">,</span><span class="w"> </span><span class="n">Role</span><span class="p">.</span><span class="na">ACCOUNTANT</span>
<span class="w">        </span><span class="p">);</span>
<span class="w">        </span><span class="n">userRepository</span><span class="p">.</span><span class="na">save</span><span class="p">(</span><span class="n">testUser</span><span class="p">);</span>
<span class="w">    </span><span class="p">}</span>

<span class="w">    </span><span class="nd">@Test</span>
<span class="w">    </span><span class="nd">@DisplayName</span><span class="p">(</span><span class="s">&quot;正しい認証情報でログインできる&quot;</span><span class="p">)</span>
<span class="w">    </span><span class="kt">void</span><span class="w"> </span><span class="nf">canLoginWithValidCredentials</span><span class="p">()</span><span class="w"> </span><span class="p">{</span>
<span class="w">        </span><span class="c1">// When</span>
<span class="w">        </span><span class="n">AuthResult</span><span class="w"> </span><span class="n">result</span><span class="w"> </span><span class="o">=</span><span class="w"> </span><span class="n">authService</span><span class="p">.</span><span class="na">authenticate</span><span class="p">(</span>
<span class="w">            </span><span class="s">&quot;ACC000001&quot;</span><span class="p">,</span><span class="w"> </span><span class="s">&quot;Acc0unt!ng&quot;</span>
<span class="w">        </span><span class="p">);</span>

<span class="w">        </span><span class="c1">// Then</span>
<span class="w">        </span><span class="n">assertTrue</span><span class="p">(</span><span class="n">result</span><span class="p">.</span><span class="na">isSuccess</span><span class="p">());</span>
<span class="w">        </span><span class="n">assertNotNull</span><span class="p">(</span><span class="n">result</span><span class="p">.</span><span class="na">getToken</span><span class="p">());</span>
<span class="w">        </span><span class="n">assertEquals</span><span class="p">(</span><span class="s">&quot;ACC000001&quot;</span><span class="p">,</span><span class="w"> </span><span class="n">result</span><span class="p">.</span><span class="na">getUserId</span><span class="p">());</span>
<span class="w">        </span><span class="n">assertEquals</span><span class="p">(</span><span class="n">Role</span><span class="p">.</span><span class="na">ACCOUNTANT</span><span class="p">,</span><span class="w"> </span><span class="n">result</span><span class="p">.</span><span class="na">getRole</span><span class="p">());</span>
<span class="w">    </span><span class="p">}</span>

<span class="w">    </span><span class="nd">@Test</span>
<span class="w">    </span><span class="nd">@DisplayName</span><span class="p">(</span><span class="s">&quot;不正なパスワードではログインできない&quot;</span><span class="p">)</span>
<span class="w">    </span><span class="kt">void</span><span class="w"> </span><span class="nf">cannotLoginWithInvalidPassword</span><span class="p">()</span><span class="w"> </span><span class="p">{</span>
<span class="w">        </span><span class="c1">// When</span>
<span class="w">        </span><span class="n">AuthResult</span><span class="w"> </span><span class="n">result</span><span class="w"> </span><span class="o">=</span><span class="w"> </span><span class="n">authService</span><span class="p">.</span><span class="na">authenticate</span><span class="p">(</span>
<span class="w">            </span><span class="s">&quot;ACC000001&quot;</span><span class="p">,</span><span class="w"> </span><span class="s">&quot;WrongP@ss1&quot;</span>
<span class="w">        </span><span class="p">);</span>

<span class="w">        </span><span class="c1">// Then</span>
<span class="w">        </span><span class="n">assertFalse</span><span class="p">(</span><span class="n">result</span><span class="p">.</span><span class="na">isSuccess</span><span class="p">());</span>
<span class="w">        </span><span class="n">assertNull</span><span class="p">(</span><span class="n">result</span><span class="p">.</span><span class="na">getToken</span><span class="p">());</span>
<span class="w">    </span><span class="p">}</span>

<span class="w">    </span><span class="nd">@Test</span>
<span class="w">    </span><span class="nd">@DisplayName</span><span class="p">(</span><span class="s">&quot;存在しないユーザーではログインできない&quot;</span><span class="p">)</span>
<span class="w">    </span><span class="kt">void</span><span class="w"> </span><span class="nf">cannotLoginWithNonExistentUser</span><span class="p">()</span><span class="w"> </span><span class="p">{</span>
<span class="w">        </span><span class="c1">// When</span>
<span class="w">        </span><span class="n">AuthResult</span><span class="w"> </span><span class="n">result</span><span class="w"> </span><span class="o">=</span><span class="w"> </span><span class="n">authService</span><span class="p">.</span><span class="na">authenticate</span><span class="p">(</span>
<span class="w">            </span><span class="s">&quot;ACC999999&quot;</span><span class="p">,</span><span class="w"> </span><span class="s">&quot;Acc0unt!ng&quot;</span>
<span class="w">        </span><span class="p">);</span>

<span class="w">        </span><span class="c1">// Then</span>
<span class="w">        </span><span class="n">assertFalse</span><span class="p">(</span><span class="n">result</span><span class="p">.</span><span class="na">isSuccess</span><span class="p">());</span>
<span class="w">    </span><span class="p">}</span>

<span class="w">    </span><span class="nd">@Test</span>
<span class="w">    </span><span class="nd">@DisplayName</span><span class="p">(</span><span class="s">&quot;ロックされたユーザーはログインできない&quot;</span><span class="p">)</span>
<span class="w">    </span><span class="kt">void</span><span class="w"> </span><span class="nf">cannotLoginWhenUserIsLocked</span><span class="p">()</span><span class="w"> </span><span class="p">{</span>
<span class="w">        </span><span class="c1">// Given</span>
<span class="w">        </span><span class="n">User</span><span class="w"> </span><span class="n">user</span><span class="w"> </span><span class="o">=</span><span class="w"> </span><span class="n">userRepository</span><span class="p">.</span><span class="na">findByUserId</span><span class="p">(</span><span class="n">UserId</span><span class="p">.</span><span class="na">of</span><span class="p">(</span><span class="s">&quot;ACC000001&quot;</span><span class="p">)).</span><span class="na">get</span><span class="p">();</span>
<span class="w">        </span><span class="n">userRepository</span><span class="p">.</span><span class="na">save</span><span class="p">(</span><span class="n">user</span><span class="p">.</span><span class="na">lock</span><span class="p">());</span>

<span class="w">        </span><span class="c1">// When</span>
<span class="w">        </span><span class="n">AuthResult</span><span class="w"> </span><span class="n">result</span><span class="w"> </span><span class="o">=</span><span class="w"> </span><span class="n">authService</span><span class="p">.</span><span class="na">authenticate</span><span class="p">(</span>
<span class="w">            </span><span class="s">&quot;ACC000001&quot;</span><span class="p">,</span><span class="w"> </span><span class="s">&quot;Acc0unt!ng&quot;</span>
<span class="w">        </span><span class="p">);</span>

<span class="w">        </span><span class="c1">// Then</span>
<span class="w">        </span><span class="n">assertFalse</span><span class="p">(</span><span class="n">result</span><span class="p">.</span><span class="na">isSuccess</span><span class="p">());</span>
<span class="w">        </span><span class="n">assertEquals</span><span class="p">(</span><span class="s">&quot;アカウントがロックされています&quot;</span><span class="p">,</span><span class="w"> </span><span class="n">result</span><span class="p">.</span><span class="na">getMessage</span><span class="p">());</span>
<span class="w">    </span><span class="p">}</span>
<span class="p">}</span>
</code></pre></div>
<hr />
<h2 id="254-spring-security">25.4 Spring Security 統合<a class="headerlink" href="#254-spring-security" title="Permanent link">&para;</a></h2>
<h3 id="_13">認証フィルタの設定<a class="headerlink" href="#_13" title="Permanent link">&para;</a></h3>
<p>Spring Security を使用して認証を実装します。</p>
<p><img src="data:image/svg+xml;base64,PHN2ZyB4bWxucz0iaHR0cDovL3d3dy53My5vcmcvMjAwMC9zdmciIHhtbG5zOnhsaW5rPSJodHRwOi8vd3d3LnczLm9yZy8xOTk5L3hsaW5rIiBjb250ZW50U3R5bGVUeXBlPSJ0ZXh0L2NzcyIgZGF0YS1kaWFncmFtLXR5cGU9IlNFUVVFTkNFIiBoZWlnaHQ9IjU2NXB4IiBwcmVzZXJ2ZUFzcGVjdFJhdGlvPSJub25lIiBzdHlsZT0id2lkdGg6Njg1cHg7aGVpZ2h0OjU2NXB4O2JhY2tncm91bmQ6I0ZGRkZGRjsiIHZlcnNpb249IjEuMSIgdmlld0JveD0iMCAwIDY4NSA1NjUiIHdpZHRoPSI2ODVweCIgem9vbUFuZFBhbj0ibWFnbmlmeSI+PHRpdGxlPiYjMzU0Njk7JiMzNTM4ODsmIzEyNTAxOyYjMTI1MjU7JiMxMjU0MDsmIzEyMzk4OyYjMjcwMTA7JiMzNTIwMTs8L3RpdGxlPjxkZWZzLz48Zz48dGV4dCBmaWxsPSIjMDAwMDAwIiBmb250LWZhbWlseT0ic2Fucy1zZXJpZiIgZm9udC1zaXplPSIxNCIgZm9udC13ZWlnaHQ9ImJvbGQiIGxlbmd0aEFkanVzdD0ic3BhY2luZyIgdGV4dExlbmd0aD0iMTExLjk5OTUiIHg9IjI4OC40NzUzIiB5PSIyNy45OTUxIj4mIzM1NDY5OyYjMzUzODg7JiMxMjUwMTsmIzEyNTI1OyYjMTI1NDA7JiMxMjM5ODsmIzI3MDEwOyYjMzUyMDE7PC90ZXh0PjxnPjx0aXRsZT5DbGllbnQ8L3RpdGxlPjxyZWN0IGZpbGw9IiMwMDAwMDAiIGZpbGwtb3BhY2l0eT0iMC4wMDAwMCIgaGVpZ2h0PSIzNjYuNDYwOSIgd2lkdGg9IjgiIHg9IjI0LjI2NTEiIHk9IjExOC41OTM4Ii8+PGxpbmUgc3R5bGU9InN0cm9rZTojMTgxODE4O3N0cm9rZS13aWR0aDowLjU7c3Ryb2tlLWRhc2hhcnJheTo1LDU7IiB4MT0iMjgiIHgyPSIyOCIgeTE9IjExOC41OTM4IiB5Mj0iNDg1LjA1NDciLz48L2c+PGc+PHRpdGxlPkp3dEF1dGhGaWx0ZXI8L3RpdGxlPjxyZWN0IGZpbGw9IiMwMDAwMDAiIGZpbGwtb3BhY2l0eT0iMC4wMDAwMCIgaGVpZ2h0PSIzNjYuNDYwOSIgd2lkdGg9IjgiIHg9IjE4MC44NDIzIiB5PSIxMTguNTkzOCIvPjxsaW5lIHN0eWxlPSJzdHJva2U6IzE4MTgxODtzdHJva2Utd2lkdGg6MC41O3N0cm9rZS1kYXNoYXJyYXk6NSw1OyIgeDE9IjE4NC4wNTY2IiB4Mj0iMTg0LjA1NjYiIHkxPSIxMTguNTkzOCIgeTI9IjQ4NS4wNTQ3Ii8+PC9nPjxnPjx0aXRsZT5BdXRoQ29udHJvbGxlcjwvdGl0bGU+PHJlY3QgZmlsbD0iIzAwMDAwMCIgZmlsbC1vcGFjaXR5PSIwLjAwMDAwIiBoZWlnaHQ9IjM2Ni40NjA5IiB3aWR0aD0iOCIgeD0iMzAwLjYyMDYiIHk9IjExOC41OTM4Ii8+PGxpbmUgc3R5bGU9InN0cm9rZTojMTgxODE4O3N0cm9rZS13aWR0aDowLjU7c3Ryb2tlLWRhc2hhcnJheTo1LDU7IiB4MT0iMzAzLjYyNzkiIHgyPSIzMDMuNjI3OSIgeTE9IjExOC41OTM4IiB5Mj0iNDg1LjA1NDciLz48L2c+PGc+PHRpdGxlPkF1dGhTZXJ2aWNlPC90aXRsZT48cmVjdCBmaWxsPSIjMDAwMDAwIiBmaWxsLW9wYWNpdHk9IjAuMDAwMDAiIGhlaWdodD0iMzY2LjQ2MDkiIHdpZHRoPSI4IiB4PSI0MTcuODkwMSIgeT0iMTE4LjU5MzgiLz48bGluZSBzdHlsZT0ic3Ryb2tlOiMxODE4MTg7c3Ryb2tlLXdpZHRoOjAuNTtzdHJva2UtZGFzaGFycmF5OjUsNTsiIHgxPSI0MjEuNjEzMyIgeDI9IjQyMS42MTMzIiB5MT0iMTE4LjU5MzgiIHkyPSI0ODUuMDU0NyIvPjwvZz48Zz48dGl0bGU+VXNlclJlcG9zaXRvcnk8L3RpdGxlPjxyZWN0IGZpbGw9IiMwMDAwMDAiIGZpbGwtb3BhY2l0eT0iMC4wMDAwMCIgaGVpZ2h0PSIzNjYuNDYwOSIgd2lkdGg9IjgiIHg9IjUzNy42NTgyIiB5PSIxMTguNTkzOCIvPjxsaW5lIHN0eWxlPSJzdHJva2U6IzE4MTgxODtzdHJva2Utd2lkdGg6MC41O3N0cm9rZS1kYXNoYXJyYXk6NSw1OyIgeDE9IjU0MS4xNjciIHgyPSI1NDEuMTY3IiB5MT0iMTE4LjU5MzgiIHkyPSI0ODUuMDU0NyIvPjwvZz48Zz48dGl0bGU+RGF0YWJhc2U8L3RpdGxlPjxyZWN0IGZpbGw9IiMwMDAwMDAiIGZpbGwtb3BhY2l0eT0iMC4wMDAwMCIgaGVpZ2h0PSIzNjYuNDYwOSIgd2lkdGg9IjgiIHg9IjY0NC41NDk4IiB5PSIxMTguNTkzOCIvPjxsaW5lIHN0eWxlPSJzdHJva2U6IzE4MTgxODtzdHJva2Utd2lkdGg6MC41O3N0cm9rZS1kYXNoYXJyYXk6NSw1OyIgeDE9IjY0OC4xNDk0IiB4Mj0iNjQ4LjE0OTQiIHkxPSIxMTguNTkzOCIgeTI9IjQ4NS4wNTQ3Ii8+PC9nPjxnIGNsYXNzPSJwYXJ0aWNpcGFudCBwYXJ0aWNpcGFudC1oZWFkIiBkYXRhLXBhcnRpY2lwYW50PSJDbGllbnQiPjx0ZXh0IGZpbGw9IiMwMDAwMDAiIGZvbnQtZmFtaWx5PSJzYW5zLXNlcmlmIiBmb250LXNpemU9IjE0IiBsZW5ndGhBZGp1c3Q9InNwYWNpbmciIHRleHRMZW5ndGg9IjQwLjUzMDMiIHg9IjUiIHk9IjExNS4yOTIiPkNsaWVudDwvdGV4dD48ZWxsaXBzZSBjeD0iMjguMjY1MSIgY3k9IjUwLjc5NjkiIGZpbGw9IiNFMkUyRjAiIHJ4PSI4IiByeT0iOCIgc3R5bGU9InN0cm9rZTojMTgxODE4O3N0cm9rZS13aWR0aDowLjU7Ii8+PHBhdGggZD0iTTI4LjI2NTEsNTguNzk2OSBMMjguMjY1MSw4NS43OTY5IE0xNS4yNjUxLDY2Ljc5NjkgTDQxLjI2NTEsNjYuNzk2OSBNMjguMjY1MSw4NS43OTY5IEwxNS4yNjUxLDEwMC43OTY5IE0yOC4yNjUxLDg1Ljc5NjkgTDQxLjI2NTEsMTAwLjc5NjkiIGZpbGw9Im5vbmUiIHN0eWxlPSJzdHJva2U6IzE4MTgxODtzdHJva2Utd2lkdGg6MC41OyIvPjwvZz48ZyBjbGFzcz0icGFydGljaXBhbnQgcGFydGljaXBhbnQtdGFpbCIgZGF0YS1wYXJ0aWNpcGFudD0iQ2xpZW50Ij48dGV4dCBmaWxsPSIjMDAwMDAwIiBmb250LWZhbWlseT0ic2Fucy1zZXJpZiIgZm9udC1zaXplPSIxNCIgbGVuZ3RoQWRqdXN0PSJzcGFjaW5nIiB0ZXh0TGVuZ3RoPSI0MC41MzAzIiB4PSI1IiB5PSI0OTcuMDQ5OCI+Q2xpZW50PC90ZXh0PjxlbGxpcHNlIGN4PSIyOC4yNjUxIiBjeT0iNTA4Ljg1MTYiIGZpbGw9IiNFMkUyRjAiIHJ4PSI4IiByeT0iOCIgc3R5bGU9InN0cm9rZTojMTgxODE4O3N0cm9rZS13aWR0aDowLjU7Ii8+PHBhdGggZD0iTTI4LjI2NTEsNTE2Ljg1MTYgTDI4LjI2NTEsNTQzLjg1MTYgTTE1LjI2NTEsNTI0Ljg1MTYgTDQxLjI2NTEsNTI0Ljg1MTYgTTI4LjI2NTEsNTQzLjg1MTYgTDE1LjI2NTEsNTU4Ljg1MTYgTTI4LjI2NTEsNTQzLjg1MTYgTDQxLjI2NTEsNTU4Ljg1MTYiIGZpbGw9Im5vbmUiIHN0eWxlPSJzdHJva2U6IzE4MTgxODtzdHJva2Utd2lkdGg6MC41OyIvPjwvZz48ZyBjbGFzcz0icGFydGljaXBhbnQgcGFydGljaXBhbnQtaGVhZCIgZGF0YS1wYXJ0aWNpcGFudD0iRmlsdGVyIj48cmVjdCBmaWxsPSIjRTJFMkYwIiBoZWlnaHQ9IjMwLjI5NjkiIHJ4PSIyLjUiIHJ5PSIyLjUiIHN0eWxlPSJzdHJva2U6IzE4MTgxODtzdHJva2Utd2lkdGg6MC41OyIgd2lkdGg9IjEwMy41NzEzIiB4PSIxMzMuMDU2NiIgeT0iODcuMjk2OSIvPjx0ZXh0IGZpbGw9IiMwMDAwMDAiIGZvbnQtZmFtaWx5PSJzYW5zLXNlcmlmIiBmb250LXNpemU9IjE0IiBsZW5ndGhBZGp1c3Q9InNwYWNpbmciIHRleHRMZW5ndGg9Ijg5LjU3MTMiIHg9IjE0MC4wNTY2IiB5PSIxMDcuMjkyIj5Kd3RBdXRoRmlsdGVyPC90ZXh0PjwvZz48ZyBjbGFzcz0icGFydGljaXBhbnQgcGFydGljaXBhbnQtdGFpbCIgZGF0YS1wYXJ0aWNpcGFudD0iRmlsdGVyIj48cmVjdCBmaWxsPSIjRTJFMkYwIiBoZWlnaHQ9IjMwLjI5NjkiIHJ4PSIyLjUiIHJ5PSIyLjUiIHN0eWxlPSJzdHJva2U6IzE4MTgxODtzdHJva2Utd2lkdGg6MC41OyIgd2lkdGg9IjEwMy41NzEzIiB4PSIxMzMuMDU2NiIgeT0iNDg0LjA1NDciLz48dGV4dCBmaWxsPSIjMDAwMDAwIiBmb250LWZhbWlseT0ic2Fucy1zZXJpZiIgZm9udC1zaXplPSIxNCIgbGVuZ3RoQWRqdXN0PSJzcGFjaW5nIiB0ZXh0TGVuZ3RoPSI4OS41NzEzIiB4PSIxNDAuMDU2NiIgeT0iNTA0LjA0OTgiPkp3dEF1dGhGaWx0ZXI8L3RleHQ+PC9nPjxnIGNsYXNzPSJwYXJ0aWNpcGFudCBwYXJ0aWNpcGFudC1oZWFkIiBkYXRhLXBhcnRpY2lwYW50PSJDb250cm9sbGVyIj48cmVjdCBmaWxsPSIjRTJFMkYwIiBoZWlnaHQ9IjMwLjI5NjkiIHJ4PSIyLjUiIHJ5PSIyLjUiIHN0eWxlPSJzdHJva2U6IzE4MTgxODtzdHJva2Utd2lkdGg6MC41OyIgd2lkdGg9IjExNS45ODU0IiB4PSIyNDYuNjI3OSIgeT0iODcuMjk2OSIvPjx0ZXh0IGZpbGw9IiMwMDAwMDAiIGZvbnQtZmFtaWx5PSJzYW5zLXNlcmlmIiBmb250LXNpemU9IjE0IiBsZW5ndGhBZGp1c3Q9InNwYWNpbmciIHRleHRMZW5ndGg9IjEwMS45ODU0IiB4PSIyNTMuNjI3OSIgeT0iMTA3LjI5MiI+QXV0aENvbnRyb2xsZXI8L3RleHQ+PC9nPjxnIGNsYXNzPSJwYXJ0aWNpcGFudCBwYXJ0aWNpcGFudC10YWlsIiBkYXRhLXBhcnRpY2lwYW50PSJDb250cm9sbGVyIj48cmVjdCBmaWxsPSIjRTJFMkYwIiBoZWlnaHQ9IjMwLjI5NjkiIHJ4PSIyLjUiIHJ5PSIyLjUiIHN0eWxlPSJzdHJva2U6IzE4MTgxODtzdHJva2Utd2lkdGg6MC41OyIgd2lkdGg9IjExNS45ODU0IiB4PSIyNDYuNjI3OSIgeT0iNDg0LjA1NDciLz48dGV4dCBmaWxsPSIjMDAwMDAwIiBmb250LWZhbWlseT0ic2Fucy1zZXJpZiIgZm9udC1zaXplPSIxNCIgbGVuZ3RoQWRqdXN0PSJzcGFjaW5nIiB0ZXh0TGVuZ3RoPSIxMDEuOTg1NCIgeD0iMjUzLjYyNzkiIHk9IjUwNC4wNDk4Ij5BdXRoQ29udHJvbGxlcjwvdGV4dD48L2c+PGcgY2xhc3M9InBhcnRpY2lwYW50IHBhcnRpY2lwYW50LWhlYWQiIGRhdGEtcGFydGljaXBhbnQ9IlNlcnZpY2UiPjxyZWN0IGZpbGw9IiNFMkUyRjAiIGhlaWdodD0iMzAuMjk2OSIgcng9IjIuNSIgcnk9IjIuNSIgc3R5bGU9InN0cm9rZTojMTgxODE4O3N0cm9rZS13aWR0aDowLjU7IiB3aWR0aD0iOTguNTUzNyIgeD0iMzcyLjYxMzMiIHk9Ijg3LjI5NjkiLz48dGV4dCBmaWxsPSIjMDAwMDAwIiBmb250LWZhbWlseT0ic2Fucy1zZXJpZiIgZm9udC1zaXplPSIxNCIgbGVuZ3RoQWRqdXN0PSJzcGFjaW5nIiB0ZXh0TGVuZ3RoPSI4NC41NTM3IiB4PSIzNzkuNjEzMyIgeT0iMTA3LjI5MiI+QXV0aFNlcnZpY2U8L3RleHQ+PC9nPjxnIGNsYXNzPSJwYXJ0aWNpcGFudCBwYXJ0aWNpcGFudC10YWlsIiBkYXRhLXBhcnRpY2lwYW50PSJTZXJ2aWNlIj48cmVjdCBmaWxsPSIjRTJFMkYwIiBoZWlnaHQ9IjMwLjI5NjkiIHJ4PSIyLjUiIHJ5PSIyLjUiIHN0eWxlPSJzdHJva2U6IzE4MTgxODtzdHJva2Utd2lkdGg6MC41OyIgd2lkdGg9Ijk4LjU1MzciIHg9IjM3Mi42MTMzIiB5PSI0ODQuMDU0NyIvPjx0ZXh0IGZpbGw9IiMwMDAwMDAiIGZvbnQtZmFtaWx5PSJzYW5zLXNlcmlmIiBmb250LXNpemU9IjE0IiBsZW5ndGhBZGp1c3Q9InNwYWNpbmciIHRleHRMZW5ndGg9Ijg0LjU1MzciIHg9IjM3OS42MTMzIiB5PSI1MDQuMDQ5OCI+QXV0aFNlcnZpY2U8L3RleHQ+PC9nPjxnIGNsYXNzPSJwYXJ0aWNpcGFudCBwYXJ0aWNpcGFudC1oZWFkIiBkYXRhLXBhcnRpY2lwYW50PSJSZXBvIj48cmVjdCBmaWxsPSIjRTJFMkYwIiBoZWlnaHQ9IjMwLjI5NjkiIHJ4PSIyLjUiIHJ5PSIyLjUiIHN0eWxlPSJzdHJva2U6IzE4MTgxODtzdHJva2Utd2lkdGg6MC41OyIgd2lkdGg9IjEyMC45ODI0IiB4PSI0ODEuMTY3IiB5PSI4Ny4yOTY5Ii8+PHRleHQgZmlsbD0iIzAwMDAwMCIgZm9udC1mYW1pbHk9InNhbnMtc2VyaWYiIGZvbnQtc2l6ZT0iMTQiIGxlbmd0aEFkanVzdD0ic3BhY2luZyIgdGV4dExlbmd0aD0iMTA2Ljk4MjQiIHg9IjQ4OC4xNjciIHk9IjEwNy4yOTIiPlVzZXJSZXBvc2l0b3J5PC90ZXh0PjwvZz48ZyBjbGFzcz0icGFydGljaXBhbnQgcGFydGljaXBhbnQtdGFpbCIgZGF0YS1wYXJ0aWNpcGFudD0iUmVwbyI+PHJlY3QgZmlsbD0iI0UyRTJGMCIgaGVpZ2h0PSIzMC4yOTY5IiByeD0iMi41IiByeT0iMi41IiBzdHlsZT0ic3Ryb2tlOiMxODE4MTg7c3Ryb2tlLXdpZHRoOjAuNTsiIHdpZHRoPSIxMjAuOTgyNCIgeD0iNDgxLjE2NyIgeT0iNDg0LjA1NDciLz48dGV4dCBmaWxsPSIjMDAwMDAwIiBmb250LWZhbWlseT0ic2Fucy1zZXJpZiIgZm9udC1zaXplPSIxNCIgbGVuZ3RoQWRqdXN0PSJzcGFjaW5nIiB0ZXh0TGVuZ3RoPSIxMDYuOTgyNCIgeD0iNDg4LjE2NyIgeT0iNTA0LjA0OTgiPlVzZXJSZXBvc2l0b3J5PC90ZXh0PjwvZz48ZyBjbGFzcz0icGFydGljaXBhbnQgcGFydGljaXBhbnQtaGVhZCIgZGF0YS1wYXJ0aWNpcGFudD0iRGF0YWJhc2UiPjx0ZXh0IGZpbGw9IiMwMDAwMDAiIGZvbnQtZmFtaWx5PSJzYW5zLXNlcmlmIiBmb250LXNpemU9IjE0IiBsZW5ndGhBZGp1c3Q9InNwYWNpbmciIHRleHRMZW5ndGg9IjY2LjgwMDgiIHg9IjYxMi4xNDk0IiB5PSIxMTUuMjkyIj5EYXRhYmFzZTwvdGV4dD48cGF0aCBkPSJNNjMwLjU0OTgsNjYuMjk2OSBDNjMwLjU0OTgsNTYuMjk2OSA2NDguNTQ5OCw1Ni4yOTY5IDY0OC41NDk4LDU2LjI5NjkgQzY0OC41NDk4LDU2LjI5NjkgNjY2LjU0OTgsNTYuMjk2OSA2NjYuNTQ5OCw2Ni4yOTY5IEw2NjYuNTQ5OCw5Mi4yOTY5IEM2NjYuNTQ5OCwxMDIuMjk2OSA2NDguNTQ5OCwxMDIuMjk2OSA2NDguNTQ5OCwxMDIuMjk2OSBDNjQ4LjU0OTgsMTAyLjI5NjkgNjMwLjU0OTgsMTAyLjI5NjkgNjMwLjU0OTgsOTIuMjk2OSBMNjMwLjU0OTgsNjYuMjk2OSIgZmlsbD0iI0UyRTJGMCIgc3R5bGU9InN0cm9rZTojMTgxODE4O3N0cm9rZS13aWR0aDowLjU7Ii8+PHBhdGggZD0iTTYzMC41NDk4LDY2LjI5NjkgQzYzMC41NDk4LDc2LjI5NjkgNjQ4LjU0OTgsNzYuMjk2OSA2NDguNTQ5OCw3Ni4yOTY5IEM2NDguNTQ5OCw3Ni4yOTY5IDY2Ni41NDk4LDc2LjI5NjkgNjY2LjU0OTgsNjYuMjk2OSIgZmlsbD0ibm9uZSIgc3R5bGU9InN0cm9rZTojMTgxODE4O3N0cm9rZS13aWR0aDowLjU7Ii8+PC9nPjxnIGNsYXNzPSJwYXJ0aWNpcGFudCBwYXJ0aWNpcGFudC10YWlsIiBkYXRhLXBhcnRpY2lwYW50PSJEYXRhYmFzZSI+PHRleHQgZmlsbD0iIzAwMDAwMCIgZm9udC1mYW1pbHk9InNhbnMtc2VyaWYiIGZvbnQtc2l6ZT0iMTQiIGxlbmd0aEFkanVzdD0ic3BhY2luZyIgdGV4dExlbmd0aD0iNjYuODAwOCIgeD0iNjEyLjE0OTQiIHk9IjQ5Ny4wNDk4Ij5EYXRhYmFzZTwvdGV4dD48cGF0aCBkPSJNNjMwLjU0OTgsNTEwLjM1MTYgQzYzMC41NDk4LDUwMC4zNTE2IDY0OC41NDk4LDUwMC4zNTE2IDY0OC41NDk4LDUwMC4zNTE2IEM2NDguNTQ5OCw1MDAuMzUxNiA2NjYuNTQ5OCw1MDAuMzUxNiA2NjYuNTQ5OCw1MTAuMzUxNiBMNjY2LjU0OTgsNTM2LjM1MTYgQzY2Ni41NDk4LDU0Ni4zNTE2IDY0OC41NDk4LDU0Ni4zNTE2IDY0OC41NDk4LDU0Ni4zNTE2IEM2NDguNTQ5OCw1NDYuMzUxNiA2MzAuNTQ5OCw1NDYuMzUxNiA2MzAuNTQ5OCw1MzYuMzUxNiBMNjMwLjU0OTgsNTEwLjM1MTYiIGZpbGw9IiNFMkUyRjAiIHN0eWxlPSJzdHJva2U6IzE4MTgxODtzdHJva2Utd2lkdGg6MC41OyIvPjxwYXRoIGQ9Ik02MzAuNTQ5OCw1MTAuMzUxNiBDNjMwLjU0OTgsNTIwLjM1MTYgNjQ4LjU0OTgsNTIwLjM1MTYgNjQ4LjU0OTgsNTIwLjM1MTYgQzY0OC41NDk4LDUyMC4zNTE2IDY2Ni41NDk4LDUyMC4zNTE2IDY2Ni41NDk4LDUxMC4zNTE2IiBmaWxsPSJub25lIiBzdHlsZT0ic3Ryb2tlOiMxODE4MTg7c3Ryb2tlLXdpZHRoOjAuNTsiLz48L2c+PGcgY2xhc3M9Im1lc3NhZ2UiIGRhdGEtcGFydGljaXBhbnQtMT0iQ2xpZW50IiBkYXRhLXBhcnRpY2lwYW50LTI9IkZpbHRlciI+PHBvbHlnb24gZmlsbD0iIzE4MTgxOCIgcG9pbnRzPSIxNzIuODQyMywxNDUuNzI2NiwxODIuODQyMywxNDkuNzI2NiwxNzIuODQyMywxNTMuNzI2NiwxNzYuODQyMywxNDkuNzI2NiIgc3R5bGU9InN0cm9rZTojMTgxODE4O3N0cm9rZS13aWR0aDoxOyIvPjxsaW5lIHN0eWxlPSJzdHJva2U6IzE4MTgxODtzdHJva2Utd2lkdGg6MTsiIHgxPSIyOC4yNjUxIiB4Mj0iMTc4Ljg0MjMiIHkxPSIxNDkuNzI2NiIgeTI9IjE0OS43MjY2Ii8+PHRleHQgZmlsbD0iIzAwMDAwMCIgZm9udC1mYW1pbHk9InNhbnMtc2VyaWYiIGZvbnQtc2l6ZT0iMTMiIGxlbmd0aEFkanVzdD0ic3BhY2luZyIgdGV4dExlbmd0aD0iMTMyLjU3NzEiIHg9IjM1LjI2NTEiIHk9IjE0NC42NjA2Ij5QT1NUIC9hcGkvYXV0aC9sb2dpbjwvdGV4dD48L2c+PGcgY2xhc3M9Im1lc3NhZ2UiIGRhdGEtcGFydGljaXBhbnQtMT0iRmlsdGVyIiBkYXRhLXBhcnRpY2lwYW50LTI9IkNvbnRyb2xsZXIiPjxwb2x5Z29uIGZpbGw9IiMxODE4MTgiIHBvaW50cz0iMjkyLjYyMDYsMTc0Ljg1OTQsMzAyLjYyMDYsMTc4Ljg1OTQsMjkyLjYyMDYsMTgyLjg1OTQsMjk2LjYyMDYsMTc4Ljg1OTQiIHN0eWxlPSJzdHJva2U6IzE4MTgxODtzdHJva2Utd2lkdGg6MTsiLz48bGluZSBzdHlsZT0ic3Ryb2tlOiMxODE4MTg7c3Ryb2tlLXdpZHRoOjE7IiB4MT0iMTg0Ljg0MjMiIHgyPSIyOTguNjIwNiIgeTE9IjE3OC44NTk0IiB5Mj0iMTc4Ljg1OTQiLz48dGV4dCBmaWxsPSIjMDAwMDAwIiBmb250LWZhbWlseT0ic2Fucy1zZXJpZiIgZm9udC1zaXplPSIxMyIgbGVuZ3RoQWRqdXN0PSJzcGFjaW5nIiB0ZXh0TGVuZ3RoPSI5MS4wMDAxIiB4PSIxOTEuODQyMyIgeT0iMTczLjc5MzUiPiYjMzU0Njk7JiMzNTM4ODsmIzEyNTIyOyYjMTI0NjM7JiMxMjQ1NjsmIzEyNDczOyYjMTI0ODg7PC90ZXh0PjwvZz48ZyBjbGFzcz0ibWVzc2FnZSIgZGF0YS1wYXJ0aWNpcGFudC0xPSJDb250cm9sbGVyIiBkYXRhLXBhcnRpY2lwYW50LTI9IlNlcnZpY2UiPjxwb2x5Z29uIGZpbGw9IiMxODE4MTgiIHBvaW50cz0iNDA5Ljg5MDEsMjAzLjk5MjIsNDE5Ljg5MDEsMjA3Ljk5MjIsNDA5Ljg5MDEsMjExLjk5MjIsNDEzLjg5MDEsMjA3Ljk5MjIiIHN0eWxlPSJzdHJva2U6IzE4MTgxODtzdHJva2Utd2lkdGg6MTsiLz48bGluZSBzdHlsZT0ic3Ryb2tlOiMxODE4MTg7c3Ryb2tlLXdpZHRoOjE7IiB4MT0iMzA0LjYyMDYiIHgyPSI0MTUuODkwMSIgeTE9IjIwNy45OTIyIiB5Mj0iMjA3Ljk5MjIiLz48dGV4dCBmaWxsPSIjMDAwMDAwIiBmb250LWZhbWlseT0ic2Fucy1zZXJpZiIgZm9udC1zaXplPSIxMyIgbGVuZ3RoQWRqdXN0PSJzcGFjaW5nIiB0ZXh0TGVuZ3RoPSI5Mi44NDA4IiB4PSIzMTEuNjIwNiIgeT0iMjAyLjkyNjMiPmF1dGhlbnRpY2F0ZSgpPC90ZXh0PjwvZz48ZyBjbGFzcz0ibWVzc2FnZSIgZGF0YS1wYXJ0aWNpcGFudC0xPSJTZXJ2aWNlIiBkYXRhLXBhcnRpY2lwYW50LTI9IlJlcG8iPjxwb2x5Z29uIGZpbGw9IiMxODE4MTgiIHBvaW50cz0iNTI5LjY1ODIsMjMzLjEyNSw1MzkuNjU4MiwyMzcuMTI1LDUyOS42NTgyLDI0MS4xMjUsNTMzLjY1ODIsMjM3LjEyNSIgc3R5bGU9InN0cm9rZTojMTgxODE4O3N0cm9rZS13aWR0aDoxOyIvPjxsaW5lIHN0eWxlPSJzdHJva2U6IzE4MTgxODtzdHJva2Utd2lkdGg6MTsiIHgxPSI0MjEuODkwMSIgeDI9IjUzNS42NTgyIiB5MT0iMjM3LjEyNSIgeTI9IjIzNy4xMjUiLz48dGV4dCBmaWxsPSIjMDAwMDAwIiBmb250LWZhbWlseT0ic2Fucy1zZXJpZiIgZm9udC1zaXplPSIxMyIgbGVuZ3RoQWRqdXN0PSJzcGFjaW5nIiB0ZXh0TGVuZ3RoPSI5My4xNTE5IiB4PSI0MjguODkwMSIgeT0iMjMyLjA1OTEiPmZpbmRCeVVzZXJJZCgpPC90ZXh0PjwvZz48ZyBjbGFzcz0ibWVzc2FnZSIgZGF0YS1wYXJ0aWNpcGFudC0xPSJSZXBvIiBkYXRhLXBhcnRpY2lwYW50LTI9IkRhdGFiYXNlIj48cG9seWdvbiBmaWxsPSIjMTgxODE4IiBwb2ludHM9IjYzNi41NDk4LDI2Mi4yNTc4LDY0Ni41NDk4LDI2Ni4yNTc4LDYzNi41NDk4LDI3MC4yNTc4LDY0MC41NDk4LDI2Ni4yNTc4IiBzdHlsZT0ic3Ryb2tlOiMxODE4MTg7c3Ryb2tlLXdpZHRoOjE7Ii8+PGxpbmUgc3R5bGU9InN0cm9rZTojMTgxODE4O3N0cm9rZS13aWR0aDoxOyIgeDE9IjU0MS42NTgyIiB4Mj0iNjQyLjU0OTgiIHkxPSIyNjYuMjU3OCIgeTI9IjI2Ni4yNTc4Ii8+PHRleHQgZmlsbD0iIzAwMDAwMCIgZm9udC1mYW1pbHk9InNhbnMtc2VyaWYiIGZvbnQtc2l6ZT0iMTMiIGxlbmd0aEFkanVzdD0ic3BhY2luZyIgdGV4dExlbmd0aD0iNDguOTQwNCIgeD0iNTQ4LjY1ODIiIHk9IjI2MS4xOTE5Ij5TRUxFQ1Q8L3RleHQ+PC9nPjxnIGNsYXNzPSJtZXNzYWdlIiBkYXRhLXBhcnRpY2lwYW50LTE9IkRhdGFiYXNlIiBkYXRhLXBhcnRpY2lwYW50LTI9IlJlcG8iPjxwb2x5Z29uIGZpbGw9IiMxODE4MTgiIHBvaW50cz0iNTUyLjY1ODIsMjkxLjM5MDYsNTQyLjY1ODIsMjk1LjM5MDYsNTUyLjY1ODIsMjk5LjM5MDYsNTQ4LjY1ODIsMjk1LjM5MDYiIHN0eWxlPSJzdHJva2U6IzE4MTgxODtzdHJva2Utd2lkdGg6MTsiLz48bGluZSBzdHlsZT0ic3Ryb2tlOiMxODE4MTg7c3Ryb2tlLXdpZHRoOjE7c3Ryb2tlLWRhc2hhcnJheToyLDI7IiB4MT0iNTQ2LjY1ODIiIHgyPSI2NDcuNTQ5OCIgeTE9IjI5NS4zOTA2IiB5Mj0iMjk1LjM5MDYiLz48dGV4dCBmaWxsPSIjMDAwMDAwIiBmb250LWZhbWlseT0ic2Fucy1zZXJpZiIgZm9udC1zaXplPSIxMyIgbGVuZ3RoQWRqdXN0PSJzcGFjaW5nIiB0ZXh0TGVuZ3RoPSIyOS42MzA5IiB4PSI1NTguNjU4MiIgeT0iMjkwLjMyNDciPlVzZXI8L3RleHQ+PC9nPjxnIGNsYXNzPSJtZXNzYWdlIiBkYXRhLXBhcnRpY2lwYW50LTE9IlJlcG8iIGRhdGEtcGFydGljaXBhbnQtMj0iU2VydmljZSI+PHBvbHlnb24gZmlsbD0iIzE4MTgxOCIgcG9pbnRzPSI0MzIuODkwMSwzMjAuNTIzNCw0MjIuODkwMSwzMjQuNTIzNCw0MzIuODkwMSwzMjguNTIzNCw0MjguODkwMSwzMjQuNTIzNCIgc3R5bGU9InN0cm9rZTojMTgxODE4O3N0cm9rZS13aWR0aDoxOyIvPjxsaW5lIHN0eWxlPSJzdHJva2U6IzE4MTgxODtzdHJva2Utd2lkdGg6MTtzdHJva2UtZGFzaGFycmF5OjIsMjsiIHgxPSI0MjYuODkwMSIgeDI9IjU0MC42NTgyIiB5MT0iMzI0LjUyMzQiIHkyPSIzMjQuNTIzNCIvPjx0ZXh0IGZpbGw9IiMwMDAwMDAiIGZvbnQtZmFtaWx5PSJzYW5zLXNlcmlmIiBmb250LXNpemU9IjEzIiBsZW5ndGhBZGp1c3Q9InNwYWNpbmciIHRleHRMZW5ndGg9IjI5LjYzMDkiIHg9IjQzOC44OTAxIiB5PSIzMTkuNDU3NSI+VXNlcjwvdGV4dD48L2c+PGcgY2xhc3M9Im1lc3NhZ2UiIGRhdGEtcGFydGljaXBhbnQtMT0iU2VydmljZSIgZGF0YS1wYXJ0aWNpcGFudC0yPSJTZXJ2aWNlIj48bGluZSBzdHlsZT0ic3Ryb2tlOiMxODE4MTg7c3Ryb2tlLXdpZHRoOjE7IiB4MT0iNDIxLjg5MDEiIHgyPSI0NjMuODkwMSIgeTE9IjM1My42NTYzIiB5Mj0iMzUzLjY1NjMiLz48bGluZSBzdHlsZT0ic3Ryb2tlOiMxODE4MTg7c3Ryb2tlLXdpZHRoOjE7IiB4MT0iNDYzLjg5MDEiIHgyPSI0NjMuODkwMSIgeTE9IjM1My42NTYzIiB5Mj0iMzY2LjY1NjMiLz48bGluZSBzdHlsZT0ic3Ryb2tlOiMxODE4MTg7c3Ryb2tlLXdpZHRoOjE7IiB4MT0iNDIyLjg5MDEiIHgyPSI0NjMuODkwMSIgeTE9IjM2Ni42NTYzIiB5Mj0iMzY2LjY1NjMiLz48cG9seWdvbiBmaWxsPSIjMTgxODE4IiBwb2ludHM9IjQzMi44OTAxLDM2Mi42NTYzLDQyMi44OTAxLDM2Ni42NTYzLDQzMi44OTAxLDM3MC42NTYzLDQyOC44OTAxLDM2Ni42NTYzIiBzdHlsZT0ic3Ryb2tlOiMxODE4MTg7c3Ryb2tlLXdpZHRoOjE7Ii8+PHRleHQgZmlsbD0iIzAwMDAwMCIgZm9udC1mYW1pbHk9InNhbnMtc2VyaWYiIGZvbnQtc2l6ZT0iMTMiIGxlbmd0aEFkanVzdD0ic3BhY2luZyIgdGV4dExlbmd0aD0iOTEuMDAwMSIgeD0iNDI4Ljg5MDEiIHk9IjM0OC41OTAzIj4mIzEyNDk3OyYjMTI0NzM7JiMxMjUyNzsmIzEyNTQwOyYjMTI0ODk7JiMyNjkwODsmIzM1Mzg4OzwvdGV4dD48L2c+PGcgY2xhc3M9Im1lc3NhZ2UiIGRhdGEtcGFydGljaXBhbnQtMT0iU2VydmljZSIgZGF0YS1wYXJ0aWNpcGFudC0yPSJTZXJ2aWNlIj48bGluZSBzdHlsZT0ic3Ryb2tlOiMxODE4MTg7c3Ryb2tlLXdpZHRoOjE7IiB4MT0iNDIxLjg5MDEiIHgyPSI0NjMuODkwMSIgeTE9IjM5NS43ODkxIiB5Mj0iMzk1Ljc4OTEiLz48bGluZSBzdHlsZT0ic3Ryb2tlOiMxODE4MTg7c3Ryb2tlLXdpZHRoOjE7IiB4MT0iNDYzLjg5MDEiIHgyPSI0NjMuODkwMSIgeTE9IjM5NS43ODkxIiB5Mj0iNDA4Ljc4OTEiLz48bGluZSBzdHlsZT0ic3Ryb2tlOiMxODE4MTg7c3Ryb2tlLXdpZHRoOjE7IiB4MT0iNDIyLjg5MDEiIHgyPSI0NjMuODkwMSIgeTE9IjQwOC43ODkxIiB5Mj0iNDA4Ljc4OTEiLz48cG9seWdvbiBmaWxsPSIjMTgxODE4IiBwb2ludHM9IjQzMi44OTAxLDQwNC43ODkxLDQyMi44OTAxLDQwOC43ODkxLDQzMi44OTAxLDQxMi43ODkxLDQyOC44OTAxLDQwOC43ODkxIiBzdHlsZT0ic3Ryb2tlOiMxODE4MTg7c3Ryb2tlLXdpZHRoOjE7Ii8+PHRleHQgZmlsbD0iIzAwMDAwMCIgZm9udC1mYW1pbHk9InNhbnMtc2VyaWYiIGZvbnQtc2l6ZT0iMTMiIGxlbmd0aEFkanVzdD0ic3BhY2luZyIgdGV4dExlbmd0aD0iNTAuNjI4OSIgeD0iNDI4Ljg5MDEiIHk9IjM5MC43MjMxIj5KV1QmIzI5OTgzOyYjMjUxMDQ7PC90ZXh0PjwvZz48ZyBjbGFzcz0ibWVzc2FnZSIgZGF0YS1wYXJ0aWNpcGFudC0xPSJTZXJ2aWNlIiBkYXRhLXBhcnRpY2lwYW50LTI9IkNvbnRyb2xsZXIiPjxwb2x5Z29uIGZpbGw9IiMxODE4MTgiIHBvaW50cz0iMzE1LjYyMDYsNDMzLjkyMTksMzA1LjYyMDYsNDM3LjkyMTksMzE1LjYyMDYsNDQxLjkyMTksMzExLjYyMDYsNDM3LjkyMTkiIHN0eWxlPSJzdHJva2U6IzE4MTgxODtzdHJva2Utd2lkdGg6MTsiLz48bGluZSBzdHlsZT0ic3Ryb2tlOiMxODE4MTg7c3Ryb2tlLXdpZHRoOjE7c3Ryb2tlLWRhc2hhcnJheToyLDI7IiB4MT0iMzA5LjYyMDYiIHgyPSI0MjAuODkwMSIgeTE9IjQzNy45MjE5IiB5Mj0iNDM3LjkyMTkiLz48dGV4dCBmaWxsPSIjMDAwMDAwIiBmb250LWZhbWlseT0ic2Fucy1zZXJpZiIgZm9udC1zaXplPSIxMyIgbGVuZ3RoQWRqdXN0PSJzcGFjaW5nIiB0ZXh0TGVuZ3RoPSI3MS4yMjA3IiB4PSIzMjEuNjIwNiIgeT0iNDMyLjg1NiI+QXV0aFJlc3VsdDwvdGV4dD48L2c+PGcgY2xhc3M9Im1lc3NhZ2UiIGRhdGEtcGFydGljaXBhbnQtMT0iQ29udHJvbGxlciIgZGF0YS1wYXJ0aWNpcGFudC0yPSJDbGllbnQiPjxwb2x5Z29uIGZpbGw9IiMxODE4MTgiIHBvaW50cz0iMzkuMjY1MSw0NjMuMDU0NywyOS4yNjUxLDQ2Ny4wNTQ3LDM5LjI2NTEsNDcxLjA1NDcsMzUuMjY1MSw0NjcuMDU0NyIgc3R5bGU9InN0cm9rZTojMTgxODE4O3N0cm9rZS13aWR0aDoxOyIvPjxsaW5lIHN0eWxlPSJzdHJva2U6IzE4MTgxODtzdHJva2Utd2lkdGg6MTtzdHJva2UtZGFzaGFycmF5OjIsMjsiIHgxPSIzMy4yNjUxIiB4Mj0iMzAzLjYyMDYiIHkxPSI0NjcuMDU0NyIgeTI9IjQ2Ny4wNTQ3Ii8+PHRleHQgZmlsbD0iIzAwMDAwMCIgZm9udC1mYW1pbHk9InNhbnMtc2VyaWYiIGZvbnQtc2l6ZT0iMTMiIGxlbmd0aEFkanVzdD0ic3BhY2luZyIgdGV4dExlbmd0aD0iNjguNDIxNCIgeD0iNDUuMjY1MSIgeT0iNDYxLjk4ODgiPkpXVCBUb2tlbjwvdGV4dD48L2c+PCEtLVNSQz1bUlA3MUlpRDA0OFJsLW5IQkp0ZWVsTmlHRDVRbTI0ZUp5Um1jZ291a0lUWENiSHdSTkVmMUtEMlJ1NExBQVRZVVhSeERHaW5aRTlqaUpBRlVQa1JfUGtWVjZIMFdFSXFNM3lMeWhSQ05kTnRlUkFxZG90b001aEM5OFNvN0k1NTcyWHUyWVBhMnVPa09YSzB4V3BsTzZ5N3JlUDMwTE9Vb1g1UFhjcEE4NHVNVzhZYWpyZ0hfS1BVaE0tN3BhaERuNnBmQmsxaG9FNGU0LVhnTmQ0YjltODFUaThKSjBuaUdLZmNjdExyaFpFeEdxbkZOZXBxTVlueDNPSnFQTk9jR00xTXZuWGNvekt1TUVidGZUQXhKSnZyRG9HUTIzVE9ZcWtPemQyUHkxZG5oY3pHMkNpT1UwZlNZM0ZSN25sdkhXNDFQSFJNc1l1SlJGLXV4N2xjZlQ5amNxc1BSTWJGQi1pUWlIajdQSy1idVBTd1B0VVZsaF9ZUF96NzFrVlZyXzlQRjdubHZ6b3hDUU9PeTZLYmVCUzFXclBCQkx3V050VjNtNm0wMF0tLT48L2c+PC9zdmc+" class="uml" alt="uml diagram" title="" /></p>
<h3 id="securityconfig">SecurityConfig の実装<a class="headerlink" href="#securityconfig" title="Permanent link">&para;</a></h3>
<div class="highlight"><pre><span></span><code><span class="kn">package</span><span class="w"> </span><span class="nn">com.example.accounting.infrastructure.security</span><span class="p">;</span>

<span class="kn">import</span><span class="w"> </span><span class="nn">lombok.RequiredArgsConstructor</span><span class="p">;</span>
<span class="kn">import</span><span class="w"> </span><span class="nn">org.springframework.context.annotation.Bean</span><span class="p">;</span>
<span class="kn">import</span><span class="w"> </span><span class="nn">org.springframework.context.annotation.Configuration</span><span class="p">;</span>
<span class="kn">import</span><span class="w"> </span><span class="nn">org.springframework.http.HttpMethod</span><span class="p">;</span>
<span class="kn">import</span><span class="w"> </span><span class="nn">org.springframework.security.config.annotation.method.configuration.EnableMethodSecurity</span><span class="p">;</span>
<span class="kn">import</span><span class="w"> </span><span class="nn">org.springframework.security.config.annotation.web.builders.HttpSecurity</span><span class="p">;</span>
<span class="kn">import</span><span class="w"> </span><span class="nn">org.springframework.security.config.annotation.web.configuration.EnableWebSecurity</span><span class="p">;</span>
<span class="kn">import</span><span class="w"> </span><span class="nn">org.springframework.security.config.http.SessionCreationPolicy</span><span class="p">;</span>
<span class="kn">import</span><span class="w"> </span><span class="nn">org.springframework.security.crypto.bcrypt.BCryptPasswordEncoder</span><span class="p">;</span>
<span class="kn">import</span><span class="w"> </span><span class="nn">org.springframework.security.crypto.password.PasswordEncoder</span><span class="p">;</span>
<span class="kn">import</span><span class="w"> </span><span class="nn">org.springframework.security.web.SecurityFilterChain</span><span class="p">;</span>
<span class="kn">import</span><span class="w"> </span><span class="nn">org.springframework.security.web.authentication.UsernamePasswordAuthenticationFilter</span><span class="p">;</span>

<span class="nd">@Configuration</span>
<span class="nd">@EnableWebSecurity</span>
<span class="nd">@EnableMethodSecurity</span>
<span class="nd">@RequiredArgsConstructor</span>
<span class="kd">public</span><span class="w"> </span><span class="kd">class</span> <span class="nc">SecurityConfig</span><span class="w"> </span><span class="p">{</span>

<span class="w">    </span><span class="kd">private</span><span class="w"> </span><span class="kd">final</span><span class="w"> </span><span class="n">JwtAuthenticationFilter</span><span class="w"> </span><span class="n">jwtAuthFilter</span><span class="p">;</span>
<span class="w">    </span><span class="kd">private</span><span class="w"> </span><span class="kd">final</span><span class="w"> </span><span class="n">JwtAuthenticationEntryPoint</span><span class="w"> </span><span class="n">jwtAuthEntryPoint</span><span class="p">;</span>

<span class="w">    </span><span class="nd">@Bean</span>
<span class="w">    </span><span class="kd">public</span><span class="w"> </span><span class="n">SecurityFilterChain</span><span class="w"> </span><span class="nf">filterChain</span><span class="p">(</span><span class="n">HttpSecurity</span><span class="w"> </span><span class="n">http</span><span class="p">)</span><span class="w"> </span><span class="kd">throws</span><span class="w"> </span><span class="n">Exception</span><span class="w"> </span><span class="p">{</span>
<span class="w">        </span><span class="n">http</span>
<span class="w">            </span><span class="c1">// CSRF無効化（JWT使用のため）</span>
<span class="w">            </span><span class="p">.</span><span class="na">csrf</span><span class="p">(</span><span class="n">csrf</span><span class="w"> </span><span class="o">-&gt;</span><span class="w"> </span><span class="n">csrf</span><span class="p">.</span><span class="na">disable</span><span class="p">())</span>

<span class="w">            </span><span class="c1">// ステートレスセッション</span>
<span class="w">            </span><span class="p">.</span><span class="na">sessionManagement</span><span class="p">(</span><span class="n">session</span><span class="w"> </span><span class="o">-&gt;</span>
<span class="w">                </span><span class="n">session</span><span class="p">.</span><span class="na">sessionCreationPolicy</span><span class="p">(</span><span class="n">SessionCreationPolicy</span><span class="p">.</span><span class="na">STATELESS</span><span class="p">))</span>

<span class="w">            </span><span class="c1">// 認証エントリーポイント</span>
<span class="w">            </span><span class="p">.</span><span class="na">exceptionHandling</span><span class="p">(</span><span class="n">exception</span><span class="w"> </span><span class="o">-&gt;</span>
<span class="w">                </span><span class="n">exception</span><span class="p">.</span><span class="na">authenticationEntryPoint</span><span class="p">(</span><span class="n">jwtAuthEntryPoint</span><span class="p">))</span>

<span class="w">            </span><span class="c1">// 認可設定</span>
<span class="w">            </span><span class="p">.</span><span class="na">authorizeHttpRequests</span><span class="p">(</span><span class="n">auth</span><span class="w"> </span><span class="o">-&gt;</span><span class="w"> </span><span class="n">auth</span>
<span class="w">                </span><span class="c1">// 認証不要</span>
<span class="w">                </span><span class="p">.</span><span class="na">requestMatchers</span><span class="p">(</span><span class="s">&quot;/api/auth/**&quot;</span><span class="p">).</span><span class="na">permitAll</span><span class="p">()</span>
<span class="w">                </span><span class="p">.</span><span class="na">requestMatchers</span><span class="p">(</span><span class="s">&quot;/actuator/health&quot;</span><span class="p">).</span><span class="na">permitAll</span><span class="p">()</span>

<span class="w">                </span><span class="c1">// ユーザー管理はADMINのみ</span>
<span class="w">                </span><span class="p">.</span><span class="na">requestMatchers</span><span class="p">(</span><span class="s">&quot;/api/users/**&quot;</span><span class="p">).</span><span class="na">hasRole</span><span class="p">(</span><span class="s">&quot;ADMIN&quot;</span><span class="p">)</span>

<span class="w">                </span><span class="c1">// 仕訳承認はMANAGER以上</span>
<span class="w">                </span><span class="p">.</span><span class="na">requestMatchers</span><span class="p">(</span><span class="n">HttpMethod</span><span class="p">.</span><span class="na">POST</span><span class="p">,</span><span class="w"> </span><span class="s">&quot;/api/journals/*/approve&quot;</span><span class="p">)</span>
<span class="w">                    </span><span class="p">.</span><span class="na">hasAnyRole</span><span class="p">(</span><span class="s">&quot;ADMIN&quot;</span><span class="p">,</span><span class="w"> </span><span class="s">&quot;EXECUTIVE&quot;</span><span class="p">,</span><span class="w"> </span><span class="s">&quot;MANAGER&quot;</span><span class="p">)</span>

<span class="w">                </span><span class="c1">// 仕訳確定はMANAGER以上</span>
<span class="w">                </span><span class="p">.</span><span class="na">requestMatchers</span><span class="p">(</span><span class="n">HttpMethod</span><span class="p">.</span><span class="na">POST</span><span class="p">,</span><span class="w"> </span><span class="s">&quot;/api/journals/*/confirm&quot;</span><span class="p">)</span>
<span class="w">                    </span><span class="p">.</span><span class="na">hasAnyRole</span><span class="p">(</span><span class="s">&quot;ADMIN&quot;</span><span class="p">,</span><span class="w"> </span><span class="s">&quot;MANAGER&quot;</span><span class="p">)</span>

<span class="w">                </span><span class="c1">// 財務分析はMANAGER以上</span>
<span class="w">                </span><span class="p">.</span><span class="na">requestMatchers</span><span class="p">(</span><span class="s">&quot;/api/analysis/**&quot;</span><span class="p">)</span>
<span class="w">                    </span><span class="p">.</span><span class="na">hasAnyRole</span><span class="p">(</span><span class="s">&quot;ADMIN&quot;</span><span class="p">,</span><span class="w"> </span><span class="s">&quot;EXECUTIVE&quot;</span><span class="p">,</span><span class="w"> </span><span class="s">&quot;MANAGER&quot;</span><span class="p">)</span>

<span class="w">                </span><span class="c1">// 監査ログはEXECUTIVE以上</span>
<span class="w">                </span><span class="p">.</span><span class="na">requestMatchers</span><span class="p">(</span><span class="s">&quot;/api/audit/**&quot;</span><span class="p">)</span>
<span class="w">                    </span><span class="p">.</span><span class="na">hasAnyRole</span><span class="p">(</span><span class="s">&quot;ADMIN&quot;</span><span class="p">,</span><span class="w"> </span><span class="s">&quot;EXECUTIVE&quot;</span><span class="p">)</span>

<span class="w">                </span><span class="c1">// その他は認証必須</span>
<span class="w">                </span><span class="p">.</span><span class="na">anyRequest</span><span class="p">().</span><span class="na">authenticated</span><span class="p">()</span>
<span class="w">            </span><span class="p">)</span>

<span class="w">            </span><span class="c1">// JWTフィルタを追加</span>
<span class="w">            </span><span class="p">.</span><span class="na">addFilterBefore</span><span class="p">(</span><span class="n">jwtAuthFilter</span><span class="p">,</span>
<span class="w">                </span><span class="n">UsernamePasswordAuthenticationFilter</span><span class="p">.</span><span class="na">class</span><span class="p">);</span>

<span class="w">        </span><span class="k">return</span><span class="w"> </span><span class="n">http</span><span class="p">.</span><span class="na">build</span><span class="p">();</span>
<span class="w">    </span><span class="p">}</span>

<span class="w">    </span><span class="nd">@Bean</span>
<span class="w">    </span><span class="kd">public</span><span class="w"> </span><span class="n">PasswordEncoder</span><span class="w"> </span><span class="nf">passwordEncoder</span><span class="p">()</span><span class="w"> </span><span class="p">{</span>
<span class="w">        </span><span class="k">return</span><span class="w"> </span><span class="k">new</span><span class="w"> </span><span class="n">BCryptPasswordEncoder</span><span class="p">();</span>
<span class="w">    </span><span class="p">}</span>
<span class="p">}</span>
</code></pre></div>
<h3 id="jwt">JWT トークン管理<a class="headerlink" href="#jwt" title="Permanent link">&para;</a></h3>
<p>認証成功時に JWT トークンを発行します。</p>
<p><img src="data:image/svg+xml;base64,PHN2ZyB4bWxucz0iaHR0cDovL3d3dy53My5vcmcvMjAwMC9zdmciIHhtbG5zOnhsaW5rPSJodHRwOi8vd3d3LnczLm9yZy8xOTk5L3hsaW5rIiBjb250ZW50U3R5bGVUeXBlPSJ0ZXh0L2NzcyIgZGF0YS1kaWFncmFtLXR5cGU9IkNMQVNTIiBoZWlnaHQ9IjU0MnB4IiBwcmVzZXJ2ZUFzcGVjdFJhdGlvPSJub25lIiBzdHlsZT0id2lkdGg6MjU5cHg7aGVpZ2h0OjU0MnB4O2JhY2tncm91bmQ6I0ZGRkZGRjsiIHZlcnNpb249IjEuMSIgdmlld0JveD0iMCAwIDI1OSA1NDIiIHdpZHRoPSIyNTlweCIgem9vbUFuZFBhbj0ibWFnbmlmeSI+PHRpdGxlPkpXVCAmIzEyNDg4OyYjMTI1NDA7JiMxMjQ2MzsmIzEyNTMxOyYjMTIzOTg7JiMyNzA4MzsmIzM2ODk2OzwvdGl0bGU+PGRlZnMvPjxnPjxnIGNsYXNzPSJ0aXRsZSIgZGF0YS1zb3VyY2UtbGluZT0iMSI+PHRleHQgZmlsbD0iIzAwMDAwMCIgZm9udC1mYW1pbHk9InNhbnMtc2VyaWYiIGZvbnQtc2l6ZT0iMTQiIGZvbnQtd2VpZ2h0PSJib2xkIiBsZW5ndGhBZGp1c3Q9InNwYWNpbmciIHRleHRMZW5ndGg9IjEzMy4wNzQ4IiB4PSI1NS45NjI2IiB5PSIyMi45OTUxIj5KV1QgJiMxMjQ4ODsmIzEyNTQwOyYjMTI0NjM7JiMxMjUzMTsmIzEyMzk4OyYjMjcwODM7JiMzNjg5Njs8L3RleHQ+PC9nPjwhLS1jbHVzdGVyIGhlYWRlci0tPjxnIGNsYXNzPSJjbHVzdGVyIiBkYXRhLWVudGl0eT0iaGVhZGVyIiBkYXRhLXNvdXJjZS1saW5lPSIzIiBkYXRhLXVpZD0iZW50MDAwMiIgaWQ9ImNsdXN0ZXJfaGVhZGVyIj48cmVjdCBmaWxsPSJub25lIiBoZWlnaHQ9IjEwNy4yNiIgcng9IjIuNSIgcnk9IjIuNSIgc3R5bGU9InN0cm9rZTojMTgxODE4O3N0cm9rZS13aWR0aDoxOyIgd2lkdGg9IjE1OSIgeD0iODciIHk9IjQ0LjI5NjkiLz48dGV4dCBmaWxsPSIjMDAwMDAwIiBmb250LWZhbWlseT0ic2Fucy1zZXJpZiIgZm9udC1zaXplPSIxNCIgZm9udC13ZWlnaHQ9ImJvbGQiIGxlbmd0aEFkanVzdD0ic3BhY2luZyIgdGV4dExlbmd0aD0iNTcuMDgwMSIgeD0iMTM3Ljk2IiB5PSI1OS4yOTIiPkhlYWRlcjwvdGV4dD48L2c+PCEtLWNsdXN0ZXIgcGF5bG9hZC0tPjxnIGNsYXNzPSJjbHVzdGVyIiBkYXRhLWVudGl0eT0icGF5bG9hZCIgZGF0YS1zb3VyY2UtbGluZT0iNyIgZGF0YS11aWQ9ImVudDAwMDQiIGlkPSJjbHVzdGVyX3BheWxvYWQiPjxyZWN0IGZpbGw9Im5vbmUiIGhlaWdodD0iMTUyLjY3IiByeD0iMi41IiByeT0iMi41IiBzdHlsZT0ic3Ryb2tlOiMxODE4MTg7c3Ryb2tlLXdpZHRoOjE7IiB3aWR0aD0iMjEzIiB4PSIzMyIgeT0iMTkxLjU1NjkiLz48dGV4dCBmaWxsPSIjMDAwMDAwIiBmb250LWZhbWlseT0ic2Fucy1zZXJpZiIgZm9udC1zaXplPSIxNCIgZm9udC13ZWlnaHQ9ImJvbGQiIGxlbmd0aEFkanVzdD0ic3BhY2luZyIgdGV4dExlbmd0aD0iNjIuNzE5NyIgeD0iMTA4LjE0MDEiIHk9IjIwNi41NTIiPlBheWxvYWQ8L3RleHQ+PC9nPjwhLS1jbHVzdGVyIHNpZ25hdHVyZS0tPjxnIGNsYXNzPSJjbHVzdGVyIiBkYXRhLWVudGl0eT0ic2lnbmF0dXJlIiBkYXRhLXNvdXJjZS1saW5lPSIxMSIgZGF0YS11aWQ9ImVudDAwMDYiIGlkPSJjbHVzdGVyX3NpZ25hdHVyZSI+PHJlY3QgZmlsbD0ibm9uZSIgaGVpZ2h0PSIxNTIuNjYiIHJ4PSIyLjUiIHJ5PSIyLjUiIHN0eWxlPSJzdHJva2U6IzE4MTgxODtzdHJva2Utd2lkdGg6MTsiIHdpZHRoPSIyMzkiIHg9IjciIHk9IjM4NC4yMjY5Ii8+PHRleHQgZmlsbD0iIzAwMDAwMCIgZm9udC1mYW1pbHk9InNhbnMtc2VyaWYiIGZvbnQtc2l6ZT0iMTQiIGZvbnQtd2VpZ2h0PSJib2xkIiBsZW5ndGhBZGp1c3Q9InNwYWNpbmciIHRleHRMZW5ndGg9Ijc3LjM3NiIgeD0iODcuODEyIiB5PSIzOTkuMjIyIj5TaWduYXR1cmU8L3RleHQ+PC9nPjxnIGNsYXNzPSJlbnRpdHkiIGRhdGEtZW50aXR5PSJuMSIgZGF0YS1zb3VyY2UtbGluZT0iNCIgZGF0YS11aWQ9ImVudDAwMDMiIGlkPSJlbnRpdHlfbjEiPjxwYXRoIGQ9Ik0xMTAuOTEsODcuMjk2OSBMMTEwLjkxLDEyNy41NjI1IEwyMDMuMDkyNiwxMjcuNTYyNSBMMjAzLjA5MjYsOTcuMjk2OSBMMTkzLjA5MjYsODcuMjk2OSBMMTEwLjkxLDg3LjI5NjkiIGZpbGw9IiNGRUZGREQiIHN0eWxlPSJzdHJva2U6IzE4MTgxODtzdHJva2Utd2lkdGg6MC41OyIvPjxwYXRoIGQ9Ik0xOTMuMDkyNiw4Ny4yOTY5IEwxOTMuMDkyNiw5Ny4yOTY5IEwyMDMuMDkyNiw5Ny4yOTY5IEwxOTMuMDkyNiw4Ny4yOTY5IiBmaWxsPSIjRkVGRkREIiBzdHlsZT0ic3Ryb2tlOiMxODE4MTg7c3Ryb2tlLXdpZHRoOjE7Ii8+PHRleHQgZmlsbD0iIzAwMDAwMCIgZm9udC1mYW1pbHk9InNhbnMtc2VyaWYiIGZvbnQtc2l6ZT0iMTMiIGxlbmd0aEFkanVzdD0ic3BhY2luZyIgdGV4dExlbmd0aD0iNzEuMTgyNiIgeD0iMTE2LjkxIiB5PSIxMDQuMzYzOCI+YWxnOiBIUzI1NjwvdGV4dD48dGV4dCBmaWxsPSIjMDAwMDAwIiBmb250LWZhbWlseT0ic2Fucy1zZXJpZiIgZm9udC1zaXplPSIxMyIgbGVuZ3RoQWRqdXN0PSJzcGFjaW5nIiB0ZXh0TGVuZ3RoPSI1NC4xODM2IiB4PSIxMTYuOTEiIHk9IjExOS40OTY2Ij50eXA6IEpXVDwvdGV4dD48L2c+PGcgY2xhc3M9ImVudGl0eSIgZGF0YS1lbnRpdHk9Im4yIiBkYXRhLXNvdXJjZS1saW5lPSI4IiBkYXRhLXVpZD0iZW50MDAwNSIgaWQ9ImVudGl0eV9uMiI+PHBhdGggZD0iTTU3LjI4LDIzNC41NTY5IEw1Ny4yOCwzMjAuMjIwOSBMMjAyLjcxOTUsMzIwLjIyMDkgTDIwMi43MTk1LDI0NC41NTY5IEwxOTIuNzE5NSwyMzQuNTU2OSBMNTcuMjgsMjM0LjU1NjkiIGZpbGw9IiNGRUZGREQiIHN0eWxlPSJzdHJva2U6IzE4MTgxODtzdHJva2Utd2lkdGg6MC41OyIvPjxwYXRoIGQ9Ik0xOTIuNzE5NSwyMzQuNTU2OSBMMTkyLjcxOTUsMjQ0LjU1NjkgTDIwMi43MTk1LDI0NC41NTY5IEwxOTIuNzE5NSwyMzQuNTU2OSIgZmlsbD0iI0ZFRkZERCIgc3R5bGU9InN0cm9rZTojMTgxODE4O3N0cm9rZS13aWR0aDoxOyIvPjx0ZXh0IGZpbGw9IiMwMDAwMDAiIGZvbnQtZmFtaWx5PSJzYW5zLXNlcmlmIiBmb250LXNpemU9IjEzIiBsZW5ndGhBZGp1c3Q9InNwYWNpbmciIHRleHRMZW5ndGg9IjEwOC40NDk3IiB4PSI2My4yOCIgeT0iMjUxLjYyMzgiPnN1YjogQUNDMDAwMDAxPC90ZXh0Pjx0ZXh0IGZpbGw9IiMwMDAwMDAiIGZvbnQtZmFtaWx5PSJzYW5zLXNlcmlmIiBmb250LXNpemU9IjEzIiBsZW5ndGhBZGp1c3Q9InNwYWNpbmciIHRleHRMZW5ndGg9IjEyNC40Mzk1IiB4PSI2My4yOCIgeT0iMjY2Ljc1NjYiPnJvbGU6IEFDQ09VTlRBTlQ8L3RleHQ+PHRleHQgZmlsbD0iIzAwMDAwMCIgZm9udC1mYW1pbHk9InNhbnMtc2VyaWYiIGZvbnQtc2l6ZT0iMTMiIGxlbmd0aEFkanVzdD0ic3BhY2luZyIgdGV4dExlbmd0aD0iMTA5LjA0NjQiIHg9IjYzLjI4IiB5PSIyODEuODg5NCI+cGVybWlzc2lvbnM6IFsuLi5dPC90ZXh0Pjx0ZXh0IGZpbGw9IiMwMDAwMDAiIGZvbnQtZmFtaWx5PSJzYW5zLXNlcmlmIiBmb250LXNpemU9IjEzIiBsZW5ndGhBZGp1c3Q9InNwYWNpbmciIHRleHRMZW5ndGg9IjExNS4xNjU1IiB4PSI2My4yOCIgeT0iMjk3LjAyMjIiPmV4cDogMTIzNDU2Nzg5MDwvdGV4dD48dGV4dCBmaWxsPSIjMDAwMDAwIiBmb250LWZhbWlseT0ic2Fucy1zZXJpZiIgZm9udC1zaXplPSIxMyIgbGVuZ3RoQWRqdXN0PSJzcGFjaW5nIiB0ZXh0TGVuZ3RoPSIxMDcuODk3NSIgeD0iNjMuMjgiIHk9IjMxMi4xNTUiPmlhdDogMTIzNDU2NzgwMDwvdGV4dD48L2c+PGcgY2xhc3M9ImVudGl0eSIgZGF0YS1lbnRpdHk9Im4zIiBkYXRhLXNvdXJjZS1saW5lPSIxMiIgZGF0YS11aWQ9ImVudDAwMDciIGlkPSJlbnRpdHlfbjMiPjxwYXRoIGQ9Ik0zMS40Nyw0MjcuMjI2OSBMMzEuNDcsNTEyLjg5MDkgTDIwMi41MjIyLDUxMi44OTA5IEwyMDIuNTIyMiw0MzcuMjI2OSBMMTkyLjUyMjIsNDI3LjIyNjkgTDMxLjQ3LDQyNy4yMjY5IiBmaWxsPSIjRkVGRkREIiBzdHlsZT0ic3Ryb2tlOiMxODE4MTg7c3Ryb2tlLXdpZHRoOjAuNTsiLz48cGF0aCBkPSJNMTkyLjUyMjIsNDI3LjIyNjkgTDE5Mi41MjIyLDQzNy4yMjY5IEwyMDIuNTIyMiw0MzcuMjI2OSBMMTkyLjUyMjIsNDI3LjIyNjkiIGZpbGw9IiNGRUZGREQiIHN0eWxlPSJzdHJva2U6IzE4MTgxODtzdHJva2Utd2lkdGg6MTsiLz48dGV4dCBmaWxsPSIjMDAwMDAwIiBmb250LWZhbWlseT0ic2Fucy1zZXJpZiIgZm9udC1zaXplPSIxMyIgbGVuZ3RoQWRqdXN0PSJzcGFjaW5nIiB0ZXh0TGVuZ3RoPSI5NS43NjcxIiB4PSIzNy40NyIgeT0iNDQ0LjI5MzgiPkhNQUNTSEEyNTYoPC90ZXh0Pjx0ZXh0IGZpbGw9IiMwMDAwMDAiIGZvbnQtZmFtaWx5PSJzYW5zLXNlcmlmIiBmb250LXNpemU9IjEzIiBsZW5ndGhBZGp1c3Q9InNwYWNpbmciIHRleHRMZW5ndGg9IjE0MS43ODc2IiB4PSI0NS43MzQ2IiB5PSI0NTkuNDI2NiI+YmFzZTY0KGhlYWRlcikgKyAuICs8L3RleHQ+PHRleHQgZmlsbD0iIzAwMDAwMCIgZm9udC1mYW1pbHk9InNhbnMtc2VyaWYiIGZvbnQtc2l6ZT0iMTMiIGxlbmd0aEFkanVzdD0ic3BhY2luZyIgdGV4dExlbmd0aD0iMTEzLjUwMjQiIHg9IjQ1LjczNDYiIHk9IjQ3NC41NTk0Ij5iYXNlNjQocGF5bG9hZCksPC90ZXh0Pjx0ZXh0IGZpbGw9IiMwMDAwMDAiIGZvbnQtZmFtaWx5PSJzYW5zLXNlcmlmIiBmb250LXNpemU9IjEzIiBsZW5ndGhBZGp1c3Q9InNwYWNpbmciIHRleHRMZW5ndGg9IjQwLjM1ODQiIHg9IjQ1LjczNDYiIHk9IjQ4OS42OTIyIj5zZWNyZXQ8L3RleHQ+PHRleHQgZmlsbD0iIzAwMDAwMCIgZm9udC1mYW1pbHk9InNhbnMtc2VyaWYiIGZvbnQtc2l6ZT0iMTMiIGxlbmd0aEFkanVzdD0ic3BhY2luZyIgdGV4dExlbmd0aD0iNS4wNzE4IiB4PSIzNy40NyIgeT0iNTA0LjgyNSI+KTwvdGV4dD48L2c+PCEtLWxpbmsgaGVhZGVyIHRvIHBheWxvYWQtLT48ZyBjbGFzcz0ibGluayIgZGF0YS1lbnRpdHktMT0iaGVhZGVyIiBkYXRhLWVudGl0eS0yPSJwYXlsb2FkIiBkYXRhLXNvdXJjZS1saW5lPSIxNSIgZGF0YS11aWQ9ImxuazgiIGlkPSJsaW5rX2hlYWRlcl9wYXlsb2FkIj48cGF0aCBjb2RlTGluZT0iMTUiIGQ9Ik0yMzgsMTUyLjAyODYgQzIzOCwxNTMuMTU5MyAyMzgsMTU0LjMwMjggMjM4LDE1NS40NTggQzIzOCwxNTcuNzY4MyAyMzgsMTYwLjEyNTMgMjM4LDE2Mi41MTk1IEMyMzgsMTY3LjMwNzkgMjM4LDE3Mi4yNDUzIDIzOCwxNzcuMjU3MyBDMjM4LDE3OS43NjMyIDIzOCwxODIuMjg3OCAyMzgsMTg0LjgyMTcgQzIzOCwxODYuMDg4NiAyMzgsMTg3LjM1NzkgMjM4LDE4OC42MjgzIEMyMzgsMTg5LjI2MzUgMjM4LDE4OS44OTkgMjM4LDE5MC41MzQ3IEMyMzgsMTkwLjg1MjUgMjM4LDE4NS4xNzAzIDIzOCwxODUuNDg4MiIgZmlsbD0ibm9uZSIgaWQ9ImhlYWRlci10by1wYXlsb2FkIiBzdHlsZT0ic3Ryb2tlOiMxODE4MTg7c3Ryb2tlLXdpZHRoOjE7Ii8+PHBvbHlnb24gZmlsbD0iIzE4MTgxOCIgcG9pbnRzPSIyMzgsMTkxLjQ4ODIsMjQyLDE4Mi40ODgyLDIzOCwxODYuNDg4MiwyMzQsMTgyLjQ4ODIsMjM4LDE5MS40ODgyIiBzdHlsZT0ic3Ryb2tlOiMxODE4MTg7c3Ryb2tlLXdpZHRoOjE7Ii8+PC9nPjwhLS1saW5rIHBheWxvYWQgdG8gc2lnbmF0dXJlLS0+PGcgY2xhc3M9ImxpbmsiIGRhdGEtZW50aXR5LTE9InBheWxvYWQiIGRhdGEtZW50aXR5LTI9InNpZ25hdHVyZSIgZGF0YS1zb3VyY2UtbGluZT0iMTYiIGRhdGEtdWlkPSJsbms5IiBpZD0ibGlua19wYXlsb2FkX3NpZ25hdHVyZSI+PHBhdGggY29kZUxpbmU9IjE2IiBkPSJNMjM4LDM0NC45MzY3IEMyMzgsMzQ1LjI4MjUgMjM4LDM0NS42Mjg5IDIzOCwzNDUuOTc1OCBDMjM4LDM0Ni42Njk2IDIzOCwzNDcuMzY1NSAyMzgsMzQ4LjA2MzUgQzIzOCwzNTAuODU1MiAyMzgsMzUzLjY3ODYgMjM4LDM1Ni41MjMyIEMyMzgsMzYyLjIxMjMgMjM4LDM2Ny45ODU5IDIzOCwzNzMuNzU5NCBDMjM4LDM3Ni42NDYxIDIzOCwzNzkuNTMyOCAyMzgsMzgyLjQwODggQzIzOCwzODIuNzY4MyAyMzgsMzgzLjEyNzYgMjM4LDM4My40ODY4IEMyMzgsMzgzLjY2NjQgMjM4LDM3Ny44NDU5IDIzOCwzNzguMDI1NCIgZmlsbD0ibm9uZSIgaWQ9InBheWxvYWQtdG8tc2lnbmF0dXJlIiBzdHlsZT0ic3Ryb2tlOiMxODE4MTg7c3Ryb2tlLXdpZHRoOjE7Ii8+PHBvbHlnb24gZmlsbD0iIzE4MTgxOCIgcG9pbnRzPSIyMzgsMzg0LjAyNTQsMjQyLDM3NS4wMjU0LDIzOCwzNzkuMDI1NCwyMzQsMzc1LjAyNTQsMjM4LDM4NC4wMjU0IiBzdHlsZT0ic3Ryb2tlOiMxODE4MTg7c3Ryb2tlLXdpZHRoOjE7Ii8+PC9nPjwhLS1TUkM9W0F5YWlvS2JMeTBlRktOWlN0RjZ1VVNfWmZsTUZjcFNfUmJwdFI3ZHRvdU81TjVuNWdTYWJZTmRmRzRMQTdnYzlBUWI1SVdnOW5HZVBPQVAyRExUVVZXYkc5WjRkdEtoMTh6WjhyMm1jaHdJb20wZmE4NVhUZFk1TkJPZVAwT2NMRVZjOUFNMzkwV1dSUmFmblFQQUxXZ0VwaW00ODZDUmE1VU5kZjg4NV80RnpHWHB6R2NCbzJiQUJTWkVCWXBGcHl1Z2o1QUJyekZIWU9fOUlBdTNzNkhlUGN2WVFjTGpPNmlKYVBJUU04MEdDMzIza0M0OXBIdDFjVWJ2WUlNYkhBYll3NkNRM2t5TjNyejR2c0NDSHcyRURjM201WFFKNHViR3A0bXM4anBLTGoxTnE1QklIbkE0LXFURzFZSE1kOVhVYmJpSmFRSzlpRFdSUDMwcWxOTHF4Y0Etdk9CdTdZUzdqMW0wMF0tLT48L2c+PC9zdmc+" class="uml" alt="uml diagram" title="" /></p>
<h4 id="jwttokenprovider">JwtTokenProvider の実装<a class="headerlink" href="#jwttokenprovider" title="Permanent link">&para;</a></h4>
<div class="highlight"><pre><span></span><code><span class="kn">package</span><span class="w"> </span><span class="nn">com.example.accounting.infrastructure.security</span><span class="p">;</span>

<span class="kn">import</span><span class="w"> </span><span class="nn">com.example.accounting.domain.model.user.Permission</span><span class="p">;</span>
<span class="kn">import</span><span class="w"> </span><span class="nn">com.example.accounting.domain.model.user.Role</span><span class="p">;</span>
<span class="kn">import</span><span class="w"> </span><span class="nn">io.jsonwebtoken.*</span><span class="p">;</span>
<span class="kn">import</span><span class="w"> </span><span class="nn">io.jsonwebtoken.security.Keys</span><span class="p">;</span>
<span class="kn">import</span><span class="w"> </span><span class="nn">org.springframework.beans.factory.annotation.Value</span><span class="p">;</span>
<span class="kn">import</span><span class="w"> </span><span class="nn">org.springframework.stereotype.Component</span><span class="p">;</span>

<span class="kn">import</span><span class="w"> </span><span class="nn">javax.crypto.SecretKey</span><span class="p">;</span>
<span class="kn">import</span><span class="w"> </span><span class="nn">java.nio.charset.StandardCharsets</span><span class="p">;</span>
<span class="kn">import</span><span class="w"> </span><span class="nn">java.util.Date</span><span class="p">;</span>
<span class="kn">import</span><span class="w"> </span><span class="nn">java.util.List</span><span class="p">;</span>
<span class="kn">import</span><span class="w"> </span><span class="nn">java.util.stream.Collectors</span><span class="p">;</span>

<span class="nd">@Component</span>
<span class="kd">public</span><span class="w"> </span><span class="kd">class</span> <span class="nc">JwtTokenProvider</span><span class="w"> </span><span class="p">{</span>

<span class="w">    </span><span class="kd">private</span><span class="w"> </span><span class="kd">final</span><span class="w"> </span><span class="n">SecretKey</span><span class="w"> </span><span class="n">secretKey</span><span class="p">;</span>
<span class="w">    </span><span class="kd">private</span><span class="w"> </span><span class="kd">final</span><span class="w"> </span><span class="kt">long</span><span class="w"> </span><span class="n">validityInMilliseconds</span><span class="p">;</span>

<span class="w">    </span><span class="kd">public</span><span class="w"> </span><span class="nf">JwtTokenProvider</span><span class="p">(</span>
<span class="w">            </span><span class="nd">@Value</span><span class="p">(</span><span class="s">&quot;${jwt.secret}&quot;</span><span class="p">)</span><span class="w"> </span><span class="n">String</span><span class="w"> </span><span class="n">secret</span><span class="p">,</span>
<span class="w">            </span><span class="nd">@Value</span><span class="p">(</span><span class="s">&quot;${jwt.expiration:86400000}&quot;</span><span class="p">)</span><span class="w"> </span><span class="kt">long</span><span class="w"> </span><span class="n">validityInMilliseconds</span><span class="p">)</span><span class="w"> </span><span class="p">{</span>
<span class="w">        </span><span class="k">this</span><span class="p">.</span><span class="na">secretKey</span><span class="w"> </span><span class="o">=</span><span class="w"> </span><span class="n">Keys</span><span class="p">.</span><span class="na">hmacShaKeyFor</span><span class="p">(</span>
<span class="w">            </span><span class="n">secret</span><span class="p">.</span><span class="na">getBytes</span><span class="p">(</span><span class="n">StandardCharsets</span><span class="p">.</span><span class="na">UTF_8</span><span class="p">)</span>
<span class="w">        </span><span class="p">);</span>
<span class="w">        </span><span class="k">this</span><span class="p">.</span><span class="na">validityInMilliseconds</span><span class="w"> </span><span class="o">=</span><span class="w"> </span><span class="n">validityInMilliseconds</span><span class="p">;</span>
<span class="w">    </span><span class="p">}</span>

<span class="w">    </span><span class="cm">/**</span>
<span class="cm">     * JWTトークンを生成</span>
<span class="cm">     */</span>
<span class="w">    </span><span class="kd">public</span><span class="w"> </span><span class="n">String</span><span class="w"> </span><span class="nf">createToken</span><span class="p">(</span><span class="n">String</span><span class="w"> </span><span class="n">userId</span><span class="p">,</span><span class="w"> </span><span class="n">Role</span><span class="w"> </span><span class="n">role</span><span class="p">)</span><span class="w"> </span><span class="p">{</span>
<span class="w">        </span><span class="n">Date</span><span class="w"> </span><span class="n">now</span><span class="w"> </span><span class="o">=</span><span class="w"> </span><span class="k">new</span><span class="w"> </span><span class="n">Date</span><span class="p">();</span>
<span class="w">        </span><span class="n">Date</span><span class="w"> </span><span class="n">validity</span><span class="w"> </span><span class="o">=</span><span class="w"> </span><span class="k">new</span><span class="w"> </span><span class="n">Date</span><span class="p">(</span><span class="n">now</span><span class="p">.</span><span class="na">getTime</span><span class="p">()</span><span class="w"> </span><span class="o">+</span><span class="w"> </span><span class="n">validityInMilliseconds</span><span class="p">);</span>

<span class="w">        </span><span class="n">List</span><span class="o">&lt;</span><span class="n">String</span><span class="o">&gt;</span><span class="w"> </span><span class="n">permissions</span><span class="w"> </span><span class="o">=</span><span class="w"> </span><span class="n">role</span><span class="p">.</span><span class="na">getPermissions</span><span class="p">().</span><span class="na">stream</span><span class="p">()</span>
<span class="w">            </span><span class="p">.</span><span class="na">map</span><span class="p">(</span><span class="n">Permission</span><span class="p">::</span><span class="n">name</span><span class="p">)</span>
<span class="w">            </span><span class="p">.</span><span class="na">collect</span><span class="p">(</span><span class="n">Collectors</span><span class="p">.</span><span class="na">toList</span><span class="p">());</span>

<span class="w">        </span><span class="k">return</span><span class="w"> </span><span class="n">Jwts</span><span class="p">.</span><span class="na">builder</span><span class="p">()</span>
<span class="w">            </span><span class="p">.</span><span class="na">subject</span><span class="p">(</span><span class="n">userId</span><span class="p">)</span>
<span class="w">            </span><span class="p">.</span><span class="na">claim</span><span class="p">(</span><span class="s">&quot;role&quot;</span><span class="p">,</span><span class="w"> </span><span class="n">role</span><span class="p">.</span><span class="na">name</span><span class="p">())</span>
<span class="w">            </span><span class="p">.</span><span class="na">claim</span><span class="p">(</span><span class="s">&quot;permissions&quot;</span><span class="p">,</span><span class="w"> </span><span class="n">permissions</span><span class="p">)</span>
<span class="w">            </span><span class="p">.</span><span class="na">issuedAt</span><span class="p">(</span><span class="n">now</span><span class="p">)</span>
<span class="w">            </span><span class="p">.</span><span class="na">expiration</span><span class="p">(</span><span class="n">validity</span><span class="p">)</span>
<span class="w">            </span><span class="p">.</span><span class="na">signWith</span><span class="p">(</span><span class="n">secretKey</span><span class="p">)</span>
<span class="w">            </span><span class="p">.</span><span class="na">compact</span><span class="p">();</span>
<span class="w">    </span><span class="p">}</span>

<span class="w">    </span><span class="cm">/**</span>
<span class="cm">     * トークンを検証</span>
<span class="cm">     */</span>
<span class="w">    </span><span class="kd">public</span><span class="w"> </span><span class="kt">boolean</span><span class="w"> </span><span class="nf">validateToken</span><span class="p">(</span><span class="n">String</span><span class="w"> </span><span class="n">token</span><span class="p">)</span><span class="w"> </span><span class="p">{</span>
<span class="w">        </span><span class="k">try</span><span class="w"> </span><span class="p">{</span>
<span class="w">            </span><span class="n">Jwts</span><span class="p">.</span><span class="na">parser</span><span class="p">()</span>
<span class="w">                </span><span class="p">.</span><span class="na">verifyWith</span><span class="p">(</span><span class="n">secretKey</span><span class="p">)</span>
<span class="w">                </span><span class="p">.</span><span class="na">build</span><span class="p">()</span>
<span class="w">                </span><span class="p">.</span><span class="na">parseSignedClaims</span><span class="p">(</span><span class="n">token</span><span class="p">);</span>
<span class="w">            </span><span class="k">return</span><span class="w"> </span><span class="kc">true</span><span class="p">;</span>
<span class="w">        </span><span class="p">}</span><span class="w"> </span><span class="k">catch</span><span class="w"> </span><span class="p">(</span><span class="n">JwtException</span><span class="w"> </span><span class="o">|</span><span class="w"> </span><span class="n">IllegalArgumentException</span><span class="w"> </span><span class="n">e</span><span class="p">)</span><span class="w"> </span><span class="p">{</span>
<span class="w">            </span><span class="k">return</span><span class="w"> </span><span class="kc">false</span><span class="p">;</span>
<span class="w">        </span><span class="p">}</span>
<span class="w">    </span><span class="p">}</span>

<span class="w">    </span><span class="cm">/**</span>
<span class="cm">     * トークンからユーザーIDを取得</span>
<span class="cm">     */</span>
<span class="w">    </span><span class="kd">public</span><span class="w"> </span><span class="n">String</span><span class="w"> </span><span class="nf">getUserId</span><span class="p">(</span><span class="n">String</span><span class="w"> </span><span class="n">token</span><span class="p">)</span><span class="w"> </span><span class="p">{</span>
<span class="w">        </span><span class="k">return</span><span class="w"> </span><span class="n">Jwts</span><span class="p">.</span><span class="na">parser</span><span class="p">()</span>
<span class="w">            </span><span class="p">.</span><span class="na">verifyWith</span><span class="p">(</span><span class="n">secretKey</span><span class="p">)</span>
<span class="w">            </span><span class="p">.</span><span class="na">build</span><span class="p">()</span>
<span class="w">            </span><span class="p">.</span><span class="na">parseSignedClaims</span><span class="p">(</span><span class="n">token</span><span class="p">)</span>
<span class="w">            </span><span class="p">.</span><span class="na">getPayload</span><span class="p">()</span>
<span class="w">            </span><span class="p">.</span><span class="na">getSubject</span><span class="p">();</span>
<span class="w">    </span><span class="p">}</span>

<span class="w">    </span><span class="cm">/**</span>
<span class="cm">     * トークンからロールを取得</span>
<span class="cm">     */</span>
<span class="w">    </span><span class="kd">public</span><span class="w"> </span><span class="n">Role</span><span class="w"> </span><span class="nf">getRole</span><span class="p">(</span><span class="n">String</span><span class="w"> </span><span class="n">token</span><span class="p">)</span><span class="w"> </span><span class="p">{</span>
<span class="w">        </span><span class="n">String</span><span class="w"> </span><span class="n">roleName</span><span class="w"> </span><span class="o">=</span><span class="w"> </span><span class="n">Jwts</span><span class="p">.</span><span class="na">parser</span><span class="p">()</span>
<span class="w">            </span><span class="p">.</span><span class="na">verifyWith</span><span class="p">(</span><span class="n">secretKey</span><span class="p">)</span>
<span class="w">            </span><span class="p">.</span><span class="na">build</span><span class="p">()</span>
<span class="w">            </span><span class="p">.</span><span class="na">parseSignedClaims</span><span class="p">(</span><span class="n">token</span><span class="p">)</span>
<span class="w">            </span><span class="p">.</span><span class="na">getPayload</span><span class="p">()</span>
<span class="w">            </span><span class="p">.</span><span class="na">get</span><span class="p">(</span><span class="s">&quot;role&quot;</span><span class="p">,</span><span class="w"> </span><span class="n">String</span><span class="p">.</span><span class="na">class</span><span class="p">);</span>
<span class="w">        </span><span class="k">return</span><span class="w"> </span><span class="n">Role</span><span class="p">.</span><span class="na">valueOf</span><span class="p">(</span><span class="n">roleName</span><span class="p">);</span>
<span class="w">    </span><span class="p">}</span>

<span class="w">    </span><span class="cm">/**</span>
<span class="cm">     * トークンから権限リストを取得</span>
<span class="cm">     */</span>
<span class="w">    </span><span class="nd">@SuppressWarnings</span><span class="p">(</span><span class="s">&quot;unchecked&quot;</span><span class="p">)</span>
<span class="w">    </span><span class="kd">public</span><span class="w"> </span><span class="n">List</span><span class="o">&lt;</span><span class="n">String</span><span class="o">&gt;</span><span class="w"> </span><span class="nf">getPermissions</span><span class="p">(</span><span class="n">String</span><span class="w"> </span><span class="n">token</span><span class="p">)</span><span class="w"> </span><span class="p">{</span>
<span class="w">        </span><span class="k">return</span><span class="w"> </span><span class="n">Jwts</span><span class="p">.</span><span class="na">parser</span><span class="p">()</span>
<span class="w">            </span><span class="p">.</span><span class="na">verifyWith</span><span class="p">(</span><span class="n">secretKey</span><span class="p">)</span>
<span class="w">            </span><span class="p">.</span><span class="na">build</span><span class="p">()</span>
<span class="w">            </span><span class="p">.</span><span class="na">parseSignedClaims</span><span class="p">(</span><span class="n">token</span><span class="p">)</span>
<span class="w">            </span><span class="p">.</span><span class="na">getPayload</span><span class="p">()</span>
<span class="w">            </span><span class="p">.</span><span class="na">get</span><span class="p">(</span><span class="s">&quot;permissions&quot;</span><span class="p">,</span><span class="w"> </span><span class="n">List</span><span class="p">.</span><span class="na">class</span><span class="p">);</span>
<span class="w">    </span><span class="p">}</span>
<span class="p">}</span>
</code></pre></div>
<h3 id="jwt_1">JWT認証フィルタ<a class="headerlink" href="#jwt_1" title="Permanent link">&para;</a></h3>
<div class="highlight"><pre><span></span><code><span class="kn">package</span><span class="w"> </span><span class="nn">com.example.accounting.infrastructure.security</span><span class="p">;</span>

<span class="kn">import</span><span class="w"> </span><span class="nn">jakarta.servlet.FilterChain</span><span class="p">;</span>
<span class="kn">import</span><span class="w"> </span><span class="nn">jakarta.servlet.ServletException</span><span class="p">;</span>
<span class="kn">import</span><span class="w"> </span><span class="nn">jakarta.servlet.http.HttpServletRequest</span><span class="p">;</span>
<span class="kn">import</span><span class="w"> </span><span class="nn">jakarta.servlet.http.HttpServletResponse</span><span class="p">;</span>
<span class="kn">import</span><span class="w"> </span><span class="nn">lombok.RequiredArgsConstructor</span><span class="p">;</span>
<span class="kn">import</span><span class="w"> </span><span class="nn">org.springframework.security.authentication.UsernamePasswordAuthenticationToken</span><span class="p">;</span>
<span class="kn">import</span><span class="w"> </span><span class="nn">org.springframework.security.core.authority.SimpleGrantedAuthority</span><span class="p">;</span>
<span class="kn">import</span><span class="w"> </span><span class="nn">org.springframework.security.core.context.SecurityContextHolder</span><span class="p">;</span>
<span class="kn">import</span><span class="w"> </span><span class="nn">org.springframework.stereotype.Component</span><span class="p">;</span>
<span class="kn">import</span><span class="w"> </span><span class="nn">org.springframework.web.filter.OncePerRequestFilter</span><span class="p">;</span>

<span class="kn">import</span><span class="w"> </span><span class="nn">java.io.IOException</span><span class="p">;</span>
<span class="kn">import</span><span class="w"> </span><span class="nn">java.util.List</span><span class="p">;</span>
<span class="kn">import</span><span class="w"> </span><span class="nn">java.util.stream.Collectors</span><span class="p">;</span>

<span class="nd">@Component</span>
<span class="nd">@RequiredArgsConstructor</span>
<span class="kd">public</span><span class="w"> </span><span class="kd">class</span> <span class="nc">JwtAuthenticationFilter</span><span class="w"> </span><span class="kd">extends</span><span class="w"> </span><span class="n">OncePerRequestFilter</span><span class="w"> </span><span class="p">{</span>

<span class="w">    </span><span class="kd">private</span><span class="w"> </span><span class="kd">final</span><span class="w"> </span><span class="n">JwtTokenProvider</span><span class="w"> </span><span class="n">jwtTokenProvider</span><span class="p">;</span>

<span class="w">    </span><span class="nd">@Override</span>
<span class="w">    </span><span class="kd">protected</span><span class="w"> </span><span class="kt">void</span><span class="w"> </span><span class="nf">doFilterInternal</span><span class="p">(</span>
<span class="w">            </span><span class="n">HttpServletRequest</span><span class="w"> </span><span class="n">request</span><span class="p">,</span>
<span class="w">            </span><span class="n">HttpServletResponse</span><span class="w"> </span><span class="n">response</span><span class="p">,</span>
<span class="w">            </span><span class="n">FilterChain</span><span class="w"> </span><span class="n">filterChain</span>
<span class="w">    </span><span class="p">)</span><span class="w"> </span><span class="kd">throws</span><span class="w"> </span><span class="n">ServletException</span><span class="p">,</span><span class="w"> </span><span class="n">IOException</span><span class="w"> </span><span class="p">{</span>

<span class="w">        </span><span class="n">String</span><span class="w"> </span><span class="n">token</span><span class="w"> </span><span class="o">=</span><span class="w"> </span><span class="n">extractToken</span><span class="p">(</span><span class="n">request</span><span class="p">);</span>

<span class="w">        </span><span class="k">if</span><span class="w"> </span><span class="p">(</span><span class="n">token</span><span class="w"> </span><span class="o">!=</span><span class="w"> </span><span class="kc">null</span><span class="w"> </span><span class="o">&amp;&amp;</span><span class="w"> </span><span class="n">jwtTokenProvider</span><span class="p">.</span><span class="na">validateToken</span><span class="p">(</span><span class="n">token</span><span class="p">))</span><span class="w"> </span><span class="p">{</span>
<span class="w">            </span><span class="n">String</span><span class="w"> </span><span class="n">userId</span><span class="w"> </span><span class="o">=</span><span class="w"> </span><span class="n">jwtTokenProvider</span><span class="p">.</span><span class="na">getUserId</span><span class="p">(</span><span class="n">token</span><span class="p">);</span>
<span class="w">            </span><span class="n">String</span><span class="w"> </span><span class="n">role</span><span class="w"> </span><span class="o">=</span><span class="w"> </span><span class="n">jwtTokenProvider</span><span class="p">.</span><span class="na">getRole</span><span class="p">(</span><span class="n">token</span><span class="p">).</span><span class="na">name</span><span class="p">();</span>
<span class="w">            </span><span class="n">List</span><span class="o">&lt;</span><span class="n">String</span><span class="o">&gt;</span><span class="w"> </span><span class="n">permissions</span><span class="w"> </span><span class="o">=</span><span class="w"> </span><span class="n">jwtTokenProvider</span><span class="p">.</span><span class="na">getPermissions</span><span class="p">(</span><span class="n">token</span><span class="p">);</span>

<span class="w">            </span><span class="c1">// 権限をGrantedAuthorityに変換</span>
<span class="w">            </span><span class="n">List</span><span class="o">&lt;</span><span class="n">SimpleGrantedAuthority</span><span class="o">&gt;</span><span class="w"> </span><span class="n">authorities</span><span class="w"> </span><span class="o">=</span><span class="w"> </span><span class="n">permissions</span><span class="p">.</span><span class="na">stream</span><span class="p">()</span>
<span class="w">                </span><span class="p">.</span><span class="na">map</span><span class="p">(</span><span class="n">SimpleGrantedAuthority</span><span class="p">::</span><span class="k">new</span><span class="p">)</span>
<span class="w">                </span><span class="p">.</span><span class="na">collect</span><span class="p">(</span><span class="n">Collectors</span><span class="p">.</span><span class="na">toList</span><span class="p">());</span>

<span class="w">            </span><span class="c1">// ロールも追加</span>
<span class="w">            </span><span class="n">authorities</span><span class="p">.</span><span class="na">add</span><span class="p">(</span><span class="k">new</span><span class="w"> </span><span class="n">SimpleGrantedAuthority</span><span class="p">(</span><span class="s">&quot;ROLE_&quot;</span><span class="w"> </span><span class="o">+</span><span class="w"> </span><span class="n">role</span><span class="p">));</span>

<span class="w">            </span><span class="n">UsernamePasswordAuthenticationToken</span><span class="w"> </span><span class="n">authentication</span><span class="w"> </span><span class="o">=</span>
<span class="w">                </span><span class="k">new</span><span class="w"> </span><span class="n">UsernamePasswordAuthenticationToken</span><span class="p">(</span>
<span class="w">                    </span><span class="n">userId</span><span class="p">,</span><span class="w"> </span><span class="kc">null</span><span class="p">,</span><span class="w"> </span><span class="n">authorities</span>
<span class="w">                </span><span class="p">);</span>

<span class="w">            </span><span class="n">SecurityContextHolder</span><span class="p">.</span><span class="na">getContext</span><span class="p">()</span>
<span class="w">                </span><span class="p">.</span><span class="na">setAuthentication</span><span class="p">(</span><span class="n">authentication</span><span class="p">);</span>
<span class="w">        </span><span class="p">}</span>

<span class="w">        </span><span class="n">filterChain</span><span class="p">.</span><span class="na">doFilter</span><span class="p">(</span><span class="n">request</span><span class="p">,</span><span class="w"> </span><span class="n">response</span><span class="p">);</span>
<span class="w">    </span><span class="p">}</span>

<span class="w">    </span><span class="kd">private</span><span class="w"> </span><span class="n">String</span><span class="w"> </span><span class="nf">extractToken</span><span class="p">(</span><span class="n">HttpServletRequest</span><span class="w"> </span><span class="n">request</span><span class="p">)</span><span class="w"> </span><span class="p">{</span>
<span class="w">        </span><span class="n">String</span><span class="w"> </span><span class="n">bearerToken</span><span class="w"> </span><span class="o">=</span><span class="w"> </span><span class="n">request</span><span class="p">.</span><span class="na">getHeader</span><span class="p">(</span><span class="s">&quot;Authorization&quot;</span><span class="p">);</span>
<span class="w">        </span><span class="k">if</span><span class="w"> </span><span class="p">(</span><span class="n">bearerToken</span><span class="w"> </span><span class="o">!=</span><span class="w"> </span><span class="kc">null</span><span class="w"> </span><span class="o">&amp;&amp;</span><span class="w"> </span><span class="n">bearerToken</span><span class="p">.</span><span class="na">startsWith</span><span class="p">(</span><span class="s">&quot;Bearer &quot;</span><span class="p">))</span><span class="w"> </span><span class="p">{</span>
<span class="w">            </span><span class="k">return</span><span class="w"> </span><span class="n">bearerToken</span><span class="p">.</span><span class="na">substring</span><span class="p">(</span><span class="mi">7</span><span class="p">);</span>
<span class="w">        </span><span class="p">}</span>
<span class="w">        </span><span class="k">return</span><span class="w"> </span><span class="kc">null</span><span class="p">;</span>
<span class="w">    </span><span class="p">}</span>
<span class="p">}</span>
</code></pre></div>
<h3 id="_14">セッション管理<a class="headerlink" href="#_14" title="Permanent link">&para;</a></h3>
<p>本システムでは、ステートレスな JWT 認証を採用しています。</p>
<table>
<thead>
<tr>
<th>項目</th>
<th>設定</th>
</tr>
</thead>
<tbody>
<tr>
<td>セッション管理</td>
<td>STATELESS</td>
</tr>
<tr>
<td>トークン有効期限</td>
<td>24時間</td>
</tr>
<tr>
<td>リフレッシュトークン</td>
<td>対応（7日間有効）</td>
</tr>
<tr>
<td>トークン保存場所</td>
<td>クライアント側（LocalStorage/Cookie）</td>
</tr>
</tbody>
</table>
<p><img src="data:image/svg+xml;base64,PHN2ZyB4bWxucz0iaHR0cDovL3d3dy53My5vcmcvMjAwMC9zdmciIHhtbG5zOnhsaW5rPSJodHRwOi8vd3d3LnczLm9yZy8xOTk5L3hsaW5rIiBjb250ZW50U3R5bGVUeXBlPSJ0ZXh0L2NzcyIgZGF0YS1kaWFncmFtLXR5cGU9IlNFUVVFTkNFIiBoZWlnaHQ9IjkxM3B4IiBwcmVzZXJ2ZUFzcGVjdFJhdGlvPSJub25lIiBzdHlsZT0id2lkdGg6NTExcHg7aGVpZ2h0OjkxM3B4O2JhY2tncm91bmQ6I0ZGRkZGRjsiIHZlcnNpb249IjEuMSIgdmlld0JveD0iMCAwIDUxMSA5MTMiIHdpZHRoPSI1MTFweCIgem9vbUFuZFBhbj0ibWFnbmlmeSI+PHRpdGxlPiYjMTI0NzM7JiMxMjQ4NjsmIzEyNTQwOyYjMTI0ODg7JiMxMjUyNDsmIzEyNDczOyYjMzU0Njk7JiMzNTM4ODsmIzEyMzk4OyYjMjc5Njk7JiMxMjQyODsmIzY1Mjg4OyYjMzYwMDE7JiMyMTIwOTsmIzIwMjUwOyYjMzUzMzY7JiMxMjQ3MTsmIzEyNDczOyYjMTI0ODY7JiMxMjUxMjsmIzY1Mjg5OzwvdGl0bGU+PGRlZnMvPjxnPjx0ZXh0IGZpbGw9IiMwMDAwMDAiIGZvbnQtZmFtaWx5PSJzYW5zLXNlcmlmIiBmb250LXNpemU9IjE0IiBmb250LXdlaWdodD0iYm9sZCIgbGVuZ3RoQWRqdXN0PSJzcGFjaW5nIiB0ZXh0TGVuZ3RoPSIyOTMuOTk4NyIgeD0iMTA0LjUwMDgiIHk9IjI3Ljk5NTEiPiYjMTI0NzM7JiMxMjQ4NjsmIzEyNTQwOyYjMTI0ODg7JiMxMjUyNDsmIzEyNDczOyYjMzU0Njk7JiMzNTM4ODsmIzEyMzk4OyYjMjc5Njk7JiMxMjQyODsmIzY1Mjg4OyYjMzYwMDE7JiMyMTIwOTsmIzIwMjUwOyYjMzUzMzY7JiMxMjQ3MTsmIzEyNDczOyYjMTI0ODY7JiMxMjUxMjsmIzY1Mjg5OzwvdGV4dD48Zz48dGl0bGU+Q2xpZW50PC90aXRsZT48cmVjdCBmaWxsPSIjMDAwMDAwIiBmaWxsLW9wYWNpdHk9IjAuMDAwMDAiIGhlaWdodD0iODA0LjMyMDMiIHdpZHRoPSI4IiB4PSIyOC4yNjUxIiB5PSI3My41OTM4Ii8+PGxpbmUgc3R5bGU9InN0cm9rZTojMTgxODE4O3N0cm9rZS13aWR0aDowLjU7c3Ryb2tlLWRhc2hhcnJheTo1LDU7IiB4MT0iMzIiIHgyPSIzMiIgeTE9IjczLjU5MzgiIHkyPSI4NzcuOTE0MSIvPjwvZz48Zz48dGl0bGU+U2VydmVyPC90aXRsZT48cmVjdCBmaWxsPSIjMDAwMDAwIiBmaWxsLW9wYWNpdHk9IjAuMDAwMDAiIGhlaWdodD0iODA0LjMyMDMiIHdpZHRoPSI4IiB4PSIyNDguOTA5MiIgeT0iNzMuNTkzOCIvPjxsaW5lIHN0eWxlPSJzdHJva2U6IzE4MTgxODtzdHJva2Utd2lkdGg6MC41O3N0cm9rZS1kYXNoYXJyYXk6NSw1OyIgeDE9IjI1MS45NTQxIiB4Mj0iMjUxLjk1NDEiIHkxPSI3My41OTM4IiB5Mj0iODc3LjkxNDEiLz48L2c+PGc+PHRpdGxlPkRhdGFiYXNlPC90aXRsZT48cmVjdCBmaWxsPSIjMDAwMDAwIiBmaWxsLW9wYWNpdHk9IjAuMDAwMDAiIGhlaWdodD0iODA0LjMyMDMiIHdpZHRoPSI4IiB4PSI0MTguOTA5NCIgeT0iNzMuNTkzOCIvPjxsaW5lIHN0eWxlPSJzdHJva2U6IzE4MTgxODtzdHJva2Utd2lkdGg6MC41O3N0cm9rZS1kYXNoYXJyYXk6NSw1OyIgeDE9IjQyMi41MDkiIHgyPSI0MjIuNTA5IiB5MT0iNzMuNTkzOCIgeTI9Ijg3Ny45MTQxIi8+PC9nPjxnIGNsYXNzPSJwYXJ0aWNpcGFudCBwYXJ0aWNpcGFudC1oZWFkIiBkYXRhLXBhcnRpY2lwYW50PSJDbGllbnQiPjxyZWN0IGZpbGw9IiNFMkUyRjAiIGhlaWdodD0iMzAuMjk2OSIgcng9IjIuNSIgcnk9IjIuNSIgc3R5bGU9InN0cm9rZTojMTgxODE4O3N0cm9rZS13aWR0aDowLjU7IiB3aWR0aD0iNTQuNTMwMyIgeD0iNSIgeT0iNDIuMjk2OSIvPjx0ZXh0IGZpbGw9IiMwMDAwMDAiIGZvbnQtZmFtaWx5PSJzYW5zLXNlcmlmIiBmb250LXNpemU9IjE0IiBsZW5ndGhBZGp1c3Q9InNwYWNpbmciIHRleHRMZW5ndGg9IjQwLjUzMDMiIHg9IjEyIiB5PSI2Mi4yOTIiPkNsaWVudDwvdGV4dD48L2c+PGcgY2xhc3M9InBhcnRpY2lwYW50IHBhcnRpY2lwYW50LXRhaWwiIGRhdGEtcGFydGljaXBhbnQ9IkNsaWVudCI+PHJlY3QgZmlsbD0iI0UyRTJGMCIgaGVpZ2h0PSIzMC4yOTY5IiByeD0iMi41IiByeT0iMi41IiBzdHlsZT0ic3Ryb2tlOiMxODE4MTg7c3Ryb2tlLXdpZHRoOjAuNTsiIHdpZHRoPSI1NC41MzAzIiB4PSI1IiB5PSI4NzYuOTE0MSIvPjx0ZXh0IGZpbGw9IiMwMDAwMDAiIGZvbnQtZmFtaWx5PSJzYW5zLXNlcmlmIiBmb250LXNpemU9IjE0IiBsZW5ndGhBZGp1c3Q9InNwYWNpbmciIHRleHRMZW5ndGg9IjQwLjUzMDMiIHg9IjEyIiB5PSI4OTYuOTA5MiI+Q2xpZW50PC90ZXh0PjwvZz48ZyBjbGFzcz0icGFydGljaXBhbnQgcGFydGljaXBhbnQtaGVhZCIgZGF0YS1wYXJ0aWNpcGFudD0iU2VydmVyIj48cmVjdCBmaWxsPSIjRTJFMkYwIiBoZWlnaHQ9IjMwLjI5NjkiIHJ4PSIyLjUiIHJ5PSIyLjUiIHN0eWxlPSJzdHJva2U6IzE4MTgxODtzdHJva2Utd2lkdGg6MC41OyIgd2lkdGg9IjU5LjkxMDIiIHg9IjIyMi45NTQxIiB5PSI0Mi4yOTY5Ii8+PHRleHQgZmlsbD0iIzAwMDAwMCIgZm9udC1mYW1pbHk9InNhbnMtc2VyaWYiIGZvbnQtc2l6ZT0iMTQiIGxlbmd0aEFkanVzdD0ic3BhY2luZyIgdGV4dExlbmd0aD0iNDUuOTEwMiIgeD0iMjI5Ljk1NDEiIHk9IjYyLjI5MiI+U2VydmVyPC90ZXh0PjwvZz48ZyBjbGFzcz0icGFydGljaXBhbnQgcGFydGljaXBhbnQtdGFpbCIgZGF0YS1wYXJ0aWNpcGFudD0iU2VydmVyIj48cmVjdCBmaWxsPSIjRTJFMkYwIiBoZWlnaHQ9IjMwLjI5NjkiIHJ4PSIyLjUiIHJ5PSIyLjUiIHN0eWxlPSJzdHJva2U6IzE4MTgxODtzdHJva2Utd2lkdGg6MC41OyIgd2lkdGg9IjU5LjkxMDIiIHg9IjIyMi45NTQxIiB5PSI4NzYuOTE0MSIvPjx0ZXh0IGZpbGw9IiMwMDAwMDAiIGZvbnQtZmFtaWx5PSJzYW5zLXNlcmlmIiBmb250LXNpemU9IjE0IiBsZW5ndGhBZGp1c3Q9InNwYWNpbmciIHRleHRMZW5ndGg9IjQ1LjkxMDIiIHg9IjIyOS45NTQxIiB5PSI4OTYuOTA5MiI+U2VydmVyPC90ZXh0PjwvZz48ZyBjbGFzcz0icGFydGljaXBhbnQgcGFydGljaXBhbnQtaGVhZCIgZGF0YS1wYXJ0aWNpcGFudD0iRGF0YWJhc2UiPjxyZWN0IGZpbGw9IiNFMkUyRjAiIGhlaWdodD0iMzAuMjk2OSIgcng9IjIuNSIgcnk9IjIuNSIgc3R5bGU9InN0cm9rZTojMTgxODE4O3N0cm9rZS13aWR0aDowLjU7IiB3aWR0aD0iODAuODAwOCIgeD0iMzgyLjUwOSIgeT0iNDIuMjk2OSIvPjx0ZXh0IGZpbGw9IiMwMDAwMDAiIGZvbnQtZmFtaWx5PSJzYW5zLXNlcmlmIiBmb250LXNpemU9IjE0IiBsZW5ndGhBZGp1c3Q9InNwYWNpbmciIHRleHRMZW5ndGg9IjY2LjgwMDgiIHg9IjM4OS41MDkiIHk9IjYyLjI5MiI+RGF0YWJhc2U8L3RleHQ+PC9nPjxnIGNsYXNzPSJwYXJ0aWNpcGFudCBwYXJ0aWNpcGFudC10YWlsIiBkYXRhLXBhcnRpY2lwYW50PSJEYXRhYmFzZSI+PHJlY3QgZmlsbD0iI0UyRTJGMCIgaGVpZ2h0PSIzMC4yOTY5IiByeD0iMi41IiByeT0iMi41IiBzdHlsZT0ic3Ryb2tlOiMxODE4MTg7c3Ryb2tlLXdpZHRoOjAuNTsiIHdpZHRoPSI4MC44MDA4IiB4PSIzODIuNTA5IiB5PSI4NzYuOTE0MSIvPjx0ZXh0IGZpbGw9IiMwMDAwMDAiIGZvbnQtZmFtaWx5PSJzYW5zLXNlcmlmIiBmb250LXNpemU9IjE0IiBsZW5ndGhBZGp1c3Q9InNwYWNpbmciIHRleHRMZW5ndGg9IjY2LjgwMDgiIHg9IjM4OS41MDkiIHk9Ijg5Ni45MDkyIj5EYXRhYmFzZTwvdGV4dD48L2c+PHJlY3QgZmlsbD0iI0VFRUVFRSIgaGVpZ2h0PSIzIiBzdHlsZT0ic3Ryb2tlOiNFRUVFRUU7c3Ryb2tlLXdpZHRoOjE7IiB3aWR0aD0iNTA0LjAwMDMiIHg9IjAiIHk9IjEwNC4xNjAyIi8+PGxpbmUgc3R5bGU9InN0cm9rZTojMDAwMDAwO3N0cm9rZS13aWR0aDoxOyIgeDE9IjAiIHgyPSI1MDQuMDAwMyIgeTE9IjEwNC4xNjAyIiB5Mj0iMTA0LjE2MDIiLz48bGluZSBzdHlsZT0ic3Ryb2tlOiMwMDAwMDA7c3Ryb2tlLXdpZHRoOjE7IiB4MT0iMCIgeDI9IjUwNC4wMDAzIiB5MT0iMTA3LjE2MDIiIHkyPSIxMDcuMTYwMiIvPjxyZWN0IGZpbGw9IiNFRUVFRUUiIGhlaWdodD0iMjMuMTMyOCIgc3R5bGU9InN0cm9rZTojMDAwMDAwO3N0cm9rZS13aWR0aDoyOyIgd2lkdGg9IjcwLjUyNTkiIHg9IjIxNi43MzcyIiB5PSI5My41OTM4Ii8+PHRleHQgZmlsbD0iIzAwMDAwMCIgZm9udC1mYW1pbHk9InNhbnMtc2VyaWYiIGZvbnQtc2l6ZT0iMTMiIGZvbnQtd2VpZ2h0PSJib2xkIiBsZW5ndGhBZGp1c3Q9InNwYWNpbmciIHRleHRMZW5ndGg9IjUyLjAwMDEiIHg9IjIyMi43MzcyIiB5PSIxMDkuNjYwNiI+JiMxMjUyNTsmIzEyNDY0OyYjMTI0NTI7JiMxMjUzMTs8L3RleHQ+PGcgY2xhc3M9Im1lc3NhZ2UiIGRhdGEtcGFydGljaXBhbnQtMT0iQ2xpZW50IiBkYXRhLXBhcnRpY2lwYW50LTI9IlNlcnZlciI+PHBvbHlnb24gZmlsbD0iIzE4MTgxOCIgcG9pbnRzPSIyNDAuOTA5MiwxNTguOTkyMiwyNTAuOTA5MiwxNjIuOTkyMiwyNDAuOTA5MiwxNjYuOTkyMiwyNDQuOTA5MiwxNjIuOTkyMiIgc3R5bGU9InN0cm9rZTojMTgxODE4O3N0cm9rZS13aWR0aDoxOyIvPjxsaW5lIHN0eWxlPSJzdHJva2U6IzE4MTgxODtzdHJva2Utd2lkdGg6MTsiIHgxPSIzMi4yNjUxIiB4Mj0iMjQ2LjkwOTIiIHkxPSIxNjIuOTkyMiIgeTI9IjE2Mi45OTIyIi8+PHRleHQgZmlsbD0iIzAwMDAwMCIgZm9udC1mYW1pbHk9InNhbnMtc2VyaWYiIGZvbnQtc2l6ZT0iMTMiIGxlbmd0aEFkanVzdD0ic3BhY2luZyIgdGV4dExlbmd0aD0iMTMyLjU3NzEiIHg9IjM5LjI2NTEiIHk9IjE0Mi43OTM1Ij5QT1NUIC9hcGkvYXV0aC9sb2dpbjwvdGV4dD48dGV4dCBmaWxsPSIjMDAwMDAwIiBmb250LWZhbWlseT0ic2Fucy1zZXJpZiIgZm9udC1zaXplPSIxMyIgbGVuZ3RoQWRqdXN0PSJzcGFjaW5nIiB0ZXh0TGVuZ3RoPSIxMjcuMTk0MyIgeD0iMzkuMjY1MSIgeT0iMTU3LjkyNjMiPnt1c2VySWQsIHBhc3N3b3JkfTwvdGV4dD48L2c+PGcgY2xhc3M9Im1lc3NhZ2UiIGRhdGEtcGFydGljaXBhbnQtMT0iU2VydmVyIiBkYXRhLXBhcnRpY2lwYW50LTI9IkRhdGFiYXNlIj48cG9seWdvbiBmaWxsPSIjMTgxODE4IiBwb2ludHM9IjQxMC45MDk0LDE4OC4xMjUsNDIwLjkwOTQsMTkyLjEyNSw0MTAuOTA5NCwxOTYuMTI1LDQxNC45MDk0LDE5Mi4xMjUiIHN0eWxlPSJzdHJva2U6IzE4MTgxODtzdHJva2Utd2lkdGg6MTsiLz48bGluZSBzdHlsZT0ic3Ryb2tlOiMxODE4MTg7c3Ryb2tlLXdpZHRoOjE7IiB4MT0iMjUyLjkwOTIiIHgyPSI0MTYuOTA5NCIgeTE9IjE5Mi4xMjUiIHkyPSIxOTIuMTI1Ii8+PHRleHQgZmlsbD0iIzAwMDAwMCIgZm9udC1mYW1pbHk9InNhbnMtc2VyaWYiIGZvbnQtc2l6ZT0iMTMiIGxlbmd0aEFkanVzdD0ic3BhY2luZyIgdGV4dExlbmd0aD0iNzguMDAwMSIgeD0iMjU5LjkwOTIiIHk9IjE4Ny4wNTkxIj4mIzEyNTE4OyYjMTI1NDA7JiMxMjQ3MDsmIzEyNTQwOyYjMjY5MDg7JiMzNTM4ODs8L3RleHQ+PC9nPjxnIGNsYXNzPSJtZXNzYWdlIiBkYXRhLXBhcnRpY2lwYW50LTE9IkRhdGFiYXNlIiBkYXRhLXBhcnRpY2lwYW50LTI9IlNlcnZlciI+PHBvbHlnb24gZmlsbD0iIzE4MTgxOCIgcG9pbnRzPSIyNjMuOTA5MiwyMTcuMjU3OCwyNTMuOTA5MiwyMjEuMjU3OCwyNjMuOTA5MiwyMjUuMjU3OCwyNTkuOTA5MiwyMjEuMjU3OCIgc3R5bGU9InN0cm9rZTojMTgxODE4O3N0cm9rZS13aWR0aDoxOyIvPjxsaW5lIHN0eWxlPSJzdHJva2U6IzE4MTgxODtzdHJva2Utd2lkdGg6MTtzdHJva2UtZGFzaGFycmF5OjIsMjsiIHgxPSIyNTcuOTA5MiIgeDI9IjQyMS45MDk0IiB5MT0iMjIxLjI1NzgiIHkyPSIyMjEuMjU3OCIvPjx0ZXh0IGZpbGw9IiMwMDAwMDAiIGZvbnQtZmFtaWx5PSJzYW5zLXNlcmlmIiBmb250LXNpemU9IjEzIiBsZW5ndGhBZGp1c3Q9InNwYWNpbmciIHRleHRMZW5ndGg9IjI5LjYzMDkiIHg9IjI2OS45MDkyIiB5PSIyMTYuMTkxOSI+VXNlcjwvdGV4dD48L2c+PGcgY2xhc3M9Im1lc3NhZ2UiIGRhdGEtcGFydGljaXBhbnQtMT0iU2VydmVyIiBkYXRhLXBhcnRpY2lwYW50LTI9IlNlcnZlciI+PGxpbmUgc3R5bGU9InN0cm9rZTojMTgxODE4O3N0cm9rZS13aWR0aDoxOyIgeDE9IjI1Mi45MDkyIiB4Mj0iMjk0LjkwOTIiIHkxPSIyNTAuMzkwNiIgeTI9IjI1MC4zOTA2Ii8+PGxpbmUgc3R5bGU9InN0cm9rZTojMTgxODE4O3N0cm9rZS13aWR0aDoxOyIgeDE9IjI5NC45MDkyIiB4Mj0iMjk0LjkwOTIiIHkxPSIyNTAuMzkwNiIgeTI9IjI2My4zOTA2Ii8+PGxpbmUgc3R5bGU9InN0cm9rZTojMTgxODE4O3N0cm9rZS13aWR0aDoxOyIgeDE9IjI1My45MDkyIiB4Mj0iMjk0LjkwOTIiIHkxPSIyNjMuMzkwNiIgeTI9IjI2My4zOTA2Ii8+PHBvbHlnb24gZmlsbD0iIzE4MTgxOCIgcG9pbnRzPSIyNjMuOTA5MiwyNTkuMzkwNiwyNTMuOTA5MiwyNjMuMzkwNiwyNjMuOTA5MiwyNjcuMzkwNiwyNTkuOTA5MiwyNjMuMzkwNiIgc3R5bGU9InN0cm9rZTojMTgxODE4O3N0cm9rZS13aWR0aDoxOyIvPjx0ZXh0IGZpbGw9IiMwMDAwMDAiIGZvbnQtZmFtaWx5PSJzYW5zLXNlcmlmIiBmb250LXNpemU9IjEzIiBsZW5ndGhBZGp1c3Q9InNwYWNpbmciIHRleHRMZW5ndGg9IjkxLjAwMDEiIHg9IjI1OS45MDkyIiB5PSIyNDUuMzI0NyI+JiMxMjQ5NzsmIzEyNDczOyYjMTI1Mjc7JiMxMjU0MDsmIzEyNDg5OyYjMjkwMzE7JiMyMTUxMjs8L3RleHQ+PC9nPjxnIGNsYXNzPSJtZXNzYWdlIiBkYXRhLXBhcnRpY2lwYW50LTE9IlNlcnZlciIgZGF0YS1wYXJ0aWNpcGFudC0yPSJTZXJ2ZXIiPjxsaW5lIHN0eWxlPSJzdHJva2U6IzE4MTgxODtzdHJva2Utd2lkdGg6MTsiIHgxPSIyNTIuOTA5MiIgeDI9IjI5NC45MDkyIiB5MT0iMjkyLjUyMzQiIHkyPSIyOTIuNTIzNCIvPjxsaW5lIHN0eWxlPSJzdHJva2U6IzE4MTgxODtzdHJva2Utd2lkdGg6MTsiIHgxPSIyOTQuOTA5MiIgeDI9IjI5NC45MDkyIiB5MT0iMjkyLjUyMzQiIHkyPSIzMDUuNTIzNCIvPjxsaW5lIHN0eWxlPSJzdHJva2U6IzE4MTgxODtzdHJva2Utd2lkdGg6MTsiIHgxPSIyNTMuOTA5MiIgeDI9IjI5NC45MDkyIiB5MT0iMzA1LjUyMzQiIHkyPSIzMDUuNTIzNCIvPjxwb2x5Z29uIGZpbGw9IiMxODE4MTgiIHBvaW50cz0iMjYzLjkwOTIsMzAxLjUyMzQsMjUzLjkwOTIsMzA1LjUyMzQsMjYzLjkwOTIsMzA5LjUyMzQsMjU5LjkwOTIsMzA1LjUyMzQiIHN0eWxlPSJzdHJva2U6IzE4MTgxODtzdHJva2Utd2lkdGg6MTsiLz48dGV4dCBmaWxsPSIjMDAwMDAwIiBmb250LWZhbWlseT0ic2Fucy1zZXJpZiIgZm9udC1zaXplPSIxMyIgbGVuZ3RoQWRqdXN0PSJzcGFjaW5nIiB0ZXh0TGVuZ3RoPSI1MC42Mjg5IiB4PSIyNTkuOTA5MiIgeT0iMjg3LjQ1NzUiPkpXVCYjMjk5ODM7JiMyNTEwNDs8L3RleHQ+PC9nPjxnIGNsYXNzPSJtZXNzYWdlIiBkYXRhLXBhcnRpY2lwYW50LTE9IlNlcnZlciIgZGF0YS1wYXJ0aWNpcGFudC0yPSJDbGllbnQiPjxwb2x5Z29uIGZpbGw9IiMxODE4MTgiIHBvaW50cz0iNDMuMjY1MSwzMzAuNjU2MywzMy4yNjUxLDMzNC42NTYzLDQzLjI2NTEsMzM4LjY1NjMsMzkuMjY1MSwzMzQuNjU2MyIgc3R5bGU9InN0cm9rZTojMTgxODE4O3N0cm9rZS13aWR0aDoxOyIvPjxsaW5lIHN0eWxlPSJzdHJva2U6IzE4MTgxODtzdHJva2Utd2lkdGg6MTtzdHJva2UtZGFzaGFycmF5OjIsMjsiIHgxPSIzNy4yNjUxIiB4Mj0iMjUxLjkwOTIiIHkxPSIzMzQuNjU2MyIgeTI9IjMzNC42NTYzIi8+PHRleHQgZmlsbD0iIzAwMDAwMCIgZm9udC1mYW1pbHk9InNhbnMtc2VyaWYiIGZvbnQtc2l6ZT0iMTMiIGxlbmd0aEFkanVzdD0ic3BhY2luZyIgdGV4dExlbmd0aD0iMTk0LjIwNjUiIHg9IjQ5LjI2NTEiIHk9IjMyOS41OTAzIj57YWNjZXNzVG9rZW4sIHJlZnJlc2hUb2tlbn08L3RleHQ+PC9nPjxyZWN0IGZpbGw9IiNFRUVFRUUiIGhlaWdodD0iMyIgc3R5bGU9InN0cm9rZTojRUVFRUVFO3N0cm9rZS13aWR0aDoxOyIgd2lkdGg9IjUwNC4wMDAzIiB4PSIwIiB5PSIzNjMuMjIyNyIvPjxsaW5lIHN0eWxlPSJzdHJva2U6IzAwMDAwMDtzdHJva2Utd2lkdGg6MTsiIHgxPSIwIiB4Mj0iNTA0LjAwMDMiIHkxPSIzNjMuMjIyNyIgeTI9IjM2My4yMjI3Ii8+PGxpbmUgc3R5bGU9InN0cm9rZTojMDAwMDAwO3N0cm9rZS13aWR0aDoxOyIgeDE9IjAiIHgyPSI1MDQuMDAwMyIgeTE9IjM2Ni4yMjI3IiB5Mj0iMzY2LjIyMjciLz48cmVjdCBmaWxsPSIjRUVFRUVFIiBoZWlnaHQ9IjIzLjEzMjgiIHN0eWxlPSJzdHJva2U6IzAwMDAwMDtzdHJva2Utd2lkdGg6MjsiIHdpZHRoPSI5OS40Nzc2IiB4PSIyMDIuMjYxMyIgeT0iMzUyLjY1NjMiLz48dGV4dCBmaWxsPSIjMDAwMDAwIiBmb250LWZhbWlseT0ic2Fucy1zZXJpZiIgZm9udC1zaXplPSIxMyIgZm9udC13ZWlnaHQ9ImJvbGQiIGxlbmd0aEFkanVzdD0ic3BhY2luZyIgdGV4dExlbmd0aD0iODAuOTUxNyIgeD0iMjA4LjI2MTMiIHk9IjM2OC43MjMxIj5BUEkgJiMxMjQ1MDsmIzEyNDYzOyYjMTI0NzU7JiMxMjQ3Mzs8L3RleHQ+PGcgY2xhc3M9Im1lc3NhZ2UiIGRhdGEtcGFydGljaXBhbnQtMT0iQ2xpZW50IiBkYXRhLXBhcnRpY2lwYW50LTI9IlNlcnZlciI+PHBvbHlnb24gZmlsbD0iIzE4MTgxOCIgcG9pbnRzPSIyNDAuOTA5Miw0MTguMDU0NywyNTAuOTA5Miw0MjIuMDU0NywyNDAuOTA5Miw0MjYuMDU0NywyNDQuOTA5Miw0MjIuMDU0NyIgc3R5bGU9InN0cm9rZTojMTgxODE4O3N0cm9rZS13aWR0aDoxOyIvPjxsaW5lIHN0eWxlPSJzdHJva2U6IzE4MTgxODtzdHJva2Utd2lkdGg6MTsiIHgxPSIzMi4yNjUxIiB4Mj0iMjQ2LjkwOTIiIHkxPSI0MjIuMDU0NyIgeTI9IjQyMi4wNTQ3Ii8+PHRleHQgZmlsbD0iIzAwMDAwMCIgZm9udC1mYW1pbHk9InNhbnMtc2VyaWYiIGZvbnQtc2l6ZT0iMTMiIGxlbmd0aEFkanVzdD0ic3BhY2luZyIgdGV4dExlbmd0aD0iMTEwLjY5MDQiIHg9IjM5LjI2NTEiIHk9IjQwMS44NTYiPkdFVCAvYXBpL2pvdXJuYWxzPC90ZXh0Pjx0ZXh0IGZpbGw9IiMwMDAwMDAiIGZvbnQtZmFtaWx5PSJzYW5zLXNlcmlmIiBmb250LXNpemU9IjEzIiBsZW5ndGhBZGp1c3Q9InNwYWNpbmciIHRleHRMZW5ndGg9IjE5Ni42NDQiIHg9IjM5LjI2NTEiIHk9IjQxNi45ODg4Ij5BdXRob3JpemF0aW9uOiBCZWFyZXIge3Rva2VufTwvdGV4dD48L2c+PGcgY2xhc3M9Im1lc3NhZ2UiIGRhdGEtcGFydGljaXBhbnQtMT0iU2VydmVyIiBkYXRhLXBhcnRpY2lwYW50LTI9IlNlcnZlciI+PGxpbmUgc3R5bGU9InN0cm9rZTojMTgxODE4O3N0cm9rZS13aWR0aDoxOyIgeDE9IjI1Mi45MDkyIiB4Mj0iMjk0LjkwOTIiIHkxPSI0NTEuMTg3NSIgeTI9IjQ1MS4xODc1Ii8+PGxpbmUgc3R5bGU9InN0cm9rZTojMTgxODE4O3N0cm9rZS13aWR0aDoxOyIgeDE9IjI5NC45MDkyIiB4Mj0iMjk0LjkwOTIiIHkxPSI0NTEuMTg3NSIgeTI9IjQ2NC4xODc1Ii8+PGxpbmUgc3R5bGU9InN0cm9rZTojMTgxODE4O3N0cm9rZS13aWR0aDoxOyIgeDE9IjI1My45MDkyIiB4Mj0iMjk0LjkwOTIiIHkxPSI0NjQuMTg3NSIgeTI9IjQ2NC4xODc1Ii8+PHBvbHlnb24gZmlsbD0iIzE4MTgxOCIgcG9pbnRzPSIyNjMuOTA5Miw0NjAuMTg3NSwyNTMuOTA5Miw0NjQuMTg3NSwyNjMuOTA5Miw0NjguMTg3NSwyNTkuOTA5Miw0NjQuMTg3NSIgc3R5bGU9InN0cm9rZTojMTgxODE4O3N0cm9rZS13aWR0aDoxOyIvPjx0ZXh0IGZpbGw9IiMwMDAwMDAiIGZvbnQtZmFtaWx5PSJzYW5zLXNlcmlmIiBmb250LXNpemU9IjEzIiBsZW5ndGhBZGp1c3Q9InNwYWNpbmciIHRleHRMZW5ndGg9Ijc4LjAwMDEiIHg9IjI1OS45MDkyIiB5PSI0NDYuMTIxNiI+JiMxMjQ4ODsmIzEyNTQwOyYjMTI0NjM7JiMxMjUzMTsmIzI2OTA4OyYjMzUzODg7PC90ZXh0PjwvZz48ZyBjbGFzcz0ibWVzc2FnZSIgZGF0YS1wYXJ0aWNpcGFudC0xPSJTZXJ2ZXIiIGRhdGEtcGFydGljaXBhbnQtMj0iU2VydmVyIj48bGluZSBzdHlsZT0ic3Ryb2tlOiMxODE4MTg7c3Ryb2tlLXdpZHRoOjE7IiB4MT0iMjUyLjkwOTIiIHgyPSIyOTQuOTA5MiIgeTE9IjQ5My4zMjAzIiB5Mj0iNDkzLjMyMDMiLz48bGluZSBzdHlsZT0ic3Ryb2tlOiMxODE4MTg7c3Ryb2tlLXdpZHRoOjE7IiB4MT0iMjk0LjkwOTIiIHgyPSIyOTQuOTA5MiIgeTE9IjQ5My4zMjAzIiB5Mj0iNTA2LjMyMDMiLz48bGluZSBzdHlsZT0ic3Ryb2tlOiMxODE4MTg7c3Ryb2tlLXdpZHRoOjE7IiB4MT0iMjUzLjkwOTIiIHgyPSIyOTQuOTA5MiIgeTE9IjUwNi4zMjAzIiB5Mj0iNTA2LjMyMDMiLz48cG9seWdvbiBmaWxsPSIjMTgxODE4IiBwb2ludHM9IjI2My45MDkyLDUwMi4zMjAzLDI1My45MDkyLDUwNi4zMjAzLDI2My45MDkyLDUxMC4zMjAzLDI1OS45MDkyLDUwNi4zMjAzIiBzdHlsZT0ic3Ryb2tlOiMxODE4MTg7c3Ryb2tlLXdpZHRoOjE7Ii8+PHRleHQgZmlsbD0iIzAwMDAwMCIgZm9udC1mYW1pbHk9InNhbnMtc2VyaWYiIGZvbnQtc2l6ZT0iMTMiIGxlbmd0aEFkanVzdD0ic3BhY2luZyIgdGV4dExlbmd0aD0iNzguMDAwMSIgeD0iMjU5LjkwOTIiIHk9IjQ4OC4yNTQ0Ij4mIzI3MTc3OyYjMzg0ODA7JiMxMjQ4MTsmIzEyNDU1OyYjMTI0ODM7JiMxMjQ2Mzs8L3RleHQ+PC9nPjxnIGNsYXNzPSJtZXNzYWdlIiBkYXRhLXBhcnRpY2lwYW50LTE9IlNlcnZlciIgZGF0YS1wYXJ0aWNpcGFudC0yPSJEYXRhYmFzZSI+PHBvbHlnb24gZmlsbD0iIzE4MTgxOCIgcG9pbnRzPSI0MTAuOTA5NCw1MzEuNDUzMSw0MjAuOTA5NCw1MzUuNDUzMSw0MTAuOTA5NCw1MzkuNDUzMSw0MTQuOTA5NCw1MzUuNDUzMSIgc3R5bGU9InN0cm9rZTojMTgxODE4O3N0cm9rZS13aWR0aDoxOyIvPjxsaW5lIHN0eWxlPSJzdHJva2U6IzE4MTgxODtzdHJva2Utd2lkdGg6MTsiIHgxPSIyNTIuOTA5MiIgeDI9IjQxNi45MDk0IiB5MT0iNTM1LjQ1MzEiIHkyPSI1MzUuNDUzMSIvPjx0ZXh0IGZpbGw9IiMwMDAwMDAiIGZvbnQtZmFtaWx5PSJzYW5zLXNlcmlmIiBmb250LXNpemU9IjEzIiBsZW5ndGhBZGp1c3Q9InNwYWNpbmciIHRleHRMZW5ndGg9IjY1LjAwMDEiIHg9IjI1OS45MDkyIiB5PSI1MzAuMzg3MiI+JiMxMjQ4NzsmIzEyNTQwOyYjMTI0Nzk7JiMyMTQ2MjsmIzI0NDcxOzwvdGV4dD48L2c+PGcgY2xhc3M9Im1lc3NhZ2UiIGRhdGEtcGFydGljaXBhbnQtMT0iRGF0YWJhc2UiIGRhdGEtcGFydGljaXBhbnQtMj0iU2VydmVyIj48cG9seWdvbiBmaWxsPSIjMTgxODE4IiBwb2ludHM9IjI2My45MDkyLDU2MC41ODU5LDI1My45MDkyLDU2NC41ODU5LDI2My45MDkyLDU2OC41ODU5LDI1OS45MDkyLDU2NC41ODU5IiBzdHlsZT0ic3Ryb2tlOiMxODE4MTg7c3Ryb2tlLXdpZHRoOjE7Ii8+PGxpbmUgc3R5bGU9InN0cm9rZTojMTgxODE4O3N0cm9rZS13aWR0aDoxO3N0cm9rZS1kYXNoYXJyYXk6MiwyOyIgeDE9IjI1Ny45MDkyIiB4Mj0iNDIxLjkwOTQiIHkxPSI1NjQuNTg1OSIgeTI9IjU2NC41ODU5Ii8+PHRleHQgZmlsbD0iIzAwMDAwMCIgZm9udC1mYW1pbHk9InNhbnMtc2VyaWYiIGZvbnQtc2l6ZT0iMTMiIGxlbmd0aEFkanVzdD0ic3BhY2luZyIgdGV4dExlbmd0aD0iMzkiIHg9IjI2OS45MDkyIiB5PSI1NTkuNTIiPiYjMTI0ODc7JiMxMjU0MDsmIzEyNDc5OzwvdGV4dD48L2c+PGcgY2xhc3M9Im1lc3NhZ2UiIGRhdGEtcGFydGljaXBhbnQtMT0iU2VydmVyIiBkYXRhLXBhcnRpY2lwYW50LTI9IkNsaWVudCI+PHBvbHlnb24gZmlsbD0iIzE4MTgxOCIgcG9pbnRzPSI0My4yNjUxLDU4OS43MTg4LDMzLjI2NTEsNTkzLjcxODgsNDMuMjY1MSw1OTcuNzE4OCwzOS4yNjUxLDU5My43MTg4IiBzdHlsZT0ic3Ryb2tlOiMxODE4MTg7c3Ryb2tlLXdpZHRoOjE7Ii8+PGxpbmUgc3R5bGU9InN0cm9rZTojMTgxODE4O3N0cm9rZS13aWR0aDoxO3N0cm9rZS1kYXNoYXJyYXk6MiwyOyIgeDE9IjM3LjI2NTEiIHgyPSIyNTEuOTA5MiIgeTE9IjU5My43MTg4IiB5Mj0iNTkzLjcxODgiLz48dGV4dCBmaWxsPSIjMDAwMDAwIiBmb250LWZhbWlseT0ic2Fucy1zZXJpZiIgZm9udC1zaXplPSIxMyIgbGVuZ3RoQWRqdXN0PSJzcGFjaW5nIiB0ZXh0TGVuZ3RoPSI2My4wMTk1IiB4PSI0OS4yNjUxIiB5PSI1ODguNjUyOCI+UmVzcG9uc2U8L3RleHQ+PC9nPjxyZWN0IGZpbGw9IiNFRUVFRUUiIGhlaWdodD0iMyIgc3R5bGU9InN0cm9rZTojRUVFRUVFO3N0cm9rZS13aWR0aDoxOyIgd2lkdGg9IjUwNC4wMDAzIiB4PSIwIiB5PSI2MjIuMjg1MiIvPjxsaW5lIHN0eWxlPSJzdHJva2U6IzAwMDAwMDtzdHJva2Utd2lkdGg6MTsiIHgxPSIwIiB4Mj0iNTA0LjAwMDMiIHkxPSI2MjIuMjg1MiIgeTI9IjYyMi4yODUyIi8+PGxpbmUgc3R5bGU9InN0cm9rZTojMDAwMDAwO3N0cm9rZS13aWR0aDoxOyIgeDE9IjAiIHgyPSI1MDQuMDAwMyIgeTE9IjYyNS4yODUyIiB5Mj0iNjI1LjI4NTIiLz48cmVjdCBmaWxsPSIjRUVFRUVFIiBoZWlnaHQ9IjIzLjEzMjgiIHN0eWxlPSJzdHJva2U6IzAwMDAwMDtzdHJva2Utd2lkdGg6MjsiIHdpZHRoPSIxNDguNTI2IiB4PSIxNzcuNzM3MSIgeT0iNjExLjcxODgiLz48dGV4dCBmaWxsPSIjMDAwMDAwIiBmb250LWZhbWlseT0ic2Fucy1zZXJpZiIgZm9udC1zaXplPSIxMyIgZm9udC13ZWlnaHQ9ImJvbGQiIGxlbmd0aEFkanVzdD0ic3BhY2luZyIgdGV4dExlbmd0aD0iMTMwLjAwMDIiIHg9IjE4My43MzcxIiB5PSI2MjcuNzg1NiI+JiMxMjQ4ODsmIzEyNTQwOyYjMTI0NjM7JiMxMjUzMTsmIzEyNTIyOyYjMTI1MDE7JiMxMjUyNDsmIzEyNDgzOyYjMTI0NzE7JiMxMjUxNzs8L3RleHQ+PGcgY2xhc3M9Im1lc3NhZ2UiIGRhdGEtcGFydGljaXBhbnQtMT0iQ2xpZW50IiBkYXRhLXBhcnRpY2lwYW50LTI9IlNlcnZlciI+PHBvbHlnb24gZmlsbD0iIzE4MTgxOCIgcG9pbnRzPSIyNDAuOTA5Miw2NzcuMTE3MiwyNTAuOTA5Miw2ODEuMTE3MiwyNDAuOTA5Miw2ODUuMTE3MiwyNDQuOTA5Miw2ODEuMTE3MiIgc3R5bGU9InN0cm9rZTojMTgxODE4O3N0cm9rZS13aWR0aDoxOyIvPjxsaW5lIHN0eWxlPSJzdHJva2U6IzE4MTgxODtzdHJva2Utd2lkdGg6MTsiIHgxPSIzMi4yNjUxIiB4Mj0iMjQ2LjkwOTIiIHkxPSI2ODEuMTE3MiIgeTI9IjY4MS4xMTcyIi8+PHRleHQgZmlsbD0iIzAwMDAwMCIgZm9udC1mYW1pbHk9InNhbnMtc2VyaWYiIGZvbnQtc2l6ZT0iMTMiIGxlbmd0aEFkanVzdD0ic3BhY2luZyIgdGV4dExlbmd0aD0iMTQ3LjE4MzEiIHg9IjM5LjI2NTEiIHk9IjY2MC45MTg1Ij5QT1NUIC9hcGkvYXV0aC9yZWZyZXNoPC90ZXh0Pjx0ZXh0IGZpbGw9IiMwMDAwMDAiIGZvbnQtZmFtaWx5PSJzYW5zLXNlcmlmIiBmb250LXNpemU9IjEzIiBsZW5ndGhBZGp1c3Q9InNwYWNpbmciIHRleHRMZW5ndGg9IjEwMi40NzY2IiB4PSIzOS4yNjUxIiB5PSI2NzYuMDUxMyI+e3JlZnJlc2hUb2tlbn08L3RleHQ+PC9nPjxnIGNsYXNzPSJtZXNzYWdlIiBkYXRhLXBhcnRpY2lwYW50LTE9IlNlcnZlciIgZGF0YS1wYXJ0aWNpcGFudC0yPSJTZXJ2ZXIiPjxsaW5lIHN0eWxlPSJzdHJva2U6IzE4MTgxODtzdHJva2Utd2lkdGg6MTsiIHgxPSIyNTIuOTA5MiIgeDI9IjI5NC45MDkyIiB5MT0iNzEwLjI1IiB5Mj0iNzEwLjI1Ii8+PGxpbmUgc3R5bGU9InN0cm9rZTojMTgxODE4O3N0cm9rZS13aWR0aDoxOyIgeDE9IjI5NC45MDkyIiB4Mj0iMjk0LjkwOTIiIHkxPSI3MTAuMjUiIHkyPSI3MjMuMjUiLz48bGluZSBzdHlsZT0ic3Ryb2tlOiMxODE4MTg7c3Ryb2tlLXdpZHRoOjE7IiB4MT0iMjUzLjkwOTIiIHgyPSIyOTQuOTA5MiIgeTE9IjcyMy4yNSIgeTI9IjcyMy4yNSIvPjxwb2x5Z29uIGZpbGw9IiMxODE4MTgiIHBvaW50cz0iMjYzLjkwOTIsNzE5LjI1LDI1My45MDkyLDcyMy4yNSwyNjMuOTA5Miw3MjcuMjUsMjU5LjkwOTIsNzIzLjI1IiBzdHlsZT0ic3Ryb2tlOiMxODE4MTg7c3Ryb2tlLXdpZHRoOjE7Ii8+PHRleHQgZmlsbD0iIzAwMDAwMCIgZm9udC1mYW1pbHk9InNhbnMtc2VyaWYiIGZvbnQtc2l6ZT0iMTMiIGxlbmd0aEFkanVzdD0ic3BhY2luZyIgdGV4dExlbmd0aD0iMTU2LjAwMDIiIHg9IjI1OS45MDkyIiB5PSI3MDUuMTg0MSI+JiMxMjUyMjsmIzEyNTAxOyYjMTI1MjQ7JiMxMjQ4MzsmIzEyNDcxOyYjMTI1MTc7JiMxMjQ4ODsmIzEyNTQwOyYjMTI0NjM7JiMxMjUzMTsmIzI2OTA4OyYjMzUzODg7PC90ZXh0PjwvZz48ZyBjbGFzcz0ibWVzc2FnZSIgZGF0YS1wYXJ0aWNpcGFudC0xPSJTZXJ2ZXIiIGRhdGEtcGFydGljaXBhbnQtMj0iU2VydmVyIj48bGluZSBzdHlsZT0ic3Ryb2tlOiMxODE4MTg7c3Ryb2tlLXdpZHRoOjE7IiB4MT0iMjUyLjkwOTIiIHgyPSIyOTQuOTA5MiIgeTE9Ijc1Mi4zODI4IiB5Mj0iNzUyLjM4MjgiLz48bGluZSBzdHlsZT0ic3Ryb2tlOiMxODE4MTg7c3Ryb2tlLXdpZHRoOjE7IiB4MT0iMjk0LjkwOTIiIHgyPSIyOTQuOTA5MiIgeTE9Ijc1Mi4zODI4IiB5Mj0iNzY1LjM4MjgiLz48bGluZSBzdHlsZT0ic3Ryb2tlOiMxODE4MTg7c3Ryb2tlLXdpZHRoOjE7IiB4MT0iMjUzLjkwOTIiIHgyPSIyOTQuOTA5MiIgeTE9Ijc2NS4zODI4IiB5Mj0iNzY1LjM4MjgiLz48cG9seWdvbiBmaWxsPSIjMTgxODE4IiBwb2ludHM9IjI2My45MDkyLDc2MS4zODI4LDI1My45MDkyLDc2NS4zODI4LDI2My45MDkyLDc2OS4zODI4LDI1OS45MDkyLDc2NS4zODI4IiBzdHlsZT0ic3Ryb2tlOiMxODE4MTg7c3Ryb2tlLXdpZHRoOjE7Ii8+PHRleHQgZmlsbD0iIzAwMDAwMCIgZm9udC1mYW1pbHk9InNhbnMtc2VyaWYiIGZvbnQtc2l6ZT0iMTMiIGxlbmd0aEFkanVzdD0ic3BhY2luZyIgdGV4dExlbmd0aD0iODkuNjI5IiB4PSIyNTkuOTA5MiIgeT0iNzQ3LjMxNjkiPiYjMjYwMzI7JiMxMjM3NTsmIzEyMzU2O0pXVCYjMjk5ODM7JiMyNTEwNDs8L3RleHQ+PC9nPjxnIGNsYXNzPSJtZXNzYWdlIiBkYXRhLXBhcnRpY2lwYW50LTE9IlNlcnZlciIgZGF0YS1wYXJ0aWNpcGFudC0yPSJDbGllbnQiPjxwb2x5Z29uIGZpbGw9IiMxODE4MTgiIHBvaW50cz0iNDMuMjY1MSw3OTAuNTE1NiwzMy4yNjUxLDc5NC41MTU2LDQzLjI2NTEsNzk4LjUxNTYsMzkuMjY1MSw3OTQuNTE1NiIgc3R5bGU9InN0cm9rZTojMTgxODE4O3N0cm9rZS13aWR0aDoxOyIvPjxsaW5lIHN0eWxlPSJzdHJva2U6IzE4MTgxODtzdHJva2Utd2lkdGg6MTtzdHJva2UtZGFzaGFycmF5OjIsMjsiIHgxPSIzNy4yNjUxIiB4Mj0iMjUxLjkwOTIiIHkxPSI3OTQuNTE1NiIgeTI9Ijc5NC41MTU2Ii8+PHRleHQgZmlsbD0iIzAwMDAwMCIgZm9udC1mYW1pbHk9InNhbnMtc2VyaWYiIGZvbnQtc2l6ZT0iMTMiIGxlbmd0aEFkanVzdD0ic3BhY2luZyIgdGV4dExlbmd0aD0iMTAwLjAwNzMiIHg9IjQ5LjI2NTEiIHk9Ijc4OS40NDk3Ij57YWNjZXNzVG9rZW59PC90ZXh0PjwvZz48cGF0aCBkPSJNMjU3LDgwNy41MTU2IEwyNTcsODYyLjUxNTYgTDQ5OSw4NjIuNTE1NiBMNDk5LDgxNy41MTU2IEw0ODksODA3LjUxNTYgTDI1Nyw4MDcuNTE1NiIgZmlsbD0iI0ZFRkZERCIgc3R5bGU9InN0cm9rZTojMTgxODE4O3N0cm9rZS13aWR0aDowLjU7Ii8+PHBhdGggZD0iTTQ4OSw4MDcuNTE1NiBMNDg5LDgxNy41MTU2IEw0OTksODE3LjUxNTYgTDQ4OSw4MDcuNTE1NiIgZmlsbD0iI0ZFRkZERCIgc3R5bGU9InN0cm9rZTojMTgxODE4O3N0cm9rZS13aWR0aDowLjU7Ii8+PHRleHQgZmlsbD0iIzAwMDAwMCIgZm9udC1mYW1pbHk9InNhbnMtc2VyaWYiIGZvbnQtc2l6ZT0iMTMiIGxlbmd0aEFkanVzdD0ic3BhY2luZyIgdGV4dExlbmd0aD0iMjA4LjAwMDIiIHg9IjI2MyIgeT0iODI0LjU4MjUiPiYjMTI0Njk7JiMxMjU0MDsmIzEyNDk2OyYjMTI1NDA7JiMxMjM5OTsmIzEyNDc1OyYjMTI0ODM7JiMxMjQ3MTsmIzEyNTE5OyYjMTI1MzE7JiMxMjQzNDsmIzIwNDQ1OyYjMjUzNDU7JiMxMjM3NTsmIzEyMzk0OyYjMTIzNTY7PC90ZXh0Pjx0ZXh0IGZpbGw9IiMwMDAwMDAiIGZvbnQtZmFtaWx5PSJzYW5zLXNlcmlmIiBmb250LXNpemU9IjEzIiBsZW5ndGhBZGp1c3Q9InNwYWNpbmciIHRleHRMZW5ndGg9IjE5NS4wMDAyIiB4PSIyNjMiIHk9IjgzOS43MTUzIj4mIzEyNDg4OyYjMTI1NDA7JiMxMjQ2MzsmIzEyNTMxOyYjMTIzOTE7JiMzNTQ2OTsmIzM1Mzg4OyYjMjkzNjY7JiMyNDkwNzsmIzEyMzkyOyYjMjcxNzc7JiMzODQ4MDsmIzEyNDM0OyYjMjEwMjg7JiMyNjAyOTs8L3RleHQ+PHRleHQgZmlsbD0iIzAwMDAwMCIgZm9udC1mYW1pbHk9InNhbnMtc2VyaWYiIGZvbnQtc2l6ZT0iMTMiIGxlbmd0aEFkanVzdD0ic3BhY2luZyIgdGV4dExlbmd0aD0iMjIxLjAwMDMiIHg9IjI2MyIgeT0iODU0Ljg0ODEiPiYjMzYwMDE7JiMyMTIwOTsmIzEyNDg3OyYjMTI1NDA7JiMxMjQ3OTsmIzEyNDA4OyYjMTIzOTg7JiMxMjQ1MDsmIzEyNDYzOyYjMTI0NzU7JiMxMjQ3MzsmIzEyNDM0OyYjMjE0Mjc7JiMyNjY4NDsmIzEyMzk1OyYjMjEwNDY7JiMyNDQ4MTs8L3RleHQ+PCEtLVNSQz1bWlBGVEpYRDE1Q1Zsdm9kYzBJMnpScjhJXzhaMTZ1WktVQ0ZEczB2cWpQZFRwNHVyaVU1WVBxR05HUXI0SXAwUW1MSFJnbVluZU1aU21DQ1NUYmtsVTBMZGp6a3JEVGthRHZGQ3BGZHlkVnlIWFlYSjNGOE5nMlVXRjUwa2c2X3dzY3lfeHhTeVNCdTc5bXg4eEtsRnhWeXV5QlZzQmhvdF9QT0J5ZEplaWRfZlJJOWE0SXdDV2M0SDlsM0xpYTZQNjdqUWZsbTF2TURGcnVXV1R1YkQ0U2hiQ0FYM2FDU1c2dzB3RTlUM1duMXVUWXhzbjVjeWpCWVNubmJZNkhiSTRRTENzTG1wczBnaExjcEE1dWVwczJBc19UM2FuTktLVXNaVk9HaGozVWZwczl0aXdaRGVsREVqZVVIdFRaSkRSSHJsOTRKbzNrZkxyRjVIMTZjcGp6N3FRc3dRdVNxeC1UeGgzdTVSSXB4clJ6bkY1YlQ5ZUsxakVzX1Vmc202U3hoQWdMc0FSa2lIWUZjYjFKc0NabzJGR0Z4TTJJVjBrNzR6UGQ3Rmg3MTZvbE9BY3pUS0o2dXk4aThtTUhQVmVPSGhxd2VPbjR4am84c0d3OHV3Q1A4S2d3M3J2U3pVM1BHTUdIRUtxa1FKMDMtRGVmdHhCLWwtc1V1NGtlYkxBZm5SckJQQ2JhWllOdGNXc2czVVhDOENBcFc1ek1hd2FTSHlqS3A2SVFWSS0zXzViN3Bnbi0zaVdsRHUtaGRoSUpESktDb0RqUEIwdmtmbUVxMlVIRUFnWFFTSjJJMmtmSGFvYTNpTnYtIC0zUklUQXJ6T1BxSFdZZnBiT3NUd3BSaDJuMUt1aGRmcFN5VHI2SzN6NFdfckQ5VzNFSnh0VGVyZUJKTHpxV2RzVF9BbGxUbHNwMHFIUDRPVXJfV0swXS0tPjwvZz48L3N2Zz4=" class="uml" alt="uml diagram" title="" /></p>
<hr />
<h2 id="255">25.5 認証コントローラの実装<a class="headerlink" href="#255" title="Permanent link">&para;</a></h2>
<h3 id="api">認証API<a class="headerlink" href="#api" title="Permanent link">&para;</a></h3>
<div class="highlight"><pre><span></span><code><span class="kn">package</span><span class="w"> </span><span class="nn">com.example.accounting.presentation.api</span><span class="p">;</span>

<span class="kn">import</span><span class="w"> </span><span class="nn">com.example.accounting.application.AuthService</span><span class="p">;</span>
<span class="kn">import</span><span class="w"> </span><span class="nn">com.example.accounting.application.dto.AuthRequest</span><span class="p">;</span>
<span class="kn">import</span><span class="w"> </span><span class="nn">com.example.accounting.application.dto.AuthResult</span><span class="p">;</span>
<span class="kn">import</span><span class="w"> </span><span class="nn">com.example.accounting.application.dto.RefreshRequest</span><span class="p">;</span>
<span class="kn">import</span><span class="w"> </span><span class="nn">lombok.RequiredArgsConstructor</span><span class="p">;</span>
<span class="kn">import</span><span class="w"> </span><span class="nn">org.springframework.http.ResponseEntity</span><span class="p">;</span>
<span class="kn">import</span><span class="w"> </span><span class="nn">org.springframework.web.bind.annotation.*</span><span class="p">;</span>

<span class="nd">@RestController</span>
<span class="nd">@RequestMapping</span><span class="p">(</span><span class="s">&quot;/api/auth&quot;</span><span class="p">)</span>
<span class="nd">@RequiredArgsConstructor</span>
<span class="kd">public</span><span class="w"> </span><span class="kd">class</span> <span class="nc">AuthController</span><span class="w"> </span><span class="p">{</span>

<span class="w">    </span><span class="kd">private</span><span class="w"> </span><span class="kd">final</span><span class="w"> </span><span class="n">AuthService</span><span class="w"> </span><span class="n">authService</span><span class="p">;</span>

<span class="w">    </span><span class="cm">/**</span>
<span class="cm">     * ログイン</span>
<span class="cm">     */</span>
<span class="w">    </span><span class="nd">@PostMapping</span><span class="p">(</span><span class="s">&quot;/login&quot;</span><span class="p">)</span>
<span class="w">    </span><span class="kd">public</span><span class="w"> </span><span class="n">ResponseEntity</span><span class="o">&lt;</span><span class="n">AuthResult</span><span class="o">&gt;</span><span class="w"> </span><span class="nf">login</span><span class="p">(</span><span class="nd">@RequestBody</span><span class="w"> </span><span class="n">AuthRequest</span><span class="w"> </span><span class="n">request</span><span class="p">)</span><span class="w"> </span><span class="p">{</span>
<span class="w">        </span><span class="n">AuthResult</span><span class="w"> </span><span class="n">result</span><span class="w"> </span><span class="o">=</span><span class="w"> </span><span class="n">authService</span><span class="p">.</span><span class="na">authenticate</span><span class="p">(</span>
<span class="w">            </span><span class="n">request</span><span class="p">.</span><span class="na">getUserId</span><span class="p">(),</span>
<span class="w">            </span><span class="n">request</span><span class="p">.</span><span class="na">getPassword</span><span class="p">()</span>
<span class="w">        </span><span class="p">);</span>

<span class="w">        </span><span class="k">if</span><span class="w"> </span><span class="p">(</span><span class="n">result</span><span class="p">.</span><span class="na">isSuccess</span><span class="p">())</span><span class="w"> </span><span class="p">{</span>
<span class="w">            </span><span class="k">return</span><span class="w"> </span><span class="n">ResponseEntity</span><span class="p">.</span><span class="na">ok</span><span class="p">(</span><span class="n">result</span><span class="p">);</span>
<span class="w">        </span><span class="p">}</span><span class="w"> </span><span class="k">else</span><span class="w"> </span><span class="p">{</span>
<span class="w">            </span><span class="k">return</span><span class="w"> </span><span class="n">ResponseEntity</span><span class="p">.</span><span class="na">status</span><span class="p">(</span><span class="mi">401</span><span class="p">).</span><span class="na">body</span><span class="p">(</span><span class="n">result</span><span class="p">);</span>
<span class="w">        </span><span class="p">}</span>
<span class="w">    </span><span class="p">}</span>

<span class="w">    </span><span class="cm">/**</span>
<span class="cm">     * トークンリフレッシュ</span>
<span class="cm">     */</span>
<span class="w">    </span><span class="nd">@PostMapping</span><span class="p">(</span><span class="s">&quot;/refresh&quot;</span><span class="p">)</span>
<span class="w">    </span><span class="kd">public</span><span class="w"> </span><span class="n">ResponseEntity</span><span class="o">&lt;</span><span class="n">AuthResult</span><span class="o">&gt;</span><span class="w"> </span><span class="nf">refresh</span><span class="p">(</span>
<span class="w">            </span><span class="nd">@RequestBody</span><span class="w"> </span><span class="n">RefreshRequest</span><span class="w"> </span><span class="n">request</span><span class="p">)</span><span class="w"> </span><span class="p">{</span>
<span class="w">        </span><span class="n">AuthResult</span><span class="w"> </span><span class="n">result</span><span class="w"> </span><span class="o">=</span><span class="w"> </span><span class="n">authService</span><span class="p">.</span><span class="na">refreshToken</span><span class="p">(</span><span class="n">request</span><span class="p">.</span><span class="na">getRefreshToken</span><span class="p">());</span>

<span class="w">        </span><span class="k">if</span><span class="w"> </span><span class="p">(</span><span class="n">result</span><span class="p">.</span><span class="na">isSuccess</span><span class="p">())</span><span class="w"> </span><span class="p">{</span>
<span class="w">            </span><span class="k">return</span><span class="w"> </span><span class="n">ResponseEntity</span><span class="p">.</span><span class="na">ok</span><span class="p">(</span><span class="n">result</span><span class="p">);</span>
<span class="w">        </span><span class="p">}</span><span class="w"> </span><span class="k">else</span><span class="w"> </span><span class="p">{</span>
<span class="w">            </span><span class="k">return</span><span class="w"> </span><span class="n">ResponseEntity</span><span class="p">.</span><span class="na">status</span><span class="p">(</span><span class="mi">401</span><span class="p">).</span><span class="na">body</span><span class="p">(</span><span class="n">result</span><span class="p">);</span>
<span class="w">        </span><span class="p">}</span>
<span class="w">    </span><span class="p">}</span>

<span class="w">    </span><span class="cm">/**</span>
<span class="cm">     * ログアウト</span>
<span class="cm">     */</span>
<span class="w">    </span><span class="nd">@PostMapping</span><span class="p">(</span><span class="s">&quot;/logout&quot;</span><span class="p">)</span>
<span class="w">    </span><span class="kd">public</span><span class="w"> </span><span class="n">ResponseEntity</span><span class="o">&lt;</span><span class="n">Void</span><span class="o">&gt;</span><span class="w"> </span><span class="nf">logout</span><span class="p">(</span><span class="nd">@RequestHeader</span><span class="p">(</span><span class="s">&quot;Authorization&quot;</span><span class="p">)</span><span class="w"> </span><span class="n">String</span><span class="w"> </span><span class="n">token</span><span class="p">)</span><span class="w"> </span><span class="p">{</span>
<span class="w">        </span><span class="c1">// JWTはステートレスなので、クライアント側でトークンを削除</span>
<span class="w">        </span><span class="c1">// 必要に応じてブラックリストに追加</span>
<span class="w">        </span><span class="k">return</span><span class="w"> </span><span class="n">ResponseEntity</span><span class="p">.</span><span class="na">ok</span><span class="p">().</span><span class="na">build</span><span class="p">();</span>
<span class="w">    </span><span class="p">}</span>

<span class="w">    </span><span class="cm">/**</span>
<span class="cm">     * パスワード変更</span>
<span class="cm">     */</span>
<span class="w">    </span><span class="nd">@PostMapping</span><span class="p">(</span><span class="s">&quot;/password&quot;</span><span class="p">)</span>
<span class="w">    </span><span class="kd">public</span><span class="w"> </span><span class="n">ResponseEntity</span><span class="o">&lt;</span><span class="n">Void</span><span class="o">&gt;</span><span class="w"> </span><span class="nf">changePassword</span><span class="p">(</span>
<span class="w">            </span><span class="nd">@RequestBody</span><span class="w"> </span><span class="n">PasswordChangeRequest</span><span class="w"> </span><span class="n">request</span><span class="p">,</span>
<span class="w">            </span><span class="nd">@AuthenticationPrincipal</span><span class="w"> </span><span class="n">String</span><span class="w"> </span><span class="n">userId</span><span class="p">)</span><span class="w"> </span><span class="p">{</span>
<span class="w">        </span><span class="n">authService</span><span class="p">.</span><span class="na">changePassword</span><span class="p">(</span>
<span class="w">            </span><span class="n">userId</span><span class="p">,</span>
<span class="w">            </span><span class="n">request</span><span class="p">.</span><span class="na">getCurrentPassword</span><span class="p">(),</span>
<span class="w">            </span><span class="n">request</span><span class="p">.</span><span class="na">getNewPassword</span><span class="p">()</span>
<span class="w">        </span><span class="p">);</span>
<span class="w">        </span><span class="k">return</span><span class="w"> </span><span class="n">ResponseEntity</span><span class="p">.</span><span class="na">ok</span><span class="p">().</span><span class="na">build</span><span class="p">();</span>
<span class="w">    </span><span class="p">}</span>
<span class="p">}</span>
</code></pre></div>
<h3 id="_15">認証サービス<a class="headerlink" href="#_15" title="Permanent link">&para;</a></h3>
<div class="highlight"><pre><span></span><code><span class="kn">package</span><span class="w"> </span><span class="nn">com.example.accounting.application</span><span class="p">;</span>

<span class="kn">import</span><span class="w"> </span><span class="nn">com.example.accounting.application.dto.AuthResult</span><span class="p">;</span>
<span class="kn">import</span><span class="w"> </span><span class="nn">com.example.accounting.domain.model.user.*</span><span class="p">;</span>
<span class="kn">import</span><span class="w"> </span><span class="nn">com.example.accounting.infrastructure.security.JwtTokenProvider</span><span class="p">;</span>
<span class="kn">import</span><span class="w"> </span><span class="nn">lombok.RequiredArgsConstructor</span><span class="p">;</span>
<span class="kn">import</span><span class="w"> </span><span class="nn">org.springframework.stereotype.Service</span><span class="p">;</span>
<span class="kn">import</span><span class="w"> </span><span class="nn">org.springframework.transaction.annotation.Transactional</span><span class="p">;</span>

<span class="kn">import</span><span class="w"> </span><span class="nn">java.util.Optional</span><span class="p">;</span>

<span class="nd">@Service</span>
<span class="nd">@RequiredArgsConstructor</span>
<span class="kd">public</span><span class="w"> </span><span class="kd">class</span> <span class="nc">AuthService</span><span class="w"> </span><span class="p">{</span>

<span class="w">    </span><span class="kd">private</span><span class="w"> </span><span class="kd">final</span><span class="w"> </span><span class="n">UserRepository</span><span class="w"> </span><span class="n">userRepository</span><span class="p">;</span>
<span class="w">    </span><span class="kd">private</span><span class="w"> </span><span class="kd">final</span><span class="w"> </span><span class="n">JwtTokenProvider</span><span class="w"> </span><span class="n">jwtTokenProvider</span><span class="p">;</span>
<span class="w">    </span><span class="kd">private</span><span class="w"> </span><span class="kd">final</span><span class="w"> </span><span class="n">RefreshTokenRepository</span><span class="w"> </span><span class="n">refreshTokenRepository</span><span class="p">;</span>

<span class="w">    </span><span class="cm">/**</span>
<span class="cm">     * 認証処理</span>
<span class="cm">     */</span>
<span class="w">    </span><span class="nd">@Transactional</span>
<span class="w">    </span><span class="kd">public</span><span class="w"> </span><span class="n">AuthResult</span><span class="w"> </span><span class="nf">authenticate</span><span class="p">(</span><span class="n">String</span><span class="w"> </span><span class="n">userId</span><span class="p">,</span><span class="w"> </span><span class="n">String</span><span class="w"> </span><span class="n">rawPassword</span><span class="p">)</span><span class="w"> </span><span class="p">{</span>
<span class="w">        </span><span class="c1">// ユーザー検索</span>
<span class="w">        </span><span class="n">Optional</span><span class="o">&lt;</span><span class="n">User</span><span class="o">&gt;</span><span class="w"> </span><span class="n">userOpt</span><span class="w"> </span><span class="o">=</span><span class="w"> </span><span class="n">userRepository</span><span class="p">.</span><span class="na">findByUserId</span><span class="p">(</span><span class="n">UserId</span><span class="p">.</span><span class="na">of</span><span class="p">(</span><span class="n">userId</span><span class="p">));</span>

<span class="w">        </span><span class="k">if</span><span class="w"> </span><span class="p">(</span><span class="n">userOpt</span><span class="p">.</span><span class="na">isEmpty</span><span class="p">())</span><span class="w"> </span><span class="p">{</span>
<span class="w">            </span><span class="k">return</span><span class="w"> </span><span class="n">AuthResult</span><span class="p">.</span><span class="na">failure</span><span class="p">(</span><span class="s">&quot;ユーザーIDまたはパスワードが正しくありません&quot;</span><span class="p">);</span>
<span class="w">        </span><span class="p">}</span>

<span class="w">        </span><span class="n">User</span><span class="w"> </span><span class="n">user</span><span class="w"> </span><span class="o">=</span><span class="w"> </span><span class="n">userOpt</span><span class="p">.</span><span class="na">get</span><span class="p">();</span>

<span class="w">        </span><span class="c1">// ログイン可能かチェック</span>
<span class="w">        </span><span class="k">if</span><span class="w"> </span><span class="p">(</span><span class="o">!</span><span class="n">user</span><span class="p">.</span><span class="na">canLogin</span><span class="p">())</span><span class="w"> </span><span class="p">{</span>
<span class="w">            </span><span class="k">if</span><span class="w"> </span><span class="p">(</span><span class="n">user</span><span class="p">.</span><span class="na">getStatus</span><span class="p">()</span><span class="w"> </span><span class="o">==</span><span class="w"> </span><span class="n">UserStatus</span><span class="p">.</span><span class="na">LOCKED</span><span class="p">)</span><span class="w"> </span><span class="p">{</span>
<span class="w">                </span><span class="k">return</span><span class="w"> </span><span class="n">AuthResult</span><span class="p">.</span><span class="na">failure</span><span class="p">(</span><span class="s">&quot;アカウントがロックされています&quot;</span><span class="p">);</span>
<span class="w">            </span><span class="p">}</span>
<span class="w">            </span><span class="k">return</span><span class="w"> </span><span class="n">AuthResult</span><span class="p">.</span><span class="na">failure</span><span class="p">(</span><span class="s">&quot;アカウントが無効です&quot;</span><span class="p">);</span>
<span class="w">        </span><span class="p">}</span>

<span class="w">        </span><span class="c1">// パスワード検証</span>
<span class="w">        </span><span class="k">if</span><span class="w"> </span><span class="p">(</span><span class="o">!</span><span class="n">user</span><span class="p">.</span><span class="na">getPassword</span><span class="p">().</span><span class="na">matches</span><span class="p">(</span><span class="n">rawPassword</span><span class="p">))</span><span class="w"> </span><span class="p">{</span>
<span class="w">            </span><span class="c1">// ログイン失敗回数をカウント（将来的にロック機能を実装）</span>
<span class="w">            </span><span class="k">return</span><span class="w"> </span><span class="n">AuthResult</span><span class="p">.</span><span class="na">failure</span><span class="p">(</span><span class="s">&quot;ユーザーIDまたはパスワードが正しくありません&quot;</span><span class="p">);</span>
<span class="w">        </span><span class="p">}</span>

<span class="w">        </span><span class="c1">// JWTトークン生成</span>
<span class="w">        </span><span class="n">String</span><span class="w"> </span><span class="n">accessToken</span><span class="w"> </span><span class="o">=</span><span class="w"> </span><span class="n">jwtTokenProvider</span><span class="p">.</span><span class="na">createToken</span><span class="p">(</span>
<span class="w">            </span><span class="n">user</span><span class="p">.</span><span class="na">getUserId</span><span class="p">().</span><span class="na">getValue</span><span class="p">(),</span>
<span class="w">            </span><span class="n">user</span><span class="p">.</span><span class="na">getRole</span><span class="p">()</span>
<span class="w">        </span><span class="p">);</span>

<span class="w">        </span><span class="c1">// リフレッシュトークン生成</span>
<span class="w">        </span><span class="n">String</span><span class="w"> </span><span class="n">refreshToken</span><span class="w"> </span><span class="o">=</span><span class="w"> </span><span class="n">jwtTokenProvider</span><span class="p">.</span><span class="na">createRefreshToken</span><span class="p">(</span>
<span class="w">            </span><span class="n">user</span><span class="p">.</span><span class="na">getUserId</span><span class="p">().</span><span class="na">getValue</span><span class="p">()</span>
<span class="w">        </span><span class="p">);</span>
<span class="w">        </span><span class="n">refreshTokenRepository</span><span class="p">.</span><span class="na">save</span><span class="p">(</span>
<span class="w">            </span><span class="k">new</span><span class="w"> </span><span class="n">RefreshToken</span><span class="p">(</span><span class="n">user</span><span class="p">.</span><span class="na">getUserId</span><span class="p">(),</span><span class="w"> </span><span class="n">refreshToken</span><span class="p">)</span>
<span class="w">        </span><span class="p">);</span>

<span class="w">        </span><span class="k">return</span><span class="w"> </span><span class="n">AuthResult</span><span class="p">.</span><span class="na">success</span><span class="p">(</span>
<span class="w">            </span><span class="n">user</span><span class="p">.</span><span class="na">getUserId</span><span class="p">().</span><span class="na">getValue</span><span class="p">(),</span>
<span class="w">            </span><span class="n">user</span><span class="p">.</span><span class="na">getRole</span><span class="p">(),</span>
<span class="w">            </span><span class="n">accessToken</span><span class="p">,</span>
<span class="w">            </span><span class="n">refreshToken</span>
<span class="w">        </span><span class="p">);</span>
<span class="w">    </span><span class="p">}</span>

<span class="w">    </span><span class="cm">/**</span>
<span class="cm">     * トークンリフレッシュ</span>
<span class="cm">     */</span>
<span class="w">    </span><span class="nd">@Transactional</span>
<span class="w">    </span><span class="kd">public</span><span class="w"> </span><span class="n">AuthResult</span><span class="w"> </span><span class="nf">refreshToken</span><span class="p">(</span><span class="n">String</span><span class="w"> </span><span class="n">refreshToken</span><span class="p">)</span><span class="w"> </span><span class="p">{</span>
<span class="w">        </span><span class="k">if</span><span class="w"> </span><span class="p">(</span><span class="o">!</span><span class="n">jwtTokenProvider</span><span class="p">.</span><span class="na">validateRefreshToken</span><span class="p">(</span><span class="n">refreshToken</span><span class="p">))</span><span class="w"> </span><span class="p">{</span>
<span class="w">            </span><span class="k">return</span><span class="w"> </span><span class="n">AuthResult</span><span class="p">.</span><span class="na">failure</span><span class="p">(</span><span class="s">&quot;リフレッシュトークンが無効です&quot;</span><span class="p">);</span>
<span class="w">        </span><span class="p">}</span>

<span class="w">        </span><span class="n">String</span><span class="w"> </span><span class="n">userId</span><span class="w"> </span><span class="o">=</span><span class="w"> </span><span class="n">jwtTokenProvider</span><span class="p">.</span><span class="na">getUserIdFromRefreshToken</span><span class="p">(</span><span class="n">refreshToken</span><span class="p">);</span>

<span class="w">        </span><span class="c1">// リフレッシュトークンがDBに存在するか確認</span>
<span class="w">        </span><span class="k">if</span><span class="w"> </span><span class="p">(</span><span class="o">!</span><span class="n">refreshTokenRepository</span><span class="p">.</span><span class="na">exists</span><span class="p">(</span><span class="n">UserId</span><span class="p">.</span><span class="na">of</span><span class="p">(</span><span class="n">userId</span><span class="p">),</span><span class="w"> </span><span class="n">refreshToken</span><span class="p">))</span><span class="w"> </span><span class="p">{</span>
<span class="w">            </span><span class="k">return</span><span class="w"> </span><span class="n">AuthResult</span><span class="p">.</span><span class="na">failure</span><span class="p">(</span><span class="s">&quot;リフレッシュトークンが無効です&quot;</span><span class="p">);</span>
<span class="w">        </span><span class="p">}</span>

<span class="w">        </span><span class="c1">// ユーザー取得</span>
<span class="w">        </span><span class="n">User</span><span class="w"> </span><span class="n">user</span><span class="w"> </span><span class="o">=</span><span class="w"> </span><span class="n">userRepository</span><span class="p">.</span><span class="na">findByUserId</span><span class="p">(</span><span class="n">UserId</span><span class="p">.</span><span class="na">of</span><span class="p">(</span><span class="n">userId</span><span class="p">))</span>
<span class="w">            </span><span class="p">.</span><span class="na">orElseThrow</span><span class="p">(()</span><span class="w"> </span><span class="o">-&gt;</span><span class="w"> </span><span class="k">new</span><span class="w"> </span><span class="n">UserException</span><span class="p">(</span><span class="s">&quot;ユーザーが見つかりません&quot;</span><span class="p">));</span>

<span class="w">        </span><span class="c1">// 新しいアクセストークン生成</span>
<span class="w">        </span><span class="n">String</span><span class="w"> </span><span class="n">newAccessToken</span><span class="w"> </span><span class="o">=</span><span class="w"> </span><span class="n">jwtTokenProvider</span><span class="p">.</span><span class="na">createToken</span><span class="p">(</span>
<span class="w">            </span><span class="n">user</span><span class="p">.</span><span class="na">getUserId</span><span class="p">().</span><span class="na">getValue</span><span class="p">(),</span>
<span class="w">            </span><span class="n">user</span><span class="p">.</span><span class="na">getRole</span><span class="p">()</span>
<span class="w">        </span><span class="p">);</span>

<span class="w">        </span><span class="k">return</span><span class="w"> </span><span class="n">AuthResult</span><span class="p">.</span><span class="na">success</span><span class="p">(</span>
<span class="w">            </span><span class="n">userId</span><span class="p">,</span>
<span class="w">            </span><span class="n">user</span><span class="p">.</span><span class="na">getRole</span><span class="p">(),</span>
<span class="w">            </span><span class="n">newAccessToken</span><span class="p">,</span>
<span class="w">            </span><span class="n">refreshToken</span>
<span class="w">        </span><span class="p">);</span>
<span class="w">    </span><span class="p">}</span>

<span class="w">    </span><span class="cm">/**</span>
<span class="cm">     * パスワード変更</span>
<span class="cm">     */</span>
<span class="w">    </span><span class="nd">@Transactional</span>
<span class="w">    </span><span class="kd">public</span><span class="w"> </span><span class="kt">void</span><span class="w"> </span><span class="nf">changePassword</span><span class="p">(</span>
<span class="w">            </span><span class="n">String</span><span class="w"> </span><span class="n">userId</span><span class="p">,</span>
<span class="w">            </span><span class="n">String</span><span class="w"> </span><span class="n">currentPassword</span><span class="p">,</span>
<span class="w">            </span><span class="n">String</span><span class="w"> </span><span class="n">newPassword</span><span class="p">)</span><span class="w"> </span><span class="p">{</span>
<span class="w">        </span><span class="n">User</span><span class="w"> </span><span class="n">user</span><span class="w"> </span><span class="o">=</span><span class="w"> </span><span class="n">userRepository</span><span class="p">.</span><span class="na">findByUserId</span><span class="p">(</span><span class="n">UserId</span><span class="p">.</span><span class="na">of</span><span class="p">(</span><span class="n">userId</span><span class="p">))</span>
<span class="w">            </span><span class="p">.</span><span class="na">orElseThrow</span><span class="p">(()</span><span class="w"> </span><span class="o">-&gt;</span><span class="w"> </span><span class="k">new</span><span class="w"> </span><span class="n">UserException</span><span class="p">(</span><span class="s">&quot;ユーザーが見つかりません&quot;</span><span class="p">));</span>

<span class="w">        </span><span class="k">if</span><span class="w"> </span><span class="p">(</span><span class="o">!</span><span class="n">user</span><span class="p">.</span><span class="na">getPassword</span><span class="p">().</span><span class="na">matches</span><span class="p">(</span><span class="n">currentPassword</span><span class="p">))</span><span class="w"> </span><span class="p">{</span>
<span class="w">            </span><span class="k">throw</span><span class="w"> </span><span class="k">new</span><span class="w"> </span><span class="n">UserException</span><span class="p">(</span><span class="s">&quot;現在のパスワードが正しくありません&quot;</span><span class="p">);</span>
<span class="w">        </span><span class="p">}</span>

<span class="w">        </span><span class="n">User</span><span class="w"> </span><span class="n">updated</span><span class="w"> </span><span class="o">=</span><span class="w"> </span><span class="n">user</span><span class="p">.</span><span class="na">changePassword</span><span class="p">(</span><span class="n">newPassword</span><span class="p">);</span>
<span class="w">        </span><span class="n">userRepository</span><span class="p">.</span><span class="na">save</span><span class="p">(</span><span class="n">updated</span><span class="p">);</span>
<span class="w">    </span><span class="p">}</span>
<span class="p">}</span>
</code></pre></div>
<hr />
<h2 id="256">25.6 ドメインモデルの例外設計<a class="headerlink" href="#256" title="Permanent link">&para;</a></h2>
<p>ドメイン層では、専用の例外クラスを定義します。</p>
<p><img src="data:image/svg+xml;base64,PHN2ZyB4bWxucz0iaHR0cDovL3d3dy53My5vcmcvMjAwMC9zdmciIHhtbG5zOnhsaW5rPSJodHRwOi8vd3d3LnczLm9yZy8xOTk5L3hsaW5rIiBjb250ZW50U3R5bGVUeXBlPSJ0ZXh0L2NzcyIgZGF0YS1kaWFncmFtLXR5cGU9IkNMQVNTIiBoZWlnaHQ9IjIyM3B4IiBwcmVzZXJ2ZUFzcGVjdFJhdGlvPSJub25lIiBzdHlsZT0id2lkdGg6MTI0NHB4O2hlaWdodDoyMjNweDtiYWNrZ3JvdW5kOiNGRkZGRkY7IiB2ZXJzaW9uPSIxLjEiIHZpZXdCb3g9IjAgMCAxMjQ0IDIyMyIgd2lkdGg9IjEyNDRweCIgem9vbUFuZFBhbj0ibWFnbmlmeSI+PHRpdGxlPiYjMTI1MTg7JiMxMjU0MDsmIzEyNDcwOyYjMTI1NDA7JiMxMjQ4OTsmIzEyNTEzOyYjMTI0NTI7JiMxMjUzMTsmIzEyMzk4OyYjMjAzNjM7JiMyMjgwNjsmIzM4NTQyOyYjMjM2NTI7PC90aXRsZT48ZGVmcy8+PGc+PGcgY2xhc3M9InRpdGxlIiBkYXRhLXNvdXJjZS1saW5lPSIxIj48dGV4dCBmaWxsPSIjMDAwMDAwIiBmb250LWZhbWlseT0ic2Fucy1zZXJpZiIgZm9udC1zaXplPSIxNCIgZm9udC13ZWlnaHQ9ImJvbGQiIGxlbmd0aEFkanVzdD0ic3BhY2luZyIgdGV4dExlbmd0aD0iMTgxLjk5OTIiIHg9IjUyNC4xMzg5IiB5PSIyMi45OTUxIj4mIzEyNTE4OyYjMTI1NDA7JiMxMjQ3MDsmIzEyNTQwOyYjMTI0ODk7JiMxMjUxMzsmIzEyNDUyOyYjMTI1MzE7JiMxMjM5ODsmIzIwMzYzOyYjMjI4MDY7JiMzODU0MjsmIzIzNjUyOzwvdGV4dD48L2c+PCEtLWNsYXNzIFJ1bnRpbWVFeGNlcHRpb24tLT48ZyBjbGFzcz0iZW50aXR5IiBkYXRhLWVudGl0eT0iUnVudGltZUV4Y2VwdGlvbiIgZGF0YS1zb3VyY2UtbGluZT0iMyIgZGF0YS11aWQ9ImVudDAwMDIiIGlkPSJlbnRpdHlfUnVudGltZUV4Y2VwdGlvbiI+PHJlY3QgZmlsbD0iI0YxRjFGMSIgaGVpZ2h0PSI0OCIgcng9IjIuNSIgcnk9IjIuNSIgc3R5bGU9InN0cm9rZTojMTgxODE4O3N0cm9rZS13aWR0aDowLjU7IiB3aWR0aD0iMTYwLjI0OSIgeD0iNTAwLjgiIHk9IjQ0LjI5NjkiLz48ZWxsaXBzZSBjeD0iNTE1LjgiIGN5PSI2MC4yOTY5IiBmaWxsPSIjQUREMUIyIiByeD0iMTEiIHJ5PSIxMSIgc3R5bGU9InN0cm9rZTojMTgxODE4O3N0cm9rZS13aWR0aDoxOyIvPjxwYXRoIGQ9Ik01MTguNzY4OCw2NS45Mzc1IFE1MTguMTkwNiw2Ni4yMzQ0IDUxNy41NSw2Ni4zNzUgUTUxNi45MDk0LDY2LjUzMTMgNTE2LjIwNjMsNjYuNTMxMyBRNTEzLjcwNjMsNjYuNTMxMyA1MTIuMzc4MSw2NC44OTA2IFE1MTEuMDY1Niw2My4yMzQ0IDUxMS4wNjU2LDYwLjEwOTQgUTUxMS4wNjU2LDU2Ljk4NDQgNTEyLjM3ODEsNTUuMzI4MSBRNTEzLjcwNjMsNTMuNjcxOSA1MTYuMjA2Myw1My42NzE5IFE1MTYuOTA5NCw1My42NzE5IDUxNy41NSw1My44MjgxIFE1MTguMjA2Myw1My45ODQ0IDUxOC43Njg4LDU0LjI4MTMgTDUxOC43Njg4LDU3IFE1MTguMTQzOCw1Ni40MjE5IDUxNy41NSw1Ni4xNTYzIFE1MTYuOTU2Myw1NS44NzUgNTE2LjMzMTMsNTUuODc1IFE1MTQuOTg3NSw1NS44NzUgNTE0LjMsNTYuOTUzMSBRNTEzLjYxMjUsNTguMDE1NiA1MTMuNjEyNSw2MC4xMDk0IFE1MTMuNjEyNSw2Mi4yMDMxIDUxNC4zLDYzLjI4MTMgUTUxNC45ODc1LDY0LjM0MzggNTE2LjMzMTMsNjQuMzQzOCBRNTE2Ljk1NjMsNjQuMzQzOCA1MTcuNTUsNjQuMDc4MSBRNTE4LjE0MzgsNjMuNzk2OSA1MTguNzY4OCw2My4yMTg4IEw1MTguNzY4OCw2NS45Mzc1IFogIiBmaWxsPSIjMDAwMDAwIi8+PHRleHQgZmlsbD0iIzAwMDAwMCIgZm9udC1mYW1pbHk9InNhbnMtc2VyaWYiIGZvbnQtc2l6ZT0iMTQiIGxlbmd0aEFkanVzdD0ic3BhY2luZyIgdGV4dExlbmd0aD0iMTI4LjI0OSIgeD0iNTI5LjgiIHk9IjY1LjE0MzYiPlJ1bnRpbWVFeGNlcHRpb248L3RleHQ+PGxpbmUgc3R5bGU9InN0cm9rZTojMTgxODE4O3N0cm9rZS13aWR0aDowLjU7IiB4MT0iNTAxLjgiIHgyPSI2NjAuMDQ5IiB5MT0iNzYuMjk2OSIgeTI9Ijc2LjI5NjkiLz48bGluZSBzdHlsZT0ic3Ryb2tlOiMxODE4MTg7c3Ryb2tlLXdpZHRoOjAuNTsiIHgxPSI1MDEuOCIgeDI9IjY2MC4wNDkiIHkxPSI4NC4yOTY5IiB5Mj0iODQuMjk2OSIvPjwvZz48IS0tY2xhc3MgVXNlckV4Y2VwdGlvbi0tPjxnIGNsYXNzPSJlbnRpdHkiIGRhdGEtZW50aXR5PSJVc2VyRXhjZXB0aW9uIiBkYXRhLXNvdXJjZS1saW5lPSI1IiBkYXRhLXVpZD0iZW50MDAwMyIgaWQ9ImVudGl0eV9Vc2VyRXhjZXB0aW9uIj48cmVjdCBmaWxsPSIjRjFGMUYxIiBoZWlnaHQ9IjY0LjI5NjkiIHJ4PSIyLjUiIHJ5PSIyLjUiIHN0eWxlPSJzdHJva2U6IzE4MTgxODtzdHJva2Utd2lkdGg6MC41OyIgd2lkdGg9IjI1MS44NDU3IiB4PSI3IiB5PSIxNTIuMjk2OSIvPjxlbGxpcHNlIGN4PSI3OC4xNDUiIGN5PSIxNjguMjk2OSIgZmlsbD0iI0FERDFCMiIgcng9IjExIiByeT0iMTEiIHN0eWxlPSJzdHJva2U6IzE4MTgxODtzdHJva2Utd2lkdGg6MTsiLz48cGF0aCBkPSJNODEuMTEzOCwxNzMuOTM3NSBRODAuNTM1NiwxNzQuMjM0NCA3OS44OTUsMTc0LjM3NSBRNzkuMjU0NCwxNzQuNTMxMyA3OC41NTEzLDE3NC41MzEzIFE3Ni4wNTEzLDE3NC41MzEzIDc0LjcyMzEsMTcyLjg5MDYgUTczLjQxMDYsMTcxLjIzNDQgNzMuNDEwNiwxNjguMTA5NCBRNzMuNDEwNiwxNjQuOTg0NCA3NC43MjMxLDE2My4zMjgxIFE3Ni4wNTEzLDE2MS42NzE5IDc4LjU1MTMsMTYxLjY3MTkgUTc5LjI1NDQsMTYxLjY3MTkgNzkuODk1LDE2MS44MjgxIFE4MC41NTEzLDE2MS45ODQ0IDgxLjExMzgsMTYyLjI4MTMgTDgxLjExMzgsMTY1IFE4MC40ODg4LDE2NC40MjE5IDc5Ljg5NSwxNjQuMTU2MyBRNzkuMzAxMywxNjMuODc1IDc4LjY3NjMsMTYzLjg3NSBRNzcuMzMyNSwxNjMuODc1IDc2LjY0NSwxNjQuOTUzMSBRNzUuOTU3NSwxNjYuMDE1NiA3NS45NTc1LDE2OC4xMDk0IFE3NS45NTc1LDE3MC4yMDMxIDc2LjY0NSwxNzEuMjgxMyBRNzcuMzMyNSwxNzIuMzQzOCA3OC42NzYzLDE3Mi4zNDM4IFE3OS4zMDEzLDE3Mi4zNDM4IDc5Ljg5NSwxNzIuMDc4MSBRODAuNDg4OCwxNzEuNzk2OSA4MS4xMTM4LDE3MS4yMTg4IEw4MS4xMTM4LDE3My45Mzc1IFogIiBmaWxsPSIjMDAwMDAwIi8+PHRleHQgZmlsbD0iIzAwMDAwMCIgZm9udC1mYW1pbHk9InNhbnMtc2VyaWYiIGZvbnQtc2l6ZT0iMTQiIGxlbmd0aEFkanVzdD0ic3BhY2luZyIgdGV4dExlbmd0aD0iMTAxLjA1NTciIHg9Ijk4LjY0NSIgeT0iMTczLjE0MzYiPlVzZXJFeGNlcHRpb248L3RleHQ+PGxpbmUgc3R5bGU9InN0cm9rZTojMTgxODE4O3N0cm9rZS13aWR0aDowLjU7IiB4MT0iOCIgeDI9IjI1Ny44NDU3IiB5MT0iMTg0LjI5NjkiIHkyPSIxODQuMjk2OSIvPjxsaW5lIHN0eWxlPSJzdHJva2U6IzE4MTgxODtzdHJva2Utd2lkdGg6MC41OyIgeDE9IjgiIHgyPSIyNTcuODQ1NyIgeTE9IjE5Mi4yOTY5IiB5Mj0iMTkyLjI5NjkiLz48ZWxsaXBzZSBjeD0iMTgiIGN5PSIyMDUuOTQ1MyIgZmlsbD0iIzg0QkU4NCIgcng9IjMiIHJ5PSIzIiBzdHlsZT0ic3Ryb2tlOiMwMzgwNDg7c3Ryb2tlLXdpZHRoOjE7Ii8+PHRleHQgZmlsbD0iIzAwMDAwMCIgZm9udC1mYW1pbHk9InNhbnMtc2VyaWYiIGZvbnQtc2l6ZT0iMTQiIGxlbmd0aEFkanVzdD0ic3BhY2luZyIgdGV4dExlbmd0aD0iMjI1Ljg0NTciIHg9IjI3IiB5PSIyMDkuMjkyIj5Vc2VyRXhjZXB0aW9uKG1lc3NhZ2U6IFN0cmluZyk8L3RleHQ+PC9nPjwhLS1jbGFzcyBVc2VySWRFeGNlcHRpb24tLT48ZyBjbGFzcz0iZW50aXR5IiBkYXRhLWVudGl0eT0iVXNlcklkRXhjZXB0aW9uIiBkYXRhLXNvdXJjZS1saW5lPSI5IiBkYXRhLXVpZD0iZW50MDAwNCIgaWQ9ImVudGl0eV9Vc2VySWRFeGNlcHRpb24iPjxyZWN0IGZpbGw9IiNGMUYxRjEiIGhlaWdodD0iNjQuMjk2OSIgcng9IjIuNSIgcnk9IjIuNSIgc3R5bGU9InN0cm9rZTojMTgxODE4O3N0cm9rZS13aWR0aDowLjU7IiB3aWR0aD0iMjY0Ljg2MTMiIHg9IjI5My40OSIgeT0iMTUyLjI5NjkiLz48ZWxsaXBzZSBjeD0iMzY0LjYzNSIgY3k9IjE2OC4yOTY5IiBmaWxsPSIjQUREMUIyIiByeD0iMTEiIHJ5PSIxMSIgc3R5bGU9InN0cm9rZTojMTgxODE4O3N0cm9rZS13aWR0aDoxOyIvPjxwYXRoIGQ9Ik0zNjcuNjAzOCwxNzMuOTM3NSBRMzY3LjAyNTYsMTc0LjIzNDQgMzY2LjM4NSwxNzQuMzc1IFEzNjUuNzQ0NCwxNzQuNTMxMyAzNjUuMDQxMywxNzQuNTMxMyBRMzYyLjU0MTMsMTc0LjUzMTMgMzYxLjIxMzEsMTcyLjg5MDYgUTM1OS45MDA2LDE3MS4yMzQ0IDM1OS45MDA2LDE2OC4xMDk0IFEzNTkuOTAwNiwxNjQuOTg0NCAzNjEuMjEzMSwxNjMuMzI4MSBRMzYyLjU0MTMsMTYxLjY3MTkgMzY1LjA0MTMsMTYxLjY3MTkgUTM2NS43NDQ0LDE2MS42NzE5IDM2Ni4zODUsMTYxLjgyODEgUTM2Ny4wNDEzLDE2MS45ODQ0IDM2Ny42MDM4LDE2Mi4yODEzIEwzNjcuNjAzOCwxNjUgUTM2Ni45Nzg4LDE2NC40MjE5IDM2Ni4zODUsMTY0LjE1NjMgUTM2NS43OTEzLDE2My44NzUgMzY1LjE2NjMsMTYzLjg3NSBRMzYzLjgyMjUsMTYzLjg3NSAzNjMuMTM1LDE2NC45NTMxIFEzNjIuNDQ3NSwxNjYuMDE1NiAzNjIuNDQ3NSwxNjguMTA5NCBRMzYyLjQ0NzUsMTcwLjIwMzEgMzYzLjEzNSwxNzEuMjgxMyBRMzYzLjgyMjUsMTcyLjM0MzggMzY1LjE2NjMsMTcyLjM0MzggUTM2NS43OTEzLDE3Mi4zNDM4IDM2Ni4zODUsMTcyLjA3ODEgUTM2Ni45Nzg4LDE3MS43OTY5IDM2Ny42MDM4LDE3MS4yMTg4IEwzNjcuNjAzOCwxNzMuOTM3NSBaICIgZmlsbD0iIzAwMDAwMCIvPjx0ZXh0IGZpbGw9IiMwMDAwMDAiIGZvbnQtZmFtaWx5PSJzYW5zLXNlcmlmIiBmb250LXNpemU9IjE0IiBsZW5ndGhBZGp1c3Q9InNwYWNpbmciIHRleHRMZW5ndGg9IjExNC4wNzEzIiB4PSIzODUuMTM1IiB5PSIxNzMuMTQzNiI+VXNlcklkRXhjZXB0aW9uPC90ZXh0PjxsaW5lIHN0eWxlPSJzdHJva2U6IzE4MTgxODtzdHJva2Utd2lkdGg6MC41OyIgeDE9IjI5NC40OSIgeDI9IjU1Ny4zNTEzIiB5MT0iMTg0LjI5NjkiIHkyPSIxODQuMjk2OSIvPjxsaW5lIHN0eWxlPSJzdHJva2U6IzE4MTgxODtzdHJva2Utd2lkdGg6MC41OyIgeDE9IjI5NC40OSIgeDI9IjU1Ny4zNTEzIiB5MT0iMTkyLjI5NjkiIHkyPSIxOTIuMjk2OSIvPjxlbGxpcHNlIGN4PSIzMDQuNDkiIGN5PSIyMDUuOTQ1MyIgZmlsbD0iIzg0QkU4NCIgcng9IjMiIHJ5PSIzIiBzdHlsZT0ic3Ryb2tlOiMwMzgwNDg7c3Ryb2tlLXdpZHRoOjE7Ii8+PHRleHQgZmlsbD0iIzAwMDAwMCIgZm9udC1mYW1pbHk9InNhbnMtc2VyaWYiIGZvbnQtc2l6ZT0iMTQiIGxlbmd0aEFkanVzdD0ic3BhY2luZyIgdGV4dExlbmd0aD0iMjM4Ljg2MTMiIHg9IjMxMy40OSIgeT0iMjA5LjI5MiI+VXNlcklkRXhjZXB0aW9uKG1lc3NhZ2U6IFN0cmluZyk8L3RleHQ+PC9nPjwhLS1jbGFzcyBQYXNzd29yZEV4Y2VwdGlvbi0tPjxnIGNsYXNzPSJlbnRpdHkiIGRhdGEtZW50aXR5PSJQYXNzd29yZEV4Y2VwdGlvbiIgZGF0YS1zb3VyY2UtbGluZT0iMTMiIGRhdGEtdWlkPSJlbnQwMDA1IiBpZD0iZW50aXR5X1Bhc3N3b3JkRXhjZXB0aW9uIj48cmVjdCBmaWxsPSIjRjFGMUYxIiBoZWlnaHQ9IjY0LjI5NjkiIHJ4PSIyLjUiIHJ5PSIyLjUiIHN0eWxlPSJzdHJva2U6IzE4MTgxODtzdHJva2Utd2lkdGg6MC41OyIgd2lkdGg9IjI4Ni4yMDMxIiB4PSI1OTMuODIiIHk9IjE1Mi4yOTY5Ii8+PGVsbGlwc2UgY3g9IjY2NC45NjUiIGN5PSIxNjguMjk2OSIgZmlsbD0iI0FERDFCMiIgcng9IjExIiByeT0iMTEiIHN0eWxlPSJzdHJva2U6IzE4MTgxODtzdHJva2Utd2lkdGg6MTsiLz48cGF0aCBkPSJNNjY3LjkzMzgsMTczLjkzNzUgUTY2Ny4zNTU2LDE3NC4yMzQ0IDY2Ni43MTUsMTc0LjM3NSBRNjY2LjA3NDQsMTc0LjUzMTMgNjY1LjM3MTMsMTc0LjUzMTMgUTY2Mi44NzEzLDE3NC41MzEzIDY2MS41NDMxLDE3Mi44OTA2IFE2NjAuMjMwNiwxNzEuMjM0NCA2NjAuMjMwNiwxNjguMTA5NCBRNjYwLjIzMDYsMTY0Ljk4NDQgNjYxLjU0MzEsMTYzLjMyODEgUTY2Mi44NzEzLDE2MS42NzE5IDY2NS4zNzEzLDE2MS42NzE5IFE2NjYuMDc0NCwxNjEuNjcxOSA2NjYuNzE1LDE2MS44MjgxIFE2NjcuMzcxMywxNjEuOTg0NCA2NjcuOTMzOCwxNjIuMjgxMyBMNjY3LjkzMzgsMTY1IFE2NjcuMzA4OCwxNjQuNDIxOSA2NjYuNzE1LDE2NC4xNTYzIFE2NjYuMTIxMywxNjMuODc1IDY2NS40OTYzLDE2My44NzUgUTY2NC4xNTI1LDE2My44NzUgNjYzLjQ2NSwxNjQuOTUzMSBRNjYyLjc3NzUsMTY2LjAxNTYgNjYyLjc3NzUsMTY4LjEwOTQgUTY2Mi43Nzc1LDE3MC4yMDMxIDY2My40NjUsMTcxLjI4MTMgUTY2NC4xNTI1LDE3Mi4zNDM4IDY2NS40OTYzLDE3Mi4zNDM4IFE2NjYuMTIxMywxNzIuMzQzOCA2NjYuNzE1LDE3Mi4wNzgxIFE2NjcuMzA4OCwxNzEuNzk2OSA2NjcuOTMzOCwxNzEuMjE4OCBMNjY3LjkzMzgsMTczLjkzNzUgWiAiIGZpbGw9IiMwMDAwMDAiLz48dGV4dCBmaWxsPSIjMDAwMDAwIiBmb250LWZhbWlseT0ic2Fucy1zZXJpZiIgZm9udC1zaXplPSIxNCIgbGVuZ3RoQWRqdXN0PSJzcGFjaW5nIiB0ZXh0TGVuZ3RoPSIxMzUuNDEzMSIgeD0iNjg1LjQ2NSIgeT0iMTczLjE0MzYiPlBhc3N3b3JkRXhjZXB0aW9uPC90ZXh0PjxsaW5lIHN0eWxlPSJzdHJva2U6IzE4MTgxODtzdHJva2Utd2lkdGg6MC41OyIgeDE9IjU5NC44MiIgeDI9Ijg3OS4wMjMxIiB5MT0iMTg0LjI5NjkiIHkyPSIxODQuMjk2OSIvPjxsaW5lIHN0eWxlPSJzdHJva2U6IzE4MTgxODtzdHJva2Utd2lkdGg6MC41OyIgeDE9IjU5NC44MiIgeDI9Ijg3OS4wMjMxIiB5MT0iMTkyLjI5NjkiIHkyPSIxOTIuMjk2OSIvPjxlbGxpcHNlIGN4PSI2MDQuODIiIGN5PSIyMDUuOTQ1MyIgZmlsbD0iIzg0QkU4NCIgcng9IjMiIHJ5PSIzIiBzdHlsZT0ic3Ryb2tlOiMwMzgwNDg7c3Ryb2tlLXdpZHRoOjE7Ii8+PHRleHQgZmlsbD0iIzAwMDAwMCIgZm9udC1mYW1pbHk9InNhbnMtc2VyaWYiIGZvbnQtc2l6ZT0iMTQiIGxlbmd0aEFkanVzdD0ic3BhY2luZyIgdGV4dExlbmd0aD0iMjYwLjIwMzEiIHg9IjYxMy44MiIgeT0iMjA5LjI5MiI+UGFzc3dvcmRFeGNlcHRpb24obWVzc2FnZTogU3RyaW5nKTwvdGV4dD48L2c+PCEtLWNsYXNzIEF1dGhlbnRpY2F0aW9uRXhjZXB0aW9uLS0+PGcgY2xhc3M9ImVudGl0eSIgZGF0YS1lbnRpdHk9IkF1dGhlbnRpY2F0aW9uRXhjZXB0aW9uIiBkYXRhLXNvdXJjZS1saW5lPSIxNyIgZGF0YS11aWQ9ImVudDAwMDYiIGlkPSJlbnRpdHlfQXV0aGVudGljYXRpb25FeGNlcHRpb24iPjxyZWN0IGZpbGw9IiNGMUYxRjEiIGhlaWdodD0iNjQuMjk2OSIgcng9IjIuNSIgcnk9IjIuNSIgc3R5bGU9InN0cm9rZTojMTgxODE4O3N0cm9rZS13aWR0aDowLjU7IiB3aWR0aD0iMzIyLjcwNyIgeD0iOTE0LjU3IiB5PSIxNTIuMjk2OSIvPjxlbGxpcHNlIGN4PSI5ODUuNzE1IiBjeT0iMTY4LjI5NjkiIGZpbGw9IiNBREQxQjIiIHJ4PSIxMSIgcnk9IjExIiBzdHlsZT0ic3Ryb2tlOiMxODE4MTg7c3Ryb2tlLXdpZHRoOjE7Ii8+PHBhdGggZD0iTTk4OC42ODM4LDE3My45Mzc1IFE5ODguMTA1NiwxNzQuMjM0NCA5ODcuNDY1LDE3NC4zNzUgUTk4Ni44MjQ0LDE3NC41MzEzIDk4Ni4xMjEzLDE3NC41MzEzIFE5ODMuNjIxMywxNzQuNTMxMyA5ODIuMjkzMSwxNzIuODkwNiBROTgwLjk4MDYsMTcxLjIzNDQgOTgwLjk4MDYsMTY4LjEwOTQgUTk4MC45ODA2LDE2NC45ODQ0IDk4Mi4yOTMxLDE2My4zMjgxIFE5ODMuNjIxMywxNjEuNjcxOSA5ODYuMTIxMywxNjEuNjcxOSBROTg2LjgyNDQsMTYxLjY3MTkgOTg3LjQ2NSwxNjEuODI4MSBROTg4LjEyMTMsMTYxLjk4NDQgOTg4LjY4MzgsMTYyLjI4MTMgTDk4OC42ODM4LDE2NSBROTg4LjA1ODgsMTY0LjQyMTkgOTg3LjQ2NSwxNjQuMTU2MyBROTg2Ljg3MTMsMTYzLjg3NSA5ODYuMjQ2MywxNjMuODc1IFE5ODQuOTAyNSwxNjMuODc1IDk4NC4yMTUsMTY0Ljk1MzEgUTk4My41Mjc1LDE2Ni4wMTU2IDk4My41Mjc1LDE2OC4xMDk0IFE5ODMuNTI3NSwxNzAuMjAzMSA5ODQuMjE1LDE3MS4yODEzIFE5ODQuOTAyNSwxNzIuMzQzOCA5ODYuMjQ2MywxNzIuMzQzOCBROTg2Ljg3MTMsMTcyLjM0MzggOTg3LjQ2NSwxNzIuMDc4MSBROTg4LjA1ODgsMTcxLjc5NjkgOTg4LjY4MzgsMTcxLjIxODggTDk4OC42ODM4LDE3My45Mzc1IFogIiBmaWxsPSIjMDAwMDAwIi8+PHRleHQgZmlsbD0iIzAwMDAwMCIgZm9udC1mYW1pbHk9InNhbnMtc2VyaWYiIGZvbnQtc2l6ZT0iMTQiIGxlbmd0aEFkanVzdD0ic3BhY2luZyIgdGV4dExlbmd0aD0iMTcxLjkxNyIgeD0iMTAwNi4yMTUiIHk9IjE3My4xNDM2Ij5BdXRoZW50aWNhdGlvbkV4Y2VwdGlvbjwvdGV4dD48bGluZSBzdHlsZT0ic3Ryb2tlOiMxODE4MTg7c3Ryb2tlLXdpZHRoOjAuNTsiIHgxPSI5MTUuNTciIHgyPSIxMjM2LjI3NyIgeTE9IjE4NC4yOTY5IiB5Mj0iMTg0LjI5NjkiLz48bGluZSBzdHlsZT0ic3Ryb2tlOiMxODE4MTg7c3Ryb2tlLXdpZHRoOjAuNTsiIHgxPSI5MTUuNTciIHgyPSIxMjM2LjI3NyIgeTE9IjE5Mi4yOTY5IiB5Mj0iMTkyLjI5NjkiLz48ZWxsaXBzZSBjeD0iOTI1LjU3IiBjeT0iMjA1Ljk0NTMiIGZpbGw9IiM4NEJFODQiIHJ4PSIzIiByeT0iMyIgc3R5bGU9InN0cm9rZTojMDM4MDQ4O3N0cm9rZS13aWR0aDoxOyIvPjx0ZXh0IGZpbGw9IiMwMDAwMDAiIGZvbnQtZmFtaWx5PSJzYW5zLXNlcmlmIiBmb250LXNpemU9IjE0IiBsZW5ndGhBZGp1c3Q9InNwYWNpbmciIHRleHRMZW5ndGg9IjI5Ni43MDciIHg9IjkzNC41NyIgeT0iMjA5LjI5MiI+QXV0aGVudGljYXRpb25FeGNlcHRpb24obWVzc2FnZTogU3RyaW5nKTwvdGV4dD48L2c+PCEtLXJldmVyc2UgbGluayBSdW50aW1lRXhjZXB0aW9uIHRvIFVzZXJFeGNlcHRpb24tLT48ZyBjbGFzcz0ibGluayIgZGF0YS1lbnRpdHktMT0iUnVudGltZUV4Y2VwdGlvbiIgZGF0YS1lbnRpdHktMj0iVXNlckV4Y2VwdGlvbiIgZGF0YS1zb3VyY2UtbGluZT0iMjEiIGRhdGEtdWlkPSJsbms3IiBpZD0ibGlua19SdW50aW1lRXhjZXB0aW9uX1VzZXJFeGNlcHRpb24iPjxwYXRoIGNvZGVMaW5lPSIyMSIgZD0iTTQ4Mi44Njc2LDk0LjI4MjQgQzQxNS4xMDc2LDExMS41NTI0IDMzNC41NywxMzIuMDY2OSAyNTYuODQsMTUxLjg3NjkiIGZpbGw9Im5vbmUiIGlkPSJSdW50aW1lRXhjZXB0aW9uLWJhY2t0by1Vc2VyRXhjZXB0aW9uIiBzdHlsZT0ic3Ryb2tlOiMxODE4MTg7c3Ryb2tlLXdpZHRoOjE7Ii8+PHBvbHlnb24gZmlsbD0ibm9uZSIgcG9pbnRzPSI1MDAuMzEsODkuODM2OSw0ODEuMzg1OCw4OC40NjgzLDQ4NC4zNDk1LDEwMC4wOTY2LDUwMC4zMSw4OS44MzY5IiBzdHlsZT0ic3Ryb2tlOiMxODE4MTg7c3Ryb2tlLXdpZHRoOjE7Ii8+PC9nPjwhLS1yZXZlcnNlIGxpbmsgUnVudGltZUV4Y2VwdGlvbiB0byBVc2VySWRFeGNlcHRpb24tLT48ZyBjbGFzcz0ibGluayIgZGF0YS1lbnRpdHktMT0iUnVudGltZUV4Y2VwdGlvbiIgZGF0YS1lbnRpdHktMj0iVXNlcklkRXhjZXB0aW9uIiBkYXRhLXNvdXJjZS1saW5lPSIyMiIgZGF0YS11aWQ9ImxuazgiIGlkPSJsaW5rX1J1bnRpbWVFeGNlcHRpb25fVXNlcklkRXhjZXB0aW9uIj48cGF0aCBjb2RlTGluZT0iMjIiIGQ9Ik01MzQuNjg3NiwxMDMuMzUyNSBDNTExLjQ4NzYsMTIwLjQ0MjUgNDk0LjI0LDEzMy4xMzY5IDQ2OC43OSwxNTEuODc2OSIgZmlsbD0ibm9uZSIgaWQ9IlJ1bnRpbWVFeGNlcHRpb24tYmFja3RvLVVzZXJJZEV4Y2VwdGlvbiIgc3R5bGU9InN0cm9rZTojMTgxODE4O3N0cm9rZS13aWR0aDoxOyIvPjxwb2x5Z29uIGZpbGw9Im5vbmUiIHBvaW50cz0iNTQ5LjE4LDkyLjY3NjksNTMxLjEyOSw5OC41MjE3LDUzOC4yNDYxLDEwOC4xODMzLDU0OS4xOCw5Mi42NzY5IiBzdHlsZT0ic3Ryb2tlOiMxODE4MTg7c3Ryb2tlLXdpZHRoOjE7Ii8+PC9nPjwhLS1yZXZlcnNlIGxpbmsgUnVudGltZUV4Y2VwdGlvbiB0byBQYXNzd29yZEV4Y2VwdGlvbi0tPjxnIGNsYXNzPSJsaW5rIiBkYXRhLWVudGl0eS0xPSJSdW50aW1lRXhjZXB0aW9uIiBkYXRhLWVudGl0eS0yPSJQYXNzd29yZEV4Y2VwdGlvbiIgZGF0YS1zb3VyY2UtbGluZT0iMjMiIGRhdGEtdWlkPSJsbms5IiBpZD0ibGlua19SdW50aW1lRXhjZXB0aW9uX1Bhc3N3b3JkRXhjZXB0aW9uIj48cGF0aCBjb2RlTGluZT0iMjMiIGQ9Ik02MjcuMzk1MiwxMDMuMzA3OSBDNjUwLjc0NTIsMTIwLjM5NzkgNjY4LjE2LDEzMy4xMzY5IDY5My43OCwxNTEuODc2OSIgZmlsbD0ibm9uZSIgaWQ9IlJ1bnRpbWVFeGNlcHRpb24tYmFja3RvLVBhc3N3b3JkRXhjZXB0aW9uIiBzdHlsZT0ic3Ryb2tlOiMxODE4MTg7c3Ryb2tlLXdpZHRoOjE7Ii8+PHBvbHlnb24gZmlsbD0ibm9uZSIgcG9pbnRzPSI2MTIuODcsOTIuNjc2OSw2MjMuODUxNSwxMDguMTQ5Nyw2MzAuOTM4OSw5OC40NjYyLDYxMi44Nyw5Mi42NzY5IiBzdHlsZT0ic3Ryb2tlOiMxODE4MTg7c3Ryb2tlLXdpZHRoOjE7Ii8+PC9nPjwhLS1yZXZlcnNlIGxpbmsgUnVudGltZUV4Y2VwdGlvbiB0byBBdXRoZW50aWNhdGlvbkV4Y2VwdGlvbi0tPjxnIGNsYXNzPSJsaW5rIiBkYXRhLWVudGl0eS0xPSJSdW50aW1lRXhjZXB0aW9uIiBkYXRhLWVudGl0eS0yPSJBdXRoZW50aWNhdGlvbkV4Y2VwdGlvbiIgZGF0YS1zb3VyY2UtbGluZT0iMjQiIGRhdGEtdWlkPSJsbmsxMCIgaWQ9ImxpbmtfUnVudGltZUV4Y2VwdGlvbl9BdXRoZW50aWNhdGlvbkV4Y2VwdGlvbiI+PHBhdGggY29kZUxpbmU9IjI0IiBkPSJNNjc4LjgxOTcsOTEuODcxNiBDNzUzLjgzOTcsMTA5LjE3MTYgODQ5Ljc3LDEzMS4yOTY5IDkzOS4wNiwxNTEuODg2OSIgZmlsbD0ibm9uZSIgaWQ9IlJ1bnRpbWVFeGNlcHRpb24tYmFja3RvLUF1dGhlbnRpY2F0aW9uRXhjZXB0aW9uIiBzdHlsZT0ic3Ryb2tlOiMxODE4MTg7c3Ryb2tlLXdpZHRoOjE7Ii8+PHBvbHlnb24gZmlsbD0ibm9uZSIgcG9pbnRzPSI2NjEuMjgsODcuODI2OSw2NzcuNDcxNCw5Ny43MTgyLDY4MC4xNjc5LDg2LjAyNTEsNjYxLjI4LDg3LjgyNjkiIHN0eWxlPSJzdHJva2U6IzE4MTgxODtzdHJva2Utd2lkdGg6MTsiLz48L2c+PCEtLVNSQz1bQXlhaW9LYkxVRG95eDc3cGRpVERzcTFhUy1WWnZlTUZjdk95Ump4eWs3N1RhdHRUSnZUQ1VwY2h4LWQ2OUxuU29KYzluU0tBR1FMdjlQY3ZnUXVMb1FhNTlQZHZVSjNucUVCSzhoWVdHWk1ORGdnOEhjdmdTTjVZVWdnTEdkMTlLTVBVa1lQTkJSOUVwbkhDbEtYWVU3RzcwOGRvXzI4cV9IWVlVNG5tQjJ0OUkwTHdBWmFIZjEzTDcxbm9NNHIzM25hNWNuZlROVEhHbUFDNm9SU3VMNjd1Mk9Tdzc2dTYwMDAwXS0tPjwvZz48L3N2Zz4=" class="uml" alt="uml diagram" title="" /></p>
<h3 id="_16">例外の使い分け<a class="headerlink" href="#_16" title="Permanent link">&para;</a></h3>
<table>
<thead>
<tr>
<th>例外クラス</th>
<th>用途</th>
<th>例</th>
</tr>
</thead>
<tbody>
<tr>
<td>UserException</td>
<td>ユーザー全般のエラー</td>
<td>必須項目未入力、ユーザー不存在</td>
</tr>
<tr>
<td>UserIdException</td>
<td>ユーザーID形式エラー</td>
<td>形式不正（ACCで始まらない等）</td>
</tr>
<tr>
<td>PasswordException</td>
<td>パスワードポリシー違反</td>
<td>文字数不足、複雑性不足</td>
</tr>
<tr>
<td>AuthenticationException</td>
<td>認証失敗</td>
<td>パスワード不一致、アカウントロック</td>
</tr>
</tbody>
</table>
<hr />
<h2 id="_17">まとめ<a class="headerlink" href="#_17" title="Permanent link">&para;</a></h2>
<p>本章では、財務会計システムの認証・ユーザー管理機能について解説しました。</p>
<h3 id="_18">重要なポイント<a class="headerlink" href="#_18" title="Permanent link">&para;</a></h3>
<ol>
<li>
<p><strong>ロールベースアクセス制御</strong>: 財務データの機密性を考慮し、4種類のロール（ADMIN、EXECUTIVE、MANAGER、ACCOUNTANT）と詳細な権限を定義しました。</p>
</li>
<li>
<p><strong>強力なパスワードポリシー</strong>: 財務システムにふさわしい強力なパスワードポリシー（8文字以上、大文字・小文字・数字・特殊文字を含む）を実装しました。</p>
</li>
<li>
<p><strong>JWT認証</strong>: ステートレスな認証方式を採用し、スケーラビリティと安全性を両立しています。リフレッシュトークンによるトークン更新も実装しています。</p>
</li>
<li>
<p><strong>Spring Security統合</strong>: エンドポイントごとに適切な権限チェックを設定し、仕訳承認や財務分析など機能ごとにアクセス制御を行っています。</p>
</li>
</ol>
<h3 id="_19">財務会計システム固有の考慮点<a class="headerlink" href="#_19" title="Permanent link">&para;</a></h3>
<table>
<thead>
<tr>
<th>項目</th>
<th>対応</th>
</tr>
</thead>
<tbody>
<tr>
<td>職務分離</td>
<td>仕訳入力者と承認者の分離（Role設計）</td>
</tr>
<tr>
<td>監査対応</td>
<td>認証ログの記録（次章で解説）</td>
</tr>
<tr>
<td>データ保護</td>
<td>強力な認証とロールベースアクセス制御</td>
</tr>
<tr>
<td>セッション管理</td>
<td>ステートレスJWTによる安全な管理</td>
</tr>
</tbody>
</table>
<p>次章では、データダウンロード機能について解説します。</p>












                
              </article>
            </div>
          
          
<script>var target=document.getElementById(location.hash.slice(1));target&&target.name&&(target.checked=target.name.startsWith("__tabbed_"))</script>
        </div>
        
      </main>
      
        <footer class="md-footer">
  
  <div class="md-footer-meta md-typeset">
    <div class="md-footer-meta__inner md-grid">
      <div class="md-copyright">
  
  
    Made with
    <a href="https://squidfunk.github.io/mkdocs-material/" target="_blank" rel="noopener">
      Material for MkDocs
    </a>
  
</div>
      
        
<div class="md-social">
  
    
    
    
    
    <a href="https://github.com/k2works/case-study-accounting" target="_blank" rel="noopener" title="財務会計システム ケーススタディ" class="md-social__link">
      <svg xmlns="http://www.w3.org/2000/svg" viewBox="0 0 512 512"><!--! Font Awesome Free 7.1.0 by @fontawesome - https://fontawesome.com License - https://fontawesome.com/license/free (Icons: CC BY 4.0, Fonts: SIL OFL 1.1, Code: MIT License) Copyright 2025 Fonticons, Inc.--><path d="M173.9 397.4c0 2-2.3 3.6-5.2 3.6-3.3.3-5.6-1.3-5.6-3.6 0-2 2.3-3.6 5.2-3.6 3-.3 5.6 1.3 5.6 3.6m-31.1-4.5c-.7 2 1.3 4.3 4.3 4.9 2.6 1 5.6 0 6.2-2s-1.3-4.3-4.3-5.2c-2.6-.7-5.5.3-6.2 2.3m44.2-1.7c-2.9.7-4.9 2.6-4.6 4.9.3 2 2.9 3.3 5.9 2.6 2.9-.7 4.9-2.6 4.6-4.6-.3-1.9-3-3.2-5.9-2.9M252.8 8C114.1 8 8 113.3 8 252c0 110.9 69.8 205.8 169.5 239.2 12.8 2.3 17.3-5.6 17.3-12.1 0-6.2-.3-40.4-.3-61.4 0 0-70 15-84.7-29.8 0 0-11.4-29.1-27.8-36.6 0 0-22.9-15.7 1.6-15.4 0 0 24.9 2 38.6 25.8 21.9 38.6 58.6 27.5 72.9 20.9 2.3-16 8.8-27.1 16-33.7-55.9-6.2-112.3-14.3-112.3-110.5 0-27.5 7.6-41.3 23.6-58.9-2.6-6.5-11.1-33.3 2.6-67.9 20.9-6.5 69 27 69 27 20-5.6 41.5-8.5 62.8-8.5s42.8 2.9 62.8 8.5c0 0 48.1-33.6 69-27 13.7 34.7 5.2 61.4 2.6 67.9 16 17.7 25.8 31.5 25.8 58.9 0 96.5-58.9 104.2-114.8 110.5 9.2 7.9 17 22.9 17 46.4 0 33.7-.3 75.4-.3 83.6 0 6.5 4.6 14.4 17.3 12.1C436.2 457.8 504 362.9 504 252 504 113.3 391.5 8 252.8 8M105.2 352.9c-1.3 1-1 3.3.7 5.2 1.6 1.6 3.9 2.3 5.2 1 1.3-1 1-3.3-.7-5.2-1.6-1.6-3.9-2.3-5.2-1m-10.8-8.1c-.7 1.3.3 2.9 2.3 3.9 1.6 1 3.6.7 4.3-.7.7-1.3-.3-2.9-2.3-3.9-2-.6-3.6-.3-4.3.7m32.4 35.6c-1.6 1.3-1 4.3 1.3 6.2 2.3 2.3 5.2 2.6 6.5 1 1.3-1.3.7-4.3-1.3-6.2-2.2-2.3-5.2-2.6-6.5-1m-11.4-14.7c-1.6 1-1.6 3.6 0 5.9s4.3 3.3 5.6 2.3c1.6-1.3 1.6-3.9 0-6.2-1.4-2.3-4-3.3-5.6-2"/></svg>
    </a>
  
</div>
      
    </div>
  </div>
</footer>
      
    </div>
    <div class="md-dialog" data-md-component="dialog">
      <div class="md-dialog__inner md-typeset"></div>
    </div>
    
    
    
      
      
      <script id="__config" type="application/json">{"annotate": null, "base": "../../..", "features": ["navigation.tabs", "navigation.sections", "toc.integrate", "search.suggest", "search.highlight"], "search": "../../../assets/javascripts/workers/search.2c215733.min.js", "tags": null, "translations": {"clipboard.copied": "Copied to clipboard", "clipboard.copy": "Copy to clipboard", "search.result.more.one": "1 more on this page", "search.result.more.other": "# more on this page", "search.result.none": "No matching documents", "search.result.one": "1 matching document", "search.result.other": "# matching documents", "search.result.placeholder": "Type to start searching", "search.result.term.missing": "Missing", "select.version": "Select version"}, "version": null}</script>
    
    
      <script src="../../../assets/javascripts/bundle.79ae519e.min.js"></script>
      
        <script src="https://cdn.jsdelivr.net/npm/mermaid@10.6.1/dist/mermaid.min.js"></script>
      
        <script src="../../../assets/js/extra.js"></script>
      
    
  </body>
</html>