
<!doctype html>
<html lang="en" class="no-js">
  <head>
    
      <meta charset="utf-8">
      <meta name="viewport" content="width=device-width,initial-scale=1">
      
        <meta name="description" content="財務会計システムの設計・開発ドキュメント">
      
      
        <meta name="author" content="Project Team">
      
      
      
        <link rel="prev" href="../chapter21/">
      
      
        <link rel="next" href="../chapter23/">
      
      
        
      
      
      <link rel="icon" href="../../../assets/images/favicon.png">
      <meta name="generator" content="mkdocs-1.6.1, mkdocs-material-9.7.1">
    
    
      
        <title>第22章 - 財務会計システム ケーススタディ</title>
      
    
    
      <link rel="stylesheet" href="../../../assets/stylesheets/main.484c7ddc.min.css">
      
        
        <link rel="stylesheet" href="../../../assets/stylesheets/palette.ab4e12ef.min.css">
      
      


    
    
      
    
    
      
        
        
        <link rel="preconnect" href="https://fonts.gstatic.com" crossorigin>
        <link rel="stylesheet" href="https://fonts.googleapis.com/css?family=Roboto:300,300i,400,400i,700,700i%7CRoboto+Mono:400,400i,700,700i&display=fallback">
        <style>:root{--md-text-font:"Roboto";--md-code-font:"Roboto Mono"}</style>
      
    
    
      <link rel="stylesheet" href="../../../assets/css/extra.css">
    
    <script>__md_scope=new URL("../../..",location),__md_hash=e=>[...e].reduce(((e,_)=>(e<<5)-e+_.charCodeAt(0)),0),__md_get=(e,_=localStorage,t=__md_scope)=>JSON.parse(_.getItem(t.pathname+"."+e)),__md_set=(e,_,t=localStorage,a=__md_scope)=>{try{t.setItem(a.pathname+"."+e,JSON.stringify(_))}catch(e){}}</script>
    
      

    
    
  </head>
  
  
    
    
    
    
    
    <body dir="ltr" data-md-color-scheme="default" data-md-color-primary="indigo" data-md-color-accent="indigo">
  
    
    <input class="md-toggle" data-md-toggle="drawer" type="checkbox" id="__drawer" autocomplete="off">
    <input class="md-toggle" data-md-toggle="search" type="checkbox" id="__search" autocomplete="off">
    <label class="md-overlay" for="__drawer"></label>
    <div data-md-component="skip">
      
        
        <a href="#22" class="md-skip">
          Skip to content
        </a>
      
    </div>
    <div data-md-component="announce">
      
    </div>
    
    
      

<header class="md-header" data-md-component="header">
  <nav class="md-header__inner md-grid" aria-label="Header">
    <a href="../../.." title="財務会計システム ケーススタディ" class="md-header__button md-logo" aria-label="財務会計システム ケーススタディ" data-md-component="logo">
      
  
  <svg xmlns="http://www.w3.org/2000/svg" viewBox="0 0 24 24"><path d="M12 8a3 3 0 0 0 3-3 3 3 0 0 0-3-3 3 3 0 0 0-3 3 3 3 0 0 0 3 3m0 3.54C9.64 9.35 6.5 8 3 8v11c3.5 0 6.64 1.35 9 3.54 2.36-2.19 5.5-3.54 9-3.54V8c-3.5 0-6.64 1.35-9 3.54"/></svg>

    </a>
    <label class="md-header__button md-icon" for="__drawer">
      
      <svg xmlns="http://www.w3.org/2000/svg" viewBox="0 0 24 24"><path d="M3 6h18v2H3zm0 5h18v2H3zm0 5h18v2H3z"/></svg>
    </label>
    <div class="md-header__title" data-md-component="header-title">
      <div class="md-header__ellipsis">
        <div class="md-header__topic">
          <span class="md-ellipsis">
            財務会計システム ケーススタディ
          </span>
        </div>
        <div class="md-header__topic" data-md-component="header-topic">
          <span class="md-ellipsis">
            
              第22章
            
          </span>
        </div>
      </div>
    </div>
    
      
    
    
    
    
      
      
        <label class="md-header__button md-icon" for="__search">
          
          <svg xmlns="http://www.w3.org/2000/svg" viewBox="0 0 24 24"><path d="M9.5 3A6.5 6.5 0 0 1 16 9.5c0 1.61-.59 3.09-1.56 4.23l.27.27h.79l5 5-1.5 1.5-5-5v-.79l-.27-.27A6.52 6.52 0 0 1 9.5 16 6.5 6.5 0 0 1 3 9.5 6.5 6.5 0 0 1 9.5 3m0 2C7 5 5 7 5 9.5S7 14 9.5 14 14 12 14 9.5 12 5 9.5 5"/></svg>
        </label>
        <div class="md-search" data-md-component="search" role="dialog">
  <label class="md-search__overlay" for="__search"></label>
  <div class="md-search__inner" role="search">
    <form class="md-search__form" name="search">
      <input type="text" class="md-search__input" name="query" aria-label="Search" placeholder="Search" autocapitalize="off" autocorrect="off" autocomplete="off" spellcheck="false" data-md-component="search-query" required>
      <label class="md-search__icon md-icon" for="__search">
        
        <svg xmlns="http://www.w3.org/2000/svg" viewBox="0 0 24 24"><path d="M9.5 3A6.5 6.5 0 0 1 16 9.5c0 1.61-.59 3.09-1.56 4.23l.27.27h.79l5 5-1.5 1.5-5-5v-.79l-.27-.27A6.52 6.52 0 0 1 9.5 16 6.5 6.5 0 0 1 3 9.5 6.5 6.5 0 0 1 9.5 3m0 2C7 5 5 7 5 9.5S7 14 9.5 14 14 12 14 9.5 12 5 9.5 5"/></svg>
        
        <svg xmlns="http://www.w3.org/2000/svg" viewBox="0 0 24 24"><path d="M20 11v2H8l5.5 5.5-1.42 1.42L4.16 12l7.92-7.92L13.5 5.5 8 11z"/></svg>
      </label>
      <nav class="md-search__options" aria-label="Search">
        
        <button type="reset" class="md-search__icon md-icon" title="Clear" aria-label="Clear" tabindex="-1">
          
          <svg xmlns="http://www.w3.org/2000/svg" viewBox="0 0 24 24"><path d="M19 6.41 17.59 5 12 10.59 6.41 5 5 6.41 10.59 12 5 17.59 6.41 19 12 13.41 17.59 19 19 17.59 13.41 12z"/></svg>
        </button>
      </nav>
      
        <div class="md-search__suggest" data-md-component="search-suggest"></div>
      
    </form>
    <div class="md-search__output">
      <div class="md-search__scrollwrap" tabindex="0" data-md-scrollfix>
        <div class="md-search-result" data-md-component="search-result">
          <div class="md-search-result__meta">
            Initializing search
          </div>
          <ol class="md-search-result__list" role="presentation"></ol>
        </div>
      </div>
    </div>
  </div>
</div>
      
    
    
      <div class="md-header__source">
        <a href="https://github.com/k2works/case-study-accounting" title="Go to repository" class="md-source" data-md-component="source">
  <div class="md-source__icon md-icon">
    
    <svg xmlns="http://www.w3.org/2000/svg" viewBox="0 0 448 512"><!--! Font Awesome Free 7.1.0 by @fontawesome - https://fontawesome.com License - https://fontawesome.com/license/free (Icons: CC BY 4.0, Fonts: SIL OFL 1.1, Code: MIT License) Copyright 2025 Fonticons, Inc.--><path d="M439.6 236.1 244 40.5c-5.4-5.5-12.8-8.5-20.4-8.5s-15 3-20.4 8.4L162.5 81l51.5 51.5c27.1-9.1 52.7 16.8 43.4 43.7l49.7 49.7c34.2-11.8 61.2 31 35.5 56.7-26.5 26.5-70.2-2.9-56-37.3L240.3 199v121.9c25.3 12.5 22.3 41.8 9.1 55-6.4 6.4-15.2 10.1-24.3 10.1s-17.8-3.6-24.3-10.1c-17.6-17.6-11.1-46.9 11.2-56v-123c-20.8-8.5-24.6-30.7-18.6-45L142.6 101 8.5 235.1C3 240.6 0 247.9 0 255.5s3 15 8.5 20.4l195.6 195.7c5.4 5.4 12.7 8.4 20.4 8.4s15-3 20.4-8.4l194.7-194.7c5.4-5.4 8.4-12.8 8.4-20.4s-3-15-8.4-20.4"/></svg>
  </div>
  <div class="md-source__repository">
    case-study-accounting
  </div>
</a>
      </div>
    
  </nav>
  
</header>
    
    <div class="md-container" data-md-component="container">
      
      
        
          
            
<nav class="md-tabs" aria-label="Tabs" data-md-component="tabs">
  <div class="md-grid">
    <ul class="md-tabs__list">
      
        
  
  
  
  
    <li class="md-tabs__item">
      <a href="../../.." class="md-tabs__link">
        
  
  
    
  
  Home

      </a>
    </li>
  

      
        
  
  
  
  
    
    
      <li class="md-tabs__item">
        <a href="../../../requirements/requirements_definition/" class="md-tabs__link">
          
  
  
  要件定義

        </a>
      </li>
    
  

      
        
  
  
  
  
    
    
      
  
  
  
  
    
    
      <li class="md-tabs__item">
        <a href="../../../design/architecture_backend/" class="md-tabs__link">
          
  
  
  設計

        </a>
      </li>
    
  

    
  

      
        
  
  
  
  
    
    
      <li class="md-tabs__item">
        <a href="../../../development/release_plan/" class="md-tabs__link">
          
  
  
  開発

        </a>
      </li>
    
  

      
        
  
  
  
  
    
    
      <li class="md-tabs__item">
        <a href="../../../operation/dev_container/" class="md-tabs__link">
          
  
  
  運用

        </a>
      </li>
    
  

      
        
  
  
  
  
    
    
      <li class="md-tabs__item">
        <a href="../../../reference/%E9%96%8B%E7%99%BA%E3%82%AC%E3%82%A4%E3%83%89/" class="md-tabs__link">
          
  
  
  リファレンス

        </a>
      </li>
    
  

      
        
  
  
  
  
    
    
      <li class="md-tabs__item">
        <a href="../../../template/ADR/" class="md-tabs__link">
          
  
  
  テンプレート

        </a>
      </li>
    
  

      
        
  
  
  
    
  
  
    
    
      <li class="md-tabs__item md-tabs__item--active">
        <a href="../../" class="md-tabs__link">
          
  
  
  実践ガイド

        </a>
      </li>
    
  

      
    </ul>
  </div>
</nav>
          
        
      
      <main class="md-main" data-md-component="main">
        <div class="md-main__inner md-grid">
          
            
              
              <div class="md-sidebar md-sidebar--primary" data-md-component="sidebar" data-md-type="navigation" >
                <div class="md-sidebar__scrollwrap">
                  <div class="md-sidebar__inner">
                    


  


  

<nav class="md-nav md-nav--primary md-nav--lifted md-nav--integrated" aria-label="Navigation" data-md-level="0">
  <label class="md-nav__title" for="__drawer">
    <a href="../../.." title="財務会計システム ケーススタディ" class="md-nav__button md-logo" aria-label="財務会計システム ケーススタディ" data-md-component="logo">
      
  
  <svg xmlns="http://www.w3.org/2000/svg" viewBox="0 0 24 24"><path d="M12 8a3 3 0 0 0 3-3 3 3 0 0 0-3-3 3 3 0 0 0-3 3 3 3 0 0 0 3 3m0 3.54C9.64 9.35 6.5 8 3 8v11c3.5 0 6.64 1.35 9 3.54 2.36-2.19 5.5-3.54 9-3.54V8c-3.5 0-6.64 1.35-9 3.54"/></svg>

    </a>
    財務会計システム ケーススタディ
  </label>
  
    <div class="md-nav__source">
      <a href="https://github.com/k2works/case-study-accounting" title="Go to repository" class="md-source" data-md-component="source">
  <div class="md-source__icon md-icon">
    
    <svg xmlns="http://www.w3.org/2000/svg" viewBox="0 0 448 512"><!--! Font Awesome Free 7.1.0 by @fontawesome - https://fontawesome.com License - https://fontawesome.com/license/free (Icons: CC BY 4.0, Fonts: SIL OFL 1.1, Code: MIT License) Copyright 2025 Fonticons, Inc.--><path d="M439.6 236.1 244 40.5c-5.4-5.5-12.8-8.5-20.4-8.5s-15 3-20.4 8.4L162.5 81l51.5 51.5c27.1-9.1 52.7 16.8 43.4 43.7l49.7 49.7c34.2-11.8 61.2 31 35.5 56.7-26.5 26.5-70.2-2.9-56-37.3L240.3 199v121.9c25.3 12.5 22.3 41.8 9.1 55-6.4 6.4-15.2 10.1-24.3 10.1s-17.8-3.6-24.3-10.1c-17.6-17.6-11.1-46.9 11.2-56v-123c-20.8-8.5-24.6-30.7-18.6-45L142.6 101 8.5 235.1C3 240.6 0 247.9 0 255.5s3 15 8.5 20.4l195.6 195.7c5.4 5.4 12.7 8.4 20.4 8.4s15-3 20.4-8.4l194.7-194.7c5.4-5.4 8.4-12.8 8.4-20.4s-3-15-8.4-20.4"/></svg>
  </div>
  <div class="md-source__repository">
    case-study-accounting
  </div>
</a>
    </div>
  
  <ul class="md-nav__list" data-md-scrollfix>
    
      
      
  
  
  
  
    <li class="md-nav__item">
      <a href="../../.." class="md-nav__link">
        
  
  
  <span class="md-ellipsis">
    
  
    Home
  

    
  </span>
  
  

      </a>
    </li>
  

    
      
      
  
  
  
  
    
    
    
    
      
      
        
      
    
    
    <li class="md-nav__item md-nav__item--nested">
      
        
        
        <input class="md-nav__toggle md-toggle " type="checkbox" id="__nav_2" >
        
          
          <label class="md-nav__link" for="__nav_2" id="__nav_2_label" tabindex="0">
            
  
  
  <span class="md-ellipsis">
    
  
    要件定義
  

    
  </span>
  
  

            <span class="md-nav__icon md-icon"></span>
          </label>
        
        <nav class="md-nav" data-md-level="1" aria-labelledby="__nav_2_label" aria-expanded="false">
          <label class="md-nav__title" for="__nav_2">
            <span class="md-nav__icon md-icon"></span>
            
  
    要件定義
  

          </label>
          <ul class="md-nav__list" data-md-scrollfix>
            
              
                
  
  
  
  
    <li class="md-nav__item">
      <a href="../../../requirements/requirements_definition/" class="md-nav__link">
        
  
  
  <span class="md-ellipsis">
    
  
    要件定義書
  

    
  </span>
  
  

      </a>
    </li>
  

              
            
              
                
  
  
  
  
    <li class="md-nav__item">
      <a href="../../../requirements/business_usecase/" class="md-nav__link">
        
  
  
  <span class="md-ellipsis">
    
  
    ビジネスユースケース
  

    
  </span>
  
  

      </a>
    </li>
  

              
            
              
                
  
  
  
  
    <li class="md-nav__item">
      <a href="../../../requirements/system_usecase/" class="md-nav__link">
        
  
  
  <span class="md-ellipsis">
    
  
    システムユースケース
  

    
  </span>
  
  

      </a>
    </li>
  

              
            
              
                
  
  
  
  
    <li class="md-nav__item">
      <a href="../../../requirements/user_story/" class="md-nav__link">
        
  
  
  <span class="md-ellipsis">
    
  
    ユーザーストーリー
  

    
  </span>
  
  

      </a>
    </li>
  

              
            
          </ul>
        </nav>
      
    </li>
  

    
      
      
  
  
  
  
    
    
    
    
      
      
        
      
    
    
    <li class="md-nav__item md-nav__item--nested">
      
        
        
        <input class="md-nav__toggle md-toggle " type="checkbox" id="__nav_3" >
        
          
          <label class="md-nav__link" for="__nav_3" id="__nav_3_label" tabindex="0">
            
  
  
  <span class="md-ellipsis">
    
  
    設計
  

    
  </span>
  
  

            <span class="md-nav__icon md-icon"></span>
          </label>
        
        <nav class="md-nav" data-md-level="1" aria-labelledby="__nav_3_label" aria-expanded="false">
          <label class="md-nav__title" for="__nav_3">
            <span class="md-nav__icon md-icon"></span>
            
  
    設計
  

          </label>
          <ul class="md-nav__list" data-md-scrollfix>
            
              
                
  
  
  
  
    
    
    
    
      
      
        
      
    
    
    <li class="md-nav__item md-nav__item--nested">
      
        
        
        <input class="md-nav__toggle md-toggle " type="checkbox" id="__nav_3_1" >
        
          
          <label class="md-nav__link" for="__nav_3_1" id="__nav_3_1_label" tabindex="0">
            
  
  
  <span class="md-ellipsis">
    
  
    アーキテクチャ
  

    
  </span>
  
  

            <span class="md-nav__icon md-icon"></span>
          </label>
        
        <nav class="md-nav" data-md-level="2" aria-labelledby="__nav_3_1_label" aria-expanded="false">
          <label class="md-nav__title" for="__nav_3_1">
            <span class="md-nav__icon md-icon"></span>
            
  
    アーキテクチャ
  

          </label>
          <ul class="md-nav__list" data-md-scrollfix>
            
              
                
  
  
  
  
    <li class="md-nav__item">
      <a href="../../../design/architecture_backend/" class="md-nav__link">
        
  
  
  <span class="md-ellipsis">
    
  
    バックエンド
  

    
  </span>
  
  

      </a>
    </li>
  

              
            
              
                
  
  
  
  
    <li class="md-nav__item">
      <a href="../../../design/architecture_frontend/" class="md-nav__link">
        
  
  
  <span class="md-ellipsis">
    
  
    フロントエンド
  

    
  </span>
  
  

      </a>
    </li>
  

              
            
              
                
  
  
  
  
    <li class="md-nav__item">
      <a href="../../../design/architecture_infrastructure/" class="md-nav__link">
        
  
  
  <span class="md-ellipsis">
    
  
    インフラストラクチャ
  

    
  </span>
  
  

      </a>
    </li>
  

              
            
          </ul>
        </nav>
      
    </li>
  

              
            
              
                
  
  
  
  
    
    
    
    
      
      
        
      
    
    
    <li class="md-nav__item md-nav__item--nested">
      
        
        
        <input class="md-nav__toggle md-toggle " type="checkbox" id="__nav_3_2" >
        
          
          <label class="md-nav__link" for="__nav_3_2" id="__nav_3_2_label" tabindex="0">
            
  
  
  <span class="md-ellipsis">
    
  
    モデル設計
  

    
  </span>
  
  

            <span class="md-nav__icon md-icon"></span>
          </label>
        
        <nav class="md-nav" data-md-level="2" aria-labelledby="__nav_3_2_label" aria-expanded="false">
          <label class="md-nav__title" for="__nav_3_2">
            <span class="md-nav__icon md-icon"></span>
            
  
    モデル設計
  

          </label>
          <ul class="md-nav__list" data-md-scrollfix>
            
              
                
  
  
  
  
    <li class="md-nav__item">
      <a href="../../../design/data-model/" class="md-nav__link">
        
  
  
  <span class="md-ellipsis">
    
  
    データモデル
  

    
  </span>
  
  

      </a>
    </li>
  

              
            
              
                
  
  
  
  
    <li class="md-nav__item">
      <a href="../../../design/domain-model/" class="md-nav__link">
        
  
  
  <span class="md-ellipsis">
    
  
    ドメインモデル
  

    
  </span>
  
  

      </a>
    </li>
  

              
            
          </ul>
        </nav>
      
    </li>
  

              
            
              
                
  
  
  
  
    <li class="md-nav__item">
      <a href="../../../design/ui-design/" class="md-nav__link">
        
  
  
  <span class="md-ellipsis">
    
  
    UI 設計
  

    
  </span>
  
  

      </a>
    </li>
  

              
            
              
                
  
  
  
  
    <li class="md-nav__item">
      <a href="../../../design/test_strategy/" class="md-nav__link">
        
  
  
  <span class="md-ellipsis">
    
  
    テスト戦略
  

    
  </span>
  
  

      </a>
    </li>
  

              
            
              
                
  
  
  
  
    <li class="md-nav__item">
      <a href="../../../design/non_functional/" class="md-nav__link">
        
  
  
  <span class="md-ellipsis">
    
  
    非機能要件
  

    
  </span>
  
  

      </a>
    </li>
  

              
            
              
                
  
  
  
  
    <li class="md-nav__item">
      <a href="../../../design/operation/" class="md-nav__link">
        
  
  
  <span class="md-ellipsis">
    
  
    運用要件
  

    
  </span>
  
  

      </a>
    </li>
  

              
            
              
                
  
  
  
  
    <li class="md-nav__item">
      <a href="../../../design/tech_stack/" class="md-nav__link">
        
  
  
  <span class="md-ellipsis">
    
  
    技術スタック選定
  

    
  </span>
  
  

      </a>
    </li>
  

              
            
          </ul>
        </nav>
      
    </li>
  

    
      
      
  
  
  
  
    
    
    
    
      
      
        
      
    
    
    <li class="md-nav__item md-nav__item--nested">
      
        
        
        <input class="md-nav__toggle md-toggle " type="checkbox" id="__nav_4" >
        
          
          <label class="md-nav__link" for="__nav_4" id="__nav_4_label" tabindex="0">
            
  
  
  <span class="md-ellipsis">
    
  
    開発
  

    
  </span>
  
  

            <span class="md-nav__icon md-icon"></span>
          </label>
        
        <nav class="md-nav" data-md-level="1" aria-labelledby="__nav_4_label" aria-expanded="false">
          <label class="md-nav__title" for="__nav_4">
            <span class="md-nav__icon md-icon"></span>
            
  
    開発
  

          </label>
          <ul class="md-nav__list" data-md-scrollfix>
            
              
                
  
  
  
  
    <li class="md-nav__item">
      <a href="../../../development/release_plan/" class="md-nav__link">
        
  
  
  <span class="md-ellipsis">
    
  
    リリース計画
  

    
  </span>
  
  

      </a>
    </li>
  

              
            
              
                
  
  
  
  
    
    
    
    
      
      
        
      
    
    
    <li class="md-nav__item md-nav__item--nested">
      
        
        
        <input class="md-nav__toggle md-toggle " type="checkbox" id="__nav_4_2" >
        
          
          <label class="md-nav__link" for="__nav_4_2" id="__nav_4_2_label" tabindex="0">
            
  
  
  <span class="md-ellipsis">
    
  
    イテレーション計画
  

    
  </span>
  
  

            <span class="md-nav__icon md-icon"></span>
          </label>
        
        <nav class="md-nav" data-md-level="2" aria-labelledby="__nav_4_2_label" aria-expanded="false">
          <label class="md-nav__title" for="__nav_4_2">
            <span class="md-nav__icon md-icon"></span>
            
  
    イテレーション計画
  

          </label>
          <ul class="md-nav__list" data-md-scrollfix>
            
              
                
  
  
  
  
    <li class="md-nav__item">
      <a href="../../../development/iteration_plan-1/" class="md-nav__link">
        
  
  
  <span class="md-ellipsis">
    
  
    イテレーション1
  

    
  </span>
  
  

      </a>
    </li>
  

              
            
          </ul>
        </nav>
      
    </li>
  

              
            
          </ul>
        </nav>
      
    </li>
  

    
      
      
  
  
  
  
    
    
    
    
      
      
        
      
    
    
    <li class="md-nav__item md-nav__item--nested">
      
        
        
        <input class="md-nav__toggle md-toggle " type="checkbox" id="__nav_5" >
        
          
          <label class="md-nav__link" for="__nav_5" id="__nav_5_label" tabindex="0">
            
  
  
  <span class="md-ellipsis">
    
  
    運用
  

    
  </span>
  
  

            <span class="md-nav__icon md-icon"></span>
          </label>
        
        <nav class="md-nav" data-md-level="1" aria-labelledby="__nav_5_label" aria-expanded="false">
          <label class="md-nav__title" for="__nav_5">
            <span class="md-nav__icon md-icon"></span>
            
  
    運用
  

          </label>
          <ul class="md-nav__list" data-md-scrollfix>
            
              
                
  
  
  
  
    <li class="md-nav__item">
      <a href="../../../operation/dev_container/" class="md-nav__link">
        
  
  
  <span class="md-ellipsis">
    
  
    開発コンテナ構築手順書
  

    
  </span>
  
  

      </a>
    </li>
  

              
            
              
                
  
  
  
  
    <li class="md-nav__item">
      <a href="../../../operation/backend_setup/" class="md-nav__link">
        
  
  
  <span class="md-ellipsis">
    
  
    バックエンド構築手順書
  

    
  </span>
  
  

      </a>
    </li>
  

              
            
              
                
  
  
  
  
    <li class="md-nav__item">
      <a href="../../../operation/backend_demo_env/" class="md-nav__link">
        
  
  
  <span class="md-ellipsis">
    
  
    バックエンドデモ環境
  

    
  </span>
  
  

      </a>
    </li>
  

              
            
              
                
  
  
  
  
    <li class="md-nav__item">
      <a href="../../../operation/frontend_setup/" class="md-nav__link">
        
  
  
  <span class="md-ellipsis">
    
  
    フロントエンド構築手順書
  

    
  </span>
  
  

      </a>
    </li>
  

              
            
              
                
  
  
  
  
    <li class="md-nav__item">
      <a href="../../../operation/frontend_demo_env/" class="md-nav__link">
        
  
  
  <span class="md-ellipsis">
    
  
    フロントエンドデモ環境
  

    
  </span>
  
  

      </a>
    </li>
  

              
            
              
                
  
  
  
  
    <li class="md-nav__item">
      <a href="../../../operation/deploy_demo/" class="md-nav__link">
        
  
  
  <span class="md-ellipsis">
    
  
    デモ環境デプロイ
  

    
  </span>
  
  

      </a>
    </li>
  

              
            
              
                
  
  
  
  
    <li class="md-nav__item">
      <a href="../../../operation/third_party_service/" class="md-nav__link">
        
  
  
  <span class="md-ellipsis">
    
  
    外部サービス連携
  

    
  </span>
  
  

      </a>
    </li>
  

              
            
              
                
  
  
  
  
    <li class="md-nav__item">
      <a href="../../../operation/sonarqube_setup/" class="md-nav__link">
        
  
  
  <span class="md-ellipsis">
    
  
    SonarQube セットアップガイド
  

    
  </span>
  
  

      </a>
    </li>
  

              
            
          </ul>
        </nav>
      
    </li>
  

    
      
      
  
  
  
  
    
    
    
    
      
      
        
      
    
    
    <li class="md-nav__item md-nav__item--nested">
      
        
        
        <input class="md-nav__toggle md-toggle " type="checkbox" id="__nav_6" >
        
          
          <label class="md-nav__link" for="__nav_6" id="__nav_6_label" tabindex="0">
            
  
  
  <span class="md-ellipsis">
    
  
    リファレンス
  

    
  </span>
  
  

            <span class="md-nav__icon md-icon"></span>
          </label>
        
        <nav class="md-nav" data-md-level="1" aria-labelledby="__nav_6_label" aria-expanded="false">
          <label class="md-nav__title" for="__nav_6">
            <span class="md-nav__icon md-icon"></span>
            
  
    リファレンス
  

          </label>
          <ul class="md-nav__list" data-md-scrollfix>
            
              
                
  
  
  
  
    <li class="md-nav__item">
      <a href="../../../reference/%E9%96%8B%E7%99%BA%E3%82%AC%E3%82%A4%E3%83%89/" class="md-nav__link">
        
  
  
  <span class="md-ellipsis">
    
  
    開発ガイド
  

    
  </span>
  
  

      </a>
    </li>
  

              
            
              
                
  
  
  
  
    <li class="md-nav__item">
      <a href="../../../reference/%E3%82%88%E3%81%84%E3%82%BD%E3%83%95%E3%83%88%E3%82%A6%E3%82%A7%E3%82%A2%E3%81%A8%E3%81%AF/" class="md-nav__link">
        
  
  
  <span class="md-ellipsis">
    
  
    よいソフトウェアとは
  

    
  </span>
  
  

      </a>
    </li>
  

              
            
              
                
  
  
  
  
    <li class="md-nav__item">
      <a href="../../../reference/%E3%82%B3%E3%83%BC%E3%83%87%E3%82%A3%E3%83%B3%E3%82%B0%E3%81%A8%E3%83%86%E3%82%B9%E3%83%88%E3%82%AC%E3%82%A4%E3%83%89/" class="md-nav__link">
        
  
  
  <span class="md-ellipsis">
    
  
    コーディングとテストガイド
  

    
  </span>
  
  

      </a>
    </li>
  

              
            
              
                
  
  
  
  
    <li class="md-nav__item">
      <a href="../../../reference/%E3%82%A2%E3%83%BC%E3%82%AD%E3%83%86%E3%82%AF%E3%83%81%E3%83%A3%E8%A8%AD%E8%A8%88%E3%82%AC%E3%82%A4%E3%83%89/" class="md-nav__link">
        
  
  
  <span class="md-ellipsis">
    
  
    アーキテクチャ設計ガイド
  

    
  </span>
  
  

      </a>
    </li>
  

              
            
              
                
  
  
  
  
    <li class="md-nav__item">
      <a href="../../../reference/%E3%83%87%E3%83%BC%E3%82%BF%E3%83%A2%E3%83%87%E3%83%AB%E8%A8%AD%E8%A8%88%E3%82%AC%E3%82%A4%E3%83%89/" class="md-nav__link">
        
  
  
  <span class="md-ellipsis">
    
  
    データモデル設計ガイド
  

    
  </span>
  
  

      </a>
    </li>
  

              
            
              
                
  
  
  
  
    <li class="md-nav__item">
      <a href="../../../reference/%E3%83%89%E3%83%A1%E3%82%A4%E3%83%B3%E3%83%A2%E3%83%87%E3%83%AB%E8%A8%AD%E8%A8%88%E3%82%AC%E3%82%A4%E3%83%89/" class="md-nav__link">
        
  
  
  <span class="md-ellipsis">
    
  
    ドメインモデル設計ガイド
  

    
  </span>
  
  

      </a>
    </li>
  

              
            
              
                
  
  
  
  
    <li class="md-nav__item">
      <a href="../../../reference/UI%E8%A8%AD%E8%A8%88%E3%82%AC%E3%82%A4%E3%83%89/" class="md-nav__link">
        
  
  
  <span class="md-ellipsis">
    
  
    UI設計ガイド
  

    
  </span>
  
  

      </a>
    </li>
  

              
            
              
                
  
  
  
  
    <li class="md-nav__item">
      <a href="../../../reference/%E3%83%86%E3%82%B9%E3%83%88%E6%88%A6%E7%95%A5%E3%82%AC%E3%82%A4%E3%83%89/" class="md-nav__link">
        
  
  
  <span class="md-ellipsis">
    
  
    テスト戦略ガイド
  

    
  </span>
  
  

      </a>
    </li>
  

              
            
              
                
  
  
  
  
    <li class="md-nav__item">
      <a href="../../../reference/%E9%9D%9E%E6%A9%9F%E8%83%BD%E8%A6%81%E4%BB%B6%E5%AE%9A%E7%BE%A9%E3%82%AC%E3%82%A4%E3%83%89/" class="md-nav__link">
        
  
  
  <span class="md-ellipsis">
    
  
    非機能要件定義ガイド
  

    
  </span>
  
  

      </a>
    </li>
  

              
            
              
                
  
  
  
  
    <li class="md-nav__item">
      <a href="../../../reference/%E9%81%8B%E7%94%A8%E8%A6%81%E4%BB%B6%E5%AE%9A%E7%BE%A9%E3%82%AC%E3%82%A4%E3%83%89/" class="md-nav__link">
        
  
  
  <span class="md-ellipsis">
    
  
    運用要件定義ガイド
  

    
  </span>
  
  

      </a>
    </li>
  

              
            
              
                
  
  
  
  
    <li class="md-nav__item">
      <a href="../../../reference/%E8%A6%81%E4%BB%B6%E5%AE%9A%E7%BE%A9%E3%82%AC%E3%82%A4%E3%83%89/" class="md-nav__link">
        
  
  
  <span class="md-ellipsis">
    
  
    要件定義ガイド
  

    
  </span>
  
  

      </a>
    </li>
  

              
            
              
                
  
  
  
  
    <li class="md-nav__item">
      <a href="../../../reference/%E3%83%A6%E3%83%BC%E3%82%B9%E3%82%B1%E3%83%BC%E3%82%B9%E4%BD%9C%E6%88%90%E3%82%AC%E3%82%A4%E3%83%89/" class="md-nav__link">
        
  
  
  <span class="md-ellipsis">
    
  
    ユースケース作成ガイド
  

    
  </span>
  
  

      </a>
    </li>
  

              
            
              
                
  
  
  
  
    <li class="md-nav__item">
      <a href="../../../reference/%E3%83%AA%E3%83%AA%E3%83%BC%E3%82%B9%E3%83%BB%E3%82%A4%E3%83%86%E3%83%AC%E3%83%BC%E3%82%B7%E3%83%A7%E3%83%B3%E8%A8%88%E7%94%BB%E3%82%AC%E3%82%A4%E3%83%89/" class="md-nav__link">
        
  
  
  <span class="md-ellipsis">
    
  
    リリース・イテレーション計画ガイド
  

    
  </span>
  
  

      </a>
    </li>
  

              
            
              
                
  
  
  
  
    <li class="md-nav__item">
      <a href="../../../reference/%E3%82%A8%E3%82%AF%E3%82%B9%E3%83%88%E3%83%AA%E3%83%BC%E3%83%A0%E3%83%97%E3%83%AD%E3%82%B0%E3%83%A9%E3%83%9F%E3%83%B3%E3%82%B0/" class="md-nav__link">
        
  
  
  <span class="md-ellipsis">
    
  
    エクストリームプログラミング
  

    
  </span>
  
  

      </a>
    </li>
  

              
            
              
                
  
  
  
  
    <li class="md-nav__item">
      <a href="../../../reference/%E3%82%A4%E3%83%B3%E3%83%95%E3%83%A9%E8%A8%AD%E8%A8%88%E3%82%AC%E3%82%A4%E3%83%89/" class="md-nav__link">
        
  
  
  <span class="md-ellipsis">
    
  
    インフラ設計ガイド
  

    
  </span>
  
  

      </a>
    </li>
  

              
            
              
                
  
  
  
  
    <li class="md-nav__item">
      <a href="../../../reference/Java%E3%82%A2%E3%83%97%E3%83%AA%E3%82%B1%E3%83%BC%E3%82%B7%E3%83%A7%E3%83%B3%E7%92%B0%E5%A2%83%E6%A7%8B%E7%AF%89%E3%82%AC%E3%82%A4%E3%83%89/" class="md-nav__link">
        
  
  
  <span class="md-ellipsis">
    
  
    Javaアプリケーション環境構築ガイド
  

    
  </span>
  
  

      </a>
    </li>
  

              
            
              
                
  
  
  
  
    <li class="md-nav__item">
      <a href="../../../reference/TypeScript%E3%82%A2%E3%83%97%E3%83%AA%E3%82%B1%E3%83%BC%E3%82%B7%E3%83%A7%E3%83%B3%E7%92%B0%E5%A2%83%E6%A7%8B%E7%AF%89%E3%82%AC%E3%82%A4%E3%83%89/" class="md-nav__link">
        
  
  
  <span class="md-ellipsis">
    
  
    TypeScriptアプリケーション環境構築ガイド
  

    
  </span>
  
  

      </a>
    </li>
  

              
            
          </ul>
        </nav>
      
    </li>
  

    
      
      
  
  
  
  
    
    
    
    
      
      
        
      
    
    
    <li class="md-nav__item md-nav__item--nested">
      
        
        
        <input class="md-nav__toggle md-toggle " type="checkbox" id="__nav_7" >
        
          
          <label class="md-nav__link" for="__nav_7" id="__nav_7_label" tabindex="0">
            
  
  
  <span class="md-ellipsis">
    
  
    テンプレート
  

    
  </span>
  
  

            <span class="md-nav__icon md-icon"></span>
          </label>
        
        <nav class="md-nav" data-md-level="1" aria-labelledby="__nav_7_label" aria-expanded="false">
          <label class="md-nav__title" for="__nav_7">
            <span class="md-nav__icon md-icon"></span>
            
  
    テンプレート
  

          </label>
          <ul class="md-nav__list" data-md-scrollfix>
            
              
                
  
  
  
  
    <li class="md-nav__item">
      <a href="../../../template/ADR/" class="md-nav__link">
        
  
  
  <span class="md-ellipsis">
    
  
    ADR
  

    
  </span>
  
  

      </a>
    </li>
  

              
            
              
                
  
  
  
  
    <li class="md-nav__item">
      <a href="../../../template/%E3%82%A4%E3%83%86%E3%83%AC%E3%83%BC%E3%82%B7%E3%83%A7%E3%83%B3%E5%AE%8C%E4%BA%86%E5%A0%B1%E5%91%8A%E6%9B%B8/" class="md-nav__link">
        
  
  
  <span class="md-ellipsis">
    
  
    イテレーション完了報告書
  

    
  </span>
  
  

      </a>
    </li>
  

              
            
              
                
  
  
  
  
    <li class="md-nav__item">
      <a href="../../../template/%E3%82%A4%E3%83%B3%E3%82%BB%E3%83%97%E3%82%B7%E3%83%A7%E3%83%B3%E3%83%87%E3%83%83%E3%82%AD/" class="md-nav__link">
        
  
  
  <span class="md-ellipsis">
    
  
    インセプションデッキ
  

    
  </span>
  
  

      </a>
    </li>
  

              
            
              
                
  
  
  
  
    <li class="md-nav__item">
      <a href="../../../template/%E3%81%BE%E3%81%9A%E3%81%93%E3%82%8C%E3%82%92%E8%AA%AD%E3%82%82%E3%81%86%E3%83%AA%E3%82%B9%E3%83%88/" class="md-nav__link">
        
  
  
  <span class="md-ellipsis">
    
  
    まずこれを読もうリスト
  

    
  </span>
  
  

      </a>
    </li>
  

              
            
              
                
  
  
  
  
    <li class="md-nav__item">
      <a href="../../../template/%E5%AE%8C%E5%85%A8%E5%BD%A2%E5%BC%8F%E3%81%AE%E3%83%A6%E3%83%BC%E3%82%B9%E3%82%B1%E3%83%BC%E3%82%B9/" class="md-nav__link">
        
  
  
  <span class="md-ellipsis">
    
  
    完全形式のユースケース
  

    
  </span>
  
  

      </a>
    </li>
  

              
            
              
                
  
  
  
  
    <li class="md-nav__item">
      <a href="../../../template/%E8%A6%81%E4%BB%B6%E5%AE%9A%E7%BE%A9/" class="md-nav__link">
        
  
  
  <span class="md-ellipsis">
    
  
    要件定義
  

    
  </span>
  
  

      </a>
    </li>
  

              
            
              
                
  
  
  
  
    <li class="md-nav__item">
      <a href="../../../template/%E8%A8%AD%E8%A8%88/" class="md-nav__link">
        
  
  
  <span class="md-ellipsis">
    
  
    設計
  

    
  </span>
  
  

      </a>
    </li>
  

              
            
          </ul>
        </nav>
      
    </li>
  

    
      
      
  
  
    
  
  
  
    
    
    
    
      
        
        
      
      
        
      
    
    
    <li class="md-nav__item md-nav__item--active md-nav__item--section md-nav__item--nested">
      
        
        
        <input class="md-nav__toggle md-toggle " type="checkbox" id="__nav_8" checked>
        
          
          <label class="md-nav__link" for="__nav_8" id="__nav_8_label" tabindex="">
            
  
  
  <span class="md-ellipsis">
    
  
    実践ガイド
  

    
  </span>
  
  

            <span class="md-nav__icon md-icon"></span>
          </label>
        
        <nav class="md-nav" data-md-level="1" aria-labelledby="__nav_8_label" aria-expanded="true">
          <label class="md-nav__title" for="__nav_8">
            <span class="md-nav__icon md-icon"></span>
            
  
    実践ガイド
  

          </label>
          <ul class="md-nav__list" data-md-scrollfix>
            
              
                
  
  
  
  
    <li class="md-nav__item">
      <a href="../../" class="md-nav__link">
        
  
  
  <span class="md-ellipsis">
    
  
    概要
  

    
  </span>
  
  

      </a>
    </li>
  

              
            
              
                
  
  
    
  
  
  
    
    
    
    
      
      
        
          
          
        
      
    
    
    <li class="md-nav__item md-nav__item--active md-nav__item--section md-nav__item--nested">
      
        
        
        <input class="md-nav__toggle md-toggle " type="checkbox" id="__nav_8_2" checked>
        
          
          <label class="md-nav__link" for="__nav_8_2" id="__nav_8_2_label" tabindex="">
            
  
  
  <span class="md-ellipsis">
    
  
    バックエンド編（Java版）
  

    
  </span>
  
  

            <span class="md-nav__icon md-icon"></span>
          </label>
        
        <nav class="md-nav" data-md-level="2" aria-labelledby="__nav_8_2_label" aria-expanded="true">
          <label class="md-nav__title" for="__nav_8_2">
            <span class="md-nav__icon md-icon"></span>
            
  
    バックエンド編（Java版）
  

          </label>
          <ul class="md-nav__list" data-md-scrollfix>
            
              
                
  
  
  
  
    <li class="md-nav__item">
      <a href="../chapter00/" class="md-nav__link">
        
  
  
  <span class="md-ellipsis">
    
  
    はじめに
  

    
  </span>
  
  

      </a>
    </li>
  

              
            
              
                
  
  
  
  
    <li class="md-nav__item">
      <a href="../chapter01/" class="md-nav__link">
        
  
  
  <span class="md-ellipsis">
    
  
    第1章
  

    
  </span>
  
  

      </a>
    </li>
  

              
            
              
                
  
  
  
  
    <li class="md-nav__item">
      <a href="../chapter02/" class="md-nav__link">
        
  
  
  <span class="md-ellipsis">
    
  
    第2章
  

    
  </span>
  
  

      </a>
    </li>
  

              
            
              
                
  
  
  
  
    <li class="md-nav__item">
      <a href="../chapter03/" class="md-nav__link">
        
  
  
  <span class="md-ellipsis">
    
  
    第3章
  

    
  </span>
  
  

      </a>
    </li>
  

              
            
              
                
  
  
  
  
    <li class="md-nav__item">
      <a href="../chapter04/" class="md-nav__link">
        
  
  
  <span class="md-ellipsis">
    
  
    第4章
  

    
  </span>
  
  

      </a>
    </li>
  

              
            
              
                
  
  
  
  
    <li class="md-nav__item">
      <a href="../chapter05/" class="md-nav__link">
        
  
  
  <span class="md-ellipsis">
    
  
    第5章
  

    
  </span>
  
  

      </a>
    </li>
  

              
            
              
                
  
  
  
  
    <li class="md-nav__item">
      <a href="../chapter06/" class="md-nav__link">
        
  
  
  <span class="md-ellipsis">
    
  
    第6章
  

    
  </span>
  
  

      </a>
    </li>
  

              
            
              
                
  
  
  
  
    <li class="md-nav__item">
      <a href="../chapter07/" class="md-nav__link">
        
  
  
  <span class="md-ellipsis">
    
  
    第7章
  

    
  </span>
  
  

      </a>
    </li>
  

              
            
              
                
  
  
  
  
    <li class="md-nav__item">
      <a href="../chapter08/" class="md-nav__link">
        
  
  
  <span class="md-ellipsis">
    
  
    第8章
  

    
  </span>
  
  

      </a>
    </li>
  

              
            
              
                
  
  
  
  
    <li class="md-nav__item">
      <a href="../chapter09/" class="md-nav__link">
        
  
  
  <span class="md-ellipsis">
    
  
    第9章
  

    
  </span>
  
  

      </a>
    </li>
  

              
            
              
                
  
  
  
  
    <li class="md-nav__item">
      <a href="../chapter10/" class="md-nav__link">
        
  
  
  <span class="md-ellipsis">
    
  
    第10章
  

    
  </span>
  
  

      </a>
    </li>
  

              
            
              
                
  
  
  
  
    <li class="md-nav__item">
      <a href="../chapter11/" class="md-nav__link">
        
  
  
  <span class="md-ellipsis">
    
  
    第11章
  

    
  </span>
  
  

      </a>
    </li>
  

              
            
              
                
  
  
  
  
    <li class="md-nav__item">
      <a href="../chapter12/" class="md-nav__link">
        
  
  
  <span class="md-ellipsis">
    
  
    第12章
  

    
  </span>
  
  

      </a>
    </li>
  

              
            
              
                
  
  
  
  
    <li class="md-nav__item">
      <a href="../chapter13/" class="md-nav__link">
        
  
  
  <span class="md-ellipsis">
    
  
    第13章
  

    
  </span>
  
  

      </a>
    </li>
  

              
            
              
                
  
  
  
  
    <li class="md-nav__item">
      <a href="../chapter14/" class="md-nav__link">
        
  
  
  <span class="md-ellipsis">
    
  
    第14章
  

    
  </span>
  
  

      </a>
    </li>
  

              
            
              
                
  
  
  
  
    <li class="md-nav__item">
      <a href="../chapter15/" class="md-nav__link">
        
  
  
  <span class="md-ellipsis">
    
  
    第15章
  

    
  </span>
  
  

      </a>
    </li>
  

              
            
              
                
  
  
  
  
    <li class="md-nav__item">
      <a href="../chapter16/" class="md-nav__link">
        
  
  
  <span class="md-ellipsis">
    
  
    第16章
  

    
  </span>
  
  

      </a>
    </li>
  

              
            
              
                
  
  
  
  
    <li class="md-nav__item">
      <a href="../chapter17/" class="md-nav__link">
        
  
  
  <span class="md-ellipsis">
    
  
    第17章
  

    
  </span>
  
  

      </a>
    </li>
  

              
            
              
                
  
  
  
  
    <li class="md-nav__item">
      <a href="../chapter18/" class="md-nav__link">
        
  
  
  <span class="md-ellipsis">
    
  
    第18章
  

    
  </span>
  
  

      </a>
    </li>
  

              
            
              
                
  
  
  
  
    <li class="md-nav__item">
      <a href="../chapter19/" class="md-nav__link">
        
  
  
  <span class="md-ellipsis">
    
  
    第19章
  

    
  </span>
  
  

      </a>
    </li>
  

              
            
              
                
  
  
  
  
    <li class="md-nav__item">
      <a href="../chapter20/" class="md-nav__link">
        
  
  
  <span class="md-ellipsis">
    
  
    第20章
  

    
  </span>
  
  

      </a>
    </li>
  

              
            
              
                
  
  
  
  
    <li class="md-nav__item">
      <a href="../chapter21/" class="md-nav__link">
        
  
  
  <span class="md-ellipsis">
    
  
    第21章
  

    
  </span>
  
  

      </a>
    </li>
  

              
            
              
                
  
  
    
  
  
  
    <li class="md-nav__item md-nav__item--active">
      
      <input class="md-nav__toggle md-toggle" type="checkbox" id="__toc">
      
      
        
      
      
        <label class="md-nav__link md-nav__link--active" for="__toc">
          
  
  
  <span class="md-ellipsis">
    
  
    第22章
  

    
  </span>
  
  

          <span class="md-nav__icon md-icon"></span>
        </label>
      
      <a href="./" class="md-nav__link md-nav__link--active">
        
  
  
  <span class="md-ellipsis">
    
  
    第22章
  

    
  </span>
  
  

      </a>
      
        

<nav class="md-nav md-nav--secondary" aria-label="Table of contents">
  
  
  
    
  
  
    <label class="md-nav__title" for="__toc">
      <span class="md-nav__icon md-icon"></span>
      Table of contents
    </label>
    <ul class="md-nav__list" data-md-component="toc" data-md-scrollfix>
      
        <li class="md-nav__item">
  <a href="#221" class="md-nav__link">
    <span class="md-ellipsis">
      
        22.1 テストピラミッド
      
    </span>
  </a>
  
    <nav class="md-nav" aria-label="22.1 テストピラミッド">
      <ul class="md-nav__list">
        
          <li class="md-nav__item">
  <a href="#_1" class="md-nav__link">
    <span class="md-ellipsis">
      
        テストピラミッドの概要
      
    </span>
  </a>
  
</li>
        
          <li class="md-nav__item">
  <a href="#_2" class="md-nav__link">
    <span class="md-ellipsis">
      
        財務会計システムにおけるテスト分類
      
    </span>
  </a>
  
</li>
        
      </ul>
    </nav>
  
</li>
      
        <li class="md-nav__item">
  <a href="#222" class="md-nav__link">
    <span class="md-ellipsis">
      
        22.2 単体テスト
      
    </span>
  </a>
  
    <nav class="md-nav" aria-label="22.2 単体テスト">
      <ul class="md-nav__list">
        
          <li class="md-nav__item">
  <a href="#_3" class="md-nav__link">
    <span class="md-ellipsis">
      
        単体テストの基本構造
      
    </span>
  </a>
  
</li>
        
          <li class="md-nav__item">
  <a href="#_4" class="md-nav__link">
    <span class="md-ellipsis">
      
        テストの分類構造
      
    </span>
  </a>
  
</li>
        
          <li class="md-nav__item">
  <a href="#_5" class="md-nav__link">
    <span class="md-ellipsis">
      
        仕訳ドメインモデルのテスト
      
    </span>
  </a>
  
</li>
        
          <li class="md-nav__item">
  <a href="#_6" class="md-nav__link">
    <span class="md-ellipsis">
      
        財務指標計算のテスト
      
    </span>
  </a>
  
</li>
        
      </ul>
    </nav>
  
</li>
      
        <li class="md-nav__item">
  <a href="#223-testcontainers" class="md-nav__link">
    <span class="md-ellipsis">
      
        22.3 Testcontainers の活用
      
    </span>
  </a>
  
    <nav class="md-nav" aria-label="22.3 Testcontainers の活用">
      <ul class="md-nav__list">
        
          <li class="md-nav__item">
  <a href="#testcontainers" class="md-nav__link">
    <span class="md-ellipsis">
      
        Testcontainers とは
      
    </span>
  </a>
  
</li>
        
          <li class="md-nav__item">
  <a href="#_7" class="md-nav__link">
    <span class="md-ellipsis">
      
        統合テスト用アノテーション
      
    </span>
  </a>
  
</li>
        
          <li class="md-nav__item">
  <a href="#_8" class="md-nav__link">
    <span class="md-ellipsis">
      
        リポジトリテストの実装
      
    </span>
  </a>
  
</li>
        
          <li class="md-nav__item">
  <a href="#testcontainers_1" class="md-nav__link">
    <span class="md-ellipsis">
      
        Testcontainers の動作フロー
      
    </span>
  </a>
  
</li>
        
          <li class="md-nav__item">
  <a href="#api" class="md-nav__link">
    <span class="md-ellipsis">
      
        API 統合テスト
      
    </span>
  </a>
  
</li>
        
          <li class="md-nav__item">
  <a href="#_9" class="md-nav__link">
    <span class="md-ellipsis">
      
        テストデータファクトリ
      
    </span>
  </a>
  
</li>
        
      </ul>
    </nav>
  
</li>
      
        <li class="md-nav__item">
  <a href="#224" class="md-nav__link">
    <span class="md-ellipsis">
      
        22.4 受け入れテスト
      
    </span>
  </a>
  
    <nav class="md-nav" aria-label="22.4 受け入れテスト">
      <ul class="md-nav__list">
        
          <li class="md-nav__item">
  <a href="#gherkin" class="md-nav__link">
    <span class="md-ellipsis">
      
        Gherkin による仕様記述
      
    </span>
  </a>
  
</li>
        
          <li class="md-nav__item">
  <a href="#_10" class="md-nav__link">
    <span class="md-ellipsis">
      
        財務諸表生成のシナリオ
      
    </span>
  </a>
  
</li>
        
          <li class="md-nav__item">
  <a href="#bdd" class="md-nav__link">
    <span class="md-ellipsis">
      
        BDD アプローチのワークフロー
      
    </span>
  </a>
  
</li>
        
          <li class="md-nav__item">
  <a href="#_11" class="md-nav__link">
    <span class="md-ellipsis">
      
        ステップ定義の実装例
      
    </span>
  </a>
  
</li>
        
      </ul>
    </nav>
  
</li>
      
        <li class="md-nav__item">
  <a href="#225" class="md-nav__link">
    <span class="md-ellipsis">
      
        22.5 テストの組織化
      
    </span>
  </a>
  
    <nav class="md-nav" aria-label="22.5 テストの組織化">
      <ul class="md-nav__list">
        
          <li class="md-nav__item">
  <a href="#_12" class="md-nav__link">
    <span class="md-ellipsis">
      
        ディレクトリ構造
      
    </span>
  </a>
  
</li>
        
          <li class="md-nav__item">
  <a href="#_13" class="md-nav__link">
    <span class="md-ellipsis">
      
        テスト実行コマンド
      
    </span>
  </a>
  
</li>
        
          <li class="md-nav__item">
  <a href="#_14" class="md-nav__link">
    <span class="md-ellipsis">
      
        テスト設定ファイル
      
    </span>
  </a>
  
</li>
        
      </ul>
    </nav>
  
</li>
      
        <li class="md-nav__item">
  <a href="#_15" class="md-nav__link">
    <span class="md-ellipsis">
      
        まとめ
      
    </span>
  </a>
  
    <nav class="md-nav" aria-label="まとめ">
      <ul class="md-nav__list">
        
          <li class="md-nav__item">
  <a href="#_16" class="md-nav__link">
    <span class="md-ellipsis">
      
        重要なポイント
      
    </span>
  </a>
  
</li>
        
          <li class="md-nav__item">
  <a href="#_17" class="md-nav__link">
    <span class="md-ellipsis">
      
        テスト数の目安
      
    </span>
  </a>
  
</li>
        
          <li class="md-nav__item">
  <a href="#_18" class="md-nav__link">
    <span class="md-ellipsis">
      
        アーキテクチャ層とテスト手法の対応
      
    </span>
  </a>
  
</li>
        
      </ul>
    </nav>
  
</li>
      
    </ul>
  
</nav>
      
    </li>
  

              
            
              
                
  
  
  
  
    <li class="md-nav__item">
      <a href="../chapter23/" class="md-nav__link">
        
  
  
  <span class="md-ellipsis">
    
  
    第23章
  

    
  </span>
  
  

      </a>
    </li>
  

              
            
              
                
  
  
  
  
    <li class="md-nav__item">
      <a href="../chapter24/" class="md-nav__link">
        
  
  
  <span class="md-ellipsis">
    
  
    第24章
  

    
  </span>
  
  

      </a>
    </li>
  

              
            
              
                
  
  
  
  
    <li class="md-nav__item">
      <a href="../chapter25/" class="md-nav__link">
        
  
  
  <span class="md-ellipsis">
    
  
    第25章
  

    
  </span>
  
  

      </a>
    </li>
  

              
            
              
                
  
  
  
  
    <li class="md-nav__item">
      <a href="../chapter26/" class="md-nav__link">
        
  
  
  <span class="md-ellipsis">
    
  
    第26章
  

    
  </span>
  
  

      </a>
    </li>
  

              
            
              
                
  
  
  
  
    <li class="md-nav__item">
      <a href="../chapter27/" class="md-nav__link">
        
  
  
  <span class="md-ellipsis">
    
  
    第27章
  

    
  </span>
  
  

      </a>
    </li>
  

              
            
              
                
  
  
  
  
    <li class="md-nav__item">
      <a href="../chapter28/" class="md-nav__link">
        
  
  
  <span class="md-ellipsis">
    
  
    第28章
  

    
  </span>
  
  

      </a>
    </li>
  

              
            
              
                
  
  
  
  
    <li class="md-nav__item">
      <a href="../chapter29/" class="md-nav__link">
        
  
  
  <span class="md-ellipsis">
    
  
    第29章
  

    
  </span>
  
  

      </a>
    </li>
  

              
            
              
                
  
  
  
  
    <li class="md-nav__item">
      <a href="../chapter30/" class="md-nav__link">
        
  
  
  <span class="md-ellipsis">
    
  
    第30章
  

    
  </span>
  
  

      </a>
    </li>
  

              
            
              
                
  
  
  
  
    <li class="md-nav__item">
      <a href="../chapter31/" class="md-nav__link">
        
  
  
  <span class="md-ellipsis">
    
  
    第31章
  

    
  </span>
  
  

      </a>
    </li>
  

              
            
              
                
  
  
  
  
    <li class="md-nav__item">
      <a href="../chapter32/" class="md-nav__link">
        
  
  
  <span class="md-ellipsis">
    
  
    第32章
  

    
  </span>
  
  

      </a>
    </li>
  

              
            
          </ul>
        </nav>
      
    </li>
  

              
            
              
                
  
  
  
  
    
    
    
    
      
      
        
          
          
        
      
    
    
    <li class="md-nav__item md-nav__item--section md-nav__item--nested">
      
        
        
        <input class="md-nav__toggle md-toggle " type="checkbox" id="__nav_8_3" >
        
          
          <label class="md-nav__link" for="__nav_8_3" id="__nav_8_3_label" tabindex="">
            
  
  
  <span class="md-ellipsis">
    
  
    フロントエンド編（React版）
  

    
  </span>
  
  

            <span class="md-nav__icon md-icon"></span>
          </label>
        
        <nav class="md-nav" data-md-level="2" aria-labelledby="__nav_8_3_label" aria-expanded="false">
          <label class="md-nav__title" for="__nav_8_3">
            <span class="md-nav__icon md-icon"></span>
            
  
    フロントエンド編（React版）
  

          </label>
          <ul class="md-nav__list" data-md-scrollfix>
            
              
                
  
  
  
  
    <li class="md-nav__item">
      <a href="../../frontend/chapter00/" class="md-nav__link">
        
  
  
  <span class="md-ellipsis">
    
  
    はじめに
  

    
  </span>
  
  

      </a>
    </li>
  

              
            
              
                
  
  
  
  
    <li class="md-nav__item">
      <a href="../../frontend/chapter01/" class="md-nav__link">
        
  
  
  <span class="md-ellipsis">
    
  
    第1章
  

    
  </span>
  
  

      </a>
    </li>
  

              
            
              
                
  
  
  
  
    <li class="md-nav__item">
      <a href="../../frontend/chapter02/" class="md-nav__link">
        
  
  
  <span class="md-ellipsis">
    
  
    第2章
  

    
  </span>
  
  

      </a>
    </li>
  

              
            
              
                
  
  
  
  
    <li class="md-nav__item">
      <a href="../../frontend/chapter03/" class="md-nav__link">
        
  
  
  <span class="md-ellipsis">
    
  
    第3章
  

    
  </span>
  
  

      </a>
    </li>
  

              
            
              
                
  
  
  
  
    <li class="md-nav__item">
      <a href="../../frontend/chapter04/" class="md-nav__link">
        
  
  
  <span class="md-ellipsis">
    
  
    第4章
  

    
  </span>
  
  

      </a>
    </li>
  

              
            
              
                
  
  
  
  
    <li class="md-nav__item">
      <a href="../../frontend/chapter05/" class="md-nav__link">
        
  
  
  <span class="md-ellipsis">
    
  
    第5章
  

    
  </span>
  
  

      </a>
    </li>
  

              
            
              
                
  
  
  
  
    <li class="md-nav__item">
      <a href="../../frontend/chapter06/" class="md-nav__link">
        
  
  
  <span class="md-ellipsis">
    
  
    第6章
  

    
  </span>
  
  

      </a>
    </li>
  

              
            
              
                
  
  
  
  
    <li class="md-nav__item">
      <a href="../../frontend/chapter07/" class="md-nav__link">
        
  
  
  <span class="md-ellipsis">
    
  
    第7章
  

    
  </span>
  
  

      </a>
    </li>
  

              
            
              
                
  
  
  
  
    <li class="md-nav__item">
      <a href="../../frontend/chapter08/" class="md-nav__link">
        
  
  
  <span class="md-ellipsis">
    
  
    第8章
  

    
  </span>
  
  

      </a>
    </li>
  

              
            
              
                
  
  
  
  
    <li class="md-nav__item">
      <a href="../../frontend/chapter09/" class="md-nav__link">
        
  
  
  <span class="md-ellipsis">
    
  
    第9章
  

    
  </span>
  
  

      </a>
    </li>
  

              
            
              
                
  
  
  
  
    <li class="md-nav__item">
      <a href="../../frontend/chapter10/" class="md-nav__link">
        
  
  
  <span class="md-ellipsis">
    
  
    第10章
  

    
  </span>
  
  

      </a>
    </li>
  

              
            
              
                
  
  
  
  
    <li class="md-nav__item">
      <a href="../../frontend/chapter11/" class="md-nav__link">
        
  
  
  <span class="md-ellipsis">
    
  
    第11章
  

    
  </span>
  
  

      </a>
    </li>
  

              
            
              
                
  
  
  
  
    <li class="md-nav__item">
      <a href="../../frontend/chapter12/" class="md-nav__link">
        
  
  
  <span class="md-ellipsis">
    
  
    第12章
  

    
  </span>
  
  

      </a>
    </li>
  

              
            
              
                
  
  
  
  
    <li class="md-nav__item">
      <a href="../../frontend/chapter13/" class="md-nav__link">
        
  
  
  <span class="md-ellipsis">
    
  
    第13章
  

    
  </span>
  
  

      </a>
    </li>
  

              
            
              
                
  
  
  
  
    <li class="md-nav__item">
      <a href="../../frontend/chapter14/" class="md-nav__link">
        
  
  
  <span class="md-ellipsis">
    
  
    第14章
  

    
  </span>
  
  

      </a>
    </li>
  

              
            
              
                
  
  
  
  
    <li class="md-nav__item">
      <a href="../../frontend/chapter15/" class="md-nav__link">
        
  
  
  <span class="md-ellipsis">
    
  
    第15章
  

    
  </span>
  
  

      </a>
    </li>
  

              
            
              
                
  
  
  
  
    <li class="md-nav__item">
      <a href="../../frontend/chapter16/" class="md-nav__link">
        
  
  
  <span class="md-ellipsis">
    
  
    第16章
  

    
  </span>
  
  

      </a>
    </li>
  

              
            
              
                
  
  
  
  
    <li class="md-nav__item">
      <a href="../../frontend/chapter17/" class="md-nav__link">
        
  
  
  <span class="md-ellipsis">
    
  
    第17章
  

    
  </span>
  
  

      </a>
    </li>
  

              
            
              
                
  
  
  
  
    <li class="md-nav__item">
      <a href="../../frontend/chapter18/" class="md-nav__link">
        
  
  
  <span class="md-ellipsis">
    
  
    第18章
  

    
  </span>
  
  

      </a>
    </li>
  

              
            
              
                
  
  
  
  
    <li class="md-nav__item">
      <a href="../../frontend/chapter19/" class="md-nav__link">
        
  
  
  <span class="md-ellipsis">
    
  
    第19章
  

    
  </span>
  
  

      </a>
    </li>
  

              
            
              
                
  
  
  
  
    <li class="md-nav__item">
      <a href="../../frontend/chapter20/" class="md-nav__link">
        
  
  
  <span class="md-ellipsis">
    
  
    第20章
  

    
  </span>
  
  

      </a>
    </li>
  

              
            
              
                
  
  
  
  
    <li class="md-nav__item">
      <a href="../../frontend/chapter21/" class="md-nav__link">
        
  
  
  <span class="md-ellipsis">
    
  
    第21章
  

    
  </span>
  
  

      </a>
    </li>
  

              
            
              
                
  
  
  
  
    <li class="md-nav__item">
      <a href="../../frontend/chapter22/" class="md-nav__link">
        
  
  
  <span class="md-ellipsis">
    
  
    第22章
  

    
  </span>
  
  

      </a>
    </li>
  

              
            
              
                
  
  
  
  
    <li class="md-nav__item">
      <a href="../../frontend/chapter23/" class="md-nav__link">
        
  
  
  <span class="md-ellipsis">
    
  
    第23章
  

    
  </span>
  
  

      </a>
    </li>
  

              
            
              
                
  
  
  
  
    <li class="md-nav__item">
      <a href="../../frontend/chapter24/" class="md-nav__link">
        
  
  
  <span class="md-ellipsis">
    
  
    第24章
  

    
  </span>
  
  

      </a>
    </li>
  

              
            
          </ul>
        </nav>
      
    </li>
  

              
            
          </ul>
        </nav>
      
    </li>
  

    
  </ul>
</nav>
                  </div>
                </div>
              </div>
            
            
          
          
            <div class="md-content" data-md-component="content">
              
              <article class="md-content__inner md-typeset">
                
                  


  
  


<h1 id="22">第22章: テスト戦略<a class="headerlink" href="#22" title="Permanent link">&para;</a></h1>
<h2 id="221">22.1 テストピラミッド<a class="headerlink" href="#221" title="Permanent link">&para;</a></h2>
<h3 id="_1">テストピラミッドの概要<a class="headerlink" href="#_1" title="Permanent link">&para;</a></h3>
<p>テストピラミッドは、Mike Cohn が提唱したテスト戦略の概念です。下から上に向かって、単体テスト、統合テスト、E2E テストの3層で構成されます。本章では、財務会計システムにおけるテスト戦略を解説します。</p>
<p><img src="data:image/svg+xml;base64,PHN2ZyB4bWxucz0iaHR0cDovL3d3dy53My5vcmcvMjAwMC9zdmciIHhtbG5zOnhsaW5rPSJodHRwOi8vd3d3LnczLm9yZy8xOTk5L3hsaW5rIiBjb250ZW50U3R5bGVUeXBlPSJ0ZXh0L2NzcyIgZGF0YS1kaWFncmFtLXR5cGU9IkRFU0NSSVBUSU9OIiBoZWlnaHQ9IjQxMnB4IiBwcmVzZXJ2ZUFzcGVjdFJhdGlvPSJub25lIiBzdHlsZT0id2lkdGg6Mzg4cHg7aGVpZ2h0OjQxMnB4O2JhY2tncm91bmQ6I0ZGRkZGRjsiIHZlcnNpb249IjEuMSIgdmlld0JveD0iMCAwIDM4OCA0MTIiIHdpZHRoPSIzODhweCIgem9vbUFuZFBhbj0ibWFnbmlmeSI+PHRpdGxlPiYjMTI0ODY7JiMxMjQ3MzsmIzEyNDg4OyYjMTI1MDA7JiMxMjUyMTsmIzEyNTExOyYjMTI0ODM7JiMxMjQ4OTs8L3RpdGxlPjxkZWZzLz48Zz48ZyBjbGFzcz0idGl0bGUiIGRhdGEtc291cmNlLWxpbmU9IjEiPjx0ZXh0IGZpbGw9IiMwMDAwMDAiIGZvbnQtZmFtaWx5PSJzYW5zLXNlcmlmIiBmb250LXNpemU9IjE0IiBmb250LXdlaWdodD0iYm9sZCIgbGVuZ3RoQWRqdXN0PSJzcGFjaW5nIiB0ZXh0TGVuZ3RoPSIxMTEuOTk5NSIgeD0iMTMxLjA1NTIiIHk9IjIyLjk5NTEiPiYjMTI0ODY7JiMxMjQ3MzsmIzEyNDg4OyYjMTI1MDA7JiMxMjUyMTsmIzEyNTExOyYjMTI0ODM7JiMxMjQ4OTs8L3RleHQ+PC9nPjwhLS1lbnRpdHkgZTJlLS0+PGcgY2xhc3M9ImVudGl0eSIgZGF0YS1lbnRpdHk9ImUyZSIgZGF0YS1zb3VyY2UtbGluZT0iMyIgZGF0YS11aWQ9ImVudDAwMDIiIGlkPSJlbnRpdHlfZTJlIj48cmVjdCBmaWxsPSIjRjA4MDgwIiBoZWlnaHQ9IjM2LjI5NjkiIHJ4PSIyLjUiIHJ5PSIyLjUiIHN0eWxlPSJzdHJva2U6IzE4MTgxODtzdHJva2Utd2lkdGg6MC41OyIgd2lkdGg9IjkzLjA0ODYiIHg9IjciIHk9IjYwLjQxNjkiLz48dGV4dCBmaWxsPSIjMDAwMDAwIiBmb250LWZhbWlseT0ic2Fucy1zZXJpZiIgZm9udC1zaXplPSIxNCIgbGVuZ3RoQWRqdXN0PSJzcGFjaW5nIiB0ZXh0TGVuZ3RoPSI3My4wNDg2IiB4PSIxNyIgeT0iODMuNDEyIj5FMkUgJiMxMjQ4NjsmIzEyNDczOyYjMTI0ODg7PC90ZXh0PjwvZz48ZyBjbGFzcz0iZW50aXR5IiBkYXRhLWVudGl0eT0iR01OMyIgZGF0YS1zb3VyY2UtbGluZT0iNSIgZGF0YS11aWQ9ImVudDAwMDQiIGlkPSJlbnRpdHlfR01OMyI+PHBhdGggZD0iTTEzNC43Miw0My4yOTY5IEwxMzQuNzIsNzQuNTY2OSBMMTAwLjQyLDc4LjU2NjkgTDEzNC43Miw4Mi41NjY5IEwxMzQuNzIsMTEzLjgyODEgQTAsMCAwIDAgMCAxMzQuNzIsMTEzLjgyODEgTDMyMC4zMzM5LDExMy44MjgxIEEwLDAgMCAwIDAgMzIwLjMzMzksMTEzLjgyODEgTDMyMC4zMzM5LDUzLjI5NjkgTDMxMC4zMzM5LDQzLjI5NjkgTDEzNC43Miw0My4yOTY5IEEwLDAgMCAwIDAgMTM0LjcyLDQzLjI5NjkiIGZpbGw9IiNGRUZGREQiIHN0eWxlPSJzdHJva2U6IzE4MTgxODtzdHJva2Utd2lkdGg6MC41OyIvPjxwYXRoIGQ9Ik0zMTAuMzMzOSw0My4yOTY5IEwzMTAuMzMzOSw1My4yOTY5IEwzMjAuMzMzOSw1My4yOTY5IEwzMTAuMzMzOSw0My4yOTY5IiBmaWxsPSIjRkVGRkREIiBzdHlsZT0ic3Ryb2tlOiMxODE4MTg7c3Ryb2tlLXdpZHRoOjAuNTsiLz48dGV4dCBmaWxsPSIjMDAwMDAwIiBmb250LWZhbWlseT0ic2Fucy1zZXJpZiIgZm9udC1zaXplPSIxMyIgbGVuZ3RoQWRqdXN0PSJzcGFjaW5nIiB0ZXh0TGVuZ3RoPSIxNjQuNjEzOSIgeD0iMTQwLjcyIiB5PSI2MC4zNjM4Ij4mIzEyNTAyOyYjMTI1MjE7JiMxMjQ1NDsmIzEyNDcwOyYjMTI0MzQ7JiMzNjg5MDsmIzEyMzc2OyYjMTIzODM7IFVJICYjMTI0ODY7JiMxMjQ3MzsmIzEyNDg4OzwvdGV4dD48dGV4dCBmaWxsPSIjMDAwMDAwIiBmb250LWZhbWlseT0ic2Fucy1zZXJpZiIgZm9udC1zaXplPSIxMyIgbGVuZ3RoQWRqdXN0PSJzcGFjaW5nIiB0ZXh0TGVuZ3RoPSIxNDMuMDAwMiIgeD0iMTQwLjcyIiB5PSI3NS40OTY2Ij4mIzEyNTE4OyYjMTI1NDA7JiMxMjQ3MDsmIzEyNTQwOyYjMTI0NzE7JiMxMjQ5MDsmIzEyNTIyOyYjMTI0NTg7JiMxMjM5ODsmIzI2OTA4OyYjMzUzODg7PC90ZXh0Pjx0ZXh0IGZpbGw9IiMwMDAwMDAiIGZvbnQtZmFtaWx5PSJzYW5zLXNlcmlmIiBmb250LXNpemU9IjEzIiBsZW5ndGhBZGp1c3Q9InNwYWNpbmciIHRleHRMZW5ndGg9Ijg2LjUxMjMiIHg9IjE0MC43MiIgeT0iOTAuNjI5NCI+JiMyMzQ1NTsmIzM0ODkyOyYjMjYxNzg7JiMzODI5MTs6ICYjMzgyNjM7JiMxMjM1Njs8L3RleHQ+PHRleHQgZmlsbD0iIzAwMDAwMCIgZm9udC1mYW1pbHk9InNhbnMtc2VyaWYiIGZvbnQtc2l6ZT0iMTMiIGxlbmd0aEFkanVzdD0ic3BhY2luZyIgdGV4dExlbmd0aD0iMTQ1LjU5NjMiIHg9IjE0MC43MiIgeT0iMTA1Ljc2MjIiPiYjMjU5Njg7OiAmIzIzNTY5OyYjMTIzOTQ7JiMxMjM1NjsmIzY1Mjg4OzEwJiMxMjMxNjsyMCYjMjAyMTQ7JiM2NTI4OTs8L3RleHQ+PC9nPjwhLS1lbnRpdHkgaW50ZWdyYXRpb24tLT48ZyBjbGFzcz0iZW50aXR5IiBkYXRhLWVudGl0eT0iaW50ZWdyYXRpb24iIGRhdGEtc291cmNlLWxpbmU9IjExIiBkYXRhLXVpZD0iZW50MDAwNiIgaWQ9ImVudGl0eV9pbnRlZ3JhdGlvbiI+PHJlY3QgZmlsbD0iIzkwRUU5MCIgaGVpZ2h0PSIzNi4yOTY5IiByeD0iMi41IiByeT0iMi41IiBzdHlsZT0ic3Ryb2tlOiMxODE4MTg7c3Ryb2tlLXdpZHRoOjAuNTsiIHdpZHRoPSI4OS45OTk3IiB4PSI4LjUyIiB5PSIxOTguNTE2OSIvPjx0ZXh0IGZpbGw9IiMwMDAwMDAiIGZvbnQtZmFtaWx5PSJzYW5zLXNlcmlmIiBmb250LXNpemU9IjE0IiBsZW5ndGhBZGp1c3Q9InNwYWNpbmciIHRleHRMZW5ndGg9IjY5Ljk5OTciIHg9IjE4LjUyIiB5PSIyMjEuNTEyIj4mIzMyMTEzOyYjMjE1MTI7JiMxMjQ4NjsmIzEyNDczOyYjMTI0ODg7PC90ZXh0PjwvZz48ZyBjbGFzcz0iZW50aXR5IiBkYXRhLWVudGl0eT0iR01ONyIgZGF0YS1zb3VyY2UtbGluZT0iMTMiIGRhdGEtdWlkPSJlbnQwMDA4IiBpZD0iZW50aXR5X0dNTjciPjxwYXRoIGQ9Ik0xMzMuOTMsMTczLjgyNjkgTDEzMy45MywyMTIuNjU2OSBMOTguOTUsMjE2LjY1NjkgTDEzMy45MywyMjAuNjU2OSBMMTMzLjkzLDI1OS40OTA5IEEwLDAgMCAwIDAgMTMzLjkzLDI1OS40OTA5IEwzODEuMTA5OCwyNTkuNDkwOSBBMCwwIDAgMCAwIDM4MS4xMDk4LDI1OS40OTA5IEwzODEuMTA5OCwxODMuODI2OSBMMzcxLjEwOTgsMTczLjgyNjkgTDEzMy45MywxNzMuODI2OSBBMCwwIDAgMCAwIDEzMy45MywxNzMuODI2OSIgZmlsbD0iI0ZFRkZERCIgc3R5bGU9InN0cm9rZTojMTgxODE4O3N0cm9rZS13aWR0aDowLjU7Ii8+PHBhdGggZD0iTTM3MS4xMDk4LDE3My44MjY5IEwzNzEuMTA5OCwxODMuODI2OSBMMzgxLjEwOTgsMTgzLjgyNjkgTDM3MS4xMDk4LDE3My44MjY5IiBmaWxsPSIjRkVGRkREIiBzdHlsZT0ic3Ryb2tlOiMxODE4MTg7c3Ryb2tlLXdpZHRoOjAuNTsiLz48dGV4dCBmaWxsPSIjMDAwMDAwIiBmb250LWZhbWlseT0ic2Fucy1zZXJpZiIgZm9udC1zaXplPSIxMyIgbGVuZ3RoQWRqdXN0PSJzcGFjaW5nIiB0ZXh0TGVuZ3RoPSIxNTQuNjk4OSIgeD0iMTM5LjkzIiB5PSIxOTAuODkzOCI+QVBJICYjMTI0Njc7JiMxMjUzMTsmIzEyNDg4OyYjMTI1MjU7JiMxMjU0MDsmIzEyNTIxOyYjMTI1NDA7JiMxMjQ4NjsmIzEyNDczOyYjMTI0ODg7PC90ZXh0Pjx0ZXh0IGZpbGw9IiMwMDAwMDAiIGZvbnQtZmFtaWx5PSJzYW5zLXNlcmlmIiBmb250LXNpemU9IjEzIiBsZW5ndGhBZGp1c3Q9InNwYWNpbmciIHRleHRMZW5ndGg9IjEwNC4wMDAxIiB4PSIxMzkuOTMiIHk9IjIwNi4wMjY2Ij4mIzEyNDY5OyYjMTI1NDA7JiMxMjQ5OTsmIzEyNDczOyYjMjM2NTI7JiMxMjQ4NjsmIzEyNDczOyYjMTI0ODg7PC90ZXh0Pjx0ZXh0IGZpbGw9IiMwMDAwMDAiIGZvbnQtZmFtaWx5PSJzYW5zLXNlcmlmIiBmb250LXNpemU9IjEzIiBsZW5ndGhBZGp1c3Q9InNwYWNpbmciIHRleHRMZW5ndGg9IjIyNi4xNzk4IiB4PSIxMzkuOTMiIHk9IjIyMS4xNTk0Ij4mIzEyNTIyOyYjMTI1MDk7JiMxMjQ3MjsmIzEyNDg4OyYjMTI1MjI7JiMxMjQ4NjsmIzEyNDczOyYjMTI0ODg7JiM2NTI4ODtUZXN0Y29udGFpbmVycyYjNjUyODk7PC90ZXh0Pjx0ZXh0IGZpbGw9IiMwMDAwMDAiIGZvbnQtZmFtaWx5PSJzYW5zLXNlcmlmIiBmb250LXNpemU9IjEzIiBsZW5ndGhBZGp1c3Q9InNwYWNpbmciIHRleHRMZW5ndGg9Ijk5LjUxMjMiIHg9IjEzOS45MyIgeT0iMjM2LjI5MjIiPiYjMjM0NTU7JiMzNDg5MjsmIzI2MTc4OyYjMzgyOTE7OiAmIzIwMDEzOyYjMzEyNDM7JiMyNDIzMDs8L3RleHQ+PHRleHQgZmlsbD0iIzAwMDAwMCIgZm9udC1mYW1pbHk9InNhbnMtc2VyaWYiIGZvbnQtc2l6ZT0iMTMiIGxlbmd0aEFkanVzdD0ic3BhY2luZyIgdGV4dExlbmd0aD0iMTYyLjEzODMiIHg9IjEzOS45MyIgeT0iMjUxLjQyNSI+JiMyNTk2ODs6ICYjMjAwMTM7JiMzMTI0MzsmIzI0MjMwOyYjNjUyODg7MTAwJiMxMjMxNjsyMDAmIzIwMjE0OyYjNjUyODk7PC90ZXh0PjwvZz48IS0tZW50aXR5IHVuaXQtLT48ZyBjbGFzcz0iZW50aXR5IiBkYXRhLWVudGl0eT0idW5pdCIgZGF0YS1zb3VyY2UtbGluZT0iMjAiIGRhdGEtdWlkPSJlbnQwMDEwIiBpZD0iZW50aXR5X3VuaXQiPjxyZWN0IGZpbGw9IiNBREQ4RTYiIGhlaWdodD0iMzYuMjk2OSIgcng9IjIuNSIgcnk9IjIuNSIgc3R5bGU9InN0cm9rZTojMTgxODE4O3N0cm9rZS13aWR0aDowLjU7IiB3aWR0aD0iODkuOTk5NyIgeD0iOC41MiIgeT0iMzQ0LjE3NjkiLz48dGV4dCBmaWxsPSIjMDAwMDAwIiBmb250LWZhbWlseT0ic2Fucy1zZXJpZiIgZm9udC1zaXplPSIxNCIgbGVuZ3RoQWRqdXN0PSJzcGFjaW5nIiB0ZXh0TGVuZ3RoPSI2OS45OTk3IiB4PSIxOC41MiIgeT0iMzY3LjE3MiI+JiMyMTMzNjsmIzIwMzA3OyYjMTI0ODY7JiMxMjQ3MzsmIzEyNDg4OzwvdGV4dD48L2c+PGcgY2xhc3M9ImVudGl0eSIgZGF0YS1lbnRpdHk9IkdNTjExIiBkYXRhLXNvdXJjZS1saW5lPSIyMiIgZGF0YS11aWQ9ImVudDAwMTIiIGlkPSJlbnRpdHlfR01OMTEiPjxwYXRoIGQ9Ik0xMzMuNTIsMzE5LjQ5NjkgTDEzMy41MiwzNTguMzI2OSBMOTguNzcsMzYyLjMyNjkgTDEzMy41MiwzNjYuMzI2OSBMMTMzLjUyLDQwNS4xNjA5IEEwLDAgMCAwIDAgMTMzLjUyLDQwNS4xNjA5IEwyOTcuNTIwMiw0MDUuMTYwOSBBMCwwIDAgMCAwIDI5Ny41MjAyLDQwNS4xNjA5IEwyOTcuNTIwMiwzMjkuNDk2OSBMMjg3LjUyMDIsMzE5LjQ5NjkgTDEzMy41MiwzMTkuNDk2OSBBMCwwIDAgMCAwIDEzMy41MiwzMTkuNDk2OSIgZmlsbD0iI0ZFRkZERCIgc3R5bGU9InN0cm9rZTojMTgxODE4O3N0cm9rZS13aWR0aDowLjU7Ii8+PHBhdGggZD0iTTI4Ny41MjAyLDMxOS40OTY5IEwyODcuNTIwMiwzMjkuNDk2OSBMMjk3LjUyMDIsMzI5LjQ5NjkgTDI4Ny41MjAyLDMxOS40OTY5IiBmaWxsPSIjRkVGRkREIiBzdHlsZT0ic3Ryb2tlOiMxODE4MTg7c3Ryb2tlLXdpZHRoOjAuNTsiLz48dGV4dCBmaWxsPSIjMDAwMDAwIiBmb250LWZhbWlseT0ic2Fucy1zZXJpZiIgZm9udC1zaXplPSIxMyIgbGVuZ3RoQWRqdXN0PSJzcGFjaW5nIiB0ZXh0TGVuZ3RoPSIxMzAuMDAwMiIgeD0iMTM5LjUyIiB5PSIzMzYuNTYzOCI+JiMxMjQ4OTsmIzEyNTEzOyYjMTI0NTI7JiMxMjUzMTsmIzEyNTE0OyYjMTI0ODc7JiMxMjUyMzsmIzEyNDg2OyYjMTI0NzM7JiMxMjQ4ODs8L3RleHQ+PHRleHQgZmlsbD0iIzAwMDAwMCIgZm9udC1mYW1pbHk9InNhbnMtc2VyaWYiIGZvbnQtc2l6ZT0iMTMiIGxlbmd0aEFkanVzdD0ic3BhY2luZyIgdGV4dExlbmd0aD0iMTMwLjAwMDIiIHg9IjEzOS41MiIgeT0iMzUxLjY5NjYiPiYjMjA1MTY7JiMxMjQ1ODsmIzEyNTAyOyYjMTI0NzI7JiMxMjQ1NTsmIzEyNDYzOyYjMTI0ODg7JiMxMjQ4NjsmIzEyNDczOyYjMTI0ODg7PC90ZXh0Pjx0ZXh0IGZpbGw9IiMwMDAwMDAiIGZvbnQtZmFtaWx5PSJzYW5zLXNlcmlmIiBmb250LXNpemU9IjEzIiBsZW5ndGhBZGp1c3Q9InNwYWNpbmciIHRleHRMZW5ndGg9IjE0My4wMDAyIiB4PSIxMzkuNTIiIHk9IjM2Ni44Mjk0Ij4mIzEyNDk5OyYjMTI0NzI7JiMxMjQ5MzsmIzEyNDczOyYjMTI1MjU7JiMxMjQ3MjsmIzEyNDgzOyYjMTI0NjM7JiMxMjQ4NjsmIzEyNDczOyYjMTI0ODg7PC90ZXh0Pjx0ZXh0IGZpbGw9IiMwMDAwMDAiIGZvbnQtZmFtaWx5PSJzYW5zLXNlcmlmIiBmb250LXNpemU9IjEzIiBsZW5ndGhBZGp1c3Q9InNwYWNpbmciIHRleHRMZW5ndGg9Ijg2LjUxMjMiIHg9IjEzOS41MiIgeT0iMzgxLjk2MjIiPiYjMjM0NTU7JiMzNDg5MjsmIzI2MTc4OyYjMzgyOTE7OiAmIzMwNzAxOyYjMTIzNTY7PC90ZXh0Pjx0ZXh0IGZpbGw9IiMwMDAwMDAiIGZvbnQtZmFtaWx5PSJzYW5zLXNlcmlmIiBmb250LXNpemU9IjEzIiBsZW5ndGhBZGp1c3Q9InNwYWNpbmciIHRleHRMZW5ndGg9IjEzNy4zMjUzIiB4PSIxMzkuNTIiIHk9IjM5Ny4wOTUiPiYjMjU5Njg7OiAmIzIyODEwOyYjMTIzNTY7JiM2NTI4ODs1MDAmIzIwMjE0OyYjMjAxOTc7JiMxOTk3ODsmIzY1Mjg5OzwvdGV4dD48L2c+PCEtLWxpbmsgZTJlIHRvIGludGVncmF0aW9uLS0+PCEtLWxpbmsgaW50ZWdyYXRpb24gdG8gdW5pdC0tPjwhLS1TUkM9W1ZUOUJJeUQwNDBWbVVweDVla1UyNWhwcWZZOFlVRjJXOV80R3g1ZTNQR0ZmWWpUY0h4SnIwTWZMTDlJWW5BZ0wtYTNLUWtFZGNRSUZhcl8xdFFxcUpHelVHZVJ2UHZkVkpoWjVpdkdXUkFCdUgyV1c3MjdTOHZHSDBBNWU2MHZUdllSQm9DcEdMNzhnMld1SENxVGVhZkJYTUlrcG9ZVGpueW1RcEVRS0VBZWN6ZWhnNldXZHdabkhHVjZFdWgySkZxVnQ1RHFvTVBZOXBmQWYyZUFsOGtodldSMkRLNExISFZVbndMc3F4dG1aVjJvdGh0UVJQdzlwS2FnSHBsNDdrWGo2eV9XdkhTQmQwdEhiU2tGN0J1b0VPRnVZRUg4cXRkX3llYTVQY2dZOU9lWk1zcWt1TnVXcEJDUGZuWjZ2UFJDX3BoSDNBSGxXekFNQ3lKYXZsZFg1VURMdExiRHBnc2xwLXFwWUpUU2JNT1NsTlotc1lkMjllZ3VfaFZPUVNsdnZja0ZCRGtFY25RWUpLdVF1RXdaTk1kU3h1TFViSS0gLUxjandyX3VpRnpxdzN4cjhTbHlPaV9nVVVvQXhIMFJKZ29lY0IyNVNlRkVzekhqWDJVOFgwT1R2Smt2QVJiWVBuWS05OW9vOWxJTUZ0VDV0Snh3MTNsR0RZbzVRdjVZdE5FLXprVGFwM1dpUERLRC1FeXpHX2M1WFNqVDlmb2ZSSXpaZkJuM1JMbHprMWNCQnowVzAwXS0tPjwvZz48L3N2Zz4=" class="uml" alt="uml diagram" title="" /></p>
<h3 id="_2">財務会計システムにおけるテスト分類<a class="headerlink" href="#_2" title="Permanent link">&para;</a></h3>
<p><img src="data:image/svg+xml;base64,PHN2ZyB4bWxucz0iaHR0cDovL3d3dy53My5vcmcvMjAwMC9zdmciIHhtbG5zOnhsaW5rPSJodHRwOi8vd3d3LnczLm9yZy8xOTk5L3hsaW5rIiBjb250ZW50U3R5bGVUeXBlPSJ0ZXh0L2NzcyIgZGF0YS1kaWFncmFtLXR5cGU9IkRFU0NSSVBUSU9OIiBoZWlnaHQ9IjQ0MXB4IiBwcmVzZXJ2ZUFzcGVjdFJhdGlvPSJub25lIiBzdHlsZT0id2lkdGg6NjgycHg7aGVpZ2h0OjQ0MXB4O2JhY2tncm91bmQ6I0ZGRkZGRjsiIHZlcnNpb249IjEuMSIgdmlld0JveD0iMCAwIDY4MiA0NDEiIHdpZHRoPSI2ODJweCIgem9vbUFuZFBhbj0ibWFnbmlmeSI+PHRpdGxlPiYjMzYwMDE7JiMyMTIwOTsmIzIwMjUwOyYjMzUzMzY7JiMxMjQ3MTsmIzEyNDczOyYjMTI0ODY7JiMxMjUxMjsmIzEyMzk4OyYjMTI0ODY7JiMxMjQ3MzsmIzEyNDg4OyYjMjA5OTg7JiMzOTAwNjs8L3RpdGxlPjxkZWZzLz48Zz48ZyBjbGFzcz0idGl0bGUiIGRhdGEtc291cmNlLWxpbmU9IjEiPjx0ZXh0IGZpbGw9IiMwMDAwMDAiIGZvbnQtZmFtaWx5PSJzYW5zLXNlcmlmIiBmb250LXNpemU9IjE0IiBmb250LXdlaWdodD0iYm9sZCIgbGVuZ3RoQWRqdXN0PSJzcGFjaW5nIiB0ZXh0TGVuZ3RoPSIxOTUuOTk5MSIgeD0iMjM2LjAwMDQiIHk9IjIyLjk5NTEiPiYjMzYwMDE7JiMyMTIwOTsmIzIwMjUwOyYjMzUzMzY7JiMxMjQ3MTsmIzEyNDczOyYjMTI0ODY7JiMxMjUxMjsmIzEyMzk4OyYjMTI0ODY7JiMxMjQ3MzsmIzEyNDg4OyYjMjA5OTg7JiMzOTAwNjs8L3RleHQ+PC9nPjwhLS1jbHVzdGVyIEUyRSA/Pz8tLT48ZyBjbGFzcz0iY2x1c3RlciIgZGF0YS1lbnRpdHk9IkUyRSAuLi4iIGRhdGEtc291cmNlLWxpbmU9IjMiIGRhdGEtdWlkPSJlbnQwMDAyIiBpZD0iY2x1c3Rlcl9FMkUgLi4uIj48cmVjdCBmaWxsPSJub25lIiBoZWlnaHQ9IjE4My42IiByeD0iMi41IiByeT0iMi41IiBzdHlsZT0ic3Ryb2tlOiMxODE4MTg7c3Ryb2tlLXdpZHRoOjE7IiB3aWR0aD0iMjg5IiB4PSIxNCIgeT0iNDQuMjk2OSIvPjx0ZXh0IGZpbGw9IiMwMDAwMDAiIGZvbnQtZmFtaWx5PSJzYW5zLXNlcmlmIiBmb250LXNpemU9IjE0IiBmb250LXdlaWdodD0iYm9sZCIgbGVuZ3RoQWRqdXN0PSJzcGFjaW5nIiB0ZXh0TGVuZ3RoPSI3NS43NDIiIHg9IjEyMC42MjkiIHk9IjU5LjI5MiI+RTJFICYjMTI0ODY7JiMxMjQ3MzsmIzEyNDg4OzwvdGV4dD48L2c+PCEtLWNsdXN0ZXIgPz8/Pz8tLT48ZyBjbGFzcz0iY2x1c3RlciIgZGF0YS1lbnRpdHk9Ii4uLi4uIiBkYXRhLXNvdXJjZS1saW5lPSI5IiBkYXRhLXVpZD0iZW50MDAwNiIgaWQ9ImNsdXN0ZXJfLi4uLi4iPjxyZWN0IGZpbGw9Im5vbmUiIGhlaWdodD0iMTgzLjYiIHJ4PSIyLjUiIHJ5PSIyLjUiIHN0eWxlPSJzdHJva2U6IzE4MTgxODtzdHJva2Utd2lkdGg6MTsiIHdpZHRoPSIzNDkiIHg9IjMyNyIgeT0iNDQuMjk2OSIvPjx0ZXh0IGZpbGw9IiMwMDAwMDAiIGZvbnQtZmFtaWx5PSJzYW5zLXNlcmlmIiBmb250LXNpemU9IjE0IiBmb250LXdlaWdodD0iYm9sZCIgbGVuZ3RoQWRqdXN0PSJzcGFjaW5nIiB0ZXh0TGVuZ3RoPSI2OS45OTk3IiB4PSI0NjYuNTAwMiIgeT0iNTkuMjkyIj4mIzMyMTEzOyYjMjE1MTI7JiMxMjQ4NjsmIzEyNDczOyYjMTI0ODg7PC90ZXh0PjwvZz48IS0tY2x1c3RlciA/Pz8/Py0tPjxnIGNsYXNzPSJjbHVzdGVyIiBkYXRhLWVudGl0eT0iLi4uLi4iIGRhdGEtc291cmNlLWxpbmU9IjE2IiBkYXRhLXVpZD0iZW50MDAxMSIgaWQ9ImNsdXN0ZXJfLi4uLi4iPjxyZWN0IGZpbGw9Im5vbmUiIGhlaWdodD0iMTgzLjU5IiByeD0iMi41IiByeT0iMi41IiBzdHlsZT0ic3Ryb2tlOiMxODE4MTg7c3Ryb2tlLXdpZHRoOjE7IiB3aWR0aD0iMzE3IiB4PSI3IiB5PSIyNTEuODk2OSIvPjx0ZXh0IGZpbGw9IiMwMDAwMDAiIGZvbnQtZmFtaWx5PSJzYW5zLXNlcmlmIiBmb250LXNpemU9IjE0IiBmb250LXdlaWdodD0iYm9sZCIgbGVuZ3RoQWRqdXN0PSJzcGFjaW5nIiB0ZXh0TGVuZ3RoPSI2OS45OTk3IiB4PSIxMzAuNTAwMiIgeT0iMjY2Ljg5MiI+JiMyMTMzNjsmIzIwMzA3OyYjMTI0ODY7JiMxMjQ3MzsmIzEyNDg4OzwvdGV4dD48L2c+PCEtLWVudGl0eSBlMmUxLS0+PGcgY2xhc3M9ImVudGl0eSIgZGF0YS1lbnRpdHk9ImUyZTEiIGRhdGEtc291cmNlLWxpbmU9IjQiIGRhdGEtdWlkPSJlbnQwMDAzIiBpZD0iZW50aXR5X2UyZTEiPjxyZWN0IGZpbGw9IiNGMUYxRjEiIGhlaWdodD0iMzYuMjk2OSIgcng9IjIuNSIgcnk9IjIuNSIgc3R5bGU9InN0cm9rZTojMTgxODE4O3N0cm9rZS13aWR0aDowLjU7IiB3aWR0aD0iMTE3Ljk5OTYiIHg9IjMwIiB5PSI3OS4yOTY5Ii8+PHRleHQgZmlsbD0iIzAwMDAwMCIgZm9udC1mYW1pbHk9InNhbnMtc2VyaWYiIGZvbnQtc2l6ZT0iMTQiIGxlbmd0aEFkanVzdD0ic3BhY2luZyIgdGV4dExlbmd0aD0iOTcuOTk5NiIgeD0iNDAiIHk9IjEwMi4yOTIiPiYjMjAxODE7JiMzNTM3OTsmIzIwODM3OyYjMjExNDc7JiMxMjUwMTsmIzEyNTI1OyYjMTI1NDA7PC90ZXh0PjwvZz48IS0tZW50aXR5IGUyZTItLT48ZyBjbGFzcz0iZW50aXR5IiBkYXRhLWVudGl0eT0iZTJlMiIgZGF0YS1zb3VyY2UtbGluZT0iNSIgZGF0YS11aWQ9ImVudDAwMDQiIGlkPSJlbnRpdHlfZTJlMiI+PHJlY3QgZmlsbD0iI0YxRjFGMSIgaGVpZ2h0PSIzNi4yOTY5IiByeD0iMi41IiByeT0iMi41IiBzdHlsZT0ic3Ryb2tlOiMxODE4MTg7c3Ryb2tlLXdpZHRoOjAuNTsiIHdpZHRoPSIxMDMuOTk5NiIgeD0iMTgzIiB5PSI3OS4yOTY5Ii8+PHRleHQgZmlsbD0iIzAwMDAwMCIgZm9udC1mYW1pbHk9InNhbnMtc2VyaWYiIGZvbnQtc2l6ZT0iMTQiIGxlbmd0aEFkanVzdD0ic3BhY2luZyIgdGV4dExlbmd0aD0iODMuOTk5NiIgeD0iMTkzIiB5PSIxMDIuMjkyIj4mIzM2MDAxOyYjMjEyMDk7JiMzNTU3NjsmIzM0OTIwOyYjMjk5ODM7JiMyNTEwNDs8L3RleHQ+PC9nPjwhLS1lbnRpdHkgZTJlMy0tPjxnIGNsYXNzPSJlbnRpdHkiIGRhdGEtZW50aXR5PSJlMmUzIiBkYXRhLXNvdXJjZS1saW5lPSI2IiBkYXRhLXVpZD0iZW50MDAwNSIgaWQ9ImVudGl0eV9lMmUzIj48cmVjdCBmaWxsPSIjRjFGMUYxIiBoZWlnaHQ9IjM2LjI5NjkiIHJ4PSIyLjUiIHJ5PSIyLjUiIHN0eWxlPSJzdHJva2U6IzE4MTgxODtzdHJva2Utd2lkdGg6MC41OyIgd2lkdGg9IjEzMS45OTk1IiB4PSIzMCIgeT0iMTc1LjU5NjkiLz48dGV4dCBmaWxsPSIjMDAwMDAwIiBmb250LWZhbWlseT0ic2Fucy1zZXJpZiIgZm9udC1zaXplPSIxNCIgbGVuZ3RoQWRqdXN0PSJzcGFjaW5nIiB0ZXh0TGVuZ3RoPSIxMTEuOTk5NSIgeD0iNDAiIHk9IjE5OC41OTIiPiYjMjUyMTU7JiMzNTQ2OTsmIzEyNTI3OyYjMTI1NDA7JiMxMjQ2MzsmIzEyNTAxOyYjMTI1MjU7JiMxMjU0MDs8L3RleHQ+PC9nPjwhLS1lbnRpdHkgYXBpMS0tPjxnIGNsYXNzPSJlbnRpdHkiIGRhdGEtZW50aXR5PSJhcGkxIiBkYXRhLXNvdXJjZS1saW5lPSIxMCIgZGF0YS11aWQ9ImVudDAwMDciIGlkPSJlbnRpdHlfYXBpMSI+PHJlY3QgZmlsbD0iI0YxRjFGMSIgaGVpZ2h0PSIzNi4yOTY5IiByeD0iMi41IiByeT0iMi41IiBzdHlsZT0ic3Ryb2tlOiMxODE4MTg7c3Ryb2tlLXdpZHRoOjAuNTsiIHdpZHRoPSIxMjEuMDQ4NSIgeD0iMzQ4LjQ4IiB5PSI3OS4yOTY5Ii8+PHRleHQgZmlsbD0iIzAwMDAwMCIgZm9udC1mYW1pbHk9InNhbnMtc2VyaWYiIGZvbnQtc2l6ZT0iMTQiIGxlbmd0aEFkanVzdD0ic3BhY2luZyIgdGV4dExlbmd0aD0iMTAxLjA0ODUiIHg9IjM1OC40OCIgeT0iMTAyLjI5MiI+JiMyMDE4MTsmIzM1Mzc5OyBBUEkgJiMxMjQ4NjsmIzEyNDczOyYjMTI0ODg7PC90ZXh0PjwvZz48IS0tZW50aXR5IGFwaTItLT48ZyBjbGFzcz0iZW50aXR5IiBkYXRhLWVudGl0eT0iYXBpMiIgZGF0YS1zb3VyY2UtbGluZT0iMTEiIGRhdGEtdWlkPSJlbnQwMDA4IiBpZD0iZW50aXR5X2FwaTIiPjxyZWN0IGZpbGw9IiNGMUYxRjEiIGhlaWdodD0iMzYuMjk2OSIgcng9IjIuNSIgcnk9IjIuNSIgc3R5bGU9InN0cm9rZTojMTgxODE4O3N0cm9rZS13aWR0aDowLjU7IiB3aWR0aD0iMTQ5LjA0ODQiIHg9IjUwNC40OCIgeT0iNzkuMjk2OSIvPjx0ZXh0IGZpbGw9IiMwMDAwMDAiIGZvbnQtZmFtaWx5PSJzYW5zLXNlcmlmIiBmb250LXNpemU9IjE0IiBsZW5ndGhBZGp1c3Q9InNwYWNpbmciIHRleHRMZW5ndGg9IjEyOS4wNDg0IiB4PSI1MTQuNDgiIHk9IjEwMi4yOTIiPiYjMjEyMDg7JiMyMzQ1MDsmIzMxMTg1OyYjMzA0NDY7IEFQSSAmIzEyNDg2OyYjMTI0NzM7JiMxMjQ4ODs8L3RleHQ+PC9nPjwhLS1lbnRpdHkgYXBpMy0tPjxnIGNsYXNzPSJlbnRpdHkiIGRhdGEtZW50aXR5PSJhcGkzIiBkYXRhLXNvdXJjZS1saW5lPSIxMiIgZGF0YS11aWQ9ImVudDAwMDkiIGlkPSJlbnRpdHlfYXBpMyI+PHJlY3QgZmlsbD0iI0YxRjFGMSIgaGVpZ2h0PSIzNi4yOTY5IiByeD0iMi41IiByeT0iMi41IiBzdHlsZT0ic3Ryb2tlOiMxODE4MTg7c3Ryb2tlLXdpZHRoOjAuNTsiIHdpZHRoPSIxNDkuMDQ4NCIgeD0iMzQzLjQ4IiB5PSIxNzUuNTk2OSIvPjx0ZXh0IGZpbGw9IiMwMDAwMDAiIGZvbnQtZmFtaWx5PSJzYW5zLXNlcmlmIiBmb250LXNpemU9IjE0IiBsZW5ndGhBZGp1c3Q9InNwYWNpbmciIHRleHRMZW5ndGg9IjEyOS4wNDg0IiB4PSIzNTMuNDgiIHk9IjE5OC41OTIiPiYjMzYwMDE7JiMyMTIwOTsmIzIwOTk4OyYjMjY1MTI7IEFQSSAmIzEyNDg2OyYjMTI0NzM7JiMxMjQ4ODs8L3RleHQ+PC9nPjwhLS1lbnRpdHkgcmVwby0tPjxnIGNsYXNzPSJlbnRpdHkiIGRhdGEtZW50aXR5PSJyZXBvIiBkYXRhLXNvdXJjZS1saW5lPSIxMyIgZGF0YS11aWQ9ImVudDAwMTAiIGlkPSJlbnRpdHlfcmVwbyI+PHJlY3QgZmlsbD0iI0YxRjFGMSIgaGVpZ2h0PSIzNi4yOTY5IiByeD0iMi41IiByeT0iMi41IiBzdHlsZT0ic3Ryb2tlOiMxODE4MTg7c3Ryb2tlLXdpZHRoOjAuNTsiIHdpZHRoPSIxMzEuOTk5NSIgeD0iNTI4IiB5PSIxNzUuNTk2OSIvPjx0ZXh0IGZpbGw9IiMwMDAwMDAiIGZvbnQtZmFtaWx5PSJzYW5zLXNlcmlmIiBmb250LXNpemU9IjE0IiBsZW5ndGhBZGp1c3Q9InNwYWNpbmciIHRleHRMZW5ndGg9IjExMS45OTk1IiB4PSI1MzgiIHk9IjE5OC41OTIiPiYjMTI1MjI7JiMxMjUwOTsmIzEyNDcyOyYjMTI0ODg7JiMxMjUyMjsmIzEyNDg2OyYjMTI0NzM7JiMxMjQ4ODs8L3RleHQ+PC9nPjwhLS1lbnRpdHkgdW5pdDEtLT48ZyBjbGFzcz0iZW50aXR5IiBkYXRhLWVudGl0eT0idW5pdDEiIGRhdGEtc291cmNlLWxpbmU9IjE3IiBkYXRhLXVpZD0iZW50MDAxMiIgaWQ9ImVudGl0eV91bml0MSI+PHJlY3QgZmlsbD0iI0YxRjFGMSIgaGVpZ2h0PSIzNi4yOTY5IiByeD0iMi41IiByeT0iMi41IiBzdHlsZT0ic3Ryb2tlOiMxODE4MTg7c3Ryb2tlLXdpZHRoOjAuNTsiIHdpZHRoPSIxNDUuOTk5NSIgeD0iMjMiIHk9IjI4Ni44OTY5Ii8+PHRleHQgZmlsbD0iIzAwMDAwMCIgZm9udC1mYW1pbHk9InNhbnMtc2VyaWYiIGZvbnQtc2l6ZT0iMTQiIGxlbmd0aEFkanVzdD0ic3BhY2luZyIgdGV4dExlbmd0aD0iMTI1Ljk5OTUiIHg9IjMzIiB5PSIzMDkuODkyIj4mIzIwMTgxOyYjMzUzNzk7JiMxMjQ4OTsmIzEyNTEzOyYjMTI0NTI7JiMxMjUzMTsmIzEyNTE0OyYjMTI0ODc7JiMxMjUyMzs8L3RleHQ+PC9nPjwhLS1lbnRpdHkgdW5pdDItLT48ZyBjbGFzcz0iZW50aXR5IiBkYXRhLWVudGl0eT0idW5pdDIiIGRhdGEtc291cmNlLWxpbmU9IjE4IiBkYXRhLXVpZD0iZW50MDAxMyIgaWQ9ImVudGl0eV91bml0MiI+PHJlY3QgZmlsbD0iI0YxRjFGMSIgaGVpZ2h0PSIzNi4yOTY5IiByeD0iMi41IiByeT0iMi41IiBzdHlsZT0ic3Ryb2tlOiMxODE4MTg7c3Ryb2tlLXdpZHRoOjAuNTsiIHdpZHRoPSIxMDMuOTk5NiIgeD0iMjA0IiB5PSIyODYuODk2OSIvPjx0ZXh0IGZpbGw9IiMwMDAwMDAiIGZvbnQtZmFtaWx5PSJzYW5zLXNlcmlmIiBmb250LXNpemU9IjE0IiBsZW5ndGhBZGp1c3Q9InNwYWNpbmciIHRleHRMZW5ndGg9IjgzLjk5OTYiIHg9IjIxNCIgeT0iMzA5Ljg5MiI+JiMyMTIwODsmIzIzNDUwOyYjMzExODU7JiMzMDQ0NjsmIzMxMjc4OyYjMjEwMjk7PC90ZXh0PjwvZz48IS0tZW50aXR5IHVuaXQzLS0+PGcgY2xhc3M9ImVudGl0eSIgZGF0YS1lbnRpdHk9InVuaXQzIiBkYXRhLXNvdXJjZS1saW5lPSIxOSIgZGF0YS11aWQ9ImVudDAwMTQiIGlkPSJlbnRpdHlfdW5pdDMiPjxyZWN0IGZpbGw9IiNGMUYxRjEiIGhlaWdodD0iMzYuMjk2OSIgcng9IjIuNSIgcnk9IjIuNSIgc3R5bGU9InN0cm9rZTojMTgxODE4O3N0cm9rZS13aWR0aDowLjU7IiB3aWR0aD0iNzUuOTk5OCIgeD0iNTgiIHk9IjM4My4xODY5Ii8+PHRleHQgZmlsbD0iIzAwMDAwMCIgZm9udC1mYW1pbHk9InNhbnMtc2VyaWYiIGZvbnQtc2l6ZT0iMTQiIGxlbmd0aEFkanVzdD0ic3BhY2luZyIgdGV4dExlbmd0aD0iNTUuOTk5OCIgeD0iNjgiIHk9IjQwNi4xODIiPiYjMzczMjk7JiMzODk4OTsmIzM1MzM2OyYjMzE2Mzk7PC90ZXh0PjwvZz48IS0tZW50aXR5IHVuaXQ0LS0+PGcgY2xhc3M9ImVudGl0eSIgZGF0YS1lbnRpdHk9InVuaXQ0IiBkYXRhLXNvdXJjZS1saW5lPSIyMCIgZGF0YS11aWQ9ImVudDAwMTUiIGlkPSJlbnRpdHlfdW5pdDQiPjxyZWN0IGZpbGw9IiNGMUYxRjEiIGhlaWdodD0iMzYuMjk2OSIgcng9IjIuNSIgcnk9IjIuNSIgc3R5bGU9InN0cm9rZTojMTgxODE4O3N0cm9rZS13aWR0aDowLjU7IiB3aWR0aD0iMTAzLjk5OTYiIHg9IjE2OSIgeT0iMzgzLjE4NjkiLz48dGV4dCBmaWxsPSIjMDAwMDAwIiBmb250LWZhbWlseT0ic2Fucy1zZXJpZiIgZm9udC1zaXplPSIxNCIgbGVuZ3RoQWRqdXN0PSJzcGFjaW5nIiB0ZXh0TGVuZ3RoPSI4My45OTk2IiB4PSIxNzkiIHk9IjQwNi4xODIiPiYjMzYwMDE7JiMyMTIwOTsmIzI1MzUxOyYjMjcxNjE7JiMzNTMzNjsmIzMxNjM5OzwvdGV4dD48L2c+PCEtLVNSQz1bVlBCRklpRDA0OFZsVU9nR0RwM24xSnBxdUNyTjIxOGE4Qk5LVTk4VXA2MkpNV0NmTWttVmg0T2lYWFBKZ2VXTEFweENQQkVSanQxUkNNb1FzamlpeS1ybHZubE1DZ3IzR3NPbDBNYnN1dGNGWEl4UXhzWF84REdIeGw0aU1YSUJlcWxTVVhlQzlBYmd4NWp3LU8zVkthZmdJU3h3WWRtZ3prQkZEV2pWb1ZjR05GR0hzV1pGMjdENXJlemJHcE1zSEZCdFNKUVVpSTJhcnRVOXdfelhnZVdiWk15c3lYMGNGMFZqSUk1SmFzZ3Z1VVpSYkZaa3ZsN2FkUnJUcU8wZHdIS3BEbnJmVGFaS2VxeWpzZV9NdXNmSFhreWc2VlpoU0t0NDRLTzhqc1pGRUIyaUhSWGdMOHZNZjhaTllSLWtEYWlYRDEwMmoxeUhVRnMwdTIyQ2J1NGRQVEZ3THV3NjRONjc2UFVwSWZyTTZkWnlTejNlOVlFcWVkVG93SUhYVHVOUmJjZV9dLS0+PC9nPjwvc3ZnPg==" class="uml" alt="uml diagram" title="" /></p>
<hr />
<h2 id="222">22.2 単体テスト<a class="headerlink" href="#222" title="Permanent link">&para;</a></h2>
<h3 id="_3">単体テストの基本構造<a class="headerlink" href="#_3" title="Permanent link">&para;</a></h3>
<p>単体テストは、個々のクラスやメソッドの動作を検証します。財務会計システムでは、ドメインモデルや値オブジェクトのテストが中心です。</p>
<div class="highlight"><pre><span></span><code><span class="kn">package</span><span class="w"> </span><span class="nn">com.example.accounting.domain.model.account</span><span class="p">;</span>

<span class="kn">import</span><span class="w"> </span><span class="nn">org.junit.jupiter.api.*</span><span class="p">;</span>
<span class="kn">import</span><span class="w"> </span><span class="nn">java.math.BigDecimal</span><span class="p">;</span>
<span class="kn">import static</span><span class="w"> </span><span class="nn">org.assertj.core.api.Assertions.*</span><span class="p">;</span>

<span class="nd">@DisplayName</span><span class="p">(</span><span class="s">&quot;勘定科目種別テスト&quot;</span><span class="p">)</span>
<span class="kd">class</span> <span class="nc">AccountTypeTest</span><span class="w"> </span><span class="p">{</span>

<span class="w">    </span><span class="nd">@Nested</span>
<span class="w">    </span><span class="nd">@DisplayName</span><span class="p">(</span><span class="s">&quot;正常値テスト&quot;</span><span class="p">)</span>
<span class="w">    </span><span class="kd">class</span> <span class="nc">Normal</span><span class="w"> </span><span class="p">{</span>

<span class="w">        </span><span class="nd">@Test</span>
<span class="w">        </span><span class="nd">@DisplayName</span><span class="p">(</span><span class="s">&quot;資産は借方残高科目である&quot;</span><span class="p">)</span>
<span class="w">        </span><span class="kt">void</span><span class="w"> </span><span class="nf">assetShouldBeDebitBalance</span><span class="p">()</span><span class="w"> </span><span class="p">{</span>
<span class="w">            </span><span class="n">assertThat</span><span class="p">(</span><span class="n">AccountType</span><span class="p">.</span><span class="na">ASSET</span><span class="p">.</span><span class="na">isDebitBalance</span><span class="p">()).</span><span class="na">isTrue</span><span class="p">();</span>
<span class="w">            </span><span class="n">assertThat</span><span class="p">(</span><span class="n">AccountType</span><span class="p">.</span><span class="na">ASSET</span><span class="p">.</span><span class="na">getBsplType</span><span class="p">()).</span><span class="na">isEqualTo</span><span class="p">(</span><span class="s">&quot;B&quot;</span><span class="p">);</span>
<span class="w">        </span><span class="p">}</span>

<span class="w">        </span><span class="nd">@Test</span>
<span class="w">        </span><span class="nd">@DisplayName</span><span class="p">(</span><span class="s">&quot;負債は貸方残高科目である&quot;</span><span class="p">)</span>
<span class="w">        </span><span class="kt">void</span><span class="w"> </span><span class="nf">liabilityShouldBeCreditBalance</span><span class="p">()</span><span class="w"> </span><span class="p">{</span>
<span class="w">            </span><span class="n">assertThat</span><span class="p">(</span><span class="n">AccountType</span><span class="p">.</span><span class="na">LIABILITY</span><span class="p">.</span><span class="na">isDebitBalance</span><span class="p">()).</span><span class="na">isFalse</span><span class="p">();</span>
<span class="w">            </span><span class="n">assertThat</span><span class="p">(</span><span class="n">AccountType</span><span class="p">.</span><span class="na">LIABILITY</span><span class="p">.</span><span class="na">getBsplType</span><span class="p">()).</span><span class="na">isEqualTo</span><span class="p">(</span><span class="s">&quot;B&quot;</span><span class="p">);</span>
<span class="w">        </span><span class="p">}</span>

<span class="w">        </span><span class="nd">@Test</span>
<span class="w">        </span><span class="nd">@DisplayName</span><span class="p">(</span><span class="s">&quot;収益は損益計算書科目である&quot;</span><span class="p">)</span>
<span class="w">        </span><span class="kt">void</span><span class="w"> </span><span class="nf">revenueShouldBeProfitAndLoss</span><span class="p">()</span><span class="w"> </span><span class="p">{</span>
<span class="w">            </span><span class="n">assertThat</span><span class="p">(</span><span class="n">AccountType</span><span class="p">.</span><span class="na">REVENUE</span><span class="p">.</span><span class="na">isProfitAndLoss</span><span class="p">()).</span><span class="na">isTrue</span><span class="p">();</span>
<span class="w">            </span><span class="n">assertThat</span><span class="p">(</span><span class="n">AccountType</span><span class="p">.</span><span class="na">REVENUE</span><span class="p">.</span><span class="na">getBsplType</span><span class="p">()).</span><span class="na">isEqualTo</span><span class="p">(</span><span class="s">&quot;P&quot;</span><span class="p">);</span>
<span class="w">        </span><span class="p">}</span>

<span class="w">        </span><span class="nd">@Test</span>
<span class="w">        </span><span class="nd">@DisplayName</span><span class="p">(</span><span class="s">&quot;費用は借方残高の損益計算書科目である&quot;</span><span class="p">)</span>
<span class="w">        </span><span class="kt">void</span><span class="w"> </span><span class="nf">expenseShouldBeDebitBalanceAndProfitAndLoss</span><span class="p">()</span><span class="w"> </span><span class="p">{</span>
<span class="w">            </span><span class="n">assertThat</span><span class="p">(</span><span class="n">AccountType</span><span class="p">.</span><span class="na">EXPENSE</span><span class="p">.</span><span class="na">isDebitBalance</span><span class="p">()).</span><span class="na">isTrue</span><span class="p">();</span>
<span class="w">            </span><span class="n">assertThat</span><span class="p">(</span><span class="n">AccountType</span><span class="p">.</span><span class="na">EXPENSE</span><span class="p">.</span><span class="na">isProfitAndLoss</span><span class="p">()).</span><span class="na">isTrue</span><span class="p">();</span>
<span class="w">        </span><span class="p">}</span>

<span class="w">        </span><span class="nd">@Test</span>
<span class="w">        </span><span class="nd">@DisplayName</span><span class="p">(</span><span class="s">&quot;表示名から勘定科目種別を取得できる&quot;</span><span class="p">)</span>
<span class="w">        </span><span class="kt">void</span><span class="w"> </span><span class="nf">shouldGetAccountTypeFromDisplayName</span><span class="p">()</span><span class="w"> </span><span class="p">{</span>
<span class="w">            </span><span class="n">assertThat</span><span class="p">(</span><span class="n">AccountType</span><span class="p">.</span><span class="na">fromDisplayName</span><span class="p">(</span><span class="s">&quot;資産&quot;</span><span class="p">))</span>
<span class="w">                </span><span class="p">.</span><span class="na">isEqualTo</span><span class="p">(</span><span class="n">AccountType</span><span class="p">.</span><span class="na">ASSET</span><span class="p">);</span>
<span class="w">            </span><span class="n">assertThat</span><span class="p">(</span><span class="n">AccountType</span><span class="p">.</span><span class="na">fromDisplayName</span><span class="p">(</span><span class="s">&quot;負債&quot;</span><span class="p">))</span>
<span class="w">                </span><span class="p">.</span><span class="na">isEqualTo</span><span class="p">(</span><span class="n">AccountType</span><span class="p">.</span><span class="na">LIABILITY</span><span class="p">);</span>
<span class="w">        </span><span class="p">}</span>
<span class="w">    </span><span class="p">}</span>

<span class="w">    </span><span class="nd">@Nested</span>
<span class="w">    </span><span class="nd">@DisplayName</span><span class="p">(</span><span class="s">&quot;異常値テスト&quot;</span><span class="p">)</span>
<span class="w">    </span><span class="kd">class</span> <span class="nc">Abnormal</span><span class="w"> </span><span class="p">{</span>

<span class="w">        </span><span class="nd">@Test</span>
<span class="w">        </span><span class="nd">@DisplayName</span><span class="p">(</span><span class="s">&quot;不正な表示名で例外が発生する&quot;</span><span class="p">)</span>
<span class="w">        </span><span class="kt">void</span><span class="w"> </span><span class="nf">shouldThrowExceptionForInvalidDisplayName</span><span class="p">()</span><span class="w"> </span><span class="p">{</span>
<span class="w">            </span><span class="n">assertThatThrownBy</span><span class="p">(()</span><span class="w"> </span><span class="o">-&gt;</span><span class="w"> </span><span class="n">AccountType</span><span class="p">.</span><span class="na">fromDisplayName</span><span class="p">(</span><span class="s">&quot;不正な種別&quot;</span><span class="p">))</span>
<span class="w">                </span><span class="p">.</span><span class="na">isInstanceOf</span><span class="p">(</span><span class="n">IllegalArgumentException</span><span class="p">.</span><span class="na">class</span><span class="p">)</span>
<span class="w">                </span><span class="p">.</span><span class="na">hasMessageContaining</span><span class="p">(</span><span class="s">&quot;Unknown account type&quot;</span><span class="p">);</span>
<span class="w">        </span><span class="p">}</span>
<span class="w">    </span><span class="p">}</span>
<span class="p">}</span>
</code></pre></div>
<h3 id="_4">テストの分類構造<a class="headerlink" href="#_4" title="Permanent link">&para;</a></h3>
<p>テストは、正常値・境界値・異常値・極端値に分類して網羅的に検証します。</p>
<div class="highlight"><pre><span></span><code><span class="kn">package</span><span class="w"> </span><span class="nn">com.example.accounting.domain.model.journal</span><span class="p">;</span>

<span class="kn">import</span><span class="w"> </span><span class="nn">org.junit.jupiter.api.*</span><span class="p">;</span>
<span class="kn">import</span><span class="w"> </span><span class="nn">org.junit.jupiter.api.DynamicTest</span><span class="p">;</span>
<span class="kn">import</span><span class="w"> </span><span class="nn">org.junit.jupiter.api.TestFactory</span><span class="p">;</span>
<span class="kn">import</span><span class="w"> </span><span class="nn">java.math.BigDecimal</span><span class="p">;</span>
<span class="kn">import</span><span class="w"> </span><span class="nn">java.util.List</span><span class="p">;</span>
<span class="kn">import</span><span class="w"> </span><span class="nn">java.util.stream.Stream</span><span class="p">;</span>
<span class="kn">import static</span><span class="w"> </span><span class="nn">org.junit.jupiter.api.Assertions.*</span><span class="p">;</span>
<span class="kn">import static</span><span class="w"> </span><span class="nn">org.junit.jupiter.api.DynamicTest.dynamicTest</span><span class="p">;</span>

<span class="nd">@DisplayName</span><span class="p">(</span><span class="s">&quot;金額（Money）テスト&quot;</span><span class="p">)</span>
<span class="kd">class</span> <span class="nc">MoneyTest</span><span class="w"> </span><span class="p">{</span>

<span class="w">    </span><span class="nd">@Nested</span>
<span class="w">    </span><span class="nd">@DisplayName</span><span class="p">(</span><span class="s">&quot;正常値テスト&quot;</span><span class="p">)</span>
<span class="w">    </span><span class="kd">class</span> <span class="nc">Normal</span><span class="w"> </span><span class="p">{</span>

<span class="w">        </span><span class="nd">@Test</span>
<span class="w">        </span><span class="nd">@DisplayName</span><span class="p">(</span><span class="s">&quot;正の金額を生成できる&quot;</span><span class="p">)</span>
<span class="w">        </span><span class="kt">void</span><span class="w"> </span><span class="nf">shouldCreatePositiveAmount</span><span class="p">()</span><span class="w"> </span><span class="p">{</span>
<span class="w">            </span><span class="n">Money</span><span class="w"> </span><span class="n">money</span><span class="w"> </span><span class="o">=</span><span class="w"> </span><span class="n">Money</span><span class="p">.</span><span class="na">of</span><span class="p">(</span><span class="k">new</span><span class="w"> </span><span class="n">BigDecimal</span><span class="p">(</span><span class="s">&quot;10000&quot;</span><span class="p">));</span>
<span class="w">            </span><span class="n">assertEquals</span><span class="p">(</span><span class="k">new</span><span class="w"> </span><span class="n">BigDecimal</span><span class="p">(</span><span class="s">&quot;10000&quot;</span><span class="p">),</span><span class="w"> </span><span class="n">money</span><span class="p">.</span><span class="na">getValue</span><span class="p">());</span>
<span class="w">        </span><span class="p">}</span>

<span class="w">        </span><span class="nd">@Test</span>
<span class="w">        </span><span class="nd">@DisplayName</span><span class="p">(</span><span class="s">&quot;金額を加算できる&quot;</span><span class="p">)</span>
<span class="w">        </span><span class="kt">void</span><span class="w"> </span><span class="nf">shouldAddAmount</span><span class="p">()</span><span class="w"> </span><span class="p">{</span>
<span class="w">            </span><span class="n">Money</span><span class="w"> </span><span class="n">money1</span><span class="w"> </span><span class="o">=</span><span class="w"> </span><span class="n">Money</span><span class="p">.</span><span class="na">of</span><span class="p">(</span><span class="k">new</span><span class="w"> </span><span class="n">BigDecimal</span><span class="p">(</span><span class="s">&quot;10000&quot;</span><span class="p">));</span>
<span class="w">            </span><span class="n">Money</span><span class="w"> </span><span class="n">money2</span><span class="w"> </span><span class="o">=</span><span class="w"> </span><span class="n">Money</span><span class="p">.</span><span class="na">of</span><span class="p">(</span><span class="k">new</span><span class="w"> </span><span class="n">BigDecimal</span><span class="p">(</span><span class="s">&quot;5000&quot;</span><span class="p">));</span>
<span class="w">            </span><span class="n">Money</span><span class="w"> </span><span class="n">result</span><span class="w"> </span><span class="o">=</span><span class="w"> </span><span class="n">money1</span><span class="p">.</span><span class="na">add</span><span class="p">(</span><span class="n">money2</span><span class="p">);</span>
<span class="w">            </span><span class="n">assertEquals</span><span class="p">(</span><span class="k">new</span><span class="w"> </span><span class="n">BigDecimal</span><span class="p">(</span><span class="s">&quot;15000&quot;</span><span class="p">),</span><span class="w"> </span><span class="n">result</span><span class="p">.</span><span class="na">getValue</span><span class="p">());</span>
<span class="w">        </span><span class="p">}</span>

<span class="w">        </span><span class="nd">@Test</span>
<span class="w">        </span><span class="nd">@DisplayName</span><span class="p">(</span><span class="s">&quot;金額を減算できる&quot;</span><span class="p">)</span>
<span class="w">        </span><span class="kt">void</span><span class="w"> </span><span class="nf">shouldSubtractAmount</span><span class="p">()</span><span class="w"> </span><span class="p">{</span>
<span class="w">            </span><span class="n">Money</span><span class="w"> </span><span class="n">money1</span><span class="w"> </span><span class="o">=</span><span class="w"> </span><span class="n">Money</span><span class="p">.</span><span class="na">of</span><span class="p">(</span><span class="k">new</span><span class="w"> </span><span class="n">BigDecimal</span><span class="p">(</span><span class="s">&quot;10000&quot;</span><span class="p">));</span>
<span class="w">            </span><span class="n">Money</span><span class="w"> </span><span class="n">money2</span><span class="w"> </span><span class="o">=</span><span class="w"> </span><span class="n">Money</span><span class="p">.</span><span class="na">of</span><span class="p">(</span><span class="k">new</span><span class="w"> </span><span class="n">BigDecimal</span><span class="p">(</span><span class="s">&quot;3000&quot;</span><span class="p">));</span>
<span class="w">            </span><span class="n">Money</span><span class="w"> </span><span class="n">result</span><span class="w"> </span><span class="o">=</span><span class="w"> </span><span class="n">money1</span><span class="p">.</span><span class="na">subtract</span><span class="p">(</span><span class="n">money2</span><span class="p">);</span>
<span class="w">            </span><span class="n">assertEquals</span><span class="p">(</span><span class="k">new</span><span class="w"> </span><span class="n">BigDecimal</span><span class="p">(</span><span class="s">&quot;7000&quot;</span><span class="p">),</span><span class="w"> </span><span class="n">result</span><span class="p">.</span><span class="na">getValue</span><span class="p">());</span>
<span class="w">        </span><span class="p">}</span>

<span class="w">        </span><span class="nd">@Test</span>
<span class="w">        </span><span class="nd">@DisplayName</span><span class="p">(</span><span class="s">&quot;金額の等価性を検証できる&quot;</span><span class="p">)</span>
<span class="w">        </span><span class="kt">void</span><span class="w"> </span><span class="nf">shouldCheckEquality</span><span class="p">()</span><span class="w"> </span><span class="p">{</span>
<span class="w">            </span><span class="n">Money</span><span class="w"> </span><span class="n">money1</span><span class="w"> </span><span class="o">=</span><span class="w"> </span><span class="n">Money</span><span class="p">.</span><span class="na">of</span><span class="p">(</span><span class="k">new</span><span class="w"> </span><span class="n">BigDecimal</span><span class="p">(</span><span class="s">&quot;10000&quot;</span><span class="p">));</span>
<span class="w">            </span><span class="n">Money</span><span class="w"> </span><span class="n">money2</span><span class="w"> </span><span class="o">=</span><span class="w"> </span><span class="n">Money</span><span class="p">.</span><span class="na">of</span><span class="p">(</span><span class="k">new</span><span class="w"> </span><span class="n">BigDecimal</span><span class="p">(</span><span class="s">&quot;10000&quot;</span><span class="p">));</span>
<span class="w">            </span><span class="n">Money</span><span class="w"> </span><span class="n">money3</span><span class="w"> </span><span class="o">=</span><span class="w"> </span><span class="n">Money</span><span class="p">.</span><span class="na">of</span><span class="p">(</span><span class="k">new</span><span class="w"> </span><span class="n">BigDecimal</span><span class="p">(</span><span class="s">&quot;5000&quot;</span><span class="p">));</span>

<span class="w">            </span><span class="n">assertEquals</span><span class="p">(</span><span class="n">money1</span><span class="p">,</span><span class="w"> </span><span class="n">money2</span><span class="p">);</span>
<span class="w">            </span><span class="n">assertNotEquals</span><span class="p">(</span><span class="n">money1</span><span class="p">,</span><span class="w"> </span><span class="n">money3</span><span class="p">);</span>
<span class="w">        </span><span class="p">}</span>
<span class="w">    </span><span class="p">}</span>

<span class="w">    </span><span class="nd">@Nested</span>
<span class="w">    </span><span class="nd">@DisplayName</span><span class="p">(</span><span class="s">&quot;境界値テスト&quot;</span><span class="p">)</span>
<span class="w">    </span><span class="kd">class</span> <span class="nc">Boundary</span><span class="w"> </span><span class="p">{</span>

<span class="w">        </span><span class="nd">@DisplayName</span><span class="p">(</span><span class="s">&quot;境界値が受け入れられること&quot;</span><span class="p">)</span>
<span class="w">        </span><span class="nd">@TestFactory</span>
<span class="w">        </span><span class="n">Stream</span><span class="o">&lt;</span><span class="n">DynamicTest</span><span class="o">&gt;</span><span class="w"> </span><span class="nf">shouldAcceptBoundaryValues</span><span class="p">()</span><span class="w"> </span><span class="p">{</span>
<span class="w">            </span><span class="n">List</span><span class="o">&lt;</span><span class="n">BigDecimal</span><span class="o">&gt;</span><span class="w"> </span><span class="n">validInputs</span><span class="w"> </span><span class="o">=</span><span class="w"> </span><span class="n">List</span><span class="p">.</span><span class="na">of</span><span class="p">(</span>
<span class="w">                </span><span class="n">BigDecimal</span><span class="p">.</span><span class="na">ZERO</span><span class="p">,</span><span class="w">                    </span><span class="c1">// 最小値（0円）</span>
<span class="w">                </span><span class="k">new</span><span class="w"> </span><span class="n">BigDecimal</span><span class="p">(</span><span class="s">&quot;0.01&quot;</span><span class="p">),</span><span class="w">             </span><span class="c1">// 最小正の値</span>
<span class="w">                </span><span class="k">new</span><span class="w"> </span><span class="n">BigDecimal</span><span class="p">(</span><span class="s">&quot;999999999999.99&quot;</span><span class="p">)</span><span class="w">   </span><span class="c1">// 最大値（約1兆円）</span>
<span class="w">            </span><span class="p">);</span>
<span class="w">            </span><span class="k">return</span><span class="w"> </span><span class="n">validInputs</span><span class="p">.</span><span class="na">stream</span><span class="p">()</span>
<span class="w">                </span><span class="p">.</span><span class="na">map</span><span class="p">(</span><span class="n">input</span><span class="w"> </span><span class="o">-&gt;</span><span class="w"> </span><span class="n">dynamicTest</span><span class="p">(</span>
<span class="w">                    </span><span class="s">&quot;Accepted: &quot;</span><span class="w"> </span><span class="o">+</span><span class="w"> </span><span class="n">input</span><span class="p">,</span>
<span class="w">                    </span><span class="p">()</span><span class="w"> </span><span class="o">-&gt;</span><span class="w"> </span><span class="n">assertDoesNotThrow</span><span class="p">(()</span><span class="w"> </span><span class="o">-&gt;</span><span class="w"> </span><span class="n">Money</span><span class="p">.</span><span class="na">of</span><span class="p">(</span><span class="n">input</span><span class="p">))</span>
<span class="w">                </span><span class="p">));</span>
<span class="w">        </span><span class="p">}</span>

<span class="w">        </span><span class="nd">@DisplayName</span><span class="p">(</span><span class="s">&quot;境界値外が拒否されること&quot;</span><span class="p">)</span>
<span class="w">        </span><span class="nd">@TestFactory</span>
<span class="w">        </span><span class="n">Stream</span><span class="o">&lt;</span><span class="n">DynamicTest</span><span class="o">&gt;</span><span class="w"> </span><span class="nf">shouldRejectOutOfBoundaryValues</span><span class="p">()</span><span class="w"> </span><span class="p">{</span>
<span class="w">            </span><span class="n">List</span><span class="o">&lt;</span><span class="n">BigDecimal</span><span class="o">&gt;</span><span class="w"> </span><span class="n">invalidInputs</span><span class="w"> </span><span class="o">=</span><span class="w"> </span><span class="n">List</span><span class="p">.</span><span class="na">of</span><span class="p">(</span>
<span class="w">                </span><span class="k">new</span><span class="w"> </span><span class="n">BigDecimal</span><span class="p">(</span><span class="s">&quot;-0.01&quot;</span><span class="p">),</span><span class="w">            </span><span class="c1">// 負の値</span>
<span class="w">                </span><span class="k">new</span><span class="w"> </span><span class="n">BigDecimal</span><span class="p">(</span><span class="s">&quot;-1000&quot;</span><span class="p">)</span><span class="w">             </span><span class="c1">// 負の金額</span>
<span class="w">            </span><span class="p">);</span>
<span class="w">            </span><span class="k">return</span><span class="w"> </span><span class="n">invalidInputs</span><span class="p">.</span><span class="na">stream</span><span class="p">()</span>
<span class="w">                </span><span class="p">.</span><span class="na">map</span><span class="p">(</span><span class="n">input</span><span class="w"> </span><span class="o">-&gt;</span><span class="w"> </span><span class="n">dynamicTest</span><span class="p">(</span>
<span class="w">                    </span><span class="s">&quot;Rejected: &quot;</span><span class="w"> </span><span class="o">+</span><span class="w"> </span><span class="n">input</span><span class="p">,</span>
<span class="w">                    </span><span class="p">()</span><span class="w"> </span><span class="o">-&gt;</span><span class="w"> </span><span class="n">assertThrows</span><span class="p">(</span>
<span class="w">                        </span><span class="n">IllegalArgumentException</span><span class="p">.</span><span class="na">class</span><span class="p">,</span>
<span class="w">                        </span><span class="p">()</span><span class="w"> </span><span class="o">-&gt;</span><span class="w"> </span><span class="n">Money</span><span class="p">.</span><span class="na">of</span><span class="p">(</span><span class="n">input</span><span class="p">)</span>
<span class="w">                    </span><span class="p">)</span>
<span class="w">                </span><span class="p">));</span>
<span class="w">        </span><span class="p">}</span>
<span class="w">    </span><span class="p">}</span>

<span class="w">    </span><span class="nd">@Nested</span>
<span class="w">    </span><span class="nd">@DisplayName</span><span class="p">(</span><span class="s">&quot;異常値テスト&quot;</span><span class="p">)</span>
<span class="w">    </span><span class="kd">class</span> <span class="nc">Abnormal</span><span class="w"> </span><span class="p">{</span>

<span class="w">        </span><span class="nd">@Test</span>
<span class="w">        </span><span class="nd">@DisplayName</span><span class="p">(</span><span class="s">&quot;null は拒否される&quot;</span><span class="p">)</span>
<span class="w">        </span><span class="kt">void</span><span class="w"> </span><span class="nf">shouldRejectNull</span><span class="p">()</span><span class="w"> </span><span class="p">{</span>
<span class="w">            </span><span class="n">assertThrows</span><span class="p">(</span><span class="n">NullPointerException</span><span class="p">.</span><span class="na">class</span><span class="p">,</span><span class="w"> </span><span class="p">()</span><span class="w"> </span><span class="o">-&gt;</span><span class="w"> </span><span class="n">Money</span><span class="p">.</span><span class="na">of</span><span class="p">(</span><span class="kc">null</span><span class="p">));</span>
<span class="w">        </span><span class="p">}</span>
<span class="w">    </span><span class="p">}</span>
<span class="p">}</span>
</code></pre></div>
<p><img src="data:image/svg+xml;base64,PHN2ZyB4bWxucz0iaHR0cDovL3d3dy53My5vcmcvMjAwMC9zdmciIHhtbG5zOnhsaW5rPSJodHRwOi8vd3d3LnczLm9yZy8xOTk5L3hsaW5rIiBjb250ZW50U3R5bGVUeXBlPSJ0ZXh0L2NzcyIgZGF0YS1kaWFncmFtLXR5cGU9IkRFU0NSSVBUSU9OIiBoZWlnaHQ9IjUwNnB4IiBwcmVzZXJ2ZUFzcGVjdFJhdGlvPSJub25lIiBzdHlsZT0id2lkdGg6MzcxcHg7aGVpZ2h0OjUwNnB4O2JhY2tncm91bmQ6I0ZGRkZGRjsiIHZlcnNpb249IjEuMSIgdmlld0JveD0iMCAwIDM3MSA1MDYiIHdpZHRoPSIzNzFweCIgem9vbUFuZFBhbj0ibWFnbmlmeSI+PHRpdGxlPiYjMTI0ODY7JiMxMjQ3MzsmIzEyNDg4OyYjMTI0NjU7JiMxMjU0MDsmIzEyNDczOyYjMTIzOTg7JiMyMDk5ODsmIzM5MDA2OzwvdGl0bGU+PGRlZnMvPjxnPjxnIGNsYXNzPSJ0aXRsZSIgZGF0YS1zb3VyY2UtbGluZT0iMSI+PHRleHQgZmlsbD0iIzAwMDAwMCIgZm9udC1mYW1pbHk9InNhbnMtc2VyaWYiIGZvbnQtc2l6ZT0iMTQiIGZvbnQtd2VpZ2h0PSJib2xkIiBsZW5ndGhBZGp1c3Q9InNwYWNpbmciIHRleHRMZW5ndGg9IjEyNS45OTk1IiB4PSIxMTUuNzUwNCIgeT0iMjIuOTk1MSI+JiMxMjQ4NjsmIzEyNDczOyYjMTI0ODg7JiMxMjQ2NTsmIzEyNTQwOyYjMTI0NzM7JiMxMjM5ODsmIzIwOTk4OyYjMzkwMDY7PC90ZXh0PjwvZz48IS0tY2x1c3RlciA/Pz8/Py0tPjxnIGNsYXNzPSJjbHVzdGVyIiBkYXRhLWVudGl0eT0iLi4uLi4iIGRhdGEtc291cmNlLWxpbmU9IjMiIGRhdGEtdWlkPSJlbnQwMDAyIiBpZD0iY2x1c3Rlcl8uLi4uLiI+PHJlY3QgZmlsbD0ibm9uZSIgaGVpZ2h0PSI0NTYuMTkiIHJ4PSIyLjUiIHJ5PSIyLjUiIHN0eWxlPSJzdHJva2U6IzE4MTgxODtzdHJva2Utd2lkdGg6MTsiIHdpZHRoPSIxMzYiIHg9IjciIHk9IjQ0LjI5NjkiLz48dGV4dCBmaWxsPSIjMDAwMDAwIiBmb250LWZhbWlseT0ic2Fucy1zZXJpZiIgZm9udC1zaXplPSIxNCIgZm9udC13ZWlnaHQ9ImJvbGQiIGxlbmd0aEFkanVzdD0ic3BhY2luZyIgdGV4dExlbmd0aD0iNjkuOTk5NyIgeD0iNDAuMDAwMiIgeT0iNTkuMjkyIj4mIzIxMzM2OyYjMjAzMDc7JiMxMjQ4NjsmIzEyNDczOyYjMTI0ODg7PC90ZXh0PjwvZz48IS0tZW50aXR5IG5vcm1hbC0tPjxnIGNsYXNzPSJlbnRpdHkiIGRhdGEtZW50aXR5PSJub3JtYWwiIGRhdGEtc291cmNlLWxpbmU9IjQiIGRhdGEtdWlkPSJlbnQwMDAzIiBpZD0iZW50aXR5X25vcm1hbCI+PHJlY3QgZmlsbD0iI0FERDhFNiIgaGVpZ2h0PSIzNi4yOTY5IiByeD0iMi41IiByeT0iMi41IiBzdHlsZT0ic3Ryb2tlOiMxODE4MTg7c3Ryb2tlLXdpZHRoOjAuNTsiIHdpZHRoPSIxMDMuOTk5NiIgeD0iMjMiIHk9Ijc5LjI5NjkiLz48dGV4dCBmaWxsPSIjMDAwMDAwIiBmb250LWZhbWlseT0ic2Fucy1zZXJpZiIgZm9udC1zaXplPSIxNCIgbGVuZ3RoQWRqdXN0PSJzcGFjaW5nIiB0ZXh0TGVuZ3RoPSI4My45OTk2IiB4PSIzMyIgeT0iMTAyLjI5MiI+JiMyNzQ5MTsmIzI0MTIwOyYjMjA1MTY7JiMxMjQ4NjsmIzEyNDczOyYjMTI0ODg7PC90ZXh0PjwvZz48IS0tZW50aXR5IGJvdW5kYXJ5LS0+PGcgY2xhc3M9ImVudGl0eSIgZGF0YS1lbnRpdHk9ImJvdW5kYXJ5IiBkYXRhLXNvdXJjZS1saW5lPSI1IiBkYXRhLXVpZD0iZW50MDAwNCIgaWQ9ImVudGl0eV9ib3VuZGFyeSI+PHJlY3QgZmlsbD0iIzkwRUU5MCIgaGVpZ2h0PSIzNi4yOTY5IiByeD0iMi41IiByeT0iMi41IiBzdHlsZT0ic3Ryb2tlOiMxODE4MTg7c3Ryb2tlLXdpZHRoOjAuNTsiIHdpZHRoPSIxMDMuOTk5NiIgeD0iMjMiIHk9IjIwOS44MjY5Ii8+PHRleHQgZmlsbD0iIzAwMDAwMCIgZm9udC1mYW1pbHk9InNhbnMtc2VyaWYiIGZvbnQtc2l6ZT0iMTQiIGxlbmd0aEFkanVzdD0ic3BhY2luZyIgdGV4dExlbmd0aD0iODMuOTk5NiIgeD0iMzMiIHk9IjIzMi44MjIiPiYjMjI2NTk7JiMzMDAyODsmIzIwNTE2OyYjMTI0ODY7JiMxMjQ3MzsmIzEyNDg4OzwvdGV4dD48L2c+PCEtLWVudGl0eSBhYm5vcm1hbC0tPjxnIGNsYXNzPSJlbnRpdHkiIGRhdGEtZW50aXR5PSJhYm5vcm1hbCIgZGF0YS1zb3VyY2UtbGluZT0iNiIgZGF0YS11aWQ9ImVudDAwMDUiIGlkPSJlbnRpdHlfYWJub3JtYWwiPjxyZWN0IGZpbGw9IiNGMDgwODAiIGhlaWdodD0iMzYuMjk2OSIgcng9IjIuNSIgcnk9IjIuNSIgc3R5bGU9InN0cm9rZTojMTgxODE4O3N0cm9rZS13aWR0aDowLjU7IiB3aWR0aD0iMTAzLjk5OTYiIHg9IjIzIiB5PSIzMzIuNzg2OSIvPjx0ZXh0IGZpbGw9IiMwMDAwMDAiIGZvbnQtZmFtaWx5PSJzYW5zLXNlcmlmIiBmb250LXNpemU9IjE0IiBsZW5ndGhBZGp1c3Q9InNwYWNpbmciIHRleHRMZW5ndGg9IjgzLjk5OTYiIHg9IjMzIiB5PSIzNTUuNzgyIj4mIzMwMDY0OyYjMjQxMjA7JiMyMDUxNjsmIzEyNDg2OyYjMTI0NzM7JiMxMjQ4ODs8L3RleHQ+PC9nPjwhLS1lbnRpdHkgZXh0cmVtZS0tPjxnIGNsYXNzPSJlbnRpdHkiIGRhdGEtZW50aXR5PSJleHRyZW1lIiBkYXRhLXNvdXJjZS1saW5lPSI3IiBkYXRhLXVpZD0iZW50MDAwNiIgaWQ9ImVudGl0eV9leHRyZW1lIj48cmVjdCBmaWxsPSIjRkZGRkUwIiBoZWlnaHQ9IjM2LjI5NjkiIHJ4PSIyLjUiIHJ5PSIyLjUiIHN0eWxlPSJzdHJva2U6IzE4MTgxODtzdHJva2Utd2lkdGg6MC41OyIgd2lkdGg9IjEwMy45OTk2IiB4PSIyMyIgeT0iNDQ4LjE4NjkiLz48dGV4dCBmaWxsPSIjMDAwMDAwIiBmb250LWZhbWlseT0ic2Fucy1zZXJpZiIgZm9udC1zaXplPSIxNCIgbGVuZ3RoQWRqdXN0PSJzcGFjaW5nIiB0ZXh0TGVuZ3RoPSI4My45OTk2IiB4PSIzMyIgeT0iNDcxLjE4MiI+JiMyNjk5NzsmIzMxNDcxOyYjMjA1MTY7JiMxMjQ4NjsmIzEyNDczOyYjMTI0ODg7PC90ZXh0PjwvZz48ZyBjbGFzcz0iZW50aXR5IiBkYXRhLWVudGl0eT0iR01ONyIgZGF0YS1zb3VyY2UtbGluZT0iMTEiIGRhdGEtdWlkPSJlbnQwMDA4IiBpZD0iZW50aXR5X0dNTjciPjxwYXRoIGQ9Ik0xNjIsNjIuMTc2OSBMMTYyLDkzLjQ0NjkgTDEyNy4yNSw5Ny40NDY5IEwxNjIsMTAxLjQ0NjkgTDE2MiwxMzIuNzA4MSBBMCwwIDAgMCAwIDE2MiwxMzIuNzA4MSBMMzUyLjAwMDIsMTMyLjcwODEgQTAsMCAwIDAgMCAzNTIuMDAwMiwxMzIuNzA4MSBMMzUyLjAwMDIsNzIuMTc2OSBMMzQyLjAwMDIsNjIuMTc2OSBMMTYyLDYyLjE3NjkgQTAsMCAwIDAgMCAxNjIsNjIuMTc2OSIgZmlsbD0iI0ZFRkZERCIgc3R5bGU9InN0cm9rZTojMTgxODE4O3N0cm9rZS13aWR0aDowLjU7Ii8+PHBhdGggZD0iTTM0Mi4wMDAyLDYyLjE3NjkgTDM0Mi4wMDAyLDcyLjE3NjkgTDM1Mi4wMDAyLDcyLjE3NjkgTDM0Mi4wMDAyLDYyLjE3NjkiIGZpbGw9IiNGRUZGREQiIHN0eWxlPSJzdHJva2U6IzE4MTgxODtzdHJva2Utd2lkdGg6MC41OyIvPjx0ZXh0IGZpbGw9IiMwMDAwMDAiIGZvbnQtZmFtaWx5PSJzYW5zLXNlcmlmIiBmb250LXNpemU9IjEzIiBsZW5ndGhBZGp1c3Q9InNwYWNpbmciIHRleHRMZW5ndGg9IjE2OS4wMDAyIiB4PSIxNjgiIHk9Ijc5LjI0MzgiPiYjMjYzNzc7JiMyMTE3NzsmIzEyMzk0OyYjMjA4Mzc7JiMyMTE0NzsmIzEyMzk1OyYjMjM1NTA7JiMxMjM3NzsmIzEyNDI3OyYjMjYzOTk7JiMyNDQ1MzsmIzIxMjA1OyYjMjAzMTY7PC90ZXh0Pjx0ZXh0IGZpbGw9IiMwMDAwMDAiIGZvbnQtZmFtaWx5PSJzYW5zLXNlcmlmIiBmb250LXNpemU9IjEzIiBsZW5ndGhBZGp1c3Q9InNwYWNpbmciIHRleHRMZW5ndGg9Ijk5LjgyMzMiIHg9IjE2OCIgeT0iOTQuMzc2NiI+LSAmIzI3NDkxOyYjMTIzOTg7JiMzNzMyOTsmIzM4OTg5OyYjMTIzOTg7JiMyOTk4MzsmIzI1MTA0OzwvdGV4dD48dGV4dCBmaWxsPSIjMDAwMDAwIiBmb250LWZhbWlseT0ic2Fucy1zZXJpZiIgZm9udC1zaXplPSIxMyIgbGVuZ3RoQWRqdXN0PSJzcGFjaW5nIiB0ZXh0TGVuZ3RoPSIxMTIuODIzNCIgeD0iMTY4IiB5PSIxMDkuNTA5NCI+LSAmIzIxMTUyOyYjMzE2Mzk7JiMxMjUzOTsmIzI4MTg3OyYjMzE2Mzk7JiMxMjM5ODsmIzM1MzM2OyYjMzE2Mzk7PC90ZXh0Pjx0ZXh0IGZpbGw9IiMwMDAwMDAiIGZvbnQtZmFtaWx5PSJzYW5zLXNlcmlmIiBmb250LXNpemU9IjEzIiBsZW5ndGhBZGp1c3Q9InNwYWNpbmciIHRleHRMZW5ndGg9Ijg2LjgyMzMiIHg9IjE2OCIgeT0iMTI0LjY0MjIiPi0gJiMzMTU2MTsmIzIwMzg1OyYjMjQ2MTU7JiMxMjM5ODsmIzI2OTA4OyYjMzUzODg7PC90ZXh0PjwvZz48ZyBjbGFzcz0iZW50aXR5IiBkYXRhLWVudGl0eT0iR01OMTAiIGRhdGEtc291cmNlLWxpbmU9IjE4IiBkYXRhLXVpZD0iZW50MDAxMSIgaWQ9ImVudGl0eV9HTU4xMCI+PHBhdGggZD0iTTE2MiwxOTIuNzA2OSBMMTYyLDIyMy45NzY5IEwxMjcuNDEsMjI3Ljk3NjkgTDE2MiwyMzEuOTc2OSBMMTYyLDI2My4yMzgxIEEwLDAgMCAwIDAgMTYyLDI2My4yMzgxIEwzMDAuMDAwMSwyNjMuMjM4MSBBMCwwIDAgMCAwIDMwMC4wMDAxLDI2My4yMzgxIEwzMDAuMDAwMSwyMDIuNzA2OSBMMjkwLjAwMDEsMTkyLjcwNjkgTDE2MiwxOTIuNzA2OSBBMCwwIDAgMCAwIDE2MiwxOTIuNzA2OSIgZmlsbD0iI0ZFRkZERCIgc3R5bGU9InN0cm9rZTojMTgxODE4O3N0cm9rZS13aWR0aDowLjU7Ii8+PHBhdGggZD0iTTI5MC4wMDAxLDE5Mi43MDY5IEwyOTAuMDAwMSwyMDIuNzA2OSBMMzAwLjAwMDEsMjAyLjcwNjkgTDI5MC4wMDAxLDE5Mi43MDY5IiBmaWxsPSIjRkVGRkREIiBzdHlsZT0ic3Ryb2tlOiMxODE4MTg7c3Ryb2tlLXdpZHRoOjAuNTsiLz48dGV4dCBmaWxsPSIjMDAwMDAwIiBmb250LWZhbWlseT0ic2Fucy1zZXJpZiIgZm9udC1zaXplPSIxMyIgbGVuZ3RoQWRqdXN0PSJzcGFjaW5nIiB0ZXh0TGVuZ3RoPSIxMTcuMDAwMSIgeD0iMTY4IiB5PSIyMDkuNzczOCI+JiMzMTY4NDsmIzIyMjU4OyYjMTIzOTg7JiMyMjY1OTsmIzMwMDI4OyYjMTIzOTE7JiMxMjM5ODsmIzIxMjA1OyYjMjAzMTY7PC90ZXh0Pjx0ZXh0IGZpbGw9IiMwMDAwMDAiIGZvbnQtZmFtaWx5PSJzYW5zLXNlcmlmIiBmb250LXNpemU9IjEzIiBsZW5ndGhBZGp1c3Q9InNwYWNpbmciIHRleHRMZW5ndGg9Ijk1LjA5NDMiIHg9IjE2OCIgeT0iMjI0LjkwNjYiPi0gMCYjMjA4NzA7JiM2NTI4ODsmIzI2MzY4OyYjMjM1Njc7JiMyMDUxNjsmIzY1Mjg5OzwvdGV4dD48dGV4dCBmaWxsPSIjMDAwMDAwIiBmb250LWZhbWlseT0ic2Fucy1zZXJpZiIgZm9udC1zaXplPSIxMyIgbGVuZ3RoQWRqdXN0PSJzcGFjaW5nIiB0ZXh0TGVuZ3RoPSI2MC44MjMzIiB4PSIxNjgiIHk9IjI0MC4wMzk0Ij4tICYjMjYzNjg7JiMyMjgyMzsmIzM3MzI5OyYjMzg5ODk7PC90ZXh0Pjx0ZXh0IGZpbGw9IiMwMDAwMDAiIGZvbnQtZmFtaWx5PSJzYW5zLXNlcmlmIiBmb250LXNpemU9IjEzIiBsZW5ndGhBZGp1c3Q9InNwYWNpbmciIHRleHRMZW5ndGg9Ijk1LjA5NDMiIHg9IjE2OCIgeT0iMjU1LjE3MjIiPi0gJiMyMzU2NzsmIzI1OTY4OyYjMjg4NTc7JiMyMDE5NzsmIzE5OTc5OzImIzI2Njg5OzwvdGV4dD48L2c+PGcgY2xhc3M9ImVudGl0eSIgZGF0YS1lbnRpdHk9IkdNTjEzIiBkYXRhLXNvdXJjZS1saW5lPSIyNSIgZGF0YS11aWQ9ImVudDAwMTQiIGlkPSJlbnRpdHlfR01OMTMiPjxwYXRoIGQ9Ik0xNjEuNSwzMjMuMjM2OSBMMTYxLjUsMzQ2LjkzNjkgTDEyNy4xNCwzNTAuOTM2OSBMMTYxLjUsMzU0LjkzNjkgTDE2MS41LDM3OC42MzUzIEEwLDAgMCAwIDAgMTYxLjUsMzc4LjYzNTMgTDM2NC41MDAyLDM3OC42MzUzIEEwLDAgMCAwIDAgMzY0LjUwMDIsMzc4LjYzNTMgTDM2NC41MDAyLDMzMy4yMzY5IEwzNTQuNTAwMiwzMjMuMjM2OSBMMTYxLjUsMzIzLjIzNjkgQTAsMCAwIDAgMCAxNjEuNSwzMjMuMjM2OSIgZmlsbD0iI0ZFRkZERCIgc3R5bGU9InN0cm9rZTojMTgxODE4O3N0cm9rZS13aWR0aDowLjU7Ii8+PHBhdGggZD0iTTM1NC41MDAyLDMyMy4yMzY5IEwzNTQuNTAwMiwzMzMuMjM2OSBMMzY0LjUwMDIsMzMzLjIzNjkgTDM1NC41MDAyLDMyMy4yMzY5IiBmaWxsPSIjRkVGRkREIiBzdHlsZT0ic3Ryb2tlOiMxODE4MTg7c3Ryb2tlLXdpZHRoOjAuNTsiLz48dGV4dCBmaWxsPSIjMDAwMDAwIiBmb250LWZhbWlseT0ic2Fucy1zZXJpZiIgZm9udC1zaXplPSIxMyIgbGVuZ3RoQWRqdXN0PSJzcGFjaW5nIiB0ZXh0TGVuZ3RoPSIxODIuMDAwMiIgeD0iMTY3LjUiIHk9IjM0MC4zMDM4Ij4mIzI4OTYxOyYjMjExNzc7JiMxMjM5NDsmIzIwODM3OyYjMjExNDc7JiMxMjM5NTsmIzIzNTUwOyYjMTIzNzc7JiMxMjQyNzsmIzEyNDU2OyYjMTI1MjE7JiMxMjU0MDsmIzIwOTY2OyYjMjk3MDI7PC90ZXh0Pjx0ZXh0IGZpbGw9IiMwMDAwMDAiIGZvbnQtZmFtaWx5PSJzYW5zLXNlcmlmIiBmb250LXNpemU9IjEzIiBsZW5ndGhBZGp1c3Q9InNwYWNpbmciIHRleHRMZW5ndGg9IjYwLjgyMzMiIHg9IjE2Ny41IiB5PSIzNTUuNDM2NiI+LSAmIzM2MDAwOyYjMTIzOTg7JiMzNzMyOTsmIzM4OTg5OzwvdGV4dD48dGV4dCBmaWxsPSIjMDAwMDAwIiBmb250LWZhbWlseT0ic2Fucy1zZXJpZiIgZm9udC1zaXplPSIxMyIgbGVuZ3RoQWRqdXN0PSJzcGFjaW5nIiB0ZXh0TGVuZ3RoPSI0OS42NTc3IiB4PSIxNjcuNSIgeT0iMzcwLjU2OTQiPi0gbnVsbCAmIzIwNTE2OzwvdGV4dD48L2c+PGcgY2xhc3M9ImVudGl0eSIgZGF0YS1lbnRpdHk9IkdNTjE2IiBkYXRhLXNvdXJjZS1saW5lPSIzMSIgZGF0YS11aWQ9ImVudDAwMTciIGlkPSJlbnRpdHlfR01OMTYiPjxwYXRoIGQ9Ik0xNjIuMzEsNDM4LjYzNjkgTDE2Mi4zMSw0NjIuMzM2OSBMMTI3LjIxLDQ2Ni4zMzY5IEwxNjIuMzEsNDcwLjMzNjkgTDE2Mi4zMSw0OTQuMDM1MyBBMCwwIDAgMCAwIDE2Mi4zMSw0OTQuMDM1MyBMMzE3LjY5LDQ5NC4wMzUzIEEwLDAgMCAwIDAgMzE3LjY5LDQ5NC4wMzUzIEwzMTcuNjksNDQ4LjYzNjkgTDMwNy42OSw0MzguNjM2OSBMMTYyLjMxLDQzOC42MzY5IEEwLDAgMCAwIDAgMTYyLjMxLDQzOC42MzY5IiBmaWxsPSIjRkVGRkREIiBzdHlsZT0ic3Ryb2tlOiMxODE4MTg7c3Ryb2tlLXdpZHRoOjAuNTsiLz48cGF0aCBkPSJNMzA3LjY5LDQzOC42MzY5IEwzMDcuNjksNDQ4LjYzNjkgTDMxNy42OSw0NDguNjM2OSBMMzA3LjY5LDQzOC42MzY5IiBmaWxsPSIjRkVGRkREIiBzdHlsZT0ic3Ryb2tlOiMxODE4MTg7c3Ryb2tlLXdpZHRoOjAuNTsiLz48dGV4dCBmaWxsPSIjMDAwMDAwIiBmb250LWZhbWlseT0ic2Fucy1zZXJpZiIgZm9udC1zaXplPSIxMyIgbGVuZ3RoQWRqdXN0PSJzcGFjaW5nIiB0ZXh0TGVuZ3RoPSIxMzQuMzgiIHg9IjE2OC4zMSIgeT0iNDU1LjcwMzgiPiYjMjY5OTc7JiMzMTQ3MTsmIzEyMzk1OyYjMjI4MjM7JiMxMjM2NTsmIzEyMzU2Oy8mIzIzNTY3OyYjMTIzNzM7JiMxMjM1NjsmIzIwNTE2OzwvdGV4dD48dGV4dCBmaWxsPSIjMDAwMDAwIiBmb250LWZhbWlseT0ic2Fucy1zZXJpZiIgZm9udC1zaXplPSIxMyIgbGVuZ3RoQWRqdXN0PSJzcGFjaW5nIiB0ZXh0TGVuZ3RoPSI5NS4wOTQzIiB4PSIxNjguMzEiIHk9IjQ3MC44MzY2Ij4tIDEmIzIwODA2OyYjMjA4NzA7JiMzNjIyOTsmIzEyMzk4OyYjMzczMjk7JiMzODk4OTs8L3RleHQ+PHRleHQgZmlsbD0iIzAwMDAwMCIgZm9udC1mYW1pbHk9InNhbnMtc2VyaWYiIGZvbnQtc2l6ZT0iMTMiIGxlbmd0aEFkanVzdD0ic3BhY2luZyIgdGV4dExlbmd0aD0iOTkuODIzMyIgeD0iMTY4LjMxIiB5PSI0ODUuOTY5NCI+LSAmIzIzNTY3OyYjMjU5Njg7JiMyODg1NzsmIzIwMTk3OyYjMTk5Nzk7JiMyMjgxMDsmIzI2Njg5OzwvdGV4dD48L2c+PCEtLWxpbmsgbm9ybWFsIHRvIGJvdW5kYXJ5LS0+PCEtLWxpbmsgYm91bmRhcnkgdG8gYWJub3JtYWwtLT48IS0tbGluayBhYm5vcm1hbCB0byBleHRyZW1lLS0+PCEtLVNSQz1bVExCVFJqQ201Qnh0S3JaUlRHTmk0VTIyNnJ1MDhJdW9PaFBBY0lFNUwwQ1hmMlBmaXhIYnNYMTRfM0pRNWFYUE9MaFJKSGhnakF1bHV6WGtoX09BNzZ6UFEzRHdUc29WcHpfRkVOUlBEV1hjZGlfU1MtTzVwM3JYdGFaTEpleTdfWkpVR3lXWUJzb0RoYTdSNGpfLWFidi1wQmtOeURsUEx0N3lXbS03bDloQ0Q2WWxDM01qM1N0MG9xX0FRLWxzR3dEMnZkeHl4aWRtX0h0Q2diY1hrY1F6b0wyRkJLQmVCNG82V196SFFRanBQOHpDSXBGYzU3UkV2NTdfM2VveWpZc29HSkJLS3M4T3ZZUHdYbjByUk84alRPVkRidmFGOUE4NlJxOC1sdGN6bXZqanZYcG5fZld2TnZkUjRqNC03elR2QXFtbDhySjJhMFY0RUR0d0M4c3RlUDJWemFNbTJfVXlVSTF4ZHZidDhPUGpMSll6SUpVMDBmeGFTSUNUbnc5dzI5U1lZSVJUNEk5S25xZjhLU3ZqSDRac1F4bnpnV1BzZElMcDUzV05TUF94X2pLZTQ1NkwzdFIwLVRNZWVRSjFDSmN5YVFPSzNOUDRFOTNrVU5oSElPVWo1SDR4MnRibENxUW81WXlBV2hiVHZsczJKVTlSRi1NazNtb0pxdUN5MnBaSVljNVdLQkVHOUhpOWtmY08tWmkxTW4xWnhIdzhQS3U4YlNBTnkwRFV6eTdadjR6emJnM1dZMlZWWWZ3a3p3SnFSQnNpd3VHLXJ5ckRNbGdOUVJ2X1hPUlNWQnZmWE9QQ3pyeTBdLS0+PC9nPjwvc3ZnPg==" class="uml" alt="uml diagram" title="" /></p>
<h3 id="_5">仕訳ドメインモデルのテスト<a class="headerlink" href="#_5" title="Permanent link">&para;</a></h3>
<div class="highlight"><pre><span></span><code><span class="kn">package</span><span class="w"> </span><span class="nn">com.example.accounting.domain.model.journal</span><span class="p">;</span>

<span class="kn">import</span><span class="w"> </span><span class="nn">org.junit.jupiter.api.*</span><span class="p">;</span>
<span class="kn">import</span><span class="w"> </span><span class="nn">java.math.BigDecimal</span><span class="p">;</span>
<span class="kn">import</span><span class="w"> </span><span class="nn">java.time.LocalDate</span><span class="p">;</span>
<span class="kn">import</span><span class="w"> </span><span class="nn">java.util.List</span><span class="p">;</span>
<span class="kn">import static</span><span class="w"> </span><span class="nn">org.assertj.core.api.Assertions.*</span><span class="p">;</span>

<span class="nd">@DisplayName</span><span class="p">(</span><span class="s">&quot;仕訳ドメインモデルテスト&quot;</span><span class="p">)</span>
<span class="kd">class</span> <span class="nc">JournalEntryTest</span><span class="w"> </span><span class="p">{</span>

<span class="w">    </span><span class="nd">@Nested</span>
<span class="w">    </span><span class="nd">@DisplayName</span><span class="p">(</span><span class="s">&quot;仕訳作成テスト&quot;</span><span class="p">)</span>
<span class="w">    </span><span class="kd">class</span> <span class="nc">Creation</span><span class="w"> </span><span class="p">{</span>

<span class="w">        </span><span class="nd">@Test</span>
<span class="w">        </span><span class="nd">@DisplayName</span><span class="p">(</span><span class="s">&quot;有効な仕訳を作成できる&quot;</span><span class="p">)</span>
<span class="w">        </span><span class="kt">void</span><span class="w"> </span><span class="nf">shouldCreateValidJournalEntry</span><span class="p">()</span><span class="w"> </span><span class="p">{</span>
<span class="w">            </span><span class="c1">// Given</span>
<span class="w">            </span><span class="n">LocalDate</span><span class="w"> </span><span class="n">journalDate</span><span class="w"> </span><span class="o">=</span><span class="w"> </span><span class="n">LocalDate</span><span class="p">.</span><span class="na">of</span><span class="p">(</span><span class="mi">2024</span><span class="p">,</span><span class="w"> </span><span class="mi">4</span><span class="p">,</span><span class="w"> </span><span class="mi">1</span><span class="p">);</span>
<span class="w">            </span><span class="n">List</span><span class="o">&lt;</span><span class="n">JournalLine</span><span class="o">&gt;</span><span class="w"> </span><span class="n">lines</span><span class="w"> </span><span class="o">=</span><span class="w"> </span><span class="n">List</span><span class="p">.</span><span class="na">of</span><span class="p">(</span>
<span class="w">                </span><span class="n">JournalLine</span><span class="p">.</span><span class="na">debit</span><span class="p">(</span><span class="s">&quot;1101&quot;</span><span class="p">,</span><span class="w"> </span><span class="k">new</span><span class="w"> </span><span class="n">BigDecimal</span><span class="p">(</span><span class="s">&quot;10000&quot;</span><span class="p">)),</span>
<span class="w">                </span><span class="n">JournalLine</span><span class="p">.</span><span class="na">credit</span><span class="p">(</span><span class="s">&quot;4101&quot;</span><span class="p">,</span><span class="w"> </span><span class="k">new</span><span class="w"> </span><span class="n">BigDecimal</span><span class="p">(</span><span class="s">&quot;10000&quot;</span><span class="p">))</span>
<span class="w">            </span><span class="p">);</span>

<span class="w">            </span><span class="c1">// When</span>
<span class="w">            </span><span class="n">JournalEntry</span><span class="w"> </span><span class="n">entry</span><span class="w"> </span><span class="o">=</span><span class="w"> </span><span class="n">JournalEntry</span><span class="p">.</span><span class="na">create</span><span class="p">(</span><span class="n">journalDate</span><span class="p">,</span><span class="w"> </span><span class="s">&quot;現金売上&quot;</span><span class="p">,</span><span class="w"> </span><span class="n">lines</span><span class="p">);</span>

<span class="w">            </span><span class="c1">// Then</span>
<span class="w">            </span><span class="n">assertThat</span><span class="p">(</span><span class="n">entry</span><span class="p">.</span><span class="na">getJournalDate</span><span class="p">()).</span><span class="na">isEqualTo</span><span class="p">(</span><span class="n">journalDate</span><span class="p">);</span>
<span class="w">            </span><span class="n">assertThat</span><span class="p">(</span><span class="n">entry</span><span class="p">.</span><span class="na">getDescription</span><span class="p">()).</span><span class="na">isEqualTo</span><span class="p">(</span><span class="s">&quot;現金売上&quot;</span><span class="p">);</span>
<span class="w">            </span><span class="n">assertThat</span><span class="p">(</span><span class="n">entry</span><span class="p">.</span><span class="na">getLines</span><span class="p">()).</span><span class="na">hasSize</span><span class="p">(</span><span class="mi">2</span><span class="p">);</span>
<span class="w">        </span><span class="p">}</span>

<span class="w">        </span><span class="nd">@Test</span>
<span class="w">        </span><span class="nd">@DisplayName</span><span class="p">(</span><span class="s">&quot;借方と貸方が一致する仕訳は有効&quot;</span><span class="p">)</span>
<span class="w">        </span><span class="kt">void</span><span class="w"> </span><span class="nf">shouldBeValidWhenDebitEqualsCreditInCreation</span><span class="p">()</span><span class="w"> </span><span class="p">{</span>
<span class="w">            </span><span class="c1">// Given</span>
<span class="w">            </span><span class="n">List</span><span class="o">&lt;</span><span class="n">JournalLine</span><span class="o">&gt;</span><span class="w"> </span><span class="n">lines</span><span class="w"> </span><span class="o">=</span><span class="w"> </span><span class="n">List</span><span class="p">.</span><span class="na">of</span><span class="p">(</span>
<span class="w">                </span><span class="n">JournalLine</span><span class="p">.</span><span class="na">debit</span><span class="p">(</span><span class="s">&quot;1101&quot;</span><span class="p">,</span><span class="w"> </span><span class="k">new</span><span class="w"> </span><span class="n">BigDecimal</span><span class="p">(</span><span class="s">&quot;10000&quot;</span><span class="p">)),</span>
<span class="w">                </span><span class="n">JournalLine</span><span class="p">.</span><span class="na">credit</span><span class="p">(</span><span class="s">&quot;4101&quot;</span><span class="p">,</span><span class="w"> </span><span class="k">new</span><span class="w"> </span><span class="n">BigDecimal</span><span class="p">(</span><span class="s">&quot;10000&quot;</span><span class="p">))</span>
<span class="w">            </span><span class="p">);</span>

<span class="w">            </span><span class="c1">// When</span>
<span class="w">            </span><span class="n">JournalEntry</span><span class="w"> </span><span class="n">entry</span><span class="w"> </span><span class="o">=</span><span class="w"> </span><span class="n">JournalEntry</span><span class="p">.</span><span class="na">create</span><span class="p">(</span>
<span class="w">                </span><span class="n">LocalDate</span><span class="p">.</span><span class="na">now</span><span class="p">(),</span><span class="w"> </span><span class="s">&quot;テスト仕訳&quot;</span><span class="p">,</span><span class="w"> </span><span class="n">lines</span>
<span class="w">            </span><span class="p">);</span>

<span class="w">            </span><span class="c1">// Then</span>
<span class="w">            </span><span class="n">assertThat</span><span class="p">(</span><span class="n">entry</span><span class="p">.</span><span class="na">isBalanced</span><span class="p">()).</span><span class="na">isTrue</span><span class="p">();</span>
<span class="w">        </span><span class="p">}</span>
<span class="w">    </span><span class="p">}</span>

<span class="w">    </span><span class="nd">@Nested</span>
<span class="w">    </span><span class="nd">@DisplayName</span><span class="p">(</span><span class="s">&quot;貸借バランステスト&quot;</span><span class="p">)</span>
<span class="w">    </span><span class="kd">class</span> <span class="nc">Balance</span><span class="w"> </span><span class="p">{</span>

<span class="w">        </span><span class="nd">@Test</span>
<span class="w">        </span><span class="nd">@DisplayName</span><span class="p">(</span><span class="s">&quot;借方合計と貸方合計が一致する&quot;</span><span class="p">)</span>
<span class="w">        </span><span class="kt">void</span><span class="w"> </span><span class="nf">shouldHaveMatchingDebitAndCredit</span><span class="p">()</span><span class="w"> </span><span class="p">{</span>
<span class="w">            </span><span class="c1">// Given</span>
<span class="w">            </span><span class="n">List</span><span class="o">&lt;</span><span class="n">JournalLine</span><span class="o">&gt;</span><span class="w"> </span><span class="n">lines</span><span class="w"> </span><span class="o">=</span><span class="w"> </span><span class="n">List</span><span class="p">.</span><span class="na">of</span><span class="p">(</span>
<span class="w">                </span><span class="n">JournalLine</span><span class="p">.</span><span class="na">debit</span><span class="p">(</span><span class="s">&quot;1101&quot;</span><span class="p">,</span><span class="w"> </span><span class="k">new</span><span class="w"> </span><span class="n">BigDecimal</span><span class="p">(</span><span class="s">&quot;5000&quot;</span><span class="p">)),</span>
<span class="w">                </span><span class="n">JournalLine</span><span class="p">.</span><span class="na">debit</span><span class="p">(</span><span class="s">&quot;1102&quot;</span><span class="p">,</span><span class="w"> </span><span class="k">new</span><span class="w"> </span><span class="n">BigDecimal</span><span class="p">(</span><span class="s">&quot;5000&quot;</span><span class="p">)),</span>
<span class="w">                </span><span class="n">JournalLine</span><span class="p">.</span><span class="na">credit</span><span class="p">(</span><span class="s">&quot;4101&quot;</span><span class="p">,</span><span class="w"> </span><span class="k">new</span><span class="w"> </span><span class="n">BigDecimal</span><span class="p">(</span><span class="s">&quot;10000&quot;</span><span class="p">))</span>
<span class="w">            </span><span class="p">);</span>

<span class="w">            </span><span class="c1">// When</span>
<span class="w">            </span><span class="n">JournalEntry</span><span class="w"> </span><span class="n">entry</span><span class="w"> </span><span class="o">=</span><span class="w"> </span><span class="n">JournalEntry</span><span class="p">.</span><span class="na">create</span><span class="p">(</span>
<span class="w">                </span><span class="n">LocalDate</span><span class="p">.</span><span class="na">now</span><span class="p">(),</span><span class="w"> </span><span class="s">&quot;複合仕訳&quot;</span><span class="p">,</span><span class="w"> </span><span class="n">lines</span>
<span class="w">            </span><span class="p">);</span>

<span class="w">            </span><span class="c1">// Then</span>
<span class="w">            </span><span class="n">assertThat</span><span class="p">(</span><span class="n">entry</span><span class="p">.</span><span class="na">getTotalDebit</span><span class="p">())</span>
<span class="w">                </span><span class="p">.</span><span class="na">isEqualByComparingTo</span><span class="p">(</span><span class="k">new</span><span class="w"> </span><span class="n">BigDecimal</span><span class="p">(</span><span class="s">&quot;10000&quot;</span><span class="p">));</span>
<span class="w">            </span><span class="n">assertThat</span><span class="p">(</span><span class="n">entry</span><span class="p">.</span><span class="na">getTotalCredit</span><span class="p">())</span>
<span class="w">                </span><span class="p">.</span><span class="na">isEqualByComparingTo</span><span class="p">(</span><span class="k">new</span><span class="w"> </span><span class="n">BigDecimal</span><span class="p">(</span><span class="s">&quot;10000&quot;</span><span class="p">));</span>
<span class="w">            </span><span class="n">assertThat</span><span class="p">(</span><span class="n">entry</span><span class="p">.</span><span class="na">isBalanced</span><span class="p">()).</span><span class="na">isTrue</span><span class="p">();</span>
<span class="w">        </span><span class="p">}</span>

<span class="w">        </span><span class="nd">@Test</span>
<span class="w">        </span><span class="nd">@DisplayName</span><span class="p">(</span><span class="s">&quot;不均衡な仕訳は作成できない&quot;</span><span class="p">)</span>
<span class="w">        </span><span class="kt">void</span><span class="w"> </span><span class="nf">shouldRejectUnbalancedEntry</span><span class="p">()</span><span class="w"> </span><span class="p">{</span>
<span class="w">            </span><span class="c1">// Given</span>
<span class="w">            </span><span class="n">List</span><span class="o">&lt;</span><span class="n">JournalLine</span><span class="o">&gt;</span><span class="w"> </span><span class="n">lines</span><span class="w"> </span><span class="o">=</span><span class="w"> </span><span class="n">List</span><span class="p">.</span><span class="na">of</span><span class="p">(</span>
<span class="w">                </span><span class="n">JournalLine</span><span class="p">.</span><span class="na">debit</span><span class="p">(</span><span class="s">&quot;1101&quot;</span><span class="p">,</span><span class="w"> </span><span class="k">new</span><span class="w"> </span><span class="n">BigDecimal</span><span class="p">(</span><span class="s">&quot;10000&quot;</span><span class="p">)),</span>
<span class="w">                </span><span class="n">JournalLine</span><span class="p">.</span><span class="na">credit</span><span class="p">(</span><span class="s">&quot;4101&quot;</span><span class="p">,</span><span class="w"> </span><span class="k">new</span><span class="w"> </span><span class="n">BigDecimal</span><span class="p">(</span><span class="s">&quot;8000&quot;</span><span class="p">))</span><span class="w">  </span><span class="c1">// 不一致</span>
<span class="w">            </span><span class="p">);</span>

<span class="w">            </span><span class="c1">// When &amp; Then</span>
<span class="w">            </span><span class="n">assertThatThrownBy</span><span class="p">(()</span><span class="w"> </span><span class="o">-&gt;</span>
<span class="w">                </span><span class="n">JournalEntry</span><span class="p">.</span><span class="na">create</span><span class="p">(</span><span class="n">LocalDate</span><span class="p">.</span><span class="na">now</span><span class="p">(),</span><span class="w"> </span><span class="s">&quot;不均衡仕訳&quot;</span><span class="p">,</span><span class="w"> </span><span class="n">lines</span><span class="p">)</span>
<span class="w">            </span><span class="p">)</span>
<span class="w">                </span><span class="p">.</span><span class="na">isInstanceOf</span><span class="p">(</span><span class="n">IllegalArgumentException</span><span class="p">.</span><span class="na">class</span><span class="p">)</span>
<span class="w">                </span><span class="p">.</span><span class="na">hasMessageContaining</span><span class="p">(</span><span class="s">&quot;借方と貸方が一致しません&quot;</span><span class="p">);</span>
<span class="w">        </span><span class="p">}</span>
<span class="w">    </span><span class="p">}</span>

<span class="w">    </span><span class="nd">@Nested</span>
<span class="w">    </span><span class="nd">@DisplayName</span><span class="p">(</span><span class="s">&quot;仕訳明細テスト&quot;</span><span class="p">)</span>
<span class="w">    </span><span class="kd">class</span> <span class="nc">Lines</span><span class="w"> </span><span class="p">{</span>

<span class="w">        </span><span class="nd">@Test</span>
<span class="w">        </span><span class="nd">@DisplayName</span><span class="p">(</span><span class="s">&quot;空の明細は許可されない&quot;</span><span class="p">)</span>
<span class="w">        </span><span class="kt">void</span><span class="w"> </span><span class="nf">shouldRejectEmptyLines</span><span class="p">()</span><span class="w"> </span><span class="p">{</span>
<span class="w">            </span><span class="n">assertThatThrownBy</span><span class="p">(()</span><span class="w"> </span><span class="o">-&gt;</span>
<span class="w">                </span><span class="n">JournalEntry</span><span class="p">.</span><span class="na">create</span><span class="p">(</span><span class="n">LocalDate</span><span class="p">.</span><span class="na">now</span><span class="p">(),</span><span class="w"> </span><span class="s">&quot;空仕訳&quot;</span><span class="p">,</span><span class="w"> </span><span class="n">List</span><span class="p">.</span><span class="na">of</span><span class="p">())</span>
<span class="w">            </span><span class="p">)</span>
<span class="w">                </span><span class="p">.</span><span class="na">isInstanceOf</span><span class="p">(</span><span class="n">IllegalArgumentException</span><span class="p">.</span><span class="na">class</span><span class="p">)</span>
<span class="w">                </span><span class="p">.</span><span class="na">hasMessageContaining</span><span class="p">(</span><span class="s">&quot;仕訳明細が必要です&quot;</span><span class="p">);</span>
<span class="w">        </span><span class="p">}</span>

<span class="w">        </span><span class="nd">@Test</span>
<span class="w">        </span><span class="nd">@DisplayName</span><span class="p">(</span><span class="s">&quot;借方のみの仕訳は許可されない&quot;</span><span class="p">)</span>
<span class="w">        </span><span class="kt">void</span><span class="w"> </span><span class="nf">shouldRejectDebitOnlyEntry</span><span class="p">()</span><span class="w"> </span><span class="p">{</span>
<span class="w">            </span><span class="n">List</span><span class="o">&lt;</span><span class="n">JournalLine</span><span class="o">&gt;</span><span class="w"> </span><span class="n">lines</span><span class="w"> </span><span class="o">=</span><span class="w"> </span><span class="n">List</span><span class="p">.</span><span class="na">of</span><span class="p">(</span>
<span class="w">                </span><span class="n">JournalLine</span><span class="p">.</span><span class="na">debit</span><span class="p">(</span><span class="s">&quot;1101&quot;</span><span class="p">,</span><span class="w"> </span><span class="k">new</span><span class="w"> </span><span class="n">BigDecimal</span><span class="p">(</span><span class="s">&quot;10000&quot;</span><span class="p">))</span>
<span class="w">            </span><span class="p">);</span>

<span class="w">            </span><span class="n">assertThatThrownBy</span><span class="p">(()</span><span class="w"> </span><span class="o">-&gt;</span>
<span class="w">                </span><span class="n">JournalEntry</span><span class="p">.</span><span class="na">create</span><span class="p">(</span><span class="n">LocalDate</span><span class="p">.</span><span class="na">now</span><span class="p">(),</span><span class="w"> </span><span class="s">&quot;借方のみ&quot;</span><span class="p">,</span><span class="w"> </span><span class="n">lines</span><span class="p">)</span>
<span class="w">            </span><span class="p">)</span>
<span class="w">                </span><span class="p">.</span><span class="na">isInstanceOf</span><span class="p">(</span><span class="n">IllegalArgumentException</span><span class="p">.</span><span class="na">class</span><span class="p">);</span>
<span class="w">        </span><span class="p">}</span>
<span class="w">    </span><span class="p">}</span>
<span class="p">}</span>
</code></pre></div>
<h3 id="_6">財務指標計算のテスト<a class="headerlink" href="#_6" title="Permanent link">&para;</a></h3>
<div class="highlight"><pre><span></span><code><span class="kn">package</span><span class="w"> </span><span class="nn">com.example.accounting.domain.model.financial</span><span class="p">;</span>

<span class="kn">import</span><span class="w"> </span><span class="nn">org.junit.jupiter.api.*</span><span class="p">;</span>
<span class="kn">import</span><span class="w"> </span><span class="nn">java.math.BigDecimal</span><span class="p">;</span>
<span class="kn">import static</span><span class="w"> </span><span class="nn">org.assertj.core.api.Assertions.*</span><span class="p">;</span>
<span class="kn">import static</span><span class="w"> </span><span class="nn">org.assertj.core.api.Assertions.within</span><span class="p">;</span>

<span class="nd">@DisplayName</span><span class="p">(</span><span class="s">&quot;財務指標計算テスト&quot;</span><span class="p">)</span>
<span class="kd">class</span> <span class="nc">FinancialRatioAnalyzerTest</span><span class="w"> </span><span class="p">{</span>

<span class="w">    </span><span class="kd">private</span><span class="w"> </span><span class="n">FinancialRatioAnalyzer</span><span class="w"> </span><span class="n">analyzer</span><span class="p">;</span>
<span class="w">    </span><span class="kd">private</span><span class="w"> </span><span class="n">FinancialData</span><span class="w"> </span><span class="n">testData</span><span class="p">;</span>

<span class="w">    </span><span class="nd">@BeforeEach</span>
<span class="w">    </span><span class="kt">void</span><span class="w"> </span><span class="nf">setUp</span><span class="p">()</span><span class="w"> </span><span class="p">{</span>
<span class="w">        </span><span class="n">analyzer</span><span class="w"> </span><span class="o">=</span><span class="w"> </span><span class="k">new</span><span class="w"> </span><span class="n">FinancialRatioAnalyzer</span><span class="p">();</span>

<span class="w">        </span><span class="c1">// テスト用の財務データ</span>
<span class="w">        </span><span class="n">testData</span><span class="w"> </span><span class="o">=</span><span class="w"> </span><span class="k">new</span><span class="w"> </span><span class="n">FinancialData</span><span class="p">(</span>
<span class="w">            </span><span class="mi">2024</span><span class="p">,</span>
<span class="w">            </span><span class="k">new</span><span class="w"> </span><span class="n">BigDecimal</span><span class="p">(</span><span class="s">&quot;100000000&quot;</span><span class="p">),</span><span class="w">   </span><span class="c1">// 売上高: 1億円</span>
<span class="w">            </span><span class="k">new</span><span class="w"> </span><span class="n">BigDecimal</span><span class="p">(</span><span class="s">&quot;60000000&quot;</span><span class="p">),</span><span class="w">    </span><span class="c1">// 売上原価: 6000万円</span>
<span class="w">            </span><span class="k">new</span><span class="w"> </span><span class="n">BigDecimal</span><span class="p">(</span><span class="s">&quot;40000000&quot;</span><span class="p">),</span><span class="w">    </span><span class="c1">// 売上総利益: 4000万円</span>
<span class="w">            </span><span class="k">new</span><span class="w"> </span><span class="n">BigDecimal</span><span class="p">(</span><span class="s">&quot;15000000&quot;</span><span class="p">),</span><span class="w">    </span><span class="c1">// 営業利益: 1500万円</span>
<span class="w">            </span><span class="k">new</span><span class="w"> </span><span class="n">BigDecimal</span><span class="p">(</span><span class="s">&quot;15000000&quot;</span><span class="p">),</span><span class="w">    </span><span class="c1">// 経常利益: 1500万円</span>
<span class="w">            </span><span class="k">new</span><span class="w"> </span><span class="n">BigDecimal</span><span class="p">(</span><span class="s">&quot;10000000&quot;</span><span class="p">),</span><span class="w">    </span><span class="c1">// 当期純利益: 1000万円</span>
<span class="w">            </span><span class="k">new</span><span class="w"> </span><span class="n">BigDecimal</span><span class="p">(</span><span class="s">&quot;80000000&quot;</span><span class="p">),</span><span class="w">    </span><span class="c1">// 総資産: 8000万円</span>
<span class="w">            </span><span class="k">new</span><span class="w"> </span><span class="n">BigDecimal</span><span class="p">(</span><span class="s">&quot;20000000&quot;</span><span class="p">),</span><span class="w">    </span><span class="c1">// 有形固定資産: 2000万円</span>
<span class="w">            </span><span class="k">new</span><span class="w"> </span><span class="n">BigDecimal</span><span class="p">(</span><span class="s">&quot;60000000&quot;</span><span class="p">),</span><span class="w">    </span><span class="c1">// 流動資産: 6000万円</span>
<span class="w">            </span><span class="k">new</span><span class="w"> </span><span class="n">BigDecimal</span><span class="p">(</span><span class="s">&quot;20000000&quot;</span><span class="p">),</span><span class="w">    </span><span class="c1">// 流動負債: 2000万円</span>
<span class="w">            </span><span class="k">new</span><span class="w"> </span><span class="n">BigDecimal</span><span class="p">(</span><span class="s">&quot;50000000&quot;</span><span class="p">),</span><span class="w">    </span><span class="c1">// 当座資産: 5000万円</span>
<span class="w">            </span><span class="k">new</span><span class="w"> </span><span class="n">BigDecimal</span><span class="p">(</span><span class="s">&quot;60000000&quot;</span><span class="p">),</span><span class="w">    </span><span class="c1">// 純資産: 6000万円</span>
<span class="w">            </span><span class="k">new</span><span class="w"> </span><span class="n">BigDecimal</span><span class="p">(</span><span class="s">&quot;10000000&quot;</span><span class="p">),</span><span class="w">    </span><span class="c1">// 棚卸資産: 1000万円</span>
<span class="w">            </span><span class="k">new</span><span class="w"> </span><span class="n">BigDecimal</span><span class="p">(</span><span class="s">&quot;15000000&quot;</span><span class="p">)</span><span class="w">     </span><span class="c1">// 売上債権: 1500万円</span>
<span class="w">        </span><span class="p">);</span>
<span class="w">    </span><span class="p">}</span>

<span class="w">    </span><span class="nd">@Nested</span>
<span class="w">    </span><span class="nd">@DisplayName</span><span class="p">(</span><span class="s">&quot;収益性指標&quot;</span><span class="p">)</span>
<span class="w">    </span><span class="kd">class</span> <span class="nc">Profitability</span><span class="w"> </span><span class="p">{</span>

<span class="w">        </span><span class="nd">@Test</span>
<span class="w">        </span><span class="nd">@DisplayName</span><span class="p">(</span><span class="s">&quot;売上総利益率を正しく計算できる&quot;</span><span class="p">)</span>
<span class="w">        </span><span class="kt">void</span><span class="w"> </span><span class="nf">shouldCalculateGrossProfitMargin</span><span class="p">()</span><span class="w"> </span><span class="p">{</span>
<span class="w">            </span><span class="c1">// When</span>
<span class="w">            </span><span class="n">AnalysisResult</span><span class="w"> </span><span class="n">result</span><span class="w"> </span><span class="o">=</span><span class="w"> </span><span class="n">analyzer</span><span class="p">.</span><span class="na">analyze</span><span class="p">(</span><span class="n">testData</span><span class="p">);</span>

<span class="w">            </span><span class="c1">// Then: 40% (4000万 / 1億 * 100)</span>
<span class="w">            </span><span class="n">assertThat</span><span class="p">(</span><span class="n">result</span><span class="p">.</span><span class="na">profitability</span><span class="p">().</span><span class="na">grossProfitMargin</span><span class="p">())</span>
<span class="w">                </span><span class="p">.</span><span class="na">isCloseTo</span><span class="p">(</span><span class="k">new</span><span class="w"> </span><span class="n">BigDecimal</span><span class="p">(</span><span class="s">&quot;40.00&quot;</span><span class="p">),</span><span class="w"> </span><span class="n">within</span><span class="p">(</span><span class="k">new</span><span class="w"> </span><span class="n">BigDecimal</span><span class="p">(</span><span class="s">&quot;0.01&quot;</span><span class="p">)));</span>
<span class="w">        </span><span class="p">}</span>

<span class="w">        </span><span class="nd">@Test</span>
<span class="w">        </span><span class="nd">@DisplayName</span><span class="p">(</span><span class="s">&quot;売上高営業利益率を正しく計算できる&quot;</span><span class="p">)</span>
<span class="w">        </span><span class="kt">void</span><span class="w"> </span><span class="nf">shouldCalculateOperatingProfitMargin</span><span class="p">()</span><span class="w"> </span><span class="p">{</span>
<span class="w">            </span><span class="c1">// When</span>
<span class="w">            </span><span class="n">AnalysisResult</span><span class="w"> </span><span class="n">result</span><span class="w"> </span><span class="o">=</span><span class="w"> </span><span class="n">analyzer</span><span class="p">.</span><span class="na">analyze</span><span class="p">(</span><span class="n">testData</span><span class="p">);</span>

<span class="w">            </span><span class="c1">// Then: 15% (1500万 / 1億 * 100)</span>
<span class="w">            </span><span class="n">assertThat</span><span class="p">(</span><span class="n">result</span><span class="p">.</span><span class="na">profitability</span><span class="p">().</span><span class="na">operatingProfitMargin</span><span class="p">())</span>
<span class="w">                </span><span class="p">.</span><span class="na">isCloseTo</span><span class="p">(</span><span class="k">new</span><span class="w"> </span><span class="n">BigDecimal</span><span class="p">(</span><span class="s">&quot;15.00&quot;</span><span class="p">),</span><span class="w"> </span><span class="n">within</span><span class="p">(</span><span class="k">new</span><span class="w"> </span><span class="n">BigDecimal</span><span class="p">(</span><span class="s">&quot;0.01&quot;</span><span class="p">)));</span>
<span class="w">        </span><span class="p">}</span>

<span class="w">        </span><span class="nd">@Test</span>
<span class="w">        </span><span class="nd">@DisplayName</span><span class="p">(</span><span class="s">&quot;ROA（総資本利益率）を正しく計算できる&quot;</span><span class="p">)</span>
<span class="w">        </span><span class="kt">void</span><span class="w"> </span><span class="nf">shouldCalculateROA</span><span class="p">()</span><span class="w"> </span><span class="p">{</span>
<span class="w">            </span><span class="c1">// When</span>
<span class="w">            </span><span class="n">AnalysisResult</span><span class="w"> </span><span class="n">result</span><span class="w"> </span><span class="o">=</span><span class="w"> </span><span class="n">analyzer</span><span class="p">.</span><span class="na">analyze</span><span class="p">(</span><span class="n">testData</span><span class="p">);</span>

<span class="w">            </span><span class="c1">// Then: 18.75% (1500万 / 8000万 * 100)</span>
<span class="w">            </span><span class="n">assertThat</span><span class="p">(</span><span class="n">result</span><span class="p">.</span><span class="na">profitability</span><span class="p">().</span><span class="na">returnOnAssets</span><span class="p">())</span>
<span class="w">                </span><span class="p">.</span><span class="na">isCloseTo</span><span class="p">(</span><span class="k">new</span><span class="w"> </span><span class="n">BigDecimal</span><span class="p">(</span><span class="s">&quot;18.75&quot;</span><span class="p">),</span><span class="w"> </span><span class="n">within</span><span class="p">(</span><span class="k">new</span><span class="w"> </span><span class="n">BigDecimal</span><span class="p">(</span><span class="s">&quot;0.01&quot;</span><span class="p">)));</span>
<span class="w">        </span><span class="p">}</span>

<span class="w">        </span><span class="nd">@Test</span>
<span class="w">        </span><span class="nd">@DisplayName</span><span class="p">(</span><span class="s">&quot;ROE（自己資本利益率）を正しく計算できる&quot;</span><span class="p">)</span>
<span class="w">        </span><span class="kt">void</span><span class="w"> </span><span class="nf">shouldCalculateROE</span><span class="p">()</span><span class="w"> </span><span class="p">{</span>
<span class="w">            </span><span class="c1">// When</span>
<span class="w">            </span><span class="n">AnalysisResult</span><span class="w"> </span><span class="n">result</span><span class="w"> </span><span class="o">=</span><span class="w"> </span><span class="n">analyzer</span><span class="p">.</span><span class="na">analyze</span><span class="p">(</span><span class="n">testData</span><span class="p">);</span>

<span class="w">            </span><span class="c1">// Then: 16.67% (1000万 / 6000万 * 100)</span>
<span class="w">            </span><span class="n">assertThat</span><span class="p">(</span><span class="n">result</span><span class="p">.</span><span class="na">profitability</span><span class="p">().</span><span class="na">returnOnEquity</span><span class="p">())</span>
<span class="w">                </span><span class="p">.</span><span class="na">isCloseTo</span><span class="p">(</span><span class="k">new</span><span class="w"> </span><span class="n">BigDecimal</span><span class="p">(</span><span class="s">&quot;16.67&quot;</span><span class="p">),</span><span class="w"> </span><span class="n">within</span><span class="p">(</span><span class="k">new</span><span class="w"> </span><span class="n">BigDecimal</span><span class="p">(</span><span class="s">&quot;0.01&quot;</span><span class="p">)));</span>
<span class="w">        </span><span class="p">}</span>
<span class="w">    </span><span class="p">}</span>

<span class="w">    </span><span class="nd">@Nested</span>
<span class="w">    </span><span class="nd">@DisplayName</span><span class="p">(</span><span class="s">&quot;効率性指標&quot;</span><span class="p">)</span>
<span class="w">    </span><span class="kd">class</span> <span class="nc">Efficiency</span><span class="w"> </span><span class="p">{</span>

<span class="w">        </span><span class="nd">@Test</span>
<span class="w">        </span><span class="nd">@DisplayName</span><span class="p">(</span><span class="s">&quot;総資本回転率を正しく計算できる&quot;</span><span class="p">)</span>
<span class="w">        </span><span class="kt">void</span><span class="w"> </span><span class="nf">shouldCalculateTotalAssetTurnover</span><span class="p">()</span><span class="w"> </span><span class="p">{</span>
<span class="w">            </span><span class="c1">// When</span>
<span class="w">            </span><span class="n">AnalysisResult</span><span class="w"> </span><span class="n">result</span><span class="w"> </span><span class="o">=</span><span class="w"> </span><span class="n">analyzer</span><span class="p">.</span><span class="na">analyze</span><span class="p">(</span><span class="n">testData</span><span class="p">);</span>

<span class="w">            </span><span class="c1">// Then: 1.25回 (1億 / 8000万)</span>
<span class="w">            </span><span class="n">assertThat</span><span class="p">(</span><span class="n">result</span><span class="p">.</span><span class="na">efficiency</span><span class="p">().</span><span class="na">totalAssetTurnover</span><span class="p">())</span>
<span class="w">                </span><span class="p">.</span><span class="na">isCloseTo</span><span class="p">(</span><span class="k">new</span><span class="w"> </span><span class="n">BigDecimal</span><span class="p">(</span><span class="s">&quot;1.25&quot;</span><span class="p">),</span><span class="w"> </span><span class="n">within</span><span class="p">(</span><span class="k">new</span><span class="w"> </span><span class="n">BigDecimal</span><span class="p">(</span><span class="s">&quot;0.01&quot;</span><span class="p">)));</span>
<span class="w">        </span><span class="p">}</span>

<span class="w">        </span><span class="nd">@Test</span>
<span class="w">        </span><span class="nd">@DisplayName</span><span class="p">(</span><span class="s">&quot;有形固定資産回転率を正しく計算できる&quot;</span><span class="p">)</span>
<span class="w">        </span><span class="kt">void</span><span class="w"> </span><span class="nf">shouldCalculateTangibleFixedAssetTurnover</span><span class="p">()</span><span class="w"> </span><span class="p">{</span>
<span class="w">            </span><span class="c1">// When</span>
<span class="w">            </span><span class="n">AnalysisResult</span><span class="w"> </span><span class="n">result</span><span class="w"> </span><span class="o">=</span><span class="w"> </span><span class="n">analyzer</span><span class="p">.</span><span class="na">analyze</span><span class="p">(</span><span class="n">testData</span><span class="p">);</span>

<span class="w">            </span><span class="c1">// Then: 5.00回 (1億 / 2000万)</span>
<span class="w">            </span><span class="n">assertThat</span><span class="p">(</span><span class="n">result</span><span class="p">.</span><span class="na">efficiency</span><span class="p">().</span><span class="na">tangibleFixedAssetTurnover</span><span class="p">())</span>
<span class="w">                </span><span class="p">.</span><span class="na">isCloseTo</span><span class="p">(</span><span class="k">new</span><span class="w"> </span><span class="n">BigDecimal</span><span class="p">(</span><span class="s">&quot;5.00&quot;</span><span class="p">),</span><span class="w"> </span><span class="n">within</span><span class="p">(</span><span class="k">new</span><span class="w"> </span><span class="n">BigDecimal</span><span class="p">(</span><span class="s">&quot;0.01&quot;</span><span class="p">)));</span>
<span class="w">        </span><span class="p">}</span>
<span class="w">    </span><span class="p">}</span>

<span class="w">    </span><span class="nd">@Nested</span>
<span class="w">    </span><span class="nd">@DisplayName</span><span class="p">(</span><span class="s">&quot;安全性指標&quot;</span><span class="p">)</span>
<span class="w">    </span><span class="kd">class</span> <span class="nc">Safety</span><span class="w"> </span><span class="p">{</span>

<span class="w">        </span><span class="nd">@Test</span>
<span class="w">        </span><span class="nd">@DisplayName</span><span class="p">(</span><span class="s">&quot;流動比率を正しく計算できる&quot;</span><span class="p">)</span>
<span class="w">        </span><span class="kt">void</span><span class="w"> </span><span class="nf">shouldCalculateCurrentRatio</span><span class="p">()</span><span class="w"> </span><span class="p">{</span>
<span class="w">            </span><span class="c1">// When</span>
<span class="w">            </span><span class="n">AnalysisResult</span><span class="w"> </span><span class="n">result</span><span class="w"> </span><span class="o">=</span><span class="w"> </span><span class="n">analyzer</span><span class="p">.</span><span class="na">analyze</span><span class="p">(</span><span class="n">testData</span><span class="p">);</span>

<span class="w">            </span><span class="c1">// Then: 300% (6000万 / 2000万 * 100)</span>
<span class="w">            </span><span class="n">assertThat</span><span class="p">(</span><span class="n">result</span><span class="p">.</span><span class="na">safety</span><span class="p">().</span><span class="na">currentRatio</span><span class="p">())</span>
<span class="w">                </span><span class="p">.</span><span class="na">isCloseTo</span><span class="p">(</span><span class="k">new</span><span class="w"> </span><span class="n">BigDecimal</span><span class="p">(</span><span class="s">&quot;300.00&quot;</span><span class="p">),</span><span class="w"> </span><span class="n">within</span><span class="p">(</span><span class="k">new</span><span class="w"> </span><span class="n">BigDecimal</span><span class="p">(</span><span class="s">&quot;0.01&quot;</span><span class="p">)));</span>
<span class="w">        </span><span class="p">}</span>

<span class="w">        </span><span class="nd">@Test</span>
<span class="w">        </span><span class="nd">@DisplayName</span><span class="p">(</span><span class="s">&quot;当座比率を正しく計算できる&quot;</span><span class="p">)</span>
<span class="w">        </span><span class="kt">void</span><span class="w"> </span><span class="nf">shouldCalculateQuickRatio</span><span class="p">()</span><span class="w"> </span><span class="p">{</span>
<span class="w">            </span><span class="c1">// When</span>
<span class="w">            </span><span class="n">AnalysisResult</span><span class="w"> </span><span class="n">result</span><span class="w"> </span><span class="o">=</span><span class="w"> </span><span class="n">analyzer</span><span class="p">.</span><span class="na">analyze</span><span class="p">(</span><span class="n">testData</span><span class="p">);</span>

<span class="w">            </span><span class="c1">// Then: 250% (5000万 / 2000万 * 100)</span>
<span class="w">            </span><span class="n">assertThat</span><span class="p">(</span><span class="n">result</span><span class="p">.</span><span class="na">safety</span><span class="p">().</span><span class="na">quickRatio</span><span class="p">())</span>
<span class="w">                </span><span class="p">.</span><span class="na">isCloseTo</span><span class="p">(</span><span class="k">new</span><span class="w"> </span><span class="n">BigDecimal</span><span class="p">(</span><span class="s">&quot;250.00&quot;</span><span class="p">),</span><span class="w"> </span><span class="n">within</span><span class="p">(</span><span class="k">new</span><span class="w"> </span><span class="n">BigDecimal</span><span class="p">(</span><span class="s">&quot;0.01&quot;</span><span class="p">)));</span>
<span class="w">        </span><span class="p">}</span>

<span class="w">        </span><span class="nd">@Test</span>
<span class="w">        </span><span class="nd">@DisplayName</span><span class="p">(</span><span class="s">&quot;自己資本比率を正しく計算できる&quot;</span><span class="p">)</span>
<span class="w">        </span><span class="kt">void</span><span class="w"> </span><span class="nf">shouldCalculateEquityRatio</span><span class="p">()</span><span class="w"> </span><span class="p">{</span>
<span class="w">            </span><span class="c1">// When</span>
<span class="w">            </span><span class="n">AnalysisResult</span><span class="w"> </span><span class="n">result</span><span class="w"> </span><span class="o">=</span><span class="w"> </span><span class="n">analyzer</span><span class="p">.</span><span class="na">analyze</span><span class="p">(</span><span class="n">testData</span><span class="p">);</span>

<span class="w">            </span><span class="c1">// Then: 75% (6000万 / 8000万 * 100)</span>
<span class="w">            </span><span class="n">assertThat</span><span class="p">(</span><span class="n">result</span><span class="p">.</span><span class="na">safety</span><span class="p">().</span><span class="na">equityRatio</span><span class="p">())</span>
<span class="w">                </span><span class="p">.</span><span class="na">isCloseTo</span><span class="p">(</span><span class="k">new</span><span class="w"> </span><span class="n">BigDecimal</span><span class="p">(</span><span class="s">&quot;75.00&quot;</span><span class="p">),</span><span class="w"> </span><span class="n">within</span><span class="p">(</span><span class="k">new</span><span class="w"> </span><span class="n">BigDecimal</span><span class="p">(</span><span class="s">&quot;0.01&quot;</span><span class="p">)));</span>
<span class="w">        </span><span class="p">}</span>
<span class="w">    </span><span class="p">}</span>

<span class="w">    </span><span class="nd">@Nested</span>
<span class="w">    </span><span class="nd">@DisplayName</span><span class="p">(</span><span class="s">&quot;例外処理&quot;</span><span class="p">)</span>
<span class="w">    </span><span class="kd">class</span> <span class="nc">ExceptionHandling</span><span class="w"> </span><span class="p">{</span>

<span class="w">        </span><span class="nd">@Test</span>
<span class="w">        </span><span class="nd">@DisplayName</span><span class="p">(</span><span class="s">&quot;売上高がゼロの場合は例外をスローする&quot;</span><span class="p">)</span>
<span class="w">        </span><span class="kt">void</span><span class="w"> </span><span class="nf">shouldThrowExceptionWhenSalesIsZero</span><span class="p">()</span><span class="w"> </span><span class="p">{</span>
<span class="w">            </span><span class="c1">// Given</span>
<span class="w">            </span><span class="n">FinancialData</span><span class="w"> </span><span class="n">invalidData</span><span class="w"> </span><span class="o">=</span><span class="w"> </span><span class="n">testData</span><span class="p">.</span><span class="na">withSales</span><span class="p">(</span><span class="n">BigDecimal</span><span class="p">.</span><span class="na">ZERO</span><span class="p">);</span>

<span class="w">            </span><span class="c1">// When &amp; Then</span>
<span class="w">            </span><span class="n">assertThatThrownBy</span><span class="p">(()</span><span class="w"> </span><span class="o">-&gt;</span><span class="w"> </span><span class="n">analyzer</span><span class="p">.</span><span class="na">analyze</span><span class="p">(</span><span class="n">invalidData</span><span class="p">))</span>
<span class="w">                </span><span class="p">.</span><span class="na">isInstanceOf</span><span class="p">(</span><span class="n">IllegalArgumentException</span><span class="p">.</span><span class="na">class</span><span class="p">)</span>
<span class="w">                </span><span class="p">.</span><span class="na">hasMessageContaining</span><span class="p">(</span><span class="s">&quot;売上高がゼロ&quot;</span><span class="p">);</span>
<span class="w">        </span><span class="p">}</span>

<span class="w">        </span><span class="nd">@Test</span>
<span class="w">        </span><span class="nd">@DisplayName</span><span class="p">(</span><span class="s">&quot;総資産がゼロの場合は例外をスローする&quot;</span><span class="p">)</span>
<span class="w">        </span><span class="kt">void</span><span class="w"> </span><span class="nf">shouldThrowExceptionWhenTotalAssetsIsZero</span><span class="p">()</span><span class="w"> </span><span class="p">{</span>
<span class="w">            </span><span class="c1">// Given</span>
<span class="w">            </span><span class="n">FinancialData</span><span class="w"> </span><span class="n">invalidData</span><span class="w"> </span><span class="o">=</span><span class="w"> </span><span class="n">testData</span><span class="p">.</span><span class="na">withTotalAssets</span><span class="p">(</span><span class="n">BigDecimal</span><span class="p">.</span><span class="na">ZERO</span><span class="p">);</span>

<span class="w">            </span><span class="c1">// When &amp; Then</span>
<span class="w">            </span><span class="n">assertThatThrownBy</span><span class="p">(()</span><span class="w"> </span><span class="o">-&gt;</span><span class="w"> </span><span class="n">analyzer</span><span class="p">.</span><span class="na">analyze</span><span class="p">(</span><span class="n">invalidData</span><span class="p">))</span>
<span class="w">                </span><span class="p">.</span><span class="na">isInstanceOf</span><span class="p">(</span><span class="n">IllegalArgumentException</span><span class="p">.</span><span class="na">class</span><span class="p">)</span>
<span class="w">                </span><span class="p">.</span><span class="na">hasMessageContaining</span><span class="p">(</span><span class="s">&quot;総資産がゼロ&quot;</span><span class="p">);</span>
<span class="w">        </span><span class="p">}</span>
<span class="w">    </span><span class="p">}</span>
<span class="p">}</span>
</code></pre></div>
<hr />
<h2 id="223-testcontainers">22.3 Testcontainers の活用<a class="headerlink" href="#223-testcontainers" title="Permanent link">&para;</a></h2>
<h3 id="testcontainers">Testcontainers とは<a class="headerlink" href="#testcontainers" title="Permanent link">&para;</a></h3>
<p>Testcontainers は、Docker コンテナを使ってテスト用のデータベースなどを起動するライブラリです。実際の PostgreSQL データベースを使ったテストが可能になり、本番環境に近い条件でテストできます。</p>
<p><img src="data:image/svg+xml;base64,PHN2ZyB4bWxucz0iaHR0cDovL3d3dy53My5vcmcvMjAwMC9zdmciIHhtbG5zOnhsaW5rPSJodHRwOi8vd3d3LnczLm9yZy8xOTk5L3hsaW5rIiBjb250ZW50U3R5bGVUeXBlPSJ0ZXh0L2NzcyIgZGF0YS1kaWFncmFtLXR5cGU9IkRFU0NSSVBUSU9OIiBoZWlnaHQ9IjQyOHB4IiBwcmVzZXJ2ZUFzcGVjdFJhdGlvPSJub25lIiBzdHlsZT0id2lkdGg6NDI5cHg7aGVpZ2h0OjQyOHB4O2JhY2tncm91bmQ6I0ZGRkZGRjsiIHZlcnNpb249IjEuMSIgdmlld0JveD0iMCAwIDQyOSA0MjgiIHdpZHRoPSI0MjlweCIgem9vbUFuZFBhbj0ibWFnbmlmeSI+PHRpdGxlPlRlc3Rjb250YWluZXJzICYjMTIzOTU7JiMxMjQyNDsmIzEyNDI3OyYjMTI0ODY7JiMxMjQ3MzsmIzEyNDg4OyYjMjk4NzI7JiMyMjY1OTs8L3RpdGxlPjxkZWZzLz48Zz48ZyBjbGFzcz0idGl0bGUiIGRhdGEtc291cmNlLWxpbmU9IjEiPjx0ZXh0IGZpbGw9IiMwMDAwMDAiIGZvbnQtZmFtaWx5PSJzYW5zLXNlcmlmIiBmb250LXNpemU9IjE0IiBmb250LXdlaWdodD0iYm9sZCIgbGVuZ3RoQWRqdXN0PSJzcGFjaW5nIiB0ZXh0TGVuZ3RoPSIyMzQuNDY1MyIgeD0iOTAuMjcyNiIgeT0iMjIuOTk1MSI+VGVzdGNvbnRhaW5lcnMgJiMxMjM5NTsmIzEyNDI0OyYjMTI0Mjc7JiMxMjQ4NjsmIzEyNDczOyYjMTI0ODg7JiMyOTg3MjsmIzIyNjU5OzwvdGV4dD48L2c+PCEtLWNsdXN0ZXIgPz8/Pz8/Py0tPjxnIGNsYXNzPSJjbHVzdGVyIiBkYXRhLWVudGl0eT0iLi4uLi4uLiIgZGF0YS1zb3VyY2UtbGluZT0iMyIgZGF0YS11aWQ9ImVudDAwMDIiIGlkPSJjbHVzdGVyXy4uLi4uLi4iPjxyZWN0IGZpbGw9Im5vbmUiIGhlaWdodD0iMjE2Ljg5IiByeD0iMi41IiByeT0iMi41IiBzdHlsZT0ic3Ryb2tlOiMxODE4MTg7c3Ryb2tlLXdpZHRoOjE7IiB3aWR0aD0iMTY0IiB4PSI3IiB5PSI0NC4yOTY5Ii8+PHRleHQgZmlsbD0iIzAwMDAwMCIgZm9udC1mYW1pbHk9InNhbnMtc2VyaWYiIGZvbnQtc2l6ZT0iMTQiIGZvbnQtd2VpZ2h0PSJib2xkIiBsZW5ndGhBZGp1c3Q9InNwYWNpbmciIHRleHRMZW5ndGg9Ijk3Ljk5OTYiIHg9IjQwLjAwMDIiIHk9IjU5LjI5MiI+JiMxMjQ4NjsmIzEyNDczOyYjMTI0ODg7JiMyMzQ1NTsmIzM0ODkyOyYjMjk4NzI7JiMyMjY1OTs8L3RleHQ+PC9nPjwhLS1jbHVzdGVyIERvY2tlciA/Pz8/LS0+PGcgY2xhc3M9ImNsdXN0ZXIiIGRhdGEtZW50aXR5PSJEb2NrZXIgLi4uLiIgZGF0YS1zb3VyY2UtbGluZT0iOCIgZGF0YS11aWQ9ImVudDAwMDUiIGlkPSJjbHVzdGVyX0RvY2tlciAuLi4uIj48cmVjdCBmaWxsPSJub25lIiBoZWlnaHQ9IjExMi41OSIgcng9IjIuNSIgcnk9IjIuNSIgc3R5bGU9InN0cm9rZTojMTgxODE4O3N0cm9rZS13aWR0aDoxOyIgd2lkdGg9IjEzMiIgeD0iMjMiIHk9IjMxMC4xODY5Ii8+PHRleHQgZmlsbD0iIzAwMDAwMCIgZm9udC1mYW1pbHk9InNhbnMtc2VyaWYiIGZvbnQtc2l6ZT0iMTQiIGZvbnQtd2VpZ2h0PSJib2xkIiBsZW5ndGhBZGp1c3Q9InNwYWNpbmciIHRleHRMZW5ndGg9IjExNi4xMjE4IiB4PSIzMC45MzkxIiB5PSIzMjUuMTgyIj5Eb2NrZXIgJiMxMjQ2NzsmIzEyNTMxOyYjMTI0ODY7JiMxMjQ5MDs8L3RleHQ+PC9nPjwhLS1lbnRpdHkgdGVzdC0tPjxnIGNsYXNzPSJlbnRpdHkiIGRhdGEtZW50aXR5PSJ0ZXN0IiBkYXRhLXNvdXJjZS1saW5lPSI0IiBkYXRhLXVpZD0iZW50MDAwMyIgaWQ9ImVudGl0eV90ZXN0Ij48cmVjdCBmaWxsPSIjRjFGMUYxIiBoZWlnaHQ9IjM2LjI5NjkiIHJ4PSIyLjUiIHJ5PSIyLjUiIHN0eWxlPSJzdHJva2U6IzE4MTgxODtzdHJva2Utd2lkdGg6MC41OyIgd2lkdGg9Ijk5LjA3NzkiIHg9IjM4LjQ2IiB5PSI3OS4yOTY5Ii8+PHRleHQgZmlsbD0iIzAwMDAwMCIgZm9udC1mYW1pbHk9InNhbnMtc2VyaWYiIGZvbnQtc2l6ZT0iMTQiIGxlbmd0aEFkanVzdD0ic3BhY2luZyIgdGV4dExlbmd0aD0iNzkuMDc3OSIgeD0iNDguNDYiIHk9IjEwMi4yOTIiPkpVbml0ICYjMTI0ODY7JiMxMjQ3MzsmIzEyNDg4OzwvdGV4dD48L2c+PCEtLWVudGl0eSBhcHAtLT48ZyBjbGFzcz0iZW50aXR5IiBkYXRhLWVudGl0eT0iYXBwIiBkYXRhLXNvdXJjZS1saW5lPSI1IiBkYXRhLXVpZD0iZW50MDAwNCIgaWQ9ImVudGl0eV9hcHAiPjxyZWN0IGZpbGw9IiNGMUYxRjEiIGhlaWdodD0iNTIuNTkzOCIgcng9IjIuNSIgcnk9IjIuNSIgc3R5bGU9InN0cm9rZTojMTgxODE4O3N0cm9rZS13aWR0aDowLjU7IiB3aWR0aD0iMTMxLjk5OTUiIHg9IjIzIiB5PSIxOTIuNTg2OSIvPjx0ZXh0IGZpbGw9IiMwMDAwMDAiIGZvbnQtZmFtaWx5PSJzYW5zLXNlcmlmIiBmb250LXNpemU9IjE0IiBsZW5ndGhBZGp1c3Q9InNwYWNpbmciIHRleHRMZW5ndGg9IjgxLjg1MzUiIHg9IjMzIiB5PSIyMTUuNTgyIj5TcHJpbmcgQm9vdDwvdGV4dD48dGV4dCBmaWxsPSIjMDAwMDAwIiBmb250LWZhbWlseT0ic2Fucy1zZXJpZiIgZm9udC1zaXplPSIxNCIgbGVuZ3RoQWRqdXN0PSJzcGFjaW5nIiB0ZXh0TGVuZ3RoPSIxMTEuOTk5NSIgeD0iMzMiIHk9IjIzMS44Nzg5Ij4mIzEyNDUwOyYjMTI1MDM7JiMxMjUyMjsmIzEyNDY1OyYjMTI1NDA7JiMxMjQ3MTsmIzEyNTE5OyYjMTI1MzE7PC90ZXh0PjwvZz48IS0tZW50aXR5IHBvc3RncmVzLS0+PGcgY2xhc3M9ImVudGl0eSIgZGF0YS1lbnRpdHk9InBvc3RncmVzIiBkYXRhLXNvdXJjZS1saW5lPSI5IiBkYXRhLXVpZD0iZW50MDAwNiIgaWQ9ImVudGl0eV9wb3N0Z3JlcyI+PHBhdGggZD0iTTM4LjYyLDM1NS4xODY5IEMzOC42MiwzNDUuMTg2OSA4OC45OTY1LDM0NS4xODY5IDg4Ljk5NjUsMzQ1LjE4NjkgQzg4Ljk5NjUsMzQ1LjE4NjkgMTM5LjM3MjksMzQ1LjE4NjkgMTM5LjM3MjksMzU1LjE4NjkgTDEzOS4zNzI5LDM5Ni43ODA2IEMxMzkuMzcyOSw0MDYuNzgwNiA4OC45OTY1LDQwNi43ODA2IDg4Ljk5NjUsNDA2Ljc4MDYgQzg4Ljk5NjUsNDA2Ljc4MDYgMzguNjIsNDA2Ljc4MDYgMzguNjIsMzk2Ljc4MDYgTDM4LjYyLDM1NS4xODY5IiBmaWxsPSIjRjFGMUYxIiBzdHlsZT0ic3Ryb2tlOiMxODE4MTg7c3Ryb2tlLXdpZHRoOjAuNTsiLz48cGF0aCBkPSJNMzguNjIsMzU1LjE4NjkgQzM4LjYyLDM2NS4xODY5IDg4Ljk5NjUsMzY1LjE4NjkgODguOTk2NSwzNjUuMTg2OSBDODguOTk2NSwzNjUuMTg2OSAxMzkuMzcyOSwzNjUuMTg2OSAxMzkuMzcyOSwzNTUuMTg2OSIgZmlsbD0ibm9uZSIgc3R5bGU9InN0cm9rZTojMTgxODE4O3N0cm9rZS13aWR0aDowLjU7Ii8+PHRleHQgZmlsbD0iIzAwMDAwMCIgZm9udC1mYW1pbHk9InNhbnMtc2VyaWYiIGZvbnQtc2l6ZT0iMTQiIGxlbmd0aEFkanVzdD0ic3BhY2luZyIgdGV4dExlbmd0aD0iODAuNzUyOSIgeD0iNDguNjIiIHk9IjM4Mi4xODIiPlBvc3RncmVTUUw8L3RleHQ+PHRleHQgZmlsbD0iIzAwMDAwMCIgZm9udC1mYW1pbHk9InNhbnMtc2VyaWYiIGZvbnQtc2l6ZT0iMTQiIGxlbmd0aEFkanVzdD0ic3BhY2luZyIgdGV4dExlbmd0aD0iNTUuOTk5OCIgeD0iNDguNjIiIHk9IjM5OC40Nzg5Ij4mIzEyNDY3OyYjMTI1MzE7JiMxMjQ4NjsmIzEyNDkwOzwvdGV4dD48L2c+PGcgY2xhc3M9ImVudGl0eSIgZGF0YS1lbnRpdHk9IkdNTjkiIGRhdGEtc291cmNlLWxpbmU9IjE2IiBkYXRhLXVpZD0iZW50MDAxMCIgaWQ9ImVudGl0eV9HTU45Ij48cGF0aCBkPSJNMTczLjk4LDM0MC43MTY5IEwxNzMuOTgsMzcxLjk3NjkgTDEzOS42MiwzNzUuOTc2OSBMMTczLjk4LDM3OS45NzY5IEwxNzMuOTgsNDExLjI0ODEgQTAsMCAwIDAgMCAxNzMuOTgsNDExLjI0ODEgTDQyMi4wMTA1LDQxMS4yNDgxIEEwLDAgMCAwIDAgNDIyLjAxMDUsNDExLjI0ODEgTDQyMi4wMTA1LDM1MC43MTY5IEw0MTIuMDEwNSwzNDAuNzE2OSBMMTczLjk4LDM0MC43MTY5IEEwLDAgMCAwIDAgMTczLjk4LDM0MC43MTY5IiBmaWxsPSIjRkVGRkREIiBzdHlsZT0ic3Ryb2tlOiMxODE4MTg7c3Ryb2tlLXdpZHRoOjAuNTsiLz48cGF0aCBkPSJNNDEyLjAxMDUsMzQwLjcxNjkgTDQxMi4wMTA1LDM1MC43MTY5IEw0MjIuMDEwNSwzNTAuNzE2OSBMNDEyLjAxMDUsMzQwLjcxNjkiIGZpbGw9IiNGRUZGREQiIHN0eWxlPSJzdHJva2U6IzE4MTgxODtzdHJva2Utd2lkdGg6MC41OyIvPjx0ZXh0IGZpbGw9IiMwMDAwMDAiIGZvbnQtZmFtaWx5PSJzYW5zLXNlcmlmIiBmb250LXNpemU9IjEzIiBsZW5ndGhBZGp1c3Q9InNwYWNpbmciIHRleHRMZW5ndGg9IjE1MS44MjM0IiB4PSIxNzkuOTgiIHk9IjM1Ny43ODM4Ij4tICYjMTI0ODY7JiMxMjQ3MzsmIzEyNDg4OyYjMzgyODM7JiMyMjk4NzsmIzI2MTc4OyYjMTIzOTU7JiMzMzI1ODsmIzIxMjA1OyYjMzYyMTU7JiMyMTIwNTs8L3RleHQ+PHRleHQgZmlsbD0iIzAwMDAwMCIgZm9udC1mYW1pbHk9InNhbnMtc2VyaWYiIGZvbnQtc2l6ZT0iMTMiIGxlbmd0aEFkanVzdD0ic3BhY2luZyIgdGV4dExlbmd0aD0iMTUxLjgyMzQiIHg9IjE3OS45OCIgeT0iMzcyLjkxNjYiPi0gJiMxMjQ4NjsmIzEyNDczOyYjMTI0ODg7JiMzMjA2NjsmIzIwMTAyOyYjMjYxNzg7JiMxMjM5NTsmIzMzMjU4OyYjMjEyMDU7JiMyMDU3MjsmIzI3NDkwOzwvdGV4dD48dGV4dCBmaWxsPSIjMDAwMDAwIiBmb250LWZhbWlseT0ic2Fucy1zZXJpZiIgZm9udC1zaXplPSIxMyIgbGVuZ3RoQWRqdXN0PSJzcGFjaW5nIiB0ZXh0TGVuZ3RoPSIxNzcuODIzNCIgeD0iMTc5Ljk4IiB5PSIzODguMDQ5NCI+LSAmIzI3NTk4OyYjMjIyMzg7JiMxMjQ2MzsmIzEyNTIyOyYjMTI1NDA7JiMxMjUzMTsmIzEyMzk0OyYjMjkzNjY7JiMyNDkwNzsmIzEyMzkxOyYjMTI0ODY7JiMxMjQ3MzsmIzEyNDg4OzwvdGV4dD48dGV4dCBmaWxsPSIjMDAwMDAwIiBmb250LWZhbWlseT0ic2Fucy1zZXJpZiIgZm9udC1zaXplPSIxMyIgbGVuZ3RoQWRqdXN0PSJzcGFjaW5nIiB0ZXh0TGVuZ3RoPSIyMjcuMDMwNSIgeD0iMTc5Ljk4IiB5PSI0MDMuMTgyMiI+LSBGbHl3YXkgJiMxMjM5NTsmIzEyNDI0OyYjMTI0Mjc7JiMxMjUxMDsmIzEyNDUyOyYjMTI0NjQ7JiMxMjUyNDsmIzEyNTQwOyYjMTI0NzE7JiMxMjUxOTsmIzEyNTMxOyYjMzY5Njk7JiMyOTk5Mjs8L3RleHQ+PC9nPjwhLS1saW5rIHRlc3QgdG8gYXBwLS0+PGcgY2xhc3M9ImxpbmsiIGRhdGEtZW50aXR5LTE9InRlc3QiIGRhdGEtZW50aXR5LTI9ImFwcCIgZGF0YS1zb3VyY2UtbGluZT0iMTIiIGRhdGEtdWlkPSJsbms3IiBpZD0ibGlua190ZXN0X2FwcCI+PHBhdGggZD0iTTg4LjE1LDExNi4wNjY5IEM4OC4zMiwxMzYuMTg2OSA4OC41Mzc4LDE2My4yNjcxIDg4LjczNzgsMTg2LjIzNzEiIGZpbGw9Im5vbmUiIGlkPSJ0ZXN0LXRvLWFwcCIgc3R5bGU9InN0cm9rZTojMTgxODE4O3N0cm9rZS13aWR0aDoxOyIvPjxwb2x5Z29uIGZpbGw9IiMxODE4MTgiIHBvaW50cz0iODguNzksMTkyLjIzNjksOTIuNzExNSwxODMuMjAyNCw4OC43NDY1LDE4Ny4yMzcxLDg0LjcxMTgsMTgzLjI3Miw4OC43OSwxOTIuMjM2OSIgc3R5bGU9InN0cm9rZTojMTgxODE4O3N0cm9rZS13aWR0aDoxOyIvPjx0ZXh0IGZpbGw9IiMwMDAwMDAiIGZvbnQtZmFtaWx5PSJzYW5zLXNlcmlmIiBmb250LXNpemU9IjEzIiBsZW5ndGhBZGp1c3Q9InNwYWNpbmciIHRleHRMZW5ndGg9IjY1LjAwMDEiIHg9Ijg5LjUzIiB5PSIxNTguNjUzOCI+JiMxMjQ4NjsmIzEyNDczOyYjMTI0ODg7JiMyMzQ1NTsmIzM0ODkyOzwvdGV4dD48L2c+PCEtLWxpbmsgYXBwIHRvIHBvc3RncmVzLS0+PGcgY2xhc3M9ImxpbmsiIGRhdGEtZW50aXR5LTE9ImFwcCIgZGF0YS1lbnRpdHktMj0icG9zdGdyZXMiIGRhdGEtc291cmNlLWxpbmU9IjEzIiBkYXRhLXVpZD0ibG5rOCIgaWQ9ImxpbmtfYXBwX3Bvc3RncmVzIj48cGF0aCBkPSJNODksMjQ1LjQ5NjkgQzg5LDI3Mi43NjY5IDg5LDMwOS45MDY5IDg5LDMzOC44MDY5IiBmaWxsPSJub25lIiBpZD0iYXBwLXRvLXBvc3RncmVzIiBzdHlsZT0ic3Ryb2tlOiMxODE4MTg7c3Ryb2tlLXdpZHRoOjE7Ii8+PHBvbHlnb24gZmlsbD0iIzE4MTgxOCIgcG9pbnRzPSI4OSwzNDQuODA2OSw5MywzMzUuODA2OSw4OSwzMzkuODA2OSw4NSwzMzUuODA2OSw4OSwzNDQuODA2OSIgc3R5bGU9InN0cm9rZTojMTgxODE4O3N0cm9rZS13aWR0aDoxOyIvPjx0ZXh0IGZpbGw9IiMwMDAwMDAiIGZvbnQtZmFtaWx5PSJzYW5zLXNlcmlmIiBmb250LXNpemU9IjEzIiBsZW5ndGhBZGp1c3Q9InNwYWNpbmciIHRleHRMZW5ndGg9IjYxLjk3MjIiIHg9IjkwIiB5PSIyOTAuMjUzOCI+SkRCQyAmIzI1NTA5OyYjMzIxNTQ7PC90ZXh0PjwvZz48IS0tU1JDPVtOUDdESmk5MDU4TnRWT2VSemhvMDJuVDhOMTBONmRKZFBlSW5EZjlmcXF2WVk3N0hjT1k0NlhSNmRfV0paS0hKbkh5bTE4WjZqeGNzWFJUbUhZOUtEeEVPLXZycHB2cFg1Z3pHTUFLVUJ6Y0M0dWpIcm1GcWRyM0tLR0dlUW9aVUtUUUplc3hLYWVSWHFYOGRwNUlJcDdHTWxUd0NSV3lkSDBQc3FxblhaTGFTZmNHNlkwVFN4S2VwSFNVcmMwYXZzLVJoMzRLQnZIZEFEZWV0Yjl5ZVhZWDNiQnFWOU40U08tekZYaG5Uc2dPa2VFV2ZIZy1IM1BzV0ozWlA4OXUyYmNzRmNvdWpoWW5meHBJYl85cDlxREVjRVhMYWlfRHcyU3AxbHlTUC1iUEZWb0tBQVVIcDJuMHR4dkYxWE00bWNyRG1CTkVCV3hxdkN5eEVaQ1FkR0hHNnlSYkd2T3VFc2I1bUNrZUZyUGJjYWh4dS1nWWJjU1lfWWJ6UVllYXhwVVpvNmFMN1R3RUFLR19uc3FiWjRFeTd3OFRKMXFLa0xnZXhmOWgtR29NeEd6NTUtUG9rVEVtXzlpU0YxY0xicUVjXzBHMDBdLS0+PC9nPjwvc3ZnPg==" class="uml" alt="uml diagram" title="" /></p>
<h3 id="_7">統合テスト用アノテーション<a class="headerlink" href="#_7" title="Permanent link">&para;</a></h3>
<div class="highlight"><pre><span></span><code><span class="kn">package</span><span class="w"> </span><span class="nn">com.example.accounting</span><span class="p">;</span>

<span class="kn">import</span><span class="w"> </span><span class="nn">org.springframework.boot.test.context.SpringBootTest</span><span class="p">;</span>
<span class="kn">import</span><span class="w"> </span><span class="nn">org.springframework.test.context.ActiveProfiles</span><span class="p">;</span>

<span class="kn">import</span><span class="w"> </span><span class="nn">java.lang.annotation.ElementType</span><span class="p">;</span>
<span class="kn">import</span><span class="w"> </span><span class="nn">java.lang.annotation.Retention</span><span class="p">;</span>
<span class="kn">import</span><span class="w"> </span><span class="nn">java.lang.annotation.RetentionPolicy</span><span class="p">;</span>
<span class="kn">import</span><span class="w"> </span><span class="nn">java.lang.annotation.Target</span><span class="p">;</span>

<span class="cm">/**</span>
<span class="cm"> * 統合テスト用アノテーション</span>
<span class="cm"> */</span>
<span class="nd">@Target</span><span class="p">(</span><span class="n">ElementType</span><span class="p">.</span><span class="na">TYPE</span><span class="p">)</span>
<span class="nd">@Retention</span><span class="p">(</span><span class="n">RetentionPolicy</span><span class="p">.</span><span class="na">RUNTIME</span><span class="p">)</span>
<span class="nd">@SpringBootTest</span>
<span class="nd">@ActiveProfiles</span><span class="p">(</span><span class="s">&quot;test&quot;</span><span class="p">)</span>
<span class="kd">public</span><span class="w"> </span><span class="nd">@interface</span><span class="w"> </span><span class="n">IntegrationTest</span><span class="w"> </span><span class="p">{</span>
<span class="p">}</span>
</code></pre></div>
<h3 id="_8">リポジトリテストの実装<a class="headerlink" href="#_8" title="Permanent link">&para;</a></h3>
<div class="highlight"><pre><span></span><code><span class="kn">package</span><span class="w"> </span><span class="nn">com.example.accounting.infrastructure.persistence.repository</span><span class="p">;</span>

<span class="kn">import</span><span class="w"> </span><span class="nn">com.example.accounting.application.port.out.JournalRepository</span><span class="p">;</span>
<span class="kn">import</span><span class="w"> </span><span class="nn">com.example.accounting.domain.model.journal.*</span><span class="p">;</span>
<span class="kn">import</span><span class="w"> </span><span class="nn">org.junit.jupiter.api.*</span><span class="p">;</span>
<span class="kn">import</span><span class="w"> </span><span class="nn">org.springframework.beans.factory.annotation.Autowired</span><span class="p">;</span>
<span class="kn">import</span><span class="w"> </span><span class="nn">org.springframework.boot.test.context.SpringBootTest</span><span class="p">;</span>
<span class="kn">import</span><span class="w"> </span><span class="nn">org.springframework.test.context.DynamicPropertyRegistry</span><span class="p">;</span>
<span class="kn">import</span><span class="w"> </span><span class="nn">org.springframework.test.context.DynamicPropertySource</span><span class="p">;</span>
<span class="kn">import</span><span class="w"> </span><span class="nn">org.testcontainers.containers.PostgreSQLContainer</span><span class="p">;</span>
<span class="kn">import</span><span class="w"> </span><span class="nn">org.testcontainers.junit.jupiter.Container</span><span class="p">;</span>
<span class="kn">import</span><span class="w"> </span><span class="nn">org.testcontainers.junit.jupiter.Testcontainers</span><span class="p">;</span>

<span class="kn">import</span><span class="w"> </span><span class="nn">java.math.BigDecimal</span><span class="p">;</span>
<span class="kn">import</span><span class="w"> </span><span class="nn">java.time.LocalDate</span><span class="p">;</span>
<span class="kn">import</span><span class="w"> </span><span class="nn">java.util.List</span><span class="p">;</span>

<span class="kn">import static</span><span class="w"> </span><span class="nn">org.assertj.core.api.Assertions.*</span><span class="p">;</span>

<span class="nd">@SpringBootTest</span>
<span class="nd">@Testcontainers</span>
<span class="nd">@TestMethodOrder</span><span class="p">(</span><span class="n">MethodOrderer</span><span class="p">.</span><span class="na">OrderAnnotation</span><span class="p">.</span><span class="na">class</span><span class="p">)</span>
<span class="nd">@DisplayName</span><span class="p">(</span><span class="s">&quot;仕訳リポジトリテスト&quot;</span><span class="p">)</span>
<span class="kd">class</span> <span class="nc">JournalRepositoryImplTest</span><span class="w"> </span><span class="p">{</span>

<span class="w">    </span><span class="nd">@Container</span>
<span class="w">    </span><span class="kd">static</span><span class="w"> </span><span class="n">PostgreSQLContainer</span><span class="o">&lt;?&gt;</span><span class="w"> </span><span class="n">postgres</span><span class="w"> </span><span class="o">=</span>
<span class="w">        </span><span class="k">new</span><span class="w"> </span><span class="n">PostgreSQLContainer</span><span class="o">&lt;&gt;</span><span class="p">(</span><span class="s">&quot;postgres:16-alpine&quot;</span><span class="p">)</span>
<span class="w">            </span><span class="p">.</span><span class="na">withDatabaseName</span><span class="p">(</span><span class="s">&quot;testdb&quot;</span><span class="p">)</span>
<span class="w">            </span><span class="p">.</span><span class="na">withUsername</span><span class="p">(</span><span class="s">&quot;testuser&quot;</span><span class="p">)</span>
<span class="w">            </span><span class="p">.</span><span class="na">withPassword</span><span class="p">(</span><span class="s">&quot;testpass&quot;</span><span class="p">);</span>

<span class="w">    </span><span class="nd">@DynamicPropertySource</span>
<span class="w">    </span><span class="kd">static</span><span class="w"> </span><span class="kt">void</span><span class="w"> </span><span class="nf">configureProperties</span><span class="p">(</span><span class="n">DynamicPropertyRegistry</span><span class="w"> </span><span class="n">registry</span><span class="p">)</span><span class="w"> </span><span class="p">{</span>
<span class="w">        </span><span class="n">registry</span><span class="p">.</span><span class="na">add</span><span class="p">(</span><span class="s">&quot;spring.datasource.url&quot;</span><span class="p">,</span><span class="w"> </span><span class="n">postgres</span><span class="p">::</span><span class="n">getJdbcUrl</span><span class="p">);</span>
<span class="w">        </span><span class="n">registry</span><span class="p">.</span><span class="na">add</span><span class="p">(</span><span class="s">&quot;spring.datasource.username&quot;</span><span class="p">,</span><span class="w"> </span><span class="n">postgres</span><span class="p">::</span><span class="n">getUsername</span><span class="p">);</span>
<span class="w">        </span><span class="n">registry</span><span class="p">.</span><span class="na">add</span><span class="p">(</span><span class="s">&quot;spring.datasource.password&quot;</span><span class="p">,</span><span class="w"> </span><span class="n">postgres</span><span class="p">::</span><span class="n">getPassword</span><span class="p">);</span>
<span class="w">        </span><span class="n">registry</span><span class="p">.</span><span class="na">add</span><span class="p">(</span><span class="s">&quot;spring.flyway.enabled&quot;</span><span class="p">,</span><span class="w"> </span><span class="p">()</span><span class="w"> </span><span class="o">-&gt;</span><span class="w"> </span><span class="s">&quot;true&quot;</span><span class="p">);</span>
<span class="w">    </span><span class="p">}</span>

<span class="w">    </span><span class="nd">@Autowired</span>
<span class="w">    </span><span class="kd">private</span><span class="w"> </span><span class="n">JournalRepository</span><span class="w"> </span><span class="n">journalRepository</span><span class="p">;</span>

<span class="w">    </span><span class="nd">@Test</span>
<span class="w">    </span><span class="nd">@Order</span><span class="p">(</span><span class="mi">1</span><span class="p">)</span>
<span class="w">    </span><span class="nd">@DisplayName</span><span class="p">(</span><span class="s">&quot;仕訳を保存できる&quot;</span><span class="p">)</span>
<span class="w">    </span><span class="kt">void</span><span class="w"> </span><span class="nf">shouldSaveJournalEntry</span><span class="p">()</span><span class="w"> </span><span class="p">{</span>
<span class="w">        </span><span class="c1">// Given</span>
<span class="w">        </span><span class="n">JournalEntry</span><span class="w"> </span><span class="n">entry</span><span class="w"> </span><span class="o">=</span><span class="w"> </span><span class="n">createTestJournalEntry</span><span class="p">(</span><span class="s">&quot;JE00000001&quot;</span><span class="p">);</span>

<span class="w">        </span><span class="c1">// When</span>
<span class="w">        </span><span class="n">JournalEntry</span><span class="w"> </span><span class="n">saved</span><span class="w"> </span><span class="o">=</span><span class="w"> </span><span class="n">journalRepository</span><span class="p">.</span><span class="na">save</span><span class="p">(</span><span class="n">entry</span><span class="p">);</span>

<span class="w">        </span><span class="c1">// Then</span>
<span class="w">        </span><span class="n">assertThat</span><span class="p">(</span><span class="n">saved</span><span class="p">.</span><span class="na">getJournalId</span><span class="p">()).</span><span class="na">isNotNull</span><span class="p">();</span>
<span class="w">        </span><span class="n">assertThat</span><span class="p">(</span><span class="n">saved</span><span class="p">.</span><span class="na">getJournalNumber</span><span class="p">()).</span><span class="na">isEqualTo</span><span class="p">(</span><span class="s">&quot;JE00000001&quot;</span><span class="p">);</span>
<span class="w">    </span><span class="p">}</span>

<span class="w">    </span><span class="nd">@Test</span>
<span class="w">    </span><span class="nd">@Order</span><span class="p">(</span><span class="mi">2</span><span class="p">)</span>
<span class="w">    </span><span class="nd">@DisplayName</span><span class="p">(</span><span class="s">&quot;仕訳番号で検索できる&quot;</span><span class="p">)</span>
<span class="w">    </span><span class="kt">void</span><span class="w"> </span><span class="nf">shouldFindByJournalNumber</span><span class="p">()</span><span class="w"> </span><span class="p">{</span>
<span class="w">        </span><span class="c1">// When</span>
<span class="w">        </span><span class="kd">var</span><span class="w"> </span><span class="n">found</span><span class="w"> </span><span class="o">=</span><span class="w"> </span><span class="n">journalRepository</span><span class="p">.</span><span class="na">findByJournalNumber</span><span class="p">(</span><span class="s">&quot;JE00000001&quot;</span><span class="p">);</span>

<span class="w">        </span><span class="c1">// Then</span>
<span class="w">        </span><span class="n">assertThat</span><span class="p">(</span><span class="n">found</span><span class="p">).</span><span class="na">isPresent</span><span class="p">();</span>
<span class="w">        </span><span class="n">assertThat</span><span class="p">(</span><span class="n">found</span><span class="p">.</span><span class="na">get</span><span class="p">().</span><span class="na">getJournalNumber</span><span class="p">()).</span><span class="na">isEqualTo</span><span class="p">(</span><span class="s">&quot;JE00000001&quot;</span><span class="p">);</span>
<span class="w">    </span><span class="p">}</span>

<span class="w">    </span><span class="nd">@Test</span>
<span class="w">    </span><span class="nd">@Order</span><span class="p">(</span><span class="mi">3</span><span class="p">)</span>
<span class="w">    </span><span class="nd">@DisplayName</span><span class="p">(</span><span class="s">&quot;仕訳一覧を取得できる&quot;</span><span class="p">)</span>
<span class="w">    </span><span class="kt">void</span><span class="w"> </span><span class="nf">shouldFindAllJournalEntries</span><span class="p">()</span><span class="w"> </span><span class="p">{</span>
<span class="w">        </span><span class="c1">// Given</span>
<span class="w">        </span><span class="n">journalRepository</span><span class="p">.</span><span class="na">save</span><span class="p">(</span><span class="n">createTestJournalEntry</span><span class="p">(</span><span class="s">&quot;JE00000002&quot;</span><span class="p">));</span>
<span class="w">        </span><span class="n">journalRepository</span><span class="p">.</span><span class="na">save</span><span class="p">(</span><span class="n">createTestJournalEntry</span><span class="p">(</span><span class="s">&quot;JE00000003&quot;</span><span class="p">));</span>

<span class="w">        </span><span class="c1">// When</span>
<span class="w">        </span><span class="n">List</span><span class="o">&lt;</span><span class="n">JournalEntry</span><span class="o">&gt;</span><span class="w"> </span><span class="n">entries</span><span class="w"> </span><span class="o">=</span><span class="w"> </span><span class="n">journalRepository</span><span class="p">.</span><span class="na">findAll</span><span class="p">();</span>

<span class="w">        </span><span class="c1">// Then</span>
<span class="w">        </span><span class="n">assertThat</span><span class="p">(</span><span class="n">entries</span><span class="p">).</span><span class="na">hasSizeGreaterThanOrEqualTo</span><span class="p">(</span><span class="mi">3</span><span class="p">);</span>
<span class="w">    </span><span class="p">}</span>

<span class="w">    </span><span class="nd">@Test</span>
<span class="w">    </span><span class="nd">@Order</span><span class="p">(</span><span class="mi">4</span><span class="p">)</span>
<span class="w">    </span><span class="nd">@DisplayName</span><span class="p">(</span><span class="s">&quot;期間で仕訳を検索できる&quot;</span><span class="p">)</span>
<span class="w">    </span><span class="kt">void</span><span class="w"> </span><span class="nf">shouldFindByDateRange</span><span class="p">()</span><span class="w"> </span><span class="p">{</span>
<span class="w">        </span><span class="c1">// Given</span>
<span class="w">        </span><span class="n">LocalDate</span><span class="w"> </span><span class="n">startDate</span><span class="w"> </span><span class="o">=</span><span class="w"> </span><span class="n">LocalDate</span><span class="p">.</span><span class="na">of</span><span class="p">(</span><span class="mi">2024</span><span class="p">,</span><span class="w"> </span><span class="mi">4</span><span class="p">,</span><span class="w"> </span><span class="mi">1</span><span class="p">);</span>
<span class="w">        </span><span class="n">LocalDate</span><span class="w"> </span><span class="n">endDate</span><span class="w"> </span><span class="o">=</span><span class="w"> </span><span class="n">LocalDate</span><span class="p">.</span><span class="na">of</span><span class="p">(</span><span class="mi">2024</span><span class="p">,</span><span class="w"> </span><span class="mi">4</span><span class="p">,</span><span class="w"> </span><span class="mi">30</span><span class="p">);</span>

<span class="w">        </span><span class="c1">// When</span>
<span class="w">        </span><span class="n">List</span><span class="o">&lt;</span><span class="n">JournalEntry</span><span class="o">&gt;</span><span class="w"> </span><span class="n">entries</span><span class="w"> </span><span class="o">=</span><span class="w"> </span><span class="n">journalRepository</span>
<span class="w">            </span><span class="p">.</span><span class="na">findByDateRange</span><span class="p">(</span><span class="n">startDate</span><span class="p">,</span><span class="w"> </span><span class="n">endDate</span><span class="p">);</span>

<span class="w">        </span><span class="c1">// Then</span>
<span class="w">        </span><span class="n">assertThat</span><span class="p">(</span><span class="n">entries</span><span class="p">).</span><span class="na">allMatch</span><span class="p">(</span><span class="n">e</span><span class="w"> </span><span class="o">-&gt;</span>
<span class="w">            </span><span class="o">!</span><span class="n">e</span><span class="p">.</span><span class="na">getJournalDate</span><span class="p">().</span><span class="na">isBefore</span><span class="p">(</span><span class="n">startDate</span><span class="p">)</span><span class="w"> </span><span class="o">&amp;&amp;</span>
<span class="w">            </span><span class="o">!</span><span class="n">e</span><span class="p">.</span><span class="na">getJournalDate</span><span class="p">().</span><span class="na">isAfter</span><span class="p">(</span><span class="n">endDate</span><span class="p">)</span>
<span class="w">        </span><span class="p">);</span>
<span class="w">    </span><span class="p">}</span>

<span class="w">    </span><span class="nd">@Test</span>
<span class="w">    </span><span class="nd">@Order</span><span class="p">(</span><span class="mi">5</span><span class="p">)</span>
<span class="w">    </span><span class="nd">@DisplayName</span><span class="p">(</span><span class="s">&quot;勘定科目コードで仕訳を検索できる&quot;</span><span class="p">)</span>
<span class="w">    </span><span class="kt">void</span><span class="w"> </span><span class="nf">shouldFindByAccountCode</span><span class="p">()</span><span class="w"> </span><span class="p">{</span>
<span class="w">        </span><span class="c1">// When</span>
<span class="w">        </span><span class="n">List</span><span class="o">&lt;</span><span class="n">JournalEntry</span><span class="o">&gt;</span><span class="w"> </span><span class="n">entries</span><span class="w"> </span><span class="o">=</span><span class="w"> </span><span class="n">journalRepository</span><span class="p">.</span><span class="na">findByAccountCode</span><span class="p">(</span><span class="s">&quot;1101&quot;</span><span class="p">);</span>

<span class="w">        </span><span class="c1">// Then</span>
<span class="w">        </span><span class="n">assertThat</span><span class="p">(</span><span class="n">entries</span><span class="p">).</span><span class="na">allMatch</span><span class="p">(</span><span class="n">e</span><span class="w"> </span><span class="o">-&gt;</span>
<span class="w">            </span><span class="n">e</span><span class="p">.</span><span class="na">getLines</span><span class="p">().</span><span class="na">stream</span><span class="p">()</span>
<span class="w">                </span><span class="p">.</span><span class="na">anyMatch</span><span class="p">(</span><span class="n">line</span><span class="w"> </span><span class="o">-&gt;</span><span class="w"> </span><span class="s">&quot;1101&quot;</span><span class="p">.</span><span class="na">equals</span><span class="p">(</span><span class="n">line</span><span class="p">.</span><span class="na">getAccountCode</span><span class="p">()))</span>
<span class="w">        </span><span class="p">);</span>
<span class="w">    </span><span class="p">}</span>

<span class="w">    </span><span class="nd">@Test</span>
<span class="w">    </span><span class="nd">@Order</span><span class="p">(</span><span class="mi">6</span><span class="p">)</span>
<span class="w">    </span><span class="nd">@DisplayName</span><span class="p">(</span><span class="s">&quot;仕訳ステータスで検索できる&quot;</span><span class="p">)</span>
<span class="w">    </span><span class="kt">void</span><span class="w"> </span><span class="nf">shouldFindByStatus</span><span class="p">()</span><span class="w"> </span><span class="p">{</span>
<span class="w">        </span><span class="c1">// When</span>
<span class="w">        </span><span class="n">List</span><span class="o">&lt;</span><span class="n">JournalEntry</span><span class="o">&gt;</span><span class="w"> </span><span class="n">entries</span><span class="w"> </span><span class="o">=</span><span class="w"> </span><span class="n">journalRepository</span>
<span class="w">            </span><span class="p">.</span><span class="na">findByStatus</span><span class="p">(</span><span class="n">JournalStatus</span><span class="p">.</span><span class="na">DRAFT</span><span class="p">);</span>

<span class="w">        </span><span class="c1">// Then</span>
<span class="w">        </span><span class="n">assertThat</span><span class="p">(</span><span class="n">entries</span><span class="p">).</span><span class="na">allMatch</span><span class="p">(</span><span class="n">e</span><span class="w"> </span><span class="o">-&gt;</span>
<span class="w">            </span><span class="n">e</span><span class="p">.</span><span class="na">getStatus</span><span class="p">()</span><span class="w"> </span><span class="o">==</span><span class="w"> </span><span class="n">JournalStatus</span><span class="p">.</span><span class="na">DRAFT</span>
<span class="w">        </span><span class="p">);</span>
<span class="w">    </span><span class="p">}</span>

<span class="w">    </span><span class="nd">@Test</span>
<span class="w">    </span><span class="nd">@Order</span><span class="p">(</span><span class="mi">7</span><span class="p">)</span>
<span class="w">    </span><span class="nd">@DisplayName</span><span class="p">(</span><span class="s">&quot;仕訳を更新できる&quot;</span><span class="p">)</span>
<span class="w">    </span><span class="kt">void</span><span class="w"> </span><span class="nf">shouldUpdateJournalEntry</span><span class="p">()</span><span class="w"> </span><span class="p">{</span>
<span class="w">        </span><span class="c1">// Given</span>
<span class="w">        </span><span class="kd">var</span><span class="w"> </span><span class="n">found</span><span class="w"> </span><span class="o">=</span><span class="w"> </span><span class="n">journalRepository</span><span class="p">.</span><span class="na">findByJournalNumber</span><span class="p">(</span><span class="s">&quot;JE00000001&quot;</span><span class="p">);</span>
<span class="w">        </span><span class="n">assertThat</span><span class="p">(</span><span class="n">found</span><span class="p">).</span><span class="na">isPresent</span><span class="p">();</span>

<span class="w">        </span><span class="n">JournalEntry</span><span class="w"> </span><span class="n">entry</span><span class="w"> </span><span class="o">=</span><span class="w"> </span><span class="n">found</span><span class="p">.</span><span class="na">get</span><span class="p">();</span>
<span class="w">        </span><span class="n">JournalEntry</span><span class="w"> </span><span class="n">updated</span><span class="w"> </span><span class="o">=</span><span class="w"> </span><span class="n">entry</span><span class="p">.</span><span class="na">withDescription</span><span class="p">(</span><span class="s">&quot;更新後の摘要&quot;</span><span class="p">);</span>

<span class="w">        </span><span class="c1">// When</span>
<span class="w">        </span><span class="n">journalRepository</span><span class="p">.</span><span class="na">save</span><span class="p">(</span><span class="n">updated</span><span class="p">);</span>

<span class="w">        </span><span class="c1">// Then</span>
<span class="w">        </span><span class="kd">var</span><span class="w"> </span><span class="n">result</span><span class="w"> </span><span class="o">=</span><span class="w"> </span><span class="n">journalRepository</span><span class="p">.</span><span class="na">findByJournalNumber</span><span class="p">(</span><span class="s">&quot;JE00000001&quot;</span><span class="p">);</span>
<span class="w">        </span><span class="n">assertThat</span><span class="p">(</span><span class="n">result</span><span class="p">).</span><span class="na">isPresent</span><span class="p">();</span>
<span class="w">        </span><span class="n">assertThat</span><span class="p">(</span><span class="n">result</span><span class="p">.</span><span class="na">get</span><span class="p">().</span><span class="na">getDescription</span><span class="p">()).</span><span class="na">isEqualTo</span><span class="p">(</span><span class="s">&quot;更新後の摘要&quot;</span><span class="p">);</span>
<span class="w">    </span><span class="p">}</span>

<span class="w">    </span><span class="nd">@Test</span>
<span class="w">    </span><span class="nd">@Order</span><span class="p">(</span><span class="mi">8</span><span class="p">)</span>
<span class="w">    </span><span class="nd">@DisplayName</span><span class="p">(</span><span class="s">&quot;仕訳を削除できる&quot;</span><span class="p">)</span>
<span class="w">    </span><span class="kt">void</span><span class="w"> </span><span class="nf">shouldDeleteJournalEntry</span><span class="p">()</span><span class="w"> </span><span class="p">{</span>
<span class="w">        </span><span class="c1">// Given</span>
<span class="w">        </span><span class="n">JournalEntry</span><span class="w"> </span><span class="n">entry</span><span class="w"> </span><span class="o">=</span><span class="w"> </span><span class="n">createTestJournalEntry</span><span class="p">(</span><span class="s">&quot;JE99999999&quot;</span><span class="p">);</span>
<span class="w">        </span><span class="n">journalRepository</span><span class="p">.</span><span class="na">save</span><span class="p">(</span><span class="n">entry</span><span class="p">);</span>

<span class="w">        </span><span class="c1">// When</span>
<span class="w">        </span><span class="n">journalRepository</span><span class="p">.</span><span class="na">deleteByJournalNumber</span><span class="p">(</span><span class="s">&quot;JE99999999&quot;</span><span class="p">);</span>

<span class="w">        </span><span class="c1">// Then</span>
<span class="w">        </span><span class="kd">var</span><span class="w"> </span><span class="n">found</span><span class="w"> </span><span class="o">=</span><span class="w"> </span><span class="n">journalRepository</span><span class="p">.</span><span class="na">findByJournalNumber</span><span class="p">(</span><span class="s">&quot;JE99999999&quot;</span><span class="p">);</span>
<span class="w">        </span><span class="n">assertThat</span><span class="p">(</span><span class="n">found</span><span class="p">).</span><span class="na">isEmpty</span><span class="p">();</span>
<span class="w">    </span><span class="p">}</span>

<span class="w">    </span><span class="c1">// テストヘルパーメソッド</span>
<span class="w">    </span><span class="kd">private</span><span class="w"> </span><span class="n">JournalEntry</span><span class="w"> </span><span class="nf">createTestJournalEntry</span><span class="p">(</span><span class="n">String</span><span class="w"> </span><span class="n">journalNumber</span><span class="p">)</span><span class="w"> </span><span class="p">{</span>
<span class="w">        </span><span class="n">List</span><span class="o">&lt;</span><span class="n">JournalLine</span><span class="o">&gt;</span><span class="w"> </span><span class="n">lines</span><span class="w"> </span><span class="o">=</span><span class="w"> </span><span class="n">List</span><span class="p">.</span><span class="na">of</span><span class="p">(</span>
<span class="w">            </span><span class="n">JournalLine</span><span class="p">.</span><span class="na">debit</span><span class="p">(</span><span class="s">&quot;1101&quot;</span><span class="p">,</span><span class="w"> </span><span class="k">new</span><span class="w"> </span><span class="n">BigDecimal</span><span class="p">(</span><span class="s">&quot;10000&quot;</span><span class="p">)),</span>
<span class="w">            </span><span class="n">JournalLine</span><span class="p">.</span><span class="na">credit</span><span class="p">(</span><span class="s">&quot;4101&quot;</span><span class="p">,</span><span class="w"> </span><span class="k">new</span><span class="w"> </span><span class="n">BigDecimal</span><span class="p">(</span><span class="s">&quot;10000&quot;</span><span class="p">))</span>
<span class="w">        </span><span class="p">);</span>

<span class="w">        </span><span class="k">return</span><span class="w"> </span><span class="n">JournalEntry</span><span class="p">.</span><span class="na">builder</span><span class="p">()</span>
<span class="w">            </span><span class="p">.</span><span class="na">journalNumber</span><span class="p">(</span><span class="n">journalNumber</span><span class="p">)</span>
<span class="w">            </span><span class="p">.</span><span class="na">journalDate</span><span class="p">(</span><span class="n">LocalDate</span><span class="p">.</span><span class="na">of</span><span class="p">(</span><span class="mi">2024</span><span class="p">,</span><span class="w"> </span><span class="mi">4</span><span class="p">,</span><span class="w"> </span><span class="mi">1</span><span class="p">))</span>
<span class="w">            </span><span class="p">.</span><span class="na">description</span><span class="p">(</span><span class="s">&quot;テスト仕訳&quot;</span><span class="p">)</span>
<span class="w">            </span><span class="p">.</span><span class="na">status</span><span class="p">(</span><span class="n">JournalStatus</span><span class="p">.</span><span class="na">DRAFT</span><span class="p">)</span>
<span class="w">            </span><span class="p">.</span><span class="na">lines</span><span class="p">(</span><span class="n">lines</span><span class="p">)</span>
<span class="w">            </span><span class="p">.</span><span class="na">build</span><span class="p">();</span>
<span class="w">    </span><span class="p">}</span>
<span class="p">}</span>
</code></pre></div>
<h3 id="testcontainers_1">Testcontainers の動作フロー<a class="headerlink" href="#testcontainers_1" title="Permanent link">&para;</a></h3>
<p><img src="data:image/svg+xml;base64,PHN2ZyB4bWxucz0iaHR0cDovL3d3dy53My5vcmcvMjAwMC9zdmciIHhtbG5zOnhsaW5rPSJodHRwOi8vd3d3LnczLm9yZy8xOTk5L3hsaW5rIiBjb250ZW50U3R5bGVUeXBlPSJ0ZXh0L2NzcyIgZGF0YS1kaWFncmFtLXR5cGU9IkFDVElWSVRZIiBoZWlnaHQ9IjY3NHB4IiBwcmVzZXJ2ZUFzcGVjdFJhdGlvPSJub25lIiBzdHlsZT0id2lkdGg6NDQ1cHg7aGVpZ2h0OjY3NHB4O2JhY2tncm91bmQ6I0ZGRkZGRjsiIHZlcnNpb249IjEuMSIgdmlld0JveD0iMCAwIDQ0NSA2NzQiIHdpZHRoPSI0NDVweCIgem9vbUFuZFBhbj0ibWFnbmlmeSI+PHRpdGxlPlRlc3Rjb250YWluZXJzICYjMTIzOTg7JiMyMTIwNTsmIzIwMzE2OyYjMTI1MDE7JiMxMjUyNTsmIzEyNTQwOzwvdGl0bGU+PGRlZnMvPjxnPjxnIGNsYXNzPSJ0aXRsZSIgZGF0YS1zb3VyY2UtbGluZT0iMSI+PHRleHQgZmlsbD0iIzAwMDAwMCIgZm9udC1mYW1pbHk9InNhbnMtc2VyaWYiIGZvbnQtc2l6ZT0iMTQiIGZvbnQtd2VpZ2h0PSJib2xkIiBsZW5ndGhBZGp1c3Q9InNwYWNpbmciIHRleHRMZW5ndGg9IjIwNi40NjU1IiB4PSIxMTcuODE0NyIgeT0iMzIuOTk1MSI+VGVzdGNvbnRhaW5lcnMgJiMxMjM5ODsmIzIxMjA1OyYjMjAzMTY7JiMxMjUwMTsmIzEyNTI1OyYjMTI1NDA7PC90ZXh0PjwvZz48ZWxsaXBzZSBjeD0iMTI3LjI5ODMiIGN5PSI1Ny4yOTY5IiBmaWxsPSIjMjIyMjIyIiByeD0iMTAiIHJ5PSIxMCIgc3R5bGU9InN0cm9rZTojMjIyMjIyO3N0cm9rZS13aWR0aDoxOyIvPjxyZWN0IGZpbGw9IiNGMUYxRjEiIGhlaWdodD0iMzMuOTY4OCIgcng9IjEyLjUiIHJ5PSIxMi41IiBzdHlsZT0ic3Ryb2tlOiMxODE4MTg7c3Ryb2tlLXdpZHRoOjAuNTsiIHdpZHRoPSIxMTYuMDAwNyIgeD0iNjkuMjk3OSIgeT0iODcuMjk2OSIvPjx0ZXh0IGZpbGw9IiMwMDAwMDAiIGZvbnQtZmFtaWx5PSJzYW5zLXNlcmlmIiBmb250LXNpemU9IjEyIiBsZW5ndGhBZGp1c3Q9InNwYWNpbmciIHRleHRMZW5ndGg9Ijk2LjAwMDciIHg9Ijc5LjI5NzkiIHk9IjEwOC40MzU1Ij4mIzEyNDg2OyYjMTI0NzM7JiMxMjQ4ODsmIzEyNDYzOyYjMTI1MjE7JiMxMjQ3MzsmIzM2MjE1OyYjMjEyMDU7PC90ZXh0PjxyZWN0IGZpbGw9IiNGMUYxRjEiIGhlaWdodD0iMzMuOTY4OCIgcng9IjEyLjUiIHJ5PSIxMi41IiBzdHlsZT0ic3Ryb2tlOiMxODE4MTg7c3Ryb2tlLXdpZHRoOjAuNTsiIHdpZHRoPSIyMzIuNTk2NSIgeD0iMTEiIHk9IjE0MS4yNjU2Ii8+PHRleHQgZmlsbD0iIzAwMDAwMCIgZm9udC1mYW1pbHk9InNhbnMtc2VyaWYiIGZvbnQtc2l6ZT0iMTIiIGxlbmd0aEFkanVzdD0ic3BhY2luZyIgdGV4dExlbmd0aD0iMjEyLjU5NjUiIHg9IjIxIiB5PSIxNjIuNDA0MyI+QFRlc3Rjb250YWluZXJzICYjMTI0NTA7JiMxMjQ5NDsmIzEyNDg2OyYjMTI1NDA7JiMxMjQ3MTsmIzEyNTE5OyYjMTI1MzE7JiMyNjkwODsmIzIwOTg2OzwvdGV4dD48cGF0aCBkPSJNMjE2LjQyODQsMTg1LjIzNDQgTDIxNi40Mjg0LDIxNi41IEwxOTYuNDI4NCwyMjAuNSBMMjE2LjQyODQsMjI0LjUgTDIxNi40Mjg0LDI1NS43NjU2IEEwLDAgMCAwIDAgMjE2LjQyODQsMjU1Ljc2NTYgTDQzMy4wOTQ5LDI1NS43NjU2IEEwLDAgMCAwIDAgNDMzLjA5NDksMjU1Ljc2NTYgTDQzMy4wOTQ5LDE5NS4yMzQ0IEw0MjMuMDk0OSwxODUuMjM0NCBMMjE2LjQyODQsMTg1LjIzNDQgQTAsMCAwIDAgMCAyMTYuNDI4NCwxODUuMjM0NCIgZmlsbD0iI0ZFRkZERCIgc3R5bGU9InN0cm9rZTojMTgxODE4O3N0cm9rZS13aWR0aDowLjU7Ii8+PHBhdGggZD0iTTQyMy4wOTQ5LDE4NS4yMzQ0IEw0MjMuMDk0OSwxOTUuMjM0NCBMNDMzLjA5NDksMTk1LjIzNDQgTDQyMy4wOTQ5LDE4NS4yMzQ0IiBmaWxsPSIjRkVGRkREIiBzdHlsZT0ic3Ryb2tlOiMxODE4MTg7c3Ryb2tlLXdpZHRoOjAuNTsiLz48dGV4dCBmaWxsPSIjMDAwMDAwIiBmb250LWZhbWlseT0ic2Fucy1zZXJpZiIgZm9udC1zaXplPSIxMyIgbGVuZ3RoQWRqdXN0PSJzcGFjaW5nIiB0ZXh0TGVuZ3RoPSIxNjcuMTk3MyIgeD0iMjIyLjQyODQiIHk9IjIwMi4zMDEzIj5Qb3N0Z3JlU1FMQ29udGFpbmVyJmx0Oz8mZ3Q7PC90ZXh0Pjx0ZXh0IGZpbGw9IiMwMDAwMDAiIGZvbnQtZmFtaWx5PSJzYW5zLXNlcmlmIiBmb250LXNpemU9IjEzIiBsZW5ndGhBZGp1c3Q9InNwYWNpbmciIHRleHRMZW5ndGg9IjE5NS42NjY1IiB4PSIyMjIuNDI4NCIgeT0iMjE3LjQzNDEiPi53aXRoRGF0YWJhc2VOYW1lKCJ0ZXN0ZGIiKTwvdGV4dD48dGV4dCBmaWxsPSIjMDAwMDAwIiBmb250LWZhbWlseT0ic2Fucy1zZXJpZiIgZm9udC1zaXplPSIxMyIgbGVuZ3RoQWRqdXN0PSJzcGFjaW5nIiB0ZXh0TGVuZ3RoPSIxNzMuNjMzOCIgeD0iMjIyLjQyODQiIHk9IjIzMi41NjY5Ij4ud2l0aFVzZXJuYW1lKCJ0ZXN0dXNlciIpPC90ZXh0Pjx0ZXh0IGZpbGw9IiMwMDAwMDAiIGZvbnQtZmFtaWx5PSJzYW5zLXNlcmlmIiBmb250LXNpemU9IjEzIiBsZW5ndGhBZGp1c3Q9InNwYWNpbmciIHRleHRMZW5ndGg9IjE3MC4wNzkxIiB4PSIyMjIuNDI4NCIgeT0iMjQ3LjY5OTciPi53aXRoUGFzc3dvcmQoInRlc3RwYXNzIik8L3RleHQ+PHJlY3QgZmlsbD0iI0YxRjFGMSIgaGVpZ2h0PSIzMy45Njg4IiByeD0iMTIuNSIgcnk9IjEyLjUiIHN0eWxlPSJzdHJva2U6IzE4MTgxODtzdHJva2Utd2lkdGg6MC41OyIgd2lkdGg9IjEzOC4yNjAzIiB4PSI1OC4xNjgxIiB5PSIyMDMuNTE1NiIvPjx0ZXh0IGZpbGw9IiMwMDAwMDAiIGZvbnQtZmFtaWx5PSJzYW5zLXNlcmlmIiBmb250LXNpemU9IjEyIiBsZW5ndGhBZGp1c3Q9InNwYWNpbmciIHRleHRMZW5ndGg9IjExOC4yNjAzIiB4PSI2OC4xNjgxIiB5PSIyMjQuNjU0MyI+RG9ja2VyICYjMTI0Njc7JiMxMjUzMTsmIzEyNDg2OyYjMTI0OTA7JiMzNjIxNTsmIzIxMjA1OzwvdGV4dD48cmVjdCBmaWxsPSIjRjFGMUYxIiBoZWlnaHQ9IjQ3LjkzNzUiIHJ4PSIxMi41IiByeT0iMTIuNSIgc3R5bGU9InN0cm9rZTojMTgxODE4O3N0cm9rZS13aWR0aDowLjU7IiB3aWR0aD0iMTkzLjQ2NjkiIHg9IjMwLjU2NDgiIHk9IjI3NS43NjU2Ii8+PHRleHQgZmlsbD0iIzAwMDAwMCIgZm9udC1mYW1pbHk9InNhbnMtc2VyaWYiIGZvbnQtc2l6ZT0iMTIiIGxlbmd0aEFkanVzdD0ic3BhY2luZyIgdGV4dExlbmd0aD0iMTczLjQ2NjkiIHg9IjQwLjU2NDgiIHk9IjI5Ni45MDQzIj5ARHluYW1pY1Byb3BlcnR5U291cmNlICYjMTIzOTE7PC90ZXh0Pjx0ZXh0IGZpbGw9IiMwMDAwMDAiIGZvbnQtZmFtaWx5PSJzYW5zLXNlcmlmIiBmb250LXNpemU9IjEyIiBsZW5ndGhBZGp1c3Q9InNwYWNpbmciIHRleHRMZW5ndGg9Ijk2LjgyNjQiIHg9IjQwLjU2NDgiIHk9IjMxMC44NzMiPkpEQkMgVVJMICYjMTI0MzQ7JiMzNTM3MzsmIzIzNDUwOzwvdGV4dD48cmVjdCBmaWxsPSIjRjFGMUYxIiBoZWlnaHQ9IjMzLjk2ODgiIHJ4PSIxMi41IiByeT0iMTIuNSIgc3R5bGU9InN0cm9rZTojMTgxODE4O3N0cm9rZS13aWR0aDowLjU7IiB3aWR0aD0iMTU4LjUzOTgiIHg9IjQ4LjAyODQiIHk9IjM0My43MDMxIi8+PHRleHQgZmlsbD0iIzAwMDAwMCIgZm9udC1mYW1pbHk9InNhbnMtc2VyaWYiIGZvbnQtc2l6ZT0iMTIiIGxlbmd0aEFkanVzdD0ic3BhY2luZyIgdGV4dExlbmd0aD0iMTM4LjUzOTgiIHg9IjU4LjAyODQiIHk9IjM2NC44NDE4Ij5TcHJpbmcgJiMxMjQ2NzsmIzEyNTMxOyYjMTI0ODY7JiMxMjQ2MTsmIzEyNDczOyYjMTI0ODg7JiMzNjIxNTsmIzIxMjA1OzwvdGV4dD48cmVjdCBmaWxsPSIjRjFGMUYxIiBoZWlnaHQ9IjMzLjk2ODgiIHJ4PSIxMi41IiByeT0iMTIuNSIgc3R5bGU9InN0cm9rZTojMTgxODE4O3N0cm9rZS13aWR0aDowLjU7IiB3aWR0aD0iMTg1LjQyMjgiIHg9IjM0LjU4NjkiIHk9IjM5Ny42NzE5Ii8+PHRleHQgZmlsbD0iIzAwMDAwMCIgZm9udC1mYW1pbHk9InNhbnMtc2VyaWYiIGZvbnQtc2l6ZT0iMTIiIGxlbmd0aEFkanVzdD0ic3BhY2luZyIgdGV4dExlbmd0aD0iMTY1LjQyMjgiIHg9IjQ0LjU4NjkiIHk9IjQxOC44MTA1Ij5GbHl3YXkgJiMxMjUxMDsmIzEyNDUyOyYjMTI0NjQ7JiMxMjUyNDsmIzEyNTQwOyYjMTI0NzE7JiMxMjUxOTsmIzEyNTMxOyYjMjM0NTU7JiMzNDg5Mjs8L3RleHQ+PHJlY3QgZmlsbD0iI0YxRjFGMSIgaGVpZ2h0PSI0Ny45Mzc1IiByeD0iMTIuNSIgcnk9IjEyLjUiIHN0eWxlPSJzdHJva2U6IzE4MTgxODtzdHJva2Utd2lkdGg6MC41OyIgd2lkdGg9IjE4OC4wMDEzIiB4PSIzMy4yOTc2IiB5PSI0NTEuNjQwNiIvPjx0ZXh0IGZpbGw9IiMwMDAwMDAiIGZvbnQtZmFtaWx5PSJzYW5zLXNlcmlmIiBmb250LXNpemU9IjEyIiBsZW5ndGhBZGp1c3Q9InNwYWNpbmciIHRleHRMZW5ndGg9Ijk2LjQ1MTMiIHg9IjQzLjI5NzYiIHk9IjQ3Mi43NzkzIj5AQmVmb3JlRWFjaCAmIzEyMzkxOzwvdGV4dD48dGV4dCBmaWxsPSIjMDAwMDAwIiBmb250LWZhbWlseT0ic2Fucy1zZXJpZiIgZm9udC1zaXplPSIxMiIgbGVuZ3RoQWRqdXN0PSJzcGFjaW5nIiB0ZXh0TGVuZ3RoPSIxNjguMDAxMyIgeD0iNDMuMjk3NiIgeT0iNDg2Ljc0OCI+JiMxMjQ4NzsmIzEyNTQwOyYjMTI0Nzk7JiMxMjQ2MzsmIzEyNTIyOyYjMTI0NTA7JiM2NTI4ODsmIzI0NTE3OyYjMzUyMDE7JiMxMjM5NTsmIzI0NTQwOyYjMTIzNzY7JiMxMjM5MDsmIzY1Mjg5OzwvdGV4dD48cmVjdCBmaWxsPSIjRjFGMUYxIiBoZWlnaHQ9IjMzLjk2ODgiIHJ4PSIxMi41IiByeT0iMTIuNSIgc3R5bGU9InN0cm9rZTojMTgxODE4O3N0cm9rZS13aWR0aDowLjU7IiB3aWR0aD0iODAuMDAwNSIgeD0iODcuMjk4IiB5PSI1MTkuNTc4MSIvPjx0ZXh0IGZpbGw9IiMwMDAwMDAiIGZvbnQtZmFtaWx5PSJzYW5zLXNlcmlmIiBmb250LXNpemU9IjEyIiBsZW5ndGhBZGp1c3Q9InNwYWNpbmciIHRleHRMZW5ndGg9IjYwLjAwMDUiIHg9Ijk3LjI5OCIgeT0iNTQwLjcxNjgiPiYjMTI0ODY7JiMxMjQ3MzsmIzEyNDg4OyYjMjM0NTU7JiMzNDg5Mjs8L3RleHQ+PHJlY3QgZmlsbD0iI0YxRjFGMSIgaGVpZ2h0PSI0Ny45Mzc1IiByeD0iMTIuNSIgcnk9IjEyLjUiIHN0eWxlPSJzdHJva2U6IzE4MTgxODtzdHJva2Utd2lkdGg6MC41OyIgd2lkdGg9IjkyLjE0NjYiIHg9IjgxLjIyNSIgeT0iNTczLjU0NjkiLz48dGV4dCBmaWxsPSIjMDAwMDAwIiBmb250LWZhbWlseT0ic2Fucy1zZXJpZiIgZm9udC1zaXplPSIxMiIgbGVuZ3RoQWRqdXN0PSJzcGFjaW5nIiB0ZXh0TGVuZ3RoPSI3Mi4xNDY2IiB4PSI5MS4yMjUiIHk9IjU5NC42ODU1Ij5AQWZ0ZXJBbGwgJiMxMjM5MTs8L3RleHQ+PHRleHQgZmlsbD0iIzAwMDAwMCIgZm9udC1mYW1pbHk9InNhbnMtc2VyaWYiIGZvbnQtc2l6ZT0iMTIiIGxlbmd0aEFkanVzdD0ic3BhY2luZyIgdGV4dExlbmd0aD0iNzIuMDAwNSIgeD0iOTEuMjI1IiB5PSI2MDguNjU0MyI+JiMxMjQ2NzsmIzEyNTMxOyYjMTI0ODY7JiMxMjQ5MDsmIzIwNTcyOyYjMjc0OTA7PC90ZXh0PjxlbGxpcHNlIGN4PSIxMjcuMjk4MyIgY3k9IjY1Mi40ODQ0IiBmaWxsPSJub25lIiByeD0iMTEiIHJ5PSIxMSIgc3R5bGU9InN0cm9rZTojMjIyMjIyO3N0cm9rZS13aWR0aDoxOyIvPjxlbGxpcHNlIGN4PSIxMjcuMjk4MyIgY3k9IjY1Mi40ODQ0IiBmaWxsPSIjMjIyMjIyIiByeD0iNiIgcnk9IjYiIHN0eWxlPSJzdHJva2U6IzIyMjIyMjtzdHJva2Utd2lkdGg6MTsiLz48bGluZSBzdHlsZT0ic3Ryb2tlOiMxODE4MTg7c3Ryb2tlLXdpZHRoOjE7IiB4MT0iMTI3LjI5ODMiIHgyPSIxMjcuMjk4MyIgeTE9IjY3LjI5NjkiIHkyPSI4Ny4yOTY5Ii8+PHBvbHlnb24gZmlsbD0iIzE4MTgxOCIgcG9pbnRzPSIxMjMuMjk4Myw3Ny4yOTY5LDEyNy4yOTgzLDg3LjI5NjksMTMxLjI5ODMsNzcuMjk2OSwxMjcuMjk4Myw4MS4yOTY5IiBzdHlsZT0ic3Ryb2tlOiMxODE4MTg7c3Ryb2tlLXdpZHRoOjE7Ii8+PGxpbmUgc3R5bGU9InN0cm9rZTojMTgxODE4O3N0cm9rZS13aWR0aDoxOyIgeDE9IjEyNy4yOTgzIiB4Mj0iMTI3LjI5ODMiIHkxPSIxMjEuMjY1NiIgeTI9IjE0MS4yNjU2Ii8+PHBvbHlnb24gZmlsbD0iIzE4MTgxOCIgcG9pbnRzPSIxMjMuMjk4MywxMzEuMjY1NiwxMjcuMjk4MywxNDEuMjY1NiwxMzEuMjk4MywxMzEuMjY1NiwxMjcuMjk4MywxMzUuMjY1NiIgc3R5bGU9InN0cm9rZTojMTgxODE4O3N0cm9rZS13aWR0aDoxOyIvPjxsaW5lIHN0eWxlPSJzdHJva2U6IzE4MTgxODtzdHJva2Utd2lkdGg6MTsiIHgxPSIxMjcuMjk4MyIgeDI9IjEyNy4yOTgzIiB5MT0iMTc1LjIzNDQiIHkyPSIyMDMuNTE1NiIvPjxwb2x5Z29uIGZpbGw9IiMxODE4MTgiIHBvaW50cz0iMTIzLjI5ODMsMTkzLjUxNTYsMTI3LjI5ODMsMjAzLjUxNTYsMTMxLjI5ODMsMTkzLjUxNTYsMTI3LjI5ODMsMTk3LjUxNTYiIHN0eWxlPSJzdHJva2U6IzE4MTgxODtzdHJva2Utd2lkdGg6MTsiLz48bGluZSBzdHlsZT0ic3Ryb2tlOiMxODE4MTg7c3Ryb2tlLXdpZHRoOjE7IiB4MT0iMTI3LjI5ODMiIHgyPSIxMjcuMjk4MyIgeTE9IjIzNy40ODQ0IiB5Mj0iMjc1Ljc2NTYiLz48cG9seWdvbiBmaWxsPSIjMTgxODE4IiBwb2ludHM9IjEyMy4yOTgzLDI2NS43NjU2LDEyNy4yOTgzLDI3NS43NjU2LDEzMS4yOTgzLDI2NS43NjU2LDEyNy4yOTgzLDI2OS43NjU2IiBzdHlsZT0ic3Ryb2tlOiMxODE4MTg7c3Ryb2tlLXdpZHRoOjE7Ii8+PGxpbmUgc3R5bGU9InN0cm9rZTojMTgxODE4O3N0cm9rZS13aWR0aDoxOyIgeDE9IjEyNy4yOTgzIiB4Mj0iMTI3LjI5ODMiIHkxPSIzMjMuNzAzMSIgeTI9IjM0My43MDMxIi8+PHBvbHlnb24gZmlsbD0iIzE4MTgxOCIgcG9pbnRzPSIxMjMuMjk4MywzMzMuNzAzMSwxMjcuMjk4MywzNDMuNzAzMSwxMzEuMjk4MywzMzMuNzAzMSwxMjcuMjk4MywzMzcuNzAzMSIgc3R5bGU9InN0cm9rZTojMTgxODE4O3N0cm9rZS13aWR0aDoxOyIvPjxsaW5lIHN0eWxlPSJzdHJva2U6IzE4MTgxODtzdHJva2Utd2lkdGg6MTsiIHgxPSIxMjcuMjk4MyIgeDI9IjEyNy4yOTgzIiB5MT0iMzc3LjY3MTkiIHkyPSIzOTcuNjcxOSIvPjxwb2x5Z29uIGZpbGw9IiMxODE4MTgiIHBvaW50cz0iMTIzLjI5ODMsMzg3LjY3MTksMTI3LjI5ODMsMzk3LjY3MTksMTMxLjI5ODMsMzg3LjY3MTksMTI3LjI5ODMsMzkxLjY3MTkiIHN0eWxlPSJzdHJva2U6IzE4MTgxODtzdHJva2Utd2lkdGg6MTsiLz48bGluZSBzdHlsZT0ic3Ryb2tlOiMxODE4MTg7c3Ryb2tlLXdpZHRoOjE7IiB4MT0iMTI3LjI5ODMiIHgyPSIxMjcuMjk4MyIgeTE9IjQzMS42NDA2IiB5Mj0iNDUxLjY0MDYiLz48cG9seWdvbiBmaWxsPSIjMTgxODE4IiBwb2ludHM9IjEyMy4yOTgzLDQ0MS42NDA2LDEyNy4yOTgzLDQ1MS42NDA2LDEzMS4yOTgzLDQ0MS42NDA2LDEyNy4yOTgzLDQ0NS42NDA2IiBzdHlsZT0ic3Ryb2tlOiMxODE4MTg7c3Ryb2tlLXdpZHRoOjE7Ii8+PGxpbmUgc3R5bGU9InN0cm9rZTojMTgxODE4O3N0cm9rZS13aWR0aDoxOyIgeDE9IjEyNy4yOTgzIiB4Mj0iMTI3LjI5ODMiIHkxPSI0OTkuNTc4MSIgeTI9IjUxOS41NzgxIi8+PHBvbHlnb24gZmlsbD0iIzE4MTgxOCIgcG9pbnRzPSIxMjMuMjk4Myw1MDkuNTc4MSwxMjcuMjk4Myw1MTkuNTc4MSwxMzEuMjk4Myw1MDkuNTc4MSwxMjcuMjk4Myw1MTMuNTc4MSIgc3R5bGU9InN0cm9rZTojMTgxODE4O3N0cm9rZS13aWR0aDoxOyIvPjxsaW5lIHN0eWxlPSJzdHJva2U6IzE4MTgxODtzdHJva2Utd2lkdGg6MTsiIHgxPSIxMjcuMjk4MyIgeDI9IjEyNy4yOTgzIiB5MT0iNTUzLjU0NjkiIHkyPSI1NzMuNTQ2OSIvPjxwb2x5Z29uIGZpbGw9IiMxODE4MTgiIHBvaW50cz0iMTIzLjI5ODMsNTYzLjU0NjksMTI3LjI5ODMsNTczLjU0NjksMTMxLjI5ODMsNTYzLjU0NjksMTI3LjI5ODMsNTY3LjU0NjkiIHN0eWxlPSJzdHJva2U6IzE4MTgxODtzdHJva2Utd2lkdGg6MTsiLz48bGluZSBzdHlsZT0ic3Ryb2tlOiMxODE4MTg7c3Ryb2tlLXdpZHRoOjE7IiB4MT0iMTI3LjI5ODMiIHgyPSIxMjcuMjk4MyIgeTE9IjYyMS40ODQ0IiB5Mj0iNjQxLjQ4NDQiLz48cG9seWdvbiBmaWxsPSIjMTgxODE4IiBwb2ludHM9IjEyMy4yOTgzLDYzMS40ODQ0LDEyNy4yOTgzLDY0MS40ODQ0LDEzMS4yOTgzLDYzMS40ODQ0LDEyNy4yOTgzLDYzNS40ODQ0IiBzdHlsZT0ic3Ryb2tlOiMxODE4MTg7c3Ryb2tlLXdpZHRoOjE7Ii8+PCEtLVNSQz1bTlA3REppOTA0Q1ZsVk9nNmFydnkwMzBnN3RlbW5BMzhwU2pJNWNZaXRNUHQyVTdPUlhKeVkwU0o0Y0U4SGFCMEJ6MjQ2QUFmdU03NmFqdnUxSFNnSUJwanBGcGRGcGtfdUpldGlCZ0Y2VFU4b1A1a09pZktpN2xVVVZ0eGdtNlkzZzhCbWJLS25YN2JJWFo0MkpXVjg2aFdsODl1YjZfX1ZJMzU0SU15eVRfNVFPQXVkM0c4NXZtMVkwdzhfZ1pMeUFnVktmcVdzWTZjS2pJTnNRZGVSRVBhNGV2TGdYVUFONGFIbldpS2Z0VUp5UGRud2xnUWliQk1VSjYxRUNlWVhkVkc0THVBU0pheWJtcWoxeEtDbXpJU3ZxaW9jYkxJWUI0b2VSY1dPaWI4TGgyUEtvVEo1UmI1ZVk4UlRJcjVZT0tmaHdIOVlNZk84a2FTY0RrOU01cER4Mk5iaHdfeVh3eE5rdjZCZjJzZ2N1TTVIUG5rRzZXRVBpa2ViNTU1MU40QkpXa1NEbjBsWXFZeXRmcl9WcDQxNkNEdkdsNGNxZWgxRjEzTGdOMHVYVnFhV094VGNaU3l6amlzc0NfVWkwN3NEVFpqaU5pUU1SWkNkcnlxcHA2RDZpUWxzbTlncHN3Q2tpczhsMmduVlcwMF0tLT48L2c+PC9zdmc+" class="uml" alt="uml diagram" title="" /></p>
<h3 id="api">API 統合テスト<a class="headerlink" href="#api" title="Permanent link">&para;</a></h3>
<div class="highlight"><pre><span></span><code><span class="kn">package</span><span class="w"> </span><span class="nn">com.example.accounting.infrastructure.web.controller</span><span class="p">;</span>

<span class="kn">import</span><span class="w"> </span><span class="nn">com.fasterxml.jackson.databind.ObjectMapper</span><span class="p">;</span>
<span class="kn">import</span><span class="w"> </span><span class="nn">org.junit.jupiter.api.*</span><span class="p">;</span>
<span class="kn">import</span><span class="w"> </span><span class="nn">org.springframework.beans.factory.annotation.Autowired</span><span class="p">;</span>
<span class="kn">import</span><span class="w"> </span><span class="nn">org.springframework.boot.test.autoconfigure.web.servlet.AutoConfigureMockMvc</span><span class="p">;</span>
<span class="kn">import</span><span class="w"> </span><span class="nn">org.springframework.boot.test.context.SpringBootTest</span><span class="p">;</span>
<span class="kn">import</span><span class="w"> </span><span class="nn">org.springframework.http.MediaType</span><span class="p">;</span>
<span class="kn">import</span><span class="w"> </span><span class="nn">org.springframework.test.context.DynamicPropertyRegistry</span><span class="p">;</span>
<span class="kn">import</span><span class="w"> </span><span class="nn">org.springframework.test.context.DynamicPropertySource</span><span class="p">;</span>
<span class="kn">import</span><span class="w"> </span><span class="nn">org.springframework.test.web.servlet.MockMvc</span><span class="p">;</span>
<span class="kn">import</span><span class="w"> </span><span class="nn">org.testcontainers.containers.PostgreSQLContainer</span><span class="p">;</span>
<span class="kn">import</span><span class="w"> </span><span class="nn">org.testcontainers.junit.jupiter.Container</span><span class="p">;</span>
<span class="kn">import</span><span class="w"> </span><span class="nn">org.testcontainers.junit.jupiter.Testcontainers</span><span class="p">;</span>

<span class="kn">import static</span><span class="w"> </span><span class="nn">org.hamcrest.Matchers.*</span><span class="p">;</span>
<span class="kn">import static</span><span class="w"> </span><span class="nn">org.springframework.test.web.servlet.request.MockMvcRequestBuilders.*</span><span class="p">;</span>
<span class="kn">import static</span><span class="w"> </span><span class="nn">org.springframework.test.web.servlet.result.MockMvcResultMatchers.*</span><span class="p">;</span>

<span class="nd">@SpringBootTest</span>
<span class="nd">@AutoConfigureMockMvc</span>
<span class="nd">@Testcontainers</span>
<span class="nd">@TestMethodOrder</span><span class="p">(</span><span class="n">MethodOrderer</span><span class="p">.</span><span class="na">OrderAnnotation</span><span class="p">.</span><span class="na">class</span><span class="p">)</span>
<span class="nd">@DisplayName</span><span class="p">(</span><span class="s">&quot;仕訳 API 統合テスト&quot;</span><span class="p">)</span>
<span class="kd">class</span> <span class="nc">JournalControllerIntegrationTest</span><span class="w"> </span><span class="p">{</span>

<span class="w">    </span><span class="nd">@Container</span>
<span class="w">    </span><span class="kd">static</span><span class="w"> </span><span class="n">PostgreSQLContainer</span><span class="o">&lt;?&gt;</span><span class="w"> </span><span class="n">postgres</span><span class="w"> </span><span class="o">=</span>
<span class="w">        </span><span class="k">new</span><span class="w"> </span><span class="n">PostgreSQLContainer</span><span class="o">&lt;&gt;</span><span class="p">(</span><span class="s">&quot;postgres:16-alpine&quot;</span><span class="p">)</span>
<span class="w">            </span><span class="p">.</span><span class="na">withDatabaseName</span><span class="p">(</span><span class="s">&quot;testdb&quot;</span><span class="p">)</span>
<span class="w">            </span><span class="p">.</span><span class="na">withUsername</span><span class="p">(</span><span class="s">&quot;testuser&quot;</span><span class="p">)</span>
<span class="w">            </span><span class="p">.</span><span class="na">withPassword</span><span class="p">(</span><span class="s">&quot;testpass&quot;</span><span class="p">);</span>

<span class="w">    </span><span class="nd">@DynamicPropertySource</span>
<span class="w">    </span><span class="kd">static</span><span class="w"> </span><span class="kt">void</span><span class="w"> </span><span class="nf">configureProperties</span><span class="p">(</span><span class="n">DynamicPropertyRegistry</span><span class="w"> </span><span class="n">registry</span><span class="p">)</span><span class="w"> </span><span class="p">{</span>
<span class="w">        </span><span class="n">registry</span><span class="p">.</span><span class="na">add</span><span class="p">(</span><span class="s">&quot;spring.datasource.url&quot;</span><span class="p">,</span><span class="w"> </span><span class="n">postgres</span><span class="p">::</span><span class="n">getJdbcUrl</span><span class="p">);</span>
<span class="w">        </span><span class="n">registry</span><span class="p">.</span><span class="na">add</span><span class="p">(</span><span class="s">&quot;spring.datasource.username&quot;</span><span class="p">,</span><span class="w"> </span><span class="n">postgres</span><span class="p">::</span><span class="n">getUsername</span><span class="p">);</span>
<span class="w">        </span><span class="n">registry</span><span class="p">.</span><span class="na">add</span><span class="p">(</span><span class="s">&quot;spring.datasource.password&quot;</span><span class="p">,</span><span class="w"> </span><span class="n">postgres</span><span class="p">::</span><span class="n">getPassword</span><span class="p">);</span>
<span class="w">        </span><span class="n">registry</span><span class="p">.</span><span class="na">add</span><span class="p">(</span><span class="s">&quot;spring.flyway.enabled&quot;</span><span class="p">,</span><span class="w"> </span><span class="p">()</span><span class="w"> </span><span class="o">-&gt;</span><span class="w"> </span><span class="s">&quot;true&quot;</span><span class="p">);</span>
<span class="w">    </span><span class="p">}</span>

<span class="w">    </span><span class="nd">@Autowired</span>
<span class="w">    </span><span class="kd">private</span><span class="w"> </span><span class="n">MockMvc</span><span class="w"> </span><span class="n">mockMvc</span><span class="p">;</span>

<span class="w">    </span><span class="nd">@Autowired</span>
<span class="w">    </span><span class="kd">private</span><span class="w"> </span><span class="n">ObjectMapper</span><span class="w"> </span><span class="n">objectMapper</span><span class="p">;</span>

<span class="w">    </span><span class="nd">@Test</span>
<span class="w">    </span><span class="nd">@Order</span><span class="p">(</span><span class="mi">1</span><span class="p">)</span>
<span class="w">    </span><span class="nd">@DisplayName</span><span class="p">(</span><span class="s">&quot;POST /api/journals - 仕訳を登録できる&quot;</span><span class="p">)</span>
<span class="w">    </span><span class="kt">void</span><span class="w"> </span><span class="nf">shouldCreateJournalEntry</span><span class="p">()</span><span class="w"> </span><span class="kd">throws</span><span class="w"> </span><span class="n">Exception</span><span class="w"> </span><span class="p">{</span>
<span class="w">        </span><span class="kd">var</span><span class="w"> </span><span class="n">request</span><span class="w"> </span><span class="o">=</span><span class="w"> </span><span class="s">&quot;&quot;&quot;</span>
<span class="s">            {</span>
<span class="s">                &quot;journalDate&quot;: &quot;2024-04-01&quot;,</span>
<span class="s">                &quot;description&quot;: &quot;現金売上&quot;,</span>
<span class="s">                &quot;lines&quot;: [</span>
<span class="s">                    {&quot;accountCode&quot;: &quot;1101&quot;, &quot;debitAmount&quot;: 10000, &quot;creditAmount&quot;: 0},</span>
<span class="s">                    {&quot;accountCode&quot;: &quot;4101&quot;, &quot;debitAmount&quot;: 0, &quot;creditAmount&quot;: 10000}</span>
<span class="s">                ]</span>
<span class="s">            }</span>
<span class="s">            &quot;&quot;&quot;</span><span class="p">;</span>

<span class="w">        </span><span class="n">mockMvc</span><span class="p">.</span><span class="na">perform</span><span class="p">(</span><span class="n">post</span><span class="p">(</span><span class="s">&quot;/api/journals&quot;</span><span class="p">)</span>
<span class="w">                </span><span class="p">.</span><span class="na">contentType</span><span class="p">(</span><span class="n">MediaType</span><span class="p">.</span><span class="na">APPLICATION_JSON</span><span class="p">)</span>
<span class="w">                </span><span class="p">.</span><span class="na">content</span><span class="p">(</span><span class="n">request</span><span class="p">))</span>
<span class="w">            </span><span class="p">.</span><span class="na">andExpect</span><span class="p">(</span><span class="n">status</span><span class="p">().</span><span class="na">isCreated</span><span class="p">())</span>
<span class="w">            </span><span class="p">.</span><span class="na">andExpect</span><span class="p">(</span><span class="n">jsonPath</span><span class="p">(</span><span class="s">&quot;$.journalNumber&quot;</span><span class="p">).</span><span class="na">exists</span><span class="p">())</span>
<span class="w">            </span><span class="p">.</span><span class="na">andExpect</span><span class="p">(</span><span class="n">jsonPath</span><span class="p">(</span><span class="s">&quot;$.journalDate&quot;</span><span class="p">).</span><span class="na">value</span><span class="p">(</span><span class="s">&quot;2024-04-01&quot;</span><span class="p">))</span>
<span class="w">            </span><span class="p">.</span><span class="na">andExpect</span><span class="p">(</span><span class="n">jsonPath</span><span class="p">(</span><span class="s">&quot;$.description&quot;</span><span class="p">).</span><span class="na">value</span><span class="p">(</span><span class="s">&quot;現金売上&quot;</span><span class="p">))</span>
<span class="w">            </span><span class="p">.</span><span class="na">andExpect</span><span class="p">(</span><span class="n">jsonPath</span><span class="p">(</span><span class="s">&quot;$.lines&quot;</span><span class="p">,</span><span class="w"> </span><span class="n">hasSize</span><span class="p">(</span><span class="mi">2</span><span class="p">)));</span>
<span class="w">    </span><span class="p">}</span>

<span class="w">    </span><span class="nd">@Test</span>
<span class="w">    </span><span class="nd">@Order</span><span class="p">(</span><span class="mi">2</span><span class="p">)</span>
<span class="w">    </span><span class="nd">@DisplayName</span><span class="p">(</span><span class="s">&quot;GET /api/journals - 仕訳一覧を取得できる&quot;</span><span class="p">)</span>
<span class="w">    </span><span class="kt">void</span><span class="w"> </span><span class="nf">shouldGetAllJournals</span><span class="p">()</span><span class="w"> </span><span class="kd">throws</span><span class="w"> </span><span class="n">Exception</span><span class="w"> </span><span class="p">{</span>
<span class="w">        </span><span class="n">mockMvc</span><span class="p">.</span><span class="na">perform</span><span class="p">(</span><span class="n">get</span><span class="p">(</span><span class="s">&quot;/api/journals&quot;</span><span class="p">))</span>
<span class="w">            </span><span class="p">.</span><span class="na">andExpect</span><span class="p">(</span><span class="n">status</span><span class="p">().</span><span class="na">isOk</span><span class="p">())</span>
<span class="w">            </span><span class="p">.</span><span class="na">andExpect</span><span class="p">(</span><span class="n">jsonPath</span><span class="p">(</span><span class="s">&quot;$&quot;</span><span class="p">,</span><span class="w"> </span><span class="n">hasSize</span><span class="p">(</span><span class="n">greaterThanOrEqualTo</span><span class="p">(</span><span class="mi">1</span><span class="p">))));</span>
<span class="w">    </span><span class="p">}</span>

<span class="w">    </span><span class="nd">@Test</span>
<span class="w">    </span><span class="nd">@Order</span><span class="p">(</span><span class="mi">3</span><span class="p">)</span>
<span class="w">    </span><span class="nd">@DisplayName</span><span class="p">(</span><span class="s">&quot;GET /api/journals?startDate&amp;endDate - 期間で検索できる&quot;</span><span class="p">)</span>
<span class="w">    </span><span class="kt">void</span><span class="w"> </span><span class="nf">shouldSearchByDateRange</span><span class="p">()</span><span class="w"> </span><span class="kd">throws</span><span class="w"> </span><span class="n">Exception</span><span class="w"> </span><span class="p">{</span>
<span class="w">        </span><span class="n">mockMvc</span><span class="p">.</span><span class="na">perform</span><span class="p">(</span><span class="n">get</span><span class="p">(</span><span class="s">&quot;/api/journals&quot;</span><span class="p">)</span>
<span class="w">                </span><span class="p">.</span><span class="na">param</span><span class="p">(</span><span class="s">&quot;startDate&quot;</span><span class="p">,</span><span class="w"> </span><span class="s">&quot;2024-04-01&quot;</span><span class="p">)</span>
<span class="w">                </span><span class="p">.</span><span class="na">param</span><span class="p">(</span><span class="s">&quot;endDate&quot;</span><span class="p">,</span><span class="w"> </span><span class="s">&quot;2024-04-30&quot;</span><span class="p">))</span>
<span class="w">            </span><span class="p">.</span><span class="na">andExpect</span><span class="p">(</span><span class="n">status</span><span class="p">().</span><span class="na">isOk</span><span class="p">())</span>
<span class="w">            </span><span class="p">.</span><span class="na">andExpect</span><span class="p">(</span><span class="n">jsonPath</span><span class="p">(</span><span class="s">&quot;$&quot;</span><span class="p">).</span><span class="na">isArray</span><span class="p">());</span>
<span class="w">    </span><span class="p">}</span>

<span class="w">    </span><span class="nd">@Test</span>
<span class="w">    </span><span class="nd">@Order</span><span class="p">(</span><span class="mi">4</span><span class="p">)</span>
<span class="w">    </span><span class="nd">@DisplayName</span><span class="p">(</span><span class="s">&quot;POST /api/journals - 不均衡な仕訳は400エラー&quot;</span><span class="p">)</span>
<span class="w">    </span><span class="kt">void</span><span class="w"> </span><span class="nf">shouldReturn400ForUnbalancedEntry</span><span class="p">()</span><span class="w"> </span><span class="kd">throws</span><span class="w"> </span><span class="n">Exception</span><span class="w"> </span><span class="p">{</span>
<span class="w">        </span><span class="kd">var</span><span class="w"> </span><span class="n">request</span><span class="w"> </span><span class="o">=</span><span class="w"> </span><span class="s">&quot;&quot;&quot;</span>
<span class="s">            {</span>
<span class="s">                &quot;journalDate&quot;: &quot;2024-04-01&quot;,</span>
<span class="s">                &quot;description&quot;: &quot;不均衡仕訳&quot;,</span>
<span class="s">                &quot;lines&quot;: [</span>
<span class="s">                    {&quot;accountCode&quot;: &quot;1101&quot;, &quot;debitAmount&quot;: 10000, &quot;creditAmount&quot;: 0},</span>
<span class="s">                    {&quot;accountCode&quot;: &quot;4101&quot;, &quot;debitAmount&quot;: 0, &quot;creditAmount&quot;: 8000}</span>
<span class="s">                ]</span>
<span class="s">            }</span>
<span class="s">            &quot;&quot;&quot;</span><span class="p">;</span>

<span class="w">        </span><span class="n">mockMvc</span><span class="p">.</span><span class="na">perform</span><span class="p">(</span><span class="n">post</span><span class="p">(</span><span class="s">&quot;/api/journals&quot;</span><span class="p">)</span>
<span class="w">                </span><span class="p">.</span><span class="na">contentType</span><span class="p">(</span><span class="n">MediaType</span><span class="p">.</span><span class="na">APPLICATION_JSON</span><span class="p">)</span>
<span class="w">                </span><span class="p">.</span><span class="na">content</span><span class="p">(</span><span class="n">request</span><span class="p">))</span>
<span class="w">            </span><span class="p">.</span><span class="na">andExpect</span><span class="p">(</span><span class="n">status</span><span class="p">().</span><span class="na">isBadRequest</span><span class="p">())</span>
<span class="w">            </span><span class="p">.</span><span class="na">andExpect</span><span class="p">(</span><span class="n">jsonPath</span><span class="p">(</span><span class="s">&quot;$.code&quot;</span><span class="p">).</span><span class="na">value</span><span class="p">(</span><span class="s">&quot;VALIDATION_ERROR&quot;</span><span class="p">));</span>
<span class="w">    </span><span class="p">}</span>
<span class="p">}</span>
</code></pre></div>
<h3 id="_9">テストデータファクトリ<a class="headerlink" href="#_9" title="Permanent link">&para;</a></h3>
<div class="highlight"><pre><span></span><code><span class="kn">package</span><span class="w"> </span><span class="nn">com.example.accounting.test</span><span class="p">;</span>

<span class="kn">import</span><span class="w"> </span><span class="nn">com.example.accounting.domain.model.account.*</span><span class="p">;</span>
<span class="kn">import</span><span class="w"> </span><span class="nn">com.example.accounting.domain.model.journal.*</span><span class="p">;</span>

<span class="kn">import</span><span class="w"> </span><span class="nn">java.math.BigDecimal</span><span class="p">;</span>
<span class="kn">import</span><span class="w"> </span><span class="nn">java.time.LocalDate</span><span class="p">;</span>
<span class="kn">import</span><span class="w"> </span><span class="nn">java.util.List</span><span class="p">;</span>

<span class="cm">/**</span>
<span class="cm"> * テストデータファクトリ</span>
<span class="cm"> */</span>
<span class="kd">public</span><span class="w"> </span><span class="kd">class</span> <span class="nc">TestDataFactory</span><span class="w"> </span><span class="p">{</span>

<span class="w">    </span><span class="cm">/**</span>
<span class="cm">     * テスト用の勘定科目を作成</span>
<span class="cm">     */</span>
<span class="w">    </span><span class="kd">public</span><span class="w"> </span><span class="kd">static</span><span class="w"> </span><span class="n">Account</span><span class="w"> </span><span class="nf">createAccount</span><span class="p">(</span>
<span class="w">            </span><span class="n">String</span><span class="w"> </span><span class="n">code</span><span class="p">,</span><span class="w"> </span><span class="n">String</span><span class="w"> </span><span class="n">name</span><span class="p">,</span><span class="w"> </span><span class="n">AccountType</span><span class="w"> </span><span class="n">type</span><span class="p">)</span><span class="w"> </span><span class="p">{</span>
<span class="w">        </span><span class="k">return</span><span class="w"> </span><span class="n">Account</span><span class="p">.</span><span class="na">create</span><span class="p">(</span><span class="n">code</span><span class="p">,</span><span class="w"> </span><span class="n">name</span><span class="p">,</span><span class="w"> </span><span class="n">type</span><span class="p">);</span>
<span class="w">    </span><span class="p">}</span>

<span class="w">    </span><span class="cm">/**</span>
<span class="cm">     * テスト用の仕訳を作成</span>
<span class="cm">     */</span>
<span class="w">    </span><span class="kd">public</span><span class="w"> </span><span class="kd">static</span><span class="w"> </span><span class="n">JournalEntry</span><span class="w"> </span><span class="nf">createJournalEntry</span><span class="p">(</span><span class="n">String</span><span class="w"> </span><span class="n">journalNumber</span><span class="p">)</span><span class="w"> </span><span class="p">{</span>
<span class="w">        </span><span class="n">List</span><span class="o">&lt;</span><span class="n">JournalLine</span><span class="o">&gt;</span><span class="w"> </span><span class="n">lines</span><span class="w"> </span><span class="o">=</span><span class="w"> </span><span class="n">List</span><span class="p">.</span><span class="na">of</span><span class="p">(</span>
<span class="w">            </span><span class="n">JournalLine</span><span class="p">.</span><span class="na">debit</span><span class="p">(</span><span class="s">&quot;1101&quot;</span><span class="p">,</span><span class="w"> </span><span class="k">new</span><span class="w"> </span><span class="n">BigDecimal</span><span class="p">(</span><span class="s">&quot;10000&quot;</span><span class="p">)),</span>
<span class="w">            </span><span class="n">JournalLine</span><span class="p">.</span><span class="na">credit</span><span class="p">(</span><span class="s">&quot;4101&quot;</span><span class="p">,</span><span class="w"> </span><span class="k">new</span><span class="w"> </span><span class="n">BigDecimal</span><span class="p">(</span><span class="s">&quot;10000&quot;</span><span class="p">))</span>
<span class="w">        </span><span class="p">);</span>

<span class="w">        </span><span class="k">return</span><span class="w"> </span><span class="n">JournalEntry</span><span class="p">.</span><span class="na">builder</span><span class="p">()</span>
<span class="w">            </span><span class="p">.</span><span class="na">journalNumber</span><span class="p">(</span><span class="n">journalNumber</span><span class="p">)</span>
<span class="w">            </span><span class="p">.</span><span class="na">journalDate</span><span class="p">(</span><span class="n">LocalDate</span><span class="p">.</span><span class="na">of</span><span class="p">(</span><span class="mi">2024</span><span class="p">,</span><span class="w"> </span><span class="mi">4</span><span class="p">,</span><span class="w"> </span><span class="mi">1</span><span class="p">))</span>
<span class="w">            </span><span class="p">.</span><span class="na">description</span><span class="p">(</span><span class="s">&quot;テスト仕訳&quot;</span><span class="p">)</span>
<span class="w">            </span><span class="p">.</span><span class="na">status</span><span class="p">(</span><span class="n">JournalStatus</span><span class="p">.</span><span class="na">DRAFT</span><span class="p">)</span>
<span class="w">            </span><span class="p">.</span><span class="na">lines</span><span class="p">(</span><span class="n">lines</span><span class="p">)</span>
<span class="w">            </span><span class="p">.</span><span class="na">build</span><span class="p">();</span>
<span class="w">    </span><span class="p">}</span>

<span class="w">    </span><span class="cm">/**</span>
<span class="cm">     * テスト用の複合仕訳を作成（複数の借方・貸方）</span>
<span class="cm">     */</span>
<span class="w">    </span><span class="kd">public</span><span class="w"> </span><span class="kd">static</span><span class="w"> </span><span class="n">JournalEntry</span><span class="w"> </span><span class="nf">createCompoundJournalEntry</span><span class="p">(</span><span class="n">String</span><span class="w"> </span><span class="n">journalNumber</span><span class="p">)</span><span class="w"> </span><span class="p">{</span>
<span class="w">        </span><span class="n">List</span><span class="o">&lt;</span><span class="n">JournalLine</span><span class="o">&gt;</span><span class="w"> </span><span class="n">lines</span><span class="w"> </span><span class="o">=</span><span class="w"> </span><span class="n">List</span><span class="p">.</span><span class="na">of</span><span class="p">(</span>
<span class="w">            </span><span class="n">JournalLine</span><span class="p">.</span><span class="na">debit</span><span class="p">(</span><span class="s">&quot;1101&quot;</span><span class="p">,</span><span class="w"> </span><span class="k">new</span><span class="w"> </span><span class="n">BigDecimal</span><span class="p">(</span><span class="s">&quot;5000&quot;</span><span class="p">)),</span><span class="w">   </span><span class="c1">// 現金</span>
<span class="w">            </span><span class="n">JournalLine</span><span class="p">.</span><span class="na">debit</span><span class="p">(</span><span class="s">&quot;1121&quot;</span><span class="p">,</span><span class="w"> </span><span class="k">new</span><span class="w"> </span><span class="n">BigDecimal</span><span class="p">(</span><span class="s">&quot;5000&quot;</span><span class="p">)),</span><span class="w">   </span><span class="c1">// 売掛金</span>
<span class="w">            </span><span class="n">JournalLine</span><span class="p">.</span><span class="na">credit</span><span class="p">(</span><span class="s">&quot;4101&quot;</span><span class="p">,</span><span class="w"> </span><span class="k">new</span><span class="w"> </span><span class="n">BigDecimal</span><span class="p">(</span><span class="s">&quot;9000&quot;</span><span class="p">)),</span><span class="w">  </span><span class="c1">// 売上高</span>
<span class="w">            </span><span class="n">JournalLine</span><span class="p">.</span><span class="na">credit</span><span class="p">(</span><span class="s">&quot;4102&quot;</span><span class="p">,</span><span class="w"> </span><span class="k">new</span><span class="w"> </span><span class="n">BigDecimal</span><span class="p">(</span><span class="s">&quot;1000&quot;</span><span class="p">))</span><span class="w">   </span><span class="c1">// 受取利息</span>
<span class="w">        </span><span class="p">);</span>

<span class="w">        </span><span class="k">return</span><span class="w"> </span><span class="n">JournalEntry</span><span class="p">.</span><span class="na">builder</span><span class="p">()</span>
<span class="w">            </span><span class="p">.</span><span class="na">journalNumber</span><span class="p">(</span><span class="n">journalNumber</span><span class="p">)</span>
<span class="w">            </span><span class="p">.</span><span class="na">journalDate</span><span class="p">(</span><span class="n">LocalDate</span><span class="p">.</span><span class="na">of</span><span class="p">(</span><span class="mi">2024</span><span class="p">,</span><span class="w"> </span><span class="mi">4</span><span class="p">,</span><span class="w"> </span><span class="mi">1</span><span class="p">))</span>
<span class="w">            </span><span class="p">.</span><span class="na">description</span><span class="p">(</span><span class="s">&quot;複合仕訳テスト&quot;</span><span class="p">)</span>
<span class="w">            </span><span class="p">.</span><span class="na">status</span><span class="p">(</span><span class="n">JournalStatus</span><span class="p">.</span><span class="na">DRAFT</span><span class="p">)</span>
<span class="w">            </span><span class="p">.</span><span class="na">lines</span><span class="p">(</span><span class="n">lines</span><span class="p">)</span>
<span class="w">            </span><span class="p">.</span><span class="na">build</span><span class="p">();</span>
<span class="w">    </span><span class="p">}</span>

<span class="w">    </span><span class="cm">/**</span>
<span class="cm">     * テスト用の財務データを作成</span>
<span class="cm">     */</span>
<span class="w">    </span><span class="kd">public</span><span class="w"> </span><span class="kd">static</span><span class="w"> </span><span class="n">FinancialData</span><span class="w"> </span><span class="nf">createFinancialData</span><span class="p">(</span><span class="kt">int</span><span class="w"> </span><span class="n">fiscalYear</span><span class="p">)</span><span class="w"> </span><span class="p">{</span>
<span class="w">        </span><span class="k">return</span><span class="w"> </span><span class="k">new</span><span class="w"> </span><span class="n">FinancialData</span><span class="p">(</span>
<span class="w">            </span><span class="n">fiscalYear</span><span class="p">,</span>
<span class="w">            </span><span class="k">new</span><span class="w"> </span><span class="n">BigDecimal</span><span class="p">(</span><span class="s">&quot;100000000&quot;</span><span class="p">),</span><span class="w">   </span><span class="c1">// 売上高</span>
<span class="w">            </span><span class="k">new</span><span class="w"> </span><span class="n">BigDecimal</span><span class="p">(</span><span class="s">&quot;60000000&quot;</span><span class="p">),</span><span class="w">    </span><span class="c1">// 売上原価</span>
<span class="w">            </span><span class="k">new</span><span class="w"> </span><span class="n">BigDecimal</span><span class="p">(</span><span class="s">&quot;40000000&quot;</span><span class="p">),</span><span class="w">    </span><span class="c1">// 売上総利益</span>
<span class="w">            </span><span class="k">new</span><span class="w"> </span><span class="n">BigDecimal</span><span class="p">(</span><span class="s">&quot;15000000&quot;</span><span class="p">),</span><span class="w">    </span><span class="c1">// 営業利益</span>
<span class="w">            </span><span class="k">new</span><span class="w"> </span><span class="n">BigDecimal</span><span class="p">(</span><span class="s">&quot;15000000&quot;</span><span class="p">),</span><span class="w">    </span><span class="c1">// 経常利益</span>
<span class="w">            </span><span class="k">new</span><span class="w"> </span><span class="n">BigDecimal</span><span class="p">(</span><span class="s">&quot;10000000&quot;</span><span class="p">),</span><span class="w">    </span><span class="c1">// 当期純利益</span>
<span class="w">            </span><span class="k">new</span><span class="w"> </span><span class="n">BigDecimal</span><span class="p">(</span><span class="s">&quot;80000000&quot;</span><span class="p">),</span><span class="w">    </span><span class="c1">// 総資産</span>
<span class="w">            </span><span class="k">new</span><span class="w"> </span><span class="n">BigDecimal</span><span class="p">(</span><span class="s">&quot;20000000&quot;</span><span class="p">),</span><span class="w">    </span><span class="c1">// 有形固定資産</span>
<span class="w">            </span><span class="k">new</span><span class="w"> </span><span class="n">BigDecimal</span><span class="p">(</span><span class="s">&quot;60000000&quot;</span><span class="p">),</span><span class="w">    </span><span class="c1">// 流動資産</span>
<span class="w">            </span><span class="k">new</span><span class="w"> </span><span class="n">BigDecimal</span><span class="p">(</span><span class="s">&quot;20000000&quot;</span><span class="p">),</span><span class="w">    </span><span class="c1">// 流動負債</span>
<span class="w">            </span><span class="k">new</span><span class="w"> </span><span class="n">BigDecimal</span><span class="p">(</span><span class="s">&quot;50000000&quot;</span><span class="p">),</span><span class="w">    </span><span class="c1">// 当座資産</span>
<span class="w">            </span><span class="k">new</span><span class="w"> </span><span class="n">BigDecimal</span><span class="p">(</span><span class="s">&quot;60000000&quot;</span><span class="p">),</span><span class="w">    </span><span class="c1">// 純資産</span>
<span class="w">            </span><span class="k">new</span><span class="w"> </span><span class="n">BigDecimal</span><span class="p">(</span><span class="s">&quot;10000000&quot;</span><span class="p">),</span><span class="w">    </span><span class="c1">// 棚卸資産</span>
<span class="w">            </span><span class="k">new</span><span class="w"> </span><span class="n">BigDecimal</span><span class="p">(</span><span class="s">&quot;15000000&quot;</span><span class="p">)</span><span class="w">     </span><span class="c1">// 売上債権</span>
<span class="w">        </span><span class="p">);</span>
<span class="w">    </span><span class="p">}</span>
<span class="p">}</span>
</code></pre></div>
<hr />
<h2 id="224">22.4 受け入れテスト<a class="headerlink" href="#224" title="Permanent link">&para;</a></h2>
<h3 id="gherkin">Gherkin による仕様記述<a class="headerlink" href="#gherkin" title="Permanent link">&para;</a></h3>
<p>受け入れテストは、Gherkin 記法を使ってビジネス要件を記述します。日本語で記述することで、非エンジニアも理解しやすくなります。</p>
<div class="highlight"><pre><span></span><code><span class="c"># language: ja</span>
<span class="k">機能:</span><span class="nf"> 仕訳管理</span>
<span class="nf">  経理担当者として</span>
<span class="nf">  仕訳業務を管理したい</span>
<span class="nf">  なぜなら財務データの正確な記録が必要だから</span>

<span class="nf">  </span><span class="k">背景:</span>
<span class="k">    前提</span><span class="nf">: 経理担当者としてログインしている</span>
<span class="nf">    </span><span class="k">前提</span><span class="nf">: 以下の勘定科目が登録されている</span>
<span class="k">      |</span><span class="s"> コード</span><span class="k"> |</span><span class="s"> 名称</span><span class="k">     |</span><span class="s"> 種別</span><span class="k"> |</span>
<span class="k">      |</span><span class="s"> 1101</span><span class="k">   |</span><span class="s"> 現金</span><span class="k">     |</span><span class="s"> 資産</span><span class="k"> |</span>
<span class="k">      |</span><span class="s"> 1121</span><span class="k">   |</span><span class="s"> 売掛金</span><span class="k">   |</span><span class="s"> 資産</span><span class="k"> |</span>
<span class="k">      |</span><span class="s"> 4101</span><span class="k">   |</span><span class="s"> 売上高</span><span class="k">   |</span><span class="s"> 収益</span><span class="k"> |</span>
<span class="k">      |</span><span class="s"> 5101</span><span class="k">   |</span><span class="s"> 仕入高</span><span class="k">   |</span><span class="s"> 費用</span><span class="k"> |</span>

<span class="nf">  </span><span class="k">シナリオ:</span><span class="nf"> 現金売上の仕訳を登録する</span>
<span class="k">    もし</span><span class="nf">: 以下の仕訳を登録する</span>
<span class="k">      |</span><span class="s"> 日付</span><span class="k">       |</span><span class="s"> 摘要</span><span class="k">     |</span>
<span class="k">      |</span><span class="s"> 2024-04-01</span><span class="k"> |</span><span class="s"> 現金売上</span><span class="k"> |</span>
<span class="nf">    </span><span class="k">かつ</span><span class="nf">: 以下の仕訳明細を入力する</span>
<span class="k">      |</span><span class="s"> 勘定科目</span><span class="k"> |</span><span class="s"> 借方金額</span><span class="k"> |</span><span class="s"> 貸方金額</span><span class="k"> |</span>
<span class="k">      |</span><span class="s"> 現金</span><span class="k">     |</span><span class="s"> 10000</span><span class="k">    |</span><span class="s"> 0</span><span class="k">        |</span>
<span class="k">      |</span><span class="s"> 売上高</span><span class="k">   |</span><span class="s"> 0</span><span class="k">        |</span><span class="s"> 10000</span><span class="k">    |</span>
<span class="nf">    </span><span class="k">ならば</span><span class="nf">: &quot;</span><span class="s">仕訳を登録しました</span><span class="nf">&quot; が表示される</span>
<span class="nf">    </span><span class="k">かつ</span><span class="nf">: 借方合計と貸方合計が一致している</span>

<span class="nf">  </span><span class="k">シナリオ:</span><span class="nf"> 不均衡な仕訳は登録できない</span>
<span class="k">    もし</span><span class="nf">: 以下の仕訳を登録する</span>
<span class="k">      |</span><span class="s"> 日付</span><span class="k">       |</span><span class="s"> 摘要</span><span class="k">     |</span>
<span class="k">      |</span><span class="s"> 2024-04-01</span><span class="k"> |</span><span class="s"> 不均衡</span><span class="k">   |</span>
<span class="nf">    </span><span class="k">かつ</span><span class="nf">: 以下の仕訳明細を入力する</span>
<span class="k">      |</span><span class="s"> 勘定科目</span><span class="k"> |</span><span class="s"> 借方金額</span><span class="k"> |</span><span class="s"> 貸方金額</span><span class="k"> |</span>
<span class="k">      |</span><span class="s"> 現金</span><span class="k">     |</span><span class="s"> 10000</span><span class="k">    |</span><span class="s"> 0</span><span class="k">        |</span>
<span class="k">      |</span><span class="s"> 売上高</span><span class="k">   |</span><span class="s"> 0</span><span class="k">        |</span><span class="s"> 8000</span><span class="k">     |</span>
<span class="nf">    </span><span class="k">ならば</span><span class="nf">: &quot;</span><span class="s">借方と貸方が一致しません</span><span class="nf">&quot; というエラーが表示される</span>

<span class="nf">  </span><span class="k">シナリオ:</span><span class="nf"> 仕訳を承認する</span>
<span class="k">    前提</span><span class="nf">: 仕訳番号 &quot;</span><span class="s">JE00000001</span><span class="nf">&quot; の下書き仕訳が存在する</span>
<span class="nf">    </span><span class="k">もし</span><span class="nf">: 仕訳番号 &quot;</span><span class="s">JE00000001</span><span class="nf">&quot; を承認する</span>
<span class="nf">    </span><span class="k">ならば</span><span class="nf">: &quot;</span><span class="s">仕訳を承認しました</span><span class="nf">&quot; が表示される</span>
<span class="nf">    </span><span class="k">かつ</span><span class="nf">: 仕訳のステータスが &quot;</span><span class="s">承認済</span><span class="nf">&quot; になっている</span>
</code></pre></div>
<p><img src="data:image/svg+xml;base64,PHN2ZyB4bWxucz0iaHR0cDovL3d3dy53My5vcmcvMjAwMC9zdmciIHhtbG5zOnhsaW5rPSJodHRwOi8vd3d3LnczLm9yZy8xOTk5L3hsaW5rIiBjb250ZW50U3R5bGVUeXBlPSJ0ZXh0L2NzcyIgZGF0YS1kaWFncmFtLXR5cGU9IkRFU0NSSVBUSU9OIiBoZWlnaHQ9IjU5MnB4IiBwcmVzZXJ2ZUFzcGVjdFJhdGlvPSJub25lIiBzdHlsZT0id2lkdGg6NDA1cHg7aGVpZ2h0OjU5MnB4O2JhY2tncm91bmQ6I0ZGRkZGRjsiIHZlcnNpb249IjEuMSIgdmlld0JveD0iMCAwIDQwNSA1OTIiIHdpZHRoPSI0MDVweCIgem9vbUFuZFBhbj0ibWFnbmlmeSI+PHRpdGxlPkdoZXJraW4gJiMzNTM1MjsmIzI3ODYxOyYjMTIzOTg7JiMyNzA4MzsmIzM2ODk2OzwvdGl0bGU+PGRlZnMvPjxnPjxnIGNsYXNzPSJ0aXRsZSIgZGF0YS1zb3VyY2UtbGluZT0iMSI+PHRleHQgZmlsbD0iIzAwMDAwMCIgZm9udC1mYW1pbHk9InNhbnMtc2VyaWYiIGZvbnQtc2l6ZT0iMTQiIGZvbnQtd2VpZ2h0PSJib2xkIiBsZW5ndGhBZGp1c3Q9InNwYWNpbmciIHRleHRMZW5ndGg9IjEzNi44MDczIiB4PSIxMjcuMDk2MyIgeT0iMjIuOTk1MSI+R2hlcmtpbiAmIzM1MzUyOyYjMjc4NjE7JiMxMjM5ODsmIzI3MDgzOyYjMzY4OTY7PC90ZXh0PjwvZz48IS0tY2x1c3RlciBGZWF0dXJlID8/Pz8tLT48ZyBjbGFzcz0iY2x1c3RlciIgZGF0YS1lbnRpdHk9IkZlYXR1cmUgLi4uLiIgZGF0YS1zb3VyY2UtbGluZT0iNCIgZGF0YS11aWQ9ImVudDAwMDIiIGlkPSJjbHVzdGVyX0ZlYXR1cmUgLi4uLiI+PHJlY3QgZmlsbD0ibm9uZSIgaGVpZ2h0PSI1NDIuNTUiIHJ4PSIyLjUiIHJ5PSIyLjUiIHN0eWxlPSJzdHJva2U6IzE4MTgxODtzdHJva2Utd2lkdGg6MTsiIHdpZHRoPSIzOTIiIHg9IjciIHk9IjQ0LjI5NjkiLz48dGV4dCBmaWxsPSIjMDAwMDAwIiBmb250LWZhbWlseT0ic2Fucy1zZXJpZiIgZm9udC1zaXplPSIxNCIgZm9udC13ZWlnaHQ9ImJvbGQiIGxlbmd0aEFkanVzdD0ic3BhY2luZyIgdGV4dExlbmd0aD0iMTIyLjQzODIiIHg9IjE0MS43ODA5IiB5PSI1OS4yOTIiPkZlYXR1cmUgJiMxMjUwMTsmIzEyNDQ5OyYjMTI0NTI7JiMxMjUyMzs8L3RleHQ+PC9nPjwhLS1jbHVzdGVyIHNjZW5hcmlvLS0+PGcgY2xhc3M9ImNsdXN0ZXIiIGRhdGEtZW50aXR5PSJzY2VuYXJpbyIgZGF0YS1zb3VyY2UtbGluZT0iMTgiIGRhdGEtdWlkPSJlbnQwMDExIiBpZD0iY2x1c3Rlcl9zY2VuYXJpbyI+PHJlY3QgZmlsbD0iI0ZGRkZFMCIgaGVpZ2h0PSIyOTUuODkiIHJ4PSIyLjUiIHJ5PSIyLjUiIHN0eWxlPSJzdHJva2U6IzE4MTgxODtzdHJva2Utd2lkdGg6MTsiIHdpZHRoPSIxNzEiIHg9IjM5IiB5PSIyNTguOTU2OSIvPjx0ZXh0IGZpbGw9IiMwMDAwMDAiIGZvbnQtZmFtaWx5PSJzYW5zLXNlcmlmIiBmb250LXNpemU9IjE0IiBmb250LXdlaWdodD0iYm9sZCIgbGVuZ3RoQWRqdXN0PSJzcGFjaW5nIiB0ZXh0TGVuZ3RoPSIxNDIuMjgzIiB4PSI1My4zNTg1IiB5PSIyNzMuOTUyIj4mIzEyNDcxOyYjMTI0OTA7JiMxMjUyMjsmIzEyNDU4OyAoU2NlbmFyaW8pPC90ZXh0PjwvZz48IS0tZW50aXR5IGZlYXR1cmUtLT48ZyBjbGFzcz0iZW50aXR5IiBkYXRhLWVudGl0eT0iZmVhdHVyZSIgZGF0YS1zb3VyY2UtbGluZT0iNSIgZGF0YS11aWQ9ImVudDAwMDMiIGlkPSJlbnRpdHlfZmVhdHVyZSI+PHJlY3QgZmlsbD0iI0FERDhFNiIgaGVpZ2h0PSIzNi4yOTY5IiByeD0iMi41IiByeT0iMi41IiBzdHlsZT0ic3Ryb2tlOiMxODE4MTg7c3Ryb2tlLXdpZHRoOjAuNTsiIHdpZHRoPSIxMTcuMzUwNSIgeD0iMzguMzIiIHk9IjgxLjI3NjkiLz48dGV4dCBmaWxsPSIjMDAwMDAwIiBmb250LWZhbWlseT0ic2Fucy1zZXJpZiIgZm9udC1zaXplPSIxNCIgbGVuZ3RoQWRqdXN0PSJzcGFjaW5nIiB0ZXh0TGVuZ3RoPSI5Ny4zNTA1IiB4PSI0OC4zMiIgeT0iMTA0LjI3MiI+JiMyNzIzMTsmIzMzMDIxOyAoRmVhdHVyZSk8L3RleHQ+PC9nPjxnIGNsYXNzPSJlbnRpdHkiIGRhdGEtZW50aXR5PSJHTU40IiBkYXRhLXNvdXJjZS1saW5lPSI3IiBkYXRhLXVpZD0iZW50MDAwNSIgaWQ9ImVudGl0eV9HTU40Ij48cGF0aCBkPSJNMTkxLDc5LjI5NjkgTDE5MSw5NS40MjY5IEwxNTYuMTIsOTkuNDI2OSBMMTkxLDEwMy40MjY5IEwxOTEsMTE5LjU2MjUgQTAsMCAwIDAgMCAxOTEsMTE5LjU2MjUgTDM1NS4wMDAyLDExOS41NjI1IEEwLDAgMCAwIDAgMzU1LjAwMDIsMTE5LjU2MjUgTDM1NS4wMDAyLDg5LjI5NjkgTDM0NS4wMDAyLDc5LjI5NjkgTDE5MSw3OS4yOTY5IEEwLDAgMCAwIDAgMTkxLDc5LjI5NjkiIGZpbGw9IiNGRUZGREQiIHN0eWxlPSJzdHJva2U6IzE4MTgxODtzdHJva2Utd2lkdGg6MC41OyIvPjxwYXRoIGQ9Ik0zNDUuMDAwMiw3OS4yOTY5IEwzNDUuMDAwMiw4OS4yOTY5IEwzNTUuMDAwMiw4OS4yOTY5IEwzNDUuMDAwMiw3OS4yOTY5IiBmaWxsPSIjRkVGRkREIiBzdHlsZT0ic3Ryb2tlOiMxODE4MTg7c3Ryb2tlLXdpZHRoOjAuNTsiLz48dGV4dCBmaWxsPSIjMDAwMDAwIiBmb250LWZhbWlseT0ic2Fucy1zZXJpZiIgZm9udC1zaXplPSIxMyIgbGVuZ3RoQWRqdXN0PSJzcGFjaW5nIiB0ZXh0TGVuZ3RoPSI2NS4wMDAxIiB4PSIxOTciIHk9Ijk2LjM2MzgiPiYjMjcyMzE7JiMzMzAyMTsmIzEyMzk4OyYjMzU1MDA7JiMyNjEyNjs8L3RleHQ+PHRleHQgZmlsbD0iIzAwMDAwMCIgZm9udC1mYW1pbHk9InNhbnMtc2VyaWYiIGZvbnQtc2l6ZT0iMTMiIGxlbmd0aEFkanVzdD0ic3BhY2luZyIgdGV4dExlbmd0aD0iMTQzLjAwMDIiIHg9IjE5NyIgeT0iMTExLjQ5NjYiPiYjMTI1MTg7JiMxMjU0MDsmIzEyNDcwOyYjMTI1NDA7JiMxMjQ3MzsmIzEyNDg4OyYjMTI1NDA7JiMxMjUyMjsmIzEyNTQwOyYjMjQ0MTg7JiMyNDMzNTs8L3RleHQ+PC9nPjwhLS1lbnRpdHkgYmFja2dyb3VuZC0tPjxnIGNsYXNzPSJlbnRpdHkiIGRhdGEtZW50aXR5PSJiYWNrZ3JvdW5kIiBkYXRhLXNvdXJjZS1saW5lPSIxMSIgZGF0YS11aWQ9ImVudDAwMDciIGlkPSJlbnRpdHlfYmFja2dyb3VuZCI+PHJlY3QgZmlsbD0iIzkwRUU5MCIgaGVpZ2h0PSIzNi4yOTY5IiByeD0iMi41IiByeT0iMi41IiBzdHlsZT0ic3Ryb2tlOiMxODE4MTg7c3Ryb2tlLXdpZHRoOjAuNTsiIHdpZHRoPSIxNDcuMjAzIiB4PSIyMy40IiB5PSIxODkuMTA2OSIvPjx0ZXh0IGZpbGw9IiMwMDAwMDAiIGZvbnQtZmFtaWx5PSJzYW5zLXNlcmlmIiBmb250LXNpemU9IjE0IiBsZW5ndGhBZGp1c3Q9InNwYWNpbmciIHRleHRMZW5ndGg9IjEyNy4yMDMiIHg9IjMzLjQiIHk9IjIxMi4xMDIiPiYjMzI5NzI7JiMyNjIyMzsgKEJhY2tncm91bmQpPC90ZXh0PjwvZz48ZyBjbGFzcz0iZW50aXR5IiBkYXRhLWVudGl0eT0iR01OOCIgZGF0YS1zb3VyY2UtbGluZT0iMTMiIGRhdGEtdWlkPSJlbnQwMDA5IiBpZD0iZW50aXR5X0dNTjgiPjxwYXRoIGQ9Ik0yMDUuNSwxNzkuNTU2OSBMMjA1LjUsMjAzLjI1NjkgTDE3MC44OCwyMDcuMjU2OSBMMjA1LjUsMjExLjI1NjkgTDIwNS41LDIzNC45NTUzIEEwLDAgMCAwIDAgMjA1LjUsMjM0Ljk1NTMgTDM4Mi41MDAyLDIzNC45NTUzIEEwLDAgMCAwIDAgMzgyLjUwMDIsMjM0Ljk1NTMgTDM4Mi41MDAyLDE4OS41NTY5IEwzNzIuNTAwMiwxNzkuNTU2OSBMMjA1LjUsMTc5LjU1NjkgQTAsMCAwIDAgMCAyMDUuNSwxNzkuNTU2OSIgZmlsbD0iI0ZFRkZERCIgc3R5bGU9InN0cm9rZTojMTgxODE4O3N0cm9rZS13aWR0aDowLjU7Ii8+PHBhdGggZD0iTTM3Mi41MDAyLDE3OS41NTY5IEwzNzIuNTAwMiwxODkuNTU2OSBMMzgyLjUwMDIsMTg5LjU1NjkgTDM3Mi41MDAyLDE3OS41NTY5IiBmaWxsPSIjRkVGRkREIiBzdHlsZT0ic3Ryb2tlOiMxODE4MTg7c3Ryb2tlLXdpZHRoOjAuNTsiLz48dGV4dCBmaWxsPSIjMDAwMDAwIiBmb250LWZhbWlseT0ic2Fucy1zZXJpZiIgZm9udC1zaXplPSIxMyIgbGVuZ3RoQWRqdXN0PSJzcGFjaW5nIiB0ZXh0TGVuZ3RoPSIxNTYuMDAwMiIgeD0iMjExLjUiIHk9IjE5Ni42MjM4Ij4mIzIwODQwOyYjMTI0NzE7JiMxMjQ5MDsmIzEyNTIyOyYjMTI0NTg7JiMyMDg0OTsmIzM2ODkwOyYjMTIzOTg7JiMyMTA2OTsmIzI1NTUyOyYjMjY0NjU7JiMyMDIxNDs8L3RleHQ+PHRleHQgZmlsbD0iIzAwMDAwMCIgZm9udC1mYW1pbHk9InNhbnMtc2VyaWYiIGZvbnQtc2l6ZT0iMTMiIGxlbmd0aEFkanVzdD0ic3BhY2luZyIgdGV4dExlbmd0aD0iODYuODIzMyIgeD0iMjExLjUiIHk9IjIxMS43NTY2Ij4tICYjMTI1MjU7JiMxMjQ2NDsmIzEyNDUyOyYjMTI1MzE7JiMyOTM2NjsmIzI0OTA3OzwvdGV4dD48dGV4dCBmaWxsPSIjMDAwMDAwIiBmb250LWZhbWlseT0ic2Fucy1zZXJpZiIgZm9udC1zaXplPSIxMyIgbGVuZ3RoQWRqdXN0PSJzcGFjaW5nIiB0ZXh0TGVuZ3RoPSIxMjUuODIzNCIgeD0iMjExLjUiIHk9IjIyNi44ODk0Ij4tICYjMTI1MTA7JiMxMjQ3MzsmIzEyNDc5OyYjMTI0ODc7JiMxMjU0MDsmIzEyNDc5OyYjMTIzOTg7JiMyODMxMDsmIzIwNjMzOzwvdGV4dD48L2c+PCEtLWVudGl0eSBnaXZlbi0tPjxnIGNsYXNzPSJlbnRpdHkiIGRhdGEtZW50aXR5PSJnaXZlbiIgZGF0YS1zb3VyY2UtbGluZT0iMTkiIGRhdGEtdWlkPSJlbnQwMDEyIiBpZD0iZW50aXR5X2dpdmVuIj48cmVjdCBmaWxsPSIjRjFGMUYxIiBoZWlnaHQ9IjM2LjI5NjkiIHJ4PSIyLjUiIHJ5PSIyLjUiIHN0eWxlPSJzdHJva2U6IzE4MTgxODtzdHJva2Utd2lkdGg6MC41OyIgd2lkdGg9IjEwMy44ODM3IiB4PSI2My4wNiIgeT0iMzAxLjk1NjkiLz48dGV4dCBmaWxsPSIjMDAwMDAwIiBmb250LWZhbWlseT0ic2Fucy1zZXJpZiIgZm9udC1zaXplPSIxNCIgbGVuZ3RoQWRqdXN0PSJzcGFjaW5nIiB0ZXh0TGVuZ3RoPSI4My44ODM3IiB4PSI3My4wNiIgeT0iMzI0Ljk1MiI+JiMyMTA2OTsmIzI1NTUyOyAoR2l2ZW4pPC90ZXh0PjwvZz48IS0tZW50aXR5IHdoZW4tLT48ZyBjbGFzcz0iZW50aXR5IiBkYXRhLWVudGl0eT0id2hlbiIgZGF0YS1zb3VyY2UtbGluZT0iMjAiIGRhdGEtdWlkPSJlbnQwMDEzIiBpZD0iZW50aXR5X3doZW4iPjxyZWN0IGZpbGw9IiNGMUYxRjEiIGhlaWdodD0iMzYuMjk2OSIgcng9IjIuNSIgcnk9IjIuNSIgc3R5bGU9InN0cm9rZTojMTgxODE4O3N0cm9rZS13aWR0aDowLjU7IiB3aWR0aD0iMTAzLjU3NiIgeD0iNjUuMjEiIHk9IjM5OC4yNTY5Ii8+PHRleHQgZmlsbD0iIzAwMDAwMCIgZm9udC1mYW1pbHk9InNhbnMtc2VyaWYiIGZvbnQtc2l6ZT0iMTQiIGxlbmd0aEFkanVzdD0ic3BhY2luZyIgdGV4dExlbmd0aD0iODMuNTc2IiB4PSI3NS4yMSIgeT0iNDIxLjI1MiI+JiMxMjQxODsmIzEyMzc1OyAoV2hlbik8L3RleHQ+PC9nPjwhLS1lbnRpdHkgdGhlbi0tPjxnIGNsYXNzPSJlbnRpdHkiIGRhdGEtZW50aXR5PSJ0aGVuIiBkYXRhLXNvdXJjZS1saW5lPSIyMSIgZGF0YS11aWQ9ImVudDAwMTQiIGlkPSJlbnRpdHlfdGhlbiI+PHJlY3QgZmlsbD0iI0YxRjFGMSIgaGVpZ2h0PSIzNi4yOTY5IiByeD0iMi41IiByeT0iMi41IiBzdHlsZT0ic3Ryb2tlOiMxODE4MTg7c3Ryb2tlLXdpZHRoOjAuNTsiIHdpZHRoPSIxMTIuMjg1IiB4PSI2Mi44NiIgeT0iNDk0LjU0NjkiLz48dGV4dCBmaWxsPSIjMDAwMDAwIiBmb250LWZhbWlseT0ic2Fucy1zZXJpZiIgZm9udC1zaXplPSIxNCIgbGVuZ3RoQWRqdXN0PSJzcGFjaW5nIiB0ZXh0TGVuZ3RoPSI5Mi4yODUiIHg9IjcyLjg2IiB5PSI1MTcuNTQyIj4mIzEyMzk0OyYjMTI0MjU7JiMxMjQwMDsgKFRoZW4pPC90ZXh0PjwvZz48IS0tbGluayBmZWF0dXJlIHRvIGJhY2tncm91bmQtLT48IS0tbGluayBiYWNrZ3JvdW5kIHRvIHNjZW5hcmlvLS0+PCEtLWxpbmsgZ2l2ZW4gdG8gd2hlbi0tPjwhLS1saW5rIHdoZW4gdG8gdGhlbi0tPjwhLS1TUkM9W1JQN0JJaUQwNThSdHluSTdrZWNCbGVBQkJrcDZkT0E4azRZUmlHZE02T2JKa24yWGRRNXVsc295V2ZVQVVBY3RJZzZZamxIWG5pSnNCU3BhZWViOHU3M0V2M19wVl9wM0I1UjRhM01uRk1TSHdEeVVrUXJ6TU5yb1JwTzdiR2w0dzA4bTJaZEE2OXE3bXg5bmRiY0s4QUdRZEhJeXJUR2VyYmQ5blkzNWxrSHJvUS1hazRfMVNicFl0ZnR0SEhVcUszZ1MwZHFIUGlFemVKNmhPQjlDaU9HSGVHbzNoS1FXaXY0MDFUaVVMQl9udTF4ajgyY2tmVVg4dGxSaGNuSGhnWDREaHBoVEl3VXBZcDBuR0RzTHVFb0JCVlZ1NlJJQ2RmeWhzQkg0WjgwWnpwRTdBNWFST19BN3ZMVTRkRGdqdkF6SVIyWEJ0ZDFnQnVGQVlLVmRoNi14a3Rsa1FWdHBldXRJTlhvRmFaVnpFNWZWNnNzdGprYVZkWWJZdGZEWXJRVmxnUXBWM25uLV8zenF0MGNxeUptY2tjdEgwN21uZDRCaUFMbWlxZDhvLTgwOWpBb3JYNGNtTEwxanFlQkJ3WTVlYXNPYUFQal81NU5GVmJyTWN3MURfOFlPNGdydTd1ZVVDWnJqTWVRMW9Lbnc5OXZOQkQtdThnOTdGYjNZYi0gLWxJazlLNk51M10tLT48L2c+PC9zdmc+" class="uml" alt="uml diagram" title="" /></p>
<h3 id="_10">財務諸表生成のシナリオ<a class="headerlink" href="#_10" title="Permanent link">&para;</a></h3>
<div class="highlight"><pre><span></span><code><span class="c"># language: ja</span>
<span class="k">機能:</span><span class="nf"> 財務諸表生成</span>
<span class="nf">  経営者として</span>
<span class="nf">  財務諸表を確認したい</span>
<span class="nf">  なぜなら経営判断に必要だから</span>

<span class="nf">  </span><span class="k">背景:</span>
<span class="k">    前提</span><span class="nf">: </span><span class="s">2024</span><span class="nf">年度の仕訳データが登録されている</span>
<span class="nf">    </span><span class="k">前提</span><span class="nf">: 全ての仕訳が確定済みである</span>

<span class="nf">  </span><span class="k">シナリオ:</span><span class="nf"> 貸借対照表を生成する</span>
<span class="k">    もし</span><span class="nf">: </span><span class="s">2024</span><span class="nf">年度の貸借対照表を生成する</span>
<span class="nf">    </span><span class="k">ならば</span><span class="nf">: 以下の項目が表示される</span>
<span class="k">      |</span><span class="s"> 分類</span><span class="k">     |</span><span class="s"> 項目</span><span class="k">           |</span>
<span class="k">      |</span><span class="s"> 資産</span><span class="k">     |</span><span class="s"> 流動資産合計</span><span class="k">   |</span>
<span class="k">      |</span><span class="s"> 資産</span><span class="k">     |</span><span class="s"> 固定資産合計</span><span class="k">   |</span>
<span class="k">      |</span><span class="s"> 負債</span><span class="k">     |</span><span class="s"> 流動負債合計</span><span class="k">   |</span>
<span class="k">      |</span><span class="s"> 負債</span><span class="k">     |</span><span class="s"> 固定負債合計</span><span class="k">   |</span>
<span class="k">      |</span><span class="s"> 純資産</span><span class="k">   |</span><span class="s"> 純資産合計</span><span class="k">     |</span>
<span class="nf">    </span><span class="k">かつ</span><span class="nf">: 資産合計 = 負債合計 + 純資産合計 が成り立つ</span>

<span class="nf">  </span><span class="k">シナリオ:</span><span class="nf"> 損益計算書を生成する</span>
<span class="k">    もし</span><span class="nf">: </span><span class="s">2024</span><span class="nf">年度の損益計算書を生成する</span>
<span class="nf">    </span><span class="k">ならば</span><span class="nf">: 以下の項目が表示される</span>
<span class="k">      |</span><span class="s"> 項目</span><span class="k">           |</span>
<span class="k">      |</span><span class="s"> 売上高</span><span class="k">         |</span>
<span class="k">      |</span><span class="s"> 売上原価</span><span class="k">       |</span>
<span class="k">      |</span><span class="s"> 売上総利益</span><span class="k">     |</span>
<span class="k">      |</span><span class="s"> 営業利益</span><span class="k">       |</span>
<span class="k">      |</span><span class="s"> 経常利益</span><span class="k">       |</span>
<span class="k">      |</span><span class="s"> 当期純利益</span><span class="k">     |</span>
<span class="nf">    </span><span class="k">かつ</span><span class="nf">: 売上総利益 = 売上高 - 売上原価 が成り立つ</span>

<span class="nf">  </span><span class="k">シナリオ:</span><span class="nf"> 財務分析レポートを生成する</span>
<span class="k">    もし</span><span class="nf">: </span><span class="s">2024</span><span class="nf">年度の財務分析を実行する</span>
<span class="nf">    </span><span class="k">ならば</span><span class="nf">: 以下の指標が表示される</span>
<span class="k">      |</span><span class="s"> 分類</span><span class="k">     |</span><span class="s"> 指標</span><span class="k">             |</span>
<span class="k">      |</span><span class="s"> 収益性</span><span class="k">   |</span><span class="s"> 売上高営業利益率</span><span class="k"> |</span>
<span class="k">      |</span><span class="s"> 収益性</span><span class="k">   |</span><span class="s"> ROA</span><span class="k">              |</span>
<span class="k">      |</span><span class="s"> 収益性</span><span class="k">   |</span><span class="s"> ROE</span><span class="k">              |</span>
<span class="k">      |</span><span class="s"> 効率性</span><span class="k">   |</span><span class="s"> 総資本回転率</span><span class="k">     |</span>
<span class="k">      |</span><span class="s"> 安全性</span><span class="k">   |</span><span class="s"> 流動比率</span><span class="k">         |</span>
<span class="k">      |</span><span class="s"> 安全性</span><span class="k">   |</span><span class="s"> 自己資本比率</span><span class="k">     |</span>
<span class="nf">    </span><span class="k">かつ</span><span class="nf">: 総合評価が A〜D で表示される</span>
</code></pre></div>
<h3 id="bdd">BDD アプローチのワークフロー<a class="headerlink" href="#bdd" title="Permanent link">&para;</a></h3>
<p><img src="data:image/svg+xml;base64,PHN2ZyB4bWxucz0iaHR0cDovL3d3dy53My5vcmcvMjAwMC9zdmciIHhtbG5zOnhsaW5rPSJodHRwOi8vd3d3LnczLm9yZy8xOTk5L3hsaW5rIiBjb250ZW50U3R5bGVUeXBlPSJ0ZXh0L2NzcyIgZGF0YS1kaWFncmFtLXR5cGU9IkFDVElWSVRZIiBoZWlnaHQ9IjQ3N3B4IiBwcmVzZXJ2ZUFzcGVjdFJhdGlvPSJub25lIiBzdHlsZT0id2lkdGg6Mzg5cHg7aGVpZ2h0OjQ3N3B4O2JhY2tncm91bmQ6I0ZGRkZGRjsiIHZlcnNpb249IjEuMSIgdmlld0JveD0iMCAwIDM4OSA0NzciIHdpZHRoPSIzODlweCIgem9vbUFuZFBhbj0ibWFnbmlmeSI+PHRpdGxlPkJERCAmIzEyNDUwOyYjMTI1MDM7JiMxMjUyNTsmIzEyNTQwOyYjMTI0ODE7JiMxMjM5ODsmIzEyNTI3OyYjMTI1NDA7JiMxMjQ2MzsmIzEyNTAxOyYjMTI1MjU7JiMxMjU0MDs8L3RpdGxlPjxkZWZzLz48Zz48ZyBjbGFzcz0idGl0bGUiIGRhdGEtc291cmNlLWxpbmU9IjEiPjx0ZXh0IGZpbGw9IiMwMDAwMDAiIGZvbnQtZmFtaWx5PSJzYW5zLXNlcmlmIiBmb250LXNpemU9IjE0IiBmb250LXdlaWdodD0iYm9sZCIgbGVuZ3RoQWRqdXN0PSJzcGFjaW5nIiB0ZXh0TGVuZ3RoPSIyMDYuNzg2NCIgeD0iOTAuMDU0MSIgeT0iMzIuOTk1MSI+QkREICYjMTI0NTA7JiMxMjUwMzsmIzEyNTI1OyYjMTI1NDA7JiMxMjQ4MTsmIzEyMzk4OyYjMTI1Mjc7JiMxMjU0MDsmIzEyNDYzOyYjMTI1MDE7JiMxMjUyNTsmIzEyNTQwOzwvdGV4dD48L2c+PGVsbGlwc2UgY3g9IjExMC4wMDA1IiBjeT0iNTcuMjk2OSIgZmlsbD0iIzIyMjIyMiIgcng9IjEwIiByeT0iMTAiIHN0eWxlPSJzdHJva2U6IzIyMjIyMjtzdHJva2Utd2lkdGg6MTsiLz48cGF0aCBkPSJNMjA2LjAwMSw3Ny4yOTY5IEwyMDYuMDAxLDEwMC45OTYxIEwxODYuMDAxLDEwNC45OTYxIEwyMDYuMDAxLDEwOC45OTYxIEwyMDYuMDAxLDEzMi42OTUzIEEwLDAgMCAwIDAgMjA2LjAwMSwxMzIuNjk1MyBMMzU3LjAwMTIsMTMyLjY5NTMgQTAsMCAwIDAgMCAzNTcuMDAxMiwxMzIuNjk1MyBMMzU3LjAwMTIsODcuMjk2OSBMMzQ3LjAwMTIsNzcuMjk2OSBMMjA2LjAwMSw3Ny4yOTY5IEEwLDAgMCAwIDAgMjA2LjAwMSw3Ny4yOTY5IiBmaWxsPSIjRkVGRkREIiBzdHlsZT0ic3Ryb2tlOiMxODE4MTg7c3Ryb2tlLXdpZHRoOjAuNTsiLz48cGF0aCBkPSJNMzQ3LjAwMTIsNzcuMjk2OSBMMzQ3LjAwMTIsODcuMjk2OSBMMzU3LjAwMTIsODcuMjk2OSBMMzQ3LjAwMTIsNzcuMjk2OSIgZmlsbD0iI0ZFRkZERCIgc3R5bGU9InN0cm9rZTojMTgxODE4O3N0cm9rZS13aWR0aDowLjU7Ii8+PHRleHQgZmlsbD0iIzAwMDAwMCIgZm9udC1mYW1pbHk9InNhbnMtc2VyaWYiIGZvbnQtc2l6ZT0iMTMiIGxlbmd0aEFkanVzdD0ic3BhY2luZyIgdGV4dExlbmd0aD0iMTA5Ljk3OTYiIHg9IjIxMi4wMDEiIHk9Ijk0LjM2MzgiPiImIzMyMDc2OyYjMjk3MDI7JiMyNTI4NTsmIzI0NDAzOyYjMzI3NzM7JiMxMjM5MjsmIzEyMzc1OyYjMTIzOTA7PC90ZXh0Pjx0ZXh0IGZpbGw9IiMwMDAwMDAiIGZvbnQtZmFtaWx5PSJzYW5zLXNlcmlmIiBmb250LXNpemU9IjEzIiBsZW5ndGhBZGp1c3Q9InNwYWNpbmciIHRleHRMZW5ndGg9IjEzMC4wMDAyIiB4PSIyMTIuMDAxIiB5PSIxMDkuNDk2NiI+JiMyMDE4MTsmIzM1Mzc5OyYjMjY5ODk7JiMyMTIwOTsmIzEyNDM0OyYjMzE2NDk7JiMyOTcwMjsmIzEyMzc1OyYjMTIzODM7JiMxMjM1Njs8L3RleHQ+PHRleHQgZmlsbD0iIzAwMDAwMCIgZm9udC1mYW1pbHk9InNhbnMtc2VyaWYiIGZvbnQtc2l6ZT0iMTMiIGxlbmd0aEFkanVzdD0ic3BhY2luZyIgdGV4dExlbmd0aD0iNzAuMzc2NSIgeD0iMjEyLjAwMSIgeT0iMTI0LjYyOTQiPiYjMTIzOTQ7JiMxMjM4MDsmIzEyMzk0OyYjMTI0MjU7Li4uIjwvdGV4dD48cmVjdCBmaWxsPSIjRjFGMUYxIiBoZWlnaHQ9IjMzLjk2ODgiIHJ4PSIxMi41IiByeT0iMTIuNSIgc3R5bGU9InN0cm9rZTojMTgxODE4O3N0cm9rZS13aWR0aDowLjU7IiB3aWR0aD0iMTUyLjAwMSIgeD0iMzQiIHk9Ijg4LjAxMTciLz48dGV4dCBmaWxsPSIjMDAwMDAwIiBmb250LWZhbWlseT0ic2Fucy1zZXJpZiIgZm9udC1zaXplPSIxMiIgbGVuZ3RoQWRqdXN0PSJzcGFjaW5nIiB0ZXh0TGVuZ3RoPSIxMzIuMDAxIiB4PSI0NCIgeT0iMTA5LjE1MDQiPiYjMTI1MTg7JiMxMjU0MDsmIzEyNDcwOyYjMTI1NDA7JiMxMjQ3MzsmIzEyNDg4OyYjMTI1NDA7JiMxMjUyMjsmIzEyNTQwOyYjMjAzMTY7JiMyNTEwNDs8L3RleHQ+PHBhdGggZD0iTTE5NC4wMDA5LDE0OS41NDY5IEwxOTQuMDAwOSwxNjUuNjc5NyBMMTc0LjAwMDksMTY5LjY3OTcgTDE5NC4wMDA5LDE3My42Nzk3IEwxOTQuMDAwOSwxODkuODEyNSBBMCwwIDAgMCAwIDE5NC4wMDA5LDE4OS44MTI1IEwzNDcuMjU0NCwxODkuODEyNSBBMCwwIDAgMCAwIDM0Ny4yNTQ0LDE4OS44MTI1IEwzNDcuMjU0NCwxNTkuNTQ2OSBMMzM3LjI1NDQsMTQ5LjU0NjkgTDE5NC4wMDA5LDE0OS41NDY5IEEwLDAgMCAwIDAgMTk0LjAwMDksMTQ5LjU0NjkiIGZpbGw9IiNGRUZGREQiIHN0eWxlPSJzdHJva2U6IzE4MTgxODtzdHJva2Utd2lkdGg6MC41OyIvPjxwYXRoIGQ9Ik0zMzcuMjU0NCwxNDkuNTQ2OSBMMzM3LjI1NDQsMTU5LjU0NjkgTDM0Ny4yNTQ0LDE1OS41NDY5IEwzMzcuMjU0NCwxNDkuNTQ2OSIgZmlsbD0iI0ZFRkZERCIgc3R5bGU9InN0cm9rZTojMTgxODE4O3N0cm9rZS13aWR0aDowLjU7Ii8+PHRleHQgZmlsbD0iIzAwMDAwMCIgZm9udC1mYW1pbHk9InNhbnMtc2VyaWYiIGZvbnQtc2l6ZT0iMTMiIGxlbmd0aEFkanVzdD0ic3BhY2luZyIgdGV4dExlbmd0aD0iMTMyLjI1MzUiIHg9IjIwMC4wMDA5IiB5PSIxNjYuNjEzOCI+RmVhdHVyZSAmIzEyNTAxOyYjMTI0NDk7JiMxMjQ1MjsmIzEyNTIzOyYjMjAzMTY7JiMyNTEwNDs8L3RleHQ+PHRleHQgZmlsbD0iIzAwMDAwMCIgZm9udC1mYW1pbHk9InNhbnMtc2VyaWYiIGZvbnQtc2l6ZT0iMTMiIGxlbmd0aEFkanVzdD0ic3BhY2luZyIgdGV4dExlbmd0aD0iOTEuMDAwMSIgeD0iMjAwLjAwMDkiIHk9IjE4MS43NDY2Ij4mIzEyNDcxOyYjMTI0OTA7JiMxMjUyMjsmIzEyNDU4OyYjMTIzOTg7JiMzNTM1MjsmIzM2ODQ4OzwvdGV4dD48cmVjdCBmaWxsPSIjRjFGMUYxIiBoZWlnaHQ9IjMzLjk2ODgiIHJ4PSIxMi41IiByeT0iMTIuNSIgc3R5bGU9InN0cm9rZTojMTgxODE4O3N0cm9rZS13aWR0aDowLjU7IiB3aWR0aD0iMTI4LjAwMDgiIHg9IjQ2LjAwMDEiIHk9IjE1Mi42OTUzIi8+PHRleHQgZmlsbD0iIzAwMDAwMCIgZm9udC1mYW1pbHk9InNhbnMtc2VyaWYiIGZvbnQtc2l6ZT0iMTIiIGxlbmd0aEFkanVzdD0ic3BhY2luZyIgdGV4dExlbmd0aD0iMTA4LjAwMDgiIHg9IjU2LjAwMDEiIHk9IjE3My44MzQiPiYjMjE0NjM7JiMxMjM2OTsmIzIwODM3OyYjMTI0Mjg7JiMyMjUyMjsmIzI4MzEwOyYjMTIzOTg7JiMyMzQ1MDsmIzMyNjgxOzwvdGV4dD48cGF0aCBkPSJNMTk0LjAwMDksMjA2LjY2NDEgTDE5NC4wMDA5LDIyMi43OTY5IEwxNzQuMDAwOSwyMjYuNzk2OSBMMTk0LjAwMDksMjMwLjc5NjkgTDE5NC4wMDA5LDI0Ni45Mjk3IEEwLDAgMCAwIDAgMTk0LjAwMDksMjQ2LjkyOTcgTDM3Ny44OTQ1LDI0Ni45Mjk3IEEwLDAgMCAwIDAgMzc3Ljg5NDUsMjQ2LjkyOTcgTDM3Ny44OTQ1LDIxNi42NjQxIEwzNjcuODk0NSwyMDYuNjY0MSBMMTk0LjAwMDksMjA2LjY2NDEgQTAsMCAwIDAgMCAxOTQuMDAwOSwyMDYuNjY0MSIgZmlsbD0iI0ZFRkZERCIgc3R5bGU9InN0cm9rZTojMTgxODE4O3N0cm9rZS13aWR0aDowLjU7Ii8+PHBhdGggZD0iTTM2Ny44OTQ1LDIwNi42NjQxIEwzNjcuODk0NSwyMTYuNjY0MSBMMzc3Ljg5NDUsMjE2LjY2NDEgTDM2Ny44OTQ1LDIwNi42NjQxIiBmaWxsPSIjRkVGRkREIiBzdHlsZT0ic3Ryb2tlOiMxODE4MTg7c3Ryb2tlLXdpZHRoOjAuNTsiLz48dGV4dCBmaWxsPSIjMDAwMDAwIiBmb250LWZhbWlseT0ic2Fucy1zZXJpZiIgZm9udC1zaXplPSIxMyIgbGVuZ3RoQWRqdXN0PSJzcGFjaW5nIiB0ZXh0TGVuZ3RoPSIxNjIuODkzNiIgeD0iMjAwLjAwMDkiIHk9IjIyMy43MzEiPkBHaXZlbiwgQFdoZW4sIEBUaGVuPC90ZXh0Pjx0ZXh0IGZpbGw9IiMwMDAwMDAiIGZvbnQtZmFtaWx5PSJzYW5zLXNlcmlmIiBmb250LXNpemU9IjEzIiBsZW5ndGhBZGp1c3Q9InNwYWNpbmciIHRleHRMZW5ndGg9IjEzMC4wMDAyIiB4PSIyMDAuMDAwOSIgeT0iMjM4Ljg2MzgiPiYjMTI0NTA7JiMxMjQ5NDsmIzEyNDg2OyYjMTI1NDA7JiMxMjQ3MTsmIzEyNTE5OyYjMTI1MzE7JiMxMjM5MTsmIzIzNDU1OyYjMzUwMTM7PC90ZXh0PjxyZWN0IGZpbGw9IiNGMUYxRjEiIGhlaWdodD0iMzMuOTY4OCIgcng9IjEyLjUiIHJ5PSIxMi41IiBzdHlsZT0ic3Ryb2tlOiMxODE4MTg7c3Ryb2tlLXdpZHRoOjAuNTsiIHdpZHRoPSIxMjguMDAwOCIgeD0iNDYuMDAwMSIgeT0iMjA5LjgxMjUiLz48dGV4dCBmaWxsPSIjMDAwMDAwIiBmb250LWZhbWlseT0ic2Fucy1zZXJpZiIgZm9udC1zaXplPSIxMiIgbGVuZ3RoQWRqdXN0PSJzcGFjaW5nIiB0ZXh0TGVuZ3RoPSIxMDguMDAwOCIgeD0iNTYuMDAwMSIgeT0iMjMwLjk1MTIiPiYjMTI0NzM7JiMxMjQ4NjsmIzEyNDgzOyYjMTI1MDM7JiMyMzQ1MDsmIzMyNjgxOyYjMTIzOTg7JiMyMzQ1NTsmIzM1MDEzOzwvdGV4dD48cmVjdCBmaWxsPSIjRjFGMUYxIiBoZWlnaHQ9IjMzLjk2ODgiIHJ4PSIxMi41IiByeT0iMTIuNSIgc3R5bGU9InN0cm9rZTojMTgxODE4O3N0cm9rZS13aWR0aDowLjU7IiB3aWR0aD0iODAuMDAwNSIgeD0iNzAuMDAwMyIgeT0iMjY2LjkyOTciLz48dGV4dCBmaWxsPSIjMDAwMDAwIiBmb250LWZhbWlseT0ic2Fucy1zZXJpZiIgZm9udC1zaXplPSIxMiIgbGVuZ3RoQWRqdXN0PSJzcGFjaW5nIiB0ZXh0TGVuZ3RoPSI2MC4wMDA1IiB4PSI4MC4wMDAzIiB5PSIyODguMDY4NCI+JiMxMjQ4NjsmIzEyNDczOyYjMTI0ODg7JiMyMzQ1NTsmIzM0ODkyOzwvdGV4dD48cG9seWdvbiBmaWxsPSIjRjFGMUYxIiBwb2ludHM9Ijc5LjU4MTUsMzIwLjg5ODQsMTQwLjQxOTUsMzIwLjg5ODQsMTUyLjQxOTUsMzMyLjg5ODQsMTQwLjQxOTUsMzQ0Ljg5ODQsNzkuNTgxNSwzNDQuODk4NCw2Ny41ODE1LDMzMi44OTg0LDc5LjU4MTUsMzIwLjg5ODQiIHN0eWxlPSJzdHJva2U6IzE4MTgxODtzdHJva2Utd2lkdGg6MC41OyIvPjx0ZXh0IGZpbGw9IiMwMDAwMDAiIGZvbnQtZmFtaWx5PSJzYW5zLXNlcmlmIiBmb250LXNpemU9IjExIiBsZW5ndGhBZGp1c3Q9InNwYWNpbmciIHRleHRMZW5ndGg9IjYwLjgzOCIgeD0iNzkuNTgxNSIgeT0iMzM2LjcwNjUiPiYjMTI0ODY7JiMxMjQ3MzsmIzEyNDg4OyYjMjUxMDQ7JiMyMTE1MTs/PC90ZXh0Pjx0ZXh0IGZpbGw9IiMwMDAwMDAiIGZvbnQtZmFtaWx5PSJzYW5zLXNlcmlmIiBmb250LXNpemU9IjExIiBsZW5ndGhBZGp1c3Q9InNwYWNpbmciIHRleHRMZW5ndGg9IjE5LjAwODMiIHg9IjQ4LjU3MzIiIHk9IjMzMC4zMDQyIj55ZXM8L3RleHQ+PHRleHQgZmlsbD0iIzAwMDAwMCIgZm9udC1mYW1pbHk9InNhbnMtc2VyaWYiIGZvbnQtc2l6ZT0iMTEiIGxlbmd0aEFkanVzdD0ic3BhY2luZyIgdGV4dExlbmd0aD0iMTMuNzAxNyIgeD0iMTUyLjQxOTUiIHk9IjMzMC4zMDQyIj5ubzwvdGV4dD48cmVjdCBmaWxsPSIjRjFGMUYxIiBoZWlnaHQ9IjMzLjk2ODgiIHJ4PSIxMi41IiByeT0iMTIuNSIgc3R5bGU9InN0cm9rZTojMTgxODE4O3N0cm9rZS13aWR0aDowLjU7IiB3aWR0aD0iOTIuMDAwNSIgeD0iMTEiIHk9IjM1NC44OTg0Ii8+PHRleHQgZmlsbD0iIzAwMDAwMCIgZm9udC1mYW1pbHk9InNhbnMtc2VyaWYiIGZvbnQtc2l6ZT0iMTIiIGxlbmd0aEFkanVzdD0ic3BhY2luZyIgdGV4dExlbmd0aD0iNzIuMDAwNSIgeD0iMjEiIHk9IjM3Ni4wMzcxIj4mIzI3MjMxOyYjMzMwMjE7JiMyMzQ1NTsmIzM1MDEzOyYjMjM0MzY7JiMyMDEwMjs8L3RleHQ+PHJlY3QgZmlsbD0iI0YxRjFGMSIgaGVpZ2h0PSIzMy45Njg4IiByeD0iMTIuNSIgcnk9IjEyLjUiIHN0eWxlPSJzdHJva2U6IzE4MTgxODtzdHJva2Utd2lkdGg6MC41OyIgd2lkdGg9IjgwLjAwMDUiIHg9IjEyMy4wMDA1IiB5PSIzNTQuODk4NCIvPjx0ZXh0IGZpbGw9IiMwMDAwMDAiIGZvbnQtZmFtaWx5PSJzYW5zLXNlcmlmIiBmb250LXNpemU9IjEyIiBsZW5ndGhBZGp1c3Q9InNwYWNpbmciIHRleHRMZW5ndGg9IjYwLjAwMDUiIHg9IjEzMy4wMDA1IiB5PSIzNzYuMDM3MSI+JiMyMzQ1NTsmIzM1MDEzOyYjMTIzOTg7JiMyMDQ2MjsmIzI3NDkxOzwvdGV4dD48cG9seWdvbiBmaWxsPSIjRjFGMUYxIiBwb2ludHM9IjExMC4wMDA1LDQwMC43NjYxLDEyMi4wMDA1LDQxMi43NjYxLDExMC4wMDA1LDQyNC43NjYxLDk4LjAwMDUsNDEyLjc2NjEsMTEwLjAwMDUsNDAwLjc2NjEiIHN0eWxlPSJzdHJva2U6IzE4MTgxODtzdHJva2Utd2lkdGg6MC41OyIvPjx0ZXh0IGZpbGw9IiMwMDAwMDAiIGZvbnQtZmFtaWx5PSJzYW5zLXNlcmlmIiBmb250LXNpemU9IjExIiBsZW5ndGhBZGp1c3Q9InNwYWNpbmciIHRleHRMZW5ndGg9Ijk4Ljk5OTMiIHg9IjEyMi4wMDA1IiB5PSI0MTAuMTcxOSI+JiMxMjQ3MzsmIzEyNDg2OyYjMTI0ODM7JiMxMjUwMzsmIzIzNDUwOyYjMzI2ODE7JiMxMjM5ODsmIzIzNDU1OyYjMzUwMTM7PC90ZXh0PjxlbGxpcHNlIGN4PSIxMTAuMDAwNSIgY3k9IjQ1NS43NjYxIiBmaWxsPSJub25lIiByeD0iMTEiIHJ5PSIxMSIgc3R5bGU9InN0cm9rZTojMjIyMjIyO3N0cm9rZS13aWR0aDoxOyIvPjxlbGxpcHNlIGN4PSIxMTAuMDAwNSIgY3k9IjQ1NS43NjYxIiBmaWxsPSIjMjIyMjIyIiByeD0iNiIgcnk9IjYiIHN0eWxlPSJzdHJva2U6IzIyMjIyMjtzdHJva2Utd2lkdGg6MTsiLz48bGluZSBzdHlsZT0ic3Ryb2tlOiMxODE4MTg7c3Ryb2tlLXdpZHRoOjE7IiB4MT0iMTEwLjAwMDUiIHgyPSIxMTAuMDAwNSIgeTE9IjY3LjI5NjkiIHkyPSI4OC4wMTE3Ii8+PHBvbHlnb24gZmlsbD0iIzE4MTgxOCIgcG9pbnRzPSIxMDYuMDAwNSw3OC4wMTE3LDExMC4wMDA1LDg4LjAxMTcsMTE0LjAwMDUsNzguMDExNywxMTAuMDAwNSw4Mi4wMTE3IiBzdHlsZT0ic3Ryb2tlOiMxODE4MTg7c3Ryb2tlLXdpZHRoOjE7Ii8+PGxpbmUgc3R5bGU9InN0cm9rZTojMTgxODE4O3N0cm9rZS13aWR0aDoxOyIgeDE9IjExMC4wMDA1IiB4Mj0iMTEwLjAwMDUiIHkxPSIxMjEuOTgwNSIgeTI9IjE1Mi42OTUzIi8+PHBvbHlnb24gZmlsbD0iIzE4MTgxOCIgcG9pbnRzPSIxMDYuMDAwNSwxNDIuNjk1MywxMTAuMDAwNSwxNTIuNjk1MywxMTQuMDAwNSwxNDIuNjk1MywxMTAuMDAwNSwxNDYuNjk1MyIgc3R5bGU9InN0cm9rZTojMTgxODE4O3N0cm9rZS13aWR0aDoxOyIvPjxsaW5lIHN0eWxlPSJzdHJva2U6IzE4MTgxODtzdHJva2Utd2lkdGg6MTsiIHgxPSIxMTAuMDAwNSIgeDI9IjExMC4wMDA1IiB5MT0iMTg2LjY2NDEiIHkyPSIyMDkuODEyNSIvPjxwb2x5Z29uIGZpbGw9IiMxODE4MTgiIHBvaW50cz0iMTA2LjAwMDUsMTk5LjgxMjUsMTEwLjAwMDUsMjA5LjgxMjUsMTE0LjAwMDUsMTk5LjgxMjUsMTEwLjAwMDUsMjAzLjgxMjUiIHN0eWxlPSJzdHJva2U6IzE4MTgxODtzdHJva2Utd2lkdGg6MTsiLz48bGluZSBzdHlsZT0ic3Ryb2tlOiMxODE4MTg7c3Ryb2tlLXdpZHRoOjE7IiB4MT0iMTEwLjAwMDUiIHgyPSIxMTAuMDAwNSIgeTE9IjI0My43ODEzIiB5Mj0iMjY2LjkyOTciLz48cG9seWdvbiBmaWxsPSIjMTgxODE4IiBwb2ludHM9IjEwNi4wMDA1LDI1Ni45Mjk3LDExMC4wMDA1LDI2Ni45Mjk3LDExNC4wMDA1LDI1Ni45Mjk3LDExMC4wMDA1LDI2MC45Mjk3IiBzdHlsZT0ic3Ryb2tlOiMxODE4MTg7c3Ryb2tlLXdpZHRoOjE7Ii8+PGxpbmUgc3R5bGU9InN0cm9rZTojMTgxODE4O3N0cm9rZS13aWR0aDoxOyIgeDE9IjY3LjU4MTUiIHgyPSI1Ny4wMDAzIiB5MT0iMzMyLjg5ODQiIHkyPSIzMzIuODk4NCIvPjxsaW5lIHN0eWxlPSJzdHJva2U6IzE4MTgxODtzdHJva2Utd2lkdGg6MTsiIHgxPSI1Ny4wMDAzIiB4Mj0iNTcuMDAwMyIgeTE9IjMzMi44OTg0IiB5Mj0iMzU0Ljg5ODQiLz48cG9seWdvbiBmaWxsPSIjMTgxODE4IiBwb2ludHM9IjUzLjAwMDMsMzQ0Ljg5ODQsNTcuMDAwMywzNTQuODk4NCw2MS4wMDAzLDM0NC44OTg0LDU3LjAwMDMsMzQ4Ljg5ODQiIHN0eWxlPSJzdHJva2U6IzE4MTgxODtzdHJva2Utd2lkdGg6MTsiLz48bGluZSBzdHlsZT0ic3Ryb2tlOiMxODE4MTg7c3Ryb2tlLXdpZHRoOjE7IiB4MT0iMTUyLjQxOTUiIHgyPSIxNjMuMDAwOCIgeTE9IjMzMi44OTg0IiB5Mj0iMzMyLjg5ODQiLz48bGluZSBzdHlsZT0ic3Ryb2tlOiMxODE4MTg7c3Ryb2tlLXdpZHRoOjE7IiB4MT0iMTYzLjAwMDgiIHgyPSIxNjMuMDAwOCIgeTE9IjMzMi44OTg0IiB5Mj0iMzU0Ljg5ODQiLz48cG9seWdvbiBmaWxsPSIjMTgxODE4IiBwb2ludHM9IjE1OS4wMDA4LDM0NC44OTg0LDE2My4wMDA4LDM1NC44OTg0LDE2Ny4wMDA4LDM0NC44OTg0LDE2My4wMDA4LDM0OC44OTg0IiBzdHlsZT0ic3Ryb2tlOiMxODE4MTg7c3Ryb2tlLXdpZHRoOjE7Ii8+PGxpbmUgc3R5bGU9InN0cm9rZTojMTgxODE4O3N0cm9rZS13aWR0aDoxOyIgeDE9IjU3LjAwMDMiIHgyPSI1Ny4wMDAzIiB5MT0iMzg4Ljg2NzIiIHkyPSI0MTIuNzY2MSIvPjxsaW5lIHN0eWxlPSJzdHJva2U6IzE4MTgxODtzdHJva2Utd2lkdGg6MTsiIHgxPSI1Ny4wMDAzIiB4Mj0iOTguMDAwNSIgeTE9IjQxMi43NjYxIiB5Mj0iNDEyLjc2NjEiLz48cG9seWdvbiBmaWxsPSIjMTgxODE4IiBwb2ludHM9Ijg4LjAwMDUsNDA4Ljc2NjEsOTguMDAwNSw0MTIuNzY2MSw4OC4wMDA1LDQxNi43NjYxLDkyLjAwMDUsNDEyLjc2NjEiIHN0eWxlPSJzdHJva2U6IzE4MTgxODtzdHJva2Utd2lkdGg6MTsiLz48bGluZSBzdHlsZT0ic3Ryb2tlOiMxODE4MTg7c3Ryb2tlLXdpZHRoOjE7IiB4MT0iMTYzLjAwMDgiIHgyPSIxNjMuMDAwOCIgeTE9IjM4OC44NjcyIiB5Mj0iNDEyLjc2NjEiLz48bGluZSBzdHlsZT0ic3Ryb2tlOiMxODE4MTg7c3Ryb2tlLXdpZHRoOjE7IiB4MT0iMTYzLjAwMDgiIHgyPSIxMjIuMDAwNSIgeTE9IjQxMi43NjYxIiB5Mj0iNDEyLjc2NjEiLz48cG9seWdvbiBmaWxsPSIjMTgxODE4IiBwb2ludHM9IjEzMi4wMDA1LDQwOC43NjYxLDEyMi4wMDA1LDQxMi43NjYxLDEzMi4wMDA1LDQxNi43NjYxLDEyOC4wMDA1LDQxMi43NjYxIiBzdHlsZT0ic3Ryb2tlOiMxODE4MTg7c3Ryb2tlLXdpZHRoOjE7Ii8+PGxpbmUgc3R5bGU9InN0cm9rZTojMTgxODE4O3N0cm9rZS13aWR0aDoxOyIgeDE9IjExMC4wMDA1IiB4Mj0iMTEwLjAwMDUiIHkxPSIzMDAuODk4NCIgeTI9IjMyMC44OTg0Ii8+PHBvbHlnb24gZmlsbD0iIzE4MTgxOCIgcG9pbnRzPSIxMDYuMDAwNSwzMTAuODk4NCwxMTAuMDAwNSwzMjAuODk4NCwxMTQuMDAwNSwzMTAuODk4NCwxMTAuMDAwNSwzMTQuODk4NCIgc3R5bGU9InN0cm9rZTojMTgxODE4O3N0cm9rZS13aWR0aDoxOyIvPjxsaW5lIHN0eWxlPSJzdHJva2U6IzE4MTgxODtzdHJva2Utd2lkdGg6MTsiIHgxPSIxMTAuMDAwNSIgeDI9IjExMC4wMDA1IiB5MT0iNDI0Ljc2NjEiIHkyPSI0NDQuNzY2MSIvPjxwb2x5Z29uIGZpbGw9IiMxODE4MTgiIHBvaW50cz0iMTA2LjAwMDUsNDM0Ljc2NjEsMTEwLjAwMDUsNDQ0Ljc2NjEsMTE0LjAwMDUsNDM0Ljc2NjEsMTEwLjAwMDUsNDM4Ljc2NjEiIHN0eWxlPSJzdHJva2U6IzE4MTgxODtzdHJva2Utd2lkdGg6MTsiLz48IS0tU1JDPVtWTDdUSVc5MTVCdV9KcDV1ZkwwLVc0OTlJQnIwcUJOR2Mwa29YY3YxVHlyQ1lrYklMZldMbWNCY1J4VzVLZjVmRmlubnJ0c0NQY1NYeWdRUlN1UnBkVkR6dHBiWlE0UU1hZ3JhYVkxX0hENTBDSzhuSFM2R3NJWFVfM1VOaUh4SzBHZjZBY3owMzRMTkdVeWdWZzhlZ3djWFo4alBxb3ROdWczZDM0aG9zYTc2V0Qzb3BMcE1JY3dyd0Nua2xEQ1lpWndvMWg4a0JCeGdOZF9pVGFQRXpIeHZ6VDlrb0p3NU1TWkUwRGFHTVRFRl8zbVFaT1Ewd2xsNDltUThFUFVvd3llZlRmMlJaWkxuOXhWSWljQ19CQnk3QS1CUkQ2S1N2SWRuYi0wanY0eWVkV0VGV0ZtM0hTTXRwUU1FeFZObGxGZGhObXNyTVdjNWE5UzlnOU02dlJNQkFuZzk3VXNPd2NpYWlQVEhRTFNjSzBVektGREpmVEgzQ0tSTTItUE5QNklGRWc4RmpTbXVXOU9jdVQtZ2pFZktoQ3E4Q0lHajJQX0dHV0hZeGkzb24ycFdTY25wQ0lkNVdNT0JiOEpyZDhHM0dCZlRwNnJ0cjh4My1XUnZUbmpmSHFseF92aXhfMDQwXS0tPjwvZz48L3N2Zz4=" class="uml" alt="uml diagram" title="" /></p>
<h3 id="_11">ステップ定義の実装例<a class="headerlink" href="#_11" title="Permanent link">&para;</a></h3>
<div class="highlight"><pre><span></span><code><span class="kn">package</span><span class="w"> </span><span class="nn">com.example.accounting.acceptance</span><span class="p">;</span>

<span class="kn">import</span><span class="w"> </span><span class="nn">io.cucumber.java.ja.*</span><span class="p">;</span>
<span class="kn">import</span><span class="w"> </span><span class="nn">io.cucumber.datatable.DataTable</span><span class="p">;</span>
<span class="kn">import</span><span class="w"> </span><span class="nn">org.springframework.beans.factory.annotation.Autowired</span><span class="p">;</span>
<span class="kn">import static</span><span class="w"> </span><span class="nn">org.assertj.core.api.Assertions.*</span><span class="p">;</span>

<span class="kd">public</span><span class="w"> </span><span class="kd">class</span> <span class="nc">JournalStepDefinitions</span><span class="w"> </span><span class="p">{</span>

<span class="w">    </span><span class="nd">@Autowired</span>
<span class="w">    </span><span class="kd">private</span><span class="w"> </span><span class="n">JournalUseCase</span><span class="w"> </span><span class="n">journalUseCase</span><span class="p">;</span>

<span class="w">    </span><span class="kd">private</span><span class="w"> </span><span class="n">JournalEntry</span><span class="w"> </span><span class="n">currentEntry</span><span class="p">;</span>
<span class="w">    </span><span class="kd">private</span><span class="w"> </span><span class="n">String</span><span class="w"> </span><span class="n">resultMessage</span><span class="p">;</span>
<span class="w">    </span><span class="kd">private</span><span class="w"> </span><span class="n">Exception</span><span class="w"> </span><span class="n">lastException</span><span class="p">;</span>

<span class="w">    </span><span class="nd">@前提</span><span class="p">(</span><span class="s">&quot;経理担当者としてログインしている&quot;</span><span class="p">)</span>
<span class="w">    </span><span class="kd">public</span><span class="w"> </span><span class="kt">void</span><span class="w"> </span><span class="nf">経理担当者としてログインしている</span><span class="p">()</span><span class="w"> </span><span class="p">{</span>
<span class="w">        </span><span class="c1">// ログイン処理（テスト用のセキュリティコンテキスト設定）</span>
<span class="w">    </span><span class="p">}</span>

<span class="w">    </span><span class="nd">@前提</span><span class="p">(</span><span class="s">&quot;以下の勘定科目が登録されている&quot;</span><span class="p">)</span>
<span class="w">    </span><span class="kd">public</span><span class="w"> </span><span class="kt">void</span><span class="w"> </span><span class="nf">以下の勘定科目が登録されている</span><span class="p">(</span><span class="n">DataTable</span><span class="w"> </span><span class="n">dataTable</span><span class="p">)</span><span class="w"> </span><span class="p">{</span>
<span class="w">        </span><span class="c1">// 勘定科目マスタの準備</span>
<span class="w">    </span><span class="p">}</span>

<span class="w">    </span><span class="nd">@もし</span><span class="p">(</span><span class="s">&quot;以下の仕訳を登録する&quot;</span><span class="p">)</span>
<span class="w">    </span><span class="kd">public</span><span class="w"> </span><span class="kt">void</span><span class="w"> </span><span class="nf">以下の仕訳を登録する</span><span class="p">(</span><span class="n">DataTable</span><span class="w"> </span><span class="n">dataTable</span><span class="p">)</span><span class="w"> </span><span class="p">{</span>
<span class="w">        </span><span class="kd">var</span><span class="w"> </span><span class="n">row</span><span class="w"> </span><span class="o">=</span><span class="w"> </span><span class="n">dataTable</span><span class="p">.</span><span class="na">asMaps</span><span class="p">().</span><span class="na">get</span><span class="p">(</span><span class="mi">0</span><span class="p">);</span>
<span class="w">        </span><span class="n">currentEntry</span><span class="w"> </span><span class="o">=</span><span class="w"> </span><span class="n">JournalEntry</span><span class="p">.</span><span class="na">builder</span><span class="p">()</span>
<span class="w">            </span><span class="p">.</span><span class="na">journalDate</span><span class="p">(</span><span class="n">LocalDate</span><span class="p">.</span><span class="na">parse</span><span class="p">(</span><span class="n">row</span><span class="p">.</span><span class="na">get</span><span class="p">(</span><span class="s">&quot;日付&quot;</span><span class="p">)))</span>
<span class="w">            </span><span class="p">.</span><span class="na">description</span><span class="p">(</span><span class="n">row</span><span class="p">.</span><span class="na">get</span><span class="p">(</span><span class="s">&quot;摘要&quot;</span><span class="p">))</span>
<span class="w">            </span><span class="p">.</span><span class="na">build</span><span class="p">();</span>
<span class="w">    </span><span class="p">}</span>

<span class="w">    </span><span class="nd">@かつ</span><span class="p">(</span><span class="s">&quot;以下の仕訳明細を入力する&quot;</span><span class="p">)</span>
<span class="w">    </span><span class="kd">public</span><span class="w"> </span><span class="kt">void</span><span class="w"> </span><span class="nf">以下の仕訳明細を入力する</span><span class="p">(</span><span class="n">DataTable</span><span class="w"> </span><span class="n">dataTable</span><span class="p">)</span><span class="w"> </span><span class="p">{</span>
<span class="w">        </span><span class="n">List</span><span class="o">&lt;</span><span class="n">JournalLine</span><span class="o">&gt;</span><span class="w"> </span><span class="n">lines</span><span class="w"> </span><span class="o">=</span><span class="w"> </span><span class="n">dataTable</span><span class="p">.</span><span class="na">asMaps</span><span class="p">().</span><span class="na">stream</span><span class="p">()</span>
<span class="w">            </span><span class="p">.</span><span class="na">map</span><span class="p">(</span><span class="n">row</span><span class="w"> </span><span class="o">-&gt;</span><span class="w"> </span><span class="p">{</span>
<span class="w">                </span><span class="n">BigDecimal</span><span class="w"> </span><span class="n">debit</span><span class="w"> </span><span class="o">=</span><span class="w"> </span><span class="k">new</span><span class="w"> </span><span class="n">BigDecimal</span><span class="p">(</span><span class="n">row</span><span class="p">.</span><span class="na">get</span><span class="p">(</span><span class="s">&quot;借方金額&quot;</span><span class="p">));</span>
<span class="w">                </span><span class="n">BigDecimal</span><span class="w"> </span><span class="n">credit</span><span class="w"> </span><span class="o">=</span><span class="w"> </span><span class="k">new</span><span class="w"> </span><span class="n">BigDecimal</span><span class="p">(</span><span class="n">row</span><span class="p">.</span><span class="na">get</span><span class="p">(</span><span class="s">&quot;貸方金額&quot;</span><span class="p">));</span>
<span class="w">                </span><span class="n">String</span><span class="w"> </span><span class="n">accountCode</span><span class="w"> </span><span class="o">=</span><span class="w"> </span><span class="n">getAccountCode</span><span class="p">(</span><span class="n">row</span><span class="p">.</span><span class="na">get</span><span class="p">(</span><span class="s">&quot;勘定科目&quot;</span><span class="p">));</span>

<span class="w">                </span><span class="k">if</span><span class="w"> </span><span class="p">(</span><span class="n">debit</span><span class="p">.</span><span class="na">compareTo</span><span class="p">(</span><span class="n">BigDecimal</span><span class="p">.</span><span class="na">ZERO</span><span class="p">)</span><span class="w"> </span><span class="o">&gt;</span><span class="w"> </span><span class="mi">0</span><span class="p">)</span><span class="w"> </span><span class="p">{</span>
<span class="w">                    </span><span class="k">return</span><span class="w"> </span><span class="n">JournalLine</span><span class="p">.</span><span class="na">debit</span><span class="p">(</span><span class="n">accountCode</span><span class="p">,</span><span class="w"> </span><span class="n">debit</span><span class="p">);</span>
<span class="w">                </span><span class="p">}</span><span class="w"> </span><span class="k">else</span><span class="w"> </span><span class="p">{</span>
<span class="w">                    </span><span class="k">return</span><span class="w"> </span><span class="n">JournalLine</span><span class="p">.</span><span class="na">credit</span><span class="p">(</span><span class="n">accountCode</span><span class="p">,</span><span class="w"> </span><span class="n">credit</span><span class="p">);</span>
<span class="w">                </span><span class="p">}</span>
<span class="w">            </span><span class="p">})</span>
<span class="w">            </span><span class="p">.</span><span class="na">toList</span><span class="p">();</span>

<span class="w">        </span><span class="n">currentEntry</span><span class="w"> </span><span class="o">=</span><span class="w"> </span><span class="n">currentEntry</span><span class="p">.</span><span class="na">withLines</span><span class="p">(</span><span class="n">lines</span><span class="p">);</span>

<span class="w">        </span><span class="k">try</span><span class="w"> </span><span class="p">{</span>
<span class="w">            </span><span class="n">journalUseCase</span><span class="p">.</span><span class="na">createJournal</span><span class="p">(</span><span class="n">currentEntry</span><span class="p">);</span>
<span class="w">            </span><span class="n">resultMessage</span><span class="w"> </span><span class="o">=</span><span class="w"> </span><span class="s">&quot;仕訳を登録しました&quot;</span><span class="p">;</span>
<span class="w">        </span><span class="p">}</span><span class="w"> </span><span class="k">catch</span><span class="w"> </span><span class="p">(</span><span class="n">Exception</span><span class="w"> </span><span class="n">e</span><span class="p">)</span><span class="w"> </span><span class="p">{</span>
<span class="w">            </span><span class="n">lastException</span><span class="w"> </span><span class="o">=</span><span class="w"> </span><span class="n">e</span><span class="p">;</span>
<span class="w">        </span><span class="p">}</span>
<span class="w">    </span><span class="p">}</span>

<span class="w">    </span><span class="nd">@ならば</span><span class="p">(</span><span class="s">&quot;{string} が表示される&quot;</span><span class="p">)</span>
<span class="w">    </span><span class="kd">public</span><span class="w"> </span><span class="kt">void</span><span class="w"> </span><span class="nf">が表示される</span><span class="p">(</span><span class="n">String</span><span class="w"> </span><span class="n">expectedMessage</span><span class="p">)</span><span class="w"> </span><span class="p">{</span>
<span class="w">        </span><span class="n">assertThat</span><span class="p">(</span><span class="n">resultMessage</span><span class="p">).</span><span class="na">isEqualTo</span><span class="p">(</span><span class="n">expectedMessage</span><span class="p">);</span>
<span class="w">    </span><span class="p">}</span>

<span class="w">    </span><span class="nd">@ならば</span><span class="p">(</span><span class="s">&quot;{string} というエラーが表示される&quot;</span><span class="p">)</span>
<span class="w">    </span><span class="kd">public</span><span class="w"> </span><span class="kt">void</span><span class="w"> </span><span class="nf">というエラーが表示される</span><span class="p">(</span><span class="n">String</span><span class="w"> </span><span class="n">expectedError</span><span class="p">)</span><span class="w"> </span><span class="p">{</span>
<span class="w">        </span><span class="n">assertThat</span><span class="p">(</span><span class="n">lastException</span><span class="p">).</span><span class="na">isNotNull</span><span class="p">();</span>
<span class="w">        </span><span class="n">assertThat</span><span class="p">(</span><span class="n">lastException</span><span class="p">.</span><span class="na">getMessage</span><span class="p">()).</span><span class="na">contains</span><span class="p">(</span><span class="n">expectedError</span><span class="p">);</span>
<span class="w">    </span><span class="p">}</span>

<span class="w">    </span><span class="nd">@かつ</span><span class="p">(</span><span class="s">&quot;借方合計と貸方合計が一致している&quot;</span><span class="p">)</span>
<span class="w">    </span><span class="kd">public</span><span class="w"> </span><span class="kt">void</span><span class="w"> </span><span class="nf">借方合計と貸方合計が一致している</span><span class="p">()</span><span class="w"> </span><span class="p">{</span>
<span class="w">        </span><span class="n">assertThat</span><span class="p">(</span><span class="n">currentEntry</span><span class="p">.</span><span class="na">isBalanced</span><span class="p">()).</span><span class="na">isTrue</span><span class="p">();</span>
<span class="w">    </span><span class="p">}</span>
<span class="p">}</span>
</code></pre></div>
<hr />
<h2 id="225">22.5 テストの組織化<a class="headerlink" href="#225" title="Permanent link">&para;</a></h2>
<h3 id="_12">ディレクトリ構造<a class="headerlink" href="#_12" title="Permanent link">&para;</a></h3>
<div class="highlight"><pre><span></span><code>src/test/
├── java/
│   └── com/example/accounting/
│       ├── domain/
│       │   └── model/
│       │       ├── account/           # 勘定科目ドメインのテスト
│       │       │   ├── AccountTest.java
│       │       │   └── AccountTypeTest.java
│       │       ├── journal/           # 仕訳ドメインのテスト
│       │       │   ├── JournalEntryTest.java
│       │       │   ├── JournalLineTest.java
│       │       │   └── MoneyTest.java
│       │       └── financial/         # 財務分析ドメインのテスト
│       │           ├── FinancialDataTest.java
│       │           └── FinancialRatioAnalyzerTest.java
│       ├── application/
│       │   └── service/               # アプリケーションサービスのテスト
│       │       ├── AccountServiceTest.java
│       │       ├── JournalServiceTest.java
│       │       └── FinancialAnalysisServiceTest.java
│       ├── infrastructure/
│       │   ├── persistence/           # リポジトリのテスト
│       │   │   └── repository/
│       │   │       ├── AccountRepositoryImplTest.java
│       │   │       └── JournalRepositoryImplTest.java
│       │   └── web/                   # コントローラーのテスト
│       │       └── controller/
│       │           ├── AccountControllerIntegrationTest.java
│       │           ├── JournalControllerIntegrationTest.java
│       │           └── FinancialAnalysisControllerIntegrationTest.java
│       ├── acceptance/                # 受け入れテスト
│       │   ├── JournalStepDefinitions.java
│       │   └── FinancialStatementStepDefinitions.java
│       ├── test/                      # テストユーティリティ
│       │   └── TestDataFactory.java
│       ├── ArchitectureTest.java      # アーキテクチャテスト
│       └── IntegrationTest.java       # 統合テストアノテーション
└── resources/
    ├── features/                      # Gherkin Feature ファイル
    │   ├── journal/
    │   │   ├── journal_entry.feature
    │   │   └── journal_approval.feature
    │   ├── ledger/
    │   │   └── general_ledger.feature
    │   └── statement/
    │       ├── balance_sheet.feature
    │       ├── income_statement.feature
    │       └── financial_analysis.feature
    ├── sql/                           # テスト用 SQL
    │   ├── test-accounts.sql
    │   ├── test-journals.sql
    │   └── test-financial-data.sql
    └── application-test.yml           # テスト用設定
</code></pre></div>
<h3 id="_13">テスト実行コマンド<a class="headerlink" href="#_13" title="Permanent link">&para;</a></h3>
<div class="highlight"><pre><span></span><code><span class="c1"># 全テスト実行</span>
./gradlew<span class="w"> </span><span class="nb">test</span>

<span class="c1"># 単体テストのみ</span>
./gradlew<span class="w"> </span><span class="nb">test</span><span class="w"> </span>--tests<span class="w"> </span><span class="s2">&quot;*Test&quot;</span><span class="w"> </span>--exclude-tasks<span class="w"> </span>integrationTest

<span class="c1"># 統合テストのみ</span>
./gradlew<span class="w"> </span><span class="nb">test</span><span class="w"> </span>--tests<span class="w"> </span><span class="s2">&quot;*IntegrationTest&quot;</span>

<span class="c1"># 特定パッケージのテスト</span>
./gradlew<span class="w"> </span><span class="nb">test</span><span class="w"> </span>--tests<span class="w"> </span><span class="s2">&quot;com.example.accounting.domain.*&quot;</span>

<span class="c1"># 特定クラスのテスト</span>
./gradlew<span class="w"> </span><span class="nb">test</span><span class="w"> </span>--tests<span class="w"> </span><span class="s2">&quot;*JournalEntryTest&quot;</span>

<span class="c1"># 受け入れテスト</span>
./gradlew<span class="w"> </span>cucumberTest

<span class="c1"># カバレッジレポート生成</span>
./gradlew<span class="w"> </span>jacocoTestReport
</code></pre></div>
<h3 id="_14">テスト設定ファイル<a class="headerlink" href="#_14" title="Permanent link">&para;</a></h3>
<div class="highlight"><pre><span></span><code><span class="c1"># src/test/resources/application-test.yml</span>
<span class="nt">spring</span><span class="p">:</span>
<span class="w">  </span><span class="nt">datasource</span><span class="p">:</span>
<span class="w">    </span><span class="c1"># Testcontainers が動的に設定</span>
<span class="w">    </span><span class="nt">driver-class-name</span><span class="p">:</span><span class="w"> </span><span class="l l-Scalar l-Scalar-Plain">org.postgresql.Driver</span>

<span class="w">  </span><span class="nt">flyway</span><span class="p">:</span>
<span class="w">    </span><span class="nt">enabled</span><span class="p">:</span><span class="w"> </span><span class="l l-Scalar l-Scalar-Plain">true</span>
<span class="w">    </span><span class="nt">locations</span><span class="p">:</span><span class="w"> </span><span class="l l-Scalar l-Scalar-Plain">classpath:db/migration</span>

<span class="w">  </span><span class="nt">jpa</span><span class="p">:</span>
<span class="w">    </span><span class="nt">show-sql</span><span class="p">:</span><span class="w"> </span><span class="l l-Scalar l-Scalar-Plain">true</span>
<span class="w">    </span><span class="nt">properties</span><span class="p">:</span>
<span class="w">      </span><span class="nt">hibernate</span><span class="p">:</span>
<span class="w">        </span><span class="nt">format_sql</span><span class="p">:</span><span class="w"> </span><span class="l l-Scalar l-Scalar-Plain">true</span>

<span class="nt">logging</span><span class="p">:</span>
<span class="w">  </span><span class="nt">level</span><span class="p">:</span>
<span class="w">    </span><span class="nt">com.example.accounting</span><span class="p">:</span><span class="w"> </span><span class="l l-Scalar l-Scalar-Plain">DEBUG</span>
<span class="w">    </span><span class="nt">org.springframework.jdbc</span><span class="p">:</span><span class="w"> </span><span class="l l-Scalar l-Scalar-Plain">DEBUG</span>
</code></pre></div>
<hr />
<h2 id="_15">まとめ<a class="headerlink" href="#_15" title="Permanent link">&para;</a></h2>
<p>本章では、財務会計システムにおけるテスト戦略について解説しました。</p>
<h3 id="_16">重要なポイント<a class="headerlink" href="#_16" title="Permanent link">&para;</a></h3>
<ol>
<li>
<p><strong>テストピラミッド</strong>: 単体テスト（多）、統合テスト（中）、E2E テスト（少）の3層構造で、効率的にテストを実行します。</p>
</li>
<li>
<p><strong>単体テスト</strong>: 正常値・境界値・異常値・極端値に分類して、網羅的にテストケースを作成します。<code>@TestFactory</code> と <code>DynamicTest</code> を使って、データ駆動テストを実現します。</p>
</li>
<li>
<p><strong>Testcontainers</strong>: Docker コンテナを使って、実際の PostgreSQL データベースでリポジトリテストを実行します。毎回クリーンな状態でテストできるため、テストの信頼性が向上します。</p>
</li>
<li>
<p><strong>受け入れテスト</strong>: Gherkin 記法で日本語のシナリオを記述し、BDD アプローチでビジネス要件を検証します。非エンジニアも理解しやすいドキュメントとして機能します。</p>
</li>
</ol>
<h3 id="_17">テスト数の目安<a class="headerlink" href="#_17" title="Permanent link">&para;</a></h3>
<table>
<thead>
<tr>
<th>テスト種別</th>
<th>対象</th>
<th>目安数</th>
</tr>
</thead>
<tbody>
<tr>
<td>単体テスト</td>
<td>ドメインモデル、値オブジェクト</td>
<td>500件以上</td>
</tr>
<tr>
<td>統合テスト</td>
<td>リポジトリ、API コントローラー</td>
<td>100〜200件</td>
</tr>
<tr>
<td>E2E テスト</td>
<td>ユーザーシナリオ</td>
<td>10〜20件</td>
</tr>
</tbody>
</table>
<h3 id="_18">アーキテクチャ層とテスト手法の対応<a class="headerlink" href="#_18" title="Permanent link">&para;</a></h3>
<table>
<thead>
<tr>
<th>層</th>
<th>テスト手法</th>
<th>ツール</th>
</tr>
</thead>
<tbody>
<tr>
<td>Domain</td>
<td>単体テスト</td>
<td>JUnit 5, AssertJ</td>
</tr>
<tr>
<td>Application</td>
<td>単体テスト + モック</td>
<td>Mockito</td>
</tr>
<tr>
<td>Infrastructure (Repository)</td>
<td>統合テスト</td>
<td>Testcontainers</td>
</tr>
<tr>
<td>Infrastructure (Controller)</td>
<td>統合テスト</td>
<td>MockMvc + Testcontainers</td>
</tr>
<tr>
<td>受け入れ</td>
<td>シナリオテスト</td>
<td>Cucumber, Gherkin</td>
</tr>
</tbody>
</table>
<p>次章では、継続的リファクタリングについて解説します。値オブジェクトの導入、メソッド抽出、ドメインサービスへの移行などを学びます。</p>












                
              </article>
            </div>
          
          
<script>var target=document.getElementById(location.hash.slice(1));target&&target.name&&(target.checked=target.name.startsWith("__tabbed_"))</script>
        </div>
        
      </main>
      
        <footer class="md-footer">
  
  <div class="md-footer-meta md-typeset">
    <div class="md-footer-meta__inner md-grid">
      <div class="md-copyright">
  
  
    Made with
    <a href="https://squidfunk.github.io/mkdocs-material/" target="_blank" rel="noopener">
      Material for MkDocs
    </a>
  
</div>
      
        
<div class="md-social">
  
    
    
    
    
    <a href="https://github.com/k2works/case-study-accounting" target="_blank" rel="noopener" title="財務会計システム ケーススタディ" class="md-social__link">
      <svg xmlns="http://www.w3.org/2000/svg" viewBox="0 0 512 512"><!--! Font Awesome Free 7.1.0 by @fontawesome - https://fontawesome.com License - https://fontawesome.com/license/free (Icons: CC BY 4.0, Fonts: SIL OFL 1.1, Code: MIT License) Copyright 2025 Fonticons, Inc.--><path d="M173.9 397.4c0 2-2.3 3.6-5.2 3.6-3.3.3-5.6-1.3-5.6-3.6 0-2 2.3-3.6 5.2-3.6 3-.3 5.6 1.3 5.6 3.6m-31.1-4.5c-.7 2 1.3 4.3 4.3 4.9 2.6 1 5.6 0 6.2-2s-1.3-4.3-4.3-5.2c-2.6-.7-5.5.3-6.2 2.3m44.2-1.7c-2.9.7-4.9 2.6-4.6 4.9.3 2 2.9 3.3 5.9 2.6 2.9-.7 4.9-2.6 4.6-4.6-.3-1.9-3-3.2-5.9-2.9M252.8 8C114.1 8 8 113.3 8 252c0 110.9 69.8 205.8 169.5 239.2 12.8 2.3 17.3-5.6 17.3-12.1 0-6.2-.3-40.4-.3-61.4 0 0-70 15-84.7-29.8 0 0-11.4-29.1-27.8-36.6 0 0-22.9-15.7 1.6-15.4 0 0 24.9 2 38.6 25.8 21.9 38.6 58.6 27.5 72.9 20.9 2.3-16 8.8-27.1 16-33.7-55.9-6.2-112.3-14.3-112.3-110.5 0-27.5 7.6-41.3 23.6-58.9-2.6-6.5-11.1-33.3 2.6-67.9 20.9-6.5 69 27 69 27 20-5.6 41.5-8.5 62.8-8.5s42.8 2.9 62.8 8.5c0 0 48.1-33.6 69-27 13.7 34.7 5.2 61.4 2.6 67.9 16 17.7 25.8 31.5 25.8 58.9 0 96.5-58.9 104.2-114.8 110.5 9.2 7.9 17 22.9 17 46.4 0 33.7-.3 75.4-.3 83.6 0 6.5 4.6 14.4 17.3 12.1C436.2 457.8 504 362.9 504 252 504 113.3 391.5 8 252.8 8M105.2 352.9c-1.3 1-1 3.3.7 5.2 1.6 1.6 3.9 2.3 5.2 1 1.3-1 1-3.3-.7-5.2-1.6-1.6-3.9-2.3-5.2-1m-10.8-8.1c-.7 1.3.3 2.9 2.3 3.9 1.6 1 3.6.7 4.3-.7.7-1.3-.3-2.9-2.3-3.9-2-.6-3.6-.3-4.3.7m32.4 35.6c-1.6 1.3-1 4.3 1.3 6.2 2.3 2.3 5.2 2.6 6.5 1 1.3-1.3.7-4.3-1.3-6.2-2.2-2.3-5.2-2.6-6.5-1m-11.4-14.7c-1.6 1-1.6 3.6 0 5.9s4.3 3.3 5.6 2.3c1.6-1.3 1.6-3.9 0-6.2-1.4-2.3-4-3.3-5.6-2"/></svg>
    </a>
  
</div>
      
    </div>
  </div>
</footer>
      
    </div>
    <div class="md-dialog" data-md-component="dialog">
      <div class="md-dialog__inner md-typeset"></div>
    </div>
    
    
    
      
      
      <script id="__config" type="application/json">{"annotate": null, "base": "../../..", "features": ["navigation.tabs", "navigation.sections", "toc.integrate", "search.suggest", "search.highlight"], "search": "../../../assets/javascripts/workers/search.2c215733.min.js", "tags": null, "translations": {"clipboard.copied": "Copied to clipboard", "clipboard.copy": "Copy to clipboard", "search.result.more.one": "1 more on this page", "search.result.more.other": "# more on this page", "search.result.none": "No matching documents", "search.result.one": "1 matching document", "search.result.other": "# matching documents", "search.result.placeholder": "Type to start searching", "search.result.term.missing": "Missing", "select.version": "Select version"}, "version": null}</script>
    
    
      <script src="../../../assets/javascripts/bundle.79ae519e.min.js"></script>
      
        <script src="https://cdn.jsdelivr.net/npm/mermaid@10.6.1/dist/mermaid.min.js"></script>
      
        <script src="../../../assets/js/extra.js"></script>
      
    
  </body>
</html>